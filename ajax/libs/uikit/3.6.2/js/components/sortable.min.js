/*! UIkit 3.6.2 | https://www.getuikit.com | (c) 2014 - 2020 YOOtheme | MIT License */

!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e(require("uikit-util")):"function"==typeof define&&define.amd?define("uikitsortable",["uikit-util"],e):(t="undefined"!=typeof globalThis?globalThis:t||self).UIkitSortable=e(t.UIkit.util)}(this,function(d){"use strict";function e(t){return function(t,e,i){for(var n=[[]],o=0;o<t.length;o++){var r=t[o];if(d.isVisible(r))for(var s=c(r),a=n.length-1;0<=a;a--){var h=n[a];if(!h[0]){h.push(r);break}var l=void 0;if(l=h[0].offsetParent===r.offsetParent?c(h[0]):(s=c(r,!0),c(h[0],!0)),s[e]>=l[i]-1&&s[e]!==l[e]){n.push([r]);break}if(s[i]-1>l[e]||s[e]===l[e]){h.push(r);break}if(0===a){n.unshift([r]);break}}}return n}(t,"top","bottom")}function c(t,e){void 0===e&&(e=!1);var i=t.offsetTop,n=t.offsetLeft,o=t.offsetHeight,r=t.offsetWidth;return e&&(i=(t=d.offsetPosition(t))[0],n=t[1]),{top:i,left:n,bottom:i+o,right:n+r}}var n="uk-transition-leave",f="uk-transition-enter";function i(t,s,a,h){void 0===h&&(h=40);var l=g(s,!0),c={opacity:1},u={opacity:0},e=function(t){return function(){return l===g(s)?t():d.Promise.reject()}},i=e(function(){return d.addClass(s,n),d.Promise.all(p(s).map(function(e,i){return new d.Promise(function(t){return setTimeout(function(){return d.Transition.start(e,u,a/2,"ease").then(t)},i*h)})})).then(function(){return d.removeClass(s,n)})}),e=e(function(){var r=d.height(s);return d.addClass(s,f),t(),d.css(d.children(s),{opacity:0}),new d.Promise(function(o){requestAnimationFrame(function(){var t=d.children(s),e=d.height(s);d.height(s,r);var i=p(s);d.css(t,u);var n=i.map(function(e,i){return new d.Promise(function(t){return setTimeout(function(){return d.Transition.start(e,c,a/2,"ease").then(t)},i*h)})});r!==e&&n.push(d.Transition.start(s,{height:e},a/2+i.length*h,"ease")),d.Promise.all(n).then(function(){d.removeClass(s,f),l===g(s)&&(d.css(s,"height",""),d.css(t,{opacity:""}),delete s.dataset.transition),o()})})})});return(d.hasClass(s,n)?o(s):d.hasClass(s,f)?o(s).then(i):i()).then(e)}function g(t,e){return e&&(t.dataset.transition=1+g(t)),d.toNumber(t.dataset.transition)||0}function o(t){return d.Promise.all(d.children(t).filter(d.Transition.inProgress).map(function(e){return new d.Promise(function(t){return d.once(e,"transitionend transitioncanceled",t)})}))}function p(t){return e(d.children(t)).reduce(function(t,e){return t.concat(d.sortBy(e.filter(function(t){return d.isInView(t)}),"offsetLeft"))},[])}var m,v="uk-animation-target";function r(t,i,n){m=m||!!d.append(document.head,"<style> ."+v+" > * {\n            margin-top: 0 !important;\n            transform: none !important;\n        } </style>");var o=d.children(i),e=o.map(function(t){return b(t,!0)}),r=d.height(i);d.Transition.cancel(i),o.forEach(d.Transition.cancel),d.removeClass(i,v),y(i),t(),o=o.concat(d.children(i).filter(function(t){return!d.includes(o,t)})),d.trigger(d.toWindow(i),"resize"),d.fastdom.flush();var s,a,h,l=d.height(i),e=(s=i,h=e,t=(a=o).map(function(t,e){return!!(d.parent(t)&&e in h)&&(h[e]?d.isVisible(t)?w(t):{opacity:0}:{opacity:d.isVisible(t)?1:0})}),e=t.map(function(t,e){e=d.parent(a[e])===s&&(h[e]||b(a[e]));return!!e&&(t?"opacity"in t||(e.opacity%1?t.opacity=1:delete e.opacity):delete e.opacity,e)}),[t,e]),c=e[0],u=e[1];return d.addClass(i,v),o.forEach(function(t,e){return u[e]&&d.css(t,u[e])}),d.css(i,{height:r,display:"block"}),new d.Promise(function(e){return requestAnimationFrame(function(){var t=o.map(function(t,e){return d.Transition.start(t,c[e],n,"ease")}).concat(d.Transition.start(i,{height:l},n,"ease"));d.Promise.all(t).then(function(){o.forEach(function(t,e){return d.css(t,{display:0===c[e].opacity?"none":"",zIndex:""})}),y(i)},d.noop).then(e)})})}function b(t,e){var i=d.css(t,"zIndex");return!!d.isVisible(t)&&d.assign({display:"",opacity:e?d.css(t,"opacity"):"0",pointerEvents:"none",position:"absolute",zIndex:"auto"===i?d.index(t):i},w(t))}function y(t){d.css(t.children,{height:"",left:"",opacity:"",pointerEvents:"",position:"",top:"",width:""}),d.removeClass(t,v),d.css(t,{height:"",display:""})}function w(t){var e=d.offset(t),i=e.height,e=e.width,t=d.position(t);return{top:t.top,left:t.left,height:i,width:e}}var s,t={mixins:[{connected:function(){d.hasClass(this.$el,this.$name)||d.addClass(this.$el,this.$name)}},{props:{duration:Number,animation:String},data:{duration:150,animation:"slide"},methods:{animate:function(t,e){return void 0===e&&(e=this.$el),("fade"===this.animation?i:r)(t,e,this.duration).then(function(){return d.trigger(d.toWindow(e),"resize")},d.noop)}}}],props:{group:String,threshold:Number,clsItem:String,clsPlaceholder:String,clsDrag:String,clsDragState:String,clsBase:String,clsNoDrag:String,clsEmpty:String,clsCustom:String,handle:String},data:{group:!1,threshold:5,clsItem:"uk-sortable-item",clsPlaceholder:"uk-sortable-placeholder",clsDrag:"uk-sortable-drag",clsDragState:"uk-drag",clsBase:"uk-sortable",clsNoDrag:"uk-sortable-nodrag",clsEmpty:"uk-sortable-empty",clsCustom:"",handle:!1,pos:{}},created:function(){var i=this;["init","start","move","end"].forEach(function(t){var e=i[t];i[t]=function(t){d.assign(i.pos,d.getEventPos(t)),e(t)}})},events:{name:d.pointerDown,passive:!1,handler:"init"},computed:{target:function(){return(this.$el.tBodies||[this.$el])[0]},items:function(){return d.children(this.target)},isEmpty:{get:function(){return d.isEmpty(this.items)},watch:function(t){d.toggleClass(this.target,this.clsEmpty,t)},immediate:!0},handles:{get:function(t,e){t=t.handle;return t?d.$$(t,e):this.items},watch:function(t,e){d.css(e,{touchAction:"",userSelect:""}),d.css(t,{touchAction:d.hasTouch?"none":"",userSelect:"none"})},immediate:!0}},update:{write:function(){var t,e,i,n,o,r,s;this.drag&&d.parent(this.placeholder)&&(t=(i=this.pos).x,e=i.y,s=(n=this.origin).offsetTop,o=n.offsetLeft,i=this.placeholder,d.css(this.drag,{top:e-s,left:t-o}),(n=this.getSortable(document.elementFromPoint(t,e)))&&((s=n.items).some(d.Transition.inProgress)||(r={x:t,y:e},o=(o=s)[d.findIndex(o,function(t){return d.pointInRect(r,t.getBoundingClientRect())})],(!s.length||o&&o!==i)&&(this.touched.add(n),n!==(s=this.getSortable(i))&&s.remove(i),n.insert(i,function(t,e,i,n,o){var r=d.children(t);if(!r.length)return;r=1===r.length;r&&d.append(t,i);t=function(n){return n.some(function(t,e){var i=t.getBoundingClientRect();return n.slice(e+1).some(function(t){t=t.getBoundingClientRect();return!a([i.left,i.right],[t.left,t.right])})})}(d.children(t));r&&d.remove(i);r=e.getBoundingClientRect();if(!t)return o<r.top+r.height/2?e:e.nextElementSibling;o=i.getBoundingClientRect(),i=a([r.top,r.bottom],[o.top,o.bottom]);return i&&n>r.left+r.width/2||!i&&o.top<r.top?e.nextElementSibling:e}(n.target,o,i,t,e))))))},events:["move"]},methods:{init:function(t){var e=t.target,i=t.button,n=t.defaultPrevented,o=this.items.filter(function(t){return d.within(e,t)})[0];!o||n||0<i||d.isInput(e)||d.within(e,"."+this.clsNoDrag)||this.handle&&!d.within(e,this.handle)||(t.preventDefault(),this.touched=new Set([this]),this.placeholder=o,this.origin=d.assign({target:e,index:d.index(o)},this.pos),d.on(document,d.pointerMove,this.move),d.on(document,d.pointerUp,this.end),this.threshold||this.start(t))},start:function(t){this.drag=function(t,e){t=d.append(t,e.outerHTML.replace(/(^<)(?:li|tr)|(?:li|tr)(\/>$)/g,"$1div$2"));return d.css(t,"margin","0","important"),d.css(t,d.assign({boxSizing:"border-box",width:e.offsetWidth,height:e.offsetHeight},d.css(e,["paddingLeft","paddingRight","paddingTop","paddingBottom"]))),d.height(t.firstElementChild,d.height(e.firstElementChild)),t}(this.$container,this.placeholder);var e,i,n=this.placeholder.getBoundingClientRect(),o=n.left,n=n.top;d.assign(this.origin,{offsetLeft:this.pos.x-o,offsetTop:this.pos.y-n}),d.addClass(this.drag,this.clsDrag,this.clsCustom),d.addClass(this.placeholder,this.clsPlaceholder),d.addClass(this.items,this.clsItem),d.addClass(document.documentElement,this.clsDragState),d.trigger(this.$el,"start",[this,this.placeholder]),e=this.pos,i=Date.now(),s=setInterval(function(){var t=e.x,s=e.y;s+=window.pageYOffset;var a=.3*(Date.now()-i);i=Date.now(),d.scrollParents(document.elementFromPoint(t,e.y)).reverse().some(function(t){var e=t.scrollTop,i=t.scrollHeight,n=d.offset(d.getViewport(t)),o=n.top,r=n.bottom,n=n.height;if(o<s&&s<o+35)e-=a;else{if(!(s<r&&r-35<s))return;e+=a}if(0<e&&e<i-n)return d.scrollTop(t,e),!0})},15),this.move(t)},move:function(t){this.drag?this.$emit("move"):(Math.abs(this.pos.x-this.origin.x)>this.threshold||Math.abs(this.pos.y-this.origin.y)>this.threshold)&&this.start(t)},end:function(){var t,n=this;d.off(document,d.pointerMove,this.move),d.off(document,d.pointerUp,this.end),d.off(window,"scroll",this.scroll),this.drag&&(clearInterval(s),t=this.getSortable(this.placeholder),this===t?this.origin.index!==d.index(this.placeholder)&&d.trigger(this.$el,"moved",[this,this.placeholder]):(d.trigger(t.$el,"added",[t,this.placeholder]),d.trigger(this.$el,"removed",[this,this.placeholder])),d.trigger(this.$el,"stop",[this,this.placeholder]),d.remove(this.drag),this.drag=null,this.touched.forEach(function(t){var e=t.clsPlaceholder,i=t.clsItem;return n.touched.forEach(function(t){return d.removeClass(t.items,e,i)})}),this.touched=null,d.removeClass(document.documentElement,this.clsDragState))},insert:function(t,e){var i,n=this;e&&(t===e||t===e.previousElementSibling)||(d.addClass(this.items,this.clsItem),i=function(){return e?d.before(e,t):d.append(n.target,t)},this.animation?this.animate(i):i())},remove:function(t){d.within(t,this.target)&&(this.animation?this.animate(function(){return d.remove(t)}):d.remove(t))},getSortable:function(t){do{var e=this.$getComponent(t,"sortable");if(e&&(e===this||!1!==this.group&&e.group===this.group))return e}while(t=d.parent(t))}}};function a(t,e){return t[1]>e[0]&&e[1]>t[0]}return"undefined"!=typeof window&&window.UIkit&&window.UIkit.component("sortable",t),t});