"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function i(t,e,i){return e&&n(t.prototype,e),i&&n(t,i),t}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&r(t,e)}function s(t){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function r(t,e){return(r=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function o(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function l(n){var i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}();return function(){var t,e=s(n);return o(this,i?(t=s(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments))}}function c(t,e,n){return(c="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){t=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=s(t)););return t}(t,e);if(t){e=Object.getOwnPropertyDescriptor(t,e);return e.get?e.get.call(n):e.value}})(t,e,n||t)}function u(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t)){var n=[],i=!0,a=!1,s=void 0;try{for(var o,r=t[Symbol.iterator]();!(i=(o=r.next()).done)&&(n.push(o.value),!e||n.length!==e);i=!0);}catch(t){a=!0,s=t}finally{try{i||null==r.return||r.return()}finally{if(a)throw s}}return n}}(t,e)||d(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(t){return function(t){if(Array.isArray(t))return p(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||d(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(t,e){if(t){if("string"==typeof t)return p(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?p(t,e):void 0}}function p(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function f(t,e){return"string"==typeof t?(e||document).querySelector(t):t||null}function v(t){t=t.getBoundingClientRect();return{top:t.top+(document.documentElement.scrollTop||document.body.scrollTop),left:t.left+(document.documentElement.scrollLeft||document.body.scrollLeft)}}function g(t){return null===t.offsetParent}function m(t){t=t.getBoundingClientRect();return 0<=t.top&&0<=t.left&&t.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&t.right<=(window.innerWidth||document.documentElement.clientWidth)}Object.defineProperty(exports,"__esModule",{value:!0}),function(t,e){void 0===e&&(e={});var n,i=e.insertAt;"undefined"!=typeof document&&(n=document.head||document.getElementsByTagName("head")[0],(e=document.createElement("style")).type="text/css","top"===i&&n.firstChild?n.insertBefore(e,n.firstChild):n.appendChild(e),e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t)))}(':root {\n  --charts-label-color: #313b44;\n  --charts-axis-line-color: #f4f5f6;\n  --charts-tooltip-title: var(--charts-label-color);\n  --charts-tooltip-label: var(--charts-label-color);\n  --charts-tooltip-value: #192734;\n  --charts-tooltip-bg: #ffffff;\n  --charts-stroke-width: 2px;\n  --charts-dataset-circle-stroke: #ffffff;\n  --charts-dataset-circle-stroke-width: var(--charts-stroke-width);\n  --charts-legend-label: var(--charts-label-color);\n  --charts-legend-value: var(--charts-label-color); }\n\n.chart-container {\n  position: relative;\n  /* for absolutely positioned tooltip */\n  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", "Roboto", "Oxygen", "Ubuntu", "Cantarell", "Fira Sans", "Droid Sans", "Helvetica Neue", sans-serif; }\n  .chart-container .axis,\n  .chart-container .chart-label {\n    fill: var(--charts-label-color); }\n    .chart-container .axis line,\n    .chart-container .chart-label line {\n      stroke: var(--charts-axis-line-color); }\n  .chart-container .dataset-units circle {\n    stroke: var(--charts-dataset-circle-stroke);\n    stroke-width: var(--charts-dataset-circle-stroke-width); }\n  .chart-container .dataset-units path {\n    fill: none;\n    stroke-opacity: 1;\n    stroke-width: var(--charts-stroke-width); }\n  .chart-container .dataset-path {\n    stroke-width: var(--charts-stroke-width); }\n  .chart-container .path-group path {\n    fill: none;\n    stroke-opacity: 1;\n    stroke-width: var(--charts-stroke-width); }\n  .chart-container line.dashed {\n    stroke-dasharray: 5, 3; }\n  .chart-container .axis-line .specific-value {\n    text-anchor: start; }\n  .chart-container .axis-line .y-line {\n    text-anchor: end; }\n  .chart-container .axis-line .x-line {\n    text-anchor: middle; }\n  .chart-container .legend-dataset-label {\n    fill: var(--charts-legend-label);\n    font-weight: 600; }\n  .chart-container .legend-dataset-value {\n    fill: var(--charts-legend-value); }\n\n.graph-svg-tip {\n  position: absolute;\n  z-index: 99999;\n  padding: 10px;\n  font-size: 12px;\n  text-align: center;\n  background: var(--charts-tooltip-bg);\n  box-shadow: 0px 1px 4px rgba(17, 43, 66, 0.1), 0px 2px 6px rgba(17, 43, 66, 0.08), 0px 40px 30px -30px rgba(17, 43, 66, 0.1);\n  border-radius: 6px; }\n  .graph-svg-tip ul {\n    padding-left: 0;\n    display: flex; }\n  .graph-svg-tip ol {\n    padding-left: 0;\n    display: flex; }\n  .graph-svg-tip ul.data-point-list li {\n    min-width: 90px;\n    font-weight: 600; }\n  .graph-svg-tip .svg-pointer {\n    position: absolute;\n    height: 12px;\n    width: 12px;\n    border-radius: 2px;\n    background: var(--charts-tooltip-bg);\n    transform: rotate(45deg);\n    margin-top: -7px;\n    margin-left: -6px; }\n  .graph-svg-tip.comparison {\n    text-align: left;\n    padding: 0px;\n    pointer-events: none; }\n    .graph-svg-tip.comparison .title {\n      display: block;\n      padding: 16px;\n      margin: 0;\n      color: var(--charts-tooltip-title);\n      font-weight: 600;\n      line-height: 1;\n      pointer-events: none;\n      text-transform: uppercase; }\n      .graph-svg-tip.comparison .title strong {\n        color: var(--charts-tooltip-value); }\n    .graph-svg-tip.comparison ul {\n      margin: 0;\n      white-space: nowrap;\n      list-style: none; }\n      .graph-svg-tip.comparison ul.tooltip-grid {\n        display: grid;\n        grid-template-columns: repeat(4, minmax(0, 1fr));\n        gap: 5px; }\n    .graph-svg-tip.comparison li {\n      display: inline-block;\n      display: flex;\n      flex-direction: row;\n      font-weight: 600;\n      line-height: 1;\n      padding: 5px 15px 15px 15px; }\n      .graph-svg-tip.comparison li .tooltip-legend {\n        height: 12px;\n        width: 12px;\n        margin-right: 8px;\n        border-radius: 2px; }\n      .graph-svg-tip.comparison li .tooltip-label {\n        margin-top: 4px;\n        font-size: 11px;\n        line-height: 1.25;\n        max-width: 150px;\n        white-space: normal;\n        color: var(--charts-tooltip-label); }\n      .graph-svg-tip.comparison li .tooltip-value {\n        color: var(--charts-tooltip-value); }\n'),f.create=function(e,n){var i,a=document.createElement(e);for(i in n){var s,o=n[i];"inside"===i?f(o).appendChild(a):"around"===i?((s=f(o)).parentNode.insertBefore(a,s),a.appendChild(s)):"styles"===i?"object"===t(o)&&Object.keys(o).map(function(t){a.style[t]=o[t]}):i in a?a[i]=o:a.setAttribute(i,o)}return a};var y={margins:{top:10,bottom:10,left:20,right:20},paddings:{top:20,bottom:40,left:30,right:10},baseHeight:240,titleHeight:20,legendHeight:30,titleFontSize:12};function b(t){return t.titleHeight+t.margins.top+t.paddings.top}function x(t){return t.margins.left+t.paddings.left}function k(t){return t.margins.top+t.margins.bottom+t.paddings.top+t.paddings.bottom+t.titleHeight+t.legendHeight}function w(t){return t.margins.left+t.margins.right+t.paddings.left+t.paddings.right}var A=["pink","blue","green","grey","red","yellow","purple","teal","cyan","orange"],D={bar:A,line:A,pie:A,percentage:A,heatmap:["#ebedf0","#c6e48b","#7bc96f","#239a3b","#196127"],donut:A},L=Math.PI/180,C=function(){function a(t){var n=t.parent,n=void 0===n?null:n,t=t.colors,t=void 0===t?[]:t;e(this,a),this.parent=n,this.colors=t,this.titleName="",this.titleValue="",this.listValues=[],this.titleValueFirst=0,this.x=0,this.y=0,this.top=0,this.left=0,this.setup()}return i(a,[{key:"setup",value:function(){this.makeTooltip()}},{key:"refresh",value:function(){this.fill(),this.calcPosition()}},{key:"makeTooltip",value:function(){var t=this;this.container=f.create("div",{inside:this.parent,className:"graph-svg-tip comparison",innerHTML:'<span class="title"></span>\n\t\t\t\t<ul class="data-point-list"></ul>\n\t\t\t\t<div class="svg-pointer"></div>'}),this.hideTip(),this.title=this.container.querySelector(".title"),this.list=this.container.querySelector(".data-point-list"),this.dataPointList=this.container.querySelector(".data-point-list"),this.parent.addEventListener("mouseleave",function(){t.hideTip()})}},{key:"fill",value:function(){var t,i=this;this.index&&this.container.setAttribute("data-point-index",this.index),t=this.titleValueFirst?"<strong>".concat(this.titleValue,"</strong>").concat(this.titleName):"".concat(this.titleName,"<strong>").concat(this.titleValue,"</strong>"),4<this.listValues.length?this.list.classList.add("tooltip-grid"):this.list.classList.remove("tooltip-grid"),this.title.innerHTML=t,this.dataPointList.innerHTML="",this.listValues.map(function(t,e){var n=i.colors[e]||"black",e=0===t.formatted||t.formatted?t.formatted:t.value,t=f.create("li",{innerHTML:'<div class="tooltip-legend" style="background: '.concat(n,';"></div>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<div class="tooltip-value">').concat(0===e||e?e:"",'</div>\n\t\t\t\t\t\t<div class="tooltip-label">').concat(t.title||"","</div>\n\t\t\t\t\t</div>")});i.dataPointList.appendChild(t)})}},{key:"calcPosition",value:function(){var t=this.container.offsetWidth;this.top=this.y-this.container.offsetHeight-7.48,this.left=this.x-t/2;var e=this.parent.offsetWidth-t,n=this.container.querySelector(".svg-pointer");this.left<0?(n.style.left="calc(50% - ".concat(-1*this.left,"px)"),this.left=0):this.left>e?(t=this.left-e,t="calc(50% + ".concat(t,"px)"),n.style.left=t,this.left=e):n.style.left="50%"}},{key:"setValues",value:function(t,e){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:[],a=4<arguments.length&&void 0!==arguments[4]?arguments[4]:-1;this.titleName=n.name,this.titleValue=n.value,this.listValues=i,this.x=t,this.y=e,this.titleValueFirst=n.valueFirst||0,this.index=a,this.refresh()}},{key:"hideTip",value:function(){this.container.style.top="0px",this.container.style.left="0px",this.container.style.opacity="0"}},{key:"showTip",value:function(){this.container.style.top=this.top+"px",this.container.style.left=this.left+"px",this.container.style.opacity="1"}}]),a}();function M(t){return parseFloat(t.toFixed(2))}function P(t,e,n){var i=3<arguments.length&&void 0!==arguments[3]&&arguments[3];n=n||(i?t[0]:t[t.length-1]);n=new Array(Math.abs(e)).fill(n);return i?n.concat(t):t.concat(n)}function T(t,e){return(t+"").length*e}function N(t,e){return{x:Math.sin(t*L)*e,y:Math.cos(t*L)*e}}function E(t){var e=1<arguments.length&&void 0!==arguments[1]&&arguments[1];return!(Number.isNaN(t)||void 0===t||!Number.isFinite(t)||e&&t<0)}function O(t){return Number(Math.round(t+"e4")+"e-4")}function S(t,e){var n,e=t<=e?(n=e-t,t):(n=t-e,e);return[n,e]}function F(t,e){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:e.length-t.length;return 0<n?t=P(t,n):e=P(e,n),[t,e]}function z(t,e){if(t)return t.length>e?t.slice(0,e-3)+"...":t}function H(t){var e;if("number"==typeof t)e=t;else if("string"==typeof t&&(e=Number(t),Number.isNaN(e)))return t;var n=Math.floor(Math.log10(Math.abs(e)));if(n<=2)return e;t=Math.floor(n/3),n=Math.pow(10,n-3*t)*+(e/Math.pow(10,n)).toFixed(1);return Math.round(100*n)/100+" "+["","K","M","B","T"][t]}function R(t,e){for(var n=[],i=0;i<t.length;i++)n.push([t[i],e[i]]);function a(t,e,n,i){var a,i=(n=(a=e||t,n=(e=n||t)[0]-a[0],a=e[1]-a[1],{length:Math.sqrt(Math.pow(n,2)+Math.pow(a,2)),angle:Math.atan2(a,n)})).angle+(i?Math.PI:0),n=.2*n.length;return[t[0]+Math.cos(i)*n,t[1]+Math.sin(i)*n]}return n.reduce(function(t,e,n,i){return 0===n?"".concat(e[0],",").concat(e[1]):"".concat(t," ").concat((t=e,n=a((e=i)[(i=n)-1],e[i-2],t),i=a(t,e[i-1],e[i+1],!0),"C ".concat(n[0],",").concat(n[1]," ").concat(i[0],",").concat(i[1]," ").concat(t[0],",").concat(t[1])))},"")}function W(t,e){return"string"==typeof t?(e||document).querySelector(t):t||null}function j(e,n){var i,a=document.createElementNS("http://www.w3.org/2000/svg",e);for(i in n){var s,o=n[i];"inside"===i?W(o).appendChild(a):"around"===i?((s=W(o)).parentNode.insertBefore(a,s),a.appendChild(s)):"styles"===i?"object"===t(o)&&Object.keys(o).map(function(t){a.style[t]=o[t]}):("className"===i&&(i="class"),"innerHTML"===i?a.textContent=o:a.setAttribute(i,o))}return a}function I(t,e){return j("linearGradient",{inside:t,id:e,x1:0,x2:0,y1:0,y2:1})}function B(t,e,n,i){return j("stop",{inside:t,style:"stop-color: ".concat(n),offset:e,"stop-opacity":i})}function Y(t){var e=2<arguments.length&&void 0!==arguments[2]?arguments[2]:void 0,t={className:t,transform:1<arguments.length&&void 0!==arguments[1]?arguments[1]:""};return e&&(t.inside=e),j("g",t)}function V(t){return j("path",{className:1<arguments.length&&void 0!==arguments[1]?arguments[1]:"",d:t,styles:{stroke:2<arguments.length&&void 0!==arguments[2]?arguments[2]:"none",fill:3<arguments.length&&void 0!==arguments[3]?arguments[3]:"none","stroke-width":4<arguments.length&&void 0!==arguments[4]?arguments[4]:2}})}function U(t,e,n,i){var a=4<arguments.length&&void 0!==arguments[4]?arguments[4]:1,s=5<arguments.length&&void 0!==arguments[5]?arguments[5]:0,o=n.x+t.x,r=n.y+t.y,t=n.x+e.x,e=n.y+e.y;return"M".concat(n.x," ").concat(n.y,"\n\t\tL").concat(o," ").concat(r,"\n\t\tA ").concat(i," ").concat(i," 0 ").concat(s," ").concat(a?1:0,"\n\t\t").concat(t," ").concat(e," z")}function q(t,e,n,i){var a=4<arguments.length&&void 0!==arguments[4]?arguments[4]:1,s=5<arguments.length&&void 0!==arguments[5]?arguments[5]:0,o=n.x+t.x,r=n.y+t.y,l=n.x+e.x,t=2*n.y,e=n.y+e.y;return"M".concat(n.x," ").concat(n.y,"\n\t\tL").concat(o," ").concat(r,"\n\t\tA ").concat(i," ").concat(i," 0 ").concat(s," ").concat(a?1:0,"\n\t\t").concat(l," ").concat(t," z\n\t\tL").concat(o," ").concat(t,"\n\t\tA ").concat(i," ").concat(i," 0 ").concat(s," ").concat(a?1:0,"\n\t\t").concat(l," ").concat(e," z")}function G(t,e,n,i){var a=4<arguments.length&&void 0!==arguments[4]?arguments[4]:1,s=5<arguments.length&&void 0!==arguments[5]?arguments[5]:0,o=n.x+t.x,r=n.y+t.y,t=n.x+e.x,e=n.y+e.y;return"M".concat(o," ").concat(r,"\n\t\tA ").concat(i," ").concat(i," 0 ").concat(s," ").concat(a?1:0,"\n\t\t").concat(t," ").concat(e)}function _(t,e,n,i){var a=4<arguments.length&&void 0!==arguments[4]?arguments[4]:1,s=5<arguments.length&&void 0!==arguments[5]?arguments[5]:0,o=n.x+t.x,r=n.y+t.y,l=n.x+e.x,e=2*i+r,t=n.y+t.y;return"M".concat(o," ").concat(r,"\n\t\tA ").concat(i," ").concat(i," 0 ").concat(s," ").concat(a?1:0,"\n\t\t").concat(l," ").concat(e,"\n\t\tM").concat(o," ").concat(e,"\n\t\tA ").concat(i," ").concat(i," 0 ").concat(s," ").concat(a?1:0,"\n\t\t").concat(l," ").concat(t)}function X(t,e){var n=2<arguments.length&&void 0!==arguments[2]&&arguments[2],i="path-fill-gradient-"+e+"-"+(n?"lighter":"default"),t=I(t,i),n=n?[.4,.05,0]:[1,.6,.2];return B(t,"0%",e,n[0]),B(t,"50%",e,n[1]),B(t,"100%",e,n[2]),i}function J(t,e,n){var i=n/2,e=e-i;return"M".concat(t,",0 h").concat(e," q").concat(i,",0 ").concat(i,",").concat(i," q0,").concat(i," -").concat(i,",").concat(i," h-").concat(e," v").concat(n,"z")}function K(t,e,n){var i=n/2,e=e-i;return"M".concat(t+i,",0 h").concat(e," v").concat(n," h-").concat(e," q-").concat(i,", 0 -").concat(i,",-").concat(i," q0,-").concat(i," ").concat(i,",-").concat(i,"z")}function $(t,e,n,i,a){var s=6<arguments.length&&void 0!==arguments[6]?arguments[6]:{},o={className:t,x:e,y:n,width:i,height:i,rx:a,fill:5<arguments.length&&void 0!==arguments[5]?arguments[5]:"none"};return Object.keys(s).map(function(t){o[t]=s[t]}),j("rect",o)}function Q(t,e,n,i){var a=5<arguments.length?arguments[5]:void 0,s=6<arguments.length?arguments[6]:void 0,o=7<arguments.length&&void 0!==arguments[7]?arguments[7]:null,i={className:"legend-dot",x:0,y:4-n,height:n,width:n,rx:i,fill:4<arguments.length&&void 0!==arguments[4]?arguments[4]:"none"},o=j("text",{className:"legend-dataset-label",x:n,y:0,dx:(o=o||10)+"px",dy:o/3+"px","font-size":1.6*o+"px","text-anchor":"start",innerHTML:a=8<arguments.length&&void 0!==arguments[8]&&arguments[8]?z(a,18):a}),a=null;s&&(a=j("text",{className:"legend-dataset-value",x:n,y:20,dx:"10px",dy:10/3+"px","font-size":"12px","text-anchor":"start",innerHTML:s}));e=j("g",{transform:"translate(".concat(t,", ").concat(e,")")});return e.appendChild(j("rect",i)),e.appendChild(o),s&&a&&e.appendChild(a),e}function Z(t,e,n,i){var a=4<arguments.length&&void 0!==arguments[4]?arguments[4]:{},s=a.fontSize||10;return j("text",{className:t,x:e,y:n,dy:(void 0!==a.dy?a.dy:s/2)+"px","font-size":s+"px",fill:a.fill||"var(--charts-label-color)","text-anchor":a.textAnchor||"start",innerHTML:i})}function tt(t,e,n,i){var a=4<arguments.length&&void 0!==arguments[4]?arguments[4]:{},a=j("line",{className:"line-vertical "+a.className,x1:0,x2:0,y1:n,y2:i,styles:{stroke:a.stroke}}),e=j("text",{x:0,y:i<n?n+4:n-4-10,dy:"10px","font-size":"10px","text-anchor":"middle",innerHTML:e+""}),t=j("g",{transform:"translate(".concat(t,", 0)")});return t.appendChild(a),t.appendChild(e),t}function et(t,e,n,i){var a=4<arguments.length&&void 0!==arguments[4]?arguments[4]:{};a.lineType||(a.lineType=""),a.shortenNumbers&&(e=H(e));a=j("line",{className:"line-horizontal "+a.className+("dashed"===a.lineType?"dashed":""),x1:n,x2:i,y1:0,y2:0,styles:{stroke:a.stroke}}),e=j("text",{x:n<i?n-4:n+4,y:0,dy:"3px","font-size":"10px","text-anchor":n<i?"end":"start",innerHTML:e+""}),t=j("g",{transform:"translate(0, ".concat(t,")"),"stroke-opacity":1});return 0!==e&&"0"!==e||(t.style.stroke="rgba(27, 31, 35, 0.6)"),t.appendChild(a),t.appendChild(e),t}var nt={bar:function(t){var e;"rect"!==t.nodeName&&(e=t.getAttribute("transform"),t=t.childNodes[0]);t=t.cloneNode();return t.style.fill="#000000",t.style.opacity="0.4",e&&t.setAttribute("transform",e),t},dot:function(t){var e;"circle"!==t.nodeName&&(e=t.getAttribute("transform"),t=t.childNodes[0]);var n=t.cloneNode(),i=t.getAttribute("r"),t=t.getAttribute("fill");return n.setAttribute("r",parseInt(i)+4),n.setAttribute("fill",t),n.style.opacity="0.6",e&&n.setAttribute("transform",e),n},heat_square:function(t){var e;"circle"!==t.nodeName&&(e=t.getAttribute("transform"),t=t.childNodes[0]);var n=t.cloneNode(),i=t.getAttribute("r"),t=t.getAttribute("fill");return n.setAttribute("r",parseInt(i)+4),n.setAttribute("fill",t),n.style.opacity="0.6",e&&n.setAttribute("transform",e),n}},it={bar:function(t,e){var n;"rect"!==t.nodeName&&(n=t.getAttribute("transform"),t=t.childNodes[0]);var i=["x","y","width","height"];Object.values(t.attributes).filter(function(t){return i.includes(t.name)&&t.specified}).map(function(t){e.setAttribute(t.name,t.nodeValue)}),n&&e.setAttribute("transform",n)},dot:function(t,e){var n;"circle"!==t.nodeName&&(n=t.getAttribute("transform"),t=t.childNodes[0]);var i=["cx","cy"];Object.values(t.attributes).filter(function(t){return i.includes(t.name)&&t.specified}).map(function(t){e.setAttribute(t.name,t.nodeValue)}),n&&e.setAttribute("transform",n)},heat_square:function(t,e){var n;"circle"!==t.nodeName&&(n=t.getAttribute("transform"),t=t.childNodes[0]);var i=["cx","cy"];Object.values(t.attributes).filter(function(t){return i.includes(t.name)&&t.specified}).map(function(t){e.setAttribute(t.name,t.nodeValue)}),n&&e.setAttribute("transform",n)}},at={pink:"#F683AE",blue:"#318AD8",green:"#48BB74",grey:"#A6B1B9",red:"#F56B6B",yellow:"#FACF7A",purple:"#44427B",teal:"#5FD8C4",cyan:"#15CCEF",orange:"#F8814F","light-pink":"#FED7E5","light-blue":"#BFDDF7","light-green":"#48BB74","light-grey":"#F4F5F6","light-red":"#F6DFDF","light-yellow":"#FEE9BF","light-purple":"#E8E8F7","light-teal":"#D3FDF6","light-cyan":"#DDF8FD","light-orange":"#FECDB8"};function st(t,e,n,i){e="string"==typeof e?e:e.join(", ");return[t,{transform:n.join(", ")},i,"easein","translate",{transform:e}]}function rt(t,e,n){return st(t,[0,n],[0,e],350)}function ot(t,e){return[t,{d:e},350,"easein"]}var lt={ease:"0.25 0.1 0.25 1",linear:"0 0 1 1",easein:"0.1 0.8 0.2 1",easeout:"0 0 0.58 1",easeinout:"0.42 0 0.58 1"};function ct(t,e,n){var i,a=3<arguments.length&&void 0!==arguments[3]?arguments[3]:"linear",s=4<arguments.length&&void 0!==arguments[4]?arguments[4]:void 0,o=5<arguments.length&&void 0!==arguments[5]?arguments[5]:{},r=t.cloneNode(!0),l=t.cloneNode(!0);for(i in e){var c,h=void 0,h="transform"===i?document.createElementNS("http://www.w3.org/2000/svg","animateTransform"):document.createElementNS("http://www.w3.org/2000/svg","animate"),u=o[i]||t.getAttribute(i),d=e[i],p={attributeName:i,from:u,to:d,begin:"0s",dur:n/1e3+"s",values:u+";"+d,keySplines:lt[a],keyTimes:"0;1",calcMode:"spline",fill:"freeze"};for(c in s&&(p.type=s),p)h.setAttribute(c,p[c]);r.appendChild(h),s?l.setAttribute(i,"translate(".concat(d,")")):l.setAttribute(i,d)}return[r,l]}function ut(t,e){t.style.transform=e,t.style.webkitTransform=e,t.style.msTransform=e,t.style.mozTransform=e,t.style.oTransform=e}function ht(t,n){var a=[],s=[];n.map(function(t){var e=t[0],n=e.parentNode;t[0]=e;var i=u(ct.apply(void 0,h(t)),2),t=i[0],i=i[1];a.push(i),s.push([t,n]),n.replaceChild(t,e)});t=t.cloneNode(!0);return s.map(function(t,e){t[1].replaceChild(a[e],t[0]),n[e][0]=a[e]}),t}function dt(t,e,n){var i;0!==n.length&&(i=ht(e,n),e.parentNode==t&&(t.removeChild(e),t.appendChild(i)),setTimeout(function(){i.parentNode==t&&(t.removeChild(i),t.appendChild(e))},250))}var pt=function(){function a(t,n){if(e(this,a),this.parent="string"==typeof t?document.querySelector(t):t,!(this.parent instanceof HTMLElement))throw new Error("No `parent` element to render on was provided.");this.rawChartArgs=n,this.title=n.title||"",this.type=n.type||"",this.realData=this.prepareData(n.data),this.data=this.prepareFirstData(this.realData),this.colors=this.validateColors(n.colors,this.type),this.config={showTooltip:1,showLegend:1,isNavigable:n.isNavigable||0,animate:void 0!==n.animate?n.animate:1,truncateLegends:n.truncateLegends||1},this.measures=JSON.parse(JSON.stringify(y));t=this.measures;this.setMeasures(n),this.title.length||(t.titleHeight=0),this.config.showLegend||(t.legendHeight=0),this.argHeight=n.height||t.baseHeight,this.state={},this.options={},this.initTimeout=700,this.config.isNavigable&&(this.overlays=[]),this.configure(n)}return i(a,[{key:"prepareData",value:function(t){return t}},{key:"prepareFirstData",value:function(t){return t}},{key:"validateColors",value:function(t,e){var i=[];return(t=(t||[]).concat(D[e])).forEach(function(t){var e,n=/rgb[a]{0,1}\([\d, ]+\)/gim.test(e=t)?/\D+(\d*)\D+(\d*)\D+(\d*)/gim.exec(e).map(function(t,e){return 0!==e?Number(t).toString(16):"#"}).reduce(function(t,e){return"".concat(t).concat(e)}):at[e]||e;/(^\s*)(#)((?:[A-Fa-f0-9]{3}){1,2})$/i.test(e=n)||/(^\s*)(rgb|hsl)(a?)[(]\s*([\d.]+\s*%?)\s*,\s*([\d.]+\s*%?)\s*,\s*([\d.]+\s*%?)\s*(?:,\s*([\d.]+)\s*)?[)]$/i.test(e)?i.push(n):console.warn('"'+t+'" is not a valid color.')}),i}},{key:"setMeasures",value:function(){}},{key:"configure",value:function(){var t=this,e=this.argHeight;this.baseHeight=e,this.height=e-k(this.measures),this.boundDrawFn=function(){return t.draw(!0)},window.addEventListener("resize",this.boundDrawFn),window.addEventListener("orientationchange",this.boundDrawFn)}},{key:"destroy",value:function(){window.removeEventListener("resize",this.boundDrawFn),window.removeEventListener("orientationchange",this.boundDrawFn)}},{key:"setup",value:function(){this.makeContainer(),this.updateWidth(),this.makeTooltip(),this.draw(!1,!0)}},{key:"makeContainer",value:function(){this.parent.innerHTML="";var t={inside:this.parent,className:"chart-container"};this.independentWidth&&(t.styles={width:this.independentWidth+"px"}),this.container=f.create("div",t)}},{key:"makeTooltip",value:function(){this.tip=new C({parent:this.container,colors:this.colors}),this.bindTooltip()}},{key:"bindTooltip",value:function(){}},{key:"draw",value:function(){var e=this,t=0<arguments.length&&void 0!==arguments[0]&&arguments[0],n=1<arguments.length&&void 0!==arguments[1]&&arguments[1];t&&g(this.parent)||(this.updateWidth(),this.calc(t),this.makeChartArea(),this.setupComponents(),this.components.forEach(function(t){return t.setup(e.drawArea)}),this.render(this.components,!1),n&&(this.data=this.realData,setTimeout(function(){e.update(e.data)},this.initTimeout)),this.renderLegend(),this.setupNavigation(n))}},{key:"calc",value:function(){}},{key:"updateWidth",value:function(){var t,e;this.baseWidth=(t=this.parent,e=window.getComputedStyle(t),e=parseFloat(e.paddingLeft)+parseFloat(e.paddingRight),t.clientWidth-e),this.width=this.baseWidth-w(this.measures)}},{key:"makeChartArea",value:function(){this.svg&&this.container.removeChild(this.svg);var t=this.measures;this.svg=j("svg",{className:"frappe-chart chart",inside:this.container,width:this.baseWidth,height:this.baseHeight}),this.svgDefs=j("defs",{inside:this.svg}),this.title.length&&(this.titleEL=Z("title",t.margins.left,t.margins.top,this.title,{fontSize:t.titleFontSize,fill:"#666666",dy:t.titleFontSize}));var e=b(t);this.drawArea=Y(this.type+"-chart chart-draw-area","translate(".concat(x(t),", ").concat(e,")")),this.config.showLegend&&(e+=this.height+t.paddings.bottom,this.legendArea=Y("chart-legend","translate(".concat(x(t),", ").concat(e,")"))),this.title.length&&this.svg.appendChild(this.titleEL),this.svg.appendChild(this.drawArea),this.config.showLegend&&this.svg.appendChild(this.legendArea),this.updateTipOffset(x(t),b(t))}},{key:"updateTipOffset",value:function(t,e){this.tip.offset={x:t,y:e}}},{key:"setupComponents",value:function(){this.components=new Map}},{key:"update",value:function(t){t||console.error("No data to update."),this.data=this.prepareData(t),this.calc(),this.render(this.components,this.config.animate)}},{key:"render",value:function(){var t=this,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.components,n=!(1<arguments.length&&void 0!==arguments[1])||arguments[1];this.config.isNavigable&&this.overlays.map(function(t){return t.parentNode.removeChild(t)});var i=[];e.forEach(function(t){i=i.concat(t.update(n))}),0<i.length?(dt(this.container,this.svg,i),setTimeout(function(){e.forEach(function(t){return t.make()}),t.updateNav()},400)):(e.forEach(function(t){return t.make()}),this.updateNav())}},{key:"updateNav",value:function(){this.config.isNavigable&&(this.makeOverlay(),this.bindUnits())}},{key:"renderLegend",value:function(t){var i=this;this.legendArea.textContent="";var a=0,s=0;t.map(function(t,e){Math.floor(i.width/150)<a&&(a=0,s+=i.config.legendRowHeight);var n=150*a,n=i.makeLegend(t,e,n,s);i.legendArea.appendChild(n),a++})}},{key:"makeLegend",value:function(){}},{key:"setupNavigation",value:function(){var e=this,t=0<arguments.length&&void 0!==arguments[0]&&arguments[0];this.config.isNavigable&&t&&(this.bindOverlay(),this.keyActions={13:this.onEnterKey.bind(this),37:this.onLeftArrow.bind(this),38:this.onUpArrow.bind(this),39:this.onRightArrow.bind(this),40:this.onDownArrow.bind(this)},document.addEventListener("keydown",function(t){m(e.container)&&(t=t||window.event,e.keyActions[t.keyCode]&&e.keyActions[t.keyCode]())}))}},{key:"makeOverlay",value:function(){}},{key:"updateOverlay",value:function(){}},{key:"bindOverlay",value:function(){}},{key:"bindUnits",value:function(){}},{key:"onLeftArrow",value:function(){}},{key:"onRightArrow",value:function(){}},{key:"onUpArrow",value:function(){}},{key:"onDownArrow",value:function(){}},{key:"onEnterKey",value:function(){}},{key:"addDataPoint",value:function(){}},{key:"removeDataPoint",value:function(){}},{key:"getDataPoint",value:function(){}},{key:"setCurrentDataPoint",value:function(){}},{key:"updateDataset",value:function(){}},{key:"export",value:function(){var t=function(t){var e=t.cloneNode(!0);e.classList.add("chart-container"),e.setAttribute("xmlns","http://www.w3.org/2000/svg"),e.setAttribute("xmlns:xlink","http://www.w3.org/1999/xlink");t=f.create("style",{innerHTML:".chart-container{position:relative;font-family:-apple-system,BlinkMacSystemFont,'Segoe UI','Roboto','Oxygen','Ubuntu','Cantarell','Fira Sans','Droid Sans','Helvetica Neue',sans-serif}.chart-container .axis,.chart-container .chart-label{fill:#555b51}.chart-container .axis line,.chart-container .chart-label line{stroke:#dadada}.chart-container .dataset-units circle{stroke:#fff;stroke-width:2}.chart-container .dataset-units path{fill:none;stroke-opacity:1;stroke-width:2px}.chart-container .dataset-path{stroke-width:2px}.chart-container .path-group path{fill:none;stroke-opacity:1;stroke-width:2px}.chart-container line.dashed{stroke-dasharray:5,3}.chart-container .axis-line .specific-value{text-anchor:start}.chart-container .axis-line .y-line{text-anchor:end}.chart-container .axis-line .x-line{text-anchor:middle}.chart-container .legend-dataset-text{fill:#6c7680;font-weight:600}.graph-svg-tip{position:absolute;z-index:99999;padding:10px;font-size:12px;color:#959da5;text-align:center;background:rgba(0,0,0,.8);border-radius:3px}.graph-svg-tip ul{padding-left:0;display:flex}.graph-svg-tip ol{padding-left:0;display:flex}.graph-svg-tip ul.data-point-list li{min-width:90px;flex:1;font-weight:600}.graph-svg-tip strong{color:#dfe2e5;font-weight:600}.graph-svg-tip .svg-pointer{position:absolute;height:5px;margin:0 0 0 -5px;content:' ';border:5px solid transparent;}.graph-svg-tip.comparison{padding:0;text-align:left;pointer-events:none}.graph-svg-tip.comparison .title{display:block;padding:10px;margin:0;font-weight:600;line-height:1;pointer-events:none}.graph-svg-tip.comparison ul{margin:0;white-space:nowrap;list-style:none}.graph-svg-tip.comparison li{display:inline-block;padding:5px 10px}"});e.insertBefore(t,e.firstChild);t=f.create("div");return t.appendChild(e),t.innerHTML}(this.svg);!function(t,e){var n=document.createElement("a");n.style="display: none";var e=new Blob(e,{type:"image/svg+xml; charset=utf-8"}),i=window.URL.createObjectURL(e);n.href=i,n.download=t,document.body.appendChild(n),n.click(),setTimeout(function(){document.body.removeChild(n),window.URL.revokeObjectURL(i)},300)}(this.title||"Chart",[t])}}]),a}(),ft=function(){a(r,pt);var o=l(r);function r(t,n){return e(this,r),o.call(this,t,n)}return i(r,[{key:"configure",value:function(t){c(s(r.prototype),"configure",this).call(this,t),this.config.formatTooltipY=(t.tooltipOptions||{}).formatTooltipY,this.config.maxSlices=t.maxSlices||20,this.config.maxLegendPoints=t.maxLegendPoints||20,this.config.legendRowHeight=60}},{key:"calc",value:function(){var i=this,e=this.state,t=this.config.maxSlices;e.sliceTotals=[];var n,a=this.data.labels.map(function(t,e){var n=0;return i.data.datasets.map(function(t){n+=t.values[e]}),[n,t]}).filter(function(t){return 0<=t[0]}),s=a;a.length>t&&(a.sort(function(t,e){return e[0]-t[0]}),s=a.slice(0,t-1),a=a.slice(t-1),n=0,a.map(function(t){n+=t[0]}),s.push([n,"Rest"]),this.colors[t-1]="grey"),e.labels=[],s.map(function(t){e.sliceTotals.push(round(t[0])),e.labels.push(t[1])}),e.grandTotal=e.sliceTotals.reduce(function(t,e){return t+e},0),this.center={x:this.width/2,y:this.height/2}}},{key:"renderLegend",value:function(){var t=this.state;this.legendArea.textContent="",this.legendTotals=t.sliceTotals.slice(0,this.config.maxLegendPoints),c(s(r.prototype),"renderLegend",this).call(this,this.legendTotals)}},{key:"makeLegend",value:function(t,e,n,i){t=this.config.formatTooltipY?this.config.formatTooltipY(t):t;return Q(n,i,12,3,this.colors[e],this.state.labels[e],t,null,this.config.truncateLegends)}}]),r}(),vt=["January","February","March","April","May","June","July","August","September","October","November","December"],gt=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];function mt(t){t=new Date(t);return t.setMinutes(t.getMinutes()-t.getTimezoneOffset()),t}function yt(t){var e=t.getDate(),n=t.getMonth()+1;return[t.getFullYear(),(9<n?"":"0")+n,(9<e?"":"0")+e].join("-")}function bt(t){return new Date(t.getTime())}function xt(t,e){t=Dt(t);return Math.ceil((t=t,(mt(e)-mt(t))/864e5/7))}function kt(t,e){return t.getMonth()===e.getMonth()&&t.getFullYear()===e.getFullYear()}function wt(t){var e=1<arguments.length&&void 0!==arguments[1]&&arguments[1],t=vt[t];return e?t.slice(0,3):t}function At(t,e){return new Date(e,t+1,0)}function Dt(t){var e=bt(t),t=e.getDay();return 0!==t&&Lt(e,-1*t),e}function Lt(t,e){t.setDate(t.getDate()+e)}var Ct=function(){function r(t){var n=t.layerClass,i=void 0===n?"":n,a=t.layerTransform,s=void 0===a?"":a,o=t.constants,n=t.getData,a=t.makeElements,t=t.animateElements;e(this,r),this.layerTransform=s,this.constants=o,this.makeElements=a,this.getData=n,this.animateElements=t,this.store=[],this.labels=[],this.layerClass=i,this.layerClass="function"==typeof this.layerClass?this.layerClass():this.layerClass,this.refresh()}return i(r,[{key:"refresh",value:function(t){this.data=t||this.getData()}},{key:"setup",value:function(t){this.layer=Y(this.layerClass,this.layerTransform,t)}},{key:"make",value:function(){this.render(this.data),this.oldData=this.data}},{key:"render",value:function(t){var e=this;this.store=this.makeElements(t),this.layer.textContent="",this.store.forEach(function(t){e.layer.appendChild(t)}),this.labels.forEach(function(t){e.layer.appendChild(t)})}},{key:"update",value:function(){var t=!(0<arguments.length&&void 0!==arguments[0])||arguments[0];this.refresh();var e=[];return t&&(e=this.animateElements(this.data)||[]),e}}]),r}(),Mt={donutSlices:{layerClass:"donut-slices",makeElements:function(n){return n.sliceStrings.map(function(t,e){e=V(t,"donut-path",n.colors[e],"none",n.strokeWidth);return e.style.transition="transform .3s;",e})},animateElements:function(n){return this.store.map(function(t,e){return ot(t,n.sliceStrings[e])})}},pieSlices:{layerClass:"pie-slices",makeElements:function(n){return n.sliceStrings.map(function(t,e){e=V(t,"pie-path","none",n.colors[e]);return e.style.transition="transform .3s;",e})},animateElements:function(n){return this.store.map(function(t,e){return ot(t,n.sliceStrings[e])})}},percentageBars:{layerClass:"percentage-bars",makeElements:function(a){var s=this,o=a.xPositions.length;return a.xPositions.map(function(t,e){var n=e==o-1,i=0==e;return function(t,e,n,i,a,s,o){o=6<arguments.length&&void 0!==o?o:"none";return s?V(J(t,n,i),"percentage-bar",null,o):a?V(K(t,n,i),"percentage-bar",null,o):j("rect",{className:"percentage-bar",x:t,y:0,width:n,height:i,fill:o})}(t,0,a.widths[e],s.constants.barHeight,i,n,a.colors[e])})},animateElements:function(t){if(t)return[]}},yAxis:{layerClass:"y axis",makeElements:function(n){var i=this;return n.positions.map(function(t,e){return function(t,e,n,i){var a=3<arguments.length&&void 0!==i?i:{};E(t)||(t=0),a.pos||(a.pos="left"),a.offset||(a.offset=0),a.mode||(a.mode="span"),a.stroke||(a.stroke="#E2E6E9"),a.className||(a.className="");var s=-6,i="span"===a.mode?n+6:0;return"tick"===a.mode&&"right"===a.pos&&(s=n+6,i=n),s+=a.offset,i+=a.offset,"number"==typeof e&&(e=O(e)),et(t,e,s,i,{className:a.className,lineType:a.lineType,shortenNumbers:a.shortenNumbers})}(t,n.labels[e],i.constants.width,{mode:i.constants.mode,pos:i.constants.pos,shortenNumbers:i.constants.shortenNumbers})})},animateElements:function(t){var n=t.positions,e=t.labels,i=this.oldData.positions,a=this.oldData.labels,t=u(F(i,n),2),i=t[0],n=t[1],t=u(F(a,e),2),a=t[0],e=t[1];return this.render({positions:i,labels:e}),this.store.map(function(t,e){return rt(t,n[e],i[e])})}},xAxis:{layerClass:"x axis",makeElements:function(n){var i=this;return n.positions.map(function(t,e){return function(t,e,n,i){var a=3<arguments.length&&void 0!==i?i:{};E(t)||(t=0),a.pos||(a.pos="bottom"),a.offset||(a.offset=0),a.mode||(a.mode="span"),a.className||(a.className="");i=n+6,n="span"===a.mode?-6:n;return"tick"===a.mode&&"top"===a.pos&&(i=-6,n=0),tt(t,e,i,n,{className:a.className,lineType:a.lineType})}(t,n.calcLabels[e],i.constants.height,{mode:i.constants.mode,pos:i.constants.pos})})},animateElements:function(t){var i=t.positions,e=t.calcLabels,a=this.oldData.positions,n=this.oldData.calcLabels,t=u(F(a,i),2),a=t[0],i=t[1],t=u(F(n,e),2),n=t[0],e=t[1];return this.render({positions:a,calcLabels:e}),this.store.map(function(t,e){return n=i[e],st(t,[a[e],0],[n,0],350);var n})}},yMarkers:{layerClass:"y-markers",makeElements:function(t){var e=this;return t.map(function(t){return function(t,e,n,i){i=3<arguments.length&&void 0!==i?i:{};E(t)||(t=0),i.labelPos||(i.labelPos="right");e=j("text",{className:"chart-label",x:"left"===i.labelPos?4:n-T(e,5)-4,y:0,dy:"-5px","font-size":"10px","text-anchor":"start",innerHTML:e+""}),i=et(t,"",0,n,{stroke:i.stroke||"#E2E6E9",className:i.className||"",lineType:i.lineType});return i.appendChild(e),i}(t.position,t.label,e.constants.width,{labelPos:t.options.labelPos,stroke:t.options.stroke,mode:"span",lineType:"dashed"})})},animateElements:function(t){var e=u(F(this.oldData,t),2);this.oldData=e[0];var n=(t=e[1]).map(function(t){return t.position}),i=t.map(function(t){return t.label}),a=t.map(function(t){return t.options}),s=this.oldData.map(function(t){return t.position});return this.render(s.map(function(t,e){return{position:s[e],label:i[e],options:a[e]}})),this.store.map(function(t,e){return rt(t,n[e],s[e])})}},yRegions:{layerClass:"y-regions",makeElements:function(t){var e=this;return t.map(function(t){return function(t,e,n,i,a){a=4<arguments.length&&void 0!==a?a:{},t-=e,t=j("rect",{className:"bar mini",styles:{fill:a.fill||"rgba(228, 234, 239, 0.49)",stroke:a.stroke||"#E2E6E9","stroke-dasharray":"".concat(n,", ").concat(t)},x:0,y:0,width:n,height:t});a.labelPos||(a.labelPos="right");i=j("text",{className:"chart-label",x:"left"===a.labelPos?4:n-T(i+"",4.5)-4,y:0,dy:"-5px","font-size":"10px","text-anchor":"start",innerHTML:i+""}),e=j("g",{transform:"translate(0, ".concat(e,")")});return e.appendChild(t),e.appendChild(i),e}(t.startPos,t.endPos,e.constants.width,t.label,{labelPos:t.options.labelPos,stroke:t.options.stroke,fill:t.options.fill})})},animateElements:function(t){var e=u(F(this.oldData,t),2);this.oldData=e[0];var o=(t=e[1]).map(function(t){return t.endPos}),n=t.map(function(t){return t.label}),r=t.map(function(t){return t.startPos}),i=t.map(function(t){return t.options}),l=this.oldData.map(function(t){return t.endPos}),a=this.oldData.map(function(t){return t.startPos});this.render(l.map(function(t,e){return{startPos:a[e],endPos:l[e],label:n[e],options:i[e]}}));var c=[];return this.store.map(function(t,e){var n,i,a,s;c=c.concat((n=t,i=r[e],a=o[e],s=l[e],t=i-a,e=n.childNodes[0],i=e.getAttribute("width"),[[e,{height:t,"stroke-dasharray":"".concat(i,", ").concat(t)},350,"easein"],st(n,[0,s],[0,a],350)]))}),c}},heatDomain:{layerClass:function(){return"heat-domain domain-"+this.constants.index},makeElements:function(t){var n=this,e=this.constants,i=e.index,a=e.colWidth,s=e.rowHeight,o=e.squareSize,r=e.radius,l=e.xTranslate,c=0;return this.serializedSubDomains=[],t.cols.map(function(t,e){1===e&&n.labels.push(Z("domain-name",l,-12,wt(i,!0).toUpperCase(),{fontSize:9})),t.map(function(t,e){t.fill&&(e={"data-date":t.yyyyMmDd,"data-value":t.dataValue,"data-day":e},e=$("day",l,c,o,r,t.fill,e),n.serializedSubDomains.push(e)),c+=s}),c=0,l+=a}),this.serializedSubDomains},animateElements:function(t){if(t)return[]}},barGraph:{layerClass:function(){return"dataset-units dataset-bars dataset-"+this.constants.index},makeElements:function(n){var i=this.constants;return this.unitType="bar",this.units=n.yPositions.map(function(t,e){return function(t,e,n,i,a,s,o,r){var l=4<arguments.length&&void 0!==a?a:"",a=5<arguments.length&&void 0!==s?s:0,s=6<arguments.length&&void 0!==o?o:0,o=7<arguments.length&&void 0!==r?r:{},r=u(S(e,o.zeroLine),2),e=r[0],r=r[1];r-=s,0===e&&(e=o.minHeight,r-=o.minHeight),E(t)||(t=0),E(r)||(r=0),E(e,!0)||(e=0),E(n,!0)||(n=0);e=j("rect",{className:"bar mini",style:"fill: ".concat(i),"data-point-index":a,x:t,y:r,width:n,height:e});if((l+="")||l.length){e.setAttribute("y",0),e.setAttribute("x",0);l=j("text",{className:"data-point-value",x:n/2,y:0,dy:"-5px","font-size":"10px","text-anchor":"middle",innerHTML:l}),r=j("g",{"data-point-index":a,transform:"translate(".concat(t,", ").concat(r,")")});return r.appendChild(e),r.appendChild(l),r}return e}(n.xPositions[e],t,n.barWidth,i.color,n.labels[e],e,n.offsets[e],{zeroLine:n.zeroLine,barsWidth:n.barsWidth,minHeight:i.minHeight})}),this.units},animateElements:function(n){var i=n.xPositions,a=n.yPositions,s=n.offsets,t=n.labels,e=this.oldData.xPositions,o=this.oldData.yPositions,r=this.oldData.offsets,l=this.oldData.labels,c=u(F(e,i),2),e=c[0],i=c[1],c=u(F(o,a),2),o=c[0],a=c[1],c=u(F(r,s),2),r=c[0],s=c[1],c=u(F(l,t),2),l=c[0],t=c[1];this.render({xPositions:e,yPositions:o,offsets:r,labels:t,zeroLine:this.oldData.zeroLine,barsWidth:this.oldData.barsWidth,barWidth:this.oldData.barWidth});var h=[];return this.store.map(function(t,e){h=h.concat(function(t,e,n,i,a,s){a=4<arguments.length&&void 0!==a?a:0,n=u(S(n,(5<arguments.length&&void 0!==s?s:{}).zeroLine),2),s=n[0],n=n[1];if(n-=a,"rect"===t.nodeName)return[[t,{width:i,height:s,x:e,y:n},350,"easein"]];i=[t.childNodes[0],{width:i,height:s},350,"easein"],s=t.getAttribute("transform").split("(")[1].slice(0,-1);return[i,st(t,s,[e,n],350)]}(t,i[e],a[e],n.barWidth,s[e],{zeroLine:n.zeroLine}))}),h}},lineGraph:{layerClass:function(){return"dataset-units dataset-line dataset-"+this.constants.index},makeElements:function(n){var i=this.constants;return this.unitType="dot",this.paths={},i.hideLine||(this.paths=function(n,t,e,i,a){var s=3<arguments.length&&void 0!==i?i:{},o=4<arguments.length&&void 0!==a?a:{},i=t.map(function(t,e){return n[e]+","+t}).join("L");s.spline&&(i=R(n,t));a=V("M"+i,"line-graph-path",e);s.heatline&&(t=X(o.svgDefs,e),a.style.stroke="url(#".concat(t,")"));a={path:a};return s.regionFill&&(e=X(o.svgDefs,e,!0),o="M"+"".concat(n[0],",").concat(o.zeroLine,"L")+i+"L".concat(n.slice(-1)[0],",").concat(o.zeroLine),a.region=V(o,"region-fill","none","url(#".concat(e,")"))),a}(n.xPositions,n.yPositions,i.color,{heatline:i.heatline,regionFill:i.regionFill,spline:i.spline},{svgDefs:i.svgDefs,zeroLine:n.zeroLine})),this.units=[],i.showDots&&(this.units=n.yPositions.map(function(t,e){return function(t,e,n,i,a,s){a=4<arguments.length&&void 0!==a?a:"",s=5<arguments.length&&void 0!==s?s:0,i=j("circle",{style:"fill: ".concat(i),"data-point-index":s,cx:t,cy:e,r:n});if((a+="")||a.length){i.setAttribute("cy",0),i.setAttribute("cx",0);a=j("text",{className:"data-point-value",x:0,y:0,dy:-5-n+"px","font-size":"10px","text-anchor":"middle",innerHTML:a}),e=j("g",{"data-point-index":s,transform:"translate(".concat(t,", ").concat(e,")")});return e.appendChild(i),e.appendChild(a),e}return i}(n.xPositions[e],t,n.radius,i.color,i.valuesOverPoints?n.values[e]:"",e)})),Object.values(this.paths).concat(this.units)},animateElements:function(t){var n=t.xPositions,i=t.yPositions,e=t.values,a=this.oldData.xPositions,s=this.oldData.yPositions,o=this.oldData.values,r=u(F(a,n),2),a=r[0],n=r[1],r=u(F(s,i),2),s=r[0],i=r[1],r=u(F(o,e),2),o=r[0],e=r[1];this.render({xPositions:a,yPositions:s,values:e,zeroLine:this.oldData.zeroLine,radius:this.oldData.radius});var l=[];return Object.keys(this.paths).length&&(l=l.concat(function(t,n,e,i,a){var s=[],o=e.map(function(t,e){return n[e]+","+t}).join("L");a&&(o=R(n,e));e=[t.path,{d:"M"+o},350,"easein"];return s.push(e),t.region&&(e="".concat(n[0],",").concat(i,"L"),i="L".concat(n.slice(-1)[0],", ").concat(i),i=[t.region,{d:"M"+e+o+i},350,"easein"],s.push(i)),s}(this.paths,n,i,t.zeroLine,this.constants.spline))),this.units.length&&this.units.map(function(t,e){l=l.concat(function(t,e,n){if("circle"===t.nodeName)return[[t,{cx:e,cy:n},350,"easein"]];var i=t.getAttribute("transform").split("(")[1].slice(0,-1);return[st(t,i,[e,n],350)]}(t,n[e],i[e]))}),l}}};function Pt(e,t,n){var i=Object.keys(Mt).filter(function(t){return e.includes(t)}),i=Mt[i[0]];return Object.assign(i,{constants:t,getData:n}),new Ct(i)}var Tt=function(){a(r,ft);var o=l(r);function r(t,n){return e(this,r),(n=o.call(this,t,n)).type="percentage",n.setup(),n}return i(r,[{key:"setMeasures",value:function(t){var e=this.measures;this.barOptions=t.barOptions||{};t=this.barOptions;t.height=t.height||16,e.paddings.right=30,e.paddings.top=60,e.paddings.bottom=0,e.legendHeight=80,e.baseHeight=8*t.height+k(e)}},{key:"setupComponents",value:function(){var t=this.state,e=[["percentageBars",{barHeight:this.barOptions.height},function(){return{xPositions:t.xPositions,widths:t.widths,colors:this.colors}}.bind(this)]];this.components=new Map(e.map(function(t){var e=Pt.apply(void 0,h(t));return[t[0],e]}))}},{key:"calc",value:function(){var e=this;c(s(r.prototype),"calc",this).call(this);var n=this.state;n.xPositions=[],n.widths=[];var i=0;n.sliceTotals.map(function(t){t=e.width*t/n.grandTotal;n.widths.push(t),n.xPositions.push(i),i+=t})}},{key:"makeDataByIndex",value:function(){}},{key:"bindTooltip",value:function(){var a=this,s=this.state;this.container.addEventListener("mousemove",function(t){var e,n=a.components.get("percentageBars").store,i=t.target;n.includes(i)&&(e=n.indexOf(i),t=v(a.container),n=v(i),i=i.getAttribute("width")||i.getBoundingClientRect().width,i=n.left-t.left+parseInt(i)/2,n=n.top-t.top,t=(a.formattedLabels&&0<a.formattedLabels.length?a.formattedLabels:a.state.labels)[e]+": ",e=s.sliceTotals[e]/s.grandTotal,a.tip.setValues(i,n,{name:t,value:(100*e).toFixed(1)+"%"}),a.tip.showTip())})}}]),r}(),Nt=function(){a(r,ft);var o=l(r);function r(t,n){return e(this,r),(n=o.call(this,t,n)).initTimeout=0,n.init=1,n.setup(),n}return i(r,[{key:"configure",value:function(t){c(s(r.prototype),"configure",this).call(this,t),this.mouseMove=this.mouseMove.bind(this),this.mouseLeave=this.mouseLeave.bind(this),this.hoverRadio=t.hoverRadio||.1,this.config.startAngle=t.startAngle||0,this.type="pie",this.sliceName="pieSlices",this.arcFunc=U,this.shapeFunc=q,this.clockWise=t.clockWise||!1}},{key:"getRadius",value:function(){return this.height>this.width?this.center.x:this.center.y}},{key:"calc",value:function(){var h=this;c(s(r.prototype),"calc",this).call(this);var u=this.state;this.radius=this.getRadius();var d=this.radius,p=this.clockWise,f=u.slicesProperties||[];u.sliceStrings=[],u.slicesProperties=[];var v=180-this.config.startAngle;u.sliceTotals.map(function(t,e){var n,i=v,a=t/u.grandTotal*360,s=180<a?1:0,o=p?-a:a,r=v+=o,l=N(i,d),c=N(r,d),e=h.init&&f[e],e=h.init?(n=e?e.startPosition:l,e?e.endPosition:l):(n=l,c),s=360==a?h.shapeFunc(n,e,h.center,h.radius,p,s):h.arcFunc(n,e,h.center,h.radius,p,s);u.sliceStrings.push(s),u.slicesProperties.push({startPosition:l,endPosition:c,value:t,total:u.grandTotal,startAngle:i,endAngle:r,angle:o})}),this.init=0}},{key:"setupComponents",value:function(){var t=this.state,e=[["pieSlices",{},function(){return{sliceStrings:t.sliceStrings,colors:this.colors}}.bind(this)]];this.components=new Map(e.map(function(t){var e=Pt.apply(void 0,h(t));return[t[0],e]}))}},{key:"calTranslateByAngle",value:function(t){var e=this.radius,n=this.hoverRadio,e=N(t.startAngle+t.angle/2,e);return"translate3d(".concat(e.x*n,"px,").concat(e.y*n,"px,0)")}},{key:"hoverSlice",value:function(t,e,n,i){var a,s;t&&(a=this.colors[e],n?(ut(t,this.calTranslateByAngle(this.state.slicesProperties[e])),s=v(this.svg),n=i.pageX-s.left+10,i=i.pageY-s.top-10,s=(this.formatted_labels&&0<this.formatted_labels.length?this.formatted_labels:this.state.labels)[e]+": ",e=(100*this.state.sliceTotals[e]/this.state.grandTotal).toFixed(1),this.tip.setValues(n,i,{name:s,value:e+"%"}),this.tip.showTip()):(ut(t,"translate3d(0,0,0)"),this.tip.hideTip(),t.style.fill=a))}},{key:"bindTooltip",value:function(){this.container.addEventListener("mousemove",this.mouseMove),this.container.addEventListener("mouseleave",this.mouseLeave)}},{key:"mouseMove",value:function(t){var e=t.target,n=this.components.get(this.sliceName).store,i=this.curActiveSliceIndex,a=this.curActiveSlice;n.includes(e)?(n=n.indexOf(e),this.hoverSlice(a,i,!1),this.curActiveSlice=e,this.curActiveSliceIndex=n,this.hoverSlice(e,n,!0,t)):this.mouseLeave()}},{key:"mouseLeave",value:function(){this.hoverSlice(this.curActiveSlice,this.curActiveSliceIndex,!1)}}]),r}();function Et(t){if(0===t)return[0,0];if(isNaN(t))return{mantissa:-6755399441055744,exponent:972};var e=0<t?1:-1;if(!isFinite(t))return{mantissa:4503599627370496*e,exponent:972};t=Math.abs(t);var n=Math.floor(Math.log10(t));return[e*(t/Math.pow(10,n)),n]}function Ot(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,t=Math.ceil(t),n=Math.floor(e),e=t-n,i=e,a=1;5<e&&(e%2!=0&&(e=++t-n),i=e/2,a=2),e<=2&&(a=e/(i=4)),0===e&&(i=5,a=1);for(var s=[],o=0;o<=i;o++)s.push(n+a*o);return s}function St(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,n=u(Et(t),2),t=n[0],i=n[1],e=e?e/Math.pow(10,i):0,e=Ot(t=t.toFixed(6),e);return e.map(function(t){return t*Math.pow(10,i)})}function Ft(t){var e=1<arguments.length&&void 0!==arguments[1]&&arguments[1],n=Math.max.apply(Math,h(t)),i=Math.min.apply(Math,h(t)),a=[];function s(t,e){for(var n=St(t),i=n[1]-n[0],a=0;a<e;0)a+=i,n.unshift(-1*a);return n}return 0<=n&&0<=i?(Et(n)[1],a=e?St(n,i):St(n)):0<n&&i<0?a=(t=Math.abs(i))<=n?(Et(n)[1],s(n,t)):(Et(t)[1],s(t,n).reverse().map(function(t){return-1*t})):n<=0&&i<=0&&(i=Math.abs(i),n=Math.abs(n),Et(i)[1],a=(a=e?St(i,n):St(i)).reverse().map(function(t){return-1*t})),a}function zt(t){var e=Ht(t),t=0<=t.indexOf(0)?t.indexOf(0):0<t[0]?-1*t[0]/e:-1*t[t.length-1]/e+(t.length-1);return t}function Ht(t){return t[1]-t[0]}function Rt(t){return t[t.length-1]-t[0]}function Wt(t,e){return M(e.zeroLine-t*e.scaleMultiplier)}var jt=function(){a(o,pt);var s=l(o);function o(t,n){var i;e(this,o),(i=s.call(this,t,n)).type="heatmap",i.countLabel=n.countLabel||"";t=["Sunday","Monday"],n=t.includes(n.startSubDomain)?n.startSubDomain:"Sunday";return i.startSubDomainIndex=t.indexOf(n),i.setup(),i}return i(o,[{key:"setMeasures",value:function(t){var e=this.measures;this.discreteDomains=0===t.discreteDomains?0:1,e.paddings.top=36,e.paddings.bottom=0,e.legendHeight=24,e.baseHeight=84+k(e);var n=this.data,t=this.discreteDomains?12:0;this.independentWidth=12*(xt(n.start,n.end)+t)+w(e)}},{key:"updateWidth",value:function(){var t=this.discreteDomains?12:0,e=this.state.noOfWeeks||52;this.baseWidth=12*(e+t)+w(this.measures)}},{key:"prepareData",value:function(){var n,i=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.data;if(i.start&&i.end&&i.start>i.end)throw new Error("Start date cannot be greater than end date.");return i.start||(i.start=new Date,i.start.setFullYear(i.start.getFullYear()-1)),i.end||(i.end=new Date),i.dataPoints=i.dataPoints||{},1e5<parseInt(Object.keys(i.dataPoints)[0])&&(n={},Object.keys(i.dataPoints).forEach(function(t){var e=new Date(1e3*t);n[yt(e)]=i.dataPoints[t]}),i.dataPoints=n),i}},{key:"calc",value:function(){var t=this.state;t.start=bt(this.data.start),t.end=bt(this.data.end),t.firstWeekStart=bt(t.start),t.noOfWeeks=xt(t.start,t.end),t.distribution=function(t){for(var e=Math.max.apply(Math,h(t)),n=[],i=0;i<5;i++){var a=e*(.25*i);n.push(a)}return n}(Object.values(this.data.dataPoints)),t.domainConfigs=this.getDomains()}},{key:"setupComponents",value:function(){var i=this,e=this.state,a=this.discreteDomains?0:1,t=e.domainConfigs.map(function(t,n){return["heatDomain",{index:t.index,colWidth:12,rowHeight:12,squareSize:10,radius:i.rawChartArgs.radius||0,xTranslate:12*e.domainConfigs.filter(function(t,e){return e<n}).map(function(t){return t.cols.length-a}).reduce(function(t,e){return t+e},0)},function(){return e.domainConfigs[n]}.bind(i)]});this.components=new Map(t.map(function(t,e){var n=Pt.apply(void 0,h(t));return[t[0]+"-"+e,n]}));var n=0;gt.forEach(function(t,e){[1,3,5].includes(e)&&(t=Z("subdomain-name",-6,n,t,{fontSize:10,dy:8,textAnchor:"end"}),i.drawArea.appendChild(t)),n+=12})}},{key:"update",value:function(t){t||console.error("No data to update."),this.data=this.prepareData(t),this.draw(),this.bindTooltip()}},{key:"bindTooltip",value:function(){var r=this;this.container.addEventListener("mousemove",function(o){r.components.forEach(function(t){var e,n,i,a=t.store,s=o.target;a.includes(s)&&(n=s.getAttribute("data-value"),i=s.getAttribute("data-date").split("-"),e=wt(parseInt(i[1])-1,!0),t=r.container.getBoundingClientRect(),a=s.getBoundingClientRect(),s=parseInt(o.target.getAttribute("width")),s=a.left-t.left+s/2,t=a.top-t.top,n=n+" "+r.countLabel,i=" on "+e+" "+i[0]+", "+i[2],r.tip.setValues(s,t,{name:i,value:n,valueFirst:1},[]),r.tip.showTip())})})}},{key:"renderLegend",value:function(){var n=this;this.legendArea.textContent="";var i=this.rawChartArgs.radius||0,t=Z("subdomain-name",0,12,"Less",{fontSize:11,dy:9});this.legendArea.appendChild(t),this.colors.slice(0,5).map(function(t,e){t=$("heatmap-legend-unit",30+15*e,12,10,i,t);n.legendArea.appendChild(t)});t=Z("subdomain-name",108,12,"More",{fontSize:11,dy:9});this.legendArea.appendChild(t)}},{key:"getDomains",value:function(){for(var t=this.state,e=[t.start.getMonth(),t.start.getFullYear()],n=e[0],i=e[1],e=[t.end.getMonth(),t.end.getFullYear()],a=e[0]-n+1+12*(e[1]-i),s=[],o=bt(t.start),r=0;r<a;r++){var l,c=t.end;kt(o,t.end)||(c=At((l=[o.getMonth(),o.getFullYear()])[0],l[1])),s.push(this.getDomainConfig(o,c)),Lt(c,1),o=c}return s}},{key:"getDomainConfig",value:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"",n=[t.getMonth(),t.getFullYear()],i=n[0],n=n[1],a=Dt(t),t={index:i,cols:[]};Lt(e=bt(e)||At(i,n),1);for(var s,o=xt(a,e),r=[],l=0;l<o;l++)s=this.getCol(a,i),r.push(s),Lt(a=new Date(s[6].yyyyMmDd),1);return void 0!==s[6].dataValue&&(Lt(a,1),r.push(this.getCol(a,i,!0))),t.cols=r,t}},{key:"getCol",value:function(t,e){for(var n=2<arguments.length&&void 0!==arguments[2]&&arguments[2],i=this.state,a=bt(t),s=[],o=0;o<7;o++,Lt(a,1)){var r={},l=a>=i.start&&a<=i.end;n||a.getMonth()!==e||!l?r.yyyyMmDd=yt(a):r=this.getSubDomainConfig(a),s.push(r)}return s}},{key:"getSubDomainConfig",value:function(t){var e,n=yt(t),t=this.data.dataPoints[n];return{yyyyMmDd:n,dataValue:t||0,fill:this.colors[e=t,this.state.distribution.filter(function(t){return t<e}).length]}}}]),o}();function It(t,n){t.labels=t.labels||[];var i=t.labels.length,e=t.datasets,a=new Array(i).fill(0);return(e=e||[{values:a}]).map(function(t){var e;t.values?e=(e=(e=t.values).map(function(t){return isNaN(t)?0:t})).length>i?e.slice(0,i):P(e,i-e.length,0):t.values=a,t.chartType||(t.chartType=n)}),t.yRegions&&t.yRegions.map(function(t){var e;t.end<t.start&&(e=[t.end,t.start],t.start=e[0],t.end=e[1])}),t}function Bt(t){var e=t.labels.length,n=new Array(e).fill(0),e={labels:t.labels.slice(0,-1),datasets:t.datasets.map(function(t){return{name:"",values:n.slice(0,-1),chartType:t.chartType}})};return t.yMarkers&&(e.yMarkers=[{value:0,label:""}]),t.yRegions&&(e.yRegions=[{start:0,end:0,label:""}]),e}var Yt=function(){a(r,pt);var o=l(r);function r(t,n){return e(this,r),(t=o.call(this,t,n)).barOptions=n.barOptions||{},t.lineOptions=n.lineOptions||{},t.type=n.type||"line",t.init=1,t.setup(),t}return i(r,[{key:"setMeasures",value:function(){this.data.datasets.length<=1&&(this.config.showLegend=0,this.measures.paddings.bottom=30)}},{key:"configure",value:function(t){c(s(r.prototype),"configure",this).call(this,t),t.axisOptions=t.axisOptions||{},t.tooltipOptions=t.tooltipOptions||{},this.config.xAxisMode=t.axisOptions.xAxisMode||"span",this.config.yAxisMode=t.axisOptions.yAxisMode||"span",this.config.xIsSeries=t.axisOptions.xIsSeries||0,this.config.shortenYAxisNumbers=t.axisOptions.shortenYAxisNumbers||0,this.config.formatTooltipX=t.tooltipOptions.formatTooltipX,this.config.formatTooltipY=t.tooltipOptions.formatTooltipY,this.config.valuesOverPoints=t.valuesOverPoints,this.config.legendRowHeight=30}},{key:"prepareData",value:function(){return It(0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.data,this.type)}},{key:"prepareFirstData",value:function(){return Bt(0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.data)}},{key:"calc",value:function(){var t=0<arguments.length&&void 0!==arguments[0]&&arguments[0];this.calcXPositions(),t||this.calcYAxisParameters(this.getAllYValues(),"line"===this.type),this.makeDataByIndex()}},{key:"calcXPositions",value:function(){var n=this.state,t=this.data.labels;n.datasetLength=t.length,n.unitWidth=this.width/n.datasetLength,n.xOffset=n.unitWidth/2,n.xAxis={labels:t,positions:t.map(function(t,e){return M(n.xOffset+e*n.unitWidth)})}}},{key:"calcYAxisParameters",value:function(t){var e=Ft(t,1<arguments.length&&void 0!==arguments[1]?arguments[1]:"false"),n=this.height/Rt(e),t=Ht(e)*n,i=this.height-zt(e)*t;this.state.yAxis={labels:e,positions:e.map(function(t){return i-t*n}),scaleMultiplier:n,zeroLine:i},this.calcDatasetPoints(),this.calcYExtremes(),this.calcYRegions()}},{key:"calcDatasetPoints",value:function(){function a(t){return t.map(function(t){return Wt(t,e.yAxis)})}var e=this.state;e.datasets=this.data.datasets.map(function(t,e){var n=t.values,i=t.cumulativeYs||[];return{name:t.name&&t.name.replace(/<|>|&/g,function(t){return"&"==t?"&amp;":"<"==t?"&lt;":"&gt;"}),index:e,chartType:t.chartType,values:n,yPositions:a(n),cumulativeYs:i,cumulativeYPos:a(i)}})}},{key:"calcYExtremes",value:function(){var n=this.state;this.barOptions.stacked?n.yExtremes=n.datasets[n.datasets.length-1].cumulativeYPos:(n.yExtremes=new Array(n.datasetLength).fill(9999),n.datasets.map(function(t){t.yPositions.map(function(t,e){t<n.yExtremes[e]&&(n.yExtremes[e]=t)})}))}},{key:"calcYRegions",value:function(){var e=this.state;this.data.yMarkers&&(this.state.yMarkers=this.data.yMarkers.map(function(t){return t.position=Wt(t.value,e.yAxis),t.options||(t.options={}),t})),this.data.yRegions&&(this.state.yRegions=this.data.yRegions.map(function(t){return t.startPos=Wt(t.start,e.yAxis),t.endPos=Wt(t.end,e.yAxis),t.options||(t.options={}),t}))}},{key:"getAllYValues",value:function(){var t,i,a=this,s="values";this.barOptions.stacked&&(s="cumulativeYs",i=new Array(this.state.datasetLength).fill(0),this.data.datasets.map(function(t,e){var n=a.data.datasets[e].values;t[s]=i=i.map(function(t,e){return t+n[e]})}));var e=this.data.datasets.map(function(t){return t[s]});return this.data.yMarkers&&e.push(this.data.yMarkers.map(function(t){return t.value})),this.data.yRegions&&this.data.yRegions.map(function(t){e.push([t.end,t.start])}),(t=[]).concat.apply(t,h(e))}},{key:"setupComponents",value:function(){var n=this,t=[["yAxis",{mode:this.config.yAxisMode,width:this.width,shortenNumbers:this.config.shortenYAxisNumbers},function(){return this.state.yAxis}.bind(this)],["xAxis",{mode:this.config.xAxisMode,height:this.height},function(){var t=this.state;return t.xAxis.calcLabels=function(t,e,n){var i=1<arguments.length&&void 0!==e?e:[],a=!(2<arguments.length&&void 0!==n)||n,t=t/i.length*.6;t<=0&&(t=1);var s,o=t/7;return a&&(t=Math.max.apply(Math,h(i.map(function(t){return t.length}))),s=Math.ceil(t/o)),i.map(function(t,e){return(t+="").length>o&&(a?e%s!=0&&e!==i.length-1&&(t=""):t=0<o-3?t.slice(0,o-3)+" ...":t.slice(0,o)+".."),t})}(this.width,t.xAxis.labels,this.config.xIsSeries),t.xAxis}.bind(this)],["yRegions",{width:this.width,pos:"right"},function(){return this.state.yRegions}.bind(this)]],c=this.state.datasets.filter(function(t){return"bar"===t.chartType}),e=this.state.datasets.filter(function(t){return"line"===t.chartType}),i=c.map(function(t){var l=t.index;return["barGraph-"+t.index,{index:l,color:n.colors[l],stacked:n.barOptions.stacked,valuesOverPoints:n.config.valuesOverPoints,minHeight:0*n.height},function(){var t=this.state,n=t.datasets[l],e=this.barOptions.stacked,i=this.barOptions.spaceRatio||.5,a=t.unitWidth*(1-i),s=a/(e?1:c.length),o=t.xAxis.positions.map(function(t){return t-a/2});e||(o=o.map(function(t){return t+s*l}));var r=new Array(t.datasetLength).fill("");this.config.valuesOverPoints&&(r=e&&n.index===t.datasets.length-1?n.cumulativeYs:n.values);i=new Array(t.datasetLength).fill(0);return e&&(i=n.yPositions.map(function(t,e){return t-n.cumulativeYPos[e]})),{xPositions:o,yPositions:n.yPositions,offsets:i,labels:r,zeroLine:t.yAxis.zeroLine,barsWidth:a,barWidth:s}}.bind(n)]}),a=e.map(function(t){var i=t.index;return["lineGraph-"+t.index,{index:i,color:n.colors[i],svgDefs:n.svgDefs,heatline:n.lineOptions.heatline,regionFill:n.lineOptions.regionFill,spline:n.lineOptions.spline,showDots:n.lineOptions.showDots,hideLine:n.lineOptions.hideLine,valuesOverPoints:n.config.valuesOverPoints},function(){var t=this.state,e=t.datasets[i],n=t.yAxis.positions[0]<t.yAxis.zeroLine?t.yAxis.positions[0]:t.yAxis.zeroLine;return{xPositions:t.xAxis.positions,yPositions:e.yPositions,values:e.values,zeroLine:n,radius:this.lineOptions.dotSize||4}}.bind(n)]}),e=[["yMarkers",{width:this.width,pos:"right"},function(){return this.state.yMarkers}.bind(this)]],t=t.concat(i,a,e),s=["yMarkers","yRegions"];this.dataUnitComponents=[],this.components=new Map(t.filter(function(t){return!s.includes(t[0])||n.state[t[0]]}).map(function(t){var e=Pt.apply(void 0,h(t));return(t[0].includes("lineGraph")||t[0].includes("barGraph"))&&n.dataUnitComponents.push(e),[t[0],e]}))}},{key:"makeDataByIndex",value:function(){var a=this;this.dataByIndex={};var n=this.state,s=this.config.formatTooltipX,o=this.config.formatTooltipY;n.xAxis.labels.map(function(t,i){var e=a.state.datasets.map(function(t,e){var n=t.values[i];return{title:t.name,value:n,yPos:t.yPositions[i],color:a.colors[e],formatted:o?o(n):n}});a.dataByIndex[i]={label:t,formattedLabel:s?s(t):t,xPos:n.xAxis.positions[i],values:e,yExtreme:n.yExtremes[i]}})}},{key:"bindTooltip",value:function(){var a=this;this.container.addEventListener("mousemove",function(t){var e=a.measures,n=v(a.container),i=t.pageX-n.left-x(e),n=t.pageY-n.top;n<a.height+b(e)&&n>b(e)?a.mapTooltipXPosition(i):a.tip.hideTip()})}},{key:"mapTooltipXPosition",value:function(t){var e=this.state;!e.yExtremes||0<=(t=function(n,t,e){var i=2<arguments.length&&void 0!==e&&e,e=t.reduce(function(t,e){return Math.abs(e-n)<Math.abs(t-n)?e:t},[]);return i?t.indexOf(e):e}(t,e.xAxis.positions,!0))&&(e=this.dataByIndex[t],this.tip.setValues(e.xPos+this.tip.offset.x,e.yExtreme+this.tip.offset.y,{name:e.formattedLabel,value:""},e.values,t),this.tip.showTip())}},{key:"renderLegend",value:function(){var t=this.data;1<t.datasets.length&&c(s(r.prototype),"renderLegend",this).call(this,t.datasets)}},{key:"makeLegend",value:function(t,e,n,i){return Q(n,i+5,12,3,this.colors[e],t.name,null,8.75,this.config.truncateLegends)}},{key:"makeOverlay",value:function(){var n=this;this.init?this.init=0:(this.overlayGuides&&this.overlayGuides.forEach(function(t){t=t.overlay;t.parentNode.removeChild(t)}),this.overlayGuides=this.dataUnitComponents.map(function(t){return{type:t.unitType,overlay:void 0,units:t.units}}),void 0===this.state.currentIndex&&(this.state.currentIndex=this.state.datasetLength-1),this.overlayGuides.map(function(t){var e=t.units[n.state.currentIndex];t.overlay=nt[t.type](e),n.drawArea.appendChild(t.overlay)}))}},{key:"updateOverlayGuides",value:function(){this.overlayGuides&&this.overlayGuides.forEach(function(t){t=t.overlay;t.parentNode.removeChild(t)})}},{key:"bindOverlay",value:function(){var t=this;this.parent.addEventListener("data-select",function(){t.updateOverlay()})}},{key:"bindUnits",value:function(){var n=this;this.dataUnitComponents.map(function(t){t.units.map(function(e){e.addEventListener("click",function(){var t=e.getAttribute("data-point-index");n.setCurrentDataPoint(t)})})}),this.tip.container.addEventListener("click",function(){var t=n.tip.container.getAttribute("data-point-index");n.setCurrentDataPoint(t)})}},{key:"updateOverlay",value:function(){var n=this;this.overlayGuides.map(function(t){var e=t.units[n.state.currentIndex];it[t.type](e,t.overlay)})}},{key:"onLeftArrow",value:function(){this.setCurrentDataPoint(this.state.currentIndex-1)}},{key:"onRightArrow",value:function(){this.setCurrentDataPoint(this.state.currentIndex+1)}},{key:"getDataPoint",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.state.currentIndex,t=this.state;return{index:e,label:t.xAxis.labels[e],values:t.datasets.map(function(t){return t.values[e]})}}},{key:"setCurrentDataPoint",value:function(t){var e=this.state;(t=parseInt(t))<0&&(t=0),t>=e.xAxis.labels.length&&(t=e.xAxis.labels.length-1),t!==e.currentIndex&&(e.currentIndex=t,function(t,e){var n,i=document.createEvent("HTMLEvents");for(n in i.initEvent("data-select",!0,!0),e)i[n]=e[n];t.dispatchEvent(i)}(this.parent,this.getDataPoint()))}},{key:"addDataPoint",value:function(t,n){var i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:this.state.datasetLength;c(s(r.prototype),"addDataPoint",this).call(this,t,n,i),this.data.labels.splice(i,0,t),this.data.datasets.map(function(t,e){t.values.splice(i,0,n[e])}),this.update(this.data)}},{key:"removeDataPoint",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.state.datasetLength-1;this.data.labels.length<=1||(c(s(r.prototype),"removeDataPoint",this).call(this,e),this.data.labels.splice(e,1),this.data.datasets.map(function(t){t.values.splice(e,1)}),this.update(this.data))}},{key:"updateDataset",value:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0;this.data.datasets[e].values=t,this.update(this.data)}},{key:"updateDatasets",value:function(n){this.data.datasets.map(function(t,e){n[e]&&(t.values=n[e])}),this.update(this.data)}}]),r}(),Vt={bar:Yt,line:Yt,percentage:Tt,heatmap:jt,pie:Nt,donut:function(){a(r,Nt);var o=l(r);function r(t,n){return e(this,r),o.call(this,t,n)}return i(r,[{key:"configure",value:function(t){c(s(r.prototype),"configure",this).call(this,t),this.type="donut",this.sliceName="donutSlices",this.arcFunc=G,this.shapeFunc=_,this.strokeWidth=t.strokeWidth||30}},{key:"getRadius",value:function(){return this.height>this.width?this.center.x-this.strokeWidth/2:this.center.y-this.strokeWidth/2}},{key:"setupComponents",value:function(){var t=this.state,e=[[this.sliceName,{},function(){return{sliceStrings:t.sliceStrings,colors:this.colors,strokeWidth:this.strokeWidth}}.bind(this)]];this.components=new Map(e.map(function(t){var e=Pt.apply(void 0,h(t));return[t[0],e]}))}}]),r}()};exports.AxisChart=Yt,exports.Chart=function t(n,i){return e(this,t),function(t,e,n){t=0<arguments.length&&void 0!==t?t:"line",e=1<arguments.length?e:void 0,n=2<arguments.length?n:void 0;return"axis-mixed"===t?(n.type="line",new Yt(e,n)):Vt[t]?new Vt[t](e,n):void console.error("Undefined chart type: "+t)}(i.type,n,i)},exports.Heatmap=jt,exports.PercentageChart=Tt,exports.PieChart=Nt;