import{B as t,d as e,R as n}from"./index-fa69192f.js";const o=window.history,r=function(t){return function(){const e=History.prototype[t].apply(o,arguments),n=new Event(t.toLowerCase());return window.dispatchEvent(n),e}};let s;function a(){const t=e(n,'[is-current-spy] > a[href^="#"]'),o=[];if(t.forEach(t=>{const e=t.getAttribute("href").slice(1),n=t.parentNode.nuQueryById(e);if(!n)return;const r=n.getBoundingClientRect().y;n&&o.push({link:t,id:e,target:n,offset:r,parent:t.parentNode})}),!o.length)return;o.sort((t,e)=>e.offset-t.offset);let r=o.find(t=>t.offset<=0);r&&r.parent.nuSetMod("current",!0),o.forEach(t=>{t!==r&&t.parent.nuSetMod("current",!1)})}function c(t){const e=t.href;t.parentNode&&t.parentNode.nuSetMod&&t.parentNode.nuSetMod("current",e===location.href.replace(location.hash,""))}function i(t=!1){s&&!t||(t&&clearTimeout(s),s=setTimeout(()=>{s=null;const t=e(n,'[is-current-spy] > a:not([href^="#"])');a(),t.forEach(c)},t?0:100))}o.pushState=r("pushState"),o.replaceState=r("replaceState"),["popstate","pushstate","replacestate"].forEach(t=>{window.addEventListener(t,()=>{setTimeout(i,100)},{passive:!0})}),["scroll","hashchange"].forEach(t=>{window.addEventListener(t,a,{passive:!0})}),setTimeout(i,50);export default class extends t{connected(){this.setMod("current-spy",!0)}disconnected(){this.setMod("current-spy",!1)}}export{c as handleLinkState,i as handleLinksState};
