import{g as asyncDebounce,l as log,s as setAttr,R as ROOT}from"./index-e00f48fc.js";const CONTROL_REGEXP=/((|:)[a-z][a-z0-9-]+)([\s]|$|\[(!|)(\.|)([a-z-]+)(:([^)=\]]+)|)(=([^\]]+?)|)])/gi,BOOL_ATTRS=["disabled","hidden","checked","pressed","selected","special"],CONTROL_ATTR="control";class ControlBehavior{constructor(e){this.host=e,this.apply=asyncDebounce(this.apply,this)}changed(e,t){e===CONTROL_ATTR&&t&&this.apply(this.state,this.applyValue)}apply(e,t,l=!1){this.state=e,this.applyValue=t;const s="boolean"==typeof e,{host:n}=this,i=n.getAttribute(CONTROL_ATTR);if(log("control triggered",e,t,i),!i)return;let a;const o=[];for(;a=CONTROL_REGEXP.exec(i);){let i,[r,u,c,p,d,h,y,O,T,f,b]=a;if((d=!!d)&&s&&(e=!e),c)if(":root"===u)i=ROOT;else{if(":self"!==u)continue;i=n}else i=n.nuQueryById(u);if(i)if(y){if(BOOL_ATTRS.includes(y)&&(t=!0),null==b&&"boolean"==typeof t)l||setAttr(i,y,e),o.push(i);else if(!l){let l,s;if(null==b)l=s=t;else{const e=b.split("|");l=e[0],s=e[1]||l}let n=l;const a=y.startsWith("--");!1===e?n=null==l?null:T?`${s}${T||""}`:s:T&&(n=`${l}${T||""}`),h?i[y]=n:a?null!=n&&!1!==n?i.style.setProperty(y.replace("--","--nu-"),String(n)):i.style.removeProperty(y):setAttr(i,y,null!=n?String(n).replace(/@/g,()=>t):null)}}else l||(i.hidden=s?!e:!i.hidden),o.push(i)}if(o.length){const e=n.nuHasAria("labelledby");n.nuSetAria("controls",o.map(t=>(e||n.nuHasAria("labelledby")||n.hasAttribute("labelledby")||(n.nuSetAria("describedby",t.nuUniqId),t.setAttribute("aria-labelledby",n.nuUniqId)),t.nuUniqId)).filter(e=>e).join(" "))}else n.nuSetAria("controls",null)}}export default ControlBehavior;export{CONTROL_ATTR};