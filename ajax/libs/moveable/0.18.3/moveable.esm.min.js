import EgComponent from"@egjs/component";import{ref,Properties}from"framework-utils";import{createPortal,createElement,Component,render}from"react-simple-compat";import Moveable$1,{MOVEABLE_PROPS,MOVEABLE_METHODS,MOVEABLE_EVENTS}from"react-compat-moveable";import{camelize,isArray}from"@daybrush/utils";var extendStatics=function(e,t){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)};function __extends(e,t){function r(){this.constructor=e}extendStatics(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}var __assign=function(){return(__assign=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function __decorate(e,t,r,n){var o,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,r,n);else for(var c=e.length-1;c>=0;c--)(o=e[c])&&(i=(a<3?o(i):a>3?o(t,r,i):o(t,r))||i);return a>3&&i&&Object.defineProperty(t,r,i),i}var InnerMoveable=function(e){function t(t){var r=e.call(this,t)||this;return r.state={},r.state=r.props,r}return __extends(t,e),t.prototype.render=function(){return createPortal(createElement(Moveable$1,__assign({ref:ref(this,"moveable")},this.state)),this.state.parentElement)},t}(Component),PROPERTIES=MOVEABLE_PROPS,METHODS=MOVEABLE_METHODS,EVENTS=MOVEABLE_EVENTS,Moveable=function(e){function t(t,r){void 0===r&&(r={});var n=e.call(this)||this;n.tempElement=document.createElement("div");var o=__assign({container:t},r),a={};EVENTS.forEach(function(e){a[camelize("on "+e)]=function(t){return n.trigger(e,t)}}),render(createElement(InnerMoveable,__assign({ref:ref(n,"innerMoveable"),parentElement:t},o,a)),n.tempElement);var i=o.target;return isArray(i)&&i.length>1&&n.updateRect(),n}__extends(t,e);var r=t.prototype;return r.setState=function(e,t){this.innerMoveable.setState(e,t)},r.destroy=function(){render(null,this.tempElement),this.off(),this.tempElement=null,this.innerMoveable=null},r.getMoveable=function(){return this.innerMoveable.moveable},t=__decorate([Properties(METHODS,function(e,t){e[t]||(e[t]=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var n=this.getMoveable();if(n&&n[t])return n[t].apply(n,e)})}),Properties(PROPERTIES,function(e,t){Object.defineProperty(e,t,{get:function(){return this.getMoveable().props[t]},set:function(e){var r;this.setState(((r={})[t]=e,r))},enumerable:!0,configurable:!0})})],t)}(EgComponent);export default Moveable;export{EVENTS,METHODS,PROPERTIES};