"use strict";var frameworkUtils=require("framework-utils"),React=require("react-simple-compat"),Moveable$1=require("react-compat-moveable"),utils=require("@daybrush/utils"),extendStatics=function(e,t){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function __extends(e,t){function n(){this.constructor=e}extendStatics(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var __assign=function(){return(__assign=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function __decorate(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;0<=s;s--)(o=e[s])&&(a=(i<3?o(a):3<i?o(t,n,a):o(t,n))||a);return 3<i&&a&&Object.defineProperty(t,n,a),a}var InnerMoveable=function(n){function e(e){var t=n.call(this,e)||this;return t.state={},t.state=t.props,t}return __extends(e,n),e.prototype.render=function(){return React.createPortal(React.createElement(Moveable$1,__assign({ref:frameworkUtils.ref(this,"moveable")},this.state)),this.state.parentElement)},e}(React.Component),PROPERTIES=Moveable$1.MOVEABLE_PROPS,METHODS=Moveable$1.MOVEABLE_METHODS,EVENTS=Moveable$1.MOVEABLE_EVENTS,__assign$1=function(){return(__assign$1=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function __spreadArrays(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;for(var r=Array(e),o=0,t=0;t<n;t++)for(var i=arguments[t],a=0,s=i.length;a<s;a++,o++)r[o]=i[a];return r}var EventEmitter=function(){function e(){this._events={}}var t=e.prototype;return t.on=function(e,t){if(utils.isObject(e))for(var n in e)this.on(n,e[n]);else this._addEvent(e,t,{});return this},t.off=function(e,t){if(e)if(utils.isObject(e))for(var n in e)this.off(n);else{var r,o;t?!(r=this._events[e])||-1<(o=utils.findIndex(r,function(e){return e.listener===t}))&&r.splice(o,1):this._events[e]=[]}else this._events={};return this},t.once=function(t,e){var n=this;return e&&this._addEvent(t,e,{once:!0}),new Promise(function(e){n._addEvent(t,e,{once:!0})})},t.emit=function(t,n){var r=this;void 0===n&&(n={});var e=this._events[t];if(!t||!e)return!0;var o=!1;return n.eventType=t,n.stop=function(){o=!0},n.currentTarget=this,__spreadArrays(e).forEach(function(e){e.listener(n),e.once&&r.off(t,e.listener)}),!o},t.trigger=function(e,t){return void 0===t&&(t={}),this.emit(e,t)},t._addEvent=function(e,t,n){var r=this._events;r[e]=r[e]||[],r[e].push(__assign$1({listener:t},n))},e}(),Moveable=function(a){function e(e,t){void 0===t&&(t={});var n=a.call(this)||this;n.tempElement=document.createElement("div");var r=__assign({container:e||document.body},t),o={};EVENTS.forEach(function(t){o[utils.camelize("on "+t)]=function(e){return n.trigger(t,e)}}),React.render(React.createElement(InnerMoveable,__assign({ref:frameworkUtils.ref(n,"innerMoveable"),parentElement:e},r,o)),n.tempElement);var i=r.target;return utils.isArray(i)&&1<i.length&&n.updateRect(),n}__extends(e,a);var t=e.prototype;return t.setState=function(e,t){this.innerMoveable.setState(e,t)},t.destroy=function(){React.render(null,this.tempElement),this.off(),this.tempElement=null,this.innerMoveable=null},t.getMoveable=function(){return this.innerMoveable.moveable},e=__decorate([frameworkUtils.Properties(METHODS,function(e,r){e[r]||(e[r]=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=this.getMoveable();if(n&&n[r])return n[r].apply(n,e)})}),frameworkUtils.Properties(PROPERTIES,function(e,n){Object.defineProperty(e,n,{get:function(){return this.getMoveable().props[n]},set:function(e){var t;this.setState(((t={})[n]=e,t))},enumerable:!0,configurable:!0})})],e)}(EventEmitter);function getElementInfo(e,t,n){return Moveable$1.getElementInfo(e,t,n)}var modules={__proto__:null,default:Moveable,PROPERTIES:PROPERTIES,METHODS:METHODS,EVENTS:EVENTS,getElementInfo:getElementInfo};for(var name in modules)Moveable[name]=modules[name];module.exports=Moveable;