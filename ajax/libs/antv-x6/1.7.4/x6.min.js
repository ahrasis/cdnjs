!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self).X6={})}(this,function(U){"use strict";var o="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function t(t){var e={exports:{}};return t(e,e.exports),e.exports}var e,C=t(function(t){var e,n;e="undefined"!=typeof window?window:o,n=function(w,t){function f(t){return null!=t&&t===t.window}var e=[],n=Object.getPrototypeOf,a=e.slice,y=e.flat?function(t){return e.flat.call(t)}:function(t){return e.concat.apply([],t)},l=e.push,i=e.indexOf,o={},r=o.toString,m=o.hasOwnProperty,s=m.toString,c=s.call(Object),C={},v=function(t){return"function"==typeof t&&"number"!=typeof t.nodeType},E=w.document,h={type:!0,src:!0,nonce:!0,noModule:!0};function b(t,e,n){var o,i,r=(n=n||E).createElement("script");if(r.text=t,e)for(o in h)(i=e[o]||e.getAttribute&&e.getAttribute(o))&&r.setAttribute(o,i);n.head.appendChild(r).parentNode.removeChild(r)}function g(t){return null==t?t+"":"object"==typeof t||"function"==typeof t?o[r.call(t)]||"object":typeof t}var A=function(t,e){return new A.fn.init(t,e)};function u(t){var e=!!t&&"length"in t&&t.length,n=g(t);return!v(t)&&!f(t)&&("array"===n||0===e||"number"==typeof e&&0<e&&e-1 in t)}A.fn=A.prototype={jquery:"3.5.1",constructor:A,length:0,toArray:function(){return a.call(this)},get:function(t){return null==t?a.call(this):t<0?this[t+this.length]:this[t]},pushStack:function(t){t=A.merge(this.constructor(),t);return t.prevObject=this,t},each:function(t){return A.each(this,t)},map:function(n){return this.pushStack(A.map(this,function(t,e){return n.call(t,e,t)}))},slice:function(){return this.pushStack(a.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(A.grep(this,function(t,e){return(e+1)%2}))},odd:function(){return this.pushStack(A.grep(this,function(t,e){return e%2}))},eq:function(t){var e=this.length,t=+t+(t<0?e:0);return this.pushStack(0<=t&&t<e?[this[t]]:[])},end:function(){return this.prevObject||this.constructor()},push:l,sort:e.sort,splice:e.splice},A.extend=A.fn.extend=function(){var t,e,n,o,i,r=arguments[0]||{},s=1,a=arguments.length,l=!1;for("boolean"==typeof r&&(l=r,r=arguments[s]||{},s++),"object"==typeof r||v(r)||(r={}),s===a&&(r=this,s--);s<a;s++)if(null!=(t=arguments[s]))for(e in t)n=t[e],"__proto__"!==e&&r!==n&&(l&&n&&(A.isPlainObject(n)||(o=Array.isArray(n)))?(i=r[e],i=o&&!Array.isArray(i)?[]:o||A.isPlainObject(i)?i:{},o=!1,r[e]=A.extend(l,i,n)):void 0!==n&&(r[e]=n));return r},A.extend({expando:"jQuery"+("3.5.1"+Math.random()).replace(/\D/g,""),isReady:!0,error:function(t){throw new Error(t)},noop:function(){},isPlainObject:function(t){return!(!t||"[object Object]"!==r.call(t)||(t=n(t))&&("function"!=typeof(t=m.call(t,"constructor")&&t.constructor)||s.call(t)!==c))},isEmptyObject:function(t){for(var e in t)return!1;return!0},globalEval:function(t,e,n){b(t,{nonce:e&&e.nonce},n)},each:function(t,e){var n,o=0;if(u(t))for(n=t.length;o<n&&!1!==e.call(t[o],o,t[o]);o++);else for(o in t)if(!1===e.call(t[o],o,t[o]))break;return t},makeArray:function(t,e){e=e||[];return null!=t&&(u(Object(t))?A.merge(e,"string"==typeof t?[t]:t):l.call(e,t)),e},inArray:function(t,e,n){return null==e?-1:i.call(e,t,n)},merge:function(t,e){for(var n=+e.length,o=0,i=t.length;o<n;o++)t[i++]=e[o];return t.length=i,t},grep:function(t,e,n){for(var o=[],i=0,r=t.length,s=!n;i<r;i++)!e(t[i],i)!=s&&o.push(t[i]);return o},map:function(t,e,n){var o,i,r=0,s=[];if(u(t))for(o=t.length;r<o;r++)null!=(i=e(t[r],r,n))&&s.push(i);else for(r in t)null!=(i=e(t[r],r,n))&&s.push(i);return y(s)},guid:1,support:C}),"function"==typeof Symbol&&(A.fn[Symbol.iterator]=e[Symbol.iterator]),A.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(t,e){o["[object "+e+"]"]=e.toLowerCase()});var p=function(n){function u(t,e){return t="0x"+t.slice(1)-65536,e||(t<0?String.fromCharCode(65536+t):String.fromCharCode(t>>10|55296,1023&t|56320))}function o(){w()}var t,d,b,r,i,g,p,f,x,l,c,w,E,s,A,y,a,h,m,P="sizzle"+ +new Date,C=n.document,D=0,v=0,M=lt(),S=lt(),k=lt(),F=lt(),T=function(t,e){return t===e&&(c=!0),0},L={}.hasOwnProperty,e=[],N=e.pop,O=e.push,B=e.push,z=e.slice,V=function(t,e){for(var n=0,o=t.length;n<o;n++)if(t[n]===e)return n;return-1},j="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",I="[\\x20\\t\\r\\n\\f]",R="(?:\\\\[\\da-fA-F]{1,6}[\\x20\\t\\r\\n\\f]?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",_="\\[[\\x20\\t\\r\\n\\f]*("+R+")(?:"+I+"*([*^$|!~]?=)"+I+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+R+"))|)"+I+"*\\]",G=":("+R+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+_+")*)|.*)\\)|)",H=new RegExp(I+"+","g"),U=new RegExp("^[\\x20\\t\\r\\n\\f]+|((?:^|[^\\\\])(?:\\\\.)*)[\\x20\\t\\r\\n\\f]+$","g"),$=new RegExp("^[\\x20\\t\\r\\n\\f]*,[\\x20\\t\\r\\n\\f]*"),q=new RegExp("^[\\x20\\t\\r\\n\\f]*([>+~]|[\\x20\\t\\r\\n\\f])[\\x20\\t\\r\\n\\f]*"),W=new RegExp(I+"|>"),X=new RegExp(G),Y=new RegExp("^"+R+"$"),J={ID:new RegExp("^#("+R+")"),CLASS:new RegExp("^\\.("+R+")"),TAG:new RegExp("^("+R+"|[*])"),ATTR:new RegExp("^"+_),PSEUDO:new RegExp("^"+G),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\([\\x20\\t\\r\\n\\f]*(even|odd|(([+-]|)(\\d*)n|)[\\x20\\t\\r\\n\\f]*(?:([+-]|)[\\x20\\t\\r\\n\\f]*(\\d+)|))[\\x20\\t\\r\\n\\f]*\\)|)","i"),bool:new RegExp("^(?:"+j+")$","i"),needsContext:new RegExp("^[\\x20\\t\\r\\n\\f]*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\([\\x20\\t\\r\\n\\f]*((?:-\\d)?\\d*)[\\x20\\t\\r\\n\\f]*\\)|)(?=[^-]|$)","i")},Z=/HTML$/i,K=/^(?:input|select|textarea|button)$/i,Q=/^h\d$/i,tt=/^[^{]+\{\s*\[native \w/,et=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,nt=/[+~]/,ot=new RegExp("\\\\[\\da-fA-F]{1,6}[\\x20\\t\\r\\n\\f]?|\\\\([^\\r\\n\\f])","g"),it=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,rt=function(t,e){return e?"\0"===t?"ï¿½":t.slice(0,-1)+"\\"+t.charCodeAt(t.length-1).toString(16)+" ":"\\"+t},st=Ct(function(t){return!0===t.disabled&&"fieldset"===t.nodeName.toLowerCase()},{dir:"parentNode",next:"legend"});try{B.apply(e=z.call(C.childNodes),C.childNodes),e[C.childNodes.length].nodeType}catch(n){B={apply:e.length?function(t,e){O.apply(t,z.call(e))}:function(t,e){for(var n=t.length,o=0;t[n++]=e[o++];);t.length=n-1}}}function at(t,e,n,o){var i,r,s,a,l,c,h,u=e&&e.ownerDocument,p=e?e.nodeType:9;if(n=n||[],"string"!=typeof t||!t||1!==p&&9!==p&&11!==p)return n;if(!o&&(w(e),e=e||E,A)){if(11!==p&&(l=et.exec(t)))if(i=l[1]){if(9===p){if(!(s=e.getElementById(i)))return n;if(s.id===i)return n.push(s),n}else if(u&&(s=u.getElementById(i))&&m(e,s)&&s.id===i)return n.push(s),n}else{if(l[2])return B.apply(n,e.getElementsByTagName(t)),n;if((i=l[3])&&d.getElementsByClassName&&e.getElementsByClassName)return B.apply(n,e.getElementsByClassName(i)),n}if(d.qsa&&!F[t+" "]&&(!y||!y.test(t))&&(1!==p||"object"!==e.nodeName.toLowerCase())){if(h=t,u=e,1===p&&(W.test(t)||q.test(t))){for((u=nt.test(t)&&ft(e.parentNode)||e)===e&&d.scope||((a=e.getAttribute("id"))?a=a.replace(it,rt):e.setAttribute("id",a=P)),r=(c=g(t)).length;r--;)c[r]=(a?"#"+a:":scope")+" "+mt(c[r]);h=c.join(",")}try{return B.apply(n,u.querySelectorAll(h)),n}catch(e){F(t,!0)}finally{a===P&&e.removeAttribute("id")}}}return f(t.replace(U,"$1"),e,n,o)}function lt(){var o=[];return function t(e,n){return o.push(e+" ")>b.cacheLength&&delete t[o.shift()],t[e+" "]=n}}function ct(t){return t[P]=!0,t}function ht(t){var e=E.createElement("fieldset");try{return!!t(e)}catch(t){return!1}finally{e.parentNode&&e.parentNode.removeChild(e),e=null}}function ut(t,e){for(var n=t.split("|"),o=n.length;o--;)b.attrHandle[n[o]]=e}function pt(t,e){var n=e&&t,o=n&&1===t.nodeType&&1===e.nodeType&&t.sourceIndex-e.sourceIndex;if(o)return o;if(n)for(;n=n.nextSibling;)if(n===e)return-1;return t?1:-1}function dt(e){return function(t){return"form"in t?t.parentNode&&!1===t.disabled?"label"in t?"label"in t.parentNode?t.parentNode.disabled===e:t.disabled===e:t.isDisabled===e||t.isDisabled!==!e&&st(t)===e:t.disabled===e:"label"in t&&t.disabled===e}}function gt(s){return ct(function(r){return r=+r,ct(function(t,e){for(var n,o=s([],t.length,r),i=o.length;i--;)t[n=o[i]]&&(t[n]=!(e[n]=t[n]))})})}function ft(t){return t&&void 0!==t.getElementsByTagName&&t}for(t in d=at.support={},i=at.isXML=function(t){var e=t.namespaceURI,t=(t.ownerDocument||t).documentElement;return!Z.test(e||t&&t.nodeName||"HTML")},w=at.setDocument=function(t){var e,t=t?t.ownerDocument||t:C;return t!=E&&9===t.nodeType&&t.documentElement&&(s=(E=t).documentElement,A=!i(E),C!=E&&(e=E.defaultView)&&e.top!==e&&(e.addEventListener?e.addEventListener("unload",o,!1):e.attachEvent&&e.attachEvent("onunload",o)),d.scope=ht(function(t){return s.appendChild(t).appendChild(E.createElement("div")),void 0!==t.querySelectorAll&&!t.querySelectorAll(":scope fieldset div").length}),d.attributes=ht(function(t){return t.className="i",!t.getAttribute("className")}),d.getElementsByTagName=ht(function(t){return t.appendChild(E.createComment("")),!t.getElementsByTagName("*").length}),d.getElementsByClassName=tt.test(E.getElementsByClassName),d.getById=ht(function(t){return s.appendChild(t).id=P,!E.getElementsByName||!E.getElementsByName(P).length}),d.getById?(b.filter.ID=function(t){var e=t.replace(ot,u);return function(t){return t.getAttribute("id")===e}},b.find.ID=function(t,e){if(void 0!==e.getElementById&&A){t=e.getElementById(t);return t?[t]:[]}}):(b.filter.ID=function(t){var e=t.replace(ot,u);return function(t){t=void 0!==t.getAttributeNode&&t.getAttributeNode("id");return t&&t.value===e}},b.find.ID=function(t,e){if(void 0!==e.getElementById&&A){var n,o,i,r=e.getElementById(t);if(r){if((n=r.getAttributeNode("id"))&&n.value===t)return[r];for(i=e.getElementsByName(t),o=0;r=i[o++];)if((n=r.getAttributeNode("id"))&&n.value===t)return[r]}return[]}}),b.find.TAG=d.getElementsByTagName?function(t,e){return void 0!==e.getElementsByTagName?e.getElementsByTagName(t):d.qsa?e.querySelectorAll(t):void 0}:function(t,e){var n,o=[],i=0,r=e.getElementsByTagName(t);if("*"!==t)return r;for(;n=r[i++];)1===n.nodeType&&o.push(n);return o},b.find.CLASS=d.getElementsByClassName&&function(t,e){if(void 0!==e.getElementsByClassName&&A)return e.getElementsByClassName(t)},a=[],y=[],(d.qsa=tt.test(E.querySelectorAll))&&(ht(function(t){var e;s.appendChild(t).innerHTML="<a id='"+P+"'></a><select id='"+P+"-\r\\' msallowcapture=''><option selected=''></option></select>",t.querySelectorAll("[msallowcapture^='']").length&&y.push("[*^$]=[\\x20\\t\\r\\n\\f]*(?:''|\"\")"),t.querySelectorAll("[selected]").length||y.push("\\[[\\x20\\t\\r\\n\\f]*(?:value|"+j+")"),t.querySelectorAll("[id~="+P+"-]").length||y.push("~="),(e=E.createElement("input")).setAttribute("name",""),t.appendChild(e),t.querySelectorAll("[name='']").length||y.push("\\[[\\x20\\t\\r\\n\\f]*name[\\x20\\t\\r\\n\\f]*=[\\x20\\t\\r\\n\\f]*(?:''|\"\")"),t.querySelectorAll(":checked").length||y.push(":checked"),t.querySelectorAll("a#"+P+"+*").length||y.push(".#.+[+~]"),t.querySelectorAll("\\\f"),y.push("[\\r\\n\\f]")}),ht(function(t){t.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var e=E.createElement("input");e.setAttribute("type","hidden"),t.appendChild(e).setAttribute("name","D"),t.querySelectorAll("[name=d]").length&&y.push("name[\\x20\\t\\r\\n\\f]*[*^$|!~]?="),2!==t.querySelectorAll(":enabled").length&&y.push(":enabled",":disabled"),s.appendChild(t).disabled=!0,2!==t.querySelectorAll(":disabled").length&&y.push(":enabled",":disabled"),t.querySelectorAll("*,:x"),y.push(",.*:")})),(d.matchesSelector=tt.test(h=s.matches||s.webkitMatchesSelector||s.mozMatchesSelector||s.oMatchesSelector||s.msMatchesSelector))&&ht(function(t){d.disconnectedMatch=h.call(t,"*"),h.call(t,"[s!='']:x"),a.push("!=",G)}),y=y.length&&new RegExp(y.join("|")),a=a.length&&new RegExp(a.join("|")),e=tt.test(s.compareDocumentPosition),m=e||tt.test(s.contains)?function(t,e){var n=9===t.nodeType?t.documentElement:t,e=e&&e.parentNode;return t===e||!(!e||1!==e.nodeType||!(n.contains?n.contains(e):t.compareDocumentPosition&&16&t.compareDocumentPosition(e)))}:function(t,e){if(e)for(;e=e.parentNode;)if(e===t)return!0;return!1},T=e?function(t,e){if(t===e)return c=!0,0;var n=!t.compareDocumentPosition-!e.compareDocumentPosition;return n||(1&(n=(t.ownerDocument||t)==(e.ownerDocument||e)?t.compareDocumentPosition(e):1)||!d.sortDetached&&e.compareDocumentPosition(t)===n?t==E||t.ownerDocument==C&&m(C,t)?-1:e==E||e.ownerDocument==C&&m(C,e)?1:l?V(l,t)-V(l,e):0:4&n?-1:1)}:function(t,e){if(t===e)return c=!0,0;var n,o=0,i=t.parentNode,r=e.parentNode,s=[t],a=[e];if(!i||!r)return t==E?-1:e==E?1:i?-1:r?1:l?V(l,t)-V(l,e):0;if(i===r)return pt(t,e);for(n=t;n=n.parentNode;)s.unshift(n);for(n=e;n=n.parentNode;)a.unshift(n);for(;s[o]===a[o];)o++;return o?pt(s[o],a[o]):s[o]==C?-1:a[o]==C?1:0}),E},at.matches=function(t,e){return at(t,null,null,e)},at.matchesSelector=function(t,e){if(w(t),d.matchesSelector&&A&&!F[e+" "]&&(!a||!a.test(e))&&(!y||!y.test(e)))try{var n=h.call(t,e);if(n||d.disconnectedMatch||t.document&&11!==t.document.nodeType)return n}catch(t){F(e,!0)}return 0<at(e,E,null,[t]).length},at.contains=function(t,e){return(t.ownerDocument||t)!=E&&w(t),m(t,e)},at.attr=function(t,e){(t.ownerDocument||t)!=E&&w(t);var n=b.attrHandle[e.toLowerCase()],n=n&&L.call(b.attrHandle,e.toLowerCase())?n(t,e,!A):void 0;return void 0!==n?n:d.attributes||!A?t.getAttribute(e):(n=t.getAttributeNode(e))&&n.specified?n.value:null},at.escape=function(t){return(t+"").replace(it,rt)},at.error=function(t){throw new Error("Syntax error, unrecognized expression: "+t)},at.uniqueSort=function(t){var e,n=[],o=0,i=0;if(c=!d.detectDuplicates,l=!d.sortStable&&t.slice(0),t.sort(T),c){for(;e=t[i++];)e===t[i]&&(o=n.push(i));for(;o--;)t.splice(n[o],1)}return l=null,t},r=at.getText=function(t){var e,n="",o=0,i=t.nodeType;if(i){if(1===i||9===i||11===i){if("string"==typeof t.textContent)return t.textContent;for(t=t.firstChild;t;t=t.nextSibling)n+=r(t)}else if(3===i||4===i)return t.nodeValue}else for(;e=t[o++];)n+=r(e);return n},(b=at.selectors={cacheLength:50,createPseudo:ct,match:J,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(t){return t[1]=t[1].replace(ot,u),t[3]=(t[3]||t[4]||t[5]||"").replace(ot,u),"~="===t[2]&&(t[3]=" "+t[3]+" "),t.slice(0,4)},CHILD:function(t){return t[1]=t[1].toLowerCase(),"nth"===t[1].slice(0,3)?(t[3]||at.error(t[0]),t[4]=+(t[4]?t[5]+(t[6]||1):2*("even"===t[3]||"odd"===t[3])),t[5]=+(t[7]+t[8]||"odd"===t[3])):t[3]&&at.error(t[0]),t},PSEUDO:function(t){var e,n=!t[6]&&t[2];return J.CHILD.test(t[0])?null:(t[3]?t[2]=t[4]||t[5]||"":n&&X.test(n)&&(e=g(n,!0))&&(e=n.indexOf(")",n.length-e)-n.length)&&(t[0]=t[0].slice(0,e),t[2]=n.slice(0,e)),t.slice(0,3))}},filter:{TAG:function(t){var e=t.replace(ot,u).toLowerCase();return"*"===t?function(){return!0}:function(t){return t.nodeName&&t.nodeName.toLowerCase()===e}},CLASS:function(t){var e=M[t+" "];return e||(e=new RegExp("(^|[\\x20\\t\\r\\n\\f])"+t+"("+I+"|$)"))&&M(t,function(t){return e.test("string"==typeof t.className&&t.className||void 0!==t.getAttribute&&t.getAttribute("class")||"")})},ATTR:function(e,n,o){return function(t){t=at.attr(t,e);return null==t?"!="===n:!n||(t+="","="===n?t===o:"!="===n?t!==o:"^="===n?o&&0===t.indexOf(o):"*="===n?o&&-1<t.indexOf(o):"$="===n?o&&t.slice(-o.length)===o:"~="===n?-1<(" "+t.replace(H," ")+" ").indexOf(o):"|="===n&&(t===o||t.slice(0,o.length+1)===o+"-"))}},CHILD:function(g,t,e,f,y){var m="nth"!==g.slice(0,3),C="last"!==g.slice(-4),v="of-type"===t;return 1===f&&0===y?function(t){return!!t.parentNode}:function(t,e,n){var o,i,r,s,a,l,c=m!=C?"nextSibling":"previousSibling",h=t.parentNode,u=v&&t.nodeName.toLowerCase(),p=!n&&!v,d=!1;if(h){if(m){for(;c;){for(s=t;s=s[c];)if(v?s.nodeName.toLowerCase()===u:1===s.nodeType)return!1;l=c="only"===g&&!l&&"nextSibling"}return!0}if(l=[C?h.firstChild:h.lastChild],C&&p){for(d=(a=(o=(i=(r=(s=h)[P]||(s[P]={}))[s.uniqueID]||(r[s.uniqueID]={}))[g]||[])[0]===D&&o[1])&&o[2],s=a&&h.childNodes[a];s=++a&&s&&s[c]||(d=a=0)||l.pop();)if(1===s.nodeType&&++d&&s===t){i[g]=[D,a,d];break}}else if(p&&(d=a=(o=(i=(r=(s=t)[P]||(s[P]={}))[s.uniqueID]||(r[s.uniqueID]={}))[g]||[])[0]===D&&o[1]),!1===d)for(;(s=++a&&s&&s[c]||(d=a=0)||l.pop())&&((v?s.nodeName.toLowerCase()!==u:1!==s.nodeType)||!++d||(p&&((i=(r=s[P]||(s[P]={}))[s.uniqueID]||(r[s.uniqueID]={}))[g]=[D,d]),s!==t)););return(d-=y)===f||d%f==0&&0<=d/f}}},PSEUDO:function(t,r){var e,s=b.pseudos[t]||b.setFilters[t.toLowerCase()]||at.error("unsupported pseudo: "+t);return s[P]?s(r):1<s.length?(e=[t,t,"",r],b.setFilters.hasOwnProperty(t.toLowerCase())?ct(function(t,e){for(var n,o=s(t,r),i=o.length;i--;)t[n=V(t,o[i])]=!(e[n]=o[i])}):function(t){return s(t,0,e)}):s}},pseudos:{not:ct(function(t){var o=[],i=[],a=p(t.replace(U,"$1"));return a[P]?ct(function(t,e,n,o){for(var i,r=a(t,null,o,[]),s=t.length;s--;)(i=r[s])&&(t[s]=!(e[s]=i))}):function(t,e,n){return o[0]=t,a(o,null,n,i),o[0]=null,!i.pop()}}),has:ct(function(e){return function(t){return 0<at(e,t).length}}),contains:ct(function(e){return e=e.replace(ot,u),function(t){return-1<(t.textContent||r(t)).indexOf(e)}}),lang:ct(function(n){return Y.test(n||"")||at.error("unsupported lang: "+n),n=n.replace(ot,u).toLowerCase(),function(t){var e;do{if(e=A?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return(e=e.toLowerCase())===n||0===e.indexOf(n+"-")}while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var e=n.location&&n.location.hash;return e&&e.slice(1)===t.id},root:function(t){return t===s},focus:function(t){return t===E.activeElement&&(!E.hasFocus||E.hasFocus())&&!!(t.type||t.href||~t.tabIndex)},enabled:dt(!1),disabled:dt(!0),checked:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&!!t.checked||"option"===e&&!!t.selected},selected:function(t){return t.parentNode&&t.parentNode.selectedIndex,!0===t.selected},empty:function(t){for(t=t.firstChild;t;t=t.nextSibling)if(t.nodeType<6)return!1;return!0},parent:function(t){return!b.pseudos.empty(t)},header:function(t){return Q.test(t.nodeName)},input:function(t){return K.test(t.nodeName)},button:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&"button"===t.type||"button"===e},text:function(t){return"input"===t.nodeName.toLowerCase()&&"text"===t.type&&(null==(t=t.getAttribute("type"))||"text"===t.toLowerCase())},first:gt(function(){return[0]}),last:gt(function(t,e){return[e-1]}),eq:gt(function(t,e,n){return[n<0?n+e:n]}),even:gt(function(t,e){for(var n=0;n<e;n+=2)t.push(n);return t}),odd:gt(function(t,e){for(var n=1;n<e;n+=2)t.push(n);return t}),lt:gt(function(t,e,n){for(var o=n<0?n+e:e<n?e:n;0<=--o;)t.push(o);return t}),gt:gt(function(t,e,n){for(var o=n<0?n+e:n;++o<e;)t.push(o);return t})}}).pseudos.nth=b.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})b.pseudos[t]=function(e){return function(t){return"input"===t.nodeName.toLowerCase()&&t.type===e}}(t);for(t in{submit:!0,reset:!0})b.pseudos[t]=function(n){return function(t){var e=t.nodeName.toLowerCase();return("input"===e||"button"===e)&&t.type===n}}(t);function yt(){}function mt(t){for(var e=0,n=t.length,o="";e<n;e++)o+=t[e].value;return o}function Ct(s,t,e){var a=t.dir,l=t.next,c=l||a,h=e&&"parentNode"===c,u=v++;return t.first?function(t,e,n){for(;t=t[a];)if(1===t.nodeType||h)return s(t,e,n);return!1}:function(t,e,n){var o,i,r=[D,u];if(n){for(;t=t[a];)if((1===t.nodeType||h)&&s(t,e,n))return!0}else for(;t=t[a];)if(1===t.nodeType||h)if(o=(i=t[P]||(t[P]={}))[t.uniqueID]||(i[t.uniqueID]={}),l&&l===t.nodeName.toLowerCase())t=t[a]||t;else{if((i=o[c])&&i[0]===D&&i[1]===u)return r[2]=i[2];if((o[c]=r)[2]=s(t,e,n))return!0}return!1}}function vt(i){return 1<i.length?function(t,e,n){for(var o=i.length;o--;)if(!i[o](t,e,n))return!1;return!0}:i[0]}function bt(t,e,n,o,i){for(var r,s=[],a=0,l=t.length,c=null!=e;a<l;a++)(r=t[a])&&(n&&!n(r,o,i)||(s.push(r),c&&e.push(a)));return s}function xt(t){for(var o,e,n,i=t.length,r=b.relative[t[0].type],s=r||b.relative[" "],a=r?1:0,l=Ct(function(t){return t===o},s,!0),c=Ct(function(t){return-1<V(o,t)},s,!0),h=[function(t,e,n){n=!r&&(n||e!==x)||((o=e).nodeType?l:c)(t,e,n);return o=null,n}];a<i;a++)if(e=b.relative[t[a].type])h=[Ct(vt(h),e)];else{if((e=b.filter[t[a].type].apply(null,t[a].matches))[P]){for(n=++a;n<i&&!b.relative[t[n].type];n++);return function t(d,g,f,y,m,e){return y&&!y[P]&&(y=t(y)),m&&!m[P]&&(m=t(m,e)),ct(function(t,e,n,o){var i,r,s,a=[],l=[],c=e.length,h=t||function(t,e,n){for(var o=0,i=e.length;o<i;o++)at(t,e[o],n);return n}(g||"*",n.nodeType?[n]:n,[]),u=!d||!t&&g?h:bt(h,a,d,n,o),p=f?m||(t?d:c||y)?[]:e:u;if(f&&f(u,p,n,o),y)for(i=bt(p,l),y(i,[],n,o),r=i.length;r--;)(s=i[r])&&(p[l[r]]=!(u[l[r]]=s));if(t){if(m||d){if(m){for(i=[],r=p.length;r--;)(s=p[r])&&i.push(u[r]=s);m(null,p=[],i,o)}for(r=p.length;r--;)(s=p[r])&&-1<(i=m?V(t,s):a[r])&&(t[i]=!(e[i]=s))}}else p=bt(p===e?p.splice(c,p.length):p),m?m(null,e,p,o):B.apply(e,p)})}(1<a&&vt(h),1<a&&mt(t.slice(0,a-1).concat({value:" "===t[a-2].type?"*":""})).replace(U,"$1"),e,a<n&&xt(t.slice(a,n)),n<i&&xt(t=t.slice(n)),n<i&&mt(t))}h.push(e)}return vt(h)}return yt.prototype=b.filters=b.pseudos,b.setFilters=new yt,g=at.tokenize=function(t,e){var n,o,i,r,s,a,l,c=S[t+" "];if(c)return e?0:c.slice(0);for(s=t,a=[],l=b.preFilter;s;){for(r in n&&!(o=$.exec(s))||(o&&(s=s.slice(o[0].length)||s),a.push(i=[])),n=!1,(o=q.exec(s))&&(n=o.shift(),i.push({value:n,type:o[0].replace(U," ")}),s=s.slice(n.length)),b.filter)!(o=J[r].exec(s))||l[r]&&!(o=l[r](o))||(n=o.shift(),i.push({value:n,type:r,matches:o}),s=s.slice(n.length));if(!n)break}return e?s.length:s?at.error(t):S(t,a).slice(0)},p=at.compile=function(t,e){var n,y,m,C,v,o=[],i=[],r=k[t+" "];if(!r){for(n=(e=e||g(t)).length;n--;)((r=xt(e[n]))[P]?o:i).push(r);(r=k(t,(y=i,C=0<(m=o).length,v=0<y.length,C?ct(s):s))).selector=t}function s(t,e,n,o,i){var r,s,a,l=0,c="0",h=t&&[],u=[],p=x,d=t||v&&b.find.TAG("*",i),g=D+=null==p?1:Math.random()||.1,f=d.length;for(i&&(x=e==E||e||i);c!==f&&null!=(r=d[c]);c++){if(v&&r){for(s=0,e||r.ownerDocument==E||(w(r),n=!A);a=y[s++];)if(a(r,e||E,n)){o.push(r);break}i&&(D=g)}C&&((r=!a&&r)&&l--,t&&h.push(r))}if(l+=c,C&&c!==l){for(s=0;a=m[s++];)a(h,u,e,n);if(t){if(0<l)for(;c--;)h[c]||u[c]||(u[c]=N.call(o));u=bt(u)}B.apply(o,u),i&&!t&&0<u.length&&1<l+m.length&&at.uniqueSort(o)}return i&&(D=g,x=p),h}return r},f=at.select=function(t,e,n,o){var i,r,s,a,l,c="function"==typeof t&&t,h=!o&&g(t=c.selector||t);if(n=n||[],1===h.length){if(2<(r=h[0]=h[0].slice(0)).length&&"ID"===(s=r[0]).type&&9===e.nodeType&&A&&b.relative[r[1].type]){if(!(e=(b.find.ID(s.matches[0].replace(ot,u),e)||[])[0]))return n;c&&(e=e.parentNode),t=t.slice(r.shift().value.length)}for(i=J.needsContext.test(t)?0:r.length;i--&&(s=r[i],!b.relative[a=s.type]);)if((l=b.find[a])&&(o=l(s.matches[0].replace(ot,u),nt.test(r[0].type)&&ft(e.parentNode)||e))){if(r.splice(i,1),!(t=o.length&&mt(r)))return B.apply(n,o),n;break}}return(c||p(t,h))(o,e,!A,n,!e||nt.test(t)&&ft(e.parentNode)||e),n},d.sortStable=P.split("").sort(T).join("")===P,d.detectDuplicates=!!c,w(),d.sortDetached=ht(function(t){return 1&t.compareDocumentPosition(E.createElement("fieldset"))}),ht(function(t){return t.innerHTML="<a href='#'></a>","#"===t.firstChild.getAttribute("href")})||ut("type|href|height|width",function(t,e,n){if(!n)return t.getAttribute(e,"type"===e.toLowerCase()?1:2)}),d.attributes&&ht(function(t){return t.innerHTML="<input/>",t.firstChild.setAttribute("value",""),""===t.firstChild.getAttribute("value")})||ut("value",function(t,e,n){if(!n&&"input"===t.nodeName.toLowerCase())return t.defaultValue}),ht(function(t){return null==t.getAttribute("disabled")})||ut(j,function(t,e,n){if(!n)return!0===t[e]?e.toLowerCase():(e=t.getAttributeNode(e))&&e.specified?e.value:null}),at}(w);A.find=p,A.expr=p.selectors,A.expr[":"]=A.expr.pseudos,A.uniqueSort=A.unique=p.uniqueSort,A.text=p.getText,A.isXMLDoc=p.isXML,A.contains=p.contains,A.escapeSelector=p.escape;function d(t,e,n){for(var o=[],i=void 0!==n;(t=t[e])&&9!==t.nodeType;)if(1===t.nodeType){if(i&&A(t).is(n))break;o.push(t)}return o}function x(t,e){for(var n=[];t;t=t.nextSibling)1===t.nodeType&&t!==e&&n.push(t);return n}var P=A.expr.match.needsContext;function D(t,e){return t.nodeName&&t.nodeName.toLowerCase()===e.toLowerCase()}var M=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function S(t,n,o){return v(n)?A.grep(t,function(t,e){return!!n.call(t,e,t)!==o}):n.nodeType?A.grep(t,function(t){return t===n!==o}):"string"!=typeof n?A.grep(t,function(t){return-1<i.call(n,t)!==o}):A.filter(n,t,o)}A.filter=function(t,e,n){var o=e[0];return n&&(t=":not("+t+")"),1===e.length&&1===o.nodeType?A.find.matchesSelector(o,t)?[o]:[]:A.find.matches(t,A.grep(e,function(t){return 1===t.nodeType}))},A.fn.extend({find:function(t){var e,n,o=this.length,i=this;if("string"!=typeof t)return this.pushStack(A(t).filter(function(){for(e=0;e<o;e++)if(A.contains(i[e],this))return!0}));for(n=this.pushStack([]),e=0;e<o;e++)A.find(t,i[e],n);return 1<o?A.uniqueSort(n):n},filter:function(t){return this.pushStack(S(this,t||[],!1))},not:function(t){return this.pushStack(S(this,t||[],!0))},is:function(t){return!!S(this,"string"==typeof t&&P.test(t)?A(t):t||[],!1).length}});var k,F=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(A.fn.init=function(t,e,n){if(!t)return this;if(n=n||k,"string"!=typeof t)return t.nodeType?(this[0]=t,this.length=1,this):v(t)?void 0!==n.ready?n.ready(t):t(A):A.makeArray(t,this);if(!(o="<"===t[0]&&">"===t[t.length-1]&&3<=t.length?[null,t,null]:F.exec(t))||!o[1]&&e)return(!e||e.jquery?e||n:this.constructor(e)).find(t);if(o[1]){if(e=e instanceof A?e[0]:e,A.merge(this,A.parseHTML(o[1],e&&e.nodeType?e.ownerDocument||e:E,!0)),M.test(o[1])&&A.isPlainObject(e))for(var o in e)v(this[o])?this[o](e[o]):this.attr(o,e[o]);return this}return(t=E.getElementById(o[2]))&&(this[0]=t,this.length=1),this}).prototype=A.fn,k=A(E);var T=/^(?:parents|prev(?:Until|All))/,L={children:!0,contents:!0,next:!0,prev:!0};function N(t,e){for(;(t=t[e])&&1!==t.nodeType;);return t}A.fn.extend({has:function(t){var e=A(t,this),n=e.length;return this.filter(function(){for(var t=0;t<n;t++)if(A.contains(this,e[t]))return!0})},closest:function(t,e){var n,o=0,i=this.length,r=[],s="string"!=typeof t&&A(t);if(!P.test(t))for(;o<i;o++)for(n=this[o];n&&n!==e;n=n.parentNode)if(n.nodeType<11&&(s?-1<s.index(n):1===n.nodeType&&A.find.matchesSelector(n,t))){r.push(n);break}return this.pushStack(1<r.length?A.uniqueSort(r):r)},index:function(t){return t?"string"==typeof t?i.call(A(t),this[0]):i.call(this,t.jquery?t[0]:t):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(t,e){return this.pushStack(A.uniqueSort(A.merge(this.get(),A(t,e))))},addBack:function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}}),A.each({parent:function(t){t=t.parentNode;return t&&11!==t.nodeType?t:null},parents:function(t){return d(t,"parentNode")},parentsUntil:function(t,e,n){return d(t,"parentNode",n)},next:function(t){return N(t,"nextSibling")},prev:function(t){return N(t,"previousSibling")},nextAll:function(t){return d(t,"nextSibling")},prevAll:function(t){return d(t,"previousSibling")},nextUntil:function(t,e,n){return d(t,"nextSibling",n)},prevUntil:function(t,e,n){return d(t,"previousSibling",n)},siblings:function(t){return x((t.parentNode||{}).firstChild,t)},children:function(t){return x(t.firstChild)},contents:function(t){return null!=t.contentDocument&&n(t.contentDocument)?t.contentDocument:(D(t,"template")&&(t=t.content||t),A.merge([],t.childNodes))}},function(o,i){A.fn[o]=function(t,e){var n=A.map(this,i,t);return"Until"!==o.slice(-5)&&(e=t),e&&"string"==typeof e&&(n=A.filter(e,n)),1<this.length&&(L[o]||A.uniqueSort(n),T.test(o)&&n.reverse()),this.pushStack(n)}});var O=/[^\x20\t\r\n\f]+/g;function B(t){return t}function z(t){throw t}function V(t,e,n,o){var i;try{t&&v(i=t.promise)?i.call(t).done(e).fail(n):t&&v(i=t.then)?i.call(t,e,n):e.apply(void 0,[t].slice(o))}catch(t){n.apply(void 0,[t])}}A.Callbacks=function(o){var n;o="string"==typeof o?(n={},A.each(o.match(O)||[],function(t,e){n[e]=!0}),n):A.extend({},o);function i(){for(s=s||o.once,e=r=!0;l.length;c=-1)for(t=l.shift();++c<a.length;)!1===a[c].apply(t[0],t[1])&&o.stopOnFalse&&(c=a.length,t=!1);o.memory||(t=!1),r=!1,s&&(a=t?[]:"")}var r,t,e,s,a=[],l=[],c=-1,h={add:function(){return a&&(t&&!r&&(c=a.length-1,l.push(t)),function n(t){A.each(t,function(t,e){v(e)?o.unique&&h.has(e)||a.push(e):e&&e.length&&"string"!==g(e)&&n(e)})}(arguments),t&&!r&&i()),this},remove:function(){return A.each(arguments,function(t,e){for(var n;-1<(n=A.inArray(e,a,n));)a.splice(n,1),n<=c&&c--}),this},has:function(t){return t?-1<A.inArray(t,a):0<a.length},empty:function(){return a=a&&[],this},disable:function(){return s=l=[],a=t="",this},disabled:function(){return!a},lock:function(){return s=l=[],t||r||(a=t=""),this},locked:function(){return!!s},fireWith:function(t,e){return s||(e=[t,(e=e||[]).slice?e.slice():e],l.push(e),r||i()),this},fire:function(){return h.fireWith(this,arguments),this},fired:function(){return!!e}};return h},A.extend({Deferred:function(t){var r=[["notify","progress",A.Callbacks("memory"),A.Callbacks("memory"),2],["resolve","done",A.Callbacks("once memory"),A.Callbacks("once memory"),0,"resolved"],["reject","fail",A.Callbacks("once memory"),A.Callbacks("once memory"),1,"rejected"]],i="pending",s={state:function(){return i},always:function(){return a.done(arguments).fail(arguments),this},catch:function(t){return s.then(null,t)},pipe:function(){var i=arguments;return A.Deferred(function(o){A.each(r,function(t,e){var n=v(i[e[4]])&&i[e[4]];a[e[1]](function(){var t=n&&n.apply(this,arguments);t&&v(t.promise)?t.promise().progress(o.notify).done(o.resolve).fail(o.reject):o[e[0]+"With"](this,n?[t]:arguments)})}),i=null}).promise()},then:function(e,n,o){var l=0;function c(i,r,s,a){return function(){function t(){var t,e;if(!(i<l)){if((t=s.apply(n,o))===r.promise())throw new TypeError("Thenable self-resolution");e=t&&("object"==typeof t||"function"==typeof t)&&t.then,v(e)?a?e.call(t,c(l,r,B,a),c(l,r,z,a)):(l++,e.call(t,c(l,r,B,a),c(l,r,z,a),c(l,r,B,r.notifyWith))):(s!==B&&(n=void 0,o=[t]),(a||r.resolveWith)(n,o))}}var n=this,o=arguments,e=a?t:function(){try{t()}catch(t){A.Deferred.exceptionHook&&A.Deferred.exceptionHook(t,e.stackTrace),l<=i+1&&(s!==z&&(n=void 0,o=[t]),r.rejectWith(n,o))}};i?e():(A.Deferred.getStackHook&&(e.stackTrace=A.Deferred.getStackHook()),w.setTimeout(e))}}return A.Deferred(function(t){r[0][3].add(c(0,t,v(o)?o:B,t.notifyWith)),r[1][3].add(c(0,t,v(e)?e:B)),r[2][3].add(c(0,t,v(n)?n:z))}).promise()},promise:function(t){return null!=t?A.extend(t,s):s}},a={};return A.each(r,function(t,e){var n=e[2],o=e[5];s[e[1]]=n.add,o&&n.add(function(){i=o},r[3-t][2].disable,r[3-t][3].disable,r[0][2].lock,r[0][3].lock),n.add(e[3].fire),a[e[0]]=function(){return a[e[0]+"With"](this===a?void 0:this,arguments),this},a[e[0]+"With"]=n.fireWith}),s.promise(a),t&&t.call(a,a),a},when:function(t){function e(e){return function(t){i[e]=this,r[e]=1<arguments.length?a.call(arguments):t,--n||s.resolveWith(i,r)}}var n=arguments.length,o=n,i=Array(o),r=a.call(arguments),s=A.Deferred();if(n<=1&&(V(t,s.done(e(o)).resolve,s.reject,!n),"pending"===s.state()||v(r[o]&&r[o].then)))return s.then();for(;o--;)V(r[o],e(o),s.reject);return s.promise()}});var j=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;A.Deferred.exceptionHook=function(t,e){w.console&&w.console.warn&&t&&j.test(t.name)&&w.console.warn("jQuery.Deferred exception: "+t.message,t.stack,e)},A.readyException=function(t){w.setTimeout(function(){throw t})};var I=A.Deferred();function R(){E.removeEventListener("DOMContentLoaded",R),w.removeEventListener("load",R),A.ready()}A.fn.ready=function(t){return I.then(t).catch(function(t){A.readyException(t)}),this},A.extend({isReady:!1,readyWait:1,ready:function(t){(!0===t?--A.readyWait:A.isReady)||((A.isReady=!0)!==t&&0<--A.readyWait||I.resolveWith(E,[A]))}}),A.ready.then=I.then,"complete"===E.readyState||"loading"!==E.readyState&&!E.documentElement.doScroll?w.setTimeout(A.ready):(E.addEventListener("DOMContentLoaded",R),w.addEventListener("load",R));var _=function(t,e,n,o,i,r,s){var a=0,l=t.length,c=null==n;if("object"===g(n))for(a in i=!0,n)_(t,e,a,n[a],!0,r,s);else if(void 0!==o&&(i=!0,v(o)||(s=!0),c&&(e=s?(e.call(t,o),null):(c=e,function(t,e,n){return c.call(A(t),n)})),e))for(;a<l;a++)e(t[a],n,s?o:o.call(t[a],a,e(t[a],n)));return i?t:c?e.call(t):l?e(t[0],n):r},G=/^-ms-/,H=/-([a-z])/g;function U(t,e){return e.toUpperCase()}function $(t){return t.replace(G,"ms-").replace(H,U)}function q(t){return 1===t.nodeType||9===t.nodeType||!+t.nodeType}function W(){this.expando=A.expando+W.uid++}W.uid=1,W.prototype={cache:function(t){var e=t[this.expando];return e||(e={},q(t)&&(t.nodeType?t[this.expando]=e:Object.defineProperty(t,this.expando,{value:e,configurable:!0}))),e},set:function(t,e,n){var o,i=this.cache(t);if("string"==typeof e)i[$(e)]=n;else for(o in e)i[$(o)]=e[o];return i},get:function(t,e){return void 0===e?this.cache(t):t[this.expando]&&t[this.expando][$(e)]},access:function(t,e,n){return void 0===e||e&&"string"==typeof e&&void 0===n?this.get(t,e):(this.set(t,e,n),void 0!==n?n:e)},remove:function(t,e){var n,o=t[this.expando];if(void 0!==o){if(void 0!==e){n=(e=Array.isArray(e)?e.map($):(e=$(e))in o?[e]:e.match(O)||[]).length;for(;n--;)delete o[e[n]]}void 0!==e&&!A.isEmptyObject(o)||(t.nodeType?t[this.expando]=void 0:delete t[this.expando])}},hasData:function(t){t=t[this.expando];return void 0!==t&&!A.isEmptyObject(t)}};var X=new W,Y=new W,J=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Z=/[A-Z]/g;function K(t,e,n){var o,i;if(void 0===n&&1===t.nodeType)if(o="data-"+e.replace(Z,"-$&").toLowerCase(),"string"==typeof(n=t.getAttribute(o))){try{n="true"===(i=n)||"false"!==i&&("null"===i?null:i===+i+""?+i:J.test(i)?JSON.parse(i):i)}catch(t){}Y.set(t,e,n)}else n=void 0;return n}A.extend({hasData:function(t){return Y.hasData(t)||X.hasData(t)},data:function(t,e,n){return Y.access(t,e,n)},removeData:function(t,e){Y.remove(t,e)},_data:function(t,e,n){return X.access(t,e,n)},_removeData:function(t,e){X.remove(t,e)}}),A.fn.extend({data:function(n,t){var e,o,i,r=this[0],s=r&&r.attributes;if(void 0!==n)return"object"==typeof n?this.each(function(){Y.set(this,n)}):_(this,function(t){var e;return r&&void 0===t?void 0!==(e=Y.get(r,n))||void 0!==(e=K(r,n))?e:void 0:void this.each(function(){Y.set(this,n,t)})},null,t,1<arguments.length,null,!0);if(this.length&&(i=Y.get(r),1===r.nodeType&&!X.get(r,"hasDataAttrs"))){for(e=s.length;e--;)s[e]&&0===(o=s[e].name).indexOf("data-")&&(o=$(o.slice(5)),K(r,o,i[o]));X.set(r,"hasDataAttrs",!0)}return i},removeData:function(t){return this.each(function(){Y.remove(this,t)})}}),A.extend({queue:function(t,e,n){var o;if(t)return e=(e||"fx")+"queue",o=X.get(t,e),n&&(!o||Array.isArray(n)?o=X.access(t,e,A.makeArray(n)):o.push(n)),o||[]},dequeue:function(t,e){e=e||"fx";var n=A.queue(t,e),o=n.length,i=n.shift(),r=A._queueHooks(t,e);"inprogress"===i&&(i=n.shift(),o--),i&&("fx"===e&&n.unshift("inprogress"),delete r.stop,i.call(t,function(){A.dequeue(t,e)},r)),!o&&r&&r.empty.fire()},_queueHooks:function(t,e){var n=e+"queueHooks";return X.get(t,n)||X.access(t,n,{empty:A.Callbacks("once memory").add(function(){X.remove(t,[e+"queue",n])})})}}),A.fn.extend({queue:function(e,n){var t=2;return"string"!=typeof e&&(n=e,e="fx",t--),arguments.length<t?A.queue(this[0],e):void 0===n?this:this.each(function(){var t=A.queue(this,e,n);A._queueHooks(this,e),"fx"===e&&"inprogress"!==t[0]&&A.dequeue(this,e)})},dequeue:function(t){return this.each(function(){A.dequeue(this,t)})},clearQueue:function(t){return this.queue(t||"fx",[])},promise:function(t,e){function n(){--i||r.resolveWith(s,[s])}var o,i=1,r=A.Deferred(),s=this,a=this.length;for("string"!=typeof t&&(e=t,t=void 0),t=t||"fx";a--;)(o=X.get(s[a],t+"queueHooks"))&&o.empty&&(i++,o.empty.add(n));return n(),r.promise(e)}});var Q=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,tt=new RegExp("^(?:([+-])=|)("+Q+")([a-z%]*)$","i"),et=["Top","Right","Bottom","Left"],nt=E.documentElement,ot=function(t){return A.contains(t.ownerDocument,t)},it={composed:!0};nt.getRootNode&&(ot=function(t){return A.contains(t.ownerDocument,t)||t.getRootNode(it)===t.ownerDocument});function rt(t,e){return"none"===(t=e||t).style.display||""===t.style.display&&ot(t)&&"none"===A.css(t,"display")}function st(t,e,n,o){var i,r,s=20,a=o?function(){return o.cur()}:function(){return A.css(t,e,"")},l=a(),c=n&&n[3]||(A.cssNumber[e]?"":"px"),h=t.nodeType&&(A.cssNumber[e]||"px"!==c&&+l)&&tt.exec(A.css(t,e));if(h&&h[3]!==c){for(l/=2,c=c||h[3],h=+l||1;s--;)A.style(t,e,h+c),(1-r)*(1-(r=a()/l||.5))<=0&&(s=0),h/=r;h*=2,A.style(t,e,h+c),n=n||[]}return n&&(h=+h||+l||0,i=n[1]?h+(n[1]+1)*n[2]:+n[2],o&&(o.unit=c,o.start=h,o.end=i)),i}var at={};function lt(t,e){for(var n,o,i,r,s,a=[],l=0,c=t.length;l<c;l++)(o=t[l]).style&&(n=o.style.display,e?("none"===n&&(a[l]=X.get(o,"display")||null,a[l]||(o.style.display="")),""===o.style.display&&rt(o)&&(a[l]=(s=r=void 0,r=(i=o).ownerDocument,s=i.nodeName,(i=at[s])||(r=r.body.appendChild(r.createElement(s)),i=A.css(r,"display"),r.parentNode.removeChild(r),"none"===i&&(i="block"),at[s]=i)))):"none"!==n&&(a[l]="none",X.set(o,"display",n)));for(l=0;l<c;l++)null!=a[l]&&(t[l].style.display=a[l]);return t}A.fn.extend({show:function(){return lt(this,!0)},hide:function(){return lt(this)},toggle:function(t){return"boolean"==typeof t?t?this.show():this.hide():this.each(function(){rt(this)?A(this).show():A(this).hide()})}});var ct=/^(?:checkbox|radio)$/i,ht=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,ut=/^$|^module$|\/(?:java|ecma)script/i,pt=E.createDocumentFragment().appendChild(E.createElement("div"));(p=E.createElement("input")).setAttribute("type","radio"),p.setAttribute("checked","checked"),p.setAttribute("name","t"),pt.appendChild(p),C.checkClone=pt.cloneNode(!0).cloneNode(!0).lastChild.checked,pt.innerHTML="<textarea>x</textarea>",C.noCloneChecked=!!pt.cloneNode(!0).lastChild.defaultValue,pt.innerHTML="<option></option>",C.option=!!pt.lastChild;var dt={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function gt(t,e){var n=void 0!==t.getElementsByTagName?t.getElementsByTagName(e||"*"):void 0!==t.querySelectorAll?t.querySelectorAll(e||"*"):[];return void 0===e||e&&D(t,e)?A.merge([t],n):n}function ft(t,e){for(var n=0,o=t.length;n<o;n++)X.set(t[n],"globalEval",!e||X.get(e[n],"globalEval"))}dt.tbody=dt.tfoot=dt.colgroup=dt.caption=dt.thead,dt.th=dt.td,C.option||(dt.optgroup=dt.option=[1,"<select multiple='multiple'>","</select>"]);var yt=/<|&#?\w+;/;function mt(t,e,n,o,i){for(var r,s,a,l,c,h=e.createDocumentFragment(),u=[],p=0,d=t.length;p<d;p++)if((r=t[p])||0===r)if("object"===g(r))A.merge(u,r.nodeType?[r]:r);else if(yt.test(r)){for(s=s||h.appendChild(e.createElement("div")),a=(ht.exec(r)||["",""])[1].toLowerCase(),a=dt[a]||dt._default,s.innerHTML=a[1]+A.htmlPrefilter(r)+a[2],c=a[0];c--;)s=s.lastChild;A.merge(u,s.childNodes),(s=h.firstChild).textContent=""}else u.push(e.createTextNode(r));for(h.textContent="",p=0;r=u[p++];)if(o&&-1<A.inArray(r,o))i&&i.push(r);else if(l=ot(r),s=gt(h.appendChild(r),"script"),l&&ft(s),n)for(c=0;r=s[c++];)ut.test(r.type||"")&&n.push(r);return h}var Ct=/^key/,vt=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,bt=/^([^.]*)(?:\.(.+)|)/;function xt(){return!0}function wt(){return!1}function Et(t,e){return t===function(){try{return E.activeElement}catch(t){}}()==("focus"===e)}function At(t,e,n,o,i,r){var s,a;if("object"==typeof e){for(a in"string"!=typeof n&&(o=o||n,n=void 0),e)At(t,a,n,o,e[a],r);return t}if(null==o&&null==i?(i=n,o=n=void 0):null==i&&("string"==typeof n?(i=o,o=void 0):(i=o,o=n,n=void 0)),!1===i)i=wt;else if(!i)return t;return 1===r&&(s=i,(i=function(t){return A().off(t),s.apply(this,arguments)}).guid=s.guid||(s.guid=A.guid++)),t.each(function(){A.event.add(this,e,i,o,n)})}function Pt(t,i,r){r?(X.set(t,i,!1),A.event.add(t,i,{namespace:!1,handler:function(t){var e,n,o=X.get(this,i);if(1&t.isTrigger&&this[i]){if(o.length)(A.event.special[i]||{}).delegateType&&t.stopPropagation();else if(o=a.call(arguments),X.set(this,i,o),e=r(this,i),this[i](),o!==(n=X.get(this,i))||e?X.set(this,i,!1):n={},o!==n)return t.stopImmediatePropagation(),t.preventDefault(),n.value}else o.length&&(X.set(this,i,{value:A.event.trigger(A.extend(o[0],A.Event.prototype),o.slice(1),this)}),t.stopImmediatePropagation())}})):void 0===X.get(t,i)&&A.event.add(t,i,xt)}A.event={global:{},add:function(e,t,n,o,i){var r,s,a,l,c,h,u,p,d,g=X.get(e);if(q(e))for(n.handler&&(n=(r=n).handler,i=r.selector),i&&A.find.matchesSelector(nt,i),n.guid||(n.guid=A.guid++),(a=g.events)||(a=g.events=Object.create(null)),(s=g.handle)||(s=g.handle=function(t){return void 0!==A&&A.event.triggered!==t.type?A.event.dispatch.apply(e,arguments):void 0}),l=(t=(t||"").match(O)||[""]).length;l--;)u=d=(c=bt.exec(t[l])||[])[1],p=(c[2]||"").split(".").sort(),u&&(h=A.event.special[u]||{},u=(i?h.delegateType:h.bindType)||u,h=A.event.special[u]||{},c=A.extend({type:u,origType:d,data:o,handler:n,guid:n.guid,selector:i,needsContext:i&&A.expr.match.needsContext.test(i),namespace:p.join(".")},r),(d=a[u])||((d=a[u]=[]).delegateCount=0,h.setup&&!1!==h.setup.call(e,o,p,s)||e.addEventListener&&e.addEventListener(u,s)),h.add&&(h.add.call(e,c),c.handler.guid||(c.handler.guid=n.guid)),i?d.splice(d.delegateCount++,0,c):d.push(c),A.event.global[u]=!0)},remove:function(t,e,n,o,i){var r,s,a,l,c,h,u,p,d,g,f,y=X.hasData(t)&&X.get(t);if(y&&(l=y.events)){for(c=(e=(e||"").match(O)||[""]).length;c--;)if(d=f=(a=bt.exec(e[c])||[])[1],g=(a[2]||"").split(".").sort(),d){for(u=A.event.special[d]||{},p=l[d=(o?u.delegateType:u.bindType)||d]||[],a=a[2]&&new RegExp("(^|\\.)"+g.join("\\.(?:.*\\.|)")+"(\\.|$)"),s=r=p.length;r--;)h=p[r],!i&&f!==h.origType||n&&n.guid!==h.guid||a&&!a.test(h.namespace)||o&&o!==h.selector&&("**"!==o||!h.selector)||(p.splice(r,1),h.selector&&p.delegateCount--,u.remove&&u.remove.call(t,h));s&&!p.length&&(u.teardown&&!1!==u.teardown.call(t,g,y.handle)||A.removeEvent(t,d,y.handle),delete l[d])}else for(d in l)A.event.remove(t,d+e[c],n,o,!0);A.isEmptyObject(l)&&X.remove(t,"handle events")}},dispatch:function(t){var e,n,o,i,r,s=new Array(arguments.length),a=A.event.fix(t),l=(X.get(this,"events")||Object.create(null))[a.type]||[],t=A.event.special[a.type]||{};for(s[0]=a,e=1;e<arguments.length;e++)s[e]=arguments[e];if(a.delegateTarget=this,!t.preDispatch||!1!==t.preDispatch.call(this,a)){for(r=A.event.handlers.call(this,a,l),e=0;(o=r[e++])&&!a.isPropagationStopped();)for(a.currentTarget=o.elem,n=0;(i=o.handlers[n++])&&!a.isImmediatePropagationStopped();)a.rnamespace&&!1!==i.namespace&&!a.rnamespace.test(i.namespace)||(a.handleObj=i,a.data=i.data,void 0!==(i=((A.event.special[i.origType]||{}).handle||i.handler).apply(o.elem,s))&&!1===(a.result=i)&&(a.preventDefault(),a.stopPropagation()));return t.postDispatch&&t.postDispatch.call(this,a),a.result}},handlers:function(t,e){var n,o,i,r,s,a=[],l=e.delegateCount,c=t.target;if(l&&c.nodeType&&!("click"===t.type&&1<=t.button))for(;c!==this;c=c.parentNode||this)if(1===c.nodeType&&("click"!==t.type||!0!==c.disabled)){for(r=[],s={},n=0;n<l;n++)void 0===s[i=(o=e[n]).selector+" "]&&(s[i]=o.needsContext?-1<A(i,this).index(c):A.find(i,this,null,[c]).length),s[i]&&r.push(o);r.length&&a.push({elem:c,handlers:r})}return c=this,l<e.length&&a.push({elem:c,handlers:e.slice(l)}),a},addProp:function(e,t){Object.defineProperty(A.Event.prototype,e,{enumerable:!0,configurable:!0,get:v(t)?function(){if(this.originalEvent)return t(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[e]},set:function(t){Object.defineProperty(this,e,{enumerable:!0,configurable:!0,writable:!0,value:t})}})},fix:function(t){return t[A.expando]?t:new A.Event(t)},special:{load:{noBubble:!0},click:{setup:function(t){t=this||t;return ct.test(t.type)&&t.click&&D(t,"input")&&Pt(t,"click",xt),!1},trigger:function(t){t=this||t;return ct.test(t.type)&&t.click&&D(t,"input")&&Pt(t,"click"),!0},_default:function(t){t=t.target;return ct.test(t.type)&&t.click&&D(t,"input")&&X.get(t,"click")||D(t,"a")}},beforeunload:{postDispatch:function(t){void 0!==t.result&&t.originalEvent&&(t.originalEvent.returnValue=t.result)}}}},A.removeEvent=function(t,e,n){t.removeEventListener&&t.removeEventListener(e,n)},A.Event=function(t,e){if(!(this instanceof A.Event))return new A.Event(t,e);t&&t.type?(this.originalEvent=t,this.type=t.type,this.isDefaultPrevented=t.defaultPrevented||void 0===t.defaultPrevented&&!1===t.returnValue?xt:wt,this.target=t.target&&3===t.target.nodeType?t.target.parentNode:t.target,this.currentTarget=t.currentTarget,this.relatedTarget=t.relatedTarget):this.type=t,e&&A.extend(this,e),this.timeStamp=t&&t.timeStamp||Date.now(),this[A.expando]=!0},A.Event.prototype={constructor:A.Event,isDefaultPrevented:wt,isPropagationStopped:wt,isImmediatePropagationStopped:wt,isSimulated:!1,preventDefault:function(){var t=this.originalEvent;this.isDefaultPrevented=xt,t&&!this.isSimulated&&t.preventDefault()},stopPropagation:function(){var t=this.originalEvent;this.isPropagationStopped=xt,t&&!this.isSimulated&&t.stopPropagation()},stopImmediatePropagation:function(){var t=this.originalEvent;this.isImmediatePropagationStopped=xt,t&&!this.isSimulated&&t.stopImmediatePropagation(),this.stopPropagation()}},A.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:function(t){var e=t.button;return null==t.which&&Ct.test(t.type)?null!=t.charCode?t.charCode:t.keyCode:!t.which&&void 0!==e&&vt.test(t.type)?1&e?1:2&e?3:4&e?2:0:t.which}},A.event.addProp),A.each({focus:"focusin",blur:"focusout"},function(t,e){A.event.special[t]={setup:function(){return Pt(this,t,Et),!1},trigger:function(){return Pt(this,t),!0},delegateType:e}}),A.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(t,i){A.event.special[t]={delegateType:i,bindType:i,handle:function(t){var e,n=t.relatedTarget,o=t.handleObj;return n&&(n===this||A.contains(this,n))||(t.type=o.origType,e=o.handler.apply(this,arguments),t.type=i),e}}}),A.fn.extend({on:function(t,e,n,o){return At(this,t,e,n,o)},one:function(t,e,n,o){return At(this,t,e,n,o,1)},off:function(t,e,n){var o,i;if(t&&t.preventDefault&&t.handleObj)return o=t.handleObj,A(t.delegateTarget).off(o.namespace?o.origType+"."+o.namespace:o.origType,o.selector,o.handler),this;if("object"!=typeof t)return!1!==e&&"function"!=typeof e||(n=e,e=void 0),!1===n&&(n=wt),this.each(function(){A.event.remove(this,t,n,e)});for(i in t)this.off(i,e,t[i]);return this}});var Dt=/<script|<style|<link/i,Mt=/checked\s*(?:[^=]|=\s*.checked.)/i,St=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function kt(t,e){return D(t,"table")&&D(11!==e.nodeType?e:e.firstChild,"tr")&&A(t).children("tbody")[0]||t}function Ft(t){return t.type=(null!==t.getAttribute("type"))+"/"+t.type,t}function Tt(t){return"true/"===(t.type||"").slice(0,5)?t.type=t.type.slice(5):t.removeAttribute("type"),t}function Lt(t,e){var n,o,i,r;if(1===e.nodeType){if(X.hasData(t)&&(r=X.get(t).events))for(i in X.remove(e,"handle events"),r)for(n=0,o=r[i].length;n<o;n++)A.event.add(e,i,r[i][n]);Y.hasData(t)&&(t=Y.access(t),t=A.extend({},t),Y.set(e,t))}}function Nt(n,o,i,r){o=y(o);var t,e,s,a,l,c,h=0,u=n.length,p=u-1,d=o[0],g=v(d);if(g||1<u&&"string"==typeof d&&!C.checkClone&&Mt.test(d))return n.each(function(t){var e=n.eq(t);g&&(o[0]=d.call(this,t,e.html())),Nt(e,o,i,r)});if(u&&(e=(t=mt(o,n[0].ownerDocument,!1,n,r)).firstChild,1===t.childNodes.length&&(t=e),e||r)){for(a=(s=A.map(gt(t,"script"),Ft)).length;h<u;h++)l=t,h!==p&&(l=A.clone(l,!0,!0),a&&A.merge(s,gt(l,"script"))),i.call(n[h],l,h);if(a)for(c=s[s.length-1].ownerDocument,A.map(s,Tt),h=0;h<a;h++)l=s[h],ut.test(l.type||"")&&!X.access(l,"globalEval")&&A.contains(c,l)&&(l.src&&"module"!==(l.type||"").toLowerCase()?A._evalUrl&&!l.noModule&&A._evalUrl(l.src,{nonce:l.nonce||l.getAttribute("nonce")},c):b(l.textContent.replace(St,""),l,c))}return n}function Ot(t,e,n){for(var o,i=e?A.filter(e,t):t,r=0;null!=(o=i[r]);r++)n||1!==o.nodeType||A.cleanData(gt(o)),o.parentNode&&(n&&ot(o)&&ft(gt(o,"script")),o.parentNode.removeChild(o));return t}A.extend({htmlPrefilter:function(t){return t},clone:function(t,e,n){var o,i,r,s,a,l,c,h=t.cloneNode(!0),u=ot(t);if(!(C.noCloneChecked||1!==t.nodeType&&11!==t.nodeType||A.isXMLDoc(t)))for(s=gt(h),o=0,i=(r=gt(t)).length;o<i;o++)a=r[o],l=s[o],c=void 0,"input"===(c=l.nodeName.toLowerCase())&&ct.test(a.type)?l.checked=a.checked:"input"!==c&&"textarea"!==c||(l.defaultValue=a.defaultValue);if(e)if(n)for(r=r||gt(t),s=s||gt(h),o=0,i=r.length;o<i;o++)Lt(r[o],s[o]);else Lt(t,h);return 0<(s=gt(h,"script")).length&&ft(s,!u&&gt(t,"script")),h},cleanData:function(t){for(var e,n,o,i=A.event.special,r=0;void 0!==(n=t[r]);r++)if(q(n)){if(e=n[X.expando]){if(e.events)for(o in e.events)i[o]?A.event.remove(n,o):A.removeEvent(n,o,e.handle);n[X.expando]=void 0}n[Y.expando]&&(n[Y.expando]=void 0)}}}),A.fn.extend({detach:function(t){return Ot(this,t,!0)},remove:function(t){return Ot(this,t)},text:function(t){return _(this,function(t){return void 0===t?A.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=t)})},null,t,arguments.length)},append:function(){return Nt(this,arguments,function(t){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||kt(this,t).appendChild(t)})},prepend:function(){return Nt(this,arguments,function(t){var e;1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(e=kt(this,t)).insertBefore(t,e.firstChild)})},before:function(){return Nt(this,arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this)})},after:function(){return Nt(this,arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this.nextSibling)})},empty:function(){for(var t,e=0;null!=(t=this[e]);e++)1===t.nodeType&&(A.cleanData(gt(t,!1)),t.textContent="");return this},clone:function(t,e){return t=null!=t&&t,e=null==e?t:e,this.map(function(){return A.clone(this,t,e)})},html:function(t){return _(this,function(t){var e=this[0]||{},n=0,o=this.length;if(void 0===t&&1===e.nodeType)return e.innerHTML;if("string"==typeof t&&!Dt.test(t)&&!dt[(ht.exec(t)||["",""])[1].toLowerCase()]){t=A.htmlPrefilter(t);try{for(;n<o;n++)1===(e=this[n]||{}).nodeType&&(A.cleanData(gt(e,!1)),e.innerHTML=t);e=0}catch(t){}}e&&this.empty().append(t)},null,t,arguments.length)},replaceWith:function(){var n=[];return Nt(this,arguments,function(t){var e=this.parentNode;A.inArray(this,n)<0&&(A.cleanData(gt(this)),e&&e.replaceChild(t,this))},n)}}),A.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(t,s){A.fn[t]=function(t){for(var e,n=[],o=A(t),i=o.length-1,r=0;r<=i;r++)e=r===i?this:this.clone(!0),A(o[r])[s](e),l.apply(n,e.get());return this.pushStack(n)}});function Bt(t,e,n){var o,i={};for(o in e)i[o]=t.style[o],t.style[o]=e[o];for(o in n=n.call(t),e)t.style[o]=i[o];return n}var zt,Vt,jt,It,Rt,_t,Gt,Ht,Ut=new RegExp("^("+Q+")(?!px)[a-z%]+$","i"),$t=function(t){var e=t.ownerDocument.defaultView;return e&&e.opener||(e=w),e.getComputedStyle(t)},qt=new RegExp(et.join("|"),"i");function Wt(t,e,n){var o,i,r=t.style;return(n=n||$t(t))&&(""!==(i=n.getPropertyValue(e)||n[e])||ot(t)||(i=A.style(t,e)),!C.pixelBoxStyles()&&Ut.test(i)&&qt.test(e)&&(o=r.width,t=r.minWidth,e=r.maxWidth,r.minWidth=r.maxWidth=r.width=i,i=n.width,r.width=o,r.minWidth=t,r.maxWidth=e)),void 0!==i?i+"":i}function Xt(t,e){return{get:function(){if(!t())return(this.get=e).apply(this,arguments);delete this.get}}}function Yt(){var t;Ht&&(Gt.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",Ht.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",nt.appendChild(Gt).appendChild(Ht),t=w.getComputedStyle(Ht),zt="1%"!==t.top,_t=12===Jt(t.marginLeft),Ht.style.right="60%",It=36===Jt(t.right),Vt=36===Jt(t.width),Ht.style.position="absolute",jt=12===Jt(Ht.offsetWidth/3),nt.removeChild(Gt),Ht=null)}function Jt(t){return Math.round(parseFloat(t))}Gt=E.createElement("div"),(Ht=E.createElement("div")).style&&(Ht.style.backgroundClip="content-box",Ht.cloneNode(!0).style.backgroundClip="",C.clearCloneStyle="content-box"===Ht.style.backgroundClip,A.extend(C,{boxSizingReliable:function(){return Yt(),Vt},pixelBoxStyles:function(){return Yt(),It},pixelPosition:function(){return Yt(),zt},reliableMarginLeft:function(){return Yt(),_t},scrollboxSize:function(){return Yt(),jt},reliableTrDimensions:function(){var t,e,n;return null==Rt&&(t=E.createElement("table"),n=E.createElement("tr"),e=E.createElement("div"),t.style.cssText="position:absolute;left:-11111px",n.style.height="1px",e.style.height="9px",nt.appendChild(t).appendChild(n).appendChild(e),n=w.getComputedStyle(n),Rt=3<parseInt(n.height),nt.removeChild(t)),Rt}}));var Zt=["Webkit","Moz","ms"],Kt=E.createElement("div").style,Qt={};function te(t){return A.cssProps[t]||Qt[t]||(t in Kt?t:Qt[t]=function(t){for(var e=t[0].toUpperCase()+t.slice(1),n=Zt.length;n--;)if((t=Zt[n]+e)in Kt)return t}(t)||t)}var ee=/^(none|table(?!-c[ea]).+)/,ne=/^--/,oe={position:"absolute",visibility:"hidden",display:"block"},ie={letterSpacing:"0",fontWeight:"400"};function re(t,e,n){var o=tt.exec(e);return o?Math.max(0,o[2]-(n||0))+(o[3]||"px"):e}function se(t,e,n,o,i,r){var s="width"===e?1:0,a=0,l=0;if(n===(o?"border":"content"))return 0;for(;s<4;s+=2)"margin"===n&&(l+=A.css(t,n+et[s],!0,i)),o?("content"===n&&(l-=A.css(t,"padding"+et[s],!0,i)),"margin"!==n&&(l-=A.css(t,"border"+et[s]+"Width",!0,i))):(l+=A.css(t,"padding"+et[s],!0,i),"padding"!==n?l+=A.css(t,"border"+et[s]+"Width",!0,i):a+=A.css(t,"border"+et[s]+"Width",!0,i));return!o&&0<=r&&(l+=Math.max(0,Math.ceil(t["offset"+e[0].toUpperCase()+e.slice(1)]-r-l-a-.5))||0),l}function ae(t,e,n){var o=$t(t),i=(!C.boxSizingReliable()||n)&&"border-box"===A.css(t,"boxSizing",!1,o),r=i,s=Wt(t,e,o),a="offset"+e[0].toUpperCase()+e.slice(1);if(Ut.test(s)){if(!n)return s;s="auto"}return(!C.boxSizingReliable()&&i||!C.reliableTrDimensions()&&D(t,"tr")||"auto"===s||!parseFloat(s)&&"inline"===A.css(t,"display",!1,o))&&t.getClientRects().length&&(i="border-box"===A.css(t,"boxSizing",!1,o),(r=a in t)&&(s=t[a])),(s=parseFloat(s)||0)+se(t,e,n||(i?"border":"content"),r,o,s)+"px"}function le(t,e,n,o,i){return new le.prototype.init(t,e,n,o,i)}A.extend({cssHooks:{opacity:{get:function(t,e){if(e){t=Wt(t,"opacity");return""===t?"1":t}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(t,e,n,o){if(t&&3!==t.nodeType&&8!==t.nodeType&&t.style){var i,r,s,a=$(e),l=ne.test(e),c=t.style;if(l||(e=te(a)),s=A.cssHooks[e]||A.cssHooks[a],void 0===n)return s&&"get"in s&&void 0!==(i=s.get(t,!1,o))?i:c[e];"string"==(r=typeof n)&&(i=tt.exec(n))&&i[1]&&(n=st(t,e,i),r="number"),null!=n&&n==n&&("number"!==r||l||(n+=i&&i[3]||(A.cssNumber[a]?"":"px")),C.clearCloneStyle||""!==n||0!==e.indexOf("background")||(c[e]="inherit"),s&&"set"in s&&void 0===(n=s.set(t,n,o))||(l?c.setProperty(e,n):c[e]=n))}},css:function(t,e,n,o){var i,r=$(e);return ne.test(e)||(e=te(r)),(r=A.cssHooks[e]||A.cssHooks[r])&&"get"in r&&(i=r.get(t,!0,n)),void 0===i&&(i=Wt(t,e,o)),"normal"===i&&e in ie&&(i=ie[e]),""===n||n?(e=parseFloat(i),!0===n||isFinite(e)?e||0:i):i}}),A.each(["height","width"],function(t,a){A.cssHooks[a]={get:function(t,e,n){if(e)return!ee.test(A.css(t,"display"))||t.getClientRects().length&&t.getBoundingClientRect().width?ae(t,a,n):Bt(t,oe,function(){return ae(t,a,n)})},set:function(t,e,n){var o,i=$t(t),r=!C.scrollboxSize()&&"absolute"===i.position,s=(r||n)&&"border-box"===A.css(t,"boxSizing",!1,i),n=n?se(t,a,n,s,i):0;return s&&r&&(n-=Math.ceil(t["offset"+a[0].toUpperCase()+a.slice(1)]-parseFloat(i[a])-se(t,a,"border",!1,i)-.5)),n&&(o=tt.exec(e))&&"px"!==(o[3]||"px")&&(t.style[a]=e,e=A.css(t,a)),re(0,e,n)}}}),A.cssHooks.marginLeft=Xt(C.reliableMarginLeft,function(t,e){if(e)return(parseFloat(Wt(t,"marginLeft"))||t.getBoundingClientRect().left-Bt(t,{marginLeft:0},function(){return t.getBoundingClientRect().left}))+"px"}),A.each({margin:"",padding:"",border:"Width"},function(i,r){A.cssHooks[i+r]={expand:function(t){for(var e=0,n={},o="string"==typeof t?t.split(" "):[t];e<4;e++)n[i+et[e]+r]=o[e]||o[e-2]||o[0];return n}},"margin"!==i&&(A.cssHooks[i+r].set=re)}),A.fn.extend({css:function(t,e){return _(this,function(t,e,n){var o,i,r={},s=0;if(Array.isArray(e)){for(o=$t(t),i=e.length;s<i;s++)r[e[s]]=A.css(t,e[s],!1,o);return r}return void 0!==n?A.style(t,e,n):A.css(t,e)},t,e,1<arguments.length)}}),(A.Tween=le).prototype={constructor:le,init:function(t,e,n,o,i,r){this.elem=t,this.prop=n,this.easing=i||A.easing._default,this.options=e,this.start=this.now=this.cur(),this.end=o,this.unit=r||(A.cssNumber[n]?"":"px")},cur:function(){var t=le.propHooks[this.prop];return(t&&t.get?t:le.propHooks._default).get(this)},run:function(t){var e,n=le.propHooks[this.prop];return this.options.duration?this.pos=e=A.easing[this.easing](t,this.options.duration*t,0,1,this.options.duration):this.pos=e=t,this.now=(this.end-this.start)*e+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),(n&&n.set?n:le.propHooks._default).set(this),this}},le.prototype.init.prototype=le.prototype,le.propHooks={_default:{get:function(t){return 1!==t.elem.nodeType||null!=t.elem[t.prop]&&null==t.elem.style[t.prop]?t.elem[t.prop]:(t=A.css(t.elem,t.prop,""))&&"auto"!==t?t:0},set:function(t){A.fx.step[t.prop]?A.fx.step[t.prop](t):1!==t.elem.nodeType||!A.cssHooks[t.prop]&&null==t.elem.style[te(t.prop)]?t.elem[t.prop]=t.now:A.style(t.elem,t.prop,t.now+t.unit)}}},le.propHooks.scrollTop=le.propHooks.scrollLeft={set:function(t){t.elem.nodeType&&t.elem.parentNode&&(t.elem[t.prop]=t.now)}},A.easing={linear:function(t){return t},swing:function(t){return.5-Math.cos(t*Math.PI)/2},_default:"swing"},A.fx=le.prototype.init,A.fx.step={};var ce,he,ue=/^(?:toggle|show|hide)$/,pe=/queueHooks$/;function de(){he&&(!1===E.hidden&&w.requestAnimationFrame?w.requestAnimationFrame(de):w.setTimeout(de,A.fx.interval),A.fx.tick())}function ge(){return w.setTimeout(function(){ce=void 0}),ce=Date.now()}function fe(t,e){var n,o=0,i={height:t};for(e=e?1:0;o<4;o+=2-e)i["margin"+(n=et[o])]=i["padding"+n]=t;return e&&(i.opacity=i.width=t),i}function ye(t,e,n){for(var o,i=(me.tweeners[e]||[]).concat(me.tweeners["*"]),r=0,s=i.length;r<s;r++)if(o=i[r].call(n,e,t))return o}function me(i,t,e){var n,r,o=0,s=me.prefilters.length,a=A.Deferred().always(function(){delete l.elem}),l=function(){if(r)return!1;for(var t=ce||ge(),t=Math.max(0,c.startTime+c.duration-t),e=1-(t/c.duration||0),n=0,o=c.tweens.length;n<o;n++)c.tweens[n].run(e);return a.notifyWith(i,[c,e,t]),e<1&&o?t:(o||a.notifyWith(i,[c,1,0]),a.resolveWith(i,[c]),!1)},c=a.promise({elem:i,props:A.extend({},t),opts:A.extend(!0,{specialEasing:{},easing:A.easing._default},e),originalProperties:t,originalOptions:e,startTime:ce||ge(),duration:e.duration,tweens:[],createTween:function(t,e){t=A.Tween(i,c.opts,t,e,c.opts.specialEasing[t]||c.opts.easing);return c.tweens.push(t),t},stop:function(t){var e=0,n=t?c.tweens.length:0;if(r)return this;for(r=!0;e<n;e++)c.tweens[e].run(1);return t?(a.notifyWith(i,[c,1,0]),a.resolveWith(i,[c,t])):a.rejectWith(i,[c,t]),this}}),h=c.props;for(function(t,e){var n,o,i,r,s;for(n in t)if(i=e[o=$(n)],r=t[n],Array.isArray(r)&&(i=r[1],r=t[n]=r[0]),n!==o&&(t[o]=r,delete t[n]),(s=A.cssHooks[o])&&"expand"in s)for(n in r=s.expand(r),delete t[o],r)n in t||(t[n]=r[n],e[n]=i);else e[o]=i}(h,c.opts.specialEasing);o<s;o++)if(n=me.prefilters[o].call(c,i,h,c.opts))return v(n.stop)&&(A._queueHooks(c.elem,c.opts.queue).stop=n.stop.bind(n)),n;return A.map(h,ye,c),v(c.opts.start)&&c.opts.start.call(i,c),c.progress(c.opts.progress).done(c.opts.done,c.opts.complete).fail(c.opts.fail).always(c.opts.always),A.fx.timer(A.extend(l,{elem:i,anim:c,queue:c.opts.queue})),c}A.Animation=A.extend(me,{tweeners:{"*":[function(t,e){var n=this.createTween(t,e);return st(n.elem,t,tt.exec(e),n),n}]},tweener:function(t,e){for(var n,o=0,i=(t=v(t)?(e=t,["*"]):t.match(O)).length;o<i;o++)n=t[o],me.tweeners[n]=me.tweeners[n]||[],me.tweeners[n].unshift(e)},prefilters:[function(t,e,n){var o,i,r,s,a,l,c,h="width"in e||"height"in e,u=this,p={},d=t.style,g=t.nodeType&&rt(t),f=X.get(t,"fxshow");for(o in n.queue||(null==(s=A._queueHooks(t,"fx")).unqueued&&(s.unqueued=0,a=s.empty.fire,s.empty.fire=function(){s.unqueued||a()}),s.unqueued++,u.always(function(){u.always(function(){s.unqueued--,A.queue(t,"fx").length||s.empty.fire()})})),e)if(i=e[o],ue.test(i)){if(delete e[o],r=r||"toggle"===i,i===(g?"hide":"show")){if("show"!==i||!f||void 0===f[o])continue;g=!0}p[o]=f&&f[o]||A.style(t,o)}if((l=!A.isEmptyObject(e))||!A.isEmptyObject(p))for(o in h&&1===t.nodeType&&(n.overflow=[d.overflow,d.overflowX,d.overflowY],null==(c=f&&f.display)&&(c=X.get(t,"display")),"none"===(h=A.css(t,"display"))&&(c?h=c:(lt([t],!0),c=t.style.display||c,h=A.css(t,"display"),lt([t]))),("inline"===h||"inline-block"===h&&null!=c)&&"none"===A.css(t,"float")&&(l||(u.done(function(){d.display=c}),null==c&&(h=d.display,c="none"===h?"":h)),d.display="inline-block")),n.overflow&&(d.overflow="hidden",u.always(function(){d.overflow=n.overflow[0],d.overflowX=n.overflow[1],d.overflowY=n.overflow[2]})),l=!1,p)l||(f?"hidden"in f&&(g=f.hidden):f=X.access(t,"fxshow",{display:c}),r&&(f.hidden=!g),g&&lt([t],!0),u.done(function(){for(o in g||lt([t]),X.remove(t,"fxshow"),p)A.style(t,o,p[o])})),l=ye(g?f[o]:0,o,u),o in f||(f[o]=l.start,g&&(l.end=l.start,l.start=0))}],prefilter:function(t,e){e?me.prefilters.unshift(t):me.prefilters.push(t)}}),A.speed=function(t,e,n){var o=t&&"object"==typeof t?A.extend({},t):{complete:n||!n&&e||v(t)&&t,duration:t,easing:n&&e||e&&!v(e)&&e};return A.fx.off?o.duration=0:"number"!=typeof o.duration&&(o.duration in A.fx.speeds?o.duration=A.fx.speeds[o.duration]:o.duration=A.fx.speeds._default),null!=o.queue&&!0!==o.queue||(o.queue="fx"),o.old=o.complete,o.complete=function(){v(o.old)&&o.old.call(this),o.queue&&A.dequeue(this,o.queue)},o},A.fn.extend({fadeTo:function(t,e,n,o){return this.filter(rt).css("opacity",0).show().end().animate({opacity:e},t,n,o)},animate:function(e,t,n,o){var i=A.isEmptyObject(e),r=A.speed(t,n,o),o=function(){var t=me(this,A.extend({},e),r);(i||X.get(this,"finish"))&&t.stop(!0)};return o.finish=o,i||!1===r.queue?this.each(o):this.queue(r.queue,o)},stop:function(i,t,r){function s(t){var e=t.stop;delete t.stop,e(r)}return"string"!=typeof i&&(r=t,t=i,i=void 0),t&&this.queue(i||"fx",[]),this.each(function(){var t=!0,e=null!=i&&i+"queueHooks",n=A.timers,o=X.get(this);if(e)o[e]&&o[e].stop&&s(o[e]);else for(e in o)o[e]&&o[e].stop&&pe.test(e)&&s(o[e]);for(e=n.length;e--;)n[e].elem!==this||null!=i&&n[e].queue!==i||(n[e].anim.stop(r),t=!1,n.splice(e,1));!t&&r||A.dequeue(this,i)})},finish:function(s){return!1!==s&&(s=s||"fx"),this.each(function(){var t,e=X.get(this),n=e[s+"queue"],o=e[s+"queueHooks"],i=A.timers,r=n?n.length:0;for(e.finish=!0,A.queue(this,s,[]),o&&o.stop&&o.stop.call(this,!0),t=i.length;t--;)i[t].elem===this&&i[t].queue===s&&(i[t].anim.stop(!0),i.splice(t,1));for(t=0;t<r;t++)n[t]&&n[t].finish&&n[t].finish.call(this);delete e.finish})}}),A.each(["toggle","show","hide"],function(t,o){var i=A.fn[o];A.fn[o]=function(t,e,n){return null==t||"boolean"==typeof t?i.apply(this,arguments):this.animate(fe(o,!0),t,e,n)}}),A.each({slideDown:fe("show"),slideUp:fe("hide"),slideToggle:fe("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(t,o){A.fn[t]=function(t,e,n){return this.animate(o,t,e,n)}}),A.timers=[],A.fx.tick=function(){var t,e=0,n=A.timers;for(ce=Date.now();e<n.length;e++)(t=n[e])()||n[e]!==t||n.splice(e--,1);n.length||A.fx.stop(),ce=void 0},A.fx.timer=function(t){A.timers.push(t),A.fx.start()},A.fx.interval=13,A.fx.start=function(){he||(he=!0,de())},A.fx.stop=function(){he=null},A.fx.speeds={slow:600,fast:200,_default:400},A.fn.delay=function(o,t){return o=A.fx&&A.fx.speeds[o]||o,t=t||"fx",this.queue(t,function(t,e){var n=w.setTimeout(t,o);e.stop=function(){w.clearTimeout(n)}})},pt=E.createElement("input"),Q=E.createElement("select").appendChild(E.createElement("option")),pt.type="checkbox",C.checkOn=""!==pt.value,C.optSelected=Q.selected,(pt=E.createElement("input")).value="t",pt.type="radio",C.radioValue="t"===pt.value;var Ce,ve=A.expr.attrHandle;A.fn.extend({attr:function(t,e){return _(this,A.attr,t,e,1<arguments.length)},removeAttr:function(t){return this.each(function(){A.removeAttr(this,t)})}}),A.extend({attr:function(t,e,n){var o,i,r=t.nodeType;if(3!==r&&8!==r&&2!==r)return void 0===t.getAttribute?A.prop(t,e,n):(1===r&&A.isXMLDoc(t)||(i=A.attrHooks[e.toLowerCase()]||(A.expr.match.bool.test(e)?Ce:void 0)),void 0!==n?null===n?void A.removeAttr(t,e):i&&"set"in i&&void 0!==(o=i.set(t,n,e))?o:(t.setAttribute(e,n+""),n):!(i&&"get"in i&&null!==(o=i.get(t,e)))&&null==(o=A.find.attr(t,e))?void 0:o)},attrHooks:{type:{set:function(t,e){if(!C.radioValue&&"radio"===e&&D(t,"input")){var n=t.value;return t.setAttribute("type",e),n&&(t.value=n),e}}}},removeAttr:function(t,e){var n,o=0,i=e&&e.match(O);if(i&&1===t.nodeType)for(;n=i[o++];)t.removeAttribute(n)}}),Ce={set:function(t,e,n){return!1===e?A.removeAttr(t,n):t.setAttribute(n,n),n}},A.each(A.expr.match.bool.source.match(/\w+/g),function(t,e){var s=ve[e]||A.find.attr;ve[e]=function(t,e,n){var o,i,r=e.toLowerCase();return n||(i=ve[r],ve[r]=o,o=null!=s(t,e,n)?r:null,ve[r]=i),o}});var be=/^(?:input|select|textarea|button)$/i,xe=/^(?:a|area)$/i;function we(t){return(t.match(O)||[]).join(" ")}function Ee(t){return t.getAttribute&&t.getAttribute("class")||""}function Ae(t){return Array.isArray(t)?t:"string"==typeof t&&t.match(O)||[]}A.fn.extend({prop:function(t,e){return _(this,A.prop,t,e,1<arguments.length)},removeProp:function(t){return this.each(function(){delete this[A.propFix[t]||t]})}}),A.extend({prop:function(t,e,n){var o,i,r=t.nodeType;if(3!==r&&8!==r&&2!==r)return 1===r&&A.isXMLDoc(t)||(e=A.propFix[e]||e,i=A.propHooks[e]),void 0!==n?i&&"set"in i&&void 0!==(o=i.set(t,n,e))?o:t[e]=n:i&&"get"in i&&null!==(o=i.get(t,e))?o:t[e]},propHooks:{tabIndex:{get:function(t){var e=A.find.attr(t,"tabindex");return e?parseInt(e,10):be.test(t.nodeName)||xe.test(t.nodeName)&&t.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),C.optSelected||(A.propHooks.selected={get:function(t){t=t.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null},set:function(t){t=t.parentNode;t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex)}}),A.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){A.propFix[this.toLowerCase()]=this}),A.fn.extend({addClass:function(e){var t,n,o,i,r,s,a=0;if(v(e))return this.each(function(t){A(this).addClass(e.call(this,t,Ee(this)))});if((t=Ae(e)).length)for(;n=this[a++];)if(s=Ee(n),o=1===n.nodeType&&" "+we(s)+" "){for(r=0;i=t[r++];)o.indexOf(" "+i+" ")<0&&(o+=i+" ");s!==(s=we(o))&&n.setAttribute("class",s)}return this},removeClass:function(e){var t,n,o,i,r,s,a=0;if(v(e))return this.each(function(t){A(this).removeClass(e.call(this,t,Ee(this)))});if(!arguments.length)return this.attr("class","");if((t=Ae(e)).length)for(;n=this[a++];)if(s=Ee(n),o=1===n.nodeType&&" "+we(s)+" "){for(r=0;i=t[r++];)for(;-1<o.indexOf(" "+i+" ");)o=o.replace(" "+i+" "," ");s!==(s=we(o))&&n.setAttribute("class",s)}return this},toggleClass:function(i,e){var r=typeof i,s="string"==r||Array.isArray(i);return"boolean"==typeof e&&s?e?this.addClass(i):this.removeClass(i):v(i)?this.each(function(t){A(this).toggleClass(i.call(this,t,Ee(this),e),e)}):this.each(function(){var t,e,n,o;if(s)for(e=0,n=A(this),o=Ae(i);t=o[e++];)n.hasClass(t)?n.removeClass(t):n.addClass(t);else void 0!==i&&"boolean"!=r||((t=Ee(this))&&X.set(this,"__className__",t),this.setAttribute&&this.setAttribute("class",!t&&!1!==i&&X.get(this,"__className__")||""))})},hasClass:function(t){for(var e,n=0,o=" "+t+" ";e=this[n++];)if(1===e.nodeType&&-1<(" "+we(Ee(e))+" ").indexOf(o))return!0;return!1}});var Pe=/\r/g;A.fn.extend({val:function(e){var n,t,o,i=this[0];return arguments.length?(o=v(e),this.each(function(t){1===this.nodeType&&(null==(t=o?e.call(this,t,A(this).val()):e)?t="":"number"==typeof t?t+="":Array.isArray(t)&&(t=A.map(t,function(t){return null==t?"":t+""})),(n=A.valHooks[this.type]||A.valHooks[this.nodeName.toLowerCase()])&&"set"in n&&void 0!==n.set(this,t,"value")||(this.value=t))})):i?(n=A.valHooks[i.type]||A.valHooks[i.nodeName.toLowerCase()])&&"get"in n&&void 0!==(t=n.get(i,"value"))?t:"string"==typeof(t=i.value)?t.replace(Pe,""):null==t?"":t:void 0}}),A.extend({valHooks:{option:{get:function(t){var e=A.find.attr(t,"value");return null!=e?e:we(A.text(t))}},select:{get:function(t){for(var e,n=t.options,o=t.selectedIndex,i="select-one"===t.type,r=i?null:[],s=i?o+1:n.length,a=o<0?s:i?o:0;a<s;a++)if(((e=n[a]).selected||a===o)&&!e.disabled&&(!e.parentNode.disabled||!D(e.parentNode,"optgroup"))){if(e=A(e).val(),i)return e;r.push(e)}return r},set:function(t,e){for(var n,o,i=t.options,r=A.makeArray(e),s=i.length;s--;)((o=i[s]).selected=-1<A.inArray(A.valHooks.option.get(o),r))&&(n=!0);return n||(t.selectedIndex=-1),r}}}}),A.each(["radio","checkbox"],function(){A.valHooks[this]={set:function(t,e){if(Array.isArray(e))return t.checked=-1<A.inArray(A(t).val(),e)}},C.checkOn||(A.valHooks[this].get=function(t){return null===t.getAttribute("value")?"on":t.value})}),C.focusin="onfocusin"in w;function De(t){t.stopPropagation()}var Me=/^(?:focusinfocus|focusoutblur)$/;A.extend(A.event,{trigger:function(t,e,n,o){var i,r,s,a,l,c,h,u=[n||E],p=m.call(t,"type")?t.type:t,d=m.call(t,"namespace")?t.namespace.split("."):[],g=h=r=n=n||E;if(3!==n.nodeType&&8!==n.nodeType&&!Me.test(p+A.event.triggered)&&(-1<p.indexOf(".")&&(p=(d=p.split(".")).shift(),d.sort()),a=p.indexOf(":")<0&&"on"+p,(t=t[A.expando]?t:new A.Event(p,"object"==typeof t&&t)).isTrigger=o?2:3,t.namespace=d.join("."),t.rnamespace=t.namespace?new RegExp("(^|\\.)"+d.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=void 0,t.target||(t.target=n),e=null==e?[t]:A.makeArray(e,[t]),c=A.event.special[p]||{},o||!c.trigger||!1!==c.trigger.apply(n,e))){if(!o&&!c.noBubble&&!f(n)){for(s=c.delegateType||p,Me.test(s+p)||(g=g.parentNode);g;g=g.parentNode)u.push(g),r=g;r===(n.ownerDocument||E)&&u.push(r.defaultView||r.parentWindow||w)}for(i=0;(g=u[i++])&&!t.isPropagationStopped();)h=g,t.type=1<i?s:c.bindType||p,(l=(X.get(g,"events")||Object.create(null))[t.type]&&X.get(g,"handle"))&&l.apply(g,e),(l=a&&g[a])&&l.apply&&q(g)&&(t.result=l.apply(g,e),!1===t.result&&t.preventDefault());return t.type=p,o||t.isDefaultPrevented()||c._default&&!1!==c._default.apply(u.pop(),e)||!q(n)||a&&v(n[p])&&!f(n)&&((r=n[a])&&(n[a]=null),A.event.triggered=p,t.isPropagationStopped()&&h.addEventListener(p,De),n[p](),t.isPropagationStopped()&&h.removeEventListener(p,De),A.event.triggered=void 0,r&&(n[a]=r)),t.result}},simulate:function(t,e,n){t=A.extend(new A.Event,n,{type:t,isSimulated:!0});A.event.trigger(t,null,e)}}),A.fn.extend({trigger:function(t,e){return this.each(function(){A.event.trigger(t,e,this)})},triggerHandler:function(t,e){var n=this[0];if(n)return A.event.trigger(t,e,n,!0)}}),C.focusin||A.each({focus:"focusin",blur:"focusout"},function(n,o){function i(t){A.event.simulate(o,t.target,A.event.fix(t))}A.event.special[o]={setup:function(){var t=this.ownerDocument||this.document||this,e=X.access(t,o);e||t.addEventListener(n,i,!0),X.access(t,o,(e||0)+1)},teardown:function(){var t=this.ownerDocument||this.document||this,e=X.access(t,o)-1;e?X.access(t,o,e):(t.removeEventListener(n,i,!0),X.remove(t,o))}}});var Se=w.location,ke={guid:Date.now()},Fe=/\?/;A.parseXML=function(t){var e;if(!t||"string"!=typeof t)return null;try{e=(new w.DOMParser).parseFromString(t,"text/xml")}catch(t){e=void 0}return e&&!e.getElementsByTagName("parsererror").length||A.error("Invalid XML: "+t),e};var Te=/\[\]$/,Le=/\r?\n/g,Ne=/^(?:submit|button|image|reset|file)$/i,Oe=/^(?:input|select|textarea|keygen)/i;A.param=function(t,e){function n(t,e){e=v(e)?e():e,i[i.length]=encodeURIComponent(t)+"="+encodeURIComponent(null==e?"":e)}var o,i=[];if(null==t)return"";if(Array.isArray(t)||t.jquery&&!A.isPlainObject(t))A.each(t,function(){n(this.name,this.value)});else for(o in t)!function n(o,t,i,r){if(Array.isArray(t))A.each(t,function(t,e){i||Te.test(o)?r(o,e):n(o+"["+("object"==typeof e&&null!=e?t:"")+"]",e,i,r)});else if(i||"object"!==g(t))r(o,t);else for(var e in t)n(o+"["+e+"]",t[e],i,r)}(o,t[o],e,n);return i.join("&")},A.fn.extend({serialize:function(){return A.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var t=A.prop(this,"elements");return t?A.makeArray(t):this}).filter(function(){var t=this.type;return this.name&&!A(this).is(":disabled")&&Oe.test(this.nodeName)&&!Ne.test(t)&&(this.checked||!ct.test(t))}).map(function(t,e){var n=A(this).val();return null==n?null:Array.isArray(n)?A.map(n,function(t){return{name:e.name,value:t.replace(Le,"\r\n")}}):{name:e.name,value:n.replace(Le,"\r\n")}}).get()}});var Be=/%20/g,ze=/#.*$/,Ve=/([?&])_=[^&]*/,je=/^(.*?):[ \t]*([^\r\n]*)$/gm,Ie=/^(?:GET|HEAD)$/,Re=/^\/\//,_e={},Ge={},He="*/".concat("*"),Ue=E.createElement("a");function $e(r){return function(t,e){"string"!=typeof t&&(e=t,t="*");var n,o=0,i=t.toLowerCase().match(O)||[];if(v(e))for(;n=i[o++];)"+"===n[0]?(n=n.slice(1)||"*",(r[n]=r[n]||[]).unshift(e)):(r[n]=r[n]||[]).push(e)}}function qe(e,o,i,r){var s={},a=e===Ge;function l(t){var n;return s[t]=!0,A.each(e[t]||[],function(t,e){e=e(o,i,r);return"string"!=typeof e||a||s[e]?a?!(n=e):void 0:(o.dataTypes.unshift(e),l(e),!1)}),n}return l(o.dataTypes[0])||!s["*"]&&l("*")}function We(t,e){var n,o,i=A.ajaxSettings.flatOptions||{};for(n in e)void 0!==e[n]&&((i[n]?t:o=o||{})[n]=e[n]);return o&&A.extend(!0,t,o),t}Ue.href=Se.href,A.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Se.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(Se.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":He,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":A.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(t,e){return e?We(We(t,A.ajaxSettings),e):We(A.ajaxSettings,t)},ajaxPrefilter:$e(_e),ajaxTransport:$e(Ge),ajax:function(t,e){"object"==typeof t&&(e=t,t=void 0),e=e||{};var l,c,h,n,u,o,p,d,i,g=A.ajaxSetup({},e),f=g.context||g,y=g.context&&(f.nodeType||f.jquery)?A(f):A.event,m=A.Deferred(),C=A.Callbacks("once memory"),v=g.statusCode||{},r={},s={},a="canceled",b={readyState:0,getResponseHeader:function(t){var e;if(p){if(!n)for(n={};e=je.exec(h);)n[e[1].toLowerCase()+" "]=(n[e[1].toLowerCase()+" "]||[]).concat(e[2]);e=n[t.toLowerCase()+" "]}return null==e?null:e.join(", ")},getAllResponseHeaders:function(){return p?h:null},setRequestHeader:function(t,e){return null==p&&(t=s[t.toLowerCase()]=s[t.toLowerCase()]||t,r[t]=e),this},overrideMimeType:function(t){return null==p&&(g.mimeType=t),this},statusCode:function(t){if(t)if(p)b.always(t[b.status]);else for(var e in t)v[e]=[v[e],t[e]];return this},abort:function(t){t=t||a;return l&&l.abort(t),x(0,t),this}};if(m.promise(b),g.url=((t||g.url||Se.href)+"").replace(Re,Se.protocol+"//"),g.type=e.method||e.type||g.method||g.type,g.dataTypes=(g.dataType||"*").toLowerCase().match(O)||[""],null==g.crossDomain){o=E.createElement("a");try{o.href=g.url,o.href=o.href,g.crossDomain=Ue.protocol+"//"+Ue.host!=o.protocol+"//"+o.host}catch(t){g.crossDomain=!0}}if(g.data&&g.processData&&"string"!=typeof g.data&&(g.data=A.param(g.data,g.traditional)),qe(_e,g,e,b),p)return b;for(i in(d=A.event&&g.global)&&0==A.active++&&A.event.trigger("ajaxStart"),g.type=g.type.toUpperCase(),g.hasContent=!Ie.test(g.type),c=g.url.replace(ze,""),g.hasContent?g.data&&g.processData&&0===(g.contentType||"").indexOf("application/x-www-form-urlencoded")&&(g.data=g.data.replace(Be,"+")):(t=g.url.slice(c.length),g.data&&(g.processData||"string"==typeof g.data)&&(c+=(Fe.test(c)?"&":"?")+g.data,delete g.data),!1===g.cache&&(c=c.replace(Ve,"$1"),t=(Fe.test(c)?"&":"?")+"_="+ke.guid+++t),g.url=c+t),g.ifModified&&(A.lastModified[c]&&b.setRequestHeader("If-Modified-Since",A.lastModified[c]),A.etag[c]&&b.setRequestHeader("If-None-Match",A.etag[c])),(g.data&&g.hasContent&&!1!==g.contentType||e.contentType)&&b.setRequestHeader("Content-Type",g.contentType),b.setRequestHeader("Accept",g.dataTypes[0]&&g.accepts[g.dataTypes[0]]?g.accepts[g.dataTypes[0]]+("*"!==g.dataTypes[0]?", "+He+"; q=0.01":""):g.accepts["*"]),g.headers)b.setRequestHeader(i,g.headers[i]);if(g.beforeSend&&(!1===g.beforeSend.call(f,b,g)||p))return b.abort();if(a="abort",C.add(g.complete),b.done(g.success),b.fail(g.error),l=qe(Ge,g,e,b)){if(b.readyState=1,d&&y.trigger("ajaxSend",[b,g]),p)return b;g.async&&0<g.timeout&&(u=w.setTimeout(function(){b.abort("timeout")},g.timeout));try{p=!1,l.send(r,x)}catch(t){if(p)throw t;x(-1,t)}}else x(-1,"No Transport");function x(t,e,n,o){var i,r,s,a=e;p||(p=!0,u&&w.clearTimeout(u),l=void 0,h=o||"",b.readyState=0<t?4:0,o=200<=t&&t<300||304===t,n&&(s=function(t,e,n){for(var o,i,r,s,a=t.contents,l=t.dataTypes;"*"===l[0];)l.shift(),void 0===o&&(o=t.mimeType||e.getResponseHeader("Content-Type"));if(o)for(i in a)if(a[i]&&a[i].test(o)){l.unshift(i);break}if(l[0]in n)r=l[0];else{for(i in n){if(!l[0]||t.converters[i+" "+l[0]]){r=i;break}s=s||i}r=r||s}if(r)return r!==l[0]&&l.unshift(r),n[r]}(g,b,n)),!o&&-1<A.inArray("script",g.dataTypes)&&(g.converters["text script"]=function(){}),s=function(t,e,n,o){var i,r,s,a,l,c={},h=t.dataTypes.slice();if(h[1])for(s in t.converters)c[s.toLowerCase()]=t.converters[s];for(r=h.shift();r;)if(t.responseFields[r]&&(n[t.responseFields[r]]=e),!l&&o&&t.dataFilter&&(e=t.dataFilter(e,t.dataType)),l=r,r=h.shift())if("*"===r)r=l;else if("*"!==l&&l!==r){if(!(s=c[l+" "+r]||c["* "+r]))for(i in c)if((a=i.split(" "))[1]===r&&(s=c[l+" "+a[0]]||c["* "+a[0]])){!0===s?s=c[i]:!0!==c[i]&&(r=a[0],h.unshift(a[1]));break}if(!0!==s)if(s&&t.throws)e=s(e);else try{e=s(e)}catch(t){return{state:"parsererror",error:s?t:"No conversion from "+l+" to "+r}}}return{state:"success",data:e}}(g,s,b,o),o?(g.ifModified&&((n=b.getResponseHeader("Last-Modified"))&&(A.lastModified[c]=n),(n=b.getResponseHeader("etag"))&&(A.etag[c]=n)),204===t||"HEAD"===g.type?a="nocontent":304===t?a="notmodified":(a=s.state,i=s.data,o=!(r=s.error))):(r=a,!t&&a||(a="error",t<0&&(t=0))),b.status=t,b.statusText=(e||a)+"",o?m.resolveWith(f,[i,a,b]):m.rejectWith(f,[b,a,r]),b.statusCode(v),v=void 0,d&&y.trigger(o?"ajaxSuccess":"ajaxError",[b,g,o?i:r]),C.fireWith(f,[b,a]),d&&(y.trigger("ajaxComplete",[b,g]),--A.active||A.event.trigger("ajaxStop")))}return b},getJSON:function(t,e,n){return A.get(t,e,n,"json")},getScript:function(t,e){return A.get(t,void 0,e,"script")}}),A.each(["get","post"],function(t,i){A[i]=function(t,e,n,o){return v(e)&&(o=o||n,n=e,e=void 0),A.ajax(A.extend({url:t,type:i,dataType:o,data:e,success:n},A.isPlainObject(t)&&t))}}),A.ajaxPrefilter(function(t){for(var e in t.headers)"content-type"===e.toLowerCase()&&(t.contentType=t.headers[e]||"")}),A._evalUrl=function(t,e,n){return A.ajax({url:t,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(t){A.globalEval(t,e,n)}})},A.fn.extend({wrapAll:function(t){return this[0]&&(v(t)&&(t=t.call(this[0])),t=A(t,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var t=this;t.firstElementChild;)t=t.firstElementChild;return t}).append(this)),this},wrapInner:function(n){return v(n)?this.each(function(t){A(this).wrapInner(n.call(this,t))}):this.each(function(){var t=A(this),e=t.contents();e.length?e.wrapAll(n):t.append(n)})},wrap:function(e){var n=v(e);return this.each(function(t){A(this).wrapAll(n?e.call(this,t):e)})},unwrap:function(t){return this.parent(t).not("body").each(function(){A(this).replaceWith(this.childNodes)}),this}}),A.expr.pseudos.hidden=function(t){return!A.expr.pseudos.visible(t)},A.expr.pseudos.visible=function(t){return!!(t.offsetWidth||t.offsetHeight||t.getClientRects().length)},A.ajaxSettings.xhr=function(){try{return new w.XMLHttpRequest}catch(t){}};var Xe={0:200,1223:204},Ye=A.ajaxSettings.xhr();C.cors=!!Ye&&"withCredentials"in Ye,C.ajax=Ye=!!Ye,A.ajaxTransport(function(i){var r,s;if(C.cors||Ye&&!i.crossDomain)return{send:function(t,e){var n,o=i.xhr();if(o.open(i.type,i.url,i.async,i.username,i.password),i.xhrFields)for(n in i.xhrFields)o[n]=i.xhrFields[n];for(n in i.mimeType&&o.overrideMimeType&&o.overrideMimeType(i.mimeType),i.crossDomain||t["X-Requested-With"]||(t["X-Requested-With"]="XMLHttpRequest"),t)o.setRequestHeader(n,t[n]);r=function(t){return function(){r&&(r=s=o.onload=o.onerror=o.onabort=o.ontimeout=o.onreadystatechange=null,"abort"===t?o.abort():"error"===t?"number"!=typeof o.status?e(0,"error"):e(o.status,o.statusText):e(Xe[o.status]||o.status,o.statusText,"text"!==(o.responseType||"text")||"string"!=typeof o.responseText?{binary:o.response}:{text:o.responseText},o.getAllResponseHeaders()))}},o.onload=r(),s=o.onerror=o.ontimeout=r("error"),void 0!==o.onabort?o.onabort=s:o.onreadystatechange=function(){4===o.readyState&&w.setTimeout(function(){r&&s()})},r=r("abort");try{o.send(i.hasContent&&i.data||null)}catch(t){if(r)throw t}},abort:function(){r&&r()}}}),A.ajaxPrefilter(function(t){t.crossDomain&&(t.contents.script=!1)}),A.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(t){return A.globalEval(t),t}}}),A.ajaxPrefilter("script",function(t){void 0===t.cache&&(t.cache=!1),t.crossDomain&&(t.type="GET")}),A.ajaxTransport("script",function(n){var o,i;if(n.crossDomain||n.scriptAttrs)return{send:function(t,e){o=A("<script>").attr(n.scriptAttrs||{}).prop({charset:n.scriptCharset,src:n.url}).on("load error",i=function(t){o.remove(),i=null,t&&e("error"===t.type?404:200,t.type)}),E.head.appendChild(o[0])},abort:function(){i&&i()}}});var Je=[],Ze=/(=)\?(?=&|$)|\?\?/;A.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var t=Je.pop()||A.expando+"_"+ke.guid++;return this[t]=!0,t}}),A.ajaxPrefilter("json jsonp",function(t,e,n){var o,i,r,s=!1!==t.jsonp&&(Ze.test(t.url)?"url":"string"==typeof t.data&&0===(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&Ze.test(t.data)&&"data");if(s||"jsonp"===t.dataTypes[0])return o=t.jsonpCallback=v(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,s?t[s]=t[s].replace(Ze,"$1"+o):!1!==t.jsonp&&(t.url+=(Fe.test(t.url)?"&":"?")+t.jsonp+"="+o),t.converters["script json"]=function(){return r||A.error(o+" was not called"),r[0]},t.dataTypes[0]="json",i=w[o],w[o]=function(){r=arguments},n.always(function(){void 0===i?A(w).removeProp(o):w[o]=i,t[o]&&(t.jsonpCallback=e.jsonpCallback,Je.push(o)),r&&v(i)&&i(r[0]),r=i=void 0}),"script"}),C.createHTMLDocument=((pt=E.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===pt.childNodes.length),A.parseHTML=function(t,e,n){return"string"!=typeof t?[]:("boolean"==typeof e&&(n=e,e=!1),e||(C.createHTMLDocument?((o=(e=E.implementation.createHTMLDocument("")).createElement("base")).href=E.location.href,e.head.appendChild(o)):e=E),o=!n&&[],(n=M.exec(t))?[e.createElement(n[1])]:(n=mt([t],e,o),o&&o.length&&A(o).remove(),A.merge([],n.childNodes)));var o},A.fn.load=function(t,e,n){var o,i,r,s=this,a=t.indexOf(" ");return-1<a&&(o=we(t.slice(a)),t=t.slice(0,a)),v(e)?(n=e,e=void 0):e&&"object"==typeof e&&(i="POST"),0<s.length&&A.ajax({url:t,type:i||"GET",dataType:"html",data:e}).done(function(t){r=arguments,s.html(o?A("<div>").append(A.parseHTML(t)).find(o):t)}).always(n&&function(t,e){s.each(function(){n.apply(this,r||[t.responseText,e,t])})}),this},A.expr.pseudos.animated=function(e){return A.grep(A.timers,function(t){return e===t.elem}).length},A.offset={setOffset:function(t,e,n){var o,i,r,s,a=A.css(t,"position"),l=A(t),c={};"static"===a&&(t.style.position="relative"),r=l.offset(),o=A.css(t,"top"),s=A.css(t,"left"),s=("absolute"===a||"fixed"===a)&&-1<(o+s).indexOf("auto")?(i=(a=l.position()).top,a.left):(i=parseFloat(o)||0,parseFloat(s)||0),v(e)&&(e=e.call(t,n,A.extend({},r))),null!=e.top&&(c.top=e.top-r.top+i),null!=e.left&&(c.left=e.left-r.left+s),"using"in e?e.using.call(t,c):("number"==typeof c.top&&(c.top+="px"),"number"==typeof c.left&&(c.left+="px"),l.css(c))}},A.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each(function(t){A.offset.setOffset(this,e,t)});var t,n=this[0];return n?n.getClientRects().length?(t=n.getBoundingClientRect(),n=n.ownerDocument.defaultView,{top:t.top+n.pageYOffset,left:t.left+n.pageXOffset}):{top:0,left:0}:void 0},position:function(){if(this[0]){var t,e,n,o=this[0],i={top:0,left:0};if("fixed"===A.css(o,"position"))e=o.getBoundingClientRect();else{for(e=this.offset(),n=o.ownerDocument,t=o.offsetParent||n.documentElement;t&&(t===n.body||t===n.documentElement)&&"static"===A.css(t,"position");)t=t.parentNode;t&&t!==o&&1===t.nodeType&&((i=A(t).offset()).top+=A.css(t,"borderTopWidth",!0),i.left+=A.css(t,"borderLeftWidth",!0))}return{top:e.top-i.top-A.css(o,"marginTop",!0),left:e.left-i.left-A.css(o,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var t=this.offsetParent;t&&"static"===A.css(t,"position");)t=t.offsetParent;return t||nt})}}),A.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,i){var r="pageYOffset"===i;A.fn[e]=function(t){return _(this,function(t,e,n){var o;return f(t)?o=t:9===t.nodeType&&(o=t.defaultView),void 0===n?o?o[i]:t[e]:void(o?o.scrollTo(r?o.pageXOffset:n,r?n:o.pageYOffset):t[e]=n)},e,t,arguments.length)}}),A.each(["top","left"],function(t,n){A.cssHooks[n]=Xt(C.pixelPosition,function(t,e){if(e)return e=Wt(t,n),Ut.test(e)?A(t).position()[n]+"px":e})}),A.each({Height:"height",Width:"width"},function(s,a){A.each({padding:"inner"+s,content:a,"":"outer"+s},function(o,r){A.fn[r]=function(t,e){var n=arguments.length&&(o||"boolean"!=typeof t),i=o||(!0===t||!0===e?"margin":"border");return _(this,function(t,e,n){var o;return f(t)?0===r.indexOf("outer")?t["inner"+s]:t.document.documentElement["client"+s]:9===t.nodeType?(o=t.documentElement,Math.max(t.body["scroll"+s],o["scroll"+s],t.body["offset"+s],o["offset"+s],o["client"+s])):void 0===n?A.css(t,e,i):A.style(t,e,n,i)},a,n?t:void 0,n)}})}),A.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(t,e){A.fn[e]=function(t){return this.on(e,t)}}),A.fn.extend({bind:function(t,e,n){return this.on(t,null,e,n)},unbind:function(t,e){return this.off(t,null,e)},delegate:function(t,e,n,o){return this.on(e,t,n,o)},undelegate:function(t,e,n){return 1===arguments.length?this.off(t,"**"):this.off(e,t||"**",n)},hover:function(t,e){return this.mouseenter(t).mouseleave(e||t)}}),A.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(t,n){A.fn[n]=function(t,e){return 0<arguments.length?this.on(n,null,t,e):this.trigger(n)}});var Ke=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;A.proxy=function(t,e){var n,o;if("string"==typeof e&&(o=t[e],e=t,t=o),v(t))return n=a.call(arguments,2),(o=function(){return t.apply(e||this,n.concat(a.call(arguments)))}).guid=t.guid=t.guid||A.guid++,o},A.holdReady=function(t){t?A.readyWait++:A.ready(!0)},A.isArray=Array.isArray,A.parseJSON=JSON.parse,A.nodeName=D,A.isFunction=v,A.isWindow=f,A.camelCase=$,A.type=g,A.now=Date.now,A.isNumeric=function(t){var e=A.type(t);return("number"===e||"string"===e)&&!isNaN(t-parseFloat(t))},A.trim=function(t){return null==t?"":(t+"").replace(Ke,"")};var Qe=w.jQuery,tn=w.$;return A.noConflict=function(t){return w.$===A&&(w.$=tn),t&&w.jQuery===A&&(w.jQuery=Qe),A},void 0===t&&(w.jQuery=w.$=A),A},t.exports=e.document?n(e,!0):function(t){if(!t.document)throw new Error("jQuery requires a window with a document");return n(t)}}),i=(t(function(t,e){t.exports=function(h){var u,p,t=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"],e="onwheel"in document||9<=document.documentMode?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"],d=Array.prototype.slice;if(h.event.fixHooks)for(var n=t.length;n;)h.event.fixHooks[t[--n]]=h.event.mouseHooks;var g=h.event.special.mousewheel={version:"3.1.12",setup:function(){if(this.addEventListener)for(var t=e.length;t;)this.addEventListener(e[--t],o,!1);else this.onmousewheel=o;h.data(this,"mousewheel-line-height",g.getLineHeight(this)),h.data(this,"mousewheel-page-height",g.getPageHeight(this))},teardown:function(){if(this.removeEventListener)for(var t=e.length;t;)this.removeEventListener(e[--t],o,!1);else this.onmousewheel=null;h.removeData(this,"mousewheel-line-height"),h.removeData(this,"mousewheel-page-height")},getLineHeight:function(t){var e=h(t),t=e["offsetParent"in h.fn?"offsetParent":"parent"]();return t.length||(t=h("body")),parseInt(t.css("fontSize"),10)||parseInt(e.css("fontSize"),10)||16},getPageHeight:function(t){return h(t).height()},settings:{adjustOldDeltas:!0,normalizeOffset:!0}};function o(t){var e,n=t||window.event,o=d.call(arguments,1),i=0,r=0,s=0,a=0,l=0,c=0;if((t=h.event.fix(n)).type="mousewheel","detail"in n&&(s=-1*n.detail),"wheelDelta"in n&&(s=n.wheelDelta),"wheelDeltaY"in n&&(s=n.wheelDeltaY),"wheelDeltaX"in n&&(r=-1*n.wheelDeltaX),"axis"in n&&n.axis===n.HORIZONTAL_AXIS&&(r=-1*s,s=0),i=0===s?r:s,"deltaY"in n&&(i=s=-1*n.deltaY),"deltaX"in n&&(r=n.deltaX,0===s&&(i=-1*r)),0!==s||0!==r){1===n.deltaMode?(i*=e=h.data(this,"mousewheel-line-height"),s*=e,r*=e):2===n.deltaMode&&(i*=e=h.data(this,"mousewheel-page-height"),s*=e,r*=e);var a=Math.max(Math.abs(s),Math.abs(r));return p&&!(a<p)||y(n,p=a)&&(p/=40),y(n,a)&&(i/=40,r/=40,s/=40),i=Math[1<=i?"floor":"ceil"](i/p),r=Math[1<=r?"floor":"ceil"](r/p),s=Math[1<=s?"floor":"ceil"](s/p),g.settings.normalizeOffset&&this.getBoundingClientRect&&(a=this.getBoundingClientRect(),l=t.clientX-a.left,c=t.clientY-a.top),t.deltaX=r,t.deltaY=s,t.deltaFactor=p,t.offsetX=l,t.offsetY=c,t.deltaMode=0,o.unshift(t,i,r,s),u&&clearTimeout(u),u=setTimeout(f,200),(h.event.dispatch||h.event.handle).apply(this,o)}}function f(){p=null}function y(t,e){return g.settings.adjustOldDeltas&&"mousewheel"===t.type&&e%120==0}h.fn.extend({mousewheel:function(t){return t?this.bind("mousewheel",t):this.trigger("mousewheel")},unmousewheel:function(t){return this.unbind("mousewheel",t)}})}}),navigator.userAgent);(function(t){t.IS_MAC=0<navigator.appVersion.indexOf("Mac"),t.IS_IOS=!!i.match(/(iPad|iPhone|iPod)/g),t.IS_WINDOWS=0<navigator.appVersion.indexOf("Win"),t.IS_IE=0<=i.indexOf("MSIE"),t.IS_IE11=!!i.match(/Trident\/7\./),t.IS_EDGE=!!i.match(/Edge\//),t.IS_NETSCAPE=0<=i.indexOf("Mozilla/")&&i.indexOf("MSIE")<0&&i.indexOf("Edge/")<0,t.IS_CHROME_APP=null!=window.chrome&&null!=window.chrome.app&&null!=window.chrome.app.runtime,t.IS_CHROME=0<=i.indexOf("Chrome/")&&i.indexOf("Edge/")<0,t.IS_OPERA=0<=i.indexOf("Opera/")||0<=i.indexOf("OPR/"),t.IS_FIREFOX=0<=i.indexOf("Firefox/"),t.IS_SAFARI=0<=i.indexOf("AppleWebKit/")&&i.indexOf("Chrome/")<0&&i.indexOf("Edge/")<0,t.SUPPORT_TOUCH="ontouchstart"in document.documentElement,t.SUPPORT_POINTER=null!=window.PointerEvent&&!t.IS_MAC,t.SUPPORT_PASSIVE=!1;try{var e=Object.defineProperty({},"passive",{get:function(){t.SUPPORT_PASSIVE=!0}}),n=document.createElement("div");n.addEventListener&&n.addEventListener("click",function(){},e)}catch(t){}t.NO_FOREIGNOBJECT=!document.createElementNS||""+document.createElementNS("http://www.w3.org/2000/svg","foreignObject")!="[object SVGForeignObjectElement]"||0<=i.indexOf("Opera/"),t.SUPPORT_FOREIGNOBJECT=!t.NO_FOREIGNOBJECT})(U.Platform||(U.Platform={})),function(t){function e(){var t=window.module;return null!=t&&null!=t.hot&&null!=t.hot.status?t.hot.status():"unkonwn"}t.getHMRStatus=e,t.isApplyingHMR=function(){return"apply"===e()};var o={select:"input",change:"input",submit:"form",reset:"form",error:"img",load:"img",abort:"img"};t.isEventSupported=function(t){var e=document.createElement(o[t]||"div"),n="on"+t,t=n in e;return t||(e.setAttribute(n,"return;"),t="function"==typeof e[n]),t}}(U.Platform||(U.Platform={})),U.Platform.SUPPORT_PASSIVE&&(C.event.special.touchstart={setup:function(t,e,n){this.addEventListener("touchstart",n,{passive:!0})}},(Gn=C.event.special.mousewheel)&&(e=Gn.setup,Gn.setup=function(){var n=this,o=this.addEventListener;this.addEventListener=function(t,e){o.call(n,t,e,{passive:!0})},e.call(this),this.addEventListener=o})),window.NodeList&&!NodeList.prototype.forEach&&(NodeList.prototype.forEach=Array.prototype.forEach),[Element.prototype,Document.prototype,DocumentFragment.prototype].forEach(function(t){t.hasOwnProperty("append")||Object.defineProperty(t,"append",{configurable:!0,enumerable:!0,writable:!0,value:function(){var t=Array.prototype.slice.call(arguments),n=document.createDocumentFragment();t.forEach(function(t){var e=t instanceof Node;n.appendChild(e?t:document.createTextNode(String(t)))}),this.appendChild(n)}})});var n="object"==typeof global&&global&&global.Object===Object&&global,r="object"==typeof self&&self&&self.Object===Object&&self,s=n||r||Function("return this")(),a=s.Symbol,l=Object.prototype,c=l.hasOwnProperty,h=l.toString,u=a?a.toStringTag:void 0,p=Object.prototype.toString,d=a?a.toStringTag:void 0;function g(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":d&&d in Object(t)?function(t){var e=c.call(t,u),n=t[u];try{var o=!(t[u]=void 0)}catch(t){}var i=h.call(t);return o&&(e?t[u]=n:delete t[u]),i}(t):p.call(t)}function f(t){return null!=t&&"object"==typeof t}function y(t){return"symbol"==typeof t||f(t)&&"[object Symbol]"==g(t)}function m(t,e){for(var n=-1,o=null==t?0:t.length,i=Array(o);++n<o;)i[n]=e(t[n],n,t);return i}var b=Array.isArray,v=a?a.prototype:void 0,x=v?v.toString:void 0;function w(t){if("string"==typeof t)return t;if(b(t))return m(t,w)+"";if(y(t))return x?x.call(t):"";var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}function E(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}var A=/^\s+|\s+$/g,P=/^[-+]0x[0-9a-f]+$/i,D=/^0b[01]+$/i,M=/^0o[0-7]+$/i,S=parseInt;function k(t){if("number"==typeof t)return t;if(y(t))return NaN;if(E(t)&&(t=E(e="function"==typeof t.valueOf?t.valueOf():t)?e+"":e),"string"!=typeof t)return 0===t?t:+t;t=t.replace(A,"");var e=D.test(t);return e||M.test(t)?S(t.slice(2),e?2:8):P.test(t)?NaN:+t}var F=1/0;function T(t){return t?(t=k(t))===F||t===-1/0?17976931348623157e292*(t<0?-1:1):t==t?t:0:0===t?t:0}function L(t){var e=T(t),t=e%1;return e==e?t?e-t:e:0}function N(t){return t}function O(t){if(!E(t))return!1;t=g(t);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}var B=s["__core-js_shared__"],z=(Eo=/[^.]+$/.exec(B&&B.keys&&B.keys.IE_PROTO||""))?"Symbol(src)_1."+Eo:"",V=Function.prototype.toString;function j(t){if(null!=t){try{return V.call(t)}catch(t){}try{return t+""}catch(t){}}return""}var I=/^\[object .+?Constructor\]$/,R=Function.prototype,_=Object.prototype,G=R.toString,H=_.hasOwnProperty,$=RegExp("^"+G.call(H).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function q(t,e){t=null==t?void 0:t[e];return!E(e=t)||z&&z in e||!(O(e)?$:I).test(j(e))?void 0:t}var W=q(s,"WeakMap"),X=Object.create,Y=function(t){if(!E(t))return{};if(X)return X(t);J.prototype=t;t=new J;return J.prototype=void 0,t};function J(){}function Z(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}function K(){}function Q(t,e){var n=-1,o=t.length;for(e=e||Array(o);++n<o;)e[n]=t[n];return e}var tt,et,nt,ot=Date.now,it=function(){try{var t=q(Object,"defineProperty");return t({},"",{}),t}catch(t){}}(),rt=(tt=it?function(t,e){return it(t,"toString",{configurable:!0,enumerable:!1,value:(n=e,function(){return n}),writable:!0});var n}:N,nt=et=0,function(){var t=ot(),e=16-(t-nt);if(nt=t,0<e){if(800<=++et)return arguments[0]}else et=0;return tt.apply(void 0,arguments)});function st(t){return t!=t}function at(t,e){return!(null==t||!t.length)&&(t=t,-1<(e==e?function(t,e){for(var n=-1,o=t.length;++n<o;)if(t[n]===e)return n;return-1}(t,e):function(t,e){for(var n=t.length,o=-1;++o<n;)if(e(t[o],o,t))return o;return-1}(t,st)))}var lt=/^(?:0|[1-9]\d*)$/;function ct(t,e){var n=typeof t;return!!(e=null==e?9007199254740991:e)&&("number"==n||"symbol"!=n&&lt.test(t))&&-1<t&&t%1==0&&t<e}function ht(t,e,n){"__proto__"==e&&it?it(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}function ut(t,e){return t===e||t!=t&&e!=e}var pt=Object.prototype.hasOwnProperty;function dt(t,e,n){var o=t[e];pt.call(t,e)&&ut(o,n)&&(void 0!==n||e in t)||ht(t,e,n)}function gt(t,e,n,o){var i=!n;n=n||{};for(var r=-1,s=e.length;++r<s;){var a=e[r],l=o?o(n[a],t[a],a,n,t):void 0;void 0===l&&(l=t[a]),(i?ht:dt)(n,a,l)}return n}var ft=Math.max;function yt(r,s,a){return s=ft(void 0===s?r.length-1:s,0),function(){for(var t=arguments,e=-1,n=ft(t.length-s,0),o=Array(n);++e<n;)o[e]=t[s+e];e=-1;for(var i=Array(s+1);++e<s;)i[e]=t[e];return i[s]=a(o),Z(r,this,i)}}function mt(t,e){return rt(yt(t,e,N),t+"")}function Ct(t){return"number"==typeof t&&-1<t&&t%1==0&&t<=9007199254740991}function vt(t){return null!=t&&Ct(t.length)&&!O(t)}function bt(t,e,n){if(!E(n))return!1;var o=typeof e;return!!("number"==o?vt(n)&&ct(e,n.length):"string"==o&&e in n)&&ut(n[e],t)}function xt(a){return mt(function(t,e){var n=-1,o=e.length,i=1<o?e[o-1]:void 0,r=2<o?e[2]:void 0,i=3<a.length&&"function"==typeof i?(o--,i):void 0;for(r&&bt(e[0],e[1],r)&&(i=o<3?void 0:i,o=1),t=Object(t);++n<o;){var s=e[n];s&&a(t,s,n,i)}return t})}var wt=Object.prototype;function Et(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||wt)}function At(t){return f(t)&&"[object Arguments]"==g(t)}var Pt=Object.prototype,Dt=Pt.hasOwnProperty,Mt=Pt.propertyIsEnumerable,St=At(function(){return arguments}())?At:function(t){return f(t)&&Dt.call(t,"callee")&&!Mt.call(t,"callee")},kt="object"==typeof U&&U&&!U.nodeType&&U,Ft=kt&&"object"==typeof module&&module&&!module.nodeType&&module,Tt=Ft&&Ft.exports===kt?s.Buffer:void 0,Lt=(Tt?Tt.isBuffer:void 0)||function(){return!1},Nt={};function Ot(e){return function(t){return e(t)}}Nt["[object Float32Array]"]=Nt["[object Float64Array]"]=Nt["[object Int8Array]"]=Nt["[object Int16Array]"]=Nt["[object Int32Array]"]=Nt["[object Uint8Array]"]=Nt["[object Uint8ClampedArray]"]=Nt["[object Uint16Array]"]=Nt["[object Uint32Array]"]=!0,Nt["[object Arguments]"]=Nt["[object Array]"]=Nt["[object ArrayBuffer]"]=Nt["[object Boolean]"]=Nt["[object DataView]"]=Nt["[object Date]"]=Nt["[object Error]"]=Nt["[object Function]"]=Nt["[object Map]"]=Nt["[object Number]"]=Nt["[object Object]"]=Nt["[object RegExp]"]=Nt["[object Set]"]=Nt["[object String]"]=Nt["[object WeakMap]"]=!1;var Bt="object"==typeof U&&U&&!U.nodeType&&U,zt=Bt&&"object"==typeof module&&module&&!module.nodeType&&module,Vt=zt&&zt.exports===Bt&&n.process,jt=function(){try{return zt&&zt.require&&zt.require("util").types||Vt&&Vt.binding&&Vt.binding("util")}catch(t){}}(),It=jt&&jt.isTypedArray,Rt=It?Ot(It):function(t){return f(t)&&Ct(t.length)&&!!Nt[g(t)]},_t=Object.prototype.hasOwnProperty;function Gt(t,e){var n,o=b(t),i=!o&&St(t),r=!o&&!i&&Lt(t),s=!o&&!i&&!r&&Rt(t),a=o||i||r||s,l=a?function(t,e){for(var n=-1,o=Array(t);++n<t;)o[n]=e(n);return o}(t.length,String):[],c=l.length;for(n in t)!e&&!_t.call(t,n)||a&&("length"==n||r&&("offset"==n||"parent"==n)||s&&("buffer"==n||"byteLength"==n||"byteOffset"==n)||ct(n,c))||l.push(n);return l}function Ht(e,n){return function(t){return e(n(t))}}var Ut=Ht(Object.keys,Object),$t=Object.prototype.hasOwnProperty;function qt(t){if(!Et(t))return Ut(t);var e,n=[];for(e in Object(t))$t.call(t,e)&&"constructor"!=e&&n.push(e);return n}function Wt(t){return(vt(t)?Gt:qt)(t)}var Xt=Object.prototype.hasOwnProperty;function Yt(t){return vt(t)?Gt(t,!0):function(n){if(!E(n))return function(){var t=[];if(null!=n)for(var e in Object(n))t.push(e);return t}();var t,e=Et(n),o=[];for(t in n)("constructor"!=t||!e&&Xt.call(n,t))&&o.push(t);return o}(t)}var Jt=xt(function(t,e){gt(e,Yt(e),t)}),Zt=xt(function(t,e,n,o){gt(e,Yt(e),t,o)}),Kt=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Qt=/^\w*$/;function te(t,e){if(!b(t)){var n=typeof t;return"number"==n||"symbol"==n||"boolean"==n||null==t||y(t)||Qt.test(t)||!Kt.test(t)||null!=e&&t in Object(e)}}var ee=q(Object,"create"),ne=Object.prototype.hasOwnProperty,oe=Object.prototype.hasOwnProperty;function ie(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var o=t[e];this.set(o[0],o[1])}}function re(t,e){for(var n=t.length;n--;)if(ut(t[n][0],e))return n;return-1}ie.prototype.clear=function(){this.__data__=ee?ee(null):{},this.size=0},ie.prototype.delete=function(t){t=this.has(t)&&delete this.__data__[t];return this.size-=t?1:0,t},ie.prototype.get=function(t){var e=this.__data__;if(ee){var n=e[t];return"__lodash_hash_undefined__"===n?void 0:n}return ne.call(e,t)?e[t]:void 0},ie.prototype.has=function(t){var e=this.__data__;return ee?void 0!==e[t]:oe.call(e,t)},ie.prototype.set=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=ee&&void 0===e?"__lodash_hash_undefined__":e,this};var se=Array.prototype.splice;function ae(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var o=t[e];this.set(o[0],o[1])}}ae.prototype.clear=function(){this.__data__=[],this.size=0},ae.prototype.delete=function(t){var e=this.__data__,t=re(e,t);return!(t<0||(t==e.length-1?e.pop():se.call(e,t,1),--this.size,0))},ae.prototype.get=function(t){var e=this.__data__,t=re(e,t);return t<0?void 0:e[t][1]},ae.prototype.has=function(t){return-1<re(this.__data__,t)},ae.prototype.set=function(t,e){var n=this.__data__,o=re(n,t);return o<0?(++this.size,n.push([t,e])):n[o][1]=e,this};var le=q(s,"Map");function ce(t,e){var n=t.__data__;return("string"==(t=typeof e)||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e)?n["string"==typeof e?"string":"hash"]:n.map}function he(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var o=t[e];this.set(o[0],o[1])}}function ue(o,i){if("function"!=typeof o||null!=i&&"function"!=typeof i)throw new TypeError("Expected a function");var r=function(){var t=arguments,e=i?i.apply(this,t):t[0],n=r.cache;if(n.has(e))return n.get(e);t=o.apply(this,t);return r.cache=n.set(e,t)||n,t};return r.cache=new(ue.Cache||he),r}he.prototype.clear=function(){this.size=0,this.__data__={hash:new ie,map:new(le||ae),string:new ie}},he.prototype.delete=function(t){t=ce(this,t).delete(t);return this.size-=t?1:0,t},he.prototype.get=function(t){return ce(this,t).get(t)},he.prototype.has=function(t){return ce(this,t).has(t)},he.prototype.set=function(t,e){var n=ce(this,t),o=n.size;return n.set(t,e),this.size+=n.size==o?0:1,this},ue.Cache=he;var pe,de=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,ge=/\\(\\)?/g,fe=(pe=(wr=ue(function(t){var i=[];return 46===t.charCodeAt(0)&&i.push(""),t.replace(de,function(t,e,n,o){i.push(n?o.replace(ge,"$1"):e||t)}),i},function(t){return 500===pe.size&&pe.clear(),t})).cache,wr);function ye(t){return null==t?"":w(t)}function me(t,e){return b(t)?t:te(t,e)?[t]:fe(ye(t))}function Ce(t){if("string"==typeof t||y(t))return t;var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}function ve(t,e){for(var n=0,o=(e=me(e,t)).length;null!=t&&n<o;)t=t[Ce(e[n++])];return n&&n==o?t:void 0}function be(t,e){for(var n=-1,o=e.length,i=t.length;++n<o;)t[i+n]=e[n];return t}var xe=a?a.isConcatSpreadable:void 0;function we(t){return b(t)||St(t)||!!(xe&&t&&t[xe])}function Ee(t,e,n,o,i){var r=-1,s=t.length;for(n=n||we,i=i||[];++r<s;){var a=t[r];0<e&&n(a)?1<e?Ee(a,e-1,n,o,i):be(i,a):o||(i[i.length]=a)}return i}function Ae(t){return null!=t&&t.length?Ee(t,1):[]}var Pe=Ht(Object.getPrototypeOf,Object),De=Function.prototype,Me=Object.prototype,Se=De.toString,ke=Me.hasOwnProperty,Fe=Se.call(Object);function Te(t){if(!f(t)||"[object Object]"!=g(t))return!1;t=Pe(t);if(null===t)return!0;t=ke.call(t,"constructor")&&t.constructor;return"function"==typeof t&&t instanceof t&&Se.call(t)==Fe}function Le(t){if(f(t)){var e=g(t);return"[object Error]"==e||"[object DOMException]"==e||"string"==typeof t.message&&"string"==typeof t.name&&!Te(t)}}var Ne=mt(function(t,e){try{return Z(t,void 0,e)}catch(t){return Le(t)?t:new Error(t)}});function Oe(t,e,n){var o=t.length;return n=void 0===n?o:n,!e&&o<=n?t:function(t,e,n){var o=-1,i=t.length;e<0&&(e=i<-e?0:i+e),(n=i<n?i:n)<0&&(n+=i),i=n<e?0:n-e>>>0,e>>>=0;for(var r=Array(i);++o<i;)r[o]=t[o+e];return r}(t,e,n)}var Be=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");function ze(t){return Be.test(t)}var Ve="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",je="\\ud83c[\\udffb-\\udfff]",Ie="[^\\ud800-\\udfff]",Re="(?:\\ud83c[\\udde6-\\uddff]){2}",_e="[\\ud800-\\udbff][\\udc00-\\udfff]",Ge="(?:"+Ve+"|"+je+")?",He="[\\ufe0e\\ufe0f]?",Ue=He+Ge+"(?:\\u200d(?:"+[Ie,Re,_e].join("|")+")"+He+Ge+")*",$e="(?:"+[Ie+Ve+"?",Ve,Re,_e,"[\\ud800-\\udfff]"].join("|")+")",qe=RegExp(je+"(?="+je+")|"+$e+Ue,"g");function We(t){return ze(t)?t.match(qe)||[]:t.split("")}function Xe(o){return function(t){var e=ze(t=ye(t))?We(t):void 0,n=e?e[0]:t.charAt(0),t=e?Oe(e,1).join(""):t.slice(1);return n[o]()+t}}var Ye=Xe("toUpperCase");function Je(e){return function(t){return null==e?void 0:e[t]}}var Ze=Je({"Ã":"A","Ã":"A","Ã":"A","Ã":"A","Ã":"A","Ã":"A","Ã ":"a","Ã¡":"a","Ã¢":"a","Ã£":"a","Ã¤":"a","Ã¥":"a","Ã":"C","Ã§":"c","Ã":"D","Ã°":"d","Ã":"E","Ã":"E","Ã":"E","Ã":"E","Ã¨":"e","Ã©":"e","Ãª":"e","Ã«":"e","Ã":"I","Ã":"I","Ã":"I","Ã":"I","Ã¬":"i","Ã­":"i","Ã®":"i","Ã¯":"i","Ã":"N","Ã±":"n","Ã":"O","Ã":"O","Ã":"O","Ã":"O","Ã":"O","Ã":"O","Ã²":"o","Ã³":"o","Ã´":"o","Ãµ":"o","Ã¶":"o","Ã¸":"o","Ã":"U","Ã":"U","Ã":"U","Ã":"U","Ã¹":"u","Ãº":"u","Ã»":"u","Ã¼":"u","Ã":"Y","Ã½":"y","Ã¿":"y","Ã":"Ae","Ã¦":"ae","Ã":"Th","Ã¾":"th","Ã":"ss","Ä":"A","Ä":"A","Ä":"A","Ä":"a","Ä":"a","Ä":"a","Ä":"C","Ä":"C","Ä":"C","Ä":"C","Ä":"c","Ä":"c","Ä":"c","Ä":"c","Ä":"D","Ä":"D","Ä":"d","Ä":"d","Ä":"E","Ä":"E","Ä":"E","Ä":"E","Ä":"E","Ä":"e","Ä":"e","Ä":"e","Ä":"e","Ä":"e","Ä":"G","Ä":"G","Ä ":"G","Ä¢":"G","Ä":"g","Ä":"g","Ä¡":"g","Ä£":"g","Ä¤":"H","Ä¦":"H","Ä¥":"h","Ä§":"h","Ä¨":"I","Äª":"I","Ä¬":"I","Ä®":"I","Ä°":"I","Ä©":"i","Ä«":"i","Ä­":"i","Ä¯":"i","Ä±":"i","Ä´":"J","Äµ":"j","Ä¶":"K","Ä·":"k","Ä¸":"k","Ä¹":"L","Ä»":"L","Ä½":"L","Ä¿":"L","Å":"L","Äº":"l","Ä¼":"l","Ä¾":"l","Å":"l","Å":"l","Å":"N","Å":"N","Å":"N","Å":"N","Å":"n","Å":"n","Å":"n","Å":"n","Å":"O","Å":"O","Å":"O","Å":"o","Å":"o","Å":"o","Å":"R","Å":"R","Å":"R","Å":"r","Å":"r","Å":"r","Å":"S","Å":"S","Å":"S","Å ":"S","Å":"s","Å":"s","Å":"s","Å¡":"s","Å¢":"T","Å¤":"T","Å¦":"T","Å£":"t","Å¥":"t","Å§":"t","Å¨":"U","Åª":"U","Å¬":"U","Å®":"U","Å°":"U","Å²":"U","Å©":"u","Å«":"u","Å­":"u","Å¯":"u","Å±":"u","Å³":"u","Å´":"W","Åµ":"w","Å¶":"Y","Å·":"y","Å¸":"Y","Å¹":"Z","Å»":"Z","Å½":"Z","Åº":"z","Å¼":"z","Å¾":"z","Ä²":"IJ","Ä³":"ij","Å":"Oe","Å":"oe","Å":"'n","Å¿":"s"}),Ke=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Qe=RegExp("[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]","g"),tn=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,en=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,nn="a-z\\xdf-\\xf6\\xf8-\\xff",on="A-Z\\xc0-\\xd6\\xd8-\\xde",rn="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",sn="["+rn+"]",an="\\d+",ln="["+nn+"]",cn="[^\\ud800-\\udfff"+rn+an+"\\u2700-\\u27bf"+nn+on+"]",hn="(?:\\ud83c[\\udde6-\\uddff]){2}",un="[\\ud800-\\udbff][\\udc00-\\udfff]",pn="["+on+"]",dn="(?:"+ln+"|"+cn+")",gn="(?:"+pn+"|"+cn+")",fn="(?:['â](?:d|ll|m|re|s|t|ve))?",yn="(?:['â](?:D|LL|M|RE|S|T|VE))?",mn="(?:[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]|\\ud83c[\\udffb-\\udfff])?",Cn="[\\ufe0e\\ufe0f]?",vn=Cn+mn+"(?:\\u200d(?:"+["[^\\ud800-\\udfff]",hn,un].join("|")+")"+Cn+mn+")*",bn="(?:"+["[\\u2700-\\u27bf]",hn,un].join("|")+")"+vn,xn=RegExp([pn+"?"+ln+"+"+fn+"(?="+[sn,pn,"$"].join("|")+")",gn+"+"+yn+"(?="+[sn,pn+dn,"$"].join("|")+")",pn+"?"+dn+"+"+fn,pn+"+"+yn,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",an,bn].join("|"),"g");var wn=RegExp("['â]","g");function En(o){return function(t){return function(t,e,n){for(var o=-1,i=null==t?0:t.length;++o<i;)n=e(n,t[o],o,t);return n}((t=((t=ye(t=t))&&t.replace(Ke,Ze).replace(Qe,"")).replace(wn,""),t=ye(t),void 0===(e=n?void 0:e)?en.test(t)?t.match(xn)||[]:t.match(tn)||[]:t.match(e)||[]),o,"");var e,n}}var An=En(function(t,e,n){return e=e.toLowerCase(),t+(n?Ye(ye(e).toLowerCase()):e)});function Pn(t,e,n){return t==t&&(void 0!==n&&(t=t<=n?t:n),void 0!==e&&(t=e<=t?t:e)),t}function Dn(t,e,n){return void 0===n&&(n=e,e=void 0),void 0!==n&&(n=(n=k(n))==n?n:0),void 0!==e&&(e=(e=k(e))==e?e:0),Pn(k(t),e,n)}function Mn(t){t=this.__data__=new ae(t);this.size=t.size}Mn.prototype.clear=function(){this.__data__=new ae,this.size=0},Mn.prototype.delete=function(t){var e=this.__data__,t=e.delete(t);return this.size=e.size,t},Mn.prototype.get=function(t){return this.__data__.get(t)},Mn.prototype.has=function(t){return this.__data__.has(t)},Mn.prototype.set=function(t,e){var n=this.__data__;if(n instanceof ae){var o=n.__data__;if(!le||o.length<199)return o.push([t,e]),this.size=++n.size,this;n=this.__data__=new he(o)}return n.set(t,e),this.size=n.size,this};var Sn="object"==typeof U&&U&&!U.nodeType&&U,kn=Sn&&"object"==typeof module&&module&&!module.nodeType&&module,Fn=kn&&kn.exports===Sn?s.Buffer:void 0,Tn=Fn?Fn.allocUnsafe:void 0;function Ln(t,e){if(e)return t.slice();e=t.length,e=Tn?Tn(e):new t.constructor(e);return t.copy(e),e}function Nn(){return[]}var On=Object.prototype.propertyIsEnumerable,Bn=Object.getOwnPropertySymbols,zn=Bn?function(a){return null==a?[]:(a=Object(a),function(t){for(var e,n=-1,o=null==t?0:t.length,i=0,r=[];++n<o;){var s=t[n];e=s,On.call(a,e)&&(r[i++]=s)}return r}(Bn(a)))}:Nn,Vn=Object.getOwnPropertySymbols?function(t){for(var e=[];t;)be(e,zn(t)),t=Pe(t);return e}:Nn;function jn(t,e,n){e=e(t);return b(t)?e:be(e,n(t))}function In(t){return jn(t,Wt,zn)}function Rn(t){return jn(t,Yt,Vn)}var _n=q(s,"DataView"),Gn=q(s,"Promise"),Hn=q(s,"Set"),Un="[object Map]",$n="[object Promise]",qn="[object Set]",Wn="[object WeakMap]",Xn="[object DataView]",Yn=j(_n),Jn=j(le),Zn=j(Gn),Kn=j(Hn),Qn=j(W),r=g;(_n&&r(new _n(new ArrayBuffer(1)))!=Xn||le&&r(new le)!=Un||Gn&&r(Gn.resolve())!=$n||Hn&&r(new Hn)!=qn||W&&r(new W)!=Wn)&&(r=function(t){var e=g(t),t="[object Object]"==e?t.constructor:void 0,t=t?j(t):"";if(t)switch(t){case Yn:return Xn;case Jn:return Un;case Zn:return $n;case Kn:return qn;case Qn:return Wn}return e});var to=r,eo=Object.prototype.hasOwnProperty,no=s.Uint8Array;function oo(t){var e=new t.constructor(t.byteLength);return new no(e).set(new no(t)),e}var io=/\w*$/,l=a?a.prototype:void 0,ro=l?l.valueOf:void 0;function so(t,e){e=e?oo(t.buffer):t.buffer;return new t.constructor(e,t.byteOffset,t.length)}function ao(t){return"function"!=typeof t.constructor||Et(t)?{}:Y(Pe(t))}var v=jt&&jt.isMap,lo=v?Ot(v):function(t){return f(t)&&"[object Map]"==to(t)},B=jt&&jt.isSet,co=B?Ot(B):function(t){return f(t)&&"[object Set]"==to(t)},ho="[object Arguments]",uo="[object Function]",po="[object Object]",go={};function fo(r,s,a,t,e,l){var c,n=1&s,o=2&s,i=4&s;if(a&&(c=e?a(r,t,e,l):a(r)),void 0!==c)return c;if(!E(r))return r;var h,u,p=b(r);if(p){if(t=(d=r).length,g=new d.constructor(t),t&&"string"==typeof d[0]&&eo.call(d,"index")&&(g.index=d.index,g.input=d.input),c=g,!n)return Q(r,c)}else{var d=to(r),g=d==uo||"[object GeneratorFunction]"==d;if(Lt(r))return Ln(r,n);if(d==po||d==ho||g&&!e){if(c=o||g?{}:ao(r),!n)return o?(h=r,u=(u=c)&&gt(r,Yt(r),u),gt(h,Vn(h),u)):(h=r,u=(u=c)&&gt(r,Wt(r),u),gt(h,zn(h),u))}else{if(!go[d])return e?r:{};c=function(t,e,n){var o,i=t.constructor;switch(e){case"[object ArrayBuffer]":return oo(t);case"[object Boolean]":case"[object Date]":return new i(+t);case"[object DataView]":return o=t,e=n?oo(o.buffer):o.buffer,new o.constructor(e,o.byteOffset,o.byteLength);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return so(t,n);case"[object Map]":return new i;case"[object Number]":case"[object String]":return new i(t);case"[object RegExp]":return(n=new(o=t).constructor(o.source,io.exec(o))).lastIndex=o.lastIndex,n;case"[object Set]":return new i;case"[object Symbol]":return ro?Object(ro.call(t)):{}}}(r,d,n)}}n=(l=l||new Mn).get(r);if(n)return n;l.set(r,c),co(r)?r.forEach(function(t){c.add(fo(t,s,a,t,r,l))}):lo(r)&&r.forEach(function(t,e){c.set(e,fo(t,s,a,e,r,l))});var o=i?o?Rn:In:o?keysIn:Wt,f=p?void 0:o(r);return function(t){for(var e,n,o=-1,i=null==t?0:t.length;++o<i&&!1!==(e=t[o],n=o,f&&(e=r[n=e]),void dt(c,n,fo(e,s,a,n,r,l))););}(f||r),c}function yo(t){return fo(t,4)}function mo(t){return fo(t,5)}function Co(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new he;++e<n;)this.add(t[e])}function vo(t,e){return t.has(e)}function bo(t,e,n,o,i,r){var s=1&n,a=t.length,l=e.length;if(a!=l&&!(s&&a<l))return!1;l=r.get(t);if(l&&r.get(e))return l==e;var c=-1,h=!0,u=2&n?new Co:void 0;for(r.set(t,e),r.set(e,t);++c<a;){var p,d=t[c],g=e[c];if(o&&(p=s?o(g,d,c,e,t,r):o(d,g,c,t,e,r)),void 0!==p){if(p)continue;h=!1;break}if(u){if(!function(t,e){for(var n=-1,o=null==t?0:t.length;++n<o;)if(e(t[n],n,t))return 1}(e,function(t,e){return!vo(u,e)&&(d===t||i(d,t,n,o,r))&&u.push(e)})){h=!1;break}}else if(d!==g&&!i(d,g,n,o,r)){h=!1;break}}return r.delete(t),r.delete(e),h}function xo(t){var n=-1,o=Array(t.size);return t.forEach(function(t,e){o[++n]=[e,t]}),o}function wo(t){var e=-1,n=Array(t.size);return t.forEach(function(t){n[++e]=t}),n}go[ho]=go["[object Array]"]=go["[object ArrayBuffer]"]=go["[object DataView]"]=go["[object Boolean]"]=go["[object Date]"]=go["[object Float32Array]"]=go["[object Float64Array]"]=go["[object Int8Array]"]=go["[object Int16Array]"]=go["[object Int32Array]"]=go["[object Map]"]=go["[object Number]"]=go[po]=go["[object RegExp]"]=go["[object Set]"]=go["[object String]"]=go["[object Symbol]"]=go["[object Uint8Array]"]=go["[object Uint8ClampedArray]"]=go["[object Uint16Array]"]=go["[object Uint32Array]"]=!0,go["[object Error]"]=go[uo]=go["[object WeakMap]"]=!1,Co.prototype.add=Co.prototype.push=function(t){return this.__data__.set(t,"__lodash_hash_undefined__"),this},Co.prototype.has=function(t){return this.__data__.has(t)};var Eo=a?a.prototype:void 0,Ao=Eo?Eo.valueOf:void 0,Po=Object.prototype.hasOwnProperty,Do="[object Arguments]",Mo="[object Array]",So="[object Object]",ko=Object.prototype.hasOwnProperty;function Fo(t,e,n,o,i){return t===e||(null==t||null==e||!f(t)&&!f(e)?t!=t&&e!=e:function(t,e,n,o,i,r){var s=b(t),a=b(e),l=s?Mo:to(t),c=a?Mo:to(e),h=(l=l==Do?So:l)==So,a=(c=c==Do?So:c)==So;if((c=l==c)&&Lt(t)){if(!Lt(e))return!1;h=!(s=!0)}if(c&&!h)return r=r||new Mn,(s||Rt(t)?bo:function(t,e,n,o,i,r){switch(l){case"[object DataView]":if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case"[object ArrayBuffer]":return!(t.byteLength!=e.byteLength||!i(new no(t),new no(e)));case"[object Boolean]":case"[object Date]":case"[object Number]":return ut(+t,+e);case"[object Error]":return t.name==e.name&&t.message==e.message;case"[object RegExp]":case"[object String]":return t==e+"";case"[object Map]":var s=xo;case"[object Set]":var a=1&n,s=s||wo;if(t.size!=e.size&&!a)return!1;a=r.get(t);if(a)return a==e;n|=2,r.set(t,e);i=bo(s(t),s(e),n,o,i,r);return r.delete(t),i;case"[object Symbol]":if(Ao)return Ao.call(t)==Ao.call(e)}return!1})(t,e,n,o,i,r);if(!(1&n)){h=h&&ko.call(t,"__wrapped__"),a=a&&ko.call(e,"__wrapped__");if(h||a)return i(h?t.value():t,a?e.value():e,n,o,r=r||new Mn)}return!!c&&function(t,e,n,o,i,r){var s=1&n,a=In(t),l=a.length;if(l!=In(e).length&&!s)return!1;for(var c=l;c--;){var h=a[c];if(!(s?h in e:Po.call(e,h)))return!1}var u=r.get(t);if(u&&r.get(e))return u==e;var p=!0;r.set(t,e),r.set(e,t);for(var d,g=s;++c<l;){var f,y=t[h=a[c]],m=e[h];if(o&&(f=s?o(m,y,h,e,t,r):o(y,m,h,t,e,r)),!(void 0===f?y===m||i(y,m,n,o,r):f)){p=!1;break}g=g||"constructor"==h}return!p||g||(d=t.constructor)!=(u=e.constructor)&&"constructor"in t&&"constructor"in e&&!("function"==typeof d&&d instanceof d&&"function"==typeof u&&u instanceof u)&&(p=!1),r.delete(t),r.delete(e),p}(t,e,n,o,i,r=r||new Mn)}(t,e,n,o,Fo,i))}function To(t){return t==t&&!E(t)}function Lo(e,n){return function(t){return null!=t&&t[e]===n&&(void 0!==n||e in Object(t))}}function No(t,e){return null!=t&&e in Object(t)}function Oo(t,e,n){for(var o=-1,i=(e=me(e,t)).length,r=!1;++o<i;){var s=Ce(e[o]);if(!(r=null!=t&&n(t,s)))break;t=t[s]}return r||++o!=i?r:!!(i=null==t?0:t.length)&&Ct(i)&&ct(s,i)&&(b(t)||St(t))}function Bo(t,e){return null!=t&&Oo(t,e,No)}function zo(e){return function(t){return null==t?void 0:t[e]}}function Vo(t){return"function"==typeof t?t:null==t?N:"object"==typeof t?b(t)?(i=t[0],r=t[1],te(i)&&To(r)?Lo(Ce(i),r):function(t){var e,e=void 0===(e=null==t?void 0:ve(t,i))?void 0:e;return void 0===e&&e===r?Bo(t,i):Fo(r,e,3)}):1==(o=function(t){for(var e=Wt(t),n=e.length;n--;){var o=e[n],i=t[o];e[n]=[o,i,To(i)]}return e}(n=t)).length&&o[0][2]?Lo(o[0][0],o[0][1]):function(t){return t===n||function(t,e,n){var o=e.length,i=o;if(null==t)return!i;for(t=Object(t);o--;){var r=e[o];if(r[2]?r[1]!==t[r[0]]:!(r[0]in t))return!1}for(;++o<i;){var s=(r=e[o])[0],a=t[s],l=r[1];if(r[2]){if(void 0===a&&!(s in t))return!1}else{var c,s=new Mn;if(!(void 0===c?Fo(l,a,3,n,s):c))return!1}}return!0}(t,o)}:te(t=t)?zo(Ce(t)):(e=t,function(t){return ve(t,e)});var e,n,o,i,r}function jo(t,e,n,o){for(var i=-1,r=null==t?0:t.length;++i<r;){var s=t[i];e(o,s,n(s),t)}return o}var Io=function(t,e,n){for(var o=-1,i=Object(t),r=n(t),s=r.length;s--;){var a=r[++o];if(!1===e(i[a],a,i))break}return t},Ro=function(t,e){if(null==t)return t;if(!vt(t))return o=e,(n=t)&&Io(n,o,Wt);for(var n,o,i=t.length,r=-1,s=Object(t);++r<i&&!1!==e(s[r],r,s););return t};function _o(t,o,i,r){return Ro(t,function(t,e,n){o(r,t,i(t),n)}),r}var Go=function(){return s.Date.now()},Ho=Math.max,Uo=Math.min;function $o(o,n,t){var i,r,s,a,l,c,h=0,u=!1,p=!1,e=!0;if("function"!=typeof o)throw new TypeError("Expected a function");function d(t){var e=i,n=r;return i=r=void 0,h=t,a=o.apply(n,e)}function g(t){var e=t-c;return void 0===c||n<=e||e<0||p&&s<=t-h}function f(){var t,e=Go();if(g(e))return y(e);l=setTimeout(f,(t=n-(e-c),p?Uo(t,s-(e-h)):t))}function y(t){return l=void 0,e&&i?d(t):(i=r=void 0,a)}function m(){var t=Go(),e=g(t);if(i=arguments,r=this,c=t,e){if(void 0===l)return h=e=c,l=setTimeout(f,n),u?d(e):a;if(p)return clearTimeout(l),l=setTimeout(f,n),d(c)}return void 0===l&&(l=setTimeout(f,n)),a}return n=k(n)||0,E(t)&&(u=!!t.leading,s=(p="maxWait"in t)?Ho(k(t.maxWait)||0,n):s,e="trailing"in t?!!t.trailing:e),m.cancel=function(){void 0!==l&&clearTimeout(l),i=c=r=l=void(h=0)},m.flush=function(){return void 0===l?a:y(Go())},m}var qo=Object.prototype,Wo=qo.hasOwnProperty,Xo=mt(function(t,e){t=Object(t);var n=-1,o=e.length,i=2<o?e[2]:void 0;for(i&&bt(e[0],e[1],i)&&(o=1);++n<o;)for(var r=e[n],s=Yt(r),a=-1,l=s.length;++a<l;){var c=s[a],h=t[c];(void 0===h||ut(h,qo[c])&&!Wo.call(t,c))&&(t[c]=r[c])}return t});function Yo(t,e,n){(void 0===n||ut(t[e],n))&&(void 0!==n||e in t)||ht(t,e,n)}function Jo(t){return f(t)&&vt(t)}function Zo(t,e){if(("constructor"!==e||"function"!=typeof t[e])&&"__proto__"!=e)return t[e]}function Ko(f,y,m,C,v){f!==y&&Io(y,function(t,e){var n,o,i,r,s,a,l,c,h,u,p,d,g;v=v||new Mn,E(t)?(o=y,r=m,s=Ko,a=C,l=v,p=Zo(n=f,i=e),d=Zo(o,i),(g=l.get(d))?Yo(n,i,g):((c=void 0===(u=a?a(p,d,i+"",n,o,l):void 0))&&(g=!(h=b(d))&&Lt(d),o=!h&&!g&&Rt(d),u=d,h||g||o?u=b(p)?p:Jo(p)?Q(p):g?Ln(d,!(c=!1)):o?so(d,!(c=!1)):[]:Te(d)||St(d)?St(u=p)?u=gt(p,Yt(p)):E(p)&&!O(p)||(u=ao(d)):c=!1),c&&(l.set(d,u),s(u,d,r,a,l),l.delete(d)),Yo(n,i,u))):(void 0===(u=C?C(Zo(f,e),t,e+"",f,y,v):void 0)&&(u=t),Yo(f,e,u))},Yt)}function Qo(t,e,n,o,i,r){return E(t)&&E(e)&&(r.set(e,t),Ko(t,e,void 0,Qo,r),r.delete(e)),t}var ti=xt(function(t,e,n,o){Ko(t,e,n,o)}),ei=mt(function(t){return t.push(void 0,Qo),Z(ti,void 0,t)}),ni=mt(function(t,e){if("function"!=typeof t)throw new TypeError("Expected a function");return setTimeout(function(){t.apply(void 0,e)},1)});function oi(t,e,n){for(var o=-1,i=null==t?0:t.length;++o<i;)if(n(e,t[o]))return!0;return!1}var ii=mt(function(t,e){return Jo(t)?function(t,e,n){var o=-1,i=at,r=!0,s=t.length,a=[],l=e.length;if(!s)return a;200<=e.length&&(i=vo,r=!1,e=new Co(e));t:for(;++o<s;){var c=h=t[o],h=0!==h?h:0;if(r&&c==c){for(var u=l;u--;)if(e[u]===c)continue t;a.push(h)}else i(e,c,n)||a.push(h)}return a}(t,Ee(e,1,Jo,!0)):[]}),ri=Je({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"}),si=/[&<>"']/g,ai=RegExp(si.source);function li(t){return(t=ye(t))&&ai.test(t)?t.replace(si,ri):t}var ci,hi=Object.prototype.hasOwnProperty,ui=(ci=function(t,e,n){hi.call(t,n)?t[n].push(e):ht(t,n,[e])},function(t,e){var n={};return(b(t)?jo:_o)(t,ci,Vo(e),n)}),pi=Object.prototype.hasOwnProperty;function di(t,e){return null!=t&&pi.call(t,e)}function gi(t,e){return null!=t&&Oo(t,e,di)}var fi=Math.max,yi=Math.min;function mi(t){return"string"==typeof t||!b(t)&&f(t)&&"[object String]"==g(t)}var Ci=Object.prototype.hasOwnProperty;function vi(t){if(null==t)return!0;if(vt(t)&&(b(t)||"string"==typeof t||"function"==typeof t.splice||Lt(t)||Rt(t)||St(t)))return!t.length;var e,n=to(t);if("[object Map]"==n||"[object Set]"==n)return!t.size;if(Et(t))return!qt(t).length;for(e in t)if(Ci.call(t,e))return!1;return!0}function bi(t,e){return Fo(t,e)}var xi=s.isFinite;function wi(t){return"number"==typeof t&&t==L(t)}function Ei(t){return"number"==typeof t||f(t)&&"[object Number]"==g(t)}var R=jt&&jt.isRegExp,Ai=R?Ot(R):function(t){return f(t)&&"[object RegExp]"==g(t)},Pi=En(function(t,e,n){return t+(n?" ":"")+e.toLowerCase()}),Di=Xe("toLowerCase"),Mi=xt(function(t,e,n){Ko(t,e,n)});function Si(t,e){if(t!==e){var n=void 0!==t,o=null===t,i=t==t,r=y(t),s=void 0!==e,a=null===e,l=e==e,c=y(e);if(!a&&!c&&!r&&e<t||r&&s&&l&&!a&&!c||o&&s&&l||!n&&l||!i)return 1;if(!o&&!r&&!c&&t<e||c&&n&&i&&!o&&!r||a&&n&&i||!s&&i||!l)return-1}return 0}function ki(t,i,n){var r,s,a=-1;return i=m(i.length?i:[N],Ot(Vo)),function(t){var e=t.length;for(t.sort(function(t,e){return function(t,e,n){for(var o=-1,i=t.criteria,r=e.criteria,s=i.length,a=n.length;++o<s;){var l=Si(i[o],r[o]);if(l)return o>=a?l:l*("desc"==n[o]?-1:1)}return t.index-e.index}(t,e,n)});e--;)t[e]=t[e].value;return t}((r=-1,s=vt(t=t)?Array(t.length):[],Ro(t,function(t,e,n){var o;s[++r]=(o=t,{criteria:m(i,function(t){return t(o)}),index:++a,value:o})}),s))}var Fi=Math.floor;function Ti(t,e){var n="";if(!t||e<1||9007199254740991<e)return n;for(;e%2&&(n+=t),(e=Fi(e/2))&&(t+=t),e;);return n}var Li=zo("length"),_="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",G="\\ud83c[\\udffb-\\udfff]",H="[^\\ud800-\\udfff]",Pt="(?:\\ud83c[\\udde6-\\uddff]){2}",Ft="[\\ud800-\\udbff][\\udc00-\\udfff]",kt="(?:"+_+"|"+G+")?",Tt="[\\ufe0e\\ufe0f]?",Bt=Tt+kt+"(?:\\u200d(?:"+[H,Pt,Ft].join("|")+")"+Tt+kt+")*",n="(?:"+[H+_+"?",_,Pt,Ft,"[\\ud800-\\udfff]"].join("|")+")",Ni=RegExp(G+"(?="+G+")|"+n+Bt,"g");function Oi(t){return(ze(t)?function(t){for(var e=Ni.lastIndex=0;Ni.test(t);)++e;return e}:Li)(t)}var Bi=Math.ceil;function zi(t,e){var n=(e=void 0===e?" ":w(e)).length;if(n<2)return n?Ti(e,t):e;n=Ti(e,Bi(t/Oi(e)));return ze(e)?Oe(We(n),0,t).join(""):n.slice(0,t)}var Vi=Math.ceil,ji=Math.floor,Ii=/^\s+/,Ri=s.parseInt;function _i(a,t){return function(t,e){for(var n=-1,o=e.length,i={};++n<o;){var r=e[n],s=ve(t,r);Bo(a,r)&&function(t,e,n,o){if(!E(t))return;for(var i=-1,r=(e=me(e,t)).length,s=r-1,a=t;null!=a&&++i<r;){var l,c=Ce(e[i]),h=n;i!=s&&(l=a[c],void 0===(h=o?o(l,c,a):void 0)&&(h=E(l)?l:ct(e[i+1])?[]:{})),dt(a,c,h),a=a[c]}}(i,me(r,t),s)}return i}(a,t)}var Gi=rt(yt(It=function(t,e){return null==t?{}:_i(t,e)},void 0,Ae),It+""),Hi=mt(function(t,e){if(null==t)return[];var n=e.length;return 1<n&&bt(t,e[0],e[1])?e=[]:2<n&&bt(e[0],e[1],e[2])&&(e=[e[0]]),ki(t,Ee(e,1),[])}),Ui=Math.floor,$i=Math.min;function qi(t,e,n,o){e=n(e);for(var i=0,r=null==t?0:t.length,s=e!=e,a=null===e,l=y(e),c=void 0===e;i<r;){var h=Ui((i+r)/2),u=n(t[h]),p=void 0!==u,d=null===u,g=u==u,f=y(u),u=s?o||g:c?g&&(o||p):a?g&&p&&(o||!d):l?g&&p&&!d&&(o||!f):!d&&!f&&(o?u<=e:u<e);u?i=h+1:r=h}return $i(r,4294967294)}function Wi(t,e){return function(t,e){var n=0,o=null==t?n:t.length;if("number"==typeof e&&e==e&&o<=2147483647){for(;n<o;){var i=n+o>>>1,r=t[i];null!==r&&!y(r)&&r<e?n=1+i:o=i}return o}return qi(t,e,N,void 0)}(t,e)}function Xi(t,e,n){return qi(t,e,Vo(n))}var Yi=En(function(t,e,n){return t+(n?" ":"")+Ye(e)}),Ji=Object.prototype,Zi=Ji.hasOwnProperty;function Ki(t,e,n,o){return void 0===t||ut(t,Ji[n])&&!Zi.call(o,n)?e:t}var Qi={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"};function tr(t){return"\\"+Qi[t]}var er=/<%=([\s\S]+?)%>/g,nr={escape:/<%-([\s\S]+?)%>/g,evaluate:/<%([\s\S]+?)%>/g,interpolate:er,variable:"",imports:{_:{escape:li}}},or=/\b__p \+= '';/g,ir=/\b(__p \+=) '' \+/g,rr=/(__e\(.*?\)|\b__t\)) \+\n'';/g,sr=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,ar=/($^)/,lr=/['\n\r\u2028\u2029\\]/g,cr=Object.prototype.hasOwnProperty;function hr(s,t,e){var n=nr.imports._.templateSettings||nr;e&&bt(s,t,e)&&(t=void 0),s=ye(s),t=Zt({},t,n,Ki);var a,l,o,n=Zt({},t.imports,n.imports,Ki),i=Wt(n),r=(o=n,m(i,function(t){return o[t]})),c=0,n=t.interpolate||ar,h="__p += '",n=RegExp((t.escape||ar).source+"|"+n.source+"|"+(n===er?sr:ar).source+"|"+(t.evaluate||ar).source+"|$","g"),u=cr.call(t,"sourceURL")?"//# sourceURL="+(t.sourceURL+"").replace(/[\r\n]/g," ")+"\n":"";s.replace(n,function(t,e,n,o,i,r){return n=n||o,h+=s.slice(c,r).replace(lr,tr),e&&(a=!0,h+="' +\n__e("+e+") +\n'"),i&&(l=!0,h+="';\n"+i+";\n__p += '"),n&&(h+="' +\n((__t = ("+n+")) == null ? '' : __t) +\n'"),c=r+t.length,t}),h+="';\n";t=cr.call(t,"variable")&&t.variable;t||(h="with (obj) {\n"+h+"\n}\n"),h=(l?h.replace(or,""):h).replace(ir,"$1").replace(rr,"$1;"),h="function("+(t||"obj")+") {\n"+(t?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(a?", __e = _.escape":"")+(l?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+h+"return __p\n}";t=Ne(function(){return Function(i,u+"return "+h).apply(void 0,r)});if(t.source=h,Le(t))throw t;return t}var ur=/\w*$/,pr=Je({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),dr=/&(?:amp|lt|gt|quot|#39);/g,gr=RegExp(dr.source),fr=Hn&&1/wo(new Hn([,-0]))[1]==1/0?function(t){return new Hn(t)}:K;function yr(t,e,n){var o=-1,i=at,r=t.length,s=!0,a=[],l=a;if(n)s=!1,i=oi;else if(200<=r){var c=e?null:fr(t);if(c)return wo(c);s=!1,i=vo,l=new Co}else l=e?[]:a;t:for(;++o<r;){var h=t[o],u=e?e(h):h,h=n||0!==h?h:0;if(s&&u==u){for(var p=l.length;p--;)if(l[p]===u)continue t;e&&l.push(u),a.push(h)}else i(l,u,n)||(l!==a&&l.push(u),a.push(h))}return a}var mr=mt(function(t){return yr(Ee(t,1,Jo,!0))});function Cr(t){return t&&t.length?yr(t):[]}var vr=0;function br(t){var e=++vr;return ye(t)+e}var xr=En(function(t,e,n){return t+(n?" ":"")+e.toUpperCase()}),wr=function(t){return!Array.isArray(t)&&0<=t-parseFloat(t)+1},De=Object.freeze({__proto__:null,isWindow:function(t){return t&&t===t.window},isNumeric:wr,isNull:function(t){return null===t},isNil:function(t){return null==t},isUndefined:function(t){return void 0===t},isString:mi,isNumber:Ei,isBoolean:function(t){return!0===t||!1===t||f(t)&&"[object Boolean]"==g(t)},isObject:E,isArray:b,isArrayLike:vt,isFunction:O}),Me=Object.freeze({__proto__:null,isArray:b,isArrayLike:vt,uniq:Cr,union:mr,sortedIndex:Wi,sortedIndexBy:Xi,sortBy:Hi,groupBy:ui,difference:ii});function Er(n){for(var t=[],e=1;e<arguments.length;e++)t[e-1]=arguments[e];t.forEach(function(e){Object.getOwnPropertyNames(e.prototype).forEach(function(t){"constructor"!==t&&Object.defineProperty(n.prototype,t,Object.getOwnPropertyDescriptor(e.prototype,t))})})}var Ar=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};function Pr(t,e){function n(){this.constructor=t}Ar(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var Dr=/^\s*class\s+/.test(""+function(){})||/^\s*class\s*\{/.test(""+function(){});function Mr(t,e){t=new Function("base","\n      return "+Dr+"\n        ? class "+t+" extends base { }\n        : function "+t+"() { return base.apply(this, arguments) }\n    ")(e);return Dr||Pr(t,e),t}function Sr(t,e){return null!=t?t:e}function kr(t,e,n){var o;void 0===n&&(n="/");var i=Array.isArray(e)?e:e.split(n);if(i.length)for(o=t;i.length;){var r=i.shift();if(!(Object(o)===o&&r&&r in o))return;o=o[r]}return o}function Fr(t,e,n,o){void 0===o&&(o="/");var i,e=Array.isArray(e)?e:e.split(o),o=e.pop();return o&&(i=t,e.forEach(function(t){null==i[t]&&(i[t]={}),i=i[t]}),i[o]=n),t}function Tr(t,e,n){void 0===n&&(n="/");e=Array.isArray(e)?e.slice():e.split(n),n=e.pop();return n&&(0<e.length?(e=kr(t,e))&&delete e[n]:delete t[n]),t}He=Object.freeze({__proto__:null,ensure:Sr,getValue:function(t,e,n){e=null!=t?t[e]:null;return void 0!==n?Sr(e,n):e},getNumber:function(t,e,n){e=null!=t?t[e]:null;return null==e?n:(e=+e,isNaN(e)||!isFinite(e)?n:e)},getBoolean:function(t,e,n){e=null!=t?t[e]:null;return null==e?n:!!e},getByPath:kr,setByPath:Fr,unsetByPath:Tr,flatten:function i(r,s,a){void 0===s&&(s="/");var t,l={};for(t in Object.keys(r).forEach(function(e){var n,t=r[e],o="object"==typeof t||Array.isArray(t);o&&a&&a(t)&&(o=!1),o?(n=i(t,s,a),Object.keys(n).forEach(function(t){l[e+s+t]=n[t]})):l[e]=t}),r)r.hasOwnProperty(t);return l},has:gi,pick:Gi,forIn:function(t,e){return null==t?t:Io(t,"function"==typeof e?e:N,Yt)},merge:Mi,extend:Jt,isEqual:bi,isEmpty:vi,isObject:E,isPlainObject:Te,clone:yo,cloneDeep:mo,defaults:Xo,defaultsDeep:ei,applyMixins:Er,inherit:Pr,createClass:Mr});function Lr(t){return Yi(An(t)).replace(/ /g,"")}function Nr(t){for(var e=2166136261,n=!1,o=t,i=0,r=o.length;i<r;i+=1){var s=o.charCodeAt(i);127<s&&!n&&(s=(o=unescape(encodeURIComponent(o))).charCodeAt(i),n=!0),e^=s,e+=(e<<1)+(e<<4)+(e<<7)+(e<<8)+(e<<24)}return e>>>0}function Or(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var e=16*Math.random()|0;return("x"===t?e:3&e|8).toString(16)})}function Br(t,e){void 0===e&&(e={});t=C.parseHTML(t,null,!1);return t.forEach(function(t){var e=t;if(e){var n=e.attributes;if(n)for(var o=0,i=n.length;o<i;o+=1){var r,s=n.item(o);s&&(r=s.value.toLowerCase(),((s=s.name.toLowerCase()).startsWith("on")||r.startsWith("javascript:")||r.startsWith("data:")||r.startsWith("vbscript:"))&&e.removeAttribute(s))}}}),e.raw?t:C("<div/>").append(t).html()}function zr(t,e,n){for(var o,i=Math.min(2,Math.floor(.34*t.length)),r=Math.floor(.4*t.length)+1,s=!1,a=t.toLowerCase(),l=0,c=e;l<c.length;l++){var h=c[l],u=n(h);if(void 0!==u&&Math.abs(u.length-a.length)<=i){var p=u.toLowerCase();if(p===a){if(u===t)continue;return h}s||u.length<3||void 0!==(p=function(t,e,n){for(var o=new Array(e.length+1),i=new Array(e.length+1),r=n+1,s=0;s<=e.length;s+=1)o[s]=s;for(s=1;s<=t.length;s+=1){for(var a=t.charCodeAt(s-1),l=n<s?s-n:1,c=e.length>n+s?n+s:e.length,h=i[0]=s,u=1;u<l;u+=1)i[u]=r;for(u=l;u<=c;u+=1){var p=a===e.charCodeAt(u-1)?o[u-1]:Math.min(o[u]+1,i[u-1]+1,o[u-1]+2);i[u]=p,h=Math.min(h,p)}for(u=c+1;u<=e.length;u+=1)i[u]=r;if(n<h)return;var d=o;o=i,i=d}var g=o[e.length];return n<g?void 0:g}(a,p,r-1))&&(o=(p<3?s=!0:r=p,h))}}return o}Ge=Object.freeze({__proto__:null,isString:mi,toString:ye,escape:li,unescape:function(t){return(t=ye(t))&&gr.test(t)?t.replace(dr,pr):t},startsWith:function(t,e,n){return t=ye(t),n=null==n?0:Pn(L(n),0,t.length),e=w(e),t.slice(n,n+e.length)==e},endsWith:function(t,e,n){t=ye(t),e=w(e);var o=t.length,o=n=void 0===n?o:Pn(L(n),0,o);return 0<=(n-=e.length)&&t.slice(n,o)==e},split:function(t,e,n){return n&&"number"!=typeof n&&bt(t,e,n)&&(e=n=void 0),(n=void 0===n?4294967295:n>>>0)?(t=ye(t))&&("string"==typeof e||null!=e&&!Ai(e))&&!(e=w(e))&&ze(t)?Oe(We(t),0,n):t.split(e,n):[]},repeat:function(t,e,n){return e=(n?bt(t,e,n):void 0===e)?1:L(e),Ti(ye(t),e)},pad:function(t,e,n){t=ye(t);var o=(e=L(e))?Oi(t):0;if(!e||e<=o)return t;o=(e-o)/2;return zi(ji(o),n)+t+zi(Vi(o),n)},padEnd:function(t,e,n){t=ye(t);var o=(e=L(e))?Oi(t):0;return e&&o<e?t+zi(e-o,n):t},padStart:function(t,e,n){t=ye(t);var o=(e=L(e))?Oi(t):0;return e&&o<e?zi(e-o,n)+t:t},truncate:function(t,e){var n,o=30,i="...";E(e)&&(n="separator"in e?e.separator:n,o="length"in e?L(e.length):o,i="omission"in e?w(e.omission):i);var r,e=(t=ye(t)).length;if(ze(t)&&(e=(r=We(t)).length),e<=o)return t;e=o-Oi(i);if(e<1)return i;o=r?Oe(r,0,e).join(""):t.slice(0,e);if(void 0===n)return o+i;if(r&&(e+=o.length-e),Ai(n)){if(t.slice(e).search(n)){var s,a=o;for(n.global||(n=RegExp(n.source,ye(ur.exec(n))+"g")),n.lastIndex=0;s=n.exec(a);)var l=s.index;o=o.slice(0,void 0===l?e:l)}}else t.indexOf(w(n),e)==e||-1<(e=o.lastIndexOf(n))&&(o=o.slice(0,e));return o+i},template:hr,uniqueId:br,eval:function(t){var e=null;try{e=window.eval(t)}catch(t){}return e},lowerFirst:Di,upperFirst:Ye,camelCase:An,pascalCase:Lr,constantCase:function(t){return xr(t).replace(/ /g,"_")},dotCase:function(t){return Pi(t).replace(/ /g,".")},pathCase:function(t){return Pi(t).replace(/ /g,"/")},sentenceCase:function(t){return Ye(Pi(t))},titleCase:function(t){return Yi(An(t))},hashcode:Nr,uuid:Or,sanitizeHTML:Br,getSpellingSuggestion:zr});function Vr(t){return"string"==typeof t&&"%"===t.slice(-1)}function jr(t,e){if(null==t)return 0;var n;if("string"==typeof t){if(n=parseFloat(t),Vr(t)&&(n/=100,isFinite(n)))return n*e}else n=t;return isFinite(n)?0<n&&n<1?n*e:n:0}function Ir(t,e){var n,o=parseFloat(t);if(Number.isNaN(o))return null;if(null==e)n="[A-Za-z]*";else if(Array.isArray(e)){if(0===e.length)return null;n=e.join("|")}else"string"==typeof e&&(n=e);t=(t=new RegExp("(?:\\d+(?:\\.\\d+)*)("+n+")$").exec(t))?t[1]:null;return null===t?null:{unit:t,value:o}}function Rr(t){if("object"==typeof t){var e=0,n=0,o=0,i=0;return null!=t.vertical&&isFinite(t.vertical)&&(n=i=t.vertical),null!=t.horizontal&&isFinite(t.horizontal)&&(o=e=t.horizontal),null!=t.left&&isFinite(t.left)&&(e=t.left),null!=t.top&&isFinite(t.top)&&(n=t.top),null!=t.right&&isFinite(t.right)&&(o=t.right),null!=t.bottom&&isFinite(t.bottom)&&(i=t.bottom),{top:n,right:o,bottom:i,left:e}}e=0;return null!=t&&isFinite(t)&&(e=t),{top:e,right:e,bottom:e,left:e}}Ie=Object.freeze({__proto__:null,mod:function(t,e){return(t%e+e)%e},random:function(t,e){var n;return null==e?(e=null==t?1:t,t=0):e<t&&(n=t,t=e,e=n),Math.floor(Math.random()*(e-t+1)+t)},isPercentage:Vr,normalizePercentage:jr,parseCssNumeric:Ir,normalizeSides:Rr,isNaN:function(t){return Ei(t)&&t!=+t},isNumber:Ei,isFinite:function(t){return"number"==typeof t&&xi(t)},isInteger:wi,isSafeInteger:function(t){return wi(t)&&-9007199254740991<=t&&t<=9007199254740991},clamp:Dn,inRange:function(t,e,n){return e=T(e),void 0===n?(n=e,e=0):n=T(n),(t=t=k(t))>=yi(e=e,n=n)&&t<fi(e,n)},toFinite:T,toNumber:k,toInteger:L,toSafeInteger:function(t){return t?Pn(L(t),-9007199254740991,9007199254740991):0===t?t:0},parseInt:function(t,e,n){return e=n||null==e?0:e&&+e,Ri(ye(t).replace(Ii,""),e||0)},isNumeric:wr});function _r(t,e,n){if(n)switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2]);case 4:return t.call(e,n[0],n[1],n[2],n[3]);case 5:return t.call(e,n[0],n[1],n[2],n[3],n[4]);case 6:return t.call(e,n[0],n[1],n[2],n[3],n[4],n[5]);default:return t.apply(e,n)}return t.call(e)}function Gr(t,e){for(var n=[],o=2;o<arguments.length;o++)n[o-2]=arguments[o];return _r(t,e,n)}function Hr(t){return"object"==typeof t&&t.then&&"function"==typeof t.then}function Ur(t){return null!=t&&(t instanceof Promise||Hr(t))}function $r(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=[];if(t.forEach(function(t){Array.isArray(t)?n.push.apply(n,t):n.push(t)}),n.some(Ur)){var o=n.map(function(t){return Ur(t)?t:Promise.resolve(!1!==t)});return Promise.all(o).then(function(t){return t.reduce(function(t,e){return!1!==e&&t},!0)})}return n.every(function(t){return!1!==t})}function qr(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=$r(t);return"boolean"==typeof n?Promise.resolve(n):n}var Wr=Object.freeze({__proto__:null,isFunction:O,once:function(t){return function(t,e){var n;if("function"!=typeof e)throw new TypeError("Expected a function");return t=L(t),function(){return 0<--t&&(n=e.apply(this,arguments)),t<=1&&(e=void 0),n}}(2,t)},noop:K,debounce:$o,defer:ni,apply:_r,call:Gr,cacher:function(i,r,s){var a=[],l={};return function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=!1,o=t.join("â");return o in l?(n=!0,function(t,e){for(var n=0,o=t.length;n<o;n+=1)if(t[n]===e)return t.push(t.splice(n,1)[0])}(a,o)):(1e3<=a.length&&delete l[a.shift()],a.push(o),l[o]=_r(i,r||null,t)),s?s(l[o],n):l[o]}},isAsyncLike:Hr,isAsync:Ur,toAsyncBoolean:$r,toDeferredBoolean:qr}),Xr=/[\t\r\n\f]/g,Yr=/\S+/g,Jr=function(t){return" "+t+" "};function Zr(t){return t&&t.getAttribute&&t.getAttribute("class")||""}function Kr(t,e){if(null==t||null==e)return!1;var n=Jr(Zr(t)),e=Jr(e);return 1===t.nodeType&&n.replace(Xr," ").includes(e)}function Qr(t,e){if(null!=t&&null!=e){if("function"==typeof e)return Qr(t,e(Zr(t)));var n;"string"==typeof e&&1===t.nodeType&&(n=e.match(Yr)||[],(e=Jr(Zr(t)).replace(Xr," "))!==(e=(e=n.reduce(function(t,e){return t.indexOf(Jr(e))<0?""+t+e+" ":t},e)).trim())&&t.setAttribute("class",e))}}function ts(t,e){if(null!=t){if("function"==typeof e)return ts(t,e(Zr(t)));var n,o;e&&"string"!=typeof e||1!==t.nodeType||(o=(e||"").match(Yr)||[],n=Jr(Zr(t)).replace(Xr," "),o=o.reduce(function(t,e){e=Jr(e);return-1<t.indexOf(e)?t.replace(e," "):t},n),n!==(o=e?o.trim():"")&&t.setAttribute("class",o))}}function es(e,t,n){if(null!=e&&null!=t)if(null==n||"string"!=typeof t){if("function"==typeof t)return es(e,t(Zr(e),n),n);"string"==typeof t&&(t.match(Yr)||[]).forEach(function(t){(Kr(e,t)?ts:Qr)(e,t)})}else(n?Qr:ts)(e,t)}var ns=0;function os(){return"v"+(ns+=1)}function is(t){return null!=t.id&&""!==t.id||(t.id=os()),t.id}function rs(t){return null!=t&&"function"==typeof t.getScreenCTM&&t instanceof SVGElement}var ss={svg:"http://www.w3.org/2000/svg",xmlns:"http://www.w3.org/2000/xmlns/",xml:"http://www.w3.org/XML/1998/namespace",xlink:"http://www.w3.org/1999/xlink",xhtml:"http://www.w3.org/1999/xhtml"},as="1.1";function ls(t,e){return void 0===e&&(e=document),e.createElement(t)}function cs(t,e,n){return void 0===e&&(e=ss.xhtml),void 0===n&&(n=document),n.createElementNS(e,t)}function hs(t,e){return void 0===e&&(e=document),cs(t,ss.svg,e)}function us(t){if(t)return ps('<svg xmlns="'+ss.svg+'" xmlns:xlink="'+ss.xlink+'" version="1.1">'+t+"</svg>",{async:!1}).documentElement;t=document.createElementNS(ss.svg,"svg");return t.setAttributeNS(ss.xmlns,"xmlns:xlink",ss.xlink),t.setAttribute("version",as),t}function ps(t,e){var n;void 0===e&&(e={});try{var o=new DOMParser;null!=e.async&&(o.async=e.async),n=o.parseFromString(t,e.mimeType||"text/xml")}catch(t){n=void 0}if(!n||n.getElementsByTagName("parsererror").length)throw new Error("Invalid XML: "+t);return n}function ds(t,e){void 0===e&&(e=!0);t=t.nodeName;return e?t.toLowerCase():t.toUpperCase()}function gs(t){for(var e=0,n=t.previousSibling;n;)1===n.nodeType&&(e+=1),n=n.previousSibling;return e}function fs(t,e){return t.querySelectorAll(e)}function ys(t,e){return t.querySelector(e)}function ms(t,e,n){for(var o=t.ownerSVGElement,i=t.parentNode;i&&i!==n&&i!==o;){if(Kr(i,e))return i;i=i.parentNode}return null}function Cs(t,e){e=e&&e.parentNode;return t===e||!!(e&&1===e.nodeType&&16&t.compareDocumentPosition(e))}function vs(t){t.parentNode&&t.parentNode.removeChild(t)}function bs(t){for(;t.firstChild;)t.removeChild(t.firstChild)}function xs(e,t){(Array.isArray(t)?t:[t]).forEach(function(t){null!=t&&e.appendChild(t)})}function ws(t,e){var n=t.firstChild;return n?Es(n,e):xs(t,e)}function Es(e,t){var n=e.parentNode;n&&(Array.isArray(t)?t:[t]).forEach(function(t){null!=t&&n.insertBefore(t,e)})}function As(t,e){null!=e&&e.appendChild(t)}function Ps(e){try{return e instanceof HTMLElement}catch(t){return"object"==typeof e&&1===e.nodeType&&"object"==typeof e.style&&"object"==typeof e.ownerDocument}}function Ds(t,e){return t.getAttribute(e)}function Ms(t,e){var n=Ts(e);n.ns?t.hasAttributeNS(n.ns,n.local)&&t.removeAttributeNS(n.ns,n.local):t.hasAttribute(e)&&t.removeAttribute(e)}function Ss(t,e,n){if(null==n)return Ms(t,e);var o=Ts(e);o.ns&&"string"==typeof n?t.setAttributeNS(o.ns,e,n):"id"===e?t.id=""+n:t.setAttribute(e,""+n)}function ks(e,n){Object.keys(n).forEach(function(t){Ss(e,t,n[t])})}function Fs(t,e,n){if(null==e){for(var o=t.attributes,i={},r=0;r<o.length;r+=1)i[o[r].name]=o[r].value;return i}if("string"==typeof e&&void 0===n)return t.getAttribute(e);"object"==typeof e?ks(t,e):Ss(t,e,n)}function Ts(t){if(-1===t.indexOf(":"))return{ns:null,local:t};t=t.split(":");return{ns:ss[t[0]],local:t[1]}}function Ls(n){var o={};return Object.keys(n).forEach(function(t){var e=t.replace(/[A-Z]/g,"-$&").toLowerCase();o[e]=n[t]}),o}function Ns(t){var e={};return t.split(";").forEach(function(t){t=t.trim();!t||(t=t.split("=")).length&&(e[t[0].trim()]=t[1]?t[1].trim():"")}),e}function Os(r,s){return Object.keys(s).forEach(function(t){var e,n,o,i;"class"===t?r[t]=r[t]?r[t]+" "+s[t]:s[t]:"style"===t?(e="object"==typeof r[t],n="object"==typeof s[t],i=o=void 0,i=e&&n?(o=r[t],s[t]):e?(o=r[t],Ns(s[t])):n?(o=Ns(r[t]),s[t]):(o=Ns(r[t]),Ns(s[t])),r[t]=Os(o,i)):r[t]=s[t]}),r}function Bs(t,e,n){void 0===n&&(n={});for(var o,i,r=n.offset||0,s=[],a=[],l=null,c=0;c<t.length;c+=1){o=a[c]=t[c];for(var h=0,u=e.length;h<u;h+=1){var p=e[h],d=p.start+r,g=p.end+r;d<=c&&c<g&&("string"==typeof o?o=a[c]={t:t[c],attrs:p.attrs}:o.attrs=Os(Os({},o.attrs),p.attrs),n.includeAnnotationIndices&&(null==o.annotations&&(o.annotations=[]),o.annotations.push(h)))}(i=a[c-1])?E(o)&&E(i)?JSON.stringify(o.attrs)===JSON.stringify(i.attrs)?l.t+=o.t:(s.push(l),l=o):l=E(o)||E(i)?(s.push(l),o):(l||"")+o:l=o}return null!=l&&s.push(l),s}function zs(t){return t.replace(/ /g,"Â ")}var Vs,Ve=Object.freeze({__proto__:null,annotate:Bs,findAnnotationsAtIndex:function(t,e){return t?t.filter(function(t){return t.start<e&&e<=t.end}):[]},findAnnotationsBetweenIndexes:function(t,e,n){return t?t.filter(function(t){return e>=t.start&&e<t.end||n>t.start&&n<=t.end||t.start>=e&&t.end<n}):[]},shiftAnnotations:function(t,e,n){return t&&t.forEach(function(t){t.start<e&&t.end>=e?t.end+=n:t.start>=e&&(t.start+=n,t.end+=n)}),t},sanitize:zs});function js(t){return"data:"===t.substr(0,"data:".length)}function Is(t){for(var e=t.replace(/\s/g,""),n=(e=decodeURIComponent(e)).indexOf(","),o=e.slice(0,n),t=o.split(":")[1].split(";")[0],n=e.slice(n+1),i=0<=o.indexOf("base64")?atob(n):unescape(encodeURIComponent(n)),r=new Uint8Array(i.length),s=0;s<i.length;s+=1)r[s]=i.charCodeAt(s);return new Blob([r],{type:t})}function Rs(t,e){var n;window.navigator.msSaveBlob?window.navigator.msSaveBlob(t,e):(n=window.URL.createObjectURL(t),(t=document.createElement("a")).href=n,t.download=e,document.body.appendChild(t),t.click(),document.body.removeChild(t),window.URL.revokeObjectURL(n))}function _s(t){t=parseFloat(t);return isNaN(t)?null:t}function Gs(t){return null==t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t}function Hs(t){return Array.isArray(t)}(Re=U.JSONExt||(U.JSONExt={})).emptyObject=Object.freeze({}),Re.emptyArray=Object.freeze([]),Re.isPrimitive=Gs,Re.isArray=Hs,Re.isObject=function(t){return!Gs(t)&&!Hs(t)},Re.deepEqual=function i(t,e){if(t===e)return!0;if(Gs(t)||Gs(e))return!1;var n=Hs(t),o=Hs(e);return n===o&&(n&&o?function(t,e){if(t===e)return!0;if(t.length!==e.length)return!1;for(var n=0,o=t.length;n<o;n+=1)if(!i(t[n],e[n]))return!1;return!0}:function(t,e){if(t===e)return!0;for(var n in t)if(!(n in e))return!1;for(var n in e)if(!(n in t))return!1;for(var n in t)if(!i(t[n],e[n]))return!1;return!0})(t,e)},Re.deepCopy=function i(t){return Gs(t)?t:(Hs(t)?function(t){for(var e=new Array(t.length),n=0,o=t.length;n<o;n+=1)e[n]=i(t[n]);return e}:function(t){var e,n={};for(e in t)n[e]=i(t[e]);return n})(t)},(_e=U.DataUri||(U.DataUri={})).isDataUrl=js,_e.imageToDataUri=function(n,o){var i,t,e;n&&!js(n)?(i=function(){o(new Error("Failed to load image: "+n))},t=window.FileReader?function(t){var e;200===t.status?((e=new FileReader).onload=function(t){t=t.target.result;o(null,t)},e.onerror=i,e.readAsDataURL(t.response)):i()}:function(t){var e;200===t.status?("svg"===(e=n.split(".").pop()||"png")&&(e="svg+xml"),e="data:image/"+e+";base64,",t=new Uint8Array(t.response),t=e+btoa(function(t){for(var e=[],n=0;n<t.length;n+=32768)e.push(String.fromCharCode.apply(null,t.subarray(n,n+32768)));return e.join("")}(t)),o(null,t)):i()},(e=new XMLHttpRequest).responseType=window.FileReader?"blob":"arraybuffer",e.open("GET",n,!0),e.addEventListener("error",i),e.addEventListener("load",function(){return t(e)}),e.send()):setTimeout(function(){return o(null,n)})},_e.dataUriToBlob=Is,_e.downloadBlob=Rs,_e.downloadDataUri=function(t,e){Rs(Is(t),e)},_e.svgToDataUrl=function(n,t){void 0===t&&(t={});function e(t){return null==i&&(e=n.match(/<svg[^>]*viewBox\s*=\s*(["']?)(.+?)\1[^>]*>/i),i=e&&e[2]?e[2].replace(/\s+/," ").split(" "):null),null!=i?_s(i[t]):null;var e}function o(t){return(t=n.match(t))&&t[2]?_s(t[2]):null}var i=null,r=t.width;if(null==r&&(r=o(/<svg[^>]*width\s*=\s*(["']?)(.+?)\1[^>]*>/i)),null==r&&(r=e(2)),null==r)throw new Error("Can not parse width from svg string");t=t.height;if(null==t&&(t=o(/<svg[^>]*height\s*=\s*(["']?)(.+?)\1[^>]*>/i)),null==t&&(t=e(3)),null==t)throw new Error("Can not parse height from svg string");return"data:image/svg+xml,"+encodeURIComponent(n).replace(/'/g,"%27").replace(/"/g,"%22")};var Us={px:function(t){return t},mm:function(t){return Vs*t},cm:function(t){return Vs*t*10},in:function(t){return Vs*t*25.4},pt:function(t){return Vs*(25.4*t/72)},pc:function(t){return Vs*(25.4*t/6)}};function $s(t,e,n){e=C("<div/>").css({display:"inline-block",position:"absolute",left:-15e3,top:-15e3,width:t+(n||""),height:e+(n||"")}).appendTo(document.body),n={width:e.width()||0,height:e.height()||0};return e.remove(),n}(je=U.Unit||(U.Unit={})).measure=$s,je.toPx=function(t,e){null==Vs&&(Vs=$s("1","1","mm").width);e=e?Us[e]:null;return e?e(t):t};var qs,Ws=(null!=($e=window)&&null!=(lh=$e.requestAnimationFrame||$e.webkitRequestAnimationFrame||$e.mozRequestAnimationFrame||$e.oRequestAnimationFrame||$e.msRequestAnimationFrame)&&(lh=lh.bind($e)),null==lh&&(qs=0,lh=function(t){var e=(new Date).getTime(),n=Math.max(0,16-(e-qs)),o=setTimeout(function(){t(e+n)},n);return qs=e+n,o}),lh),Xs=(null!=(Ue=window)&&(ch=Ue.cancelAnimationFrame||Ue.webkitCancelAnimationFrame||Ue.webkitCancelRequestAnimationFrame||Ue.msCancelAnimationFrame||Ue.msCancelRequestAnimationFrame||Ue.oCancelAnimationFrame||Ue.oCancelRequestAnimationFrame||Ue.mozCancelAnimationFrame||Ue.mozCancelRequestAnimationFrame)&&(ch=ch.bind(Ue)),null==ch&&(ch=clearTimeout),ch),Ys=/-(.)/g,Js={},Zs=["Webkit","ms","Moz","O"],Ks=document?document.createElement("div").style:{};function Qs(t){var e=t.replace(Ys,function(t,e){return e.toUpperCase()});return null==Js[e]&&(t=e.charAt(0).toUpperCase()+e.slice(1),Js[e]=e in Ks?e:function(t){for(var e=0;e<Zs.length;e+=1){var n=Zs[e]+t;if(n in Ks)return n}return null}(t)),Js[e]}function ta(t,e){t=(t.ownerDocument&&t.ownerDocument.defaultView&&t.ownerDocument.defaultView.opener?t.ownerDocument.defaultView:window).getComputedStyle(t,null);return t&&e?t.getPropertyValue(e)||t[e]:t}var ea,rn=(ea=document).selection?function(){ea.selection.empty()}:window.getSelection?function(){var t=window.getSelection();t&&(t.empty?t.empty():t.removeAllRanges&&t.removeAllRanges())}:function(){},na=function(t,e){return(na=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function oa(t,e){function n(){this.constructor=t}na(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var ia=function(){return(ia=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function ra(t,e){var n={};for(i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,i=Object.getOwnPropertySymbols(t);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(t,i[o])&&(n[i[o]]=t[i[o]]);return n}function sa(t,e,n,o){var i,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,o);else for(var a=t.length-1;0<=a;a--)(i=t[a])&&(s=(r<3?i(s):3<r?i(e,n,s):i(e,n))||s);return 3<r&&s&&Object.defineProperty(e,n,s),s}function aa(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var o=Array(t),i=0,e=0;e<n;e++)for(var r=arguments[e],s=0,a=r.length;s<a;s++,i++)o[i]=r[s];return o}function la(t,e){return void 0===e&&(e=0),Number.isInteger(t)?t:+t.toFixed(e)}function ca(t,e){var n;return e=null==e?(n=null==t?1:t,0):(n=e,null==t?0:t),n<e&&(t=e,e=n,n=t),Math.floor(Math.random()*(n-e+1)+e)}function ha(t,e,n){return isNaN(t)?NaN:isNaN(e)||isNaN(n)?0:e<n?t<e?e:n<t?n:t:t<n?n:e<t?e:t}function ua(t,e){return e*Math.round(t/e)}function pa(t,e){return null!=e&&null!=t&&e.x>=t.x&&e.x<=t.x+t.width&&e.y>=t.y&&e.y<=t.y+t.height}function da(t,e){var n=t.x-e.x,e=t.y-e.y;return n*n+e*e}(nn=U.Angle||(U.Angle={})).toDeg=function(t){return 180*t/Math.PI%360},nn.toRad=function(t,e){return void 0===e&&(e=!1),(e?t:t%360)*Math.PI/180},nn.normalize=function(t){return t%360+(t<0?360:0)};var ga,fa,ya,ma,on=(Ca.prototype.valueOf=function(){return this.toJSON()},Ca.prototype.toString=function(){return JSON.stringify(this.toJSON())},Ca);function Ca(){}function va(t){return t instanceof ga?t.clone():Array.isArray(t)?new ga(t[0],t[1],t[2],t[3]):new ga(t.x,t.y,t.width,t.height)}function ba(t,e,n,o){var i=fa.call(this)||this;return i.x=null==t?0:t,i.y=null==e?0:e,i.width=null==n?0:n,i.height=null==o?0:o,i}function xa(t){return!(t instanceof ya)&&Array.isArray(t)?new ya(t[0],t[1]):new ya(t.x,t.y)}function wa(t,e){return t===e||null!=t&&null!=e&&t.x===e.x&&t.y===e.y}function Ea(t,e,n,o){void 0===o&&(o=new ya);var i=xa(t),r=xa(o),t=i.x-r.x,o=i.y-r.y,i=o*e+t*n;return new ya(t*e-o*n+r.x,i+r.y)}function Aa(t,e){var n=ma.call(this)||this;return n.x=null==t?0:t,n.y=null==e?0:e,n}U.Point=(oa(Aa,ma=on),Aa.prototype.round=function(t){return void 0===t&&(t=0),this.x=la(this.x,t),this.y=la(this.y,t),this},Aa.prototype.add=function(t,e){e=Aa.create(t,e);return this.x+=e.x,this.y+=e.y,this},Aa.prototype.update=function(t,e){e=Aa.create(t,e);return this.x=e.x,this.y=e.y,this},Aa.prototype.translate=function(t,e){e=Aa.create(t,e);return this.x+=e.x,this.y+=e.y,this},Aa.prototype.rotate=function(t,e){e=Aa.rotate(this,t,e);return this.x=e.x,this.y=e.y,this},Aa.prototype.scale=function(t,e,n){void 0===n&&(n=new Aa);n=Aa.create(n);return this.x=n.x+t*(this.x-n.x),this.y=n.y+e*(this.y-n.y),this},Aa.prototype.closest=function(t){var n=this;if(1===t.length)return Aa.create(t[0]);var o=null,i=1/0;return t.forEach(function(t){var e=n.squaredDistance(t);e<i&&(o=t,i=e)}),o?Aa.create(o):null},Aa.prototype.distance=function(t){return Math.sqrt(this.squaredDistance(t))},Aa.prototype.squaredDistance=function(t){var e=Aa.create(t),t=this.x-e.x,e=this.y-e.y;return t*t+e*e},Aa.prototype.manhattanDistance=function(t){t=Aa.create(t);return Math.abs(t.x-this.x)+Math.abs(t.y-this.y)},Aa.prototype.magnitude=function(){return Math.sqrt(this.x*this.x+this.y*this.y)||.01},Aa.prototype.theta=function(t){void 0===t&&(t=new Aa);var e=Aa.create(t),t=-(e.y-this.y),e=e.x-this.x,e=Math.atan2(t,e);return e<0&&(e=2*Math.PI+e),180*e/Math.PI},Aa.prototype.angleBetween=function(t,e){if(this.equals(t)||this.equals(e))return NaN;t=this.theta(e)-this.theta(t);return t<0&&(t+=360),t},Aa.prototype.vectorAngle=function(t){return new Aa(0,0).angleBetween(this,t)},Aa.prototype.toPolar=function(t){return this.update(Aa.toPolar(this,t)),this},Aa.prototype.changeInAngle=function(t,e,n){return void 0===n&&(n=new Aa),this.clone().translate(-t,-e).theta(n)-this.theta(n)},Aa.prototype.adhereToRect=function(t){return pa(t,this)||(this.x=Math.min(Math.max(this.x,t.x),t.x+t.width),this.y=Math.min(Math.max(this.y,t.y),t.y+t.height)),this},Aa.prototype.bearing=function(t){var e=Aa.create(t),n=U.Angle.toRad(this.y),o=U.Angle.toRad(e.y),t=this.x,e=e.x,e=U.Angle.toRad(e-t),t=Math.sin(e)*Math.cos(o),e=Math.cos(n)*Math.sin(o)-Math.sin(n)*Math.cos(o)*Math.cos(e),e=U.Angle.toDeg(Math.atan2(t,e))-22.5;return e<0&&(e+=360),["NE","E","SE","S","SW","W","NW","N"][e=parseInt(e/45,10)]},Aa.prototype.cross=function(t,e){if(null==t||null==e)return NaN;t=Aa.create(t),e=Aa.create(e);return(e.x-this.x)*(t.y-this.y)-(e.y-this.y)*(t.x-this.x)},Aa.prototype.dot=function(t){t=Aa.create(t);return this.x*t.x+this.y*t.y},Aa.prototype.diff=function(t,e){if("number"==typeof t)return new Aa(this.x-t,this.y-e);t=Aa.create(t);return new Aa(this.x-t.x,this.y-t.y)},Aa.prototype.lerp=function(t,e){t=Aa.create(t);return new Aa((1-e)*this.x+e*t.x,(1-e)*this.y+e*t.y)},Aa.prototype.normalize=function(t){void 0===t&&(t=1);t/=this.magnitude();return this.scale(t,t)},Aa.prototype.move=function(t,e){t=Aa.create(t),t=U.Angle.toRad(t.theta(this));return this.translate(Math.cos(t)*e,-Math.sin(t)*e)},Aa.prototype.reflection=function(t){return Aa.create(t).move(this,this.distance(t))},Aa.prototype.snapToGrid=function(t,e){return this.x=ua(this.x,t),this.y=ua(this.y,null==e?t:e),this},Aa.prototype.equals=function(t){t=Aa.create(t);return null!=t&&t.x===this.x&&t.y===this.y},Aa.prototype.clone=function(){return Aa.clone(this)},Aa.prototype.toJSON=function(){return Aa.toJSON(this)},Aa.prototype.serialize=function(){return this.x+" "+this.y},Aa),(cn=U.Point||(U.Point={})).isPointLike=function(t){return null!=t&&"object"==typeof t&&"number"==typeof t.x&&"number"==typeof t.y},cn.isPointData=function(t){return null!=t&&Array.isArray(t)&&2===t.length&&"number"==typeof t[0]&&"number"==typeof t[1]},(ya=U.Point||(U.Point={})).create=function(t,e){return null==t||"number"==typeof t?new ya(t,e):xa(t)},ya.clone=xa,ya.toJSON=function(t){return!(t instanceof ya)&&Array.isArray(t)?{x:t[0],y:t[1]}:{x:t.x,y:t.y}},ya.fromPolar=function(t,e,n){void 0===n&&(n=new ya);var o=Math.abs(t*Math.cos(e)),t=Math.abs(t*Math.sin(e)),n=xa(n),e=U.Angle.normalize(U.Angle.toDeg(e));return e<90?t=-t:e<180?(o=-o,t=-t):e<270&&(o=-o),new ya(n.x+o,n.y+t)},ya.toPolar=function(t,e){void 0===e&&(e=new ya);var n=xa(t),o=xa(e),t=n.x-o.x,e=n.y-o.y;return new ya(Math.sqrt(t*t+e*e),U.Angle.toRad(o.theta(n)))},ya.equals=wa,ya.equalPoints=function(t,e){if(null==t&&null!=e||null!=t&&null==e||null!=t&&null!=e&&t.length!==e.length)return!1;if(null!=t&&null!=e)for(var n=0,o=t.length;n<o;n+=1)if(!wa(t[n],e[n]))return!1;return!0},ya.random=function(t,e,n,o){return new ya(ca(t,e),ca(n,o))},ya.rotate=function(t,e,n){var o=U.Angle.toRad(U.Angle.normalize(-e)),e=Math.sin(o);return Ea(t,Math.cos(o),e,n)},ya.rotateEx=Ea,U.Rectangle=(oa(ba,fa=on),Object.defineProperty(ba.prototype,"left",{get:function(){return this.x},enumerable:!1,configurable:!0}),Object.defineProperty(ba.prototype,"top",{get:function(){return this.y},enumerable:!1,configurable:!0}),Object.defineProperty(ba.prototype,"right",{get:function(){return this.x+this.width},enumerable:!1,configurable:!0}),Object.defineProperty(ba.prototype,"botom",{get:function(){return this.y+this.height},enumerable:!1,configurable:!0}),Object.defineProperty(ba.prototype,"origin",{get:function(){return new U.Point(this.x,this.y)},enumerable:!1,configurable:!0}),Object.defineProperty(ba.prototype,"topLeft",{get:function(){return new U.Point(this.x,this.y)},enumerable:!1,configurable:!0}),Object.defineProperty(ba.prototype,"topCenter",{get:function(){return new U.Point(this.x+this.width/2,this.y)},enumerable:!1,configurable:!0}),Object.defineProperty(ba.prototype,"topRight",{get:function(){return new U.Point(this.x+this.width,this.y)},enumerable:!1,configurable:!0}),Object.defineProperty(ba.prototype,"center",{get:function(){return new U.Point(this.x+this.width/2,this.y+this.height/2)},enumerable:!1,configurable:!0}),Object.defineProperty(ba.prototype,"bottomLeft",{get:function(){return new U.Point(this.x,this.y+this.height)},enumerable:!1,configurable:!0}),Object.defineProperty(ba.prototype,"bottomCenter",{get:function(){return new U.Point(this.x+this.width/2,this.y+this.height)},enumerable:!1,configurable:!0}),Object.defineProperty(ba.prototype,"bottomRight",{get:function(){return new U.Point(this.x+this.width,this.y+this.height)},enumerable:!1,configurable:!0}),Object.defineProperty(ba.prototype,"corner",{get:function(){return new U.Point(this.x+this.width,this.y+this.height)},enumerable:!1,configurable:!0}),Object.defineProperty(ba.prototype,"rightMiddle",{get:function(){return new U.Point(this.x+this.width,this.y+this.height/2)},enumerable:!1,configurable:!0}),Object.defineProperty(ba.prototype,"leftMiddle",{get:function(){return new U.Point(this.x,this.y+this.height/2)},enumerable:!1,configurable:!0}),Object.defineProperty(ba.prototype,"topLine",{get:function(){return new La(this.topLeft,this.topRight)},enumerable:!1,configurable:!0}),Object.defineProperty(ba.prototype,"rightLine",{get:function(){return new La(this.topRight,this.bottomRight)},enumerable:!1,configurable:!0}),Object.defineProperty(ba.prototype,"bottomLine",{get:function(){return new La(this.bottomLeft,this.bottomRight)},enumerable:!1,configurable:!0}),Object.defineProperty(ba.prototype,"leftLine",{get:function(){return new La(this.topLeft,this.bottomLeft)},enumerable:!1,configurable:!0}),ba.prototype.getOrigin=function(){return this.origin},ba.prototype.getTopLeft=function(){return this.topLeft},ba.prototype.getTopCenter=function(){return this.topCenter},ba.prototype.getTopRight=function(){return this.topRight},ba.prototype.getCenter=function(){return this.center},ba.prototype.getCenterX=function(){return this.x+this.width/2},ba.prototype.getCenterY=function(){return this.y+this.height/2},ba.prototype.getBottomLeft=function(){return this.bottomLeft},ba.prototype.getBottomCenter=function(){return this.bottomCenter},ba.prototype.getBottomRight=function(){return this.bottomRight},ba.prototype.getCorner=function(){return this.corner},ba.prototype.getRightMiddle=function(){return this.rightMiddle},ba.prototype.getLeftMiddle=function(){return this.leftMiddle},ba.prototype.getTopLine=function(){return this.topLine},ba.prototype.getRightLine=function(){return this.rightLine},ba.prototype.getBottomLine=function(){return this.bottomLine},ba.prototype.getLeftLine=function(){return this.leftLine},ba.prototype.bbox=function(t){if(!t)return this.clone();var e=U.Angle.toRad(t),n=Math.abs(Math.sin(e)),t=Math.abs(Math.cos(e)),e=this.width*t+this.height*n,t=this.width*n+this.height*t;return new ba(this.x+(this.width-e)/2,this.y+(this.height-t)/2,e,t)},ba.prototype.round=function(t){return void 0===t&&(t=0),this.x=la(this.x,t),this.y=la(this.y,t),this.width=la(this.width,t),this.height=la(this.height,t),this},ba.prototype.add=function(t,e,n,o){t=ba.create(t,e,n,o),e=Math.min(this.x,t.x),n=Math.min(this.y,t.y),o=Math.max(this.x+this.width,t.x+t.width),t=Math.max(this.y+this.height,t.y+t.height);return this.x=e,this.y=n,this.width=o-e,this.height=t-n,this},ba.prototype.update=function(t,e,n,o){o=ba.create(t,e,n,o);return this.x=o.x,this.y=o.y,this.width=o.width,this.height=o.height,this},ba.prototype.inflate=function(t,e){var n=t,t=null!=e?e:t;return this.x-=n,this.y-=t,this.width+=2*n,this.height+=2*t,this},ba.prototype.snapToGrid=function(t,e){var n=this.origin.snapToGrid(t,e),e=this.corner.snapToGrid(t,e);return this.x=n.x,this.y=n.y,this.width=e.x-n.x,this.height=e.y-n.y,this},ba.prototype.translate=function(t,e){e=U.Point.create(t,e);return this.x+=e.x,this.y+=e.y,this},ba.prototype.scale=function(t,e,n){void 0===n&&(n=new U.Point);n=this.origin.scale(t,e,n);return this.x=n.x,this.y=n.y,this.width*=t,this.height*=e,this},ba.prototype.rotate=function(t,e){var n,o,i,r,s;return void 0===e&&(e=this.getCenter()),0!==t&&(r=U.Angle.toRad(t),n=Math.cos(r),o=Math.sin(r),s=this.getOrigin(),i=this.getTopRight(),t=this.getBottomRight(),r=this.getBottomLeft(),s=U.Point.rotateEx(s,n,o,e),i=U.Point.rotateEx(i,n,o,e),t=U.Point.rotateEx(t,n,o,e),r=U.Point.rotateEx(r,n,o,e),(s=new ba(s.x,s.y,0,0)).add(i.x,i.y,0,0),s.add(t.x,t.y,0,0),s.add(r.x,r.y,0,0),this.update(s)),this},ba.prototype.rotate90=function(){var t=(this.width-this.height)/2;this.x+=t,this.y-=t;t=this.width;return this.width=this.height,this.height=t,this},ba.prototype.moveAndExpand=function(t){t=ba.clone(t);return this.x+=t.x||0,this.y+=t.y||0,this.width+=t.width||0,this.height+=t.height||0,this},ba.prototype.getMaxScaleToFit=function(t,e){void 0===e&&(e=this.center);var n=ba.clone(t),o=e.x,i=e.y,r=1/0,s=1/0,a=1/0,l=1/0,c=1/0,h=1/0,u=1/0,t=1/0,e=n.topLeft;e.x<o&&(r=(this.x-o)/(e.x-o)),e.y<i&&(c=(this.y-i)/(e.y-i));e=n.bottomRight;e.x>o&&(s=(this.x+this.width-o)/(e.x-o)),e.y>i&&(h=(this.y+this.height-i)/(e.y-i));e=n.topRight;e.x>o&&(a=(this.x+this.width-o)/(e.x-o)),e.y<i&&(u=(this.y-i)/(e.y-i));n=n.bottomLeft;return n.x<o&&(l=(this.x-o)/(n.x-o)),n.y>i&&(t=(this.y+this.height-i)/(n.y-i)),{sx:Math.min(r,s,a,l),sy:Math.min(c,h,u,t)}},ba.prototype.getMaxUniformScaleToFit=function(t,e){void 0===e&&(e=this.center);e=this.getMaxScaleToFit(t,e);return Math.min(e.sx,e.sy)},ba.prototype.containsPoint=function(t,e){return pa(this,U.Point.create(t,e))},ba.prototype.containsRect=function(t,e,n,o){var i=ba.create(t,e,n,o),r=this.x,s=this.y,a=this.width,t=this.height,e=i.x,n=i.y,o=i.width,i=i.height;return 0!==a&&0!==t&&0!==o&&0!==i&&r<=e&&s<=n&&e+o<=r+a&&n+i<=s+t},ba.prototype.intersectsWithLine=function(e){var t=[this.topLine,this.rightLine,this.bottomLine,this.leftLine],n=[],o=[];return t.forEach(function(t){t=e.intersectsWithLine(t);null!==t&&o.indexOf(t.toString())<0&&(n.push(t),o.push(t.toString()))}),0<n.length?n:null},ba.prototype.intersectsWithLineFromCenterToPoint=function(t,e){var n=U.Point.clone(t),t=this.center,o=null;null!=e&&0!==e&&n.rotate(e,t);for(var i=[this.topLine,this.rightLine,this.bottomLine,this.leftLine],r=new La(t,n),s=i.length-1;0<=s;--s){var a=i[s].intersectsWithLine(r);if(null!==a){o=a;break}}return o&&null!=e&&0!==e&&o.rotate(-e,t),o},ba.prototype.intersectsWithRect=function(t,e,n,o){var i=ba.create(t,e,n,o);if(!this.isIntersectWithRect(i))return null;t=this.origin,e=this.corner,n=i.origin,o=i.corner,i=Math.max(t.x,n.x),n=Math.max(t.y,n.y);return new ba(i,n,Math.min(e.x,o.x)-i,Math.min(e.y,o.y)-n)},ba.prototype.isIntersectWithRect=function(t,e,n,o){t=ba.create(t,e,n,o),e=this.origin,n=this.corner,o=t.origin,t=t.corner;return!(t.x<=e.x||t.y<=e.y||o.x>=n.x||o.y>=n.y)},ba.prototype.normalize=function(){var t=this.x,e=this.y,n=this.width,o=this.height;return this.width<0&&(t=this.x+this.width,n=-this.width),this.height<0&&(e=this.y+this.height,o=-this.height),this.x=t,this.y=e,this.width=n,this.height=o,this},ba.prototype.union=function(t){var e=ba.clone(t),n=this.origin,o=this.corner,i=e.origin,t=e.corner,e=Math.min(n.x,i.x),i=Math.min(n.y,i.y);return new ba(e,i,Math.max(o.x,t.x)-e,Math.max(o.y,t.y)-i)},ba.prototype.getNearestSideToPoint=function(t){var e=U.Point.clone(t),n=e.x-this.x,o=this.x+this.width-e.x,i=e.y-this.y,t=n,n="left";return o<t&&(t=o,n="right"),i<t&&(t=i,n="top"),this.y+this.height-e.y<t&&(n="bottom"),n},ba.prototype.getNearestPointToPoint=function(t){t=U.Point.clone(t);if(this.containsPoint(t))switch(this.getNearestSideToPoint(t)){case"right":return new U.Point(this.x+this.width,t.y);case"left":return new U.Point(this.x,t.y);case"bottom":return new U.Point(t.x,this.y+this.height);case"top":return new U.Point(t.x,this.y)}return t.adhereToRect(this)},ba.prototype.equals=function(t){return null!=t&&t.x===this.x&&t.y===this.y&&t.width===this.width&&t.height===this.height},ba.prototype.clone=function(){return new ba(this.x,this.y,this.width,this.height)},ba.prototype.toJSON=function(){return{x:this.x,y:this.y,width:this.width,height:this.height}},ba.prototype.serialize=function(){return this.x+" "+this.y+" "+this.width+" "+this.height},ba),(U.Rectangle||(U.Rectangle={})).isRectangleLike=function(t){return null!=t&&"object"==typeof t&&"number"==typeof t.x&&"number"==typeof t.y&&"number"==typeof t.width&&"number"==typeof t.height},(ga=U.Rectangle||(U.Rectangle={})).create=function(t,e,n,o){return null==t||"number"==typeof t?new ga(t,e,n,o):va(t)},ga.clone=va,ga.fromSize=function(t){return new ga(0,0,t.width,t.height)},ga.fromPositionAndSize=function(t,e){return new ga(t.x,t.y,e.width,e.height)},ga.fromEllipse=function(t){return new ga(t.x-t.a,t.y-t.b,2*t.a,2*t.b)};var Pa,Da,Ma,Sa,ka,Fa,Ta,La=(oa(Na,Pa=on),Object.defineProperty(Na.prototype,"center",{get:function(){return new U.Point((this.start.x+this.end.x)/2,(this.start.y+this.end.y)/2)},enumerable:!1,configurable:!0}),Na.prototype.getCenter=function(){return this.center},Na.prototype.round=function(t){return void 0===t&&(t=0),this.start.round(t),this.end.round(t),this},Na.prototype.translate=function(t,e){return"number"==typeof t?(this.start.translate(t,e),this.end.translate(t,e)):(this.start.translate(t),this.end.translate(t)),this},Na.prototype.rotate=function(t,e){return this.start.rotate(t,e),this.end.rotate(t,e),this},Na.prototype.scale=function(t,e,n){return this.start.scale(t,e,n),this.end.scale(t,e,n),this},Na.prototype.length=function(){return Math.sqrt(this.squaredLength())},Na.prototype.squaredLength=function(){var t=this.start.x-this.end.x,e=this.start.y-this.end.y;return t*t+e*e},Na.prototype.setLength=function(t){var e=this.length();if(!e)return this;e=t/e;return this.scale(e,e,this.start)},Na.prototype.parallel=function(t){var e=this.clone();if(!e.isDifferentiable())return e;var n=e.start,o=e.end,i=n.clone().rotate(270,o),r=o.clone().rotate(90,n);return n.move(r,t),o.move(i,t),e},Na.prototype.vector=function(){return new U.Point(this.end.x-this.start.x,this.end.y-this.start.y)},Na.prototype.angle=function(){var t=new U.Point(this.start.x+1,this.start.y);return this.start.angleBetween(this.end,t)},Na.prototype.bbox=function(){var t=Math.min(this.start.x,this.end.x),e=Math.min(this.start.y,this.end.y),n=Math.max(this.start.x,this.end.x),o=Math.max(this.start.y,this.end.y);return new U.Rectangle(t,e,n-t,o-e)},Na.prototype.bearing=function(){return this.start.bearing(this.end)},Na.prototype.closestPoint=function(t){return this.pointAt(this.closestPointNormalizedLength(t))},Na.prototype.closestPointLength=function(t){return this.closestPointNormalizedLength(t)*this.length()},Na.prototype.closestPointTangent=function(t){return this.tangentAt(this.closestPointNormalizedLength(t))},Na.prototype.closestPointNormalizedLength=function(t){t=this.vector().dot(new Na(this.start,t).vector()),t=Math.min(1,Math.max(0,t/this.squaredLength()));return t!=t?0:t},Na.prototype.pointAt=function(t){var e=this.start,n=this.end;return t<=0?e.clone():1<=t?n.clone():e.lerp(n,t)},Na.prototype.pointAtLength=function(t){var e=this.start,n=this.end,o=!0;t<0&&(o=!1,t=-t);var i=this.length();if(i<=t)return(o?n:e).clone();i=(o?t:i-t)/i;return this.pointAt(i)},Na.prototype.divideAt=function(t){t=this.pointAt(t);return[new Na(this.start,t),new Na(t,this.end)]},Na.prototype.divideAtLength=function(t){t=this.pointAtLength(t);return[new Na(this.start,t),new Na(t,this.end)]},Na.prototype.containsPoint=function(t){var e=this.start,n=this.end;if(0!==e.cross(t,n))return!1;var o=this.length();return!(new Na(e,t).length()>o||new Na(t,n).length()>o)},Na.prototype.intersect=function(t,e){e=t.intersectsWithLine(this,e);return e?Array.isArray(e)?e:[e]:null},Na.prototype.intersectsWithLine=function(t){var e=new U.Point(this.end.x-this.start.x,this.end.y-this.start.y),n=new U.Point(t.end.x-t.start.x,t.end.y-t.start.y),o=e.x*n.y-e.y*n.x,t=new U.Point(t.start.x-this.start.x,t.start.y-this.start.y),n=t.x*n.y-t.y*n.x,t=t.x*e.y-t.y*e.x;if(0==o||n*o<0||t*o<0)return null;if(0<o){if(o<n||o<t)return null}else if(n<o||t<o)return null;return new U.Point(this.start.x+n*e.x/o,this.start.y+n*e.y/o)},Na.prototype.isDifferentiable=function(){return!this.start.equals(this.end)},Na.prototype.pointOffset=function(t){var e=U.Point.clone(t),n=this.start,t=this.end;return((t.x-n.x)*(e.y-n.y)-(t.y-n.y)*(e.x-n.x))/this.length()},Na.prototype.pointSquaredDistance=function(t,e){e=U.Point.create(t,e);return this.closestPoint(e).squaredDistance(e)},Na.prototype.pointDistance=function(t,e){e=U.Point.create(t,e);return this.closestPoint(e).distance(e)},Na.prototype.tangentAt=function(t){if(!this.isDifferentiable())return null;var e=this.start,n=this.end,t=this.pointAt(t),n=new Na(e,n);return n.translate(t.x-e.x,t.y-e.y),n},Na.prototype.tangentAtLength=function(t){if(!this.isDifferentiable())return null;var e=this.start,n=this.end,t=this.pointAtLength(t),n=new Na(e,n);return n.translate(t.x-e.x,t.y-e.y),n},Na.prototype.relativeCcw=function(t,e){var n=U.Point.create(t,e),o=n.x-this.start.x,i=n.y-this.start.y,t=this.end.x-this.start.x,e=this.end.y-this.start.y,n=o*e-i*t;return 0===n&&0<(n=o*t+i*e)&&(n=(o-=t)*t+(i-=e)*e)<0&&(n=0),n<0?-1:0<n?1:0},Na.prototype.equals=function(t){return null!=t&&this.start.x===t.start.x&&this.start.y===t.start.y&&this.end.x===t.end.x&&this.end.y===t.end.y},Na.prototype.clone=function(){return new Na(this.start,this.end)},Na.prototype.toJSON=function(){return{start:this.start.toJSON(),end:this.end.toJSON()}},Na.prototype.serialize=function(){return[this.start.serialize(),this.end.serialize()].join(" ")},Na);function Na(t,e,n,o){var i=Pa.call(this)||this;return"number"==typeof t&&"number"==typeof e?(i.start=new U.Point(t,e),i.end=new U.Point(n,o)):(i.start=U.Point.create(t),i.end=U.Point.create(e)),i}function Oa(t){var e=t.length,n=[],o=[],i=2;n[0]=t[0]/i;for(var r=1;r<e;r+=1)o[r]=1/i,i=(r<e-1?4:3.5)-o[r],n[r]=(t[r]-n[r-1])/i;for(r=1;r<e;r+=1)n[e-r-1]-=o[e-r]*n[e-r];return n}function Ba(t,e,n,o){var i=Ma.call(this)||this;return i.PRECISION=3,i.start=U.Point.create(t),i.controlPoint1=U.Point.create(e),i.controlPoint2=U.Point.create(n),i.end=U.Point.create(o),i}function za(t){var e=ka.call(this)||this;if(null!=t){if("string"==typeof t)return za.parse(t);e.points=t.map(function(t){return U.Point.create(t)})}else e.points=[];return e}function Va(t){return t instanceof Fa?t.clone():Array.isArray(t)?new Fa(t[0],t[1],t[2],t[3]):new Fa(t.x,t.y,t.a,t.b)}function ja(t,e,n,o){var i=Ta.call(this)||this;return i.x=null==t?0:t,i.y=null==e?0:e,i.a=null==n?0:n,i.b=null==o?0:o,i}U.Ellipse=(oa(ja,Ta=on),Object.defineProperty(ja.prototype,"center",{get:function(){return new U.Point(this.x,this.y)},enumerable:!1,configurable:!0}),ja.prototype.bbox=function(){return U.Rectangle.fromEllipse(this)},ja.prototype.getCenter=function(){return this.center},ja.prototype.inflate=function(t,e){e=null!=e?e:t;return this.a+=2*t,this.b+=2*e,this},ja.prototype.normalizedDistance=function(t,e){var n=U.Point.create(t,e),o=n.x-this.x,t=n.y-this.y,e=this.a,n=this.b;return o*o/(e*e)+t*t/(n*n)},ja.prototype.containsPoint=function(t,e){return this.normalizedDistance(t,e)<=1},ja.prototype.intersectsWithLine=function(t){var e=[],n=this.a,o=this.b,i=t.start,r=t.end,s=t.vector(),a=i.diff(new U.Point(this.x,this.y)),t=new U.Point(s.x/(n*n),s.y/(o*o)),o=new U.Point(a.x/(n*n),a.y/(o*o)),t=s.dot(t),s=s.dot(o),a=s*s-t*(a.dot(o)-1);if(a<0)return null;if(0<a){o=Math.sqrt(a),a=(-s-o)/t,o=(-s+o)/t;if((a<0||1<a)&&(o<0||1<o))return null;0<=a&&a<=1&&e.push(i.lerp(r,a)),0<=o&&o<=1&&e.push(i.lerp(r,o))}else{t=-s/t;if(!(0<=t&&t<=1))return null;e.push(i.lerp(r,t))}return e},ja.prototype.intersectsWithLineFromCenterToPoint=function(t,e){void 0===e&&(e=0);var n=U.Point.clone(t);e&&n.rotate(e,this.getCenter());var o=n.x-this.x,i=n.y-this.y;if(0==o)return s=this.bbox().getNearestPointToPoint(n),e?s.rotate(-e,this.getCenter()):s;var r=i/o,t=r*r,n=this.a*this.a,i=this.b*this.b,i=Math.sqrt(1/(1/n+t/i)),o=r*(i=o<0?-i:i),s=new U.Point(this.x+i,this.y+o);return e?s.rotate(-e,this.getCenter()):s},ja.prototype.tangentTheta=function(t){var e,n,o=U.Point.clone(t),i=o.x,r=o.y,s=this.a,a=this.b,l=this.bbox().center,c=l.x,h=l.y,u=i>l.x+s/2,t=i<l.x-s/2;return u||t?e=s*s/(i-c)-s*s*(r-h)*((n=i>l.x?r-30:r+30)-h)/(a*a*(i-c))+c:n=a*a/(r-h)-a*a*(i-c)*((e=r>l.y?i+30:i-30)-c)/(s*s*(r-h))+h,new U.Point(e,n).theta(o)},ja.prototype.scale=function(t,e){return this.a*=t,this.b*=e,this},ja.prototype.translate=function(t,e){e=U.Point.create(t,e);return this.x+=e.x,this.y+=e.y,this},ja.prototype.equals=function(t){return null!=t&&t.x===this.x&&t.y===this.y&&t.a===this.a&&t.b===this.b},ja.prototype.clone=function(){return new ja(this.x,this.y,this.a,this.b)},ja.prototype.toJSON=function(){return{x:this.x,y:this.y,a:this.a,b:this.b}},ja.prototype.serialize=function(){return this.x+" "+this.y+" "+this.a+" "+this.b},ja),(Fa=U.Ellipse||(U.Ellipse={})).create=function(t,e,n,o){return null==t||"number"==typeof t?new Fa(t,e,n,o):Va(t)},Fa.parse=Va,Fa.fromRect=function(t){var e=t.center;return new Fa(e.x,e.y,t.width/2,t.height/2)},U.Polyline=(oa(za,ka=on),Object.defineProperty(za.prototype,"start",{get:function(){return 0===this.points.length?null:this.points[0]},enumerable:!1,configurable:!0}),Object.defineProperty(za.prototype,"end",{get:function(){return 0===this.points.length?null:this.points[this.points.length-1]},enumerable:!1,configurable:!0}),za.prototype.scale=function(e,n,o){return void 0===o&&(o=new U.Point),this.points.forEach(function(t){return t.scale(e,n,o)}),this},za.prototype.translate=function(t,e){var n=U.Point.create(t,e);return this.points.forEach(function(t){return t.translate(n.x,n.y)}),this},za.prototype.bbox=function(){if(0===this.points.length)return new U.Rectangle;for(var t=1/0,e=-1/0,n=1/0,o=-1/0,i=this.points,r=0,s=i.length;r<s;r+=1){var a=i[r],l=a.x,a=a.y;l<t&&(t=l),e<l&&(e=l),a<n&&(n=a),o<a&&(o=a)}return new U.Rectangle(t,n,e-t,o-n)},za.prototype.closestPoint=function(t){t=this.closestPointLength(t);return this.pointAtLength(t)},za.prototype.closestPointLength=function(t){var e=this.points,n=e.length;if(0===n||1===n)return 0;for(var o=0,i=0,r=1/0,s=0,a=n-1;s<a;s+=1){var l=new La(e[s],e[s+1]),c=l.length(),h=l.closestPointNormalizedLength(t),l=l.pointAt(h).squaredDistance(t);l<r&&(r=l,i=o+h*c),o+=c}return i},za.prototype.closestPointNormalizedLength=function(t){var e=this.closestPointLength(t);if(0===e)return 0;t=this.length();return 0===t?0:e/t},za.prototype.closestPointTangent=function(t){t=this.closestPointLength(t);return this.tangentAtLength(t)},za.prototype.containsPoint=function(t){if(0===this.points.length)return!1;for(var e=U.Point.clone(t),n=e.x,o=e.y,i=this.points,r=i.length,s=r-1,a=0,l=0;l<r;l+=1){var c=i[s],h=i[l];if(e.equals(c))return!0;var u=new La(c,h);if(u.containsPoint(t))return!0;!(o<=c.y&&o>h.y||o>c.y&&o<=h.y)||0<=(h=c.x-n>h.x-n?c.x-n:h.x-n)&&(h=new U.Point(n+h,o),h=new La(t,h),u.intersectsWithLine(h)&&(a+=1)),s=l}return a%2==1},za.prototype.intersectsWithLine=function(t){for(var e=[],n=0,o=this.points.length-1;n<o;n+=1){var i=this.points[n],r=this.points[n+1],r=t.intersectsWithLine(new La(i,r));r&&e.push(r)}return 0<e.length?e:null},za.prototype.isDifferentiable=function(){for(var t=0,e=this.points.length-1;t<e;t+=1){var n=this.points[t],o=this.points[t+1];if(new La(n,o).isDifferentiable())return!0}return!1},za.prototype.length=function(){for(var t=0,e=0,n=this.points.length-1;e<n;e+=1){var o=this.points[e],i=this.points[e+1];t+=o.distance(i)}return t},za.prototype.pointAt=function(t){var e=this.points,n=e.length;if(0===n)return null;if(1===n)return e[0].clone();if(t<=0)return e[0].clone();if(1<=t)return e[n-1].clone();t=this.length()*t;return this.pointAtLength(t)},za.prototype.pointAtLength=function(t){var e=this.points,n=e.length;if(0===n)return null;if(1===n)return e[0].clone();var o=!0;t<0&&(o=!1,t=-t);for(var i=0,r=0,s=n-1;r<s;r+=1){var a=o?r:s-1-r,l=e[a],c=e[a+1],a=new La(l,c),c=l.distance(c);if(t<=i+c)return a.pointAtLength((o?1:-1)*(t-i));i+=c}return(o?e[n-1]:e[0]).clone()},za.prototype.tangentAt=function(t){var e=this.points.length;if(0===e||1===e)return null;t<0&&(t=0),1<t&&(t=1);t=this.length()*t;return this.tangentAtLength(t)},za.prototype.tangentAtLength=function(t){var e=this.points,n=e.length;if(0===n||1===n)return null;var o,i=!0;t<0&&(i=!1,t=-t);for(var r=0,s=0,a=n-1;s<a;s+=1){var l=i?s:a-1-s,c=e[l],h=e[l+1],l=new La(c,h),h=c.distance(h);if(l.isDifferentiable()){if(t<=r+h)return l.tangentAtLength((i?1:-1)*(t-r));o=l}r+=h}if(o){n=i?1:0;return o.tangentAt(n)}return null},za.prototype.simplify=function(t){void 0===t&&(t={});var e=this.points;if(e.length<3)return this;for(var n=t.threshold||0,o=0;e[o+2];){var i=o+1,r=o+2,s=e[o],a=e[i],r=e[r];new La(s,r).closestPoint(a).distance(a)<=n?e.splice(i,1):o+=1}return this},za.prototype.toHull=function(){var t=this.points,e=t.length;if(0===e)return new za;for(var n=t[0],o=1;o<e;o+=1)(t[o].y<n.y||t[o].y===n.y&&t[o].x>n.x)&&(n=t[o]);for(var i=[],o=0;o<e;o+=1){var r=n.theta(t[o]);0===r&&(r=360),i.push([t[o],o,r])}i.sort(function(t,e){var n=t[2]-e[2];return 0===n&&(n=e[1]-t[1]),n}),2<i.length&&(w=i[i.length-1],i.unshift(w));for(var s,a={},l=[],c=function(t){return t[0].toString()+"@"+t[1]};0!==i.length;){var h,u,p,d,g,f=i.pop(),y=f[0];if(!a[c(f)])for(var m=!1;!m;)l.length<2?(l.push(f),m=!0):(u=(h=l.pop())[0],(g=(d=(p=l.pop())[0]).cross(u,y))<0?(l.push(p),l.push(h),l.push(f),m=!0):0===g?(g=u.angleBetween(d,y),Math.abs(g-180)<1e-10||u.equals(y)||d.equals(u)?(a[c(h)]=u,l.push(p)):Math.abs((g+1)%360-1)<1e-10&&(l.push(p),i.push(h))):(a[c(h)]=u,l.push(p)))}2<l.length&&l.pop();for(var C=-1,v=(o=0,l.length);o<v;o+=1){var b=l[o][1];(void 0===s||b<s)&&(s=b,C=o)}for(var x,w,E=[],A=[],v=(E=(o=0)<C?(x=l.slice(C),w=l.slice(0,C),x.concat(w)):l).length;o<v;o+=1)A.push(E[o][0]);return new za(A)},za.prototype.equals=function(t){var n=this;return null!=t&&t.points.length===this.points.length&&t.points.every(function(t,e){return t.equals(n.points[e])})},za.prototype.clone=function(){return new za(this.points.map(function(t){return t.clone()}))},za.prototype.toJSON=function(){return this.points.map(function(t){return t.toJSON()})},za.prototype.serialize=function(){return this.points.map(function(t){return t.x+", "+t.y}).join(" ")},za),(Sa=U.Polyline||(U.Polyline={})).parse=function(t){t=t.trim();if(""===t)return new Sa;for(var e=[],n=t.split(/\s*,\s*|\s+/),o=0,i=n.length;o<i;o+=2)e.push({x:+n[o],y:+n[o+1]});return new Sa(e)},U.Curve=(oa(Ba,Ma=on),Ba.prototype.bbox=function(){for(var t,e,n,o,i,r,s,a=this.start,l=this.controlPoint1,c=this.controlPoint2,h=this.end,u=a.x,p=a.y,d=l.x,g=l.y,f=c.x,y=c.y,m=h.x,C=h.y,v=[],b=[],x=[[],[]],w=0;w<2;w+=1)if(i=0===w?(e=6*u-12*d+6*f,t=-3*u+9*d-9*f+3*m,3*d-3*u):(e=6*p-12*g+6*y,t=-3*p+9*g-9*y+3*C,3*g-3*p),Math.abs(t)<1e-12){if(Math.abs(e)<1e-12)continue;0<(n=-i/e)&&n<1&&b.push(n)}else o=e*e-4*i*t,i=Math.sqrt(o),o<0||(0<(o=(-e+i)/(2*t))&&o<1&&b.push(o),0<(i=(-e-i)/(2*t))&&i<1&&b.push(i));for(var E=b.length,a=E;E;)r=(s=1-(n=b[--E]))*s*s*u+3*s*s*n*d+3*s*n*n*f+n*n*n*m,x[0][E]=r,s=s*s*s*p+3*s*s*n*g+3*s*n*n*y+n*n*n*C,x[1][E]=s,v[E]={X:r,Y:s};b[a]=0,b[a+1]=1,v[a]={X:u,Y:p},v[a+1]={X:m,Y:C},x[0][a]=u,x[1][a]=p,x[0][a+1]=m,x[1][a+1]=C,b.length=a+2,x[0].length=a+2,x[1].length=a+2,v.length=a+2;l=Math.min.apply(null,x[0]),c=Math.min.apply(null,x[1]),h=Math.max.apply(null,x[0]),a=Math.max.apply(null,x[1]);return new U.Rectangle(l,c,h-l,a-c)},Ba.prototype.closestPoint=function(t,e){return void 0===e&&(e={}),this.pointAtT(this.closestPointT(t,e))},Ba.prototype.closestPointLength=function(t,e){void 0===e&&(e={});e=this.getOptions(e);return this.lengthAtT(this.closestPointT(t,e),e)},Ba.prototype.closestPointNormalizedLength=function(t,e){void 0===e&&(e={});e=this.getOptions(e),t=this.closestPointLength(t,e);if(!t)return 0;e=this.length(e);return 0===e?0:t/e},Ba.prototype.closestPointT=function(r,t){void 0===t&&(t={});var e=this.getPrecision(t),t=this.getDivisions(t),n=Math.pow(10,-e),s=null,a=0,l=0,c=0,h=0,u=0,p=null,e=t.length,d=0<e?1/e:0;for(t.forEach(function(t,e){var n=t.start.distance(r),o=t.end.distance(r),i=n+o;(null==p||i<p)&&(a=e*d,l=(e+1)*d,c=n,h=o,p=i,u=(s=t).endpointDistance())});;){var o=c?Math.abs(c-h)/c:0,i=null!=h?Math.abs(c-h)/h:0;if(o<n||i<n||!c||c<u*n||!h||h<u*n)return c<=h?a:l;var g=s.divide(.5);d/=2;var f=g[0].start.distance(r),y=g[0].end.distance(r),m=f+y,o=g[1].start.distance(r),i=g[1].end.distance(r),h=m<=o+i?(s=g[0],l-=d,c=f,y):(s=g[1],a+=d,c=o,i)}},Ba.prototype.closestPointTangent=function(t,e){return void 0===e&&(e={}),this.tangentAtT(this.closestPointT(t,e))},Ba.prototype.containsPoint=function(t,e){return void 0===e&&(e={}),this.toPolyline(e).containsPoint(t)},Ba.prototype.divideAt=function(t,e){if(void 0===e&&(e={}),t<=0)return this.divideAtT(0);if(1<=t)return this.divideAtT(1);e=this.tAt(t,e);return this.divideAtT(e)},Ba.prototype.divideAtLength=function(t,e){void 0===e&&(e={});e=this.tAtLength(t,e);return this.divideAtT(e)},Ba.prototype.divide=function(t){return this.divideAtT(t)},Ba.prototype.divideAtT=function(t){var e=this.start,n=this.controlPoint1,o=this.controlPoint2,i=this.end;if(t<=0)return[new Ba(e,e,e,e),new Ba(e,n,o,i)];if(1<=t)return[new Ba(e,n,o,i),new Ba(i,i,i,i)];var r=this.getSkeletonPoints(t),s=r.startControlPoint1,n=r.startControlPoint2,o=r.divider,t=r.dividerControlPoint1,r=r.dividerControlPoint2;return[new Ba(e,s,n,o),new Ba(o,t,r,i)]},Ba.prototype.endpointDistance=function(){return this.start.distance(this.end)},Ba.prototype.getSkeletonPoints=function(t){var e=this.start,n=this.controlPoint1,o=this.controlPoint2,i=this.end;if(t<=0)return{startControlPoint1:e.clone(),startControlPoint2:e.clone(),divider:e.clone(),dividerControlPoint1:n.clone(),dividerControlPoint2:o.clone()};if(1<=t)return{startControlPoint1:n.clone(),startControlPoint2:o.clone(),divider:i.clone(),dividerControlPoint1:i.clone(),dividerControlPoint2:i.clone()};e=new La(e,n).pointAt(t),n=new La(n,o).pointAt(t),o=new La(o,i).pointAt(t),i=new La(e,n).pointAt(t),n=new La(n,o).pointAt(t);return{startControlPoint1:e,startControlPoint2:i,divider:new La(i,n).pointAt(t),dividerControlPoint1:n,dividerControlPoint2:o}},Ba.prototype.getSubdivisions=function(t){void 0===t&&(t={});var t=this.getPrecision(t),n=[new Ba(this.start,this.controlPoint1,this.controlPoint2,this.end)];if(0===t)return n;for(var o=this.endpointDistance(),i=Math.pow(10,-t),r=0;;){var e=function(){r+=1;var e=[];n.forEach(function(t){t=t.divide(.5);e.push(t[0],t[1])});var t=e.reduce(function(t,e){return t+e.endpointDistance()},0);if(1<r&&(0!==t?(t-o)/t:0)<i)return{value:e};n=e,o=t}();if("object"==typeof e)return e.value}},Ba.prototype.length=function(t){return void 0===t&&(t={}),this.getDivisions(t).reduce(function(t,e){return t+e.endpointDistance()},0)},Ba.prototype.lengthAtT=function(t,e){if(void 0===e&&(e={}),t<=0)return 0;e=void 0===e.precision?this.PRECISION:e.precision;return this.divide(t)[0].length({precision:e})},Ba.prototype.pointAt=function(t,e){if(void 0===e&&(e={}),t<=0)return this.start.clone();if(1<=t)return this.end.clone();e=this.tAt(t,e);return this.pointAtT(e)},Ba.prototype.pointAtLength=function(t,e){void 0===e&&(e={});e=this.tAtLength(t,e);return this.pointAtT(e)},Ba.prototype.pointAtT=function(t){return t<=0?this.start.clone():1<=t?this.end.clone():this.getSkeletonPoints(t).divider},Ba.prototype.isDifferentiable=function(){var t=this.start,e=this.controlPoint1,n=this.controlPoint2,o=this.end;return!(t.equals(e)&&e.equals(n)&&n.equals(o))},Ba.prototype.tangentAt=function(t,e){if(void 0===e&&(e={}),!this.isDifferentiable())return null;t<0?t=0:1<t&&(t=1);e=this.tAt(t,e);return this.tangentAtT(e)},Ba.prototype.tangentAtLength=function(t,e){if(void 0===e&&(e={}),!this.isDifferentiable())return null;e=this.tAtLength(t,e);return this.tangentAtT(e)},Ba.prototype.tangentAtT=function(t){if(!this.isDifferentiable())return null;t<0&&(t=0),1<t&&(t=1);var e=this.getSkeletonPoints(t),n=e.startControlPoint2,t=e.dividerControlPoint1,e=e.divider,t=new La(n,t);return t.translate(e.x-n.x,e.y-n.y),t},Ba.prototype.getPrecision=function(t){return void 0===t&&(t={}),null==t.precision?this.PRECISION:t.precision},Ba.prototype.getDivisions=function(t){if(void 0===t&&(t={}),null!=t.subdivisions)return t.subdivisions;t=this.getPrecision(t);return this.getSubdivisions({precision:t})},Ba.prototype.getOptions=function(t){return void 0===t&&(t={}),{precision:this.getPrecision(t),subdivisions:this.getDivisions(t)}},Ba.prototype.tAt=function(t,e){if(void 0===e&&(e={}),t<=0)return 0;if(1<=t)return 1;e=this.getOptions(e),t=this.length(e)*t;return this.tAtLength(t,e)},Ba.prototype.tAtLength=function(t,e){void 0===e&&(e={});var n=!0;t<0&&(n=!1,t=-t);for(var o,i,r=this.getPrecision(e),s=this.getDivisions(e),e={precision:r,subdivisions:s},a=null,l=0,c=0,h=0,u=s.length,p=0<u?1/u:0,d=0;d<u;d+=1){var g=n?d:u-1-d,f=s[d],y=f.endpointDistance();if(t<=h+y){a=f,o=g*p,i=(g+1)*p,l=n?t-h:y+h-t,c=n?y+h-t:t-h;break}h+=y}if(null==a)return n?1:0;for(var m=this.length(e),C=Math.pow(10,-r);;){if((0!==m?l/m:0)<C)return o;if((0!==m?c/m:0)<C)return i;var v=void 0,b=void 0,x=a.divide(.5);p/=2;var w=x[0].endpointDistance(),E=x[1].endpointDistance(),b=l<=w?(a=x[0],i-=p,w-(v=l)):(a=x[1],o+=p,E-(v=l-w)),l=v,c=b}},Ba.prototype.toPoints=function(t){void 0===t&&(t={});var t=this.getDivisions(t),e=[t[0].start.clone()];return t.forEach(function(t){return e.push(t.end.clone())}),e},Ba.prototype.toPolyline=function(t){return void 0===t&&(t={}),new U.Polyline(this.toPoints(t))},Ba.prototype.scale=function(t,e,n){return this.start.scale(t,e,n),this.controlPoint1.scale(t,e,n),this.controlPoint2.scale(t,e,n),this.end.scale(t,e,n),this},Ba.prototype.translate=function(t,e){return"number"==typeof t?(this.start.translate(t,e),this.controlPoint1.translate(t,e),this.controlPoint2.translate(t,e),this.end.translate(t,e)):(this.start.translate(t),this.controlPoint1.translate(t),this.controlPoint2.translate(t),this.end.translate(t)),this},Ba.prototype.equals=function(t){return null!=t&&this.start.equals(t.start)&&this.controlPoint1.equals(t.controlPoint1)&&this.controlPoint2.equals(t.controlPoint2)&&this.end.equals(t.end)},Ba.prototype.clone=function(){return new Ba(this.start,this.controlPoint1,this.controlPoint2,this.end)},Ba.prototype.toJSON=function(){return{start:this.start.toJSON(),controlPoint1:this.controlPoint1.toJSON(),controlPoint2:this.controlPoint2.toJSON(),end:this.end.toJSON()}},Ba.prototype.serialize=function(){return[this.start.serialize(),this.controlPoint1.serialize(),this.controlPoint2.serialize(),this.end.serialize()].join(" ")},Ba),(Da=U.Curve||(U.Curve={})).throughPoints=function(l){if(null==l||Array.isArray(l)&&l.length<2)throw new Error("At least 2 points are required");for(var t=function(){var t=l.map(function(t){return U.Point.clone(t)}),e=[],n=[],o=t.length-1;if(1==o)return e[0]=new U.Point((2*t[0].x+t[1].x)/3,(2*t[0].y+t[1].y)/3),n[0]=new U.Point(2*e[0].x-t[0].x,2*e[0].y-t[0].y),[e,n];for(var i=[],r=1;r<o-1;r+=1)i[r]=4*t[r].x+2*t[r+1].x;i[0]=t[0].x+2*t[1].x,i[o-1]=(8*t[o-1].x+t[o].x)/2;for(var s=Oa(i),r=1;r<o-1;r+=1)i[r]=4*t[r].y+2*t[r+1].y;i[0]=t[0].y+2*t[1].y,i[o-1]=(8*t[o-1].y+t[o].y)/2;var a=Oa(i);for(r=0;r<o;r+=1)e.push(new U.Point(s[r],a[r])),r<o-1?n.push(new U.Point(2*t[r+1].x-s[r+1],2*t[r+1].y-a[r+1])):n.push(new U.Point((t[o].x+s[o-1])/2,(t[o].y+a[o-1])/2));return[e,n]}(),e=[],n=0,o=t[0].length;n<o;n+=1){var i=new U.Point(t[0][n].x,t[0][n].y),r=new U.Point(t[1][n].x,t[1][n].y);e.push(new Da(l[n],i,r,l[n+1]))}return e};var Ia,Ra,_a,Cn=(oa(Ua,Ra=on),Object.defineProperty(Ua.prototype,"end",{get:function(){return this.endPoint},enumerable:!1,configurable:!0}),Object.defineProperty(Ua.prototype,"start",{get:function(){if(null==this.previousSegment)throw new Error("Missing previous segment. (This segment cannot be the first segment of a path, or segment has not yet been added to a path.)");return this.previousSegment.end},enumerable:!1,configurable:!0}),Ua.prototype.closestPointT=function(t,e){if(this.closestPointNormalizedLength)return this.closestPointNormalizedLength(t);throw new Error("Neither `closestPointT` nor `closestPointNormalizedLength` method is implemented.")},Ua.prototype.lengthAtT=function(t,e){if(t<=0)return 0;var n=this.length();return 1<=t?n:n*t},Ua.prototype.divideAtT=function(t){if(this.divideAt)return this.divideAt(t);throw new Error("Neither `divideAtT` nor `divideAt` method is implemented.")},Ua.prototype.pointAtT=function(t){if(this.pointAt)return this.pointAt(t);throw new Error("Neither `pointAtT` nor `pointAt` method is implemented.")},Ua.prototype.tangentAtT=function(t){if(this.tangentAt)return this.tangentAt(t);throw new Error("Neither `tangentAtT` nor `tangentAt` method is implemented.")},Ua),Ga=(oa(Ha,Ia=Cn),Object.defineProperty(Ha.prototype,"type",{get:function(){return"L"},enumerable:!1,configurable:!0}),Object.defineProperty(Ha.prototype,"line",{get:function(){return new La(this.start,this.end)},enumerable:!1,configurable:!0}),Ha.prototype.bbox=function(){return this.line.bbox()},Ha.prototype.closestPoint=function(t){return this.line.closestPoint(t)},Ha.prototype.closestPointLength=function(t){return this.line.closestPointLength(t)},Ha.prototype.closestPointNormalizedLength=function(t){return this.line.closestPointNormalizedLength(t)},Ha.prototype.closestPointTangent=function(t){return this.line.closestPointTangent(t)},Ha.prototype.length=function(){return this.line.length()},Ha.prototype.divideAt=function(t){t=this.line.divideAt(t);return[new Ha(t[0]),new Ha(t[1])]},Ha.prototype.divideAtLength=function(t){t=this.line.divideAtLength(t);return[new Ha(t[0]),new Ha(t[1])]},Ha.prototype.getSubdivisions=function(){return[]},Ha.prototype.pointAt=function(t){return this.line.pointAt(t)},Ha.prototype.pointAtLength=function(t){return this.line.pointAtLength(t)},Ha.prototype.tangentAt=function(t){return this.line.tangentAt(t)},Ha.prototype.tangentAtLength=function(t){return this.line.tangentAtLength(t)},Ha.prototype.isDifferentiable=function(){return null!=this.previousSegment&&!this.start.equals(this.end)},Ha.prototype.clone=function(){return new Ha(this.end)},Ha.prototype.scale=function(t,e,n){return this.end.scale(t,e,n),this},Ha.prototype.translate=function(t,e){return"number"==typeof t?this.end.translate(t,e):this.end.translate(t),this},Ha.prototype.equals=function(t){return this.type===t.type&&this.start.equals(t.start)&&this.end.equals(t.end)},Ha.prototype.toJSON=function(){return{type:this.type,start:this.start.toJSON(),end:this.end.toJSON()}},Ha.prototype.serialize=function(){var t=this.end;return this.type+" "+t.x+" "+t.y},Ha);function Ha(t,e){var n=Ia.call(this)||this;return n.endPoint=(t instanceof La?t.end.clone():U.Point.create(t,e)).round(2),n}function Ua(){var t=null!==Ra&&Ra.apply(this,arguments)||this;return t.isVisible=!0,t.isSegment=!0,t.isSubpathStart=!1,t}(_a=Ga=Ga||{}).create=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=t.length,o=t[0];if(o instanceof La)return new _a(o);if(U.Point.isPointLike(o))return 1===n?new _a(o):t.map(function(t){return new _a(t)});if(2===n)return new _a(+t[0],+t[1]);for(var i=[],r=0;r<n;r+=2){var s=+t[r],a=+t[r+1];i.push(new _a(s,a))}return i};var $a,qa,Wa=(oa(Xa,$a=Cn),Object.defineProperty(Xa.prototype,"end",{get:function(){if(!this.subpathStartSegment)throw new Error("Missing subpath start segment. (This segment needs a subpath start segment (e.g. MoveTo), or segment has not yet been added to a path.)");return this.subpathStartSegment.end},enumerable:!1,configurable:!0}),Object.defineProperty(Xa.prototype,"type",{get:function(){return"Z"},enumerable:!1,configurable:!0}),Object.defineProperty(Xa.prototype,"line",{get:function(){return new La(this.start,this.end)},enumerable:!1,configurable:!0}),Xa.prototype.bbox=function(){return this.line.bbox()},Xa.prototype.closestPoint=function(t){return this.line.closestPoint(t)},Xa.prototype.closestPointLength=function(t){return this.line.closestPointLength(t)},Xa.prototype.closestPointNormalizedLength=function(t){return this.line.closestPointNormalizedLength(t)},Xa.prototype.closestPointTangent=function(t){return this.line.closestPointTangent(t)},Xa.prototype.length=function(){return this.line.length()},Xa.prototype.divideAt=function(t){t=this.line.divideAt(t);return[t[1].isDifferentiable()?new Ga(t[0]):this.clone(),new Ga(t[1])]},Xa.prototype.divideAtLength=function(t){t=this.line.divideAtLength(t);return[t[1].isDifferentiable()?new Ga(t[0]):this.clone(),new Ga(t[1])]},Xa.prototype.getSubdivisions=function(){return[]},Xa.prototype.pointAt=function(t){return this.line.pointAt(t)},Xa.prototype.pointAtLength=function(t){return this.line.pointAtLength(t)},Xa.prototype.tangentAt=function(t){return this.line.tangentAt(t)},Xa.prototype.tangentAtLength=function(t){return this.line.tangentAtLength(t)},Xa.prototype.isDifferentiable=function(){return!(!this.previousSegment||!this.subpathStartSegment||this.start.equals(this.end))},Xa.prototype.scale=function(){return this},Xa.prototype.translate=function(){return this},Xa.prototype.equals=function(t){return this.type===t.type&&this.start.equals(t.start)&&this.end.equals(t.end)},Xa.prototype.clone=function(){return new Xa},Xa.prototype.toJSON=function(){return{type:this.type,start:this.start.toJSON(),end:this.end.toJSON()}},Xa.prototype.serialize=function(){return this.type},Xa);function Xa(){return null!==$a&&$a.apply(this,arguments)||this}(qa=Wa=Wa||{}).create=function(){return new qa};var Ya,Ja,Za=(oa(Ka,Ya=Cn),Object.defineProperty(Ka.prototype,"start",{get:function(){throw new Error("Illegal access. Moveto segments should not need a start property.")},enumerable:!1,configurable:!0}),Object.defineProperty(Ka.prototype,"type",{get:function(){return"M"},enumerable:!1,configurable:!0}),Ka.prototype.bbox=function(){return null},Ka.prototype.closestPoint=function(){return this.end.clone()},Ka.prototype.closestPointLength=function(){return 0},Ka.prototype.closestPointNormalizedLength=function(){return 0},Ka.prototype.closestPointT=function(){return 1},Ka.prototype.closestPointTangent=function(){return null},Ka.prototype.length=function(){return 0},Ka.prototype.lengthAtT=function(){return 0},Ka.prototype.divideAt=function(){return[this.clone(),this.clone()]},Ka.prototype.divideAtLength=function(){return[this.clone(),this.clone()]},Ka.prototype.getSubdivisions=function(){return[]},Ka.prototype.pointAt=function(){return this.end.clone()},Ka.prototype.pointAtLength=function(){return this.end.clone()},Ka.prototype.pointAtT=function(){return this.end.clone()},Ka.prototype.tangentAt=function(){return null},Ka.prototype.tangentAtLength=function(){return null},Ka.prototype.tangentAtT=function(){return null},Ka.prototype.isDifferentiable=function(){return!1},Ka.prototype.scale=function(t,e,n){return this.end.scale(t,e,n),this},Ka.prototype.translate=function(t,e){return"number"==typeof t?this.end.translate(t,e):this.end.translate(t),this},Ka.prototype.clone=function(){return new Ka(this.end)},Ka.prototype.equals=function(t){return this.type===t.type&&this.end.equals(t.end)},Ka.prototype.toJSON=function(){return{type:this.type,end:this.end.toJSON()}},Ka.prototype.serialize=function(){var t=this.end;return this.type+" "+t.x+" "+t.y},Ka);function Ka(t,e){var n=Ya.call(this)||this;return n.isVisible=!1,n.isSubpathStart=!0,t instanceof La||t instanceof U.Curve?n.endPoint=t.end.clone().round(2):n.endPoint=U.Point.create(t,e).round(2),n}(Ja=Za=Za||{}).create=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=t.length,o=t[0];if(o instanceof La)return new Ja(o);if(o instanceof U.Curve)return new Ja(o);if(U.Point.isPointLike(o)){if(1===n)return new Ja(o);for(var i=[],r=0;r<n;r+=1)0===r?i.push(new Ja(t[r])):i.push(new Ga(t[r]));return i}if(2===n)return new Ja(+t[0],+t[1]);for(var s=[],r=0;r<n;r+=2){var a=+t[r],l=+t[r+1];0===r?s.push(new Ja(a,l)):s.push(new Ga(a,l))}return s};var Qa,tl,el,nl,ol,il,rl=(oa(sl,Qa=Cn),Object.defineProperty(sl.prototype,"type",{get:function(){return"C"},enumerable:!1,configurable:!0}),Object.defineProperty(sl.prototype,"curve",{get:function(){return new U.Curve(this.start,this.controlPoint1,this.controlPoint2,this.end)},enumerable:!1,configurable:!0}),sl.prototype.bbox=function(){return this.curve.bbox()},sl.prototype.closestPoint=function(t){return this.curve.closestPoint(t)},sl.prototype.closestPointLength=function(t){return this.curve.closestPointLength(t)},sl.prototype.closestPointNormalizedLength=function(t){return this.curve.closestPointNormalizedLength(t)},sl.prototype.closestPointTangent=function(t){return this.curve.closestPointTangent(t)},sl.prototype.length=function(){return this.curve.length()},sl.prototype.divideAt=function(t,e){void 0===e&&(e={});e=this.curve.divideAt(t,e);return[new sl(e[0]),new sl(e[1])]},sl.prototype.divideAtLength=function(t,e){void 0===e&&(e={});e=this.curve.divideAtLength(t,e);return[new sl(e[0]),new sl(e[1])]},sl.prototype.divideAtT=function(t){t=this.curve.divideAtT(t);return[new sl(t[0]),new sl(t[1])]},sl.prototype.getSubdivisions=function(){return[]},sl.prototype.pointAt=function(t){return this.curve.pointAt(t)},sl.prototype.pointAtLength=function(t){return this.curve.pointAtLength(t)},sl.prototype.tangentAt=function(t){return this.curve.tangentAt(t)},sl.prototype.tangentAtLength=function(t){return this.curve.tangentAtLength(t)},sl.prototype.isDifferentiable=function(){if(!this.previousSegment)return!1;var t=this.start,e=this.controlPoint1,n=this.controlPoint2,o=this.end;return!(t.equals(e)&&e.equals(n)&&n.equals(o))},sl.prototype.scale=function(t,e,n){return this.controlPoint1.scale(t,e,n),this.controlPoint2.scale(t,e,n),this.end.scale(t,e,n),this},sl.prototype.translate=function(t,e){return"number"==typeof t?(this.controlPoint1.translate(t,e),this.controlPoint2.translate(t,e),this.end.translate(t,e)):(this.controlPoint1.translate(t),this.controlPoint2.translate(t),this.end.translate(t)),this},sl.prototype.equals=function(t){return this.start.equals(t.start)&&this.end.equals(t.end)&&this.controlPoint1.equals(t.controlPoint1)&&this.controlPoint2.equals(t.controlPoint2)},sl.prototype.clone=function(){return new sl(this.controlPoint1,this.controlPoint2,this.end)},sl.prototype.toJSON=function(){return{type:this.type,start:this.start.toJSON(),controlPoint1:this.controlPoint1.toJSON(),controlPoint2:this.controlPoint2.toJSON(),end:this.end.toJSON()}},sl.prototype.serialize=function(){var t=this.controlPoint1,e=this.controlPoint2,n=this.end;return[this.type,t.x,t.y,e.x,e.y,n.x,n.y].join(" ")},sl);function sl(t,e,n,o,i,r){var s=Qa.call(this)||this;return t instanceof U.Curve?(s.controlPoint1=t.controlPoint1.clone().round(2),s.controlPoint2=t.controlPoint2.clone().round(2),s.endPoint=t.end.clone().round(2)):"number"==typeof t?(s.controlPoint1=new U.Point(t,e).round(2),s.controlPoint2=new U.Point(n,o).round(2),s.endPoint=new U.Point(i,r).round(2)):(s.controlPoint1=U.Point.create(t).round(2),s.controlPoint2=U.Point.create(e).round(2),s.endPoint=U.Point.create(n).round(2)),s}function al(t,e,n){return{x:t*Math.cos(n)-e*Math.sin(n),y:t*Math.sin(n)+e*Math.cos(n)}}function ll(t,e,n,o,i,r){return[1/3*t+2/3*n,1/3*e+2/3*o,1/3*i+2/3*n,1/3*r+2/3*o,i,r]}function cl(t){var o=function(t){var e=function(t){if(!t)return null;var e="\t\n\v\f\r Â áá ââââââââââââ¯âã\u2028\u2029",n=new RegExp("([a-z])["+e+",]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?["+e+"]*,?["+e+"]*)+)","ig"),s=new RegExp("(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)["+e+"]*,?["+e+"]*","ig"),a={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},l=[];return t.replace(n,function(t,e,n){var o=[],i=e.toLowerCase();n.replace(s,function(t,e){return e&&o.push(+e),t}),"m"===i&&2<o.length&&(l.push(aa([e],o.splice(0,2))),i="l",e="m"===e?"l":"L");for(var r=a[i];o.length>=r&&(l.push(aa([e],o.splice(0,r))),r););return t}),l}(t);if(!e||!e.length)return[["M",0,0]];for(var n=0,o=0,i=0,r=0,s=[],a=0,l=e.length;a<l;a+=1){var c=[];s.push(c);var h=e[a],u=h[0];if(u!==u.toUpperCase())switch(c[0]=u.toUpperCase(),c[0]){case"A":c[1]=h[1],c[2]=h[2],c[3]=h[3],c[4]=h[4],c[5]=h[5],c[6]=+h[6]+n,c[7]=+h[7]+o;break;case"V":c[1]=+h[1]+o;break;case"H":c[1]=+h[1]+n;break;case"M":i=+h[1]+n,r=+h[2]+o;for(var p=1,d=h.length;p<d;p+=1)c[p]=+h[p]+(p%2?n:o);break;default:for(p=1,d=h.length;p<d;p+=1)c[p]=+h[p]+(p%2?n:o)}else for(p=0,d=h.length;p<d;p+=1)c[p]=h[p];switch(c[0]){case"Z":n=+i,o=+r;break;case"H":n=c[1];break;case"V":o=c[1];break;case"M":i=c[c.length-2],r=c[c.length-1],n=c[c.length-2],o=c[c.length-1];break;default:n=c[c.length-2],o=c[c.length-1]}}return s}(t),e={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null};function n(t,e,n){var o,i;if(!t)return["C",e.x,e.y,e.x,e.y,e.x,e.y];switch(t[0]in{T:1,Q:1}||(e.qx=null,e.qy=null),t[0]){case"M":e.X=t[1],e.Y=t[2];break;case"A":return 0===parseFloat(t[1])||0===parseFloat(t[2])?["L",t[6],t[7]]:["C"].concat(function t(e,n,o,i,r,s,a,l,c,h){var u=120*Math.PI/180,p=Math.PI/180*(+r||0),d=[];h?(b=h[0],x=h[1],C=h[2],v=h[3]):(e=(f=al(e,n,-p)).x,n=f.y,1<(m=(y=(e-(l=(f=al(l,c,-p)).x))/2)*y/(o*o)+(g=(n-(c=f.y))/2)*g/(i*i))&&(o*=m=Math.sqrt(m),i*=m),f=o*o,m=i*i,C=(f=(s===a?-1:1)*Math.sqrt(Math.abs((f*m-f*g*g-m*y*y)/(f*g*g+m*y*y))))*o*g/i+(e+l)/2,v=f*-i*y/o+(n+c)/2,b=Math.asin((n-v)/i),x=Math.asin((c-v)/i),b=e<C?Math.PI-b:b,x=l<C?Math.PI-x:x,b<0&&(b=2*Math.PI+b),x<0&&(x=2*Math.PI+x),a&&x<b&&(b-=2*Math.PI),!a&&b<x&&(x-=2*Math.PI));var g,f,y,m=x-b;Math.abs(m)>u&&(g=x,f=l,y=c,x=b+u*(a&&b<x?1:-1),d=t(l=C+o*Math.cos(x),c=v+i*Math.sin(x),o,i,r,0,a,f,y,[x,g,C,v])),m=x-b;var C=Math.cos(b),v=Math.sin(b),b=Math.cos(x),x=Math.sin(x),m=Math.tan(m/4),o=4/3*(o*m),i=4/3*(i*m),m=[e,n],C=[e+o*v,n-i*C],b=[l+o*x,c-i*b],c=[l,c];if(C[0]=2*m[0]-C[0],C[1]=2*m[1]-C[1],h)return[C,b,c].concat(d);for(var w=[],E=(d=[C,b,c].concat(d).join().split(",")).length,A=0;A<E;A+=1)w[A]=A%2?al(+d[A-1],+d[A],p).y:al(+d[A],+d[A+1],p).x;return w}.apply(0,[e.x,e.y].concat(t.slice(1))));case"S":return i="C"===n||"S"===n?(o=2*e.x-e.bx,2*e.y-e.by):(o=e.x,e.y),["C",o,i].concat(t.slice(1));case"T":return"Q"===n||"T"===n?(e.qx=2*e.x-e.qx,e.qy=2*e.y-e.qy):(e.qx=e.x,e.qy=e.y),["C"].concat(ll(e.x,e.y,e.qx,e.qy,t[1],t[2]));case"Q":return e.qx=t[1],e.qy=t[2],["C"].concat(ll(e.x,e.y,t[1],t[2],t[3],t[4]));case"H":return["L"].concat(t[1],e.y);case"V":return["L"].concat(e.x,t[1])}return t}for(var i=[],r="",s=o.length,a=0;a<s;a+=1){var l="";o[a]&&(l=o[a][0]),"C"!==l&&(i[a]=l,0<a&&(r=i[a-1])),o[a]=n(o[a],e,r),"A"!==i[a]&&"C"===l&&(i[a]="C"),function(t,e){if(7<t[e].length){t[e].shift();for(var n=t[e];n.length;)i[e]="A",e+=1,t.splice(e,0,["C"].concat(n.splice(0,6)));t.splice(e,1),s=o.length}}(o,a);var c=o[a],l=c.length;e.x=c[l-2],e.y=c[l-1],e.bx=parseFloat(c[l-4])||e.x,e.by=parseFloat(c[l-3])||e.y}return o[0][0]&&"M"===o[0][0]||o.unshift(["M",0,0]),o}function hl(t){return cl(t).map(function(t){return t.map(function(t){return"string"==typeof t?t:la(t,2)})}).join(",").split(",").join(" ")}function ul(t){return t instanceof tl}function pl(t,e,n){return new tl(t,e,n)}function dl(t){return ul(t)?t.node:t}function gl(t,e,n){if(!t)throw new TypeError("Invalid element to create vector");var o;t=gl.isVector(t)?t.node:"string"==typeof t?"svg"===t.toLowerCase()?us():"<"===t[0]?(o=us(t),document.importNode(o.firstChild,!0)):document.createElementNS(ss.svg,t):t,this.node=t,e&&this.setAttributes(e),n&&this.append(n)}function fl(t){for(var e,n,o=[],i=1;i<arguments.length;i++)o[i-1]=arguments[i];if("M"===t)return(e=Za.create).call.apply(e,aa([null],o));if("L"===t)return(n=Ga.create).call.apply(n,aa([null],o));if("C"===t)return(n=rl.create).call.apply(n,aa([null],o));if("z"===t||"Z"===t)return Wa.create();throw new Error('Invalid path segment type "'+t+'"')}function yl(t){var n,o=ol.call(this)||this;return o.PRECISION=3,o.segments=[],Array.isArray(t)?t[0]instanceof La||t[0]instanceof U.Curve?(n=null,t.forEach(function(t,e){0===e&&o.appendSegment(yl.createSegment("M",t.start)),null==n||n.end.equals(t.start)||o.appendSegment(yl.createSegment("M",t.start)),t instanceof La?o.appendSegment(yl.createSegment("L",t.end)):t instanceof U.Curve&&o.appendSegment(yl.createSegment("C",t.controlPoint1,t.controlPoint2,t.end)),n=t})):t.forEach(function(t){t.isSegment&&o.appendSegment(t)}):null!=t&&(t instanceof La?(o.appendSegment(yl.createSegment("M",t.start)),o.appendSegment(yl.createSegment("L",t.end))):t instanceof U.Curve?(o.appendSegment(yl.createSegment("M",t.start)),o.appendSegment(yl.createSegment("C",t.controlPoint1,t.controlPoint2,t.end))):t instanceof U.Polyline?t.points&&t.points.length&&t.points.forEach(function(t,e){t=0===e?yl.createSegment("M",t):yl.createSegment("L",t);o.appendSegment(t)}):t.isSegment&&o.appendSegment(t)),o}(il=rl=rl||{}).create=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=t.length,o=t[0];if(o instanceof U.Curve)return new il(o);if(U.Point.isPointLike(o)){if(3===n)return new il(t[0],t[1],t[2]);for(var i=[],r=0;r<n;r+=3)i.push(new il(t[r],t[r+1],t[r+2]));return i}if(6===n)return new il(t[0],t[1],t[2],t[3],t[4],t[5]);for(var s=[],r=0;r<n;r+=6)s.push(new il(t[r],t[r+1],t[r+2],t[r+3],t[r+4],t[r+5]));return s},U.Path=(oa(yl,ol=on),Object.defineProperty(yl.prototype,"start",{get:function(){var t=this.segments,e=t.length;if(0===e)return null;for(var n=0;n<e;n+=1){var o=t[n];if(o.isVisible)return o.start}return t[e-1].end},enumerable:!1,configurable:!0}),Object.defineProperty(yl.prototype,"end",{get:function(){var t=this.segments,e=t.length;if(0===e)return null;for(var n=e-1;0<=n;--n){var o=t[n];if(o.isVisible)return o.end}return t[e-1].end},enumerable:!1,configurable:!0}),yl.prototype.moveTo=function(){for(var t,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return this.appendSegment((t=Za.create).call.apply(t,aa([null],e)))},yl.prototype.lineTo=function(){for(var t,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return this.appendSegment((t=Ga.create).call.apply(t,aa([null],e)))},yl.prototype.curveTo=function(){for(var t,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return this.appendSegment((t=rl.create).call.apply(t,aa([null],e)))},yl.prototype.close=function(){return this.appendSegment(Wa.create())},yl.prototype.bbox=function(){var t,e=this.segments,n=e.length;if(0===n)return null;for(var o=0;o<n;o+=1){var i=e[o];!i.isVisible||null!=(i=i.bbox())&&(t=t?t.union(i):i)}if(null!=t)return t;var r=e[n-1];return new U.Rectangle(r.end.x,r.end.y,0,0)},yl.prototype.appendSegment=function(t){var e=this.segments.length,n=0!==e?this.segments[e-1]:null;if(Array.isArray(t))for(var o=0,i=t.length;o<i;o+=1){var r=t[o],s=this.prepareSegment(r,n,null);this.segments.push(s),n=s}else null!=t&&t.isSegment&&(s=this.prepareSegment(t,n,null),this.segments.push(s));return this},yl.prototype.insertSegment=function(t,e){var n=this.segments.length;if(t<0&&(t=n+t+1),n<t||t<0)throw new Error("Index out of range.");var o=null,i=null;if(0!==n&&(i=1<=t?(o=this.segments[t-1]).nextSegment:(o=null,this.segments[0])),Array.isArray(e))for(var r=0,s=e.length;r<s;r+=1){var a=e[r],l=this.prepareSegment(a,o,i);this.segments.splice(t+r,0,l),o=l}else l=this.prepareSegment(e,o,i),this.segments.splice(t,0,l);return this},yl.prototype.removeSegment=function(t){var e=this.fixIndex(t),n=this.segments.splice(e,1)[0],t=n.previousSegment,e=n.nextSegment;return t&&(t.nextSegment=e),e&&(e.previousSegment=t),n.isSubpathStart&&e&&this.updateSubpathStartSegment(e),n},yl.prototype.replaceSegment=function(t,e){var n=this.fixIndex(t),o=this.segments[n],i=o.previousSegment,r=o.nextSegment,s=o.isSubpathStart;if(Array.isArray(e)){this.segments.splice(t,1);for(var a=0,l=e.length;a<l;a+=1){var c=e[a],h=this.prepareSegment(c,i,r);this.segments.splice(t+a,0,h),i=h,s&&h.isSubpathStart&&(s=!1)}}else h=this.prepareSegment(e,i,r),this.segments.splice(n,1,h),s&&h.isSubpathStart&&(s=!1);s&&r&&this.updateSubpathStartSegment(r)},yl.prototype.getSegment=function(t){t=this.fixIndex(t);return this.segments[t]},yl.prototype.fixIndex=function(t){var e=this.segments.length;if(0===e)throw new Error("Path has no segments.");for(var n=t;n<0;)n=e+n;if(e<=n||n<0)throw new Error("Index out of range.");return n},yl.prototype.segmentAt=function(t,e){void 0===e&&(e={});e=this.segmentIndexAt(t,e);return e?this.getSegment(e):null},yl.prototype.segmentAtLength=function(t,e){void 0===e&&(e={});e=this.segmentIndexAtLength(t,e);return e?this.getSegment(e):null},yl.prototype.segmentIndexAt=function(t,e){if(void 0===e&&(e={}),0===this.segments.length)return null;t=ha(t,0,1),e=this.getOptions(e),t=this.length(e)*t;return this.segmentIndexAtLength(t,e)},yl.prototype.segmentIndexAtLength=function(t,e){void 0===e&&(e={});var n=this.segments.length;if(0===n)return null;var o=!0;t<0&&(o=!1,t=-t);for(var i=this.getPrecision(e),r=this.getSubdivisions(e),s=0,a=null,l=0;l<n;l+=1){var c=o?l:n-1-l,h=this.segments[c],u=r[c],u=h.length({precision:i,subdivisions:u});if(h.isVisible){if(t<=s+u)return c;a=c}s+=u}return a},yl.prototype.getSegmentSubdivisions=function(t){void 0===t&&(t={});for(var e=this.getPrecision(t),n=[],o=0,i=this.segments.length;o<i;o+=1){var r=this.segments[o].getSubdivisions({precision:e});n.push(r)}return n},yl.prototype.updateSubpathStartSegment=function(t){for(var e=t.previousSegment,n=t;n&&!n.isSubpathStart;)n.subpathStartSegment=null!=e?e.subpathStartSegment:null,n=(e=n).nextSegment},yl.prototype.prepareSegment=function(t,e,n){t.previousSegment=e,t.nextSegment=n,null!=e&&(e.nextSegment=t),null!=n&&(n.previousSegment=t);e=t;return t.isSubpathStart&&(t.subpathStartSegment=t,e=n),null!=e&&this.updateSubpathStartSegment(e),t},yl.prototype.closestPoint=function(t,e){void 0===e&&(e={});e=this.closestPointT(t,e);return e?this.pointAtT(e):null},yl.prototype.closestPointLength=function(t,e){void 0===e&&(e={});e=this.getOptions(e),t=this.closestPointT(t,e);return t?this.lengthAtT(t,e):0},yl.prototype.closestPointNormalizedLength=function(t,e){void 0===e&&(e={});e=this.getOptions(e),t=this.closestPointLength(t,e);if(0===t)return 0;e=this.length(e);return 0===e?0:t/e},yl.prototype.closestPointT=function(t,e){if(void 0===e&&(e={}),0===this.segments.length)return null;for(var n,o=this.getPrecision(e),i=this.getSubdivisions(e),r=1/0,s=0,a=this.segments.length;s<a;s+=1){var l=this.segments[s],c=i[s];l.isVisible&&(c=l.closestPointT(t,{precision:o,subdivisions:c}),(l=da(l.pointAtT(c),t))<r&&(n={segmentIndex:s,value:c},r=l))}return n||{segmentIndex:this.segments.length-1,value:1}},yl.prototype.closestPointTangent=function(t,e){if(void 0===e&&(e={}),0===this.segments.length)return null;for(var n,o=this.getPrecision(e),i=this.getSubdivisions(e),r=1/0,s=0,a=this.segments.length;s<a;s+=1){var l,c=this.segments[s],h=i[s];c.isDifferentiable()&&(l=c.closestPointT(t,{precision:o,subdivisions:h}),(h=da(c.pointAtT(l),t))<r&&(n=c.tangentAtT(l),r=h))}return n||null},yl.prototype.containsPoint=function(t,e){void 0===e&&(e={});var n=this.toPolylines(e);if(!n)return!1;for(var o=0,i=0,r=n.length;i<r;i+=1)n[i].containsPoint(t)&&(o+=1);return o%2==1},yl.prototype.pointAt=function(t,e){if(void 0===e&&(e={}),0===this.segments.length)return null;if(t<=0)return this.start.clone();if(1<=t)return this.end.clone();e=this.getOptions(e),t=this.length(e)*t;return this.pointAtLength(t,e)},yl.prototype.pointAtLength=function(t,e){if(void 0===e&&(e={}),0===this.segments.length)return null;if(0===t)return this.start.clone();var n=!0;t<0&&(n=!1,t=-t);for(var o,i=this.getPrecision(e),r=this.getSubdivisions(e),s=0,a=0,l=this.segments.length;a<l;a+=1){var c=n?a:l-1-a,h=this.segments[c],u=r[c],c=h.length({precision:i,subdivisions:u});if(h.isVisible){if(t<=s+c)return h.pointAtLength((n?1:-1)*(t-s),{precision:i,subdivisions:u});o=h}s+=c}return o?n?o.end:o.start:this.segments[this.segments.length-1].end.clone()},yl.prototype.pointAtT=function(t){var e=this.segments,n=e.length;if(0===n)return null;var o=t.segmentIndex;if(o<0)return e[0].pointAtT(0);if(n<=o)return e[n-1].pointAtT(1);t=ha(t.value,0,1);return e[o].pointAtT(t)},yl.prototype.divideAt=function(t,e){if(void 0===e&&(e={}),0===this.segments.length)return null;t=ha(t,0,1),e=this.getOptions(e),t=this.length(e)*t;return this.divideAtLength(t,e)},yl.prototype.divideAtLength=function(t,e){if(void 0===e&&(e={}),0===this.segments.length)return null;var n=!0;t<0&&(n=!1,t=-t);for(var o,i,r,s,a=this.getPrecision(e),l=this.getSubdivisions(e),c=0,h=0,u=this.segments.length;h<u;h+=1){var p=n?h:u-1-h,d=this.getSegment(p),g={precision:a,subdivisions:l[p]},f=d.length(g);if(d.isDifferentiable()&&(r=d,s=p,t<=c+f)){i=p,o=d.divideAtLength((n?1:-1)*(t-c),g);break}c+=f}if(!r)return null;o||(i=s,v=n?1:0,o=r.divideAtT(v));var y=this.clone(),m=i;y.replaceSegment(m,o);var C=m,e=m+1,v=m+2;o[0].isDifferentiable()||(y.removeSegment(C),--e,--v);m=y.getSegment(e).start;y.insertSegment(e,yl.createSegment("M",m)),v+=1,o[1].isDifferentiable()||(y.removeSegment(v-1),--v);for(var b=v-C-1,h=v,u=y.segments.length;h<u;h+=1){var x=this.getSegment(h-b);"Z"!==(d=y.getSegment(h)).type||x.subpathStartSegment.end.equals(d.subpathStartSegment.end)||(x=yl.createSegment("L",x.end),y.replaceSegment(h,x))}return[new yl(y.segments.slice(0,e)),new yl(y.segments.slice(e))]},yl.prototype.intersectsWithLine=function(t,e){void 0===e&&(e={});var n=this.toPolylines(e);if(null==n)return null;for(var o=null,i=0,r=n.length;i<r;i+=1){var s=n[i],s=t.intersect(s);s&&(null==o&&(o=[]),Array.isArray(s)?o.push.apply(o,s):o.push(s))}return o},yl.prototype.isDifferentiable=function(){for(var t=0,e=this.segments.length;t<e;t+=1)if(this.segments[t].isDifferentiable())return!0;return!1},yl.prototype.isValid=function(){var t=this.segments;return 0===t.length||"M"===t[0].type},yl.prototype.length=function(t){if(void 0===t&&(t={}),0===this.segments.length)return 0;for(var e=this.getSubdivisions(t),n=0,o=0,i=this.segments.length;o<i;o+=1){var r=this.segments[o],s=e[o];n+=r.length({subdivisions:s})}return n},yl.prototype.lengthAtT=function(t,e){void 0===e&&(e={});var n=this.segments.length;if(0===n)return 0;var o=t.segmentIndex;if(o<0)return 0;t=ha(t.value,0,1);n<=o&&(o=n-1,t=1);for(var i=this.getPrecision(e),r=this.getSubdivisions(e),s=0,a=0;a<o;a+=1){var l=this.segments[a],c=r[a];s+=l.length({precision:i,subdivisions:c})}n=this.segments[o],e=r[o];return s+n.lengthAtT(t,{precision:i,subdivisions:e})},yl.prototype.tangentAt=function(t,e){if(void 0===e&&(e={}),0===this.segments.length)return null;t=ha(t,0,1),e=this.getOptions(e),t=this.length(e)*t;return this.tangentAtLength(t,e)},yl.prototype.tangentAtLength=function(t,e){if(void 0===e&&(e={}),0===this.segments.length)return null;var n=!0;t<0&&(n=!1,t=-t);for(var o,i=this.getPrecision(e),r=this.getSubdivisions(e),s=0,a=0,l=this.segments.length;a<l;a+=1){var c=n?a:l-1-a,h=this.segments[c],u=r[c],c=h.length({precision:i,subdivisions:u});if(h.isDifferentiable()){if(t<=s+c)return h.tangentAtLength((n?1:-1)*(t-s),{precision:i,subdivisions:u});o=h}s+=c}if(o){e=n?1:0;return o.tangentAtT(e)}return null},yl.prototype.tangentAtT=function(t){var e=this.segments.length;if(0===e)return null;var n=t.segmentIndex;if(n<0)return this.segments[0].tangentAtT(0);if(e<=n)return this.segments[e-1].tangentAtT(1);t=ha(t.value,0,1);return this.segments[n].tangentAtT(t)},yl.prototype.getPrecision=function(t){return void 0===t&&(t={}),null==t.precision?this.PRECISION:t.precision},yl.prototype.getSubdivisions=function(t){if(void 0===t&&(t={}),null!=t.segmentSubdivisions)return t.segmentSubdivisions;t=this.getPrecision(t);return this.getSegmentSubdivisions({precision:t})},yl.prototype.getOptions=function(t){return void 0===t&&(t={}),{precision:this.getPrecision(t),segmentSubdivisions:this.getSubdivisions(t)}},yl.prototype.toPoints=function(t){void 0===t&&(t={});var e=this.segments,n=e.length;if(0===n)return null;for(var o=this.getSubdivisions(t),i=[],r=[],s=0;s<n;s+=1){var a,l=e[s];l.isVisible?0<(a=o[s]).length?a.forEach(function(t){return r.push(t.start)}):r.push(l.start):0<r.length&&(r.push(e[s-1].end),i.push(r),r=[])}return 0<r.length&&(r.push(this.end),i.push(r)),i},yl.prototype.toPolylines=function(t){void 0===t&&(t={});t=this.toPoints(t);return t?t.map(function(t){return new U.Polyline(t)}):null},yl.prototype.scale=function(e,n,o){return this.segments.forEach(function(t){return t.scale(e,n,o)}),this},yl.prototype.translate=function(e,n){return"number"==typeof e?this.segments.forEach(function(t){return t.translate(e,n)}):this.segments.forEach(function(t){return t.translate(e)}),this},yl.prototype.clone=function(){var e=new yl;return this.segments.forEach(function(t){return e.appendSegment(t.clone())}),e},yl.prototype.equals=function(t){if(null==t)return!1;var e=this.segments,n=t.segments,o=e.length;if(n.length!==o)return!1;for(var i=0;i<o;i+=1){var r=e[i],s=n[i];if(r.type!==s.type||!r.equals(s))return!1}return!0},yl.prototype.toJSON=function(){return this.segments.map(function(t){return t.toJSON()})},yl.prototype.serialize=function(){if(!this.isValid())throw new Error("Invalid path segments.");return this.segments.map(function(t){return t.serialize()}).join(" ")},yl),el=U.Path||(U.Path={}),nl=new RegExp("^[\\s\\dLMCZz,.]*$"),el.isSupported=function(t){return"string"==typeof t&&nl.test(t)},el.normalize=hl,el.parse=function(t){if(!t)return new el;var e=new el,n=el.normalize(t).match(/(?:[a-zA-Z] *)(?:(?:-?\d+(?:\.\d+)?(?:e[-+]?\d+)? *,? *)|(?:-?\.\d+ *,? *))+|(?:[a-zA-Z] *)(?! |\d|-|\.)/g);if(null!=n)for(var o=0,i=n.length;o<i;o+=1){var r,s=n[o].match(/(?:[a-zA-Z])|(?:(?:-?\d+(?:\.\d+)?(?:e[-+]?\d+)?))|(?:(?:-?\.\d+))/g);null!=s&&(r=s[0],s=s.slice(1).map(function(t){return+t}),s=fl.call.apply(fl,aa([null,r],s)),e.appendSegment(s))}return e},el.createSegment=fl,U.Vector=(Object.defineProperty(gl.prototype,"type",{get:function(){return this.node.nodeName},enumerable:!1,configurable:!0}),Object.defineProperty(gl.prototype,"id",{get:function(){return this.node.id},set:function(t){this.node.id=t},enumerable:!1,configurable:!0}),gl.prototype.transform=function(t,e){return null==t?uc(this.node):(uc(this.node,t,e),this)},gl.prototype.translate=function(t,e,n){return void 0===e&&(e=0),void 0===n&&(n={}),null==t?pc(this.node):(pc(this.node,t,e,n),this)},gl.prototype.rotate=function(t,e,n,o){return void 0===o&&(o={}),null==t?dc(this.node):(dc(this.node,t,e,n,o),this)},gl.prototype.scale=function(t,e){return null==t?gc(this.node):(gc(this.node,t,e),this)},gl.prototype.getTransformToElement=function(t){t=gl.toNode(t);return nc(this.node,t)},gl.prototype.removeAttribute=function(t){return Ms(this.node,t),this},gl.prototype.getAttribute=function(t){return Ds(this.node,t)},gl.prototype.setAttribute=function(t,e){return Ss(this.node,t,e),this},gl.prototype.setAttributes=function(t){return ks(this.node,t),this},gl.prototype.attr=function(t,e){return null==t?Fs(this.node):"string"==typeof t&&void 0===e?Fs(this.node,t):("object"==typeof t?Fs(this.node,t):Fs(this.node,t,e),this)},gl.prototype.svg=function(){return this.node instanceof SVGSVGElement?this:gl.create(this.node.ownerSVGElement)},gl.prototype.defs=function(){var t=this.svg()||this,e=t.node.getElementsByTagName("defs")[0];return e?gl.create(e):gl.create("defs").appendTo(t)},gl.prototype.text=function(t,e){return void 0===e&&(e={}),vl(this.node,t,e),this},gl.prototype.tagName=function(){return ds(this.node)},gl.prototype.clone=function(){return gl.create(this.node.cloneNode(!0))},gl.prototype.remove=function(){return vs(this.node),this},gl.prototype.empty=function(){return bs(this.node),this},gl.prototype.append=function(t){return xs(this.node,gl.toNodes(t)),this},gl.prototype.appendTo=function(t){return As(this.node,gl.isVector(t)?t.node:t),this},gl.prototype.prepend=function(t){return ws(this.node,gl.toNodes(t)),this},gl.prototype.before=function(t){return Es(this.node,gl.toNodes(t)),this},gl.prototype.replace=function(t){return this.node.parentNode&&this.node.parentNode.replaceChild(gl.toNode(t),this.node),gl.create(t)},gl.prototype.first=function(){return this.node.firstChild?gl.create(this.node.firstChild):null},gl.prototype.last=function(){return this.node.lastChild?gl.create(this.node.lastChild):null},gl.prototype.get=function(t){t=this.node.childNodes[t];return t?gl.create(t):null},gl.prototype.indexOf=function(t){return Array.prototype.slice.call(this.node.childNodes).indexOf(gl.toNode(t))},gl.prototype.find=function(t){var e=[],n=fs(this.node,t);if(n)for(var o=0,i=n.length;o<i;o+=1)e.push(gl.create(n[o]));return e},gl.prototype.findOne=function(t){t=ys(this.node,t);return t?gl.create(t):null},gl.prototype.findParentByClass=function(t,e){e=ms(this.node,t,e);return e?gl.create(e):null},gl.prototype.matches=function(t){var e=this.node,n=(this.node.matches,e.matches||e.matchesSelector||e.msMatchesSelector||e.mozMatchesSelector||e.webkitMatchesSelector||e.oMatchesSelector||null);return n&&n.call(e,t)},gl.prototype.contains=function(t){return Cs(this.node,t instanceof gl?t.node:t)},gl.prototype.wrap=function(t){var e=gl.create(t),t=this.node.parentNode;return null!=t&&t.insertBefore(e.node,this.node),e.append(this)},gl.prototype.parent=function(t){var e=this;if(null==e.node.parentNode)return null;if(e=gl.create(e.node.parentNode),null==t)return e;do{if("string"==typeof t?e.matches(t):e instanceof t)return e}while(e=gl.create(e.node.parentNode));return e},gl.prototype.children=function(){for(var t=this.node.childNodes,e=[],n=0;n<t.length;n+=1)1===t[n].nodeType&&e.push(gl.create(t[n]));return e},gl.prototype.eachChild=function(t,e){for(var n=this.children(),o=0,i=n.length;o<i;o+=1)t.call(n[o],n[o],o,n),e&&n[o].eachChild(t,e);return this},gl.prototype.index=function(){return gs(this.node)},gl.prototype.hasClass=function(t){return Kr(this.node,t)},gl.prototype.addClass=function(t){return Qr(this.node,t),this},gl.prototype.removeClass=function(t){return ts(this.node,t),this},gl.prototype.toggleClass=function(t,e){return es(this.node,t,e),this},gl.prototype.toLocalPoint=function(t,e){return oc(this.node,t,e)},gl.prototype.toGeometryShape=function(){return ic(this.node)},gl.prototype.translateCenterToPoint=function(t){var e=this.getBBox({target:this.svg()}).getCenter();return this.translate(t.x-e.x,t.y-e.y),this},gl.prototype.translateAndAutoOrient=function(t,e,n){return fc(this.node,t,e,n),this},gl.prototype.animate=function(t){return rc(this.node,t)},gl.prototype.animateTransform=function(t){return sc(this.node,t)},gl.prototype.animateAlongPath=function(t,e){return cc(this.node,t,e)},gl.prototype.normalizePath=function(){return"path"===this.tagName()&&this.attr("d",U.Path.normalize(this.attr("d"))),this},gl.prototype.bbox=function(t,e){return tc(this.node,t,e)},gl.prototype.getBBox=function(t){return void 0===t&&(t={}),ec(this.node,{recursive:t.recursive,target:t.target?gl.toNode(t.target):null})},gl.prototype.sample=function(t){return void 0===t&&(t=1),this.node instanceof SVGPathElement?El(this.node,t):[]},gl.prototype.convertToPath=function(){return gl.create(Nl(this.node))},gl.prototype.convertToPathData=function(){return Ol(this.node)},gl),(tl=U.Vector||(U.Vector={})).isVector=ul,tl.create=pl,tl.createVectors=function(t){if("<"!==t[0])return[pl(t)];for(var e=us(t),n=[],o=0,i=e.childNodes.length;o<i;o+=1){var r=e.childNodes[o];n.push(pl(document.importNode(r,!0)))}return n},tl.toNode=dl,tl.toNodes=function(t){return Array.isArray(t)?t.map(dl):[dl(t)]};var ml=/em$/;function Cl(t,e){var n=parseFloat(t);return ml.test(t)?n*e:n}function vl(t,e,n){void 0===n&&(n={}),e=zs(e);var o=n.eol,i=n.textPath,r=n.textVerticalAnchor,s="middle"===r||"bottom"===r||"top"===r,a=n.x;void 0===a&&(a=t.getAttribute("x")||0);var l=n.includeAnnotationIndices,c=n.annotations;c&&!Array.isArray(c)&&(c=[c]);var h=n.lineHeight,u="auto"===h,p=u?"1.5em":h||"1em";bs(t),Fs(t,{"xml:space":"preserve",display:e||n.displayEmpty?null:"none"});var d,g,f,y,m=parseFloat(Fs(t,"font-size"));m||(m=16,(s||c)&&Fs(t,"font-size",""+m)),d=i?("string"==typeof i&&(i={d:i}),f=i,y=U.Vector.create(t),h=U.Vector.create("textPath"),(n=f.d)&&void 0===f["xlink:href"]&&(y=U.Vector.create("path").attr("d",n).appendTo(y.defs()),h.attr("xlink:href","#"+y.id)),"object"==typeof f&&h.attr(f),h.node):document.createDocumentFragment();for(var C,v=0,b=e.split("\n"),x=[],w=b.length-1,E=0;E<=w;E+=1){g=p;var A,P="v-line",D=hs("tspan"),M=void 0,S=b[E];S?c?((A=(M=function(t,e,n){for(var o=n.eol,i=n.baseSize,r=n.lineHeight,s=0,a={},l=e.length-1,c=0;c<=l;c+=1){var h,u,p,d,g=e[c],f=null;"object"==typeof g?(h=g.attrs,p=(u=U.Vector.create("tspan",h)).node,d=g.t,o&&c===l&&(d+=o),p.textContent=d,(d=h.class)&&u.addClass(d),n.includeAnnotationIndices&&u.attr("annotations",g.annotations.join(",")),void 0===(f=parseFloat(h["font-size"]))&&(f=i),f&&s<f&&(s=f)):(o&&c===l&&(g+=o),p=document.createTextNode(g||" "),i&&s<i&&(s=i)),t.appendChild(p)}return s&&(a.maxFontSize=s),r?a.lineHeight=r:s&&(a.lineHeight=1.2*s),a}(D,Bs(S,c,{offset:-v,includeAnnotationIndices:l}),{eol:E!==w&&o,baseSize:m,lineHeight:u?null:p,includeAnnotationIndices:l})).lineHeight)&&u&&0!==E&&(g=A),0===E&&(C=.8*M.maxFontSize)):(o&&E!==w&&(S+=o),D.textContent=S):(D.textContent="-",P+=" v-empty-line",(A=D.style).fillOpacity=0,A.strokeOpacity=0,c&&(M={})),M&&x.push(M),0<E&&D.setAttribute("dy",g),(0<E||i)&&D.setAttribute("x",a),D.className.baseVal=P,d.appendChild(D),v+=S.length+1}if(s)if(c)g=function(t,e,n,o){if(!Array.isArray(e))return 0;var i=e.length;if(!i)return 0;for(var r=e[0],s=Cl(r.maxFontSize,n)||n,a=0,l=Cl(o,n),c=1;c<i;c+=1)a+=Cl((r=e[c]).lineHeight,n)||l;var h,o=Cl(r.maxFontSize,n)||n;switch(t){case"middle":h=s/2-.15*o-a/2;break;case"bottom":h=-.25*o-a;break;default:h=.8*s}return h}(r,x,m,p);else if("top"===r)g="0.8em";else{s=void 0;switch(0<w?(s=parseFloat(p)||1,s*=w,ml.test(p)||(s/=m)):s=0,r){case"middle":g=.3-s/2+"em";break;case"bottom":g=-s-.3+"em"}}else 0===r?g="0em":r?g=r:(g=0,null==t.getAttribute("y")&&t.setAttribute("y",""+(C||"0.8em")));d.firstChild.setAttribute("dy",g),t.appendChild(d)}function bl(t,e,n,o){void 0===n&&(n={}),void 0===o&&(o={});var i=e.width,r=e.height,e=o.svgDocument||hs("svg"),s=hs("tspan"),a=hs("text");Fs(a,n),xs(a,s);var l=document.createTextNode("");a.style.opacity="0",a.style.display="block",s.style.display="block",s.appendChild(l),e.appendChild(a),o.svgDocument||document.body.appendChild(e);for(var c,h=o.eol||"\n",u=o.separator||" ",p=o.hyphen?new RegExp(o.hyphen):/[^\w\d]/,d=t.split(u),g=[],f=[],y=0,m=0,C=d.length;y<C;y+=1){var v,b=d[y];if(b)if(h&&0<=b.indexOf(h))if(1<b.length){for(var x=b.split(h),w=0,E=x.length-1;w<E;w+=1)x.splice(2*w+1,0,h);d.splice.apply(d,aa([y,1],x.filter(function(t){return""!==t}))),--y,C=d.length}else f[m+=1]="";else{if(l.data=f[m]?f[m]+" "+b:b,s.getComputedTextLength()<=i)f[m]=l.data,(P||c)&&(g[m]=!0,m+=1,c=P=0);else{if(!f[m]||P){var A=!!P,P=b.length-1;if(A||!P){if(!P){if(!f[m]){f=[];break}d.splice(y,2,b+d[y+1]),--C,g[m]=!0,m+=1,--y;continue}d[y]=b.substring(0,P),d[y+1]=b.substring(P)+d[y+1]}else c?(d.splice(y,2,d[y]+d[y+1]),c=0):(-1<(A=b.search(p))&&A!==b.length-1&&0!==A&&(c=A+1,P=0),d.splice(y,1,b.substring(0,c||P),b.substring(c||P)),C+=1),m&&!g[m-1]&&--m;--y;continue}m+=1,--y}if(void 0!==r)if(void 0===v&&(b=void 0,v=(b="auto"===n.lineHeight?{value:1.5,unit:"em"}:Ir(n.lineHeight,["em"])||{value:1,unit:"em"}).value,"em"===b.unit&&(v*=a.getBBox().height)),v*f.length>r){var D=Math.floor(r/v)-1;f.splice(1+D);var M=o.ellipsis;if(!M||D<0)break;"string"!=typeof M&&(M="â¦");var S=f[D];if(!S)break;var k=S.length,F=void 0,T=void 0;do{if(T=S[k],F=S.substring(0,k),T?T.match(u)&&(F+=T):F+="string"==typeof u?u:" ",F+=M,l.data=F,s.getComputedTextLength()<=i){f[D]=F;break}}while(0<=--k);break}}}return o.svgDocument?e.removeChild(a):document.body.removeChild(e),f.join(h)}var xl=.551784;function wl(t,e,n){void 0===n&&(n=NaN);e=t.getAttribute(e);if(null==e)return n;e=parseFloat(e);return isNaN(e)?n:e}function El(t,e){void 0===e&&(e=1);for(var n,o=t.getTotalLength(),i=[],r=0;r<o;)n=t.getPointAtLength(r),i.push({distance:r,x:n.x,y:n.y}),r+=e;return i}function Al(t){return["M",wl(t,"x1"),wl(t,"y1"),"L",wl(t,"x2"),wl(t,"y2")].join(" ")}function Pl(t){t=Sl(t);return 0===t.length?null:Ml(t)+" Z"}function Dl(t){t=Sl(t);return 0===t.length?null:Ml(t)}function Ml(t){return"M "+t.map(function(t){return t.x+" "+t.y}).join(" L")}function Sl(t){var e=[],n=t.points;if(n)for(var o=0,i=n.numberOfItems;o<i;o+=1)e.push(n.getItem(o));return e}function kl(t){var e=wl(t,"cx",0),n=wl(t,"cy",0),o=wl(t,"r"),t=o*xl;return["M",e,n-o,"C",e+t,n-o,e+o,n-t,e+o,n,"C",e+o,n+t,e+t,n+o,e,n+o,"C",e-t,n+o,e-o,n+t,e-o,n,"C",e-o,n-t,e-t,n-o,e,n-o,"Z"].join(" ")}function Fl(t){var e=wl(t,"cx",0),n=wl(t,"cy",0),o=wl(t,"rx"),i=wl(t,"ry")||o,r=o*xl,t=i*xl;return["M",e,n-i,"C",e+r,n-i,e+o,n-t,e+o,n,"C",e+o,n+t,e+r,n+i,e,n+i,"C",e-r,n+i,e-o,n+t,e-o,n,"C",e-o,n-t,e-r,n-i,e,n-i,"Z"].join(" ")}function Tl(t){return Ll({x:wl(t,"x",0),y:wl(t,"y",0),width:wl(t,"width",0),height:wl(t,"height",0),rx:wl(t,"rx",0),ry:wl(t,"ry",0)})}function Ll(t){var e=t.x,n=t.y,o=t.width,i=t.height,r=Math.min(t.rx||t["top-rx"]||0,o/2),s=Math.min(t.rx||t["bottom-rx"]||0,o/2),a=Math.min(t.ry||t["top-ry"]||0,i/2),t=Math.min(t.ry||t["bottom-ry"]||0,i/2);return(r||s||a||t?["M",e,n+a,"v",i-a-t,"a",s,t,0,0,0,s,t,"h",o-2*s,"a",s,t,0,0,0,s,-t,"v",-(i-t-a),"a",r,a,0,0,0,-r,-a,"h",-(o-2*r),"a",r,a,0,0,0,-r,a,"Z"]:["M",e,n,"H",e+o,"V",n+i,"H",e,"V",n,"Z"]).join(" ")}function Nl(t){var e=hs("path");Fs(e,Fs(t));t=Ol(t);return t&&e.setAttribute("d",t),e}function Ol(t){var e=t.tagName.toLowerCase();switch(e){case"path":return t.getAttribute("d");case"line":return Al(t);case"polygon":return Pl(t);case"polyline":return Dl(t);case"ellipse":return Fl(t);case"circle":return kl(t);case"rect":return Tl(t)}throw new Error('"'+e+'" cannot be converted to svg path element.')}function Bl(t,e,n,o){var i=2*Math.PI-1e-6,r=t,s=e,a=n,t=o;t<a&&(l=a,a=t,t=l);var e=t-a,n=e<Math.PI?"0":"1",o=Math.cos(a),l=Math.sin(a),a=Math.cos(t),t=Math.sin(t);return i<=e?r?"M0,"+s+"A"+s+","+s+" 0 1,1 0,"+-s+"A"+s+","+s+" 0 1,1 0,"+s+"M0,"+r+"A"+r+","+r+" 0 1,0 0,"+-r+"A"+r+","+r+" 0 1,0 0,"+r+"Z":"M0,"+s+"A"+s+","+s+" 0 1,1 0,"+-s+"A"+s+","+s+" 0 1,1 0,"+s+"Z":r?"M"+s*o+","+s*l+"A"+s+","+s+" 0 "+n+",1 "+s*a+","+s*t+"L"+r*a+","+r*t+"A"+r+","+r+" 0 "+n+",0 "+r*o+","+r*l+"Z":"M"+s*o+","+s*l+"A"+s+","+s+" 0 "+n+",1 "+s*a+","+s*t+"L0,0Z"}var zl=hs("svg"),Vl=/(\w+)\(([^,)]+),?([^)]+)?\)/gi,jl=/[ ,]+/,Il=/^(\w+)\((.*)\)/;function Rl(t,e){var n=zl.createSVGPoint();return n.x=t,n.y=e,n}function _l(t){var e=zl.createSVGMatrix();if(null!=t){var n,o=t,i=e;for(n in o)i[n]=o[n]}return e}function Gl(t){return null!=t?(t instanceof DOMMatrix||(t=_l(t)),zl.createSVGTransformFromMatrix(t)):zl.createSVGTransform()}function Hl(t){var e=_l(),n=null!=t&&t.match(Vl);if(!n)return e;for(var o=0,i=n.length;o<i;o+=1){var r=n[o].match(Il);if(r){var s,a,l=void 0,c=void 0,h=void 0,u=_l(),p=r[2].split(jl);switch(r[1].toLowerCase()){case"scale":s=parseFloat(p[0]),a=void 0===p[1]?s:parseFloat(p[1]),u=u.scaleNonUniform(s,a);break;case"translate":l=parseFloat(p[0]),c=parseFloat(p[1]),u=u.translate(l,c);break;case"rotate":h=parseFloat(p[0]),l=parseFloat(p[1])||0,c=parseFloat(p[2])||0,u=0!==l||0!==c?u.translate(l,c).rotate(h).translate(-l,-c):u.rotate(h);break;case"skewx":h=parseFloat(p[0]),u=u.skewX(h);break;case"skewy":h=parseFloat(p[0]),u=u.skewY(h);break;case"matrix":u.a=parseFloat(p[0]),u.b=parseFloat(p[1]),u.c=parseFloat(p[2]),u.d=parseFloat(p[3]),u.e=parseFloat(p[4]),u.f=parseFloat(p[5]);break;default:continue}e=e.multiply(u)}}return e}function Ul(t){t=t||{};return"matrix("+(null!=t.a?t.a:1)+","+(null!=t.b?t.b:0)+","+(null!=t.c?t.c:0)+","+(null!=t.d?t.d:1)+","+(null!=t.e?t.e:0)+","+(null!=t.f?t.f:0)+")"}function $l(t){var e,n,o,i;t&&(r=jl,0<=t.trim().indexOf("matrix")?(e=[(i=Wl(Hl(t))).translateX,i.translateY],n=[i.rotation],o=[i.scaleX,i.scaleY],i=[],0===e[0]&&0===e[1]||i.push("translate("+e.join(",")+")"),1===o[0]&&1===o[1]||i.push("scale("+o.join(",")+")"),0!==n[0]&&i.push("rotate("+n[0]+")"),t=i.join(" ")):((i=t.match(/translate\((.*?)\)/))&&(e=i[1].split(r)),(i=t.match(/rotate\((.*?)\)/))&&(n=i[1].split(r)),(i=t.match(/scale\((.*?)\)/))&&(o=i[1].split(r))));var r=o&&o[0]?parseFloat(o[0]):1;return{raw:t||"",translation:{tx:e&&e[0]?parseInt(e[0],10):0,ty:e&&e[1]?parseInt(e[1],10):0},rotation:{angle:n&&n[0]?parseInt(n[0],10):0,cx:n&&n[1]?parseInt(n[1],10):void 0,cy:n&&n[2]?parseInt(n[2],10):void 0},scale:{sx:r,sy:o&&o[1]?parseFloat(o[1]):r}}}function ql(t,e){return{x:e.x*t.a+e.y*t.c,y:e.x*t.b+e.y*t.d}}function Wl(t){var e=ql(t,{x:0,y:1}),n=ql(t,{x:1,y:0}),e=180/Math.PI*Math.atan2(e.y,e.x)-90;return{skewX:e,skewY:180/Math.PI*Math.atan2(n.y,n.x),translateX:t.e,translateY:t.f,scaleX:Math.sqrt(t.a*t.a+t.b*t.b),scaleY:Math.sqrt(t.c*t.c+t.d*t.d),rotation:e}}function Xl(t){var e,n,o,i;return t?(e=null==t.a?1:t.a,i=null==t.d?1:t.d,n=t.b,o=t.c):e=i=1,{sx:n?Math.sqrt(e*e+n*n):e,sy:o?Math.sqrt(o*o+i*i):i}}function Yl(t){var e={x:0,y:1};return t&&(e=ql(t,e)),{angle:U.Angle.normalize(U.Angle.toDeg(Math.atan2(e.y,e.x))-90)}}function Jl(t){return{tx:t&&t.e||0,ty:t&&t.f||0}}function Zl(t,e){e=Rl(t.x,t.y).matrixTransform(e);return new U.Point(e.x,e.y)}function Kl(t,e){return new La(Zl(t.start,e),Zl(t.end,e))}function Ql(t,e){var n=zl.createSVGPoint();n.x=t.x,n.y=t.y;var o=n.matrixTransform(e);n.x=t.x+t.width,n.y=t.y;var i=n.matrixTransform(e);n.x=t.x+t.width,n.y=t.y+t.height;var r=n.matrixTransform(e);n.x=t.x,n.y=t.y+t.height;var s=n.matrixTransform(e),t=Math.min(o.x,i.x,r.x,s.x),n=Math.max(o.x,i.x,r.x,s.x),e=Math.min(o.y,i.y,r.y,s.y),s=Math.max(o.y,i.y,r.y,s.y);return new U.Rectangle(t,e,n-t,s-e)}function tc(e,t,n){var o,i=e.ownerSVGElement;if(!i)return new U.Rectangle(0,0,0,0);try{o=e.getBBox()}catch(t){o={x:e.clientLeft,y:e.clientTop,width:e.clientWidth,height:e.clientHeight}}return t?U.Rectangle.create(o):Ql(o,nc(e,n||i))}function ec(e,t){if(void 0===t&&(t={}),!e.ownerSVGElement||!rs(e)){if(Ps(e)){var n=hc(e),o=n.left,i=n.top,r=n.width,n=n.height;return new U.Rectangle(o,i,r,n)}return new U.Rectangle(0,0,0,0)}var s=t.target;if(!t.recursive){try{p=e.getBBox()}catch(t){p={x:e.clientLeft,y:e.clientTop,width:e.clientWidth,height:e.clientHeight}}return s?Ql(p,nc(e,s)):U.Rectangle.create(p)}var a=e.childNodes,l=a.length;if(0===l)return ec(e,{target:s});s=s||e;for(var c=0;c<l;c+=1)var h=a[c],u=0===h.childNodes.length?ec(h,{target:s}):ec(h,{target:s,recursive:!0}),p=p?p.union(u):u;return p}function nc(t,e){if(rs(e)&&rs(t)){e=e.getScreenCTM(),t=t.getScreenCTM();if(e&&t)return e.inverse().multiply(t)}return _l()}function oc(t,e,n){var o=t instanceof SVGSVGElement?t:t.ownerSVGElement,i=o.createSVGPoint();i.x=e,i.y=n;try{var r=o.getScreenCTM(),s=i.matrixTransform(r.inverse()),r=nc(t,o).inverse();return s.matrixTransform(r)}catch(t){return i}}function ic(e){function t(t){return t=(t=e.getAttribute(t))?parseFloat(t):0,isNaN(t)?0:t}switch(e instanceof SVGElement&&e.nodeName.toLowerCase()){case"rect":return new U.Rectangle(t("x"),t("y"),t("width"),t("height"));case"circle":return new U.Ellipse(t("cx"),t("cy"),t("r"),t("r"));case"ellipse":return new U.Ellipse(t("cx"),t("cy"),t("rx"),t("ry"));case"polyline":var n=Sl(e);return new U.Polyline(n);case"polygon":return 1<(n=Sl(e)).length&&n.push(n[0]),new U.Polyline(n);case"path":n=e.getAttribute("d");return U.Path.isSupported(n)||(n=U.Path.normalize(n)),U.Path.parse(n);case"line":return new La(t("x1"),t("y1"),t("x2"),t("y2"))}return ec(e)}function rc(t,e){return ac(t,e,"animate")}function sc(t,e){return ac(t,e,"animateTransform")}function ac(t,e,n){var o=hs(n);t.appendChild(o);try{return lc(o,e)}catch(t){}return function(){}}function lc(t,e){var n=e.start,o=e.complete,i=e.repeat;Fs(t,ra(e,["start","complete","repeat"])),n&&t.addEventListener("beginEvent",n),o&&t.addEventListener("endEvent",o),i&&t.addEventListener("repeatEvent",i);var r=t;return r.beginElement(),function(){return r.endElement()}}function cc(t,e,n){var o=is(n),i=hs("animateMotion"),n=hs("mpath");Fs(n,{"xlink:href":"#"+o}),i.appendChild(n),t.appendChild(i);try{return lc(i,e)}catch(t){if("fake"===document.documentElement.getAttribute("smiling")){var r=i;r.animators=[];var s=window,n=r.getAttribute("id");n&&(s.id2anim[n]=r);for(var a=s.getTargets(r),l=0,c=a.length;l<c;l+=1){var h=a[l],h=new s.Animator(r,h,l);s.animators.push(h),(r.animators[l]=h).register()}}}return function(){}}function hc(t){var e=0,n=0,o=0,i=0;if(t){for(var r=t;r;)e+=r.offsetLeft,n+=r.offsetTop,(r=r.offsetParent)&&(e+=parseInt(ta(r,"borderLeft"),10),n+=parseInt(ta(r,"borderTop"),10));o=t.offsetWidth,i=t.offsetHeight}return{left:e,top:n,width:o,height:i}}function uc(t,e,n){if(void 0===n&&(n={}),null==e)return Hl(Fs(t,"transform"));n.absolute?t.setAttribute("transform",Ul(e)):(t=t.transform,e=Gl(e),t.baseVal.appendItem(e))}function pc(t,e,n,o){void 0===n&&(n=0),void 0===o&&(o={});var i=Fs(t,"transform"),r=$l(i);if(null==e)return r.translation;i=(i=r.raw).replace(/translate\([^)]*\)/g,"").trim();n="translate("+(o.absolute?e:r.translation.tx+e)+","+(o.absolute?n:r.translation.ty+n)+")";t.setAttribute("transform",(n+" "+i).trim())}function dc(t,e,n,o,i){void 0===i&&(i={});var r=Fs(t,"transform"),s=$l(r);if(null==e)return s.rotation;r=(r=s.raw).replace(/rotate\([^)]*\)/g,"").trim(),e%=360;o="rotate("+(i.absolute?e:s.rotation.angle+e)+(null!=n&&null!=o?","+n+","+o:"")+")";t.setAttribute("transform",(r+" "+o).trim())}function gc(t,e,n){var o=Fs(t,"transform"),i=$l(o);if(null==e)return i.scale;n=null==n?e:n,o=(o=i.raw).replace(/scale\([^)]*\)/g,"").trim();n="scale("+e+","+n+")";t.setAttribute("transform",(o+" "+n).trim())}function fc(t,e,n,o){var i=U.Point.create(e),r=U.Point.create(n);o=o||(t instanceof SVGSVGElement?t:t.ownerSVGElement);var s=gc(t);t.setAttribute("transform","");var a=ec(t,{target:o}).scale(s.sx,s.sy),l=Gl();l.setTranslate(-a.x-a.width/2,-a.y-a.height/2);e=Gl(),n=i.angleBetween(r,i.clone().translate(1,0));n&&e.setRotate(n,0,0);n=Gl(),a=i.clone().move(r,a.width/2);n.setTranslate(2*i.x-a.x,2*i.y-a.y);a=nc(t,o),o=Gl();o.setMatrix(n.matrix.multiply(e.matrix.multiply(l.matrix.multiply(a.scale(s.sx,s.sy))))),t.setAttribute("transform",Ul(o.matrix))}var yc,mn=U.Vector.isVector,hn=U.Vector.create,un=U.Vector.createVectors,vn=Object.freeze({__proto__:null,requestAnimationFrame:Ws,cancelAnimationFrame:Xs,getAttribute:Ds,removeAttribute:Ms,setAttribute:Ss,setAttributes:ks,attr:Fs,qualifyAttr:Ts,kebablizeAttrs:Ls,styleToObject:Ns,mergeAttrs:Os,uniqueId:os,ensureId:is,isSVGGraphicsElement:rs,ns:ss,svgVersion:as,createElement:ls,createElementNS:cs,createSvgElement:hs,createSvgDocument:us,parseXML:ps,tagName:ds,index:gs,find:fs,findOne:ys,findParentByClass:ms,contains:Cs,remove:vs,empty:bs,append:xs,prepend:ws,before:Es,appendTo:As,isHTMLElement:Ps,getClass:Zr,hasClass:Kr,addClass:Qr,removeClass:ts,toggleClass:es,setPrefixedStyle:function(t,e,n){var o=Qs(e);null!=o&&(t[o]=n),t[e]=n},getComputedStyle:ta,hasScrollbars:function(t){t=ta(t);return null!=t&&("scroll"===t.overflow||"auto"===t.overflow)},getVendorPrefixedName:Qs,clearSelection:rn,text:vl,breakText:bl,KAPPA:xl,sample:El,lineToPathData:Al,polygonToPathData:Pl,polylineToPathData:Dl,getPointsFromSvgElement:Sl,circleToPathData:kl,ellipseToPathData:Fl,rectangleToPathData:Tl,rectToPathData:Ll,toPath:Nl,toPathData:Ol,createSlicePathData:Bl,bbox:tc,getBBox:ec,getTransformToElement:nc,toLocalPoint:oc,toGeometryShape:ic,getIntersection:function(t,e,n){var o=t instanceof SVGSVGElement?t:t.ownerSVGElement,i=ec(n=n||o),r=i.getCenter();if(!i.intersectsWithLineFromCenterToPoint(e))return null;var s=null,a=t.tagName.toLowerCase();if("rect"===a){var l=new U.Rectangle(parseFloat(t.getAttribute("x")||"0"),parseFloat(t.getAttribute("y")||"0"),parseFloat(t.getAttribute("width")||"0"),parseFloat(t.getAttribute("height")||"0")),c=nc(t,n),i=Wl(c),o=o.createSVGTransform();o.setRotate(-i.rotation,r.x,r.y);c=Ql(l,o.matrix.multiply(c)),s=U.Rectangle.create(c).intersectsWithLineFromCenterToPoint(e,i.rotation)}else if("path"===a||"polygon"===a||"polyline"===a||"circle"===a||"ellipse"===a){for(var h=El("path"===a?t:Nl(t)),u=1/0,p=[],d=0,g=h.length;d<g;d+=1){var f=h[d],y=(y=Rl(f.x,f.y)).matrixTransform(nc(t,n)),m=U.Point.create(y),y=m.distance(r),m=1.1*m.distance(e),y=y+m;y<u?(u=y,p=[{sample:f,refDistance:m}]):y<u+1&&p.push({sample:f,refDistance:m})}p.sort(function(t,e){return t.refDistance-e.refDistance}),p[0]&&(s=U.Point.create(p[0].sample))}return s},animate:rc,animateTransform:sc,animateAlongPath:cc,getBoundingOffsetRect:hc,createSVGPoint:Rl,createSVGMatrix:_l,createSVGTransform:Gl,transformStringToMatrix:Hl,matrixToTransformString:Ul,parseTransformString:$l,decomposeMatrix:Wl,matrixToScale:Xl,matrixToRotation:Yl,matrixToTranslation:Jl,transformPoint:Zl,transformLine:Kl,transformPolyline:function(t,e){t=t instanceof U.Polyline?t.points:t;return Array.isArray(t)||(t=[]),new U.Polyline(t.map(function(t){return Zl(t,e)}))},transformRectangle:Ql,transform:uc,translate:pc,rotate:dc,scale:gc,translateAndAutoOrient:fc,isVector:mn,createVector:hn,createVectors:un});function mc(t){return new yc(aa(Ec(t),[1]))}function Cc(t){t=t.toLowerCase().match(/^rgba?\(([\s\.,0-9]+)\)/);if(t){t=t[1].split(/\s*,\s*/).map(function(t){return parseInt(t,10)});return new yc(t)}return null}function vc(t,e,n){n<0&&++n,1<n&&--n;var o=6*n;return o<1?t+(e-t)*o:2*n<1?e:3*n<2?t+(e-t)*(2/3-n)*6:t}function bc(t){var e=t.toLowerCase().match(/^hsla?\(([\s\.,0-9]+)\)/);if(e){var n=e[2].split(/\s*,\s*/),o=(parseFloat(n[0])%360+360)%360/360,t=parseFloat(n[1])/100,e=parseFloat(n[2])/100,n=null==n[3]?1:parseInt(n[3],10);return new yc(xc(o,t,e,n))}return null}function xc(t,e,n,o){var i=Array.isArray(t)?t[0]:t,e=Array.isArray(t)?t[1]:e,n=Array.isArray(t)?t[2]:n,o=Array.isArray(t)?t[3]:o,e=n<=.5?n*(e+1):n+e-n*e,n=2*n-e;return[256*vc(n,e,i+1/3),256*vc(n,e,i),256*vc(n,e,i-1/3),null==o?1:o]}function wc(t){return new yc(Math.round(256*Math.random()),Math.round(256*Math.random()),Math.round(256*Math.random()),t?void 0:parseFloat(Math.random().toFixed(2)))}function Ec(t){var t=0===t.indexOf("#")?t:"#"+t,e=Number("0x"+t.substr(1));if(4!==t.length&&7!==t.length||isNaN(e))throw new Error("Invalid hex color.");var n=4===t.length?4:8,o=(1<<n)-1,t=["b","g","r"].map(function(){var t=e&o;return e>>=n,4==n?17*t:t});return[t[2],t[1],t[0]]}function Ac(t,e,n){function o(t){return t.length<2?"0"+t:t}return""+o(t.toString(16))+o(e.toString(16))+o(n.toString(16))}function Pc(t,e){if("string"==typeof t){var n="#"===t[0],o=parseInt(n?t.substr(1):t,16),i=Dn((o>>16)+e,0,255),r=Dn((o>>8&255)+e,0,255);return(n?"#":"")+(Dn((255&o)+e,0,255)|r<<8|i<<16).toString(16)}e=Ec(Pc(Ac(t[0],t[1],t[2]),e));return[e[0],e[1],e[2],t[3]]}function Dc(t,e,n,o){return null==t?this.set(255,255,255,1):"number"==typeof t?this.set(t,e,n,o):"string"==typeof t?Dc.fromString(t)||this:Array.isArray(t)?this.set(t):void this.set(t.r,t.g,t.b,null==t.a?1:t.a)}U.Color=(Dc.prototype.blend=function(t,e,n){this.set(t.r+(e.r-t.r)*n,t.g+(e.g-t.g)*n,t.b+(e.b-t.b)*n,t.a+(e.a-t.a)*n)},Dc.prototype.lighten=function(t){t=Dc.lighten(this.toArray(),t);this.r=t[0],this.g=t[1],this.b=t[2],this.a=t[3]},Dc.prototype.darken=function(t){this.lighten(-t)},Dc.prototype.set=function(t,e,n,o){var i=Array.isArray(t)?t[0]:t,e=Array.isArray(t)?t[1]:e,n=Array.isArray(t)?t[2]:n,o=Array.isArray(t)?t[3]:o;return this.r=Math.round(Dn(i,0,255)),this.g=Math.round(Dn(e,0,255)),this.b=Math.round(Dn(n,0,255)),this.a=null==o?1:Dn(o,0,1),this},Dc.prototype.toHex=function(){var e=this;return"#"+["r","g","b"].map(function(t){t=e[t].toString(16);return t.length<2?"0"+t:t}).join("")},Dc.prototype.toRGBA=function(){return this.toArray()},Dc.prototype.toHSLA=function(){return Dc.rgba2hsla(this.r,this.g,this.b,this.a)},Dc.prototype.toCSS=function(t){var e=this.r+","+this.g+","+this.b+",";return t?"rgb("+e+")":"rgba("+e+","+this.a+")"},Dc.prototype.toGrey=function(){return Dc.makeGrey(Math.round((this.r+this.g+this.b)/3),this.a)},Dc.prototype.toArray=function(){return[this.r,this.g,this.b,this.a]},Dc.prototype.toString=function(){return this.toCSS()},Dc),(yc=U.Color||(U.Color={})).fromArray=function(t){return new yc(t)},yc.fromHex=mc,yc.fromRGBA=Cc,yc.fromHSLA=bc,yc.fromString=function(t){if(t.startsWith("#"))return mc(t);if(t.startsWith("rgb"))return Cc(t);var e=yc.named[t];return e?mc(e):bc(t)},yc.makeGrey=function(t,e){return yc.fromArray([t,t,t,e])},yc.rgba2hsla=function(t,e,n,o){var i=Array.isArray(t)?t[0]:t,r=Array.isArray(t)?t[1]:e,s=Array.isArray(t)?t[2]:n,a=Array.isArray(t)?t[3]:o,l=Math.max(i,r,s),c=Math.min(i,r,s),e=(l+c)/2,n=0,t=0;if(c!==l){o=l-c,t=.5<e?o/(2-l-c):o/(l+c);switch(l){case i:n=(r-s)/o+(r<s?6:0);break;case r:n=(s-i)/o+2;break;case s:n=(i-r)/o+4}n/=6}return[n,t,e,null==a?1:a]},yc.hsla2rgba=xc,yc.random=wc,yc.randomHex=function(){for(var t="#",e=0;e<6;e+=1)t+="0123456789ABCDEF"[Math.floor(16*Math.random())];return t},yc.randomRGBA=function(t){return wc(t).toString()},yc.invert=function(t,e){if("string"==typeof t){var n="#"===t[0],o=Ec(t),i=o[0],r=o[1],o=o[2];return e?186<.299*i+.587*r+.114*o?"#000000":"#ffffff":(n?"#":"")+Ac(255-i,255-r,255-o)}i=t[0],r=t[1],o=t[2],t=t[3];return e?186<.299*i+.587*r+.114*o?[0,0,0,t]:[255,255,255,t]:[255-i,255-r,255-o,t]},yc.lighten=Pc,yc.darken=function(t,e){return Pc(t,-e)},(U.Color||(U.Color={})).named={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",burntsienna:"#ea7e5d",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};var Mc,ln=(Sc.prototype.on=function(t,e,n){return null==e||(this.listeners[t]||(this.listeners[t]=[]),this.listeners[t].push(e,n)),this},Sc.prototype.once=function(n,o,i){var r=this,s=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return r.off(n,s),Mc.call([o,i],t)};return this.on(n,s,this)},Sc.prototype.off=function(t,o,i){if(!(t||o||i))return this.listeners={},this;var r=this.listeners;return(t?[t]:Object.keys(r)).forEach(function(t){var e=r[t];if(e)if(o||i)for(var n=e.length-2;0<=n;n-=2)o&&e[n]!==o||i&&e[n+1]!==i||e.splice(n,2);else delete r[t]}),this},Sc.prototype.trigger=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var o=!0;"*"===t||null!=(i=this.listeners[t])&&(o=Mc.call(i,e));var i=this.listeners["*"];return null!=i?$r([o,Mc.call(i,aa([t],e))]):o},Sc.prototype.emit=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return this.trigger.apply(this,aa([t],e))},Sc);function Sc(){this.listeners={}}function kc(){}(Mc||(Mc={})).call=function(t,e){for(var n=[],o=0;o<t.length;o+=2){var i=_r(t[o],t[o+1],Array.isArray(e)?e:[e]);n.push(i)}return $r(n)},U.Disposable=(Object.defineProperty(kc.prototype,"disposed",{get:function(){return!0===this._disposed},enumerable:!1,configurable:!0}),kc.prototype.dispose=function(){this._disposed=!0},kc),(U.Disposable||(U.Disposable={})).dispose=function(){return function(t,e,n){var o=n.value,i=t.__proto__;n.value=function(){this.disposed||(o.call(this),i.dispose.call(this))}}};var Fc,Tc,gn=(Object.defineProperty(Lc.prototype,"disposed",{get:function(){return!this.callback},enumerable:!1,configurable:!0}),Lc.prototype.dispose=function(){var t;this.callback&&(t=this.callback,this.callback=null,t())},Lc);function Lc(t){this.callback=t}function Nc(){return null!==Tc&&Tc.apply(this,arguments)||this}function Oc(){this.isDisposed=!1,this.items=new Set}U.DisposableSet=(Object.defineProperty(Oc.prototype,"disposed",{get:function(){return this.isDisposed},enumerable:!1,configurable:!0}),Oc.prototype.dispose=function(){this.isDisposed||(this.isDisposed=!0,this.items.forEach(function(t){t.dispose()}),this.items.clear())},Oc.prototype.contains=function(t){return this.items.has(t)},Oc.prototype.add=function(t){this.items.add(t)},Oc.prototype.remove=function(t){this.items.delete(t)},Oc.prototype.clear=function(){this.items.clear()},Oc),(Fc=U.DisposableSet||(U.DisposableSet={})).from=function(t){var e=new Fc;return t.forEach(function(t){e.add(t)}),e},U.Basecoat=(oa(Nc,Tc=ln),Nc),(U.Basecoat||(U.Basecoat={})).dispose=U.Disposable.dispose,Er(U.Basecoat,U.Disposable);var Bc,zc,sn=(oa(Ic,zc=U.Basecoat),Object.defineProperty(Ic.prototype,"disabled",{get:function(){return!0===this._disabled},enumerable:!1,configurable:!0}),Ic.prototype.enable=function(){delete this._disabled},Ic.prototype.disable=function(){this._disabled=!0},Ic),Vc=(oa(jc,Bc=U.Disposable),jc.prototype.clear=function(){this.map=new WeakMap,this.arr=[]},jc.prototype.has=function(t){return this.map.has(t)},jc.prototype.get=function(t){return this.map.get(t)},jc.prototype.set=function(t,e){this.map.set(t,e),this.arr.push(t)},jc.prototype.delete=function(t){var e=this.arr.indexOf(t);0<=e&&this.arr.splice(e,1);e=this.map.get(t);return this.map.delete(t),e},jc.prototype.each=function(n){var o=this;this.arr.forEach(function(t){var e=o.map.get(t);n(e,t)})},jc.prototype.dispose=function(){this.clear()},sa([U.Disposable.dispose()],jc.prototype,"dispose",null),jc);function jc(){var t=Bc.call(this)||this;return t.clear(),t}function Ic(){return null!==zc&&zc.apply(this,arguments)||this}function Rc(t){var e,t=+t;return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(e=t-1.5/2.75)*e+.75:t<2.5/2.75?7.5625*(e=t-2.25/2.75)*e+.9375:7.5625*(e=t-2.625/2.75)*e+.984375}function _c(t){return 1-Rc(1-t)}function Gc(t){void 0===t&&(t={}),this.comparator=t.comparator||Gc.defaultComparator,this.index={},this.data=t.data||[],this.heapify()}U.PriorityQueue=(Gc.prototype.isEmpty=function(){return 0===this.data.length},Gc.prototype.insert=function(t,e,n){t={priority:t,value:e},e=this.data.length-1;return n&&(t.id=n,this.index[n]=e),this.data.push(t),this.bubbleUp(e),this},Gc.prototype.peek=function(){return this.data[0]?this.data[0].value:null},Gc.prototype.peekPriority=function(){return this.data[0]?this.data[0].priority:null},Gc.prototype.updatePriority=function(t,e){var n=this.index[t];if(void 0===n)throw new Error("Node with id '"+t+"' was not found in the heap.");var o=this.data,t=o[n].priority,t=this.comparator(e,t);t<0?(o[n].priority=e,this.bubbleUp(n)):0<t&&(o[n].priority=e,this.bubbleDown(n))},Gc.prototype.remove=function(){var t=this.data,e=t[0],n=t.pop();return delete this.index[t.length],0<t.length&&((t[0]=n).id&&(this.index[n.id]=0),this.bubbleDown(0)),e?e.value:null},Gc.prototype.heapify=function(){for(var t=0;t<this.data.length;t+=1)this.bubbleUp(t)},Gc.prototype.bubbleUp=function(t){for(var e,n,o=this.data,i=t;0<i&&(n=i-1>>>1,this.comparator(o[i].priority,o[n].priority)<0);){e=o[n],o[n]=o[i];var r=o[i].id;null!=r&&(this.index[r]=n),o[i]=e,null!=(r=o[i].id)&&(this.index[r]=i),i=n}},Gc.prototype.bubbleDown=function(t){for(var e=this.data,n=e.length-1,o=t;;){var i=1+(o<<1),r=1+i,s=o;if(i<=n&&this.comparator(e[i].priority,e[s].priority)<0&&(s=i),r<=n&&this.comparator(e[r].priority,e[s].priority)<0&&(s=r),s===o)break;i=e[s];e[s]=e[o];r=e[o].id;null!=r&&(this.index[r]=s),e[o]=i,null!=(r=e[o].id)&&(this.index[r]=o),o=s}},Gc),(U.PriorityQueue||(U.PriorityQueue={})).defaultComparator=function(t,e){return t-e},(U.Dijkstra||(U.Dijkstra={})).run=function(t,e,n){void 0===n&&(n=function(t,e){return 1});var o,i={},r={},s={},a=new U.PriorityQueue;for(o in i[e]=0,t)o!==e&&(i[o]=1/0),a.insert(i[o],o,o);for(;!a.isEmpty();){var l=a.remove();s[l]=!0;for(var c,h=t[l]||[],u=0;u<h.length;u+=1)s[o=h[u]]||(c=i[l]+n(l,o))<i[o]&&(i[o]=c,r[o]=l,a.updatePriority(o,c))}return r},(dn=U.Timing||(U.Timing={})).linear=function(t){return t},dn.quad=function(t){return t*t},dn.cubic=function(t){return t*t*t},dn.inout=function(t){if(t<=0)return 0;if(1<=t)return 1;var e=t*t,n=e*t;return 4*(t<.5?n:3*(t-e)+n-.75)},dn.exponential=function(t){return Math.pow(2,10*(t-1))},dn.bounce=function(t){for(var e=0,n=1;;e+=n,n/=2)if((7-4*e)/11<=t){var o=(11-6*e-11*t)/4;return-o*o+n*n}},(U.Timing||(U.Timing={})).decorators={reverse:function(e){return function(t){return 1-e(1-t)}},reflect:function(e){return function(t){return.5*(t<.5?e(2*t):2-e(2-2*t))}},clamp:function(e,n,o){return void 0===n&&(n=0),void 0===o&&(o=1),function(t){t=e(t);return t<n?n:o<t?o:t}},back:function(e){return void 0===e&&(e=1.70158),function(t){return t*t*((e+1)*t-e)}},elastic:function(e){return void 0===e&&(e=1.5),function(t){return Math.pow(2,10*(t-1))*Math.cos(20*Math.PI*e/3*t)}}},(fn=U.Timing||(U.Timing={})).easeInSine=function(t){return-1*Math.cos(t*(Math.PI/2))+1},fn.easeOutSine=function(t){return Math.sin(t*(Math.PI/2))},fn.easeInOutSine=function(t){return-.5*(Math.cos(Math.PI*t)-1)},fn.easeInQuad=function(t){return t*t},fn.easeOutQuad=function(t){return t*(2-t)},fn.easeInOutQuad=function(t){return t<.5?2*t*t:(4-2*t)*t-1},fn.easeInCubic=function(t){return t*t*t},fn.easeOutCubic=function(t){--t;return t*t*t+1},fn.easeInOutCubic=function(t){return t<.5?4*t*t*t:(t-1)*(2*t-2)*(2*t-2)+1},fn.easeInQuart=function(t){return t*t*t*t},fn.easeOutQuart=function(t){--t;return 1-t*t*t*t},fn.easeInOutQuart=function(t){var e=t-1;return t<.5?8*t*t*t*t:1-8*e*e*e*e},fn.easeInQuint=function(t){return t*t*t*t*t},fn.easeOutQuint=function(t){--t;return 1+t*t*t*t*t},fn.easeInOutQuint=function(t){var e=t-1;return t<.5?16*t*t*t*t*t:1+16*e*e*e*e*e},fn.easeInExpo=function(t){return 0===t?0:Math.pow(2,10*(t-1))},fn.easeOutExpo=function(t){return 1===t?1:1-Math.pow(2,-10*t)},fn.easeInOutExpo=function(t){if(0===t||1===t)return t;var e=2*t,t=e-1;return e<1?.5*Math.pow(2,10*t):.5*(2-Math.pow(2,-10*t))},fn.easeInCirc=function(t){var e=+t;return-1*(Math.sqrt(1-e*t)-1)},fn.easeOutCirc=function(t){--t;return Math.sqrt(1-t*t)},fn.easeInOutCirc=function(t){var e=2*t,t=e-2;return e<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-t*t)+1)},fn.easeInBack=function(t,e){return void 0===e&&(e=1.70158),t*t*((e+1)*t-e)},fn.easeOutBack=function(t,e){void 0===e&&(e=1.70158);t=+t-1;return t*t*((e+1)*t+e)+1},fn.easeInOutBack=function(t,e){void 0===e&&(e=1.70158);var n=2*t,t=n-2,e=1.525*e;return n<1?.5*n*n*((1+e)*n-e):.5*(t*t*((1+e)*t+e)+2)},fn.easeInElastic=function(t,e){if(void 0===e&&(e=.7),0===t||1===t)return t;var n=+t-1,t=1-e,e=t/(2*Math.PI)*Math.asin(1);return-Math.pow(2,10*n)*Math.sin((n-e)*(2*Math.PI)/t)},fn.easeOutElastic=function(t,e){void 0===e&&(e=.7);var n=1-e,e=2*t;if(0===t||1===t)return t;t=n/(2*Math.PI)*Math.asin(1);return Math.pow(2,-10*e)*Math.sin((e-t)*(2*Math.PI)/n)+1},fn.easeInOutElastic=function(t,e){void 0===e&&(e=.65);var n=1-e;if(0===t||1===t)return t;var o=2*t,e=o-1,t=n/(2*Math.PI)*Math.asin(1);return o<1?Math.pow(2,10*e)*Math.sin((e-t)*(2*Math.PI)/n)*-.5:Math.pow(2,-10*e)*Math.sin((e-t)*(2*Math.PI)/n)*.5+1},fn.easeOutBounce=Rc,fn.easeInBounce=_c,fn.easeInOutBounce=function(t){return t<.5?.5*_c(2*t):.5*Rc(2*t-1)+.5},(pn=U.Interp||(U.Interp={})).number=function(e,t){var n=t-e;return function(t){return e+n*t}},pn.object=function(i,r){var s=Object.keys(i);return function(t){for(var e={},n=s.length-1;-1!==n;--n){var o=s[n];e[o]=i[o]+(r[o]-i[o])*t}return e}},pn.unit=function(t,e){var n=/(-?[0-9]*.[0-9]*)(px|em|cm|mm|in|pt|pc|%)/,o=n.exec(t),t=n.exec(e),n=t?t[1]:"",i=o?+o[1]:0,e=t?+t[1]:0,t=n.indexOf("."),r=0<t?n[1].length-t-1:0,s=e-i,a=o?o[2]:"";return function(t){return(i+s*t).toFixed(r)+a}},pn.color=function(t,e){var t=parseInt(t.slice(1),16),e=parseInt(e.slice(1),16),n=255&t,o=(255&e)-n,i=65280&t,r=(65280&e)-i,s=16711680&t,a=(16711680&e)-s;return function(t){return"#"+(1<<24|n+o*t&255|i+r*t&65280|s+a*t&16711680).toString(16).slice(1)}};var Hc,Uc={prefixCls:"x6",autoInsertCSS:!0,useCSSSelector:!0,trackable:!0,trackInfo:{},track:function(t){Uc.trackable=t}};function $c(t,e,n){t&&ni(function(){t(e,n)})}function qc(t,e){localStorage.setItem(t,JSON.stringify(e))}function Wc(t){t=localStorage.getItem(t);return t?JSON.parse(t):null}function Xc(t){t=Wc(Jc(t));return t?(null==t.keys&&(t.keys=[]),t):{keys:[]}}function Yc(t,e){return Hc+"."+t+".docs."+e}function Jc(t){return Hc+"."+t+".index"}yn=U.LocalStorage||(U.LocalStorage={}),Hc=Uc.prefixCls+".storage",yn.insert=function(t,e,n){var o=e.id||br("doc-"),i=Xc(t);i.keys.push(o),qc(Yc(t,o),e),qc(Jc(t),i),$c(n,null,ia(ia({},e),{id:o}))},yn.find=function(n,t,o){var e=Xc(n),i=[];null==t?(e.keys.forEach(function(t){var e=Wc(Yc(n,t));e?i.push(e):$c(o,new Error("No document found for an ID '"+t+"' from index."))}),$c(o,null,i)):t.id?(t=Wc(Yc(n,t.id)),$c(o,null,t?[t]:[])):$c(o,null,[])},yn.remove=function(e,t,n){var o,i=Xc(e);null==t?(i.keys.forEach(function(t){localStorage.removeItem(Yc(e,t))}),localStorage.removeItem(Jc(e)),$c(n,null)):t.id&&(0<=(o=i.keys.indexOf(t.id))&&i.keys.splice(o,1),localStorage.removeItem(Yc(e,t.id)),qc(Jc(e),i),$c(n,null))};var Zc,Kc=(Object.defineProperty(Qc.prototype,"names",{get:function(){return Object.keys(this.data)},enumerable:!1,configurable:!0}),Qc.prototype.register=function(e,n,t){var o=this;if(void 0===t&&(t=!1),"object"!=typeof e){!this.exist(e)||t||U.Platform.isApplyingHMR()||this.onDuplicated(e);t=this.options.process,t=t?Gr(t,this,e,n):n;return this.data[e]=t}Object.keys(e).forEach(function(t){o.register(t,e[t],n)})},Qc.prototype.unregister=function(t){var e=t?this.data[t]:null;return delete this.data[t],e},Qc.prototype.get=function(t){return t?this.data[t]:null},Qc.prototype.exist=function(t){return!!t&&null!=this.data[t]},Qc.prototype.onDuplicated=function(t){try{throw this.options.onConflict&&Gr(this.options.onConflict,this,t),new Error(Ye(this.options.type)+" with name '"+t+"' already registered.")}catch(t){throw t}},Qc.prototype.onNotFound=function(t,e){throw new Error(this.getSpellingSuggestion(t,e))},Qc.prototype.getSpellingSuggestion=function(t,e){var n=this.getSpellingSuggestionForName(t),e=e?e+" "+Di(this.options.type):this.options.type;return Ye(e)+" with name '"+t+"' does not exist."+(n?" Did you mean '"+n+"'?":"")},Qc.prototype.getSpellingSuggestionForName=function(t){return zr(t,Object.keys(this.data),function(t){return t})},Qc);function Qc(t){this.options=ia({},t),this.data=this.options.data||{},this.register=this.register.bind(this),this.unregister=this.unregister.bind(this)}(Zc=Kc=Kc||{}).create=function(t){return new Zc(t)};var th,eh,an={xlinkHref:"xlink:href",xlinkShow:"xlink:show",xlinkRole:"xlink:role",xlinkType:"xlink:type",xlinkArcrole:"xlink:arcrole",xlinkTitle:"xlink:title",xlinkActuate:"xlink:actuate",xmlSpace:"xml:space",xmlBase:"xml:base",xmlLang:"xml:lang",preserveAspectRatio:"preserveAspectRatio",requiredExtension:"requiredExtension",requiredFeatures:"requiredFeatures",systemLanguage:"systemLanguage",externalResourcesRequired:"externalResourceRequired"},bn={position:nh("x","width","origin")},kn={position:nh("y","height","origin")},Sn={position:nh("x","width","corner")},Fn={position:nh("y","height","corner")},_n={set:oh("width","width")},Gn={set:oh("height","height")},W={set:oh("rx","width")},r={set:oh("ry","height")},l={set:(th=oh("r","width"),eh=oh("r","height"),function(t,e){var n=e.refBBox;return Gr(n.height>n.width?th:eh,this,t,e)})},v={set:function(t,e){var n=e.refBBox,e=parseFloat(t),t=Vr(t);t&&(e/=100);var o,n=Math.sqrt(n.height*n.height+n.width*n.width);return isFinite(e)&&(o=t||0<=e&&e<=1?e*n:Math.max(e+n,0)),{r:o}}},B={set:oh("cx","width")},a={set:oh("cy","height")},Eo={set:rh({resetOffset:!0})},jt={set:rh({resetOffset:!1})},R={set:sh({resetOffset:!0})},Tt={set:sh({resetOffset:!1})},kt=l,H=Eo,_=R,Pt=bn,Ft=kn,G=_n,n=Gn;function nh(i,r,s){return function(t,e){var n=e.refBBox;if(null==t)return null;var o,e=parseFloat(t),t=Vr(t);t&&(e/=100),isFinite(e)&&(o=n[s],o=t||0<e&&e<1?o[i]+n[r]*e:o[i]+e);e=new U.Point;return e[i]=o||0,e}}function oh(i,r){return function(t,e){var n=e.refBBox,o=parseFloat(t),e=Vr(t);e&&(o/=100);t={};return isFinite(o)&&(n=e||0<=o&&o<=1?o*n[r]:Math.max(o+n[r],0),t[i]=n),t}}function ih(s,t){var a=t&&t.resetOffset;return function(t,e){var n=e.view,o=e.elem,i=e.refBBox,e=n.$(o),n=e.data("x6-shape");n&&n.value===t||(n={value:t,shape:r=s(t),shapeBBox:r.bbox()},e.data("x6-shape",n));var o=n.shape.clone(),t=n.shapeBBox.clone(),r=t.getOrigin(),e=i.getOrigin();t.x=e.x,t.y=e.y;n=i.getMaxScaleToFit(t,e),e=0===t.width||0===i.width?1:n.sx,n=0===t.height||0===i.height?1:n.sy;return o.scale(e,n,r),a&&o.translate(-r.x,-r.y),o}}function rh(t){var n=ih(function(t){return U.Path.parse(t)},t);return function(t,e){return{d:n(t,e).serialize()}}}function sh(t){var n=ih(function(t){return new U.Polyline(t)},t);return function(t,e){return{points:n(t,e).serialize()}}}var Bt={qualify:Te,set:function(t,e){return"url(#"+e.view.graph.defineGradient(t)+")"}},It={qualify:Te,set:function(t,e){return"url(#"+e.view.graph.defineGradient(t)+")"}},ah={qualify:function(t,e){e=e.attrs;return null==e.textWrap||!Te(e.textWrap)},set:function(t,e){var n=e.view,o=e.elem,i=e.attrs,r=n.$(o),s=r.data("x6-text"),a=function(e){try{return JSON.parse(e)}catch(t){return e}},e={x:i.x,eol:i.eol,annotations:a(i.annotations),textPath:a(i["text-path"]||i.textPath),textVerticalAnchor:i["text-vertical-anchor"]||i.textVerticalAnchor,displayEmpty:"true"===(i["display-empty"]||i.displayEmpty),lineHeight:i["line-height"]||i.lineHeight},a=i["font-size"]||i.fontSize,i=JSON.stringify([t,e]);null!=s&&s===i||(a&&o.setAttribute("font-size",a),null!=(s=e.textPath)&&"object"==typeof s&&("string"!=typeof(a=s.selector)||(a=n.find(a)[0])instanceof SVGPathElement&&(is(a),e.textPath=ia({"xlink:href":"#"+a.id},s))),vl(o,""+t,e),r.data("x6-text",i))}},Jt={qualify:Te,set:function(t,e){var n=e.view,o=e.elem,i=e.attrs,r=e.refBBox,e=t,t=e.width||0;Vr(t)?r.width*=parseFloat(t)/100:t<=0?r.width+=t:r.width=t;t=e.height||0;Vr(t)?r.height*=parseFloat(t)/100:t<=0?r.height+=t:r.height=t;t=e.text;null==t&&(t=i.text),e=null!=t?bl(""+t,r,{"font-weight":i["font-weight"]||i.fontWeight,"font-size":i["font-size"]||i.fontSize,"font-family":i["font-family"]||i.fontFamily,lineHeight:i.lineHeight},{svgDocument:n.graph.view.svg,ellipsis:e.ellipsis,hyphen:e.hyphen}):"",Gr(ah.set,this,e,{view:n,elem:o,attrs:i,refBBox:r,cell:n.cell})}},wr=function(t,e){return void 0!==e.attrs.text},Re={qualify:wr},_e={qualify:wr},je={qualify:wr},$e={qualify:wr},lh={qualify:wr},Ue={qualify:wr},ch={qualify:function(t,e){return e.elem instanceof SVGElement},set:function(t,e){var n=e.view,o=e.elem,e=""+t,t=n.$(o),n=t.data("x6-title");null!=n&&n===e||(t.data("x6-title",e),(n=o.firstChild)&&"TITLE"===n.tagName.toUpperCase()?n.textContent=e:((t=document.createElementNS(o.namespaceURI,"title")).textContent=e,o.insertBefore(t,n)))}},nn={offset:hh("x","width","right")},cn={offset:hh("y","height","bottom")};function hh(o,i,r){return function(t,e){var n=e.refBBox,e=new U.Point,t="middle"===t?n[i]/2:t===r?n[i]:"number"==typeof t&&isFinite(t)?-1<t&&t<1?-n[i]*t:-t:Vr(t)?n[i]*parseFloat(t)/100:0;return e[o]=-(n[o]+t),e}}on={qualify:Te,set:function(t,e){var n=e.view,e=e.elem;n.$(e).css(t)}},rn={qualify:Te,set:function(t,e){return"url(#"+e.view.graph.defineFilter(t)+")"}};function uh(t,e,n){var o,i="object"==typeof e?(o=e.x,e.y):(o=e,n),e=U.Path.parse(t),n=e.bbox();return n&&(t=-n.height/2-n.y,n=-n.width/2-n.x,"number"==typeof o&&(n-=o),"number"==typeof i&&(t-=i),e.translate(n,t)),e.serialize()}function ph(t,e,n,o,i){void 0===o&&(o=.75),void 0===i&&(i={});var r=t.size||10,s=t.width||r,a=t.height||r,l=new U.Path,r={};return e?(l.moveTo(s,0).lineTo(0,a/2).lineTo(s,a),r.fill="none"):(l.moveTo(0,a/2),l.lineTo(s,0),n||(o=Dn(o,0,1),l.lineTo(s*o,a/2)),l.lineTo(s,a),l.close()),ia(ia(ia({},r),i),{tagName:"path",d:uh(l.serialize(),{x:null!=t.offset?t.offset:-s/2})})}function dh(t){var e=t.r,t=ra(t,["r"]);return ia(ia({cx:e=e||5},t),{tagName:"circle",r:e})}var gh,mn=Object.freeze({__proto__:null,block:function(t){return ph({size:t.size,width:t.width,height:t.height,offset:t.offset},!0===t.open,!0,void 0,ra(t,["size","width","height","offset","open"]))},classic:function(t){return ph({size:t.size,width:t.width,height:t.height,offset:t.offset},!1,!1,t.factor,ra(t,["size","width","height","offset","factor"]))},diamond:function(t){var e=t.size,n=t.width,o=t.height,i=t.offset,t=ra(t,["size","width","height","offset"]),e=e||10,n=n||e,o=o||e,e=new U.Path;return e.moveTo(0,o/2).lineTo(n/2,0).lineTo(n,o/2).lineTo(n/2,o).close(),ia(ia({},t),{tagName:"path",d:uh(e.serialize(),null==i?-n/2:i)})},path:function(t){var e=t.d,n=t.offsetX,o=t.offsetY,t=ra(t,["d","offsetX","offsetY"]);return ia(ia({},t),{tagName:"path",d:uh(e,n,o)})},cross:function(t){var e=t.size,n=t.width,o=t.height,i=t.offset,t=ra(t,["size","width","height","offset"]),e=e||10,n=n||e,o=o||e,e=new U.Path;return e.moveTo(0,0).lineTo(n,o).moveTo(0,o).lineTo(n,0),ia(ia({},t),{tagName:"path",fill:"none",d:uh(e.serialize(),i||-n/2)})},async:function(t){var e=t.width,n=t.height,o=t.offset,i=t.open,r=t.flip,t=ra(t,["width","height","offset","open","flip"]),n=n||6,e=e||10,i=!0===i,r=!0===r,t=ia(ia({},t),{tagName:"path"});r&&(n=-n);r=new U.Path;return r.moveTo(0,n).lineTo(e,0),i?t.fill="none":(r.lineTo(e,n),r.close()),t.d=uh(r.serialize(),{x:o||-e/2,y:n/2}),t},circle:dh,circlePlus:function(t){var e=t.r,n=ra(t,["r"]),t=e||5,e=new U.Path;return e.moveTo(t,0).lineTo(t,2*t),e.moveTo(0,t).lineTo(2*t,t),{children:[ia(ia({},dh({r:t})),{fill:"none"}),ia(ia({},n),{tagName:"path",d:uh(e.serialize(),-t)})]}},ellipse:function(t){var e=t.rx,n=t.ry,t=ra(t,["rx","ry"]),e=e||5,n=n||5;return ia(ia({cx:e},t),{tagName:"ellipse",rx:e,ry:n})}});function fh(t){return"string"==typeof t||Te(t)}(hn=gh=gh||{}).presets=mn,hn.registry=Kc.create({type:"marker"}),hn.registry.register(hn.presets,!0),(gh=gh||{}).normalize=uh;un={qualify:fh,set:function(t,e){return yh("marker-start",t,e.view,e.attrs)}},dn={qualify:fh,set:function(t,e){return yh("marker-end",t,e.view,e.attrs,{transform:"rotate(180)"})}},fn={qualify:fh,set:function(t,e){return yh("marker-mid",t,e.view,e.attrs)}};function yh(t,e,n,o,i){void 0===i&&(i={});var r="string"==typeof e?{name:e}:e,s=r.name,a=r.args,l=ra(r,["name","args"]),e=l;if(s&&"string"==typeof s){r=gh.registry.get(s);if(!r)return gh.registry.onNotFound(s);e=r(ia(ia({},l),a))}i=ia(ia(ia({},function(t,e){var n={},o=t.stroke;"string"==typeof o&&(n.stroke=o,n.fill=o);o=t.strokeOpacity;return null==o&&(o=t["stroke-opacity"]),null==o&&(o=t.opacity),null!=o&&(n["stroke-opacity"]=o,n["fill-opacity"]=o),"marker-mid"!==e&&(t=parseFloat(t.strokeWidth||t["stroke-width"]),isFinite(t)&&1<t&&(t=Math.ceil(t/2),n.refX="marker-start"===e?t:-t)),n}(o,t)),i),e);return(e={})[t]="url(#"+n.graph.defineMarker(i)+")",e}pn=function(t,e){return e.view.cell.isEdge()},yn={qualify:pn,set:function(t,e){var n,o=e.view,i=t.stubs||0;return isFinite(i)&&0!==i&&(e=void 0,e=i<0?((o.getConnectionLength()||0)+i)/2:i,(t=o.getConnection())&&(i=t.divideAtLength(e),e=t.divideAtLength(-e),i&&e&&(n=i[0].serialize()+" "+e[1].serialize()))),{d:n||o.getConnectionPathData()}}},wr={qualify:pn,set:mh("getTangentAtLength",{rotate:!0})},mn={qualify:pn,set:mh("getTangentAtLength",{rotate:!1})},hn={qualify:pn,set:mh("getTangentAtRatio",{rotate:!0})},pn={qualify:pn,set:mh("getTangentAtRatio",{rotate:!1})};function mh(i,r){var s={x:1,y:0};return function(t,e){var n,o,e=e.view,t=e[i](Number(t));return t?(o=r.rotate?t.vector().vectorAngle(s):0,n=t.start):(n=e.path.start,o=0),0===o?{transform:"translate("+n.x+","+n.y+"')"}:{transform:"translate("+n.x+","+n.y+"') rotate("+o+")"}}}var Ch,Ue=Object.freeze({__proto__:null,ref:{},refX:bn,refY:kn,refDx:Sn,refDy:Fn,refWidth:_n,refHeight:Gn,refRx:W,refRy:r,refRInscribed:l,refRCircumscribed:v,refCx:B,refCy:a,refDResetOffset:Eo,refDKeepOffset:jt,refPointsResetOffset:R,refPointsKeepOffset:Tt,refR:kt,refD:H,refPoints:_,refX2:Pt,refY2:Ft,refWidth2:G,refHeight2:n,fill:Bt,stroke:It,text:ah,textWrap:Jt,lineHeight:Re,textVerticalAnchor:_e,textPath:je,annotations:$e,eol:lh,displayEmpty:Ue,title:ch,xAlign:nn,yAlign:cn,resetOffset:{offset:function(t,e){e=e.refBBox;return t?{x:-e.x,y:-e.y}:{x:0,y:0}}},style:on,html:{set:function(t,e){var n=e.view,e=e.elem;n.$(e).html(""+t)}},filter:rn,port:{set:function(t){return null!=t&&"object"==typeof t&&t.id?t.id:t}},sourceMarker:un,targetMarker:dn,vertexMarker:fn,connection:yn,atConnectionLengthKeepGradient:wr,atConnectionLengthIgnoreGradient:mn,atConnectionRatioKeepGradient:hn,atConnectionRatioIgnoreGradient:pn,atConnectionLength:wr,atConnectionRatio:hn});(Ch||(Ch={})).isValidDefinition=function(t,e,n){if(null!=t){if("string"==typeof t)return!0;if("function"!=typeof t.qualify||Gr(t.qualify,this,e,n))return!0}return!1},(ch=Ch=Ch||{}).presets=ia(ia({},an),Ue),ch.registry=Kc.create({type:"attribute definition"}),ch.registry.register(ch.presets,!0);var nn={color:"#aaaaaa",thickness:1,markup:"rect",update:function(t,e){var n=e.thickness*e.sx,o=e.thickness*e.sy;Fs(t,{width:n,height:o,rx:n,ry:o,fill:e.color})}},cn={color:"#aaaaaa",thickness:1,markup:"rect",update:function(t,e){var n=e.sx<=1?e.thickness*e.sx:e.thickness;Fs(t,{width:n,height:n,rx:n,ry:n,fill:e.color})}},on={color:"rgba(224,224,224,1)",thickness:1,markup:"path",update:function(t,e){var n=e.width,o=e.height,i=e.thickness;Fs(t,{d:0<=n-i&&0<=o-i?["M",n,0,"H0 M0 0 V0",o].join(" "):"M 0 0 0 0",stroke:e.color,"stroke-width":e.thickness})}},rn=[{color:"rgba(224,224,224,1)",thickness:1,markup:"path",update:function(t,e){var n=e.width,o=e.height,i=e.thickness;Fs(t,{d:0<=n-i&&0<=o-i?["M",n,0,"H0 M0 0 V0",o].join(" "):"M 0 0 0 0",stroke:e.color,"stroke-width":e.thickness})}},{color:"rgba(224,224,224,0.2)",thickness:3,factor:4,markup:"path",update:function(t,e){var n=e.factor||1,o=e.width*n,i=e.height*n,n=e.thickness,n=0<=o-n&&0<=i-n?["M",o,0,"H0 M0 0 V0",i].join(" "):"M 0 0 0 0";e.width=o,e.height=i,Fs(t,{d:n,stroke:e.color,"stroke-width":e.thickness})}}],un=Object.freeze({__proto__:null,dot:nn,fixedDot:cn,mesh:on,doubleMesh:rn}),vh=(bh.prototype.add=function(t,e){var n=this.root.childNodes[0];n&&n.appendChild(e),this.patterns[t]=e,U.Vector.create("rect",{width:"100%",height:"100%",fill:"url(#"+t+")"}).appendTo(this.root)},bh.prototype.get=function(t){return this.patterns[t]},bh.prototype.has=function(t){return null!=this.patterns[t]},bh);function bh(){this.patterns={},this.root=U.Vector.create(us(),{width:"100%",height:"100%"},[hs("defs")]).node}function xh(t,e){return null!=t?t:e}function wh(t,e){return null!=t&&isFinite(t)?t:e}(dn=vh=vh||{}).presets=un,dn.registry=Kc.create({type:"grid"}),dn.registry.register(dn.presets,!0);var Eh,fn=Object.freeze({__proto__:null,outline:function(t){void 0===t&&(t={});var e=xh(t.color,"blue"),n=wh(t.width,1),o=wh(t.margin,2);return('\n    <filter>\n      <feFlood flood-color="'+e+'" flood-opacity="'+wh(t.opacity,1)+'" result="colored"/>\n      <feMorphology in="SourceAlpha" result="morphedOuter" operator="dilate" radius="'+(o+n)+'" />\n      <feMorphology in="SourceAlpha" result="morphedInner" operator="dilate" radius="'+o+'" />\n      <feComposite result="morphedOuterColored" in="colored" in2="morphedOuter" operator="in"/>\n      <feComposite operator="xor" in="morphedOuterColored" in2="morphedInner" result="outline"/>\n      <feMerge>\n        <feMergeNode in="outline"/>\n        <feMergeNode in="SourceGraphic"/>\n      </feMerge>\n    </filter>\n  ').trim()},highlight:function(t){void 0===t&&(t={});var e=xh(t.color,"red"),n=wh(t.blur,0),o=wh(t.width,1);return('\n      <filter>\n        <feFlood flood-color="'+e+'" flood-opacity="'+wh(t.opacity,1)+'" result="colored"/>\n        <feMorphology result="morphed" in="SourceGraphic" operator="dilate" radius="'+o+'"/>\n        <feComposite result="composed" in="colored" in2="morphed" operator="in"/>\n        <feGaussianBlur result="blured" in="composed" stdDeviation="'+n+'"/>\n        <feBlend in="SourceGraphic" in2="blured" mode="normal"/>\n      </filter>\n    ').trim()},blur:function(t){void 0===t&&(t={});var e=wh(t.x,2);return('\n    <filter>\n      <feGaussianBlur stdDeviation="'+(null!=t.y&&isFinite(t.y)?[e,t.y]:e)+'"/>\n    </filter>\n  ').trim()},dropShadow:function(t){void 0===t&&(t={});var e=wh(t.dx,0),n=wh(t.dy,0),o=xh(t.color,"black"),i=wh(t.blur,4),t=wh(t.opacity,1);return("SVGFEDropShadowElement"in window?'<filter>\n         <feDropShadow stdDeviation="'+i+'" dx="'+e+'" dy="'+n+'" flood-color="'+o+'" flood-opacity="'+t+'" />\n       </filter>':'<filter>\n         <feGaussianBlur in="SourceAlpha" stdDeviation="'+i+'" />\n         <feOffset dx="'+e+'" dy="'+n+'" result="offsetblur" />\n         <feFlood flood-color="'+o+'" />\n         <feComposite in2="offsetblur" operator="in" />\n         <feComponentTransfer>\n           <feFuncA type="linear" slope="'+t+'" />\n         </feComponentTransfer>\n         <feMerge>\n           <feMergeNode/>\n           <feMergeNode in="SourceGraphic"/>\n         </feMerge>\n       </filter>').trim()},grayScale:function(t){void 0===t&&(t={});var e=wh(t.amount,1),t=.7152-.7152*(1-e);return('\n    <filter>\n      <feColorMatrix type="matrix" values="'+(.2126+.7874*(1-e))+" "+t+" "+(.0722-.0722*(1-e))+" 0 0 "+(.2126-.2126*(1-e))+" "+(.7152+.2848*(1-e))+" "+(.0722-.0722*(1-e))+" 0 0 "+(.2126-.2126*(1-e))+" "+t+" "+(.0722+.9278*(1-e))+' 0 0 0 0 0 1 0"/>\n    </filter>\n  ').trim()},sepia:function(t){void 0===t&&(t={});t=wh(t.amount,1);return('\n      <filter>\n        <feColorMatrix type="matrix" values="'+(.393+.607*(1-t))+" "+(.769-.769*(1-t))+" "+(.189-.189*(1-t))+" 0 0 "+(.349-.349*(1-t))+" "+(.686+.314*(1-t))+" "+(.168-.168*(1-t))+" 0 0 "+(.272-.272*(1-t))+" "+(.534-.534*(1-t))+" "+(.131+.869*(1-t))+' 0 0 0 0 0 1 0"/>\n      </filter>\n    ').trim()},saturate:function(t){return void 0===t&&(t={}),('\n      <filter>\n        <feColorMatrix type="saturate" values="'+(1-wh(t.amount,1))+'"/>\n      </filter>\n    ').trim()},hueRotate:function(t){return void 0===t&&(t={}),('\n      <filter>\n        <feColorMatrix type="hueRotate" values="'+wh(t.angle,0)+'"/>\n      </filter>\n    ').trim()},invert:function(t){void 0===t&&(t={});var e=wh(t.amount,1),t=1-e;return('\n      <filter>\n        <feComponentTransfer>\n          <feFuncR type="table" tableValues="'+e+" "+t+'"/>\n          <feFuncG type="table" tableValues="'+e+" "+t+'"/>\n          <feFuncB type="table" tableValues="'+e+" "+t+'"/>\n        </feComponentTransfer>\n      </filter>\n    ').trim()},brightness:function(t){void 0===t&&(t={});t=wh(t.amount,1);return('\n    <filter>\n      <feComponentTransfer>\n        <feFuncR type="linear" slope="'+t+'"/>\n        <feFuncG type="linear" slope="'+t+'"/>\n        <feFuncB type="linear" slope="'+t+'"/>\n      </feComponentTransfer>\n    </filter>\n  ').trim()},contrast:function(t){void 0===t&&(t={});var e=wh(t.amount,1),t=.5-e/2;return('\n    <filter>\n     <feComponentTransfer>\n        <feFuncR type="linear" slope="'+e+'" intercept="'+t+'"/>\n        <feFuncG type="linear" slope="'+e+'" intercept="'+t+'"/>\n        <feFuncB type="linear" slope="'+e+'" intercept="'+t+'"/>\n      </feComponentTransfer>\n    </filter>\n  ').trim()}});(yn=Eh=Eh||{}).presets=fn,yn.registry=Kc.create({type:"filter"}),yn.registry.register(yn.presets,!0);var Ah,mn=function(t){var e=document.createElement("canvas"),n=t.width,o=t.height;e.width=2*n,e.height=o;var i=e.getContext("2d");return i.drawImage(t,0,0,n,o),i.translate(2*n,0),i.scale(-1,1),i.drawImage(t,0,0,n,o),e},pn=function(t){var e=document.createElement("canvas"),n=t.width,o=t.height;e.width=n,e.height=2*o;var i=e.getContext("2d");return i.drawImage(t,0,0,n,o),i.translate(0,2*o),i.scale(1,-1),i.drawImage(t,0,0,n,o),e},wr=function(t){var e=document.createElement("canvas"),n=t.width,o=t.height;e.width=2*n,e.height=2*o;var i=e.getContext("2d");return i.drawImage(t,0,0,n,o),i.setTransform(-1,0,0,-1,e.width,e.height),i.drawImage(t,0,0,n,o),i.setTransform(-1,0,0,1,e.width,0),i.drawImage(t,0,0,n,o),i.setTransform(1,0,0,-1,0,e.height),i.drawImage(t,0,0,n,o),e},hn=Object.freeze({__proto__:null,flipX:mn,flipY:pn,flipXY:wr,watermark:function(t,e){var n=t.width,o=t.height,i=document.createElement("canvas");i.width=3*n,i.height=3*o;for(var r=i.getContext("2d"),e=null!=e.angle?-e.angle:-20,s=U.Angle.toRad(e),a=i.width/4,l=i.height/4,c=0;c<4;c+=1)for(var h=0;h<4;h+=1)0<(c+h)%2&&(r.setTransform(1,0,0,1,(2*c-1)*a,(2*h-1)*l),r.rotate(s),r.drawImage(t,-n/2,-o/2,n,o));return i}});(an=Ah=Ah||{}).presets=ia({},hn),an.presets["flip-x"]=mn,an.presets["flip-y"]=pn,an.presets["flip-xy"]=wr,an.registry=Kc.create({type:"background pattern"}),an.registry.register(an.presets,!0),(Ue=U.Util||(U.Util={})).snapToGrid=ua,Ue.normalizeMarker=uh,Ue.prefix=function(t){return Uc.prefixCls+"-"+t},(U.Util||(U.Util={})).makeTree=function(t,o,i,r){var s=this;void 0===r&&(r=[]);var e="function"==typeof o.children?o.children(t):t[o.children||"children"];return i||(i=o.createNode(t),r.push(i)),Array.isArray(e)&&e.forEach(function(t){var e=o.createNode(t),n=o.createEdge(i,e);r.push(e,n),s.makeTree(t,o,e,r)}),r};var Ph,Dh=U.Util.prefix("highlighted"),ch={highlight:function(t,e,n){Qr(e,n&&n.className||Dh)},unhighlight:function(t,e,n){ts(e,n&&n.className||Dh)}},Mh=U.Util.prefix("highlight-opacity"),nn={highlight:function(t,e){Qr(e,Mh)},unhighlight:function(t,e){ts(e,Mh)}},Sh={padding:3,rx:0,ry:0,attrs:{"stroke-width":3,stroke:"#FEB663"}},cn={highlight:function(t,e,n){var o=Ph.getHighlighterId(e,n);if(!Ph.hasCache(o)){n=ei({},n,Sh);var i,r=U.Vector.create(e);try{i=r.convertToPathData()}catch(t){a=r.bbox(!0),i=Ll(ia(ia({},n),a))}var s,a,l=hs("path");Fs(l,ia({d:i,"pointer-events":"none","vector-effect":"non-scaling-stroke",fill:"none"},n.attrs?Ls(n.attrs):null)),t.isEdgeElement(e)?Fs(l,"d",t.getConnectionPathData()):(h=r.getTransformToElement(t.container),(s=n.padding)&&(null==a&&(a=r.bbox(!0)),e=a.x+a.width/2,c=a.y+a.height/2,a=Ql(a,h),c=_l({a:n=((n=Math.max(a.width,1))+s)/n,b:0,c:0,d:a=((a=Math.max(a.height,1))+s)/a,e:e-n*e,f:c-a*c}),h=h.multiply(c)),uc(l,h)),Qr(l,U.Util.prefix("highlight-stroke"));var c=t.cell,h=function(){return Ph.removeHighlighter(o)};c.on("removed",h),c.model&&c.model.on("reseted",h),t.container.appendChild(l),Ph.setCache(o,l)}},unhighlight:function(t,e,n){Ph.removeHighlighter(Ph.getHighlighterId(e,n))}};!function(t){t.getHighlighterId=function(t,e){return is(t),t.id+JSON.stringify(e)};var n={};t.setCache=function(t,e){n[t]=e},t.hasCache=function(t){return null!=n[t]},t.removeHighlighter=function(t){var e=n[t];e&&(vs(e),delete n[t])}}(Ph=Ph||{});var kh,on=Object.freeze({__proto__:null,className:ch,opacity:nn,stroke:cn});function Fh(t,e){return void 0===e&&(e={}),new U.Point(jr(e.x,t.width),jr(e.y,t.height))}function Th(t,e,n){return ia({angle:e,position:t.toJSON()},n)}function Lh(t,e,o,i){var r=e.getCenter(),s=e.getTopCenter(),a=e.width/e.height,l=U.Ellipse.fromRect(e),c=t.length;return t.map(function(t,e){var n=o+i(e,c),e=s.clone().rotate(-n,r).scale(a,1,r),n=t.compensateRotate?-l.tangentTheta(e):0;return(t.dx||t.dy)&&e.translate(t.dx||0,t.dy||0),t.dr&&e.move(r,t.dr),Th(e.round(),n,t)})}function Nh(t,e,n,o){var i=new La(e,n),r=t.length;return t.map(function(t,e){var n=t.strict,t=ra(t,["strict"]),e=n||o.strict?(e+1)/(r+1):(e+.5)/r,e=i.pointAt(e);return(t.dx||t.dy)&&e.translate(t.dx||0,t.dy||0),Th(e.round(),0,t)})}(kh||(kh={})).check=function(t,e){if("function"!=typeof e.highlight)throw new Error("Highlighter '"+t+"' is missing required `highlight()` method");if("function"!=typeof e.unhighlight)throw new Error("Highlighter '"+t+"' is missing required `unhighlight()` method")},(rn=kh=kh||{}).presets=on,rn.registry=Kc.create({type:"highlighter"}),rn.registry.register(rn.presets,!0);var Oh,un=Object.freeze({__proto__:null,absolute:function(t,o){return t.map(function(t){var e=t.x,n=t.y,t=t.angle;return Th(Fh(o,{x:e,y:n}),t||0)})},ellipse:function(t,e,n){var o=n.start||0,i=n.step||20;return Lh(t,e,o,function(t,e){return(t+.5-e/2)*i})},ellipseSpread:function(t,e,n){var o=n.start||0,i=n.step||360/t.length;return Lh(t,e,o,function(t){return t*i})},line:function(t,e,n){return Nh(t,Fh(e,n.start||e.getOrigin()),Fh(e,n.end||e.getCorner()),n)},left:function(t,e,n){return Nh(t,e.getTopLeft(),e.getBottomLeft(),n)},right:function(t,e,n){return Nh(t,e.getTopRight(),e.getBottomRight(),n)},top:function(t,e,n){return Nh(t,e.getTopLeft(),e.getTopRight(),n)},bottom:function(t,e,n){return Nh(t,e.getBottomLeft(),e.getBottomRight(),n)}});(dn=Oh=Oh||{}).presets=un,dn.registry=Kc.create({type:"port layout"}),dn.registry.register(dn.presets,!0);var Bh={position:{x:0,y:0},angle:0,attrs:{".":{y:"0","text-anchor":"start"}}};function zh(t,e){e=e||{};return ei({},{angle:e.angle,attrs:e.attrs,position:{x:e.x,y:e.y}},t,Bh)}function Vh(t,e,n,o){var i,r,s,a=null!=o.offset?o.offset:15,l=e.getCenter().theta(t),t=Ih(e),e=0,n=l<t[1]||l>t[2]?(i=".3em",r=a,s=0,"start"):l<t[0]?(i="0",r=0,s=-a,n?(e=-90,"start"):"middle"):l<t[3]?(i=".3em",r=-a,s=0,"end"):(i=".6em",r=0,s=a,n?(e=90,"start"):"middle");return zh({position:{x:Math.round(r),y:Math.round(s)},angle:e,attrs:{".":{y:i,"text-anchor":n}}},o)}function jh(t,e,n,o){var i,r,s,a=null!=o.offset?o.offset:15,l=e.getCenter().theta(t),t=Ih(e),e=0,n=l<t[1]||l>t[2]?(i=".3em",r=-a,s=0,"end"):l<t[0]?(i=".6em",r=0,s=a,n?(e=90,"start"):"middle"):l<t[3]?(i=".3em",r=a,s=0,"start"):(i="0em",r=0,s=-a,n?(e=-90,"start"):"middle");return zh({position:{x:Math.round(r),y:Math.round(s)},angle:e,attrs:{".":{y:i,"text-anchor":n}}},o)}function Ih(t){var e=t.getCenter(),n=e.theta(t.getTopLeft()),o=e.theta(t.getBottomLeft()),i=e.theta(t.getBottomRight());return[n,e.theta(t.getTopRight()),i,o]}function Rh(t,e,n){var o,i=null!=n.offset?n.offset:20,r=new U.Point(0,0),s=-t.theta(r),a=".3em",l=s;return(90+s)%180==0?(o=e?"end":"middle",e||-270!=s||(a="0em")):-270<s&&s<-90?(o="start",l=s-180):o="end",zh({position:t.clone().move(r,i).diff(t).round().round().toJSON(),angle:e?l:0,attrs:{".":{y:a,"text-anchor":o}}},n)}var _h,Gh,Hh,Uh,$h,fn=Object.freeze({__proto__:null,manual:function(t,e,n){return zh({position:e.getTopLeft()},n)},left:function(t,e,n){return zh({position:{x:-15,y:0},attrs:{".":{y:".3em","text-anchor":"end"}}},n)},right:function(t,e,n){return zh({position:{x:15,y:0},attrs:{".":{y:".3em","text-anchor":"start"}}},n)},top:function(t,e,n){return zh({position:{x:0,y:-15},attrs:{".":{"text-anchor":"middle"}}},n)},bottom:function(t,e,n){return zh({position:{x:0,y:15},attrs:{".":{y:".6em","text-anchor":"middle"}}},n)},outside:function(t,e,n){return Vh(t,e,!1,n)},outsideOriented:function(t,e,n){return Vh(t,e,!0,n)},inside:function(t,e,n){return jh(t,e,!1,n)},insideOriented:function(t,e,n){return jh(t,e,!0,n)},radial:function(t,e,n){return Rh(t.diff(e.getCenter()),!1,n)},radialOriented:function(t,e,n){return Rh(t.diff(e.getCenter()),!0,n)}});function qh(t){return C(t)}function Wh(){var t=$h.call(this)||this;return t.cid=Hh.uniqueId(),Wh.views[t.cid]=t}function Xh(t,e){return 0===e?"0%":Math.round(t/e*100)+"%"}function Yh(l){return function(t,i,e,n){return i.isEdgeElement(e)?function(t,e,n){var o=i.getConnection();if(!o)return e;n=o.closestPointLength(n);return t?(o=o.length(),e.anchor={name:"ratio",args:{ratio:n/o}}):e.anchor={name:"length",args:{length:n}},e}(l,t,n):(o=l,r=t,s=e,a=n,e=(t=i).cell,n=e.getAngle(),s=t.getUnrotatedBBoxOfElement(s),e=e.getBBox().getCenter(),n=U.Point.create(a).rotate(n,e),e=n.x-s.x,n=n.y-s.y,o&&(e=Xh(e,s.width),n=Xh(n,s.height)),r.anchor={name:"topLeft",args:{dx:e,dy:n,rotate:!0}},r);var o,r,s,a}}(yn=_h=_h||{}).presets=fn,yn.registry=Kc.create({type:"port label layout"}),yn.registry.register(yn.presets,!0),U.View=(oa(Wh,$h=U.Basecoat),Object.defineProperty(Wh.prototype,"priority",{get:function(){return 2},enumerable:!1,configurable:!0}),Wh.prototype.confirmUpdate=function(t,e){return 0},Wh.prototype.$=function(t){return Wh.$(t)},Wh.prototype.empty=function(t){return void 0===t&&(t=this.container),this.$(t).empty(),this},Wh.prototype.unmount=function(t){return void 0===t&&(t=this.container),this.$(t).remove(),this},Wh.prototype.remove=function(t){return void 0===t&&(t=this.container),t===this.container&&(this.removeEventListeners(document),this.onRemove(),delete Wh.views[this.cid]),this.unmount(t),this},Wh.prototype.onRemove=function(){},Wh.prototype.addClass=function(t,e){return void 0===e&&(e=this.container),this.$(e).addClass(Array.isArray(t)?t.join(" "):t),this},Wh.prototype.removeClass=function(t,e){return void 0===e&&(e=this.container),this.$(e).removeClass(Array.isArray(t)?t.join(" "):t),this},Wh.prototype.setStyle=function(t,e){return void 0===e&&(e=this.container),this.$(e).css(t),this},Wh.prototype.setAttrs=function(t,e){return void 0===e&&(e=this.container),null!=t&&null!=e&&(e instanceof SVGElement?Fs(e,t):this.$(e).attr(t)),this},Wh.prototype.findAttr=function(t,e){void 0===e&&(e=this.container);for(var n=e;n&&1===n.nodeType;){var o=n.getAttribute(t);if(null!=o)return o;if(n===this.container)return null;n=n.parentNode}return null},Wh.prototype.find=function(t,e,n){return void 0===e&&(e=this.container),void 0===n&&(n=this.selectors),Wh.find(t,e,n).elems},Wh.prototype.findOne=function(t,e,n){void 0===e&&(e=this.container),void 0===n&&(n=this.selectors);n=this.find(t,e,n);return 0<n.length?n[0]:null},Wh.prototype.findByAttr=function(t,e){void 0===e&&(e=this.container);for(var n=e;n&&n.getAttribute;){var o=n.getAttribute(t);if((null!=o||n===this.container)&&"false"!==o)return n;n=n.parentNode}return null},Wh.prototype.getSelector=function(t,e){var n,o;return t===this.container?"string"==typeof e&&(o="> "+e):t&&(n=gs(t)+1,o=t.tagName.toLowerCase()+":nth-child("+n+")",e&&(o+=" > "+e),o=this.getSelector(t.parentNode,o)),o},Wh.prototype.prefixClassName=function(t){return U.Util.prefix(t)},Wh.prototype.delegateEvents=function(n,t){var o=this;if(null==n)return this;t||this.undelegateEvents();var i=/^(\S+)\s*(.*)$/;return Object.keys(n).forEach(function(t){var e=t.match(i);null==e||"function"==typeof(t=o.getEventHandler(n[t]))&&o.delegateEvent(e[1],e[2],t)}),this},Wh.prototype.undelegateEvents=function(){return this.$(this.container).off(this.getEventNamespace()),this},Wh.prototype.delegateDocumentEvents=function(t,e){return this.addEventListeners(document,t,e),this},Wh.prototype.undelegateDocumentEvents=function(){return this.removeEventListeners(document),this},Wh.prototype.delegateEvent=function(t,e,n){return this.$(this.container).on(t+this.getEventNamespace(),e,n),this},Wh.prototype.undelegateEvent=function(t,e,n){t+=this.getEventNamespace();return null==e?this.$(this.container).off(t):"string"==typeof e?this.$(this.container).off(t,e,n):this.$(this.container).off(t,e),this},Wh.prototype.addEventListeners=function(t,n,o){var i=this;if(null==n)return this;var r=this.getEventNamespace(),s=this.$(t);return Object.keys(n).forEach(function(t){var e=i.getEventHandler(n[t]);"function"==typeof e&&s.on(t+r,o,e)}),this},Wh.prototype.removeEventListeners=function(t){return null!=t&&this.$(t).off(this.getEventNamespace()),this},Wh.prototype.getEventNamespace=function(){return"."+Uc.prefixCls+"-event-"+this.cid},Wh.prototype.getEventHandler=function(n){var t,o,i=this;return"string"==typeof n?"function"==typeof(o=this[n])&&(t=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return o.call.apply(o,aa([i],t))}):t=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return n.call.apply(n,aa([i],t))},t},Wh.prototype.getEventTarget=function(t,e){void 0===e&&(e={});var n=t.target,o=t.type,i=t.clientX,i=void 0===i?0:i,t=t.clientY,t=void 0===t?0:t;return e.fromPoint||"touchmove"===o||"touchend"===o?document.elementFromPoint(i,t):n},Wh.prototype.stopPropagation=function(t){return this.setEventData(t,{propagationStopped:!0}),this},Wh.prototype.isPropagationStopped=function(t){return!0===this.getEventData(t).propagationStopped},Wh.prototype.getEventData=function(t){return this.eventData(t)},Wh.prototype.setEventData=function(t,e){return this.eventData(t,e)},Wh.prototype.eventData=function(t,e){if(null==t)throw new TypeError("Event object required");var n=t.data,o="__"+this.cid+"__";return null==e?null!=n&&n[o]||{}:(null==n&&(n=t.data={}),null==n[o]?n[o]=ia({},e):n[o]=ia(ia({},n[o]),e),n[o])},Wh.prototype.normalizeEvent=function(t){return Wh.normalizeEvent(t)},Wh),(hn=U.View||(U.View={})).$=qh,hn.createElement=function(t,e){return e?hs(t||"g"):cs(t||"div")},hn.find=function(t,e,n){if(!t||"."===t)return{elems:[e]};if(n){n=n[t];if(n)return{elems:Array.isArray(n)?n:[n]}}return Uc.useCSSSelector?{isCSSSelector:!0,elems:qh(e).find(t).toArray()}:{elems:[]}},hn.normalizeEvent=function(t){var e=t,n=t.originalEvent,o=n&&n.changedTouches&&n.changedTouches[0];if(o){for(var i in t)void 0===o[i]&&(o[i]=t[i]);e=o}n=e.target;return!n||(n=n.correspondingUseElement)&&(e.target=n),e},(Gh=U.View||(U.View={})).views={},Gh.getView=function(t){return Gh.views[t]||null},mn=Hh=Hh||{};var Jh,pn=Yh(!(Uh=0)),wr=Yh(!(mn.uniqueId=function(){var t="v"+Uh;return Uh+=1,t})),an=Object.freeze({__proto__:null,noop:function(t){return t},pinRelative:pn,pinAbsolute:wr});(Ue=Jh=Jh||{}).presets=an,Ue.registry=Kc.create({type:"connection strategy"}),Ue.registry.register(Ue.presets,!0);var Zh,Kh,Qh=(tu.prototype.clean=function(){this.elemCache&&this.elemCache.dispose(),this.elemCache=new Vc,this.pathCache={}},tu.prototype.get=function(t){return this.elemCache.has(t)||this.elemCache.set(t,{}),this.elemCache.get(t)},tu.prototype.getData=function(t){t=this.get(t);return t.data||(t.data={}),t.data},tu.prototype.getMatrix=function(t){var e,n=this.get(t);return null==n.matrix&&(e=this.view.rotatableNode||this.view.container,n.matrix=nc(t,e)),_l(n.matrix)},tu.prototype.getShape=function(t){var e=this.get(t);return null==e.shape&&(e.shape=ic(t)),e.shape.clone()},tu.prototype.getBoundingRect=function(t){var e=this.get(t);return null==e.boundingRect&&(e.boundingRect=ec(t)),e.boundingRect.clone()},tu);function tu(t){this.view=t,this.clean()}function eu(t,e,n){if(null==t)return n;var o=void 0,i=t.tagName.toLowerCase();if(t===e)return"string"==typeof n?"> "+i+" > "+n:"> "+i;var r=t.parentNode,o=r&&1<r.childNodes.length?i+":nth-child("+(gs(t)+1)+")":i;return n&&(o+=" > "+n),eu(t.parentNode,e,o)}function nu(t){return null!=t&&"string"==typeof t}function ou(t){return(""+t).trim().replace(/[\r|\n]/g," ").replace(/>\s+</g,"><")}function iu(t,e){void 0===e&&(e={ns:ss.svg});for(var n=document.createDocumentFragment(),s={},a={},l=[{markup:Array.isArray(t)?t:[t],parent:n,ns:e.ns}];0<l.length;)!function(){var t=l.pop(),i=t.ns||ss.svg,e=t.markup,r=t.parent;e.forEach(function(t){var e=t.tagName;if(!e)throw new TypeError("Invalid tagName");t.ns&&(i=t.ns);var n=i===ss.svg,o=i?cs(e,i):ls(e),e=t.attrs;e&&(n?Fs(o,Ls(e)):C(o).attr(e));e=t.style;e&&C(o).css(e);e=t.className;null!=e&&o.setAttribute("class",Array.isArray(e)?e.join(" "):e),t.textContent&&(o.textContent=t.textContent);e=t.selector;if(null!=e){if(a[e])throw new TypeError("Selector must be unique");a[e]=o}t.groupSelector&&(e=t.groupSelector,Array.isArray(e)||(e=[e]),e.forEach(function(t){s[t]||(s[t]=[]),s[t].push(o)})),r.appendChild(o);t=t.children;Array.isArray(t)&&l.push({ns:i,markup:t,parent:o})})}();return Object.keys(s).forEach(function(t){if(a[t])throw new Error("Ambiguous group selector");a[t]=s[t]}),{fragment:n,selectors:a,groups:s}}function ru(t){return t instanceof SVGElement?hs("g"):ls("div")}(ch=U.Markup||(U.Markup={})).isJSONMarkup=function(t){return null!=t&&!nu(t)},ch.isStringMarkup=nu,ch.clone=function(t){return null==t||nu(t)?t:mo(t)},ch.sanitize=ou,ch.parseStringMarkup=function(t){var e=document.createDocumentFragment();return Br(ou(t),{raw:!0}).forEach(function(t){e.appendChild(t)}),{fragment:e,selectors:{},groups:{}}},ch.parseJSONMarkup=iu,ch.renderMarkup=function(t){if(nu(t)){var e=U.Vector.createVectors(t),n=e.length;if(1===n)return{elem:e[0].node};if(1<n){var o=ru(e[0].node);return e.forEach(function(t){o.appendChild(t.node)}),{elem:o}}return{}}n=iu(t),e=n.fragment,t=null;return 1<e.childNodes.length?(t=ru(e.firstChild)).appendChild(e):t=e.firstChild,{elem:t,selectors:n.selectors}},ch.parseLabelStringMarkup=function(t){for(var e=U.Vector.createVectors(t),n=document.createDocumentFragment(),o=0,i=e.length;o<i;o+=1){var r=e[o].node;n.appendChild(r)}return{fragment:n,selectors:{}}},(Kh=U.Markup||(U.Markup={})).getSelector=eu,Kh.xml2json=function(t){var t=ps(Kh.sanitize(t),{mimeType:"image/svg+xml"}),t=Array.prototype.slice.call(t.childNodes),c={},h=new WeakMap,u=function(t,e,n){var o=function(t,e,n){if("#text"===t.nodeName)return null;var o=null,i=null,r=null,s=!1,a={tagName:t.tagName};if(t.attributes){r={};for(var l=0,c=t.attributes.length;l<c;l+=1){var h=t.attributes[l],u=h.nodeName,h=h.nodeValue;"selector"===u?o=h:"groupSelector"===u?i=h:"class"===u?a.attrs={class:h}:r[u]=h}}return null==o&&(s=!0,o=eu(t,e)),t.namespaceURI&&(a.ns=t.namespaceURI),null==a.ns&&(["body","div","section","main","nav","footer","span","p","h1","h2","h3","h4","h5","h6","ul","ol","dl","center","strong","pre","form","select","textarea","fieldset","marquee","bgsound","iframe","frameset"].includes(t.tagName)?a.ns=ss.xhtml:n&&(a.ns=n)),o&&(a.selector=o),null!=i&&(a.groupSelector=i),{markup:a,attrs:r,isCSSSelector:s}}(t,e,n);if(null!=o){var i=o.markup,n=o.attrs,r=o.isCSSSelector;if(h.set(t,i),i.selector&&null!=n&&(Object.keys(n).length&&(c[i.selector]=n),r&&delete i.selector),t.childNodes&&0<t.childNodes.length)for(var s=0,a=t.childNodes.length;s<a;s+=1){var l=t.childNodes[s],l=u(l,e,i.ns);l&&(null==i.children&&(i.children=[]),i.children.push(l))}return i}r=h.get(t.parentNode);r&&t.textContent&&(r.textContent=t.textContent)};return{markup:t.map(function(t){return u(t,t)}).filter(function(t){return null!=t}),attrs:c}},(nn=U.Markup||(U.Markup={})).getPortContainerMarkup=function(){return"g"},nn.getPortMarkup=function(){return{tagName:"circle",selector:"circle",attrs:{r:10,fill:"#FFFFFF",stroke:"#000000"}}},nn.getPortLabelMarkup=function(){return{tagName:"text",selector:"text",attrs:{fill:"#000000"}}},(Zh=U.Markup||(U.Markup={})).getEdgeMarkup=function(){return Zh.sanitize('\n    <path class="connection" stroke="black" d="M 0 0 0 0"/>\n    <path class="source-marker" fill="black" stroke="black" d="M 0 0 0 0"/>\n    <path class="target-marker" fill="black" stroke="black" d="M 0 0 0 0"/>\n    <path class="connection-wrap" d="M 0 0 0 0"/>\n    <g class="labels"/>\n    <g class="vertices"/>\n    <g class="arrowheads"/>\n    <g class="tools"/>\n  ')},Zh.getEdgeToolMarkup=function(){return Zh.sanitize('\n    <g class="edge-tool">\n      <g class="tool-remove" event="edge:remove">\n        <circle r="11" />\n        <path transform="scale(.8) translate(-16, -16)" d="M24.778,21.419 19.276,15.917 24.777,10.415 21.949,7.585 16.447,13.087 10.945,7.585 8.117,10.415 13.618,15.917 8.116,21.419 10.946,24.248 16.447,18.746 21.948,24.248z" />\n        <title>Remove edge.</title>\n      </g>\n      <g class="tool-options" event="edge:options">\n        <circle r="11" transform="translate(25)"/>\n        <path fill="white" transform="scale(.55) translate(29, -16)" d="M31.229,17.736c0.064-0.571,0.104-1.148,0.104-1.736s-0.04-1.166-0.104-1.737l-4.377-1.557c-0.218-0.716-0.504-1.401-0.851-2.05l1.993-4.192c-0.725-0.91-1.549-1.734-2.458-2.459l-4.193,1.994c-0.647-0.347-1.334-0.632-2.049-0.849l-1.558-4.378C17.165,0.708,16.588,0.667,16,0.667s-1.166,0.041-1.737,0.105L12.707,5.15c-0.716,0.217-1.401,0.502-2.05,0.849L6.464,4.005C5.554,4.73,4.73,5.554,4.005,6.464l1.994,4.192c-0.347,0.648-0.632,1.334-0.849,2.05l-4.378,1.557C0.708,14.834,0.667,15.412,0.667,16s0.041,1.165,0.105,1.736l4.378,1.558c0.217,0.715,0.502,1.401,0.849,2.049l-1.994,4.193c0.725,0.909,1.549,1.733,2.459,2.458l4.192-1.993c0.648,0.347,1.334,0.633,2.05,0.851l1.557,4.377c0.571,0.064,1.148,0.104,1.737,0.104c0.588,0,1.165-0.04,1.736-0.104l1.558-4.377c0.715-0.218,1.399-0.504,2.049-0.851l4.193,1.993c0.909-0.725,1.733-1.549,2.458-2.458l-1.993-4.193c0.347-0.647,0.633-1.334,0.851-2.049L31.229,17.736zM16,20.871c-2.69,0-4.872-2.182-4.872-4.871c0-2.69,2.182-4.872,4.872-4.872c2.689,0,4.871,2.182,4.871,4.872C20.871,18.689,18.689,20.871,16,20.871z"/>\n        <title>Edge options.</title>\n      </g>\n    </g>\n  ')},Zh.getEdgeVertexMarkup=function(){return Zh.sanitize('\n    <g class="vertex-group" transform="translate(<%= x %>, <%= y %>)">\n      <circle class="vertex" data-index="<%= index %>" r="10" />\n      <path class="vertex-remove-area" data-index="<%= index %>" d="M16,5.333c-7.732,0-14,4.701-14,10.5c0,1.982,0.741,3.833,2.016,5.414L2,25.667l5.613-1.441c2.339,1.317,5.237,2.107,8.387,2.107c7.732,0,14-4.701,14-10.5C30,10.034,23.732,5.333,16,5.333z" transform="translate(5, -33)"/>\n      <path class="vertex-remove" data-index="<%= index %>" transform="scale(.8) translate(9.5, -37)" d="M24.778,21.419 19.276,15.917 24.777,10.415 21.949,7.585 16.447,13.087 10.945,7.585 8.117,10.415 13.618,15.917 8.116,21.419 10.946,24.248 16.447,18.746 21.948,24.248z">\n      <title>Remove vertex.</title>\n      </path>\n    </g>\n  ')},Zh.getEdgeArrowheadMarkup=function(){return Zh.sanitize('\n    <g class="arrowhead-group arrowhead-group-<%= end %>">\n      <path class="arrowhead" data-terminal="<%= end %>" d="M 26 0 L 0 13 L 26 26 z" />\n    </g>\n  ')},(U.Markup||(U.Markup={})).getForeignObjectMarkup=function(){return{tagName:"foreignObject",selector:"fo",children:[{ns:ss.xhtml,tagName:"body",selector:"foBody",attrs:{xmlns:ss.xhtml},style:{width:"100%",height:"100%",background:"transparent"},children:[{tagName:"div",selector:"foContent",style:{width:"100%",height:"100%"}}]}]}};var su,au,lu,cu,hu=(Object.defineProperty(du.prototype,"cell",{get:function(){return this.view.cell},enumerable:!1,configurable:!0}),du.prototype.getDefinition=function(t){return this.cell.getAttrDefinition(t)},du.prototype.processAttrs=function(i,r){var s,o,a,l,c=this,h=[];return Object.keys(r).forEach(function(t){var e=r[t],n=c.getDefinition(t),o=Gr(Ch.isValidDefinition,c.view,n,e,{elem:i,attrs:r,cell:c.cell,view:c.view});n&&o?"string"==typeof n?(null==s&&(s={}),s[n]=e):null!==e&&h.push({name:t,definition:n}):(null==s&&(s={}),s[t.replace(/[A-Z]/g,"-$&").toLowerCase()]=e)}),h.forEach(function(t){var e=t.name,n=t.definition,t=r[e];"function"==typeof n.set&&(null==o&&(o={}),o[e]=t),"function"==typeof n.offset&&(null==a&&(a={}),a[e]=t),"function"==typeof n.position&&(null==l&&(l={}),l[e]=t)}),{raw:r,normal:s,set:o,offset:a,position:l}},du.prototype.mergeProcessedAttrs=function(t,e){t.set=ia(ia({},t.set),e.set),t.position=ia(ia({},t.position),e.position),t.offset=ia(ia({},t.offset),e.offset);var n=t.normal&&t.normal.transform;null!=n&&e.normal&&(e.normal.transform=n),t.normal=e.normal},du.prototype.findAttrs=function(p,d,g,f){var y=[],m=new Vc;return Object.keys(p).forEach(function(t){var e=p[t];if(Te(e))for(var n=U.View.find(t,d,f),o=n.isCSSSelector,i=n.elems,r=0,s=(g[t]=i).length;r<s;r+=1){var a,l,c=i[r],h=f&&f[t]===c,u=m.get(c);u?(u.array||(y.push(c),u.array=!0,u.attrs=[u.attrs],u.priority=[u.priority]),a=u.attrs,l=u.priority,h?(a.unshift(e),l.unshift(-1)):(u=Wi(l,o?-1:s),a.splice(u,0,e),l.splice(u,0,s))):m.set(c,{elem:c,attrs:e,priority:h?-1:s,array:!1})}}),y.forEach(function(t){var e=m.get(t),t=e.attrs;e.attrs=t.reduceRight(function(t,e){return Mi(t,e)},{})}),m},du.prototype.updateRelativeAttrs=function(n,t,e,o){function i(){return{elem:n,cell:d.cell,view:d.view,attrs:g,refBBox:e.clone()}}var r,s,a,l,c,h,u,p,d=this,g=t.raw||{},f=t.normal||{},y=t.set,m=t.position,C=t.offset;null!=y&&Object.keys(y).forEach(function(t){var e=y[t],n=d.getDefinition(t);null!=n&&("object"==typeof(e=Gr(n.set,d.view,e,i()))?f=ia(ia({},f),e):null!=e&&(f[t]=e))}),n instanceof HTMLElement?this.view.setAttrs(f,n):(t=Hl((r=f.transform)?""+r:null),s=new U.Point(t.e,t.f),r&&(delete f.transform,t.e=0,t.f=0),l=a=1,(m||C)&&(u=this.view.getScaleOfElement(n,o.scalableNode),a=u.sx,l=u.sy),c=!1,null!=m&&Object.keys(m).forEach(function(t){var e=m[t],t=d.getDefinition(t);null==t||null!=(e=Gr(t.position,d.view,e,i()))&&(c=!0,s.translate(U.Point.create(e).scale(a,l)))}),this.view.setAttrs(f,n),h=!1,null==C||0<(u=this.view.getBoundingRectOfElement(n)).width&&0<u.height&&(p=Ql(u,t).scale(1/a,1/l),Object.keys(C).forEach(function(t){var e=C[t],t=d.getDefinition(t);null==t||null!=(e=Gr(t.offset,d.view,e,{elem:n,cell:d.cell,view:d.view,attrs:g,refBBox:p}))&&(h=!0,s.translate(U.Point.create(e).scale(a,l)))})),(null!=r||c||h)&&(s.round(1),t.e=s.x,t.f=s.y,n.setAttribute("transform",Ul(t))))},du.prototype.update=function(a,t,l){var c=this,r={},e=this.findAttrs(l.attrs||t,a,r,l.selectors),s=l.attrs?this.findAttrs(t,a,r,l.selectors):e,h=[];e.each(function(t){var e=t.elem,n=t.attrs,o=c.processAttrs(e,n);if(null==o.set&&null==o.position&&null==o.offset)c.view.setAttrs(o.normal,e);else{var i=s.get(e),t=i?i.attrs:null,i=(t&&null==n.ref?t:n).ref,n=void 0;if(i){if(!(n=(r[i]||c.view.find(i,a,l.selectors))[0]))throw new Error('"'+i+'" reference does not exist.')}else n=null;t={node:e,refNode:n,attributes:t,processedAttributes:o},o=h.findIndex(function(t){return t.refNode===e});-1<o?h.splice(o,0,t):h.push(t)}});var u,p=new Vc;h.forEach(function(t){var e,n,o,i=t.node,r=t.refNode,s=null!=r&&null!=l.rotatableNode&&Cs(l.rotatableNode,r);r&&(o=p.get(r)),o||(n=s?l.rotatableNode:a,o=r?ec(r,{target:n}):l.rootBBox,r&&p.set(r,o)),l.attrs&&t.attributes?(e=c.processAttrs(i,t.attributes),c.mergeProcessedAttrs(e,t.processedAttributes)):e=t.processedAttributes;t=o;s&&null!=l.rotatableNode&&!l.rotatableNode.contains(i)&&(t=Ql(o,u=u||Hl(Fs(l.rotatableNode,"transform")))),c.updateRelativeAttrs(i,e,t,l)})},du),uu=(Object.defineProperty(pu.prototype,"cell",{get:function(){return this.view.cell},enumerable:!1,configurable:!0}),pu.prototype.getFlag=function(t){var n=this.flags;return null==n?0:Array.isArray(t)?t.reduce(function(t,e){return t|n[e]},0):0|n[t]},pu.prototype.hasAction=function(t,e){return t&this.getFlag(e)},pu.prototype.removeAction=function(t,e){return t^t&this.getFlag(e)},pu.prototype.getBootstrapFlag=function(){return this.getFlag(this.bootstrap)},pu.prototype.getChangedFlag=function(){var e=this,n=0;return this.attrs&&Object.keys(this.attrs).forEach(function(t){e.cell.hasChanged(t)&&(n|=e.attrs[t])}),n},pu);function pu(t,e,n){void 0===n&&(n=[]),this.view=t;var o={},i={},r=0;Object.keys(e).forEach(function(n){var t=e[n];Array.isArray(t)||(t=[t]),t.forEach(function(t){var e=o[t];e||(r+=1,e=o[t]=1<<r),i[n]|=e})});t=n;if(Array.isArray(t)||(t=[t]),t.forEach(function(t){o[t]||(r+=1,o[t]=1<<r)}),25<r)throw new Error("Maximum number of flags exceeded.");this.flags=o,this.attrs=i,this.bootstrap=n}function du(t){this.view=t}function gu(t,e,n,o){return Gr(Jh.presets.pinRelative,this.graph,{},e,n,t,this.cell,o,{}).anchor}function fu(t,e){return e?t.cell.getBBox():t.cell.isEdge()?t.getConnection().bbox():t.getUnrotatedBBoxOfElement(t.container)}function yu(t){void 0===t&&(t={});var e=au.call(this)||this;return e.options=e.getOptions(t),e.container=U.View.createElement(e.options.tagName||"g",!1!==e.options.isSVGElement),Qr(e.container,e.prefixClassName("cell-tool")),"string"==typeof e.options.className&&Qr(e.container,e.options.className),e.init(),e}function mu(t){void 0===t&&(t={});var e=lu.call(this)||this;return e.container=U.View.createElement(t.tagName||"g",!1!==t.isSVGElement),Qr(e.container,e.prefixClassName("cell-tools")),t.className&&Qr(e.container,t.className),e.config(t),e}function Cu(t,e){void 0===e&&(e={});var n=cu.call(this)||this;return n.cell=t,n.options=n.ensureOptions(e),n.attr=new hu(n),n.flag=new uu(n,n.options.actions,n.options.bootstrap),n.cache=new Qh(n),n.setContainer(n.ensureContainer()),n.setup(),n.$(n.container).data("view",n),n.init(),n}U.CellView=(oa(Cu,cu=U.View),Cu.getDefaults=function(){return this.defaults},Cu.config=function(t){this.defaults=this.getOptions(t)},Cu.getOptions=function(t){function o(t,e){return null!=e?Cr(aa(Array.isArray(t)?t:[t],Array.isArray(e)?e:[e])):Array.isArray(t)?aa(t):[t]}var i=mo(this.getDefaults()),e=t.bootstrap,r=t.actions,n=t.events,s=t.documentEvents,a=ra(t,["bootstrap","actions","events","documentEvents"]);return e&&(i.bootstrap=o(i.bootstrap,e)),r&&Object.keys(r).forEach(function(t){var e=r[t],n=i.actions[t];e&&n?i.actions[t]=o(n,e):e&&(i.actions[t]=o(e))}),n&&(i.events=ia(ia({},i.events),n)),t.documentEvents&&(i.documentEvents=ia(ia({},i.documentEvents),s)),Mi(i,a)},Cu.prototype.init=function(){},Cu.prototype.onRemove=function(){this.removeTools()},Object.defineProperty(Cu.prototype,"priority",{get:function(){return this.options.priority},enumerable:!1,configurable:!0}),Object.defineProperty(Cu.prototype,"rootSelector",{get:function(){return this.options.rootSelector},enumerable:!1,configurable:!0}),Cu.prototype.getConstructor=function(){return this.constructor},Cu.prototype.ensureOptions=function(t){return this.getConstructor().getOptions(t)},Cu.prototype.getContainerTagName=function(){return this.options.isSvgElement?"g":"div"},Cu.prototype.getContainerStyle=function(){},Cu.prototype.getContainerAttrs=function(){return{"data-cell-id":this.cell.id,"data-shape":this.cell.shape}},Cu.prototype.getContainerClassName=function(){return this.prefixClassName("cell")},Cu.prototype.ensureContainer=function(){return U.View.createElement(this.getContainerTagName(),this.options.isSvgElement)},Cu.prototype.setContainer=function(t){var e;return this.container!==t&&(this.undelegateEvents(),this.container=t,null!=this.options.events&&this.delegateEvents(this.options.events),null!=(e=this.getContainerAttrs())&&this.setAttrs(e,t),null!=(e=this.getContainerStyle())&&this.setStyle(e,t),null!=(e=this.getContainerClassName())&&this.addClass(e,t)),this},Cu.prototype.isNodeView=function(){return!1},Cu.prototype.isEdgeView=function(){return!1},Cu.prototype.render=function(){return this},Cu.prototype.confirmUpdate=function(t,e){return 0},Cu.prototype.getBootstrapFlag=function(){return this.flag.getBootstrapFlag()},Cu.prototype.getFlag=function(t){return this.flag.getFlag(t)},Cu.prototype.hasAction=function(t,e){return this.flag.hasAction(t,e)},Cu.prototype.removeAction=function(t,e){return this.flag.removeAction(t,e)},Cu.prototype.handleAction=function(t,e,n,o){if(this.hasAction(t,e)){n();e=[e];return o&&("string"==typeof o?e.push(o):e.push.apply(e,o)),this.removeAction(t,e)}return t},Cu.prototype.setup=function(){var e=this;this.cell.on("changed",function(t){t=t.options;return e.onAttrsChange(t)})},Cu.prototype.onAttrsChange=function(t){var e=this.flag.getChangedFlag();!t.updated&&e&&(t.dirty&&this.hasAction(e,"update")&&(e|=this.getFlag("render")),t.toolId&&(t.async=!1),null!=this.graph&&this.graph.renderer.requestViewUpdate(this,e,this.priority,t))},Cu.prototype.parseJSONMarkup=function(t,e){var n=U.Markup.parseJSONMarkup(t),o=n.selectors,t=this.rootSelector;if(e&&t){if(o[t])throw new Error("Invalid root selector");o[t]=e}return n},Cu.prototype.can=function(t){var e=this.options.interacting;return"object"==typeof(e="function"==typeof e?Gr(e,this.graph,this):e)?!1!==e[t]:"boolean"==typeof e&&e},Cu.prototype.setInteracting=function(t){return this.options.interacting=t,this},Cu.prototype.cleanCache=function(){return this.cache.clean(),this},Cu.prototype.getCache=function(t){return this.cache.get(t)},Cu.prototype.getDataOfElement=function(t){return this.cache.getData(t)},Cu.prototype.getMatrixOfElement=function(t){return this.cache.getMatrix(t)},Cu.prototype.getShapeOfElement=function(t){return this.cache.getShape(t)},Cu.prototype.getScaleOfElement=function(t,e){var n,o;return o=e&&e.contains(t)?(n=1/(o=gc(e)).sx,1/o.sy):n=1,{sx:n,sy:o}},Cu.prototype.getBoundingRectOfElement=function(t){return this.cache.getBoundingRect(t)},Cu.prototype.getBBoxOfElement=function(t){var e=this.getBoundingRectOfElement(t),n=this.getMatrixOfElement(t),t=this.getRootRotatedMatrix();return Ql(e,this.getRootTranslatedMatrix().multiply(t).multiply(n))},Cu.prototype.getUnrotatedBBoxOfElement=function(t){var e=this.getBoundingRectOfElement(t),t=this.getMatrixOfElement(t);return Ql(e,this.getRootTranslatedMatrix().multiply(t))},Cu.prototype.getBBox=function(t){var e;return void 0===t&&(t={}),e=t.useCellGeometry?(e=(t=this.cell).isNode()?t.getAngle():0,t.getBBox().bbox(e)):this.getBBoxOfElement(this.container),this.graph.localToGraph(e)},Cu.prototype.getRootTranslatedMatrix=function(){var t=this.cell,t=t.isNode()?t.getPosition():{x:0,y:0};return _l().translate(t.x,t.y)},Cu.prototype.getRootRotatedMatrix=function(){var t,e=_l(),n=this.cell,o=n.isNode()?n.getAngle():0;return o&&(n=(t=n.getBBox()).width/2,t=t.height/2,e=e.translate(n,t).rotate(o).translate(-n,-t)),e},Cu.prototype.findMagnet=function(t){return void 0===t&&(t=this.container),this.findByAttr("magnet",t)},Cu.prototype.updateAttrs=function(t,e,n){void 0===n&&(n={}),null==n.rootBBox&&(n.rootBBox=new U.Rectangle),null==n.selectors&&(n.selectors=this.selectors),this.attr.update(t,e,n)},Cu.prototype.isEdgeElement=function(t){return this.cell.isEdge()&&(null==t||t===this.container)},Cu.prototype.prepareHighlight=function(t,e){void 0===e&&(e={});t=t&&this.$(t)[0]||this.container;return e.partial=t===this.container,t},Cu.prototype.highlight=function(t,e){void 0===e&&(e={});t=this.prepareHighlight(t,e);return this.notify("cell:highlight",{magnet:t,options:e,view:this,cell:this.cell}),this.isEdgeView()?this.notify("edge:highlight",{magnet:t,options:e,view:this,edge:this.cell,cell:this.cell}):this.isNodeView()&&this.notify("node:highlight",{magnet:t,options:e,view:this,node:this.cell,cell:this.cell}),this},Cu.prototype.unhighlight=function(t,e){void 0===e&&(e={});t=this.prepareHighlight(t,e);return this.notify("cell:unhighlight",{magnet:t,options:e,view:this,cell:this.cell}),this.isNodeView()?this.notify("node:unhighlight",{magnet:t,options:e,view:this,node:this.cell,cell:this.cell}):this.isEdgeView()&&this.notify("edge:unhighlight",{magnet:t,options:e,view:this,edge:this.cell,cell:this.cell}),this},Cu.prototype.notifyUnhighlight=function(t,e){},Cu.prototype.getEdgeTerminal=function(t,e,n,o,i){var r=this.cell,s=this.findAttr("port",t),a=t.getAttribute("data-selector"),l={cell:r.id};return null!=a&&(l.magnet=a),null!=s?(l.port=s,r.isNode()&&(r.hasPort(s)||null!=a||(l.selector=this.getSelector(t)))):null==a&&this.container!==t&&(l.selector=this.getSelector(t)),this.customizeEdgeTerminal(l,t,e,n,o,i)},Cu.prototype.customizeEdgeTerminal=function(t,e,n,o,i,r){var s=i.getStrategy()||this.graph.options.connecting.strategy;if(s){var a="string"==typeof s?s:s.name,l="string"!=typeof s&&s.args||{},c=Jh.registry;if(a){s=c.get(a);if(null==s)return c.onNotFound(a);l=Gr(s,this.graph,t,this,e,new U.Point(n,o),i,r,l);if(l)return l}}return t},Cu.prototype.getMagnetFromEdgeTerminal=function(t){var e=this.cell,n=this.container,o=t.port,i=t.magnet,n=null!=o&&e.isNode()&&e.hasPort(o)?this.findPortElem(o,i)||n:((i=i||t.selector)||null==o||(i='[port="'+o+'"]'),this.findOne(i,n,this.selectors));return n},Cu.prototype.animate=function(t,e){var n="string"==typeof t?this.findOne(t):t;if(null==n)throw new Error("Invalid animation element.");var o=n.parentNode,t=U.Vector.create(n);o||t.appendTo(this.graph.view.stage);var i=e.complete;return e.complete=function(t){o||vs(n),i&&i(t)},t.animate(e)},Cu.prototype.animateTransform=function(t,e){var n="string"==typeof t?this.findOne(t):t;if(null==n)throw new Error("Invalid animation element.");var o=n.parentNode,t=U.Vector.create(n);o||t.appendTo(this.graph.view.stage);var i=e.complete;return e.complete=function(t){o||vs(n),i&&i(t)},t.animateTransform(e)},Cu.prototype.hasTools=function(t){var e=this.tools;return null!=e&&(null==t||e.name===t)},Cu.prototype.addTools=function(t){return this.removeTools(),t&&(t=t instanceof U.ToolsView?t:new U.ToolsView(t),this.tools=t,this.graph.on("tools:hide",this.hideTools,this),this.graph.on("tools:show",this.showTools,this),this.graph.on("tools:remove",this.removeTools,this),t.config({view:this}),t.mount()),this},Cu.prototype.updateTools=function(t){return void 0===t&&(t={}),this.tools&&this.tools.update(t),this},Cu.prototype.removeTools=function(){return this.tools&&(this.tools.remove(),this.graph.off("tools:hide",this.hideTools,this),this.graph.off("tools:show",this.showTools,this),this.graph.off("tools:remove",this.removeTools,this),this.tools=null),this},Cu.prototype.hideTools=function(){return this.tools&&this.tools.hide(),this},Cu.prototype.showTools=function(){return this.tools&&this.tools.show(),this},Cu.prototype.renderTools=function(){var t=this.cell.getTools();return this.addTools(t),this},Cu.prototype.notify=function(t,e){return this.trigger(t,e),this.graph.trigger(t,e),this},Cu.prototype.getEventArgs=function(t,e,n){var o=this.cell;return null==e||null==n?{e:t,view:this,cell:o}:{e:t,x:e,y:n,view:this,cell:o}},Cu.prototype.onClick=function(t,e,n){this.notify("cell:click",this.getEventArgs(t,e,n))},Cu.prototype.onDblClick=function(t,e,n){this.notify("cell:dblclick",this.getEventArgs(t,e,n))},Cu.prototype.onContextMenu=function(t,e,n){this.notify("cell:contextmenu",this.getEventArgs(t,e,n))},Cu.prototype.onMouseDown=function(t,e,n){this.cell.model&&(this.cachedModelForMouseEvent=this.cell.model,this.cachedModelForMouseEvent.startBatch("mouse")),this.notify("cell:mousedown",this.getEventArgs(t,e,n))},Cu.prototype.onMouseUp=function(t,e,n){this.notify("cell:mouseup",this.getEventArgs(t,e,n)),this.cachedModelForMouseEvent&&(this.cachedModelForMouseEvent.stopBatch("mouse",{cell:this.cell}),this.cachedModelForMouseEvent=null)},Cu.prototype.onMouseMove=function(t,e,n){this.notify("cell:mousemove",this.getEventArgs(t,e,n))},Cu.prototype.onMouseOver=function(t){this.notify("cell:mouseover",this.getEventArgs(t))},Cu.prototype.onMouseOut=function(t){this.notify("cell:mouseout",this.getEventArgs(t))},Cu.prototype.onMouseEnter=function(t){this.notify("cell:mouseenter",this.getEventArgs(t))},Cu.prototype.onMouseLeave=function(t){this.notify("cell:mouseleave",this.getEventArgs(t))},Cu.prototype.onMouseWheel=function(t,e,n,o){this.notify("cell:mousewheel",ia({delta:o},this.getEventArgs(t,e,n)))},Cu.prototype.onCustomEvent=function(t,e,n,o){this.notify("cell:customevent",ia({name:e},this.getEventArgs(t,n,o))),this.notify(e,ia({},this.getEventArgs(t,n,o)))},Cu.prototype.onMagnetMouseDown=function(t,e,n,o){},Cu.prototype.onMagnetDblClick=function(t,e,n,o){},Cu.prototype.onMagnetContextMenu=function(t,e,n,o){},Cu.prototype.onLabelMouseDown=function(t,e,n){},Cu.prototype.checkMouseleave=function(t){var e=this.graph;e.renderer.isAsync()&&e.renderer.dumpView(this);var n=this.getEventTarget(t,{fromPoint:!0}),n=e.renderer.findViewByElem(n);n!==this&&(this.onMouseLeave(t),n&&n.onMouseEnter(t))},Cu.defaults={isSvgElement:!0,rootSelector:"root",priority:0,bootstrap:[],actions:{}},Cu),(cn=U.CellView||(U.CellView={})).Flag=uu,cn.Attr=hu,(on=U.CellView||(U.CellView={})).priority=function(e){return function(t){t.config({priority:e})}},on.bootstrap=function(e){return function(t){t.config({bootstrap:e})}},(U.CellView||(U.CellView={})).registry=Kc.create({type:"view"}),U.ToolsView=(oa(mu,lu=U.View),Object.defineProperty(mu.prototype,"name",{get:function(){return this.options.name},enumerable:!1,configurable:!0}),Object.defineProperty(mu.prototype,"graph",{get:function(){return this.cellView.graph},enumerable:!1,configurable:!0}),Object.defineProperty(mu.prototype,"cell",{get:function(){return this.cellView.cell},enumerable:!1,configurable:!0}),Object.defineProperty(mu.prototype,"local",{get:function(){return this.options.local},enumerable:!1,configurable:!0}),mu.prototype.config=function(t){if(this.options=ia(ia({},this.options),t),!(t.view instanceof U.CellView)||t.view===this.cellView)return this;this.cellView=t.view,this.cell.isEdge()?Qr(this.container,this.prefixClassName("edge-tools")):this.cell.isNode()&&Qr(this.container,this.prefixClassName("node-tools")),this.container.setAttribute("data-cell-id",this.cell.id),this.name&&this.container.setAttribute("data-tools-name",this.name);var e=this.options.items;if(!Array.isArray(e))return this;this.tools=[];for(var n=0;n<e.length;n+=1){var o=e[n],i=void 0;if(o instanceof mu.ToolItem)i=o;else{var r,s="object"==typeof o?o.name:o,o="object"==typeof o&&o.args||{};if(s)if(this.cell.isNode()){if(!(r=Iu.registry.get(s)))return Iu.registry.onNotFound(s);i=new r(o)}else if(this.cell.isEdge()){if(!(r=Ru.registry.get(s)))return Ru.registry.onNotFound(s);i=new r(o)}}i&&(i.config(this.cellView,this),i.render(),!1!==i.options.isSVGElement&&this.container.appendChild(i.container),this.tools.push(i))}return this},mu.prototype.update=function(e){void 0===e&&(e={});var t=this.tools;return t&&t.forEach(function(t){e.toolId!==t.cid&&t.isVisible()&&t.update()}),this},mu.prototype.focus=function(e){var t=this.tools;return t&&t.forEach(function(t){e===t?t.show():t.hide()}),this},mu.prototype.blur=function(e){var t=this.tools;return t&&t.forEach(function(t){t===e||t.isVisible()||(t.show(),t.update())}),this},mu.prototype.hide=function(){return this.focus(null)},mu.prototype.show=function(){return this.blur(null)},mu.prototype.remove=function(){var t=this.tools;return t&&(t.forEach(function(t){return t.remove()}),this.tools=null),lu.prototype.remove.call(this)},mu.prototype.mount=function(){var t=this.cellView;return t&&(this.local?t.container:t.graph.view.decorator).appendChild(this.container),this},mu),rn=U.ToolsView||(U.ToolsView={}),oa(yu,au=U.View),yu.getDefaults=function(){return this.defaults},yu.config=function(t){this.defaults=this.getOptions(t)},yu.getOptions=function(t){return Mi(mo(this.getDefaults()),t)},Object.defineProperty(yu.prototype,"graph",{get:function(){return this.cellView.graph},enumerable:!1,configurable:!0}),Object.defineProperty(yu.prototype,"cell",{get:function(){return this.cellView.cell},enumerable:!1,configurable:!0}),Object.defineProperty(yu.prototype,"name",{get:function(){return this.options.name},enumerable:!1,configurable:!0}),yu.prototype.getOptions=function(t){return this.constructor.getOptions(t)},yu.prototype.init=function(){},yu.prototype.delegateEvents=function(){return this.options.events&&au.prototype.delegateEvents.call(this,this.options.events),this},yu.prototype.config=function(t,e){return this.cellView=t,this.parent=e,this.stamp(this.container),this.cell.isEdge()?Qr(this.container,this.prefixClassName("edge-tool")):this.cell.isNode()&&Qr(this.container,this.prefixClassName("node-tool")),this.name&&this.container.setAttribute("data-tool-name",this.name),this.delegateEvents(),this},yu.prototype.render=function(){this.empty();var t=this.options.markup;return t&&(t=U.Markup.isStringMarkup(t)?U.Markup.parseStringMarkup(t):U.Markup.parseJSONMarkup(t),this.container.appendChild(t.fragment),this.childNodes=t.selectors),this.onRender(),this},yu.prototype.onRender=function(){},yu.prototype.update=function(){return this},yu.prototype.stamp=function(t){void 0===t&&(t=this.container),t&&t.setAttribute("data-cell-id",this.cellView.cell.id)},yu.prototype.show=function(){return this.container.style.display="",this.visible=!0,this},yu.prototype.hide=function(){return this.container.style.display="none",this.visible=!1,this},yu.prototype.isVisible=function(){return this.visible},yu.prototype.focus=function(){var t=this.options.focusOpacity;return null!=t&&isFinite(t)&&(this.container.style.opacity=""+t),this.parent.focus(this),this},yu.prototype.blur=function(){return this.container.style.opacity="",this.parent.blur(this),this},yu.prototype.guard=function(t){return null==this.graph||null==this.cellView||this.graph.view.guard(t,this.cellView)},yu.defaults={isSVGElement:!0,tagName:"g"},un=yu,rn.ToolItem=un,dn=un=rn.ToolItem||(rn.ToolItem={}),su=0,dn.define=function(t){var e=Mr((e=t.name)?Lr(e):"CustomTool"+(su+=1),this);return e.config(t),e};var vu,fn=(oa(bu,vu=U.ToolsView.ToolItem),bu.prototype.onRender=function(){Qr(this.container,this.prefixClassName("cell-tool-button")),this.update()},bu.prototype.update=function(){return this.updatePosition(),this},bu.prototype.updatePosition=function(){var t=this.cellView.cell.isEdge()?this.getEdgeMatrix():this.getNodeMatrix();uc(this.container,t,{absolute:!0})},bu.prototype.getNodeMatrix=function(){var t=this.cellView,e=this.options,n=e.x,o=void 0===n?0:n,i=e.y,r=void 0===i?0:i,s=e.offset,a=e.useCellGeometry,n=e.rotate,i=fu(t,a),e=t.cell.getAngle();n||(i=i.bbox(e));a=0,t=0;"number"==typeof s?t=a=s:"object"==typeof s&&(a=s.x,t=s.y),o=jr(o,i.width),r=jr(r,i.height);s=_l().translate(i.x+i.width/2,i.y+i.height/2);return n&&(s=s.rotate(e)),s.translate(o+a-i.width/2,r+t-i.height/2)},bu.prototype.getEdgeMatrix=function(){var t=this.cellView,e=this.options,n=e.offset,o=void 0===n?0:n,n=e.distance,n=void 0===n?0:n,e=e.rotate,t=(n=Vr(n)?t.getTangentAtRatio(parseFloat(n)/100):t.getTangentAtLength(n))?(i=n.start,n.vector().vectorAngle(new U.Point(1,0))||0):(i=t.getConnection().start,0),i=_l().translate(i.x,i.y).rotate(t),i="object"==typeof o?i.translate(o.x||0,o.y||0):i.translate(0,o);return e||(i=i.rotate(-t)),i},bu.prototype.onMouseDown=function(t){var e;this.guard(t)||(t.stopPropagation(),t.preventDefault(),"function"==typeof(e=this.options.onClick)&&Gr(e,this.cellView,{e:t,view:this.cellView,cell:this.cellView.cell,btn:this}))},bu);function bu(){return null!==vu&&vu.apply(this,arguments)||this}(fn=fn||{}).config({name:"button",events:{mousedown:"onMouseDown",touchstart:"onMouseDown"}}),(yn=fn=fn||{}).Remove=yn.define({name:"button-remove",markup:[{tagName:"circle",selector:"button",attrs:{r:7,fill:"#FF1D00",cursor:"pointer"}},{tagName:"path",selector:"icon",attrs:{d:"M -3 -3 3 3 M -3 3 3 -3",fill:"none",stroke:"#FFFFFF","stroke-width":2,"pointer-events":"none"}}],distance:60,offset:0,onClick:function(t){var e=t.view,t=t.btn;t.parent.remove(),e.cell.remove({ui:!0,toolId:t.cid})}});var xu,hn=(oa(wu,xu=U.ToolsView.ToolItem),wu.prototype.onRender=function(){var t,e;Qr(this.container,this.prefixClassName("cell-tool-boundary")),this.options.attrs&&(t=(e=this.options.attrs).class,e=ra(e,["class"]),Fs(this.container,Ls(e)),t&&Qr(this.container,t)),this.update()},wu.prototype.update=function(){var t=this.cellView,e=this.options,n=e.useCellGeometry,o=e.rotate,e=Rr(e.padding),n=fu(t,n).moveAndExpand({x:-e.left,y:-e.top,width:e.left+e.right,height:e.top+e.bottom}),e=t.cell;return!e.isNode()||(t=e.getAngle())&&(o?(e=e.getBBox().getCenter(),dc(this.container,t,e.x,e.y,{absolute:!0})):n=n.bbox(t)),Fs(this.container,n.toJSON()),this},wu);function wu(){return null!==xu&&xu.apply(this,arguments)||this}(hn=hn||{}).config({name:"boundary",tagName:"rect",padding:10,attrs:{fill:"none",stroke:"#333","stroke-width":.5,"stroke-dasharray":"5, 5","pointer-events":"none"}});var Eu,Au,Pu,Du,mn=(oa(Mu,Eu=U.ToolsView.ToolItem),Object.defineProperty(Mu.prototype,"vertices",{get:function(){return this.cellView.cell.getVertices()},enumerable:!1,configurable:!0}),Mu.prototype.onRender=function(){return this.addClass(this.prefixClassName("edge-tool-vertices")),this.options.addable&&this.updatePath(),this.resetHandles(),this.renderHandles(),this},Mu.prototype.update=function(){return this.vertices.length===this.handles.length?this.updateHandles():(this.resetHandles(),this.renderHandles()),this.options.addable&&this.updatePath(),this},Mu.prototype.resetHandles=function(){var e=this,t=this.handles;this.handles=[],t&&t.forEach(function(t){e.stopHandleListening(t),t.remove()})},Mu.prototype.renderHandles=function(){for(var e=this,t=this.vertices,n=0,o=t.length;n<o;n+=1){var i=t[n],r=this.options.createHandle,s=this.options.processHandle,r=r({index:n,graph:this.graph,guard:function(t){return e.guard(t)},attrs:this.options.attrs||{}});s&&s(r),this.graph.hook.onToolItemCreated({name:"vertices",cell:this.cell,view:this.cellView,tool:r}),r.updatePosition(i.x,i.y),this.stamp(r.container),this.container.appendChild(r.container),this.handles.push(r),this.startHandleListening(r)}},Mu.prototype.updateHandles=function(){for(var t=this.vertices,e=0,n=t.length;e<n;e+=1){var o=t[e],i=this.handles[e];i&&i.updatePosition(o.x,o.y)}},Mu.prototype.updatePath=function(){var t=this.childNodes.connection;t&&t.setAttribute("d",this.cellView.getConnectionPathData())},Mu.prototype.startHandleListening=function(t){var e=this.cellView;e.can("vertexMovable")&&(t.on("change",this.onHandleChange,this),t.on("changing",this.onHandleChanging,this),t.on("changed",this.onHandleChanged,this)),e.can("vertexDeletable")&&t.on("remove",this.onHandleRemove,this)},Mu.prototype.stopHandleListening=function(t){var e=this.cellView;e.can("vertexMovable")&&(t.off("change",this.onHandleChange,this),t.off("changing",this.onHandleChanging,this),t.off("changed",this.onHandleChanged,this)),e.can("vertexDeletable")&&t.off("remove",this.onHandleRemove,this)},Mu.prototype.getNeighborPoints=function(t){var e=this.cellView,n=this.vertices,o=0<t?n[t-1]:e.sourceAnchor,e=t<n.length-1?n[t+1]:e.targetAnchor;return{prev:U.Point.create(o),next:U.Point.create(e)}},Mu.prototype.getMouseEventArgs=function(t){var e=this.normalizeEvent(t),t=this.graph.snapToGrid(e.clientX,e.clientY);return{e:e,x:t.x,y:t.y}},Mu.prototype.onHandleChange=function(t){var e=t.e;this.focus();var n,o=this.cellView;o.cell.startBatch("move-vertex",{ui:!0,toolId:this.cid}),this.options.stopPropagation||(t=(n=this.getMouseEventArgs(e)).e,e=n.x,n=n.y,o.notifyMouseDown(t,e,n))},Mu.prototype.onHandleChanging=function(t){var e=t.handle,n=t.e,o=this.cellView,i=e.options.index,r=this.getMouseEventArgs(n),s=r.e,t=r.x,n=r.y,r={x:t,y:n};this.snapVertex(r,i),o.cell.setVertexAt(i,r,{ui:!0,toolId:this.cid}),e.updatePosition(r.x,r.y),this.options.stopPropagation||o.notifyMouseMove(s,t,n)},Mu.prototype.onHandleChanged=function(t){var e=t.e,n=this.options,o=this.cellView;n.addable&&this.updatePath(),n.removeRedundancies&&(o.removeRedundantLinearVertices({ui:!0,toolId:this.cid})&&this.render(),this.blur(),o.cell.stopBatch("move-vertex",{ui:!0,toolId:this.cid}),this.eventData(e).vertexAdded&&o.cell.stopBatch("add-vertex",{ui:!0,toolId:this.cid}),n=(t=this.getMouseEventArgs(e)).e,e=t.x,t=t.y,this.options.stopPropagation||o.notifyMouseUp(n,e,t),o.checkMouseleave(n))},Mu.prototype.snapVertex=function(t,e){var n,o,i=this.options.snapRadius||0;0<i&&(o=(n=this.getNeighborPoints(e)).prev,e=n.next,Math.abs(t.x-o.x)<i?t.x=o.x:Math.abs(t.x-e.x)<i&&(t.x=e.x),Math.abs(t.y-o.y)<i?t.y=n.prev.y:Math.abs(t.y-e.y)<i&&(t.y=e.y))},Mu.prototype.onHandleRemove=function(t){var e=t.handle,n=t.e;this.options.removable&&(t=e.options.index,(e=this.cellView).cell.removeVertexAt(t,{ui:!0}),this.options.addable&&this.updatePath(),e.checkMouseleave(this.normalizeEvent(n)))},Mu.prototype.onPathMouseDown=function(t){var e,n,o;!this.guard(t)&&this.options.addable&&(t.stopPropagation(),t.preventDefault(),e=this.normalizeEvent(t),n=this.graph.snapToGrid(e.clientX,e.clientY).toJSON(),(o=this.cellView).cell.startBatch("add-vertex",{ui:!0,toolId:this.cid}),t=o.getVertexIndex(n.x,n.y),this.snapVertex(n,t),o.cell.setVertexAt(t,n,{ui:!0,toolId:this.cid}),this.render(),t=this.handles[t],this.eventData(e,{vertexAdded:!0}),t.onMouseDown(e))},Mu.prototype.onRemove=function(){this.resetHandles()},Mu);function Mu(){var t=null!==Eu&&Eu.apply(this,arguments)||this;return t.handles=[],t}function Su(t){var e=Du.call(this)||this;return e.options=t,e.render(),e.delegateEvents({mousedown:"onMouseDown",touchstart:"onMouseDown",dblclick:"onDoubleClick"}),e}Pu=mn=mn||{},oa(Su,Du=U.View),Object.defineProperty(Su.prototype,"graph",{get:function(){return this.options.graph},enumerable:!1,configurable:!0}),Su.prototype.render=function(){this.container=U.View.createElement("circle",!0);var t,e=this.options.attrs;"function"==typeof e?(t=Pu.getDefaults(),this.setAttrs(ia(ia({},t.attrs),e(this)))):this.setAttrs(e),this.addClass(this.prefixClassName("edge-tool-vertex"))},Su.prototype.updatePosition=function(t,e){this.setAttrs({cx:t,cy:e})},Su.prototype.onMouseDown=function(t){this.options.guard(t)||(t.stopPropagation(),t.preventDefault(),this.graph.view.undelegateEvents(),this.delegateDocumentEvents({mousemove:"onMouseMove",touchmove:"onMouseMove",mouseup:"onMouseUp",touchend:"onMouseUp",touchcancel:"onMouseUp"},t.data),this.emit("change",{e:t,handle:this}))},Su.prototype.onMouseMove=function(t){this.emit("changing",{e:t,handle:this})},Su.prototype.onMouseUp=function(t){this.emit("changed",{e:t,handle:this}),this.undelegateDocumentEvents(),this.graph.view.delegateEvents()},Su.prototype.onDoubleClick=function(t){this.emit("remove",{e:t,handle:this})},pn=Su,Pu.Handle=pn,Au=mn=mn||{},wr=U.Util.prefix("edge-tool-vertex-path"),Au.config({name:"vertices",snapRadius:20,addable:!0,removable:!0,removeRedundancies:!0,stopPropagation:!0,attrs:{r:6,fill:"#333",stroke:"#fff",cursor:"move","stroke-width":2},createHandle:function(t){return new Au.Handle(t)},markup:[{tagName:"path",selector:"connection",className:wr,attrs:{fill:"none",stroke:"transparent","stroke-width":10,cursor:"pointer"}}],events:((an={})["mousedown ."+wr]="onPathMouseDown",an["touchstart ."+wr]="onPathMouseDown",an)});var ku,Fu,Tu,Lu,Ue=(oa(Nu,ku=U.ToolsView.ToolItem),Object.defineProperty(Nu.prototype,"vertices",{get:function(){return this.cellView.cell.getVertices()},enumerable:!1,configurable:!0}),Nu.prototype.update=function(){return this.render(),this},Nu.prototype.onRender=function(){Qr(this.container,this.prefixClassName("edge-tool-segments")),this.resetHandles();var t=this.cellView,e=aa(this.vertices);e.unshift(t.sourcePoint),e.push(t.targetPoint);for(var n=0,o=e.length;n<o-1;n+=1){var i=e[n],r=e[n+1],r=this.renderHandle(i,r,n);this.stamp(r.container),this.handles.push(r)}return this},Nu.prototype.renderHandle=function(t,e,n){var o=this,n=this.options.createHandle({index:n,graph:this.graph,guard:function(t){return o.guard(t)},attrs:this.options.attrs||{}});return this.options.processHandle&&this.options.processHandle(n),this.graph.hook.onToolItemCreated({name:"segments",cell:this.cell,view:this.cellView,tool:n}),this.updateHandle(n,t,e),this.container.appendChild(n.container),this.startHandleListening(n),n},Nu.prototype.startHandleListening=function(t){t.on("change",this.onHandleChange,this),t.on("changing",this.onHandleChanging,this),t.on("changed",this.onHandleChanged,this)},Nu.prototype.stopHandleListening=function(t){t.off("change",this.onHandleChange,this),t.off("changing",this.onHandleChanging,this),t.off("changed",this.onHandleChanged,this)},Nu.prototype.resetHandles=function(){var e=this,t=this.handles;this.handles=[],t&&t.forEach(function(t){e.stopHandleListening(t),t.remove()})},Nu.prototype.shiftHandleIndexes=function(t){for(var e=this.handles,n=0,o=e.length;n<o;n+=1)e[n].options.index+=t},Nu.prototype.resetAnchor=function(t,e){var n=this.cellView.cell,o={ui:!0,toolId:this.cid};e?n.prop([t,"anchor"],e,o):n.removeProp([t,"anchor"],o)},Nu.prototype.snapHandle=function(t,e,n){var o=t.options.axis,i=t.options.index,r=this.cellView.cell.getVertices(),t=r[i-2]||n.sourceAnchor,i=r[i+1]||n.targetAnchor,n=this.options.snapRadius;return Math.abs(e[o]-t[o])<n?e[o]=t[o]:Math.abs(e[o]-i[o])<n&&(e[o]=i[o]),e},Nu.prototype.onHandleChanging=function(t){var e=t.handle,n=t.e,o=this.graph,i=this.options,r=this.cellView,s=i.anchor,a=e.options.axis,l=e.options.index-1,c=this.getEventData(n),h=this.normalizeEvent(n),u=o.snapToGrid(h.clientX,h.clientY),p=this.snapHandle(e,u.clone(),c),d=mo(this.vertices),g=d[l],f=d[1+l],y=r.sourceView,t=r.sourceBBox,n=!1,o=!1;g?0==l?t.containsPoint(g)?(d.shift(),this.shiftHandleIndexes(-1),n=!0):(g[a]=p[a],o=!0):g[a]=p[a]:((g=r.sourceAnchor.toJSON())[a]=p[a],t.containsPoint(g)?n=!0:(d.unshift(g),this.shiftHandleIndexes(1),o=!0)),"function"==typeof s&&y&&(n&&((m=c.sourceAnchor.clone())[a]=p[a],C=Gr(s,r,m,y,r.sourceMagnet||y.container,"source",r,this),this.resetAnchor("source",C)),o&&this.resetAnchor("source",c.sourceAnchorDef));var m=r.targetView,y=r.targetBBox,C=!1,o=!1;f?l==d.length-2?y.containsPoint(f)?(d.pop(),C=!0):(f[a]=p[a],o=!0):f[a]=p[a]:((f=r.targetAnchor.toJSON())[a]=p[a],y.containsPoint(f)?C=!0:(d.push(f),o=!0)),"function"==typeof s&&m&&(C&&((C=c.targetAnchor.clone())[a]=p[a],m=Gr(s,r,C,m,r.targetMagnet||m.container,"target",r,this),this.resetAnchor("target",m)),o&&this.resetAnchor("target",c.targetAnchorDef)),U.Point.equalPoints(d,this.vertices)||this.cellView.cell.setVertices(d,{ui:!0,toolId:this.cid}),this.updateHandle(e,g,f,0),i.stopPropagation||r.notifyMouseMove(h,u.x,u.y)},Nu.prototype.onHandleChange=function(t){var e=t.handle,n=t.e,o=this.options,i=this.handles,t=this.cellView,r=e.options.index;if(Array.isArray(i)){for(var s=0,a=i.length;s<a;s+=1)s!==r&&i[s].hide();this.focus(),this.setEventData(n,{sourceAnchor:t.sourceAnchor.clone(),targetAnchor:t.targetAnchor.clone(),sourceAnchorDef:mo(this.cell.prop(["source","anchor"])),targetAnchorDef:mo(this.cell.prop(["target","anchor"]))}),this.cell.startBatch("move-segment",{ui:!0,toolId:this.cid}),o.stopPropagation||(o=this.normalizeEvent(n),n=this.graph.snapToGrid(o.clientX,o.clientY),t.notifyMouseDown(o,n.x,n.y))}},Nu.prototype.onHandleChanged=function(t){var e=t.e,n=this.options,o=this.cellView;n.removeRedundancies&&o.removeRedundantLinearVertices({ui:!0,toolId:this.cid});t=this.normalizeEvent(e),e=this.graph.snapToGrid(t.clientX,t.clientY);this.render(),this.blur(),this.cell.stopBatch("move-segment",{ui:!0,toolId:this.cid}),n.stopPropagation||o.notifyMouseUp(t,e.x,e.y),o.checkMouseleave(t)},Nu.prototype.updateHandle=function(t,e,n,o){void 0===o&&(o=0);var i,r=this.options.precision||0,s=Math.abs(e.x-n.x)<r,r=Math.abs(e.y-n.y)<r;!s&&!r||(i=new La(e,n)).length()<this.options.threshold?t.hide():((n=i.getCenter())[s=s?"x":"y"]+=o||0,i=i.vector().vectorAngle(new U.Point(1,0)),t.updatePosition(n.x,n.y,i,this.cellView),t.show(),t.options.axis=s)},Nu.prototype.onRemove=function(){this.resetHandles()},Nu);function Nu(){var t=null!==ku&&ku.apply(this,arguments)||this;return t.handles=[],t}function Ou(t){var e=Lu.call(this)||this;return e.options=t,e.render(),e.delegateEvents({mousedown:"onMouseDown",touchstart:"onMouseDown"}),e}Tu=Ue=Ue||{},oa(Ou,Lu=U.View),Ou.prototype.render=function(){this.container=U.View.createElement("rect",!0);var t,e=this.options.attrs;"function"==typeof e?(t=Tu.getDefaults(),this.setAttrs(ia(ia({},t.attrs),e(this)))):this.setAttrs(e),this.addClass(this.prefixClassName("edge-tool-segment"))},Ou.prototype.updatePosition=function(t,e,n,o){var i=o.getClosestPoint(new U.Point(t,e))||new U.Point(t,e),o=_l().translate(i.x,i.y),o=i.equals({x:t,y:e})?o.rotate(n):(0!==(i=new La(t,e,i.x,i.y).vector().vectorAngle(new U.Point(1,0)))&&(i+=90),o.rotate(i));this.setAttrs({transform:Ul(o),cursor:n%180==0?"row-resize":"col-resize"})},Ou.prototype.onMouseDown=function(t){this.options.guard(t)||(this.trigger("change",{e:t,handle:this}),t.stopPropagation(),t.preventDefault(),this.options.graph.view.undelegateEvents(),this.delegateDocumentEvents({mousemove:"onMouseMove",touchmove:"onMouseMove",mouseup:"onMouseUp",touchend:"onMouseUp",touchcancel:"onMouseUp"},t.data))},Ou.prototype.onMouseMove=function(t){this.emit("changing",{e:t,handle:this})},Ou.prototype.onMouseUp=function(t){this.emit("changed",{e:t,handle:this}),this.undelegateDocumentEvents(),this.options.graph.view.delegateEvents()},Ou.prototype.show=function(){this.container.style.display=""},Ou.prototype.hide=function(){this.container.style.display="none"},ch=Ou,Tu.Handle=ch,(Fu=Ue=Ue||{}).config({name:"segments",precision:.5,threshold:40,snapRadius:10,stopPropagation:!0,removeRedundancies:!0,attrs:{width:20,height:8,x:-10,y:-4,rx:4,ry:4,fill:"#333",stroke:"#fff","stroke-width":2},createHandle:function(t){return new Fu.Handle(t)},anchor:gu});var Bu,nn=(oa(zu,Bu=U.ToolsView.ToolItem),Object.defineProperty(zu.prototype,"type",{get:function(){return this.options.type},enumerable:!1,configurable:!0}),zu.prototype.onRender=function(){Qr(this.container,this.prefixClassName("edge-tool-"+this.type+"-anchor")),this.toggleArea(!1),this.update()},zu.prototype.update=function(){var t=this.type;return this.cellView.getTerminalView(t)?(this.updateAnchor(),this.updateArea(),this.container.style.display=""):this.container.style.display="none",this},zu.prototype.updateAnchor=function(){var t=this.childNodes;if(t){var e=t.anchor;if(e){var n=this.type,o=this.cellView,i=this.options,t=o.getTerminalAnchor(n),n=o.cell.prop([n,"anchor"]);e.setAttribute("transform","translate("+t.x+", "+t.y+")");var r=n?i.customAnchorAttrs:i.defaultAnchorAttrs;if(r)for(var s in r)e.setAttribute(s,r[s])}}},zu.prototype.updateArea=function(){var t,e,n,o,i,r,s,a=this.childNodes;!a||(t=a.area)&&(s=this.type,(e=(r=this.cellView).getTerminalView(s))&&(n=e.cell,o=r.getTerminalMagnet(s),i=this.options.areaPadding||0,isFinite(i)||(i=0),s=r=a=void 0,e.isEdgeElement(o)?(r=0,s=(a=e.getBBox()).getCenter()):(a=e.getUnrotatedBBoxOfElement(o),r=n.getAngle(),s=a.getCenter(),r&&s.rotate(-r,n.getBBox().getCenter())),a.inflate(i),Fs(t,{x:-a.width/2,y:-a.height/2,width:a.width,height:a.height,transform:"translate("+s.x+", "+s.y+") rotate("+r+")"})))},zu.prototype.toggleArea=function(t){var e;!this.childNodes||(e=this.childNodes.area)&&(e.style.display=t?"":"none")},zu.prototype.onMouseDown=function(t){this.guard(t)||(t.stopPropagation(),t.preventDefault(),this.graph.view.undelegateEvents(),this.options.documentEvents&&this.delegateDocumentEvents(this.options.documentEvents),this.focus(),this.toggleArea(this.options.restrictArea),this.cell.startBatch("move-anchor",{ui:!0,toolId:this.cid}))},zu.prototype.resetAnchor=function(t){var e=this.type,n=this.cell;t?n.prop([e,"anchor"],t,{rewrite:!0,ui:!0,toolId:this.cid}):n.removeProp([e,"anchor"],{ui:!0,toolId:this.cid})},zu.prototype.onMouseMove=function(t){var e,n,o,i,r,s,a,l=this.type,c=this.cellView,h=c.getTerminalView(l);null!=h&&(o=this.normalizeEvent(t),s=h.cell,n=c.getTerminalMagnet(l),t=this.graph.clientToLocal(o.clientX,o.clientY),"function"==typeof(o=this.options.snap)&&(i=Gr(o,c,t,h,n,l,c,this),t=U.Point.create(i)),this.options.restrictArea&&(h.isEdgeElement(n)?(r=h.getClosestPoint(t))&&(t=r):(i=h.getUnrotatedBBoxOfElement(n),r=s.getAngle(),a=s.getBBox().getCenter(),s=t.clone().rotate(r,a),i.containsPoint(s)||(t=i.getNearestPointToPoint(s).rotate(-r,a)))),"function"==typeof(a=this.options.anchor)&&(e=Gr(a,c,t,h,n,l,c,this)),this.resetAnchor(e),this.update())},zu.prototype.onMouseUp=function(t){this.graph.view.delegateEvents(),this.undelegateDocumentEvents(),this.blur(),this.toggleArea(!1);var e=this.cellView;this.options.removeRedundancies&&e.removeRedundantLinearVertices({ui:!0,toolId:this.cid}),this.cell.stopBatch("move-anchor",{ui:!0,toolId:this.cid})},zu.prototype.onDblClick=function(){var t=this.options.resetAnchor;t&&this.resetAnchor(!0===t?void 0:t),this.update()},zu);function zu(){return null!==Bu&&Bu.apply(this,arguments)||this}(nn||(nn={})).config({tagName:"g",markup:[{tagName:"circle",selector:"anchor",attrs:{cursor:"pointer"}},{tagName:"rect",selector:"area",attrs:{"pointer-events":"none",fill:"none",stroke:"#33334F","stroke-dasharray":"2,4",rx:5,ry:5}}],events:{mousedown:"onMouseDown",touchstart:"onMouseDown",dblclick:"onDblClick"},documentEvents:{mousemove:"onMouseMove",touchmove:"onMouseMove",mouseup:"onMouseUp",touchend:"onMouseUp",touchcancel:"onMouseUp"},customAnchorAttrs:{"stroke-width":4,stroke:"#33334F",fill:"#FFFFFF",r:5},defaultAnchorAttrs:{"stroke-width":2,stroke:"#FFFFFF",fill:"#33334F",r:6},areaPadding:6,snapRadius:10,resetAnchor:!0,restrictArea:!0,removeRedundancies:!0,anchor:gu,snap:function(t,e,n,o,i,r){var s=r.options.snapRadius||0,r="source"===o,o=r?0:-1,r=this.cell.getVertexAt(o)||this.getTerminalAnchor(r?"target":"source");return r&&(Math.abs(r.x-t.x)<s&&(t.x=r.x),Math.abs(r.y-t.y)<s&&(t.y=r.y)),t}});var Vu,cn=nn.define({name:"source-anchor",type:"source"}),on=nn.define({name:"target-anchor",type:"target"}),rn=(oa(ju,Vu=U.ToolsView.ToolItem),Object.defineProperty(ju.prototype,"type",{get:function(){return this.options.type},enumerable:!1,configurable:!0}),Object.defineProperty(ju.prototype,"ratio",{get:function(){return this.options.ratio},enumerable:!1,configurable:!0}),ju.prototype.init=function(){var t,e;this.options.attrs&&(t=(e=this.options.attrs).class,e=ra(e,["class"]),this.setAttrs(e,this.container),t&&Qr(this.container,t))},ju.prototype.onRender=function(){Qr(this.container,this.prefixClassName("edge-tool-"+this.type+"-arrowhead")),this.update()},ju.prototype.update=function(){var t=this.ratio,e=this.cellView,n=e.getTangentAtRatio(t),t=n?n.start:e.getPointAtRatio(t),n=n&&n.vector().vectorAngle(new U.Point(1,0))||0;if(!t)return this;n=_l().translate(t.x,t.y).rotate(n);return uc(this.container,n,{absolute:!0}),this},ju.prototype.onMouseDown=function(t){var e,n;this.guard(t)||(t.stopPropagation(),t.preventDefault(),(e=this.cellView).can("arrowheadMovable")&&(e.cell.startBatch("move-arrowhead",{ui:!0,toolId:this.cid}),n=this.graph.snapToGrid(t.clientX,t.clientY),n=e.prepareArrowheadDragging(this.type,{x:n.x,y:n.y,options:{toolId:this.cid}}),this.cellView.setEventData(t,n),this.delegateDocumentEvents(this.options.documentEvents,t.data),e.graph.view.undelegateEvents(),this.container.style.pointerEvents="none"),this.focus())},ju.prototype.onMouseMove=function(t){var e=this.normalizeEvent(t),t=this.graph.snapToGrid(e.clientX,e.clientY);this.cellView.onMouseMove(e,t.x,t.y),this.update()},ju.prototype.onMouseUp=function(t){this.undelegateDocumentEvents();var e=this.normalizeEvent(t),n=this.cellView,t=this.graph.snapToGrid(e.clientX,e.clientY);n.onMouseUp(e,t.x,t.y),this.graph.view.delegateEvents(),this.blur(),this.container.style.pointerEvents="",n.cell.stopBatch("move-arrowhead",{ui:!0,toolId:this.cid})},ju);function ju(){return null!==Vu&&Vu.apply(this,arguments)||this}(rn=rn||{}).config({tagName:"path",isSVGElement:!0,events:{mousedown:"onMouseDown",touchstart:"onMouseDown"},documentEvents:{mousemove:"onMouseMove",touchmove:"onMouseMove",mouseup:"onMouseUp",touchend:"onMouseUp",touchcancel:"onMouseUp"}});var Iu,Ru,un=rn.define({name:"source-arrowhead",type:"source",ratio:0,attrs:{d:"M 10 -8 -10 0 10 8 Z",fill:"#333",stroke:"#fff","stroke-width":2,cursor:"move"}}),dn=rn.define({name:"target-arrowhead",type:"target",ratio:1,attrs:{d:"M -10 -8 10 0 -10 8 Z",fill:"#333",stroke:"#fff","stroke-width":2,cursor:"move"}});(yn=Iu=Iu||{}).presets={boundary:hn,button:fn,"button-remove":fn.Remove},yn.registry=Kc.create({type:"node tool",process:function(t,e){if("function"==typeof e)return e;var n=U.ToolsView.ToolItem,o=e.inherit,i=ra(e,["inherit"]);return o&&(null==(e=this.get(o))?this.onNotFound(o,"inherited"):n=e),null==i.name&&(i.name=t),n.define.call(n,i)}}),yn.registry.register(yn.presets,!0),(pn=Ru=Ru||{}).presets={boundary:hn,vertices:mn,segments:Ue,button:fn,"button-remove":fn.Remove,"source-anchor":cn,"target-anchor":on,"source-arrowhead":un,"target-arrowhead":dn},pn.registry=Kc.create({type:"edge tool",process:function(t,e){if("function"==typeof e)return e;var n=U.ToolsView.ToolItem,o=e.inherit,i=ra(e,["inherit"]);return o&&(null==(e=this.get(o))?this.onNotFound(o,"inherited"):n=e),null==i.name&&(i.name=t),n.define.call(n,i)}}),pn.registry.register(pn.presets,!0);wr=_u("center"),an=_u("topCenter"),ch=_u("bottomCenter"),nn=_u("leftMiddle"),rn=_u("rightMiddle"),yn=_u("topLeft"),hn=_u("topRight"),mn=_u("bottomLeft"),Ue=_u("bottomRight");function _u(r){return function(t,e,n,o){void 0===o&&(o={});var i=o.rotate?t.getUnrotatedBBoxOfElement(e):t.getBBoxOfElement(e),e=i[r];e.x+=jr(o.dx,i.width),e.y+=jr(o.dy,i.height);t=t.cell;return o.rotate?e.rotate(-t.getAngle(),t.getBBox().getCenter()):e}}function Gu(s){return function(t,e,n,o){if(n instanceof Element){var i=this.graph.renderer.findViewByElem(n),r=void 0;return r=i?i.isEdgeElement(n)?Hu(i,null!=o.fixedAt?o.fixedAt:"50%"):i.getBBoxOfElement(n).getCenter():new U.Point,s.call(this,t,e,r,o)}return s.apply(this,arguments)}}function Hu(t,e){var n=Vr(e),e="string"==typeof e?parseFloat(e):e;return n?t.getPointAtRatio(e/100):t.getPointAtLength(e)}var Uu,fn=Gu(function(t,e,n,o){var i=t.cell.getAngle(),r=t.getBBoxOfElement(e),s=r.getCenter(),t=r.getTopLeft(),e=r.getBottomRight(),r=o.padding;return isFinite(r)||(r=0),t.y+r<=n.y&&n.y<=e.y-r?(o=n.y-s.y,s.x+=0===i||180===i?0:o/Math.tan(U.Angle.toRad(i)),s.y+=o):t.x+r<=n.x&&n.x<=e.x-r&&(n=n.x-s.x,s.y+=90===i||270===i?0:n*Math.tan(U.Angle.toRad(i)),s.x+=n),s}),cn=Gu(function(t,e,n,o){var i,r,s=0,a=t.cell;o.rotate?(i=t.getUnrotatedBBoxOfElement(e),r=a.getBBox().getCenter(),s=a.getAngle()):i=t.getBBoxOfElement(e);var l,e=o.padding;switch(null!=e&&isFinite(e)&&i.inflate(e),o.rotate&&n.rotate(s,r),i.getNearestSideToPoint(n)){case"left":l=i.getLeftMiddle();break;case"right":l=i.getRightMiddle();break;case"top":l=i.getTopCenter();break;case"bottom":l=i.getBottomCenter()}return o.rotate?l.rotate(-s,r):l}),on=Object.freeze({__proto__:null,center:wr,top:an,bottom:ch,left:nn,right:rn,topLeft:yn,topRight:hn,bottomLeft:mn,bottomRight:Ue,orth:fn,nodeCenter:function(t,e,n,o,i){i=t.cell.getConnectionPoint(this.cell,i);return(o.dx||o.dy)&&i.translate(o.dx||0,o.dy||0),i},midSide:cn});(un=Uu=Uu||{}).presets=on,un.registry=Kc.create({type:"node endpoint"}),un.registry.register(un.presets,!0);function $u(t,e,n,o){return null!=(n=t.getClosestPoint(n))?n:new U.Point}var qu,dn=Gu($u),pn=Gu(function(t,e,n,o){var i=t.getConnection(),r=t.getConnectionSubdivisions(),s=new La(n.clone().translate(0,1e6),n.clone().translate(0,-1e6)),a=new La(n.clone().translate(1e6,0),n.clone().translate(-1e6,0)),s=s.intersect(i,{segmentSubdivisions:r}),i=a.intersect(i,{segmentSubdivisions:r}),r=[];return s&&r.push.apply(r,s),i&&r.push.apply(r,i),0<r.length?n.closest(r):null!=o.fallbackAt?Hu(t,o.fallbackAt):Gr($u,this,t,e,n,o)}),wr=Object.freeze({__proto__:null,closest:dn,ratio:function(t,e,n,o){o=null!=o.ratio?o.ratio:.5;return 1<o&&(o/=100),t.getPointAtRatio(o)},length:function(t,e,n,o){o=null!=o.length?o.length:20;return t.getPointAtLength(o)},orth:pn});function Wu(t,e,n){var o="object"==typeof n?(isFinite(n.y)&&(e=(o=new La(e,t).parallel(n.y)).start,t=o.end),n.x):n;if(null==o||!isFinite(o))return t;n=t.distance(e);return 0===o&&0<n?t:t.move(e,-Math.min(o,n-1))}function Xu(t){t=t.getAttribute("stroke-width");return null!==t&&parseFloat(t)||0}(an=qu=qu||{}).presets=wr,an.registry=Kc.create({type:"edge endpoint"}),an.registry.register(an.presets,!0);function Yu(t,e,n,o){return e=e.getBBoxOfElement(n),o.stroked&&e.inflate(Xu(n)/2),Wu((e=t.intersect(e))&&e.length?t.start.closest(e):t.end,t.start,o.offset)}var Ju,ch=Object.freeze({__proto__:null,bbox:Yu,rect:function(t,e,n,o,i){var r=e.cell,r=r.isNode()?r.getAngle():0;if(0===r)return Gr(Yu,this,t,e,n,o,i);i=e.getUnrotatedBBoxOfElement(n);o.stroked&&i.inflate(Xu(n)/2);e=i.getCenter(),n=t.clone().rotate(r,e),i=n.setLength(1e6).intersect(i);return Wu(i&&i.length?n.start.closest(i).rotate(-r,e):t.end,t.start,o.offset)},boundary:function(t,e,n,o){var i,r=t.end,s=o.selector;if(!rs(i="string"==typeof s?e.findOne(s):Array.isArray(s)?kr(n,s):function(){if(null==n)return null;var t=n;do{var e=t.tagName;if("string"!=typeof e)return null;if("G"===(e=e.toUpperCase()))t=t.firstElementChild;else{if("TITLE"!==e)break;t=t.nextElementSibling}}while(t);return t}())){if(i===n||!rs(n))return r;i=n}var a,l=e.getShapeOfElement(i),c=e.getMatrixOfElement(i),h=e.getRootTranslatedMatrix(),u=e.getRootRotatedMatrix(),s=h.multiply(u).multiply(c),h=Kl(t,s.inverse()),u=h.start.clone(),c=e.getDataOfElement(i);if(!1===o.insideout){null==c.shapeBBox&&(c.shapeBBox=l.bbox());e=c.shapeBBox;if(null!=e&&e.containsPoint(u))return r}!0===o.extrapolate&&h.setLength(1e6),(h=l instanceof U.Path?(a=o.precision||2,null==c.segmentSubdivisions&&(c.segmentSubdivisions=l.getSegmentSubdivisions({precision:a})),a={precision:a,segmentSubdivisions:c.segmentSubdivisions},h.intersect(l,a)):h.intersect(l))?Array.isArray(h)&&(h=u.closest(h)):!0===o.sticky&&(h=l instanceof U.Rectangle?l.getNearestPointToPoint(u):l instanceof U.Ellipse?l.intersectsWithLineFromCenterToPoint(u):l.closestPoint(u,a));s=h?Zl(h,s):r,r=o.offset||0;return!1!==o.stroked&&("object"==typeof r?(null==(r=ia({},r)).x&&(r.x=0),r.x+=Xu(i)/2):r+=Xu(i)/2),Wu(s,t.start,r)},anchor:function(a,t,e,n){var o=n.alignOffset,l=n.align;return l&&function(t){void 0===t&&(t=0);var e,n,o,i,r=a.start,s=a.end;switch(l){case"left":i="x",e=s,n=r,o=-1;break;case"right":i="x",e=r,n=s,o=1;break;case"top":i="y",e=s,n=r,o=-1;break;case"bottom":i="y",e=r,n=s,o=1;break;default:return}r[i]<s[i]?e[i]=n[i]:n[i]=e[i],isFinite(t)&&(e[i]+=o*t,n[i]+=o*t)}(o),Wu(a.end,a.start,n.offset)}});function Zu(t){return new U.Rectangle(t.x,t.y,0,0)}function Ku(t){void 0===t&&(t={});t=Rr(t.padding||20);return{x:-t.left,y:-t.top,width:t.left+t.right,height:t.top+t.bottom}}function Qu(t,e){return void 0===e&&(e={}),t.sourceBBox.clone().moveAndExpand(Ku(e))}function tp(t,e){return void 0===e&&(e={}),t.targetBBox.clone().moveAndExpand(Ku(e))}(nn=Ju=Ju||{}).presets=ch,nn.registry=Kc.create({type:"connection point"}),nn.registry.register(nn.presets,!0);var ep,np,op,rn=function(t,e,n){var o,i,r=Qu(n,e),s=tp(n,e),o=(void 0===(i=e)&&(i={}),(o=n).sourceAnchor||Qu(o,i).getCenter()),i=(void 0===(i=e)&&(i={}),(n=n).targetAnchor||tp(n,i).getCenter()),r=r.union(Zu(o)),s=s.union(Zu(i)),a=t.map(function(t){return U.Point.create(t)});a.unshift(o),a.push(i);for(var l=null,c=[],h=0,u=a.length-1;h<u;h+=1){var p,d=null,g=a[h],f=a[h+1],y=null!=ep.getBearing(g,f);0===h?h+1===u?r.intersectsWithRect(s.clone().inflate(1))?d=ep.insideNode(g,f,r,s):y||(d=ep.nodeToNode(g,f,r,s)):r.containsPoint(f)?d=ep.insideNode(g,f,r,Zu(f).moveAndExpand(Ku(e))):y||(d=ep.nodeToVertex(g,f,r)):h+1===u?(p=y&&ep.getBearing(f,g)===l,s.containsPoint(g)||p?d=ep.insideNode(g,f,Zu(g).moveAndExpand(Ku(e)),s,l):y||(d=ep.vertexToNode(g,f,s,l))):y||(d=ep.vertexToVertex(g,f,l)),l=d?(c.push.apply(c,d.points),d.direction):ep.getBearing(g,f),h+1<u&&c.push(f)}return c};function ip(t,e,n){var o=new U.Point(t.x,e.y);return n.containsPoint(o)&&(o=new U.Point(e.x,t.y)),o}function rp(t,e){return t["W"===e||"E"===e?"width":"height"]}function sp(t,e){return t.x===e.x?t.y>e.y?"N":"S":t.y===e.y?t.x>e.x?"W":"E":null}function ap(t,e,n){var o=new U.Point(t.x,e.y),i=new U.Point(e.x,t.y),r=sp(t,o),s=sp(t,i),t=n?np[n]:null,i=r===n||r!==t&&(s===t||s!==n)?o:i;return{points:[i],direction:sp(i,e)}}function lp(t,e,n){n=ip(t,e,n);return{points:[n],direction:sp(n,e)}}yn=ep=ep||{},np={N:"S",S:"N",E:"W",W:"E"},op={N:-Math.PI/2*3,S:-Math.PI/2,E:0,W:Math.PI},yn.getBBoxSize=rp,yn.getBearing=sp,yn.vertexToVertex=ap,yn.nodeToVertex=lp,yn.vertexToNode=function(e,t,n,o){var i=[new U.Point(e.x,t.y),new U.Point(t.x,e.y)],r=i.filter(function(t){return!n.containsPoint(t)}),s=r.filter(function(t){return sp(t,e)!==o});if(0<s.length)return{points:[a=(a=s.filter(function(t){return sp(e,t)===o}).pop())||s[0]],direction:sp(a,t)};a=ii(i,r)[0];var a=U.Point.create(t).move(a,-rp(n,o)/2);return{points:[ip(a,e,n),a],direction:sp(a,t)}},yn.nodeToNode=function(t,e,n,o){var i,r=lp(e,t,o),s=r.points[0];return n.containsPoint(s)&&(i=(r=lp(t,e,n)).points[0],o.containsPoint(i)&&(i=U.Point.create(t).move(i,-rp(n,sp(t,i))/2),s=U.Point.create(e).move(s,-rp(o,sp(e,s))/2),n=ap(s=new La(i,s).getCenter(),e,(s=lp(t,s,n)).direction),r.points=[s.points[0],n.points[0]],r.direction=n.direction)),r},yn.insideNode=function(t,e,n,o,i){var r=n.union(o).inflate(1),n=r.getCenter(),o=n.distance(e)>n.distance(t),n=o?e:t,t=o?t:e,s=i?(s=U.Point.fromPolar(r.width+r.height,op[i],n),r.getNearestPointToPoint(s).move(s,-1)):r.getNearestPointToPoint(n).move(n,1),i=ip(s,t,r),a=s.round().equals(i.round())?(i=U.Point.fromPolar(r.width+r.height,U.Angle.toRad(s.theta(n))+Math.PI/2,t),a=ip(s,i=r.getNearestPointToPoint(i).move(t,1).round(),r),o?[i,a,s]:[s,a,i]):o?[i,s]:[s,i];return{points:a,direction:sp(o?s:i,e)}};var cp={step:10,maxLoopCount:2e3,precision:1,maxDirectionChange:90,perpendicular:!0,excludeTerminals:[],excludeShapes:[],startDirections:["top","right","bottom","left"],endDirections:["top","right","bottom","left"],directionMap:{top:{x:0,y:-1},right:{x:1,y:0},bottom:{x:0,y:1},left:{x:-1,y:0}},cost:function(){return hp(this.step,this)},directions:function(){var t=hp(this.step,this),e=hp(this.cost,this);return[{cost:e,offsetX:t,offsetY:0},{cost:e,offsetX:0,offsetY:t},{cost:e,offsetX:-t,offsetY:0},{cost:e,offsetX:0,offsetY:-t}]},penalties:function(){var t=hp(this.step,this);return{0:0,45:t/2,90:t/2}},paddingBox:function(){var t=hp(this.step,this);return{x:-t,y:-t,width:2*t,height:2*t}},fallbackRouter:rn,draggingRouter:null};function hp(t,e){return"function"==typeof t?t.call(e):t}var up=(gp.prototype.add=function(t,e){var n=this;this.hash[t]?this.items.splice(this.items.indexOf(t),1):this.hash[t]=1,this.values[t]=e;e=Xi(this.items,t,function(t){return n.values[t]});this.items.splice(e,0,t)},gp.prototype.pop=function(){var t=this.items.shift();return t&&(this.hash[t]=2),t},gp.prototype.isOpen=function(t){return 1===this.hash[t]},gp.prototype.isClose=function(t){return 2===this.hash[t]},gp.prototype.isEmpty=function(){return 0===this.items.length},gp),pp=(dp.prototype.build=function(n,o){var u=this.options,p=u.excludeTerminals.reduce(function(t,e){e=o[e];return!e||(e=n.getCell(e.cell))&&t.push(e),t},[]),d=[],t=n.getCell(o.getSourceCellId());t&&(d=mr(d,t.getAncestors().map(function(t){return t.id})));t=n.getCell(o.getTargetCellId());t&&(d=mr(d,t.getAncestors().map(function(t){return t.id})));var g=this.mapGridSize;return n.getNodes().reduce(function(t,e){var n=e.shape,o=u.excludeShapes,i=!!n&&o.includes(n),o=p.some(function(t){return t.id===e.id}),n=d.includes(e.id);if(!(i||o||n))for(var r=e.getBBox().moveAndExpand(u.paddingBox),s=r.getOrigin().snapToGrid(g),a=r.getCorner().snapToGrid(g),l=s.x;l<=a.x;l+=g)for(var c=s.y;c<=a.y;c+=g){var h=new U.Point(l,c).toString();null==t[h]&&(t[h]=[]),t[h].push(r)}return t},this.map),this},dp.prototype.isAccessible=function(e){var t=e.clone().snapToGrid(this.mapGridSize).toString(),t=this.map[t];return!t||t.every(function(t){return!t.containsPoint(e)})},dp);function dp(t){this.options=t,this.mapGridSize=100,this.map={}}function gp(){this.items=[],this.hash={},this.values={}}function fp(t,e){t=t.sourceBBox.clone();return e&&e.paddingBox?t.moveAndExpand(e.paddingBox):t}function yp(t,e){t=t.targetBBox.clone();return e&&e.paddingBox?t.moveAndExpand(e.paddingBox):t}function mp(t,e){return t.sourceAnchor||fp(t,e).getCenter()}function Cp(t,e,n,o,i){var r=360/n,n=t.theta((n=i.step,i=e.x-t.x,e=e.y-t.y,i=i/o.x*n,n=e/o.y*n,new U.Point(t.x+i,t.y+n))),n=U.Angle.normalize(n+r/2);return r*Math.floor(n/r)}function vp(t,e){e=Math.abs(t-e);return 180<e?360-e:e}function bp(t,e){if(!t)return e;var n=Math.abs(t),t=Math.round(n/e);return t?e+(n-t*e)/t:n}function xp(t,e){return t.round(e)}function wp(t,e,n){return xp((o=t.clone(),t=(i=e).source,e=U.Util.snapToGrid(o.x-t.x,i.x)+t.x,t=U.Util.snapToGrid(o.y-t.y,i.y)+t.y,new U.Point(e,t)),n);var o,i}function Ep(t){return t.toString()}function Ap(t){return new U.Point(0===t.x?0:Math.abs(t.x)/t.x,0===t.y?0:Math.abs(t.y)/t.y)}function Pp(t,e){for(var n=1/0,o=0,i=e.length;o<i;o+=1){var r=t.manhattanDistance(e[o]);r<n&&(n=r)}return n}function Dp(c,h,u,p,t){var d=t.precision,g=t.directionMap,f=c.diff(h.getCenter()),t=Object.keys(g).reduce(function(t,e){if(u.includes(e)){for(var n=g[e],e=new U.Point(c.x+n.x*(Math.abs(f.x)+h.width),c.y+n.y*(Math.abs(f.y)+h.height)),o=new La(c,e).intersect(h)||[],i=void 0,r=null,s=0;s<o.length;s+=1){var a=o[s],l=c.squaredDistance(a);(null==i||i<l)&&(i=l,r=a)}r&&(e=wp(r,p,d),h.containsPoint(e)&&(e=wp(e.translate(n.x*p.x,n.y*p.y),p,d)),t.push(e))}return t},[]);return h.containsPoint(c)||t.push(wp(c,p,d)),t}function Mp(t,e,n,o,i){var r,s,a,l,c=i.precision,h=e instanceof U.Rectangle?xp(mp(t,i).clone(),c):xp(e.clone(),c),u=n instanceof U.Rectangle?xp(((s=t).targetAnchor||yp(s,i).getCenter()).clone(),c):xp(n.clone(),c),p=(r=i.step,t=u,{source:(s=h).clone(),x:bp(t.x-s.x,r),y:bp(t.y-s.y,r)}),d=h,g=u,f=e instanceof U.Rectangle?Dp(d,e,i.startDirections,p,i):[d],y=n instanceof U.Rectangle?Dp(u,n,i.endDirections,p,i):[g];if(f=f.filter(function(t){return o.isAccessible(t)}),y=y.filter(function(t){return o.isAccessible(t)}),0<f.length&&0<y.length){for(var m=new up,C={},v={},b={},x=0,w=f.length;x<w;x+=1){var E=f[x],A=Ep(E);m.add(A,Pp(E,y)),C[A]=E,b[A]=0}for(var P,D=i.previousDirectionAngle,M=void 0===D,S=(a=p,l=(n=i).step,n.directions.forEach(function(t){t.gridOffsetX=t.offsetX/l*a.x,t.gridOffsetY=t.offsetY/l*a.y}),n.directions),k=S.length,F=y.reduce(function(t,e){e=Ep(e);return t.push(e),t},[]),T=U.Point.equalPoints(f,y),L=i.maxLoopCount;!m.isEmpty()&&0<L;){var N=m.pop(),O=C[N],B=v[N],z=b[N],V=O.equals(d),j=null==B,I=j?M?V?null:Cp(d,O,k,p,i):D:Cp(B,O,k,p,i);if((!j||!T)&&0<=F.indexOf(N))return i.previousDirectionAngle=I,function(t,e,n,o,i){for(var r,s=[],a=Ap(i.diff(n)),l=Ep(n),c=t[l];c;){var h=Ap((r=e[l]).diff(c));h.equals(a)||(s.unshift(r),a=h),c=t[l=Ep(c)]}return Ap((n=e[l]).diff(o)).equals(a)||s.unshift(n),s}(v,C,O,d,g);for(x=0;x<k;x+=1){var R,_,G=(P=S[x]).angle,H=vp(I,G);(!M||!V)&&H>i.maxDirectionChange||(_=Ep(R=wp(O.clone().translate(P.gridOffsetX||0,P.gridOffsetY||0),p,c)),!m.isClose(_)&&o.isAccessible(R)&&(0<=F.indexOf(_)&&!R.equals(g)&&vp(G,Cp(R,g,k,p,i))>i.maxDirectionChange||(G=z+P.cost+(V?0:i.penalties[H]),(!m.isOpen(_)||G<b[_])&&(C[_]=R,v[_]=O,b[_]=G,m.add(_,G+Pp(R,y))))))}--L}}return i.fallbackRoute?Gr(i.fallbackRoute,this,d,g,i):null}function Sp(t,e,n){for(var o,i,r,s=(i=e,(r=Object.keys(i).reduce(function(t,e){return t[e]="fallbackRouter"===e||"draggingRouter"===e||"fallbackRoute"===e?i[e]:hp(i[e],i),t},{})).padding&&(e=Rr(r.padding),i.paddingBox={x:-e.left,y:-e.top,width:e.left+e.right,height:e.top+e.bottom}),r.directions.forEach(function(t){var e=new U.Point(0,0),n=new U.Point(t.offsetX,t.offsetY);t.angle=U.Angle.normalize(e.theta(n))}),r),a=fp(n,s),l=yp(n,s),c=mp(n,s),h=new pp(s).build(n.graph.model,n.cell),u=t.map(function(t){return U.Point.create(t)}),p=[],d=c,g=0,f=u.length;g<=f;g+=1){var y,m,C=null,v=o||a;if(null==(o=u[g])&&(o=l,null!=(m=n.cell).getSourceCellId()&&null!=m.getTargetCellId()||"function"!=typeof s.draggingRouter||(y=v===a?c:v,m=o.getOrigin(),C=Gr(s.draggingRouter,n,y,m,s))),null==C&&(C=Mp(n,v,o,h,s)),null===C)return Gr(s.fallbackRouter,this,t,s,n);v=C[0];v&&v.equals(d)&&C.shift(),d=C[C.length-1]||d,p.push.apply(p,C)}return p}function kp(t,e,n){return Gr(Sp,this,t,ia(ia({},cp),e),n)}var Fp={maxDirectionChange:45,directions:function(){var t=hp(this.step,this),e=hp(this.cost,this),n=Math.ceil(Math.sqrt(t*t<<1));return[{cost:e,offsetX:t,offsetY:0},{cost:n,offsetX:t,offsetY:t},{cost:e,offsetX:0,offsetY:t},{cost:n,offsetX:-t,offsetY:t},{cost:e,offsetX:-t,offsetY:0},{cost:n,offsetX:-t,offsetY:-t},{cost:e,offsetX:0,offsetY:-t},{cost:n,offsetX:t,offsetY:-t}]},fallbackRoute:function(t,e,n){var o,i=t.theta(e),r=[],s={x:e.x,y:t.y},a={x:t.x,y:e.y};90<i%180&&(o=s,s=a,a=o);s=i%90<45?s:a,a=new La(t,s),i=90*Math.ceil(i/90),s=U.Point.fromPolar(a.squaredLength(),U.Angle.toRad(135+i),s),s=new La(e,s),a=a.intersectsWithLine(s),s=a||e,a=a?s:t,t=360/n.directions.length,a=a.theta(e),a=U.Angle.normalize(a+t/2),t*=Math.floor(a/t);return n.previousDirectionAngle=t,s&&r.push(s.round()),r.push(e),r}};function Tp(t,e){if(null==e||!1===e)return t;var n="boolean"==typeof e?0:e;if(0<n){var e=U.Point.create(t[1]).move(t[2],n),o=U.Point.create(t[1]).move(t[0],n);return aa([e.toJSON()],t,[o.toJSON()])}o=t[1];return aa([ia({},o)],t,[ia({},o)])}var Lp,hn=Object.freeze({__proto__:null,normal:function(t){return aa(t)},oneSide:function(t,e,n){var o,i,r,s=e.side||"bottom",a=Rr(e.padding||40),l=n.sourceBBox,c=n.targetBBox,e=l.getCenter(),n=c.getCenter();switch(s){case"top":r=-1,o="y",i="height";break;case"left":r=-1,o="x",i="width";break;case"right":r=1,o="x",i="width";break;case"bottom":default:r=1,o="y",i="height"}return e[o]+=r*(l[i]/2+a[s]),n[o]+=r*(c[i]/2+a[s]),0<r*(e[o]-n[o])?n[o]=e[o]:e[o]=n[o],aa([e.toJSON()],t,[n.toJSON()])},orth:rn,metro:function(t,e,n){return Gr(kp,this,t,ia(ia({},Fp),e),n)},manhattan:kp,er:function(t,e,n){var o,i,r,s=e.offset||32,a=null==e.min?16:e.min,l=0,c=e.direction,h=n.sourceBBox,u=n.targetBBox,p=h.getCenter(),e=u.getCenter();"number"==typeof s&&(l=s),null==c&&(n=p.x-e.x,d=p.y-e.y,Math.abs(n)>Math.abs(d)?(c=0<n?"R":"L","center"===s&&(l=("R"===c?h.left-u.right:u.left-h.right)/2)):(c=0<d?"B":"T","center"===s&&(l=("B"===c?h.top-u.botom:u.top-h.botom)/2)));var d="L"===c||"R"===c||"H"===c;if(d){if(e.y===p.y)return aa(t);r="L"===c||"H"===c&&e.x>p.x?1:-1,o="x",i="width"}else{if(e.x===p.x)return aa(t);r="T"===c||"V"===c&&e.y>p.y?1:-1,o="y",i="height"}var g,f,y,m,s=p.clone(),c=e.clone();return s[o]+=r*(h[i]/2+l),c[o]-=r*(u[i]/2+l),d?(f=s.x,g=c.x,y=h.width/2+a,m=u.width/2+a,e.x>p.x?g<=f&&(s.x=Math.max(g,p.x+y),c.x=Math.min(f,e.x-m)):f<=g&&(s.x=Math.min(g,p.x-y),c.x=Math.max(f,e.x+m))):(g=s.y,f=c.y,y=h.height/2+a,m=u.height/2+a,e.y>p.y?f<=g&&(s.y=Math.max(f,p.y+y),c.y=Math.min(g,e.y-m)):g<=f&&(s.y=Math.min(f,p.y-y),c.y=Math.max(g,e.y+m))),aa([s.toJSON()],t,[c.toJSON()])},loop:function(t,e,n){var o=e.width||50,i=(e.height||80)/2,r=e.angle||"auto",s=n.sourceAnchor,a=n.targetAnchor,l=n.sourceBBox,c=n.targetBBox;if(s.equals(a)){var h=function(t){var e=U.Angle.toRad(t),n=Math.sin(e),t=Math.cos(e),e=new U.Point(s.x+t*o,s.y+n*o),t=new U.Point(e.x-t*i,e.y-n*i),n=t.clone().rotate(-90,e),t=t.clone().rotate(90,e);return[n.toJSON(),e.toJSON(),t.toJSON()]},u=function(t){var e=s.clone().move(t,-1),e=new La(e,t);return!l.containsPoint(t)&&!l.intersectsWithLine(e)},p=[0,90,180,270,45,135,225,315];if("number"==typeof r)return Tp(h(r),e.merge);if((v=l.getCenter()).equals(s))return Tp(h(0),e.merge);var d=v.angleBetween(s,v.clone().translate(1,0)),g=h(d);if(u(g[1]))return Tp(g,e.merge);for(var f=1,y=p.length;f<y;f+=1)if(u((g=h(d+p[f]))[1]))return Tp(g,e.merge);return Tp(g,e.merge)}var m=new La(s,a),C=m.parallel(-o),v=C.getCenter(),b=C.start.clone().move(C.end,i),x=C.end.clone().move(C.start,i),w=m.parallel(-1),r=new La(w.start,v),w=new La(w.end,v);return(l.containsPoint(v)||c.containsPoint(v)||l.intersectsWithLine(r)||l.intersectsWithLine(w)||c.intersectsWithLine(r)||c.intersectsWithLine(w))&&(v=(C=m.parallel(o)).getCenter(),b=C.start.clone().move(C.end,i),x=C.end.clone().move(C.start,i)),e.merge&&(m=new La(s,a),C=new La(v,m.center).setLength(Number.MAX_SAFE_INTEGER),a=l.intersectsWithLine(C),C=c.intersectsWithLine(C),a=a?Array.isArray(a)?a:[a]:[],C&&(Array.isArray(C)?a.push.apply(a,C):a.push(C)),(a=m.center.closest(a))?(n.sourceAnchor=a.clone(),n.targetAnchor=a.clone()):(n.sourceAnchor=m.center.clone(),n.targetAnchor=m.center.clone())),Tp([b.toJSON(),v.toJSON(),x.toJSON()],e.merge)}});(mn=Lp=Lp||{}).presets=hn,mn.registry=Kc.create({type:"router"}),mn.registry.register(mn.presets,!0);var Np,Op;function Bp(t,e,n){var o=aa([t],n,[e]),i=[];return o.forEach(function(t,e){e=o[e+1];null!=e&&i.push(new La(t,e))}),i}function zp(t,e){return new La(t,e).squaredLength()}function Vp(u,p,d,g){var f=new U.Path,y=U.Path.createSegment("M",u[0].start);return f.appendSegment(y),u.forEach(function(t,e){var n,o,i,r,s,a,l,c,h;Np.includes(t)?(c=l=n=a=void 0,"arc"===d?(a=-90,((n=t.start.diff(t.end)).x<0||0===n.x&&n.y<0)&&(a+=180),o=t.getCenter(),i=new La(o,t.end).rotate(a,o),r=void 0,l=(r=new La(t.start,o)).pointAt(2/3).rotate(a,t.start),c=i.pointAt(1/3).rotate(-a,i.end),y=U.Path.createSegment("C",l,c,i.end),f.appendSegment(y),r=new La(o,t.end),l=i.pointAt(1/3).rotate(a,i.end),c=r.pointAt(1/3).rotate(-a,t.end),y=U.Path.createSegment("C",l,c,t.end),f.appendSegment(y)):"gap"===d?(y=U.Path.createSegment("M",t.end),f.appendSegment(y)):"cubic"===d&&(a=t.start.theta(t.end),h=.6*p,s=1.35*p,((n=t.start.diff(t.end)).x<0||0===n.x&&n.y<0)&&(s*=-1),l=new U.Point(t.start.x+h,t.start.y+s).rotate(a,t.start),c=new U.Point(t.end.x-h,t.end.y+s).rotate(a,t.end),y=U.Path.createSegment("C",l,c,t.end),f.appendSegment(y))):(h=u[e+1],0===g||!h||Np.includes(h)?(y=U.Path.createSegment("L",t.end),f.appendSegment(y)):(s=g,a=f,l=t.end,c=t.start,e=h.end,t=l.distance(c)/2,h=l.distance(e)/2,t=-Math.min(s,t),h=-Math.min(s,h),t=l.clone().move(c,t).round(),e=l.clone().move(e,h).round(),h=new U.Point(1/3*t.x+2/3*l.x,2/3*l.y+1/3*t.y),l=new U.Point(1/3*e.x+2/3*l.x,2/3*l.y+1/3*e.y),t=U.Path.createSegment("L",t),a.appendSegment(t),t=U.Path.createSegment("C",h,l,e),a.appendSegment(t)))}),f}var jp,Ue=Object.freeze({__proto__:null,normal:function(t,e,n,o){void 0===o&&(o={});e=aa([t],n,[e]),e=new U.Polyline(e),e=new U.Path(e);return o.raw?e:e.serialize()},loop:function(t,e,n,o){void 0===o&&(o={});var i=3===n.length?0:1,r=U.Point.create(n[0+i]),s=U.Point.create(n[2+i]),a=U.Point.create(n[1+i]);U.Point.equals(t,e)||1<(i=(n=new U.Point((t.x+e.x)/2,(t.y+e.y)/2)).angleBetween(U.Point.create(t).rotate(90,n),a))&&(r.rotate(180-i,n),s.rotate(180-i,n),a.rotate(180-i,n));e="\n     M "+t.x+" "+t.y+"\n     Q "+r.x+" "+r.y+" "+a.x+" "+a.y+"\n     Q "+s.x+" "+s.y+" "+e.x+" "+e.y+"\n  ";return o.raw?U.Path.parse(e):e},rounded:function(t,e,n,o){void 0===o&&(o={});var i=new U.Path;i.appendSegment(U.Path.createSegment("M",t));for(var r=o.radius||10,s=0,a=n.length;s<a;s+=1){var l=U.Point.create(n[s]),c=n[s-1]||t,h=n[s+1]||e,u=p||l.distance(c)/2,p=l.distance(h)/2,d=-Math.min(r,u),u=-Math.min(r,p),d=l.clone().move(c,d).round(),h=l.clone().move(h,u).round(),u=new U.Point(1/3*d.x+2/3*l.x,2/3*l.y+1/3*d.y),l=new U.Point(1/3*h.x+2/3*l.x,2/3*l.y+1/3*h.y);i.appendSegment(U.Path.createSegment("L",d)),i.appendSegment(U.Path.createSegment("C",u,l,h))}return i.appendSegment(U.Path.createSegment("L",e)),o.raw?i:i.serialize()},smooth:function(t,e,n,o){var i,r;return void 0===o&&(o={}),n&&0!==n.length?(i=aa([t],n,[e]),i=U.Curve.throughPoints(i),i=new U.Path(i)):((i=new U.Path).appendSegment(U.Path.createSegment("M",t)),Math.abs(t.x-e.x)>=Math.abs(t.y-e.y)?(r=(t.x+e.x)/2,i.appendSegment(U.Path.createSegment("C",r,t.y,r,e.y,e.x,e.y))):(r=(t.y+e.y)/2,i.appendSegment(U.Path.createSegment("C",t.x,r,e.x,r,e.x,e.y)))),o.raw?i:i.serialize()},jumpover:function(t,e,n,o){var i,r,s=this;void 0===o&&(o={}),Np=[],Op=[],null==(r=(i=this).graph._jumpOverUpdateList)&&(r=i.graph._jumpOverUpdateList=[],i.graph.on("cell:mouseup",function(){for(var t=i.graph._jumpOverUpdateList,e=0;e<t.length;e+=1)t[e].update()}),i.graph.on("model:reseted",function(){r=i.graph._jumpOverUpdateList=[]})),r.indexOf(i)<0&&(r.push(i),p=function(){return r.splice(r.indexOf(i),1)},i.cell.once("change:connector",p),i.cell.once("removed",p));var c=o.size||5,a=o.type||"arc",l=o.radius||0,h=o.ignoreConnectors||["smooth"],u=this.graph,p=u.model.getEdges();if(1===p.length)return Vp(Bp(t,e,n),c,a,l);var d=this.cell,g=p.indexOf(d),f=u.options.connecting.connector||{},y=p.filter(function(t,e){t=t.getConnector()||f;return!(h.includes(t.name)||g<e&&"jumpover"===t.name)}),p=y.map(function(t){return u.renderer.findViewByCell(t)}),m=Bp(t,e,n),C=p.map(function(t){return null==t?[]:t===s?m:Bp(t.sourcePoint,t.targetPoint,t.routePoints)}),v=[];m.forEach(function(r){var s,a,l,t=y.reduce(function(t,e,n){var o,i;return e!==d&&(o=r,n=C[n],i=[],n.forEach(function(t){t=o.intersectsWithLine(t);t&&i.push(t)}),n=i,t.push.apply(t,n)),t},[]).sort(function(t,e){return zp(r.start,t)-zp(r.start,e)});0<t.length?v.push.apply(v,(s=r,l=c,(a=t).reduce(function(t,e,n){if(Op.includes(e))return t;var o=t.pop()||s,i=U.Point.create(e).move(o.start,-l),r=U.Point.create(e).move(o.start,+l),e=a[n+1];if(null!=e){n=r.distance(e);n<=l&&(r=e.move(o.start,n),Op.push(e))}else if(i.distance(o.end)<2*l+1)return t.push(o),t;if(r.distance(o.start)<2*l+1)return t.push(o),t;e=new La(i,r);return Np.push(e),t.push(new La(o.start,i),e,new La(r,o.end)),t},[]))):v.push(r)});l=Vp(v,c,a,l);return Np=[],Op=[],o.raw?l:l.serialize()}});(fn=jp=jp||{}).presets=Ue,fn.registry=Kc.create({type:"connector"}),fn.registry.register(fn.presets,!0);var cn=Kc.create,on=Object.freeze({__proto__:null,create:cn,get Attr(){return Ch},get Grid(){return vh},get Filter(){return Eh},get Background(){return Ah},get Highlighter(){return kh},get PortLayout(){return Oh},get PortLabelLayout(){return _h},get NodeTool(){return Iu},get EdgeTool(){return Ru},get Marker(){return gh},get NodeAnchor(){return Uu},get EdgeAnchor(){return qu},get ConnectionPoint(){return Ju},get Router(){return Lp},get Connector(){return jp},get ConnectionStrategy(){return Jh},get Registry(){return Kc}}),Ip=(Rp.prototype.get=function(){return Object.keys(this.ids)},Rp.prototype.start=function(t,e,n,o){var i=this;void 0===n&&(n={}),void 0===o&&(o="/");var r=this.cell.getPropByPath(t),s=Xo(n,Rp.defaultOptions),a=this.getTiming(s.timing),l=this.getInterp(s.interp,r,e),c=0,h=Array.isArray(t)?t.join(o):t,u=Array.isArray(t)?t:t.split(o),p=function(){var t=(new Date).getTime();0===c&&(c=t);var e=(t-c)/s.duration;e<1?i.ids[h]=Ws(p):e=1;t=l(a(e));i.cell.setPropByPath(u,t),n.progress&&n.progress(ia({progress:e,currentValue:t},i.getArgs(h))),1===e&&(i.cell.notify("transition:end",i.getArgs(h)),i.cell.notify("transition:complete",i.getArgs(h)),n.complete&&n.complete(i.getArgs(h)),i.cell.notify("transition:finish",i.getArgs(h)),n.finish&&n.finish(i.getArgs(h)),i.clean(h))};return setTimeout(function(){i.stop(t,void 0,o),i.cache[h]={startValue:r,targetValue:e,options:s},i.ids[h]=Ws(p),i.cell.notify("transition:begin",i.getArgs(h)),i.cell.notify("transition:start",i.getArgs(h)),n.start&&n.start(i.getArgs(h))},n.delay),this.stop.bind(this,t,o,n)},Rp.prototype.stop=function(t,r,e){var s=this;void 0===r&&(r={}),void 0===e&&(e="/");var n=Array.isArray(t)?t:t.split(e);return Object.keys(this.ids).filter(function(t){return bi(n,t.split(e).slice(0,n.length))}).forEach(function(t){Xs(s.ids[t]);var e=s.cache[t],n=s.getArgs(t),o=ia(ia({},e.options),r),i=o.jumpedToEnd;i&&null!=e.targetValue&&(s.cell.setPropByPath(t,e.targetValue),s.cell.notify("transition:end",ia({},n)),s.cell.notify("transition:complete",ia({},n)),o.complete&&o.complete(ia({},n)));i=ia({jumpedToEnd:i},n);s.cell.notify("transition:stop",ia({},i)),o.stop&&o.stop(ia({},i)),s.cell.notify("transition:finish",ia({},n)),o.finish&&o.finish(ia({},n)),s.clean(t)}),this},Rp.prototype.clean=function(t){delete this.ids[t],delete this.cache[t]},Rp.prototype.getTiming=function(t){return"string"==typeof t?U.Timing[t]:t},Rp.prototype.getInterp=function(t,e,n){return t?t(e,n):"number"==typeof n?U.Interp.number(e,n):"string"==typeof n?"#"===n[0]?U.Interp.color(e,n):U.Interp.unit(e,n):U.Interp.object(e,n)},Rp.prototype.getArgs=function(t){var e=this.cache[t];return{path:t,startValue:e.startValue,targetValue:e.targetValue,cell:this.cell}},Rp);function Rp(t){this.cell=t,this.ids={},this.cache={}}(Ip=Ip||{}).defaultOptions={delay:10,duration:100,timing:"linear"};var _p,Gp,Hp,Up,$p,qp,Wp,Xp=(oa(Yp,Gp=U.Basecoat),Yp.prototype.mutate=function(n,e){var o=this;void 0===e&&(e={});var i=!0===e.unset,t=!0===e.silent,r=[],s=this.changing;this.changing=!0,s||(this.previous=mo(this.data),this.changed={});var a=this.data,l=this.previous,c=this.changed;if(Object.keys(n).forEach(function(t){var e=t,t=n[e];bi(a[e],t)||r.push(e),bi(l[e],t)?delete c[e]:c[e]=t,i?delete a[e]:a[e]=t}),!t&&0<r.length&&(this.pending=!0,this.pendingOptions=e,r.forEach(function(t){o.emit("change:*",{key:t,options:e,store:o,current:a[t],previous:l[t]})})),s)return this;if(!t)for(;this.pending;)this.pending=!1,this.emit("changed",{current:a,previous:l,store:this,options:this.pendingOptions});return this.pending=!1,this.changing=!1,this.pendingOptions=null,this},Yp.prototype.get=function(t,e){if(null==t)return this.data;t=this.data[t];return null==t?e:t},Yp.prototype.getPrevious=function(t){if(this.previous){t=this.previous[t];return null==t?void 0:t}},Yp.prototype.set=function(t,e,n){var o;return null!=t&&("object"==typeof t?this.mutate(t,e):this.mutate(((o={})[t]=e,o),n)),this},Yp.prototype.remove=function(t,e){var n,o={};if("string"==typeof t)o[t]=void 0,n=e;else if(Array.isArray(t))t.forEach(function(t){return o[t]=void 0}),n=e;else{for(var i in this.data)o[i]=void 0;n=t}return this.mutate(o,ia(ia({},n),{unset:!0})),this},Yp.prototype.getByPath=function(t){return kr(this.data,t,"/")},Yp.prototype.setByPath=function(t,e,n){void 0===n&&(n={});var o=Array.isArray(t)?aa(t):t.split("/"),i=Array.isArray(t)?t.join("/"):t,r=o[0],s=o.length;if(n.propertyPath=i,n.propertyValue=e,n.propertyPathArray=o,1===s)this.set(r,e,n);else{for(var i={},a=i,l=r,c=1;c<s;c+=1)var h=o[c],u=Number.isFinite(Number(h)),a=a[l]=u?[]:{},l=h;Fr(i,o,e,"/");e=mo(this.data);n.rewrite&&Tr(e,t,"/");i=Mi(e,i);this.set(r,i[r],n)}return this},Yp.prototype.removeByPath=function(t,e){var n=Array.isArray(t)?t:t.split("/"),o=n[0];return 1===n.length?this.remove(o,e):(t=n.slice(1),(n=mo(this.get(o)))&&Tr(n,t),this.set(o,n,e)),this},Yp.prototype.hasChanged=function(t){return null==t?0<Object.keys(this.changed).length:t in this.changed},Yp.prototype.getChanges=function(t){if(null==t)return this.hasChanged()?mo(this.changed):null;var e,n,o=this.changing?this.previous:this.data,i={};for(n in t){var r=t[n];bi(o[n],r)||(i[n]=r,e=!0)}return e?mo(i):null},Yp.prototype.toJSON=function(){return mo(this.data)},Yp.prototype.clone=function(){return new this.constructor(this.data)},Yp.prototype.dispose=function(){this.off(),this.data={},this.previous={},this.changed={},this.pending=!1,this.changing=!1,this.pendingOptions=null,this.trigger("disposed",{store:this})},sa([U.Basecoat.dispose()],Yp.prototype,"dispose",null),Yp);function Yp(t){void 0===t&&(t={});var e=Gp.call(this)||this;return e.pending=!1,e.changing=!1,e.data={},e.mutate(mo(t)),e.changed={},e}function Jp(t){void 0===t&&(t={});var e=Wp.call(this)||this,n=e.constructor.getDefaults(!0),n=Mi({},e.preprocess(n),e.preprocess(t));return e.id=n.id||Or(),e.store=new Xp(n),e.animation=new Ip(e),e.setup(),e.init(),e.postprocess(t),e}U.Cell=(oa(Jp,Wp=U.Basecoat),Jp.config=function(t){var e=this,n=t.markup,o=t.propHooks,i=t.attrHooks,t=ra(t,["markup","propHooks","attrHooks"]);null!=n&&(this.markup=n),o&&(this.propHooks=this.propHooks.slice(),Array.isArray(o)?(n=this.propHooks).push.apply(n,o):"function"==typeof o?this.propHooks.push(o):Object.keys(o).forEach(function(t){t=o[t];"function"==typeof t&&e.propHooks.push(t)})),i&&(this.attrHooks=ia(ia({},this.attrHooks),i)),this.defaults=Mi({},this.defaults,t)},Jp.getMarkup=function(){return this.markup},Jp.getDefaults=function(t){return t?this.defaults:mo(this.defaults)},Jp.getAttrHooks=function(){return this.attrHooks},Jp.applyPropHooks=function(n,t){return this.propHooks.reduce(function(t,e){return e?Gr(e,n,t):t},t)},Jp.prototype.init=function(){},Object.defineProperty(Jp.prototype,"model",{get:function(){return this._model},set:function(t){this._model!==t&&(this._model=t)},enumerable:!1,configurable:!0}),Jp.prototype.preprocess=function(t,e){var n=t.id,t=this.constructor.applyPropHooks(this,t);return null==n&&!0!==e&&(t.id=Or()),t},Jp.prototype.postprocess=function(t){},Jp.prototype.setup=function(){var i=this;this.store.on("change:*",function(t){var e=t.key,n=t.current,o=t.previous,t=t.options;i.notify("change:*",{key:e,options:t,current:n,previous:o,cell:i}),i.notify("change:"+e,{options:t,current:n,previous:o,cell:i});"source"!==e&&"target"!==e||i.notify("change:terminal",{type:e,current:n,previous:o,options:t,cell:i})}),this.store.on("changed",function(t){t=t.options;return i.notify("changed",{options:t,cell:i})})},Jp.prototype.notify=function(t,e){this.trigger(t,e);var n=this.model;return n&&(n.notify("cell:"+t,e),this.isNode()?n.notify("node:"+t,ia(ia({},e),{node:this})):this.isEdge()&&n.notify("edge:"+t,ia(ia({},e),{edge:this}))),this},Jp.prototype.isNode=function(){return!1},Jp.prototype.isEdge=function(){return!1},Jp.prototype.isSameStore=function(t){return this.store===t.store},Object.defineProperty(Jp.prototype,"view",{get:function(){return this.store.get("view")},enumerable:!1,configurable:!0}),Object.defineProperty(Jp.prototype,"shape",{get:function(){return this.store.get("shape","")},enumerable:!1,configurable:!0}),Jp.prototype.getProp=function(t,e){return null==t?this.store.get():this.store.get(t,e)},Jp.prototype.setProp=function(t,e,n){return"string"==typeof t?this.store.set(t,e,n):this.store.set(Mi({},this.getProp(),t),e),this},Jp.prototype.removeProp=function(t,e){return"string"==typeof t||Array.isArray(t)?this.store.removeByPath(t,e):this.store.remove(e),this},Jp.prototype.hasChanged=function(t){return null==t?this.store.hasChanged():this.store.hasChanged(t)},Jp.prototype.getPropByPath=function(t){return this.store.getByPath(t)},Jp.prototype.setPropByPath=function(t,e,n){return void 0===n&&(n={}),this.store.setByPath(t,e,n),this},Jp.prototype.removePropByPath=function(t,e){void 0===e&&(e={});t=Array.isArray(t)?t:t.split("/");return"attrs"===t[0]&&(e.dirty=!0),this.store.removeByPath(t,e),this},Jp.prototype.prop=function(t,e,n){return null==t?this.getProp():"string"==typeof t||Array.isArray(t)?1===arguments.length?(Array.isArray(t),this.getPropByPath(t)):null==e?Array.isArray(t)?this.removePropByPath(t):this.removeAttrByPath(t,n||{}):this.setPropByPath(t,e,n||{}):this.setProp(t,e||{})},Jp.prototype.previous=function(t){return this.store.getPrevious(t)},Object.defineProperty(Jp.prototype,"zIndex",{get:function(){return this.getZIndex()},set:function(t){null==t?this.removeZIndex():this.setZIndex(t)},enumerable:!1,configurable:!0}),Jp.prototype.getZIndex=function(){return this.store.get("zIndex")},Jp.prototype.setZIndex=function(t,e){return void 0===e&&(e={}),this.store.set("zIndex",t,e),this},Jp.prototype.removeZIndex=function(t){return void 0===t&&(t={}),this.store.remove("zIndex",t),this},Jp.prototype.toFront=function(n){void 0===n&&(n={});var t,o,e,i=this.model;return i&&(o=i.getMaxZIndex(),n.deep?(t=this.getDescendants({deep:!0,breadthFirst:!0})).unshift(this):t=[this],o=o-t.length+1,e=i.total(),(i.indexOf(this)!==e-t.length||t.some(function(t,e){return t.getZIndex()!==o+e}))&&this.batchUpdate("to-front",function(){o+=t.length,t.forEach(function(t,e){t.setZIndex(o+e,n)})})),this},Jp.prototype.toBack=function(n){void 0===n&&(n={});var t,o,e=this.model;return e&&(o=e.getMinZIndex(),n.deep?(t=this.getDescendants({deep:!0,breadthFirst:!0})).unshift(this):t=[this],(0!==e.indexOf(this)||t.some(function(t,e){return t.getZIndex()!==o+e}))&&this.batchUpdate("to-back",function(){o-=t.length,t.forEach(function(t,e){t.setZIndex(o+e,n)})})),this},Object.defineProperty(Jp.prototype,"markup",{get:function(){return this.getMarkup()},set:function(t){null==t?this.removeMarkup():this.setMarkup(t)},enumerable:!1,configurable:!0}),Jp.prototype.getMarkup=function(){var t=this.store.get("markup");return null==t&&(t=this.constructor.getMarkup()),t},Jp.prototype.setMarkup=function(t,e){return void 0===e&&(e={}),this.store.set("markup",t,e),this},Jp.prototype.removeMarkup=function(t){return void 0===t&&(t={}),this.store.remove("markup",t),this},Object.defineProperty(Jp.prototype,"attrs",{get:function(){return this.getAttrs()},set:function(t){null==t?this.removeAttrs():this.setAttrs(t)},enumerable:!1,configurable:!0}),Jp.prototype.getAttrs=function(){var t=this.store.get("attrs");return t?ia({},t):{}},Jp.prototype.setAttrs=function(t,e){var n,o,i=this;return void 0===e&&(e={}),null==t?this.removeAttrs(e):(n=function(t){return i.store.set("attrs",t,e)},!0===e.overwrite?n(t):(o=this.getAttrs(),!1===e.deep?n(ia(ia({},o),t)):n(Mi({},o,t)))),this},Jp.prototype.replaceAttrs=function(t,e){return void 0===e&&(e={}),this.setAttrs(t,ia(ia({},e),{overwrite:!0}))},Jp.prototype.updateAttrs=function(t,e){return void 0===e&&(e={}),this.setAttrs(t,ia(ia({},e),{deep:!1}))},Jp.prototype.removeAttrs=function(t){return void 0===t&&(t={}),this.store.remove("attrs",t),this},Jp.prototype.getAttrDefinition=function(t){if(!t)return null;var e=this.constructor.getAttrHooks()||{},n=e[t]||Ch.registry.get(t);return n||(n=e[t=An(t)]||Ch.registry.get(t)),n||null},Jp.prototype.getAttrByPath=function(t){return null==t||""===t?this.getAttrs():this.getPropByPath(this.prefixAttrPath(t))},Jp.prototype.setAttrByPath=function(t,e,n){return void 0===n&&(n={}),this.setPropByPath(this.prefixAttrPath(t),e,n),this},Jp.prototype.removeAttrByPath=function(t,e){return void 0===e&&(e={}),this.removePropByPath(this.prefixAttrPath(t),e),this},Jp.prototype.prefixAttrPath=function(t){return Array.isArray(t)?["attrs"].concat(t):"attrs/"+t},Jp.prototype.attr=function(t,e,n){return null==t?this.getAttrByPath():"string"==typeof t||Array.isArray(t)?1===arguments.length?this.getAttrByPath(t):null==e?this.removeAttrByPath(t,n||{}):this.setAttrByPath(t,e,n||{}):this.setAttrs(t,e||{})},Object.defineProperty(Jp.prototype,"visible",{get:function(){return this.isVisible()},set:function(t){this.setVisible(t)},enumerable:!1,configurable:!0}),Jp.prototype.setVisible=function(t,e){return void 0===e&&(e={}),this.store.set("visible",t,e),this},Jp.prototype.isVisible=function(){return!1!==this.store.get("visible")},Jp.prototype.show=function(t){return void 0===t&&(t={}),this.isVisible()||this.setVisible(!0,t),this},Jp.prototype.hide=function(t){return void 0===t&&(t={}),this.isVisible()&&this.setVisible(!1,t),this},Jp.prototype.toggleVisible=function(t,e){void 0===e&&(e={});e="boolean"==typeof t?e:t;return("boolean"==typeof t?t:!this.isVisible())?this.show(e):this.hide(e),this},Object.defineProperty(Jp.prototype,"data",{get:function(){return this.getData()},set:function(t){this.setData(t)},enumerable:!1,configurable:!0}),Jp.prototype.getData=function(){return this.store.get("data")},Jp.prototype.setData=function(t,e){var n,o,i=this;return void 0===e&&(e={}),null==t?this.removeData(e):(n=function(t){return i.store.set("data",t,e)},!0===e.overwrite?n(t):(o=this.getData(),!1===e.deep?n("object"==typeof t?ia(ia({},o),t):t):n(Mi({},o,t)))),this},Jp.prototype.replaceData=function(t,e){return void 0===e&&(e={}),this.setData(t,ia(ia({},e),{overwrite:!0}))},Jp.prototype.updateData=function(t,e){return void 0===e&&(e={}),this.setData(t,ia(ia({},e),{deep:!1}))},Jp.prototype.removeData=function(t){return void 0===t&&(t={}),this.store.remove("data",t),this},Object.defineProperty(Jp.prototype,"parent",{get:function(){return this.getParent()},enumerable:!1,configurable:!0}),Object.defineProperty(Jp.prototype,"children",{get:function(){return this.getChildren()},enumerable:!1,configurable:!0}),Jp.prototype.getParent=function(){var t,e=this._parent;return null!=e||!this.store||null!=(t=this.getParentId())&&this.model&&(e=this.model.getCell(t),this._parent=e),e},Jp.prototype.getParentId=function(){return this.store.get("parent")},Jp.prototype.getChildren=function(){var t,n=this,e=this._children;return null!=e||(t=this.store.get("children"))&&t.length&&this.model&&(e=t.map(function(t){var e;return null===(e=n.model)||void 0===e?void 0:e.getCell(t)}).filter(function(t){return null!=t}),this._children=e),e?aa(e):null},Jp.prototype.hasParent=function(){return null!=this.parent},Jp.prototype.isParentOf=function(t){return null!=t&&t.getParent()===this},Jp.prototype.isChildOf=function(t){return null!=t&&this.getParent()===t},Jp.prototype.eachChild=function(t,e){return this.children&&this.children.forEach(t,e),this},Jp.prototype.filterChild=function(t,e){return this.children?this.children.filter(t,e):[]},Jp.prototype.getChildCount=function(){return null==this.children?0:this.children.length},Jp.prototype.getChildIndex=function(t){return null==this.children?-1:this.children.indexOf(t)},Jp.prototype.getChildAt=function(t){return null!=this.children&&0<=t?this.children[t]:null},Jp.prototype.getAncestors=function(t){void 0===t&&(t={});for(var e=[],n=this.getParent();n;)e.push(n),n=!1!==t.deep?n.getParent():null;return e},Jp.prototype.getDescendants=function(e){if(void 0===e&&(e={}),!1===e.deep)return this.getChildren()||[];if(e.breadthFirst){for(var t=[],n=this.getChildren()||[];0<n.length;){var o=n.shift(),i=o.getChildren();t.push(o),i&&n.push.apply(n,i)}return t}var r=this.getChildren()||[];return r.forEach(function(t){r.push.apply(r,t.getDescendants(e))}),r},Jp.prototype.isDescendantOf=function(t,e){if(void 0===e&&(e={}),null==t)return!1;if(!1===e.deep)return this.isChildOf(t);for(var n=this.getParent();n;){if(n===t)return!0;n=n.getParent()}return!1},Jp.prototype.isAncestorOf=function(t,e){return void 0===e&&(e={}),null!=t&&t.isDescendantOf(this,e)},Jp.prototype.contains=function(t){return this.isAncestorOf(t)},Jp.prototype.getCommonAncestor=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Jp.getCommonAncestor.apply(Jp,aa([this],t))},Jp.prototype.setParent=function(t,e){return void 0===e&&(e={}),(this._parent=t)?this.store.set("parent",t.id,e):this.store.remove("parent",e),this},Jp.prototype.setChildren=function(t,e){return void 0===e&&(e={}),null!=(this._children=t)?this.store.set("children",t.map(function(t){return t.id}),e):this.store.remove("children",e),this},Jp.prototype.unembed=function(t,e){void 0===e&&(e={});var n,o=this.children;return null!=o&&null!=t&&(n=this.getChildIndex(t),o.splice(n,1),t.setParent(null,e),this.setChildren(o,e)),this},Jp.prototype.embed=function(t,e){return void 0===e&&(e={}),t.addTo(this,e),this},Jp.prototype.addTo=function(t,e){return void 0===e&&(e={}),t instanceof Jp?t.addChild(this,e):t.addCell(this,e),this},Jp.prototype.insertTo=function(t,e,n){return void 0===n&&(n={}),t.insertChild(this,e,n),this},Jp.prototype.addChild=function(t,e){return void 0===e&&(e={}),this.insertChild(t,void 0,e)},Jp.prototype.insertChild=function(t,e,n){var o,i,r,s;return void 0===n&&(n={}),null!=t&&t!==this&&(s=this!==(o=t.getParent()),null==(i=e)&&(i=this.getChildCount(),s||--i),o&&(!(r=o.getChildren())||0<=(e=r.indexOf(t))&&(t.setParent(null,n),r.splice(e,1),o.setChildren(r,n))),null==(r=this.children)?(r=[]).push(t):r.splice(i,0,t),t.setParent(this,n),this.setChildren(r,n),s&&this.model&&(r=this.model.getIncomingEdges(this),s=this.model.getOutgoingEdges(this),r&&r.forEach(function(t){return t.updateParent(n)}),s&&s.forEach(function(t){return t.updateParent(n)})),this.model&&this.model.addCell(t,n)),this},Jp.prototype.removeFromParent=function(t){void 0===t&&(t={});var e,n=this.getParent();return null!=n&&(e=n.getChildIndex(this),n.removeChildAt(e,t)),this},Jp.prototype.removeChild=function(t,e){void 0===e&&(e={});t=this.getChildIndex(t);return this.removeChildAt(t,e)},Jp.prototype.removeChildAt=function(t,e){void 0===e&&(e={});t=this.getChildAt(t);return null!=this.children&&null!=t&&(this.unembed(t,e),t.remove(e)),t},Jp.prototype.remove=function(e){var t=this;void 0===e&&(e={});var n=this.getParent();return n?n.removeChild(this,e):this.batchUpdate("remove",function(){!1!==e.deep&&t.eachChild(function(t){return t.remove(e)}),t.model&&t.model.removeCell(t,e)}),this},Jp.prototype.transition=function(t,e,n,o){return void 0===n&&(n={}),void 0===o&&(o="/"),this.animation.start(t,e,n,o)},Jp.prototype.stopTransition=function(t,e,n){return void 0===n&&(n="/"),this.animation.stop(t,e,n),this},Jp.prototype.getTransitions=function(){return this.animation.get()},Jp.prototype.translate=function(t,e,n){return this},Jp.prototype.scale=function(t,e,n,o){return this},Jp.prototype.addTools=function(t,e,n){void 0===n&&(n={});var o=Array.isArray(t)?t:[t];if(n.reset)this.setTools({name:e,items:o},n);else{t=this.getTools();if(null==t||null==e||t.name===e)return null==t&&(t={}),t.items||(t.items=[]),t.name=e,t.items=aa(t.items,o),this.setTools(ia({},t),n)}},Jp.prototype.setTools=function(t,e){return void 0===e&&(e={}),null==t?this.removeTools():this.store.set("tools",Jp.normalizeTools(t),e),this},Jp.prototype.getTools=function(){return this.store.get("tools")},Jp.prototype.removeTools=function(t){return void 0===t&&(t={}),this.store.remove("tools",t),this},Jp.prototype.hasTools=function(t){var e=this.getTools();return null!=e&&(null==t||e.name===t)},Jp.prototype.getBBox=function(t){return new U.Rectangle},Jp.prototype.getConnectionPoint=function(t,e){return new U.Point},Jp.prototype.toJSON=function(t){var n=this;void 0===t&&(t={});var o=ia({},this.store.get()),i=Object.prototype.toString,r=this.isNode()?"node":this.isEdge()?"edge":"cell";if(!o.shape){var e=this.constructor;throw new Error("Unable to serialize "+r+' missing "shape" prop, check the '+r+' "'+(e.name||i.call(e))+'"')}var e=this.constructor,s=!0===t.diff,a=o.attrs||{},e=e.getDefaults(!0),l=s?this.preprocess(e,!0):e,c=l.attrs||{},h={};Object.keys(o).forEach(function(t){var e=o[t];if(!Array.isArray(e)&&"object"==typeof e&&!Te(e))throw new Error("Can only serialize "+r+' with plain-object props, but got a "'+i.call(e)+'" type of key "'+t+'" on '+r+' "'+n.id+'"');"attrs"!==t&&"shape"!==t&&s&&bi(e,l[t])&&delete o[t]}),Object.keys(a).forEach(function(r){var t=a[r],s=c[r];Object.keys(t).forEach(function(n){var o=t[n],i=s?s[n]:null;null==o||"object"!=typeof o||Array.isArray(o)?null!=s&&bi(i,o)||(null==h[r]&&(h[r]={}),h[r][n]=o):Object.keys(o).forEach(function(t){var e=o[t];null!=s&&null!=i&&E(i)&&bi(i[t],e)||(null==h[r]&&(h[r]={}),null==h[r][n]&&(h[r][n]={}),h[r][n][t]=e)})})});e=ia(ia({},o),{attrs:vi(h)?void 0:h});null==e.attrs&&delete e.attrs;return 0===e.angle&&delete e.angle,mo(e)},Jp.prototype.clone=function(t){if(void 0===t&&(t={}),t.deep)return Jp.deepClone(this)[this.id];t=ia({},this.store.get());return delete t.id,delete t.parent,delete t.children,new this.constructor(t)},Jp.prototype.findView=function(t){return t.renderer.findViewByCell(this)},Jp.prototype.startBatch=function(t,e,n){return void 0===e&&(e={}),void 0===n&&(n=this.model),n&&n.startBatch(t,ia(ia({},e),{cell:this})),this},Jp.prototype.stopBatch=function(t,e,n){return void 0===e&&(e={}),void 0===n&&(n=this.model),n&&n.stopBatch(t,ia(ia({},e),{cell:this})),this},Jp.prototype.batchUpdate=function(t,e,n){var o=this.model;this.startBatch(t,n,o);e=e();return this.stopBatch(t,n,o),e},Jp.prototype.dispose=function(){this.removeFromParent(),this.store.dispose()},Jp.defaults={},Jp.attrHooks={},Jp.propHooks=[],sa([U.Basecoat.dispose()],Jp.prototype,"dispose",null),Jp),(U.Cell||(U.Cell={})).normalizeTools=function(t){return"string"==typeof t?{items:[t]}:Array.isArray(t)?{items:t}:t.items?t:{items:[t]}},(qp=U.Cell||(U.Cell={})).getCommonAncestor=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=t.filter(function(t){return null!=t}).map(function(t){return t.getAncestors()}).sort(function(t,e){return t.length-e.length});return n.shift().find(function(e){return n.every(function(t){return t.includes(e)})})||null},qp.getCellsBBox=function(t,e){void 0===e&&(e={});for(var n=null,o=0,i=t.length;o<i;o+=1){var r=t[o],s=r.getBBox(e);s&&(!r.isNode()||null!=(r=r.getAngle())&&0!==r&&(s=s.bbox(r)),n=null==n?s:n.union(s))}return n},qp.deepClone=function(t){t=aa([t],t.getDescendants({deep:!0}));return qp.cloneCells(t)},qp.cloneCells=function(t){var t=Cr(t),i=t.reduce(function(t,e){return t[e.id]=e.clone(),t},{});return t.forEach(function(t){var e,n=i[t.id];n.isEdge()&&(e=n.getSourceCellId(),o=n.getTargetCellId(),e&&i[e]&&n.setSource(ia(ia({},n.getSource()),{cell:i[e].id})),o&&i[o]&&n.setTarget(ia(ia({},n.getTarget()),{cell:i[o].id})));var o=t.getParent();o&&i[o.id]&&n.setParent(i[o.id]);t=t.getChildren();t&&t.length&&(0<(t=t.reduce(function(t,e){return i[e.id]&&t.push(i[e.id]),t},[])).length&&n.setChildren(t))}),i},($p=U.Cell||(U.Cell={})).config({propHooks:function(t){var e=t.tools,t=ra(t,["tools"]);return e&&(t.tools=$p.normalizeTools(e)),t}}),(un=_p=_p||{}).exist=function(t,e){return e?null!=Hp&&Hp.exist(t):null!=Up&&Up.exist(t)},un.setEdgeRegistry=function(t){Hp=t},un.setNodeRegistry=function(t){Up=t};var Zp,Kp,Qp,td,ed,nd,od,id,rd,sd=(ad.prototype.getPorts=function(){return this.ports},ad.prototype.getGroup=function(t){return null!=t?this.groups[t]:null},ad.prototype.getPortsByGroup=function(e){return this.ports.filter(function(t){return t.group===e||null==t.group&&null==e})},ad.prototype.getPortsLayoutByGroup=function(t,n){var e,o=this,i=this.getPortsByGroup(t),r=t?this.getGroup(t):null,t=r?r.position:null,r=t?t.name:null;if(null!=r){var s=Oh.registry.get(r);if(null==s)return Oh.registry.onNotFound(r);e=s}else e=Oh.presets.left;s=i.map(function(t){return t&&t.position&&t.position.args||{}}),t=t&&t.args||{};return e(s,n,t).map(function(t,e){e=i[e];return{portLayout:t,portId:e.id,portSize:e.size,portAttrs:e.attrs,labelSize:e.label.size,labelLayout:o.getPortLabelLayout(e,U.Point.create(t.position),n)}})},ad.prototype.init=function(t){var e=this,n=t.groups,t=t.items;null!=n&&Object.keys(n).forEach(function(t){e.groups[t]=e.parseGroup(n[t])}),Array.isArray(t)&&t.forEach(function(t){e.ports.push(e.parsePort(t))})},ad.prototype.parseGroup=function(t){return ia(ia({},t),{label:this.getLabel(t,!0),position:this.getPortPosition(t.position,!0)})},ad.prototype.parsePort=function(t){var e=ia({},t),t=this.getGroup(t.group)||{};return e.markup=e.markup||t.markup,e.attrs=Mi({},t.attrs,e.attrs),e.position=this.createPosition(t,e),e.label=Mi({},t.label,this.getLabel(e)),e.zIndex=this.getZIndex(t,e),e.size=Object.assign({},t.size,e.size),e},ad.prototype.getZIndex=function(t,e){return"number"==typeof e.zIndex?e.zIndex:"number"==typeof t.zIndex||"auto"===t.zIndex?t.zIndex:"auto"},ad.prototype.createPosition=function(t,e){return Mi({name:"left",args:{}},t.position,{args:e.args})},ad.prototype.getPortPosition=function(t,e){if(void 0===e&&(e=!1),null==t){if(e)return{name:"left",args:{}}}else{if("string"==typeof t)return{name:t,args:{}};if(Array.isArray(t))return{name:"absolute",args:{x:t[0],y:t[1]}};if("object"==typeof t)return t}return{args:{}}},ad.prototype.getPortLabelPosition=function(t,e){if(void 0===e&&(e=!1),null==t){if(e)return{name:"left",args:{}}}else{if("string"==typeof t)return{name:t,args:{}};if("object"==typeof t)return t}return{args:{}}},ad.prototype.getLabel=function(t,e){void 0===e&&(e=!1);t=t.label||{};return t.position=this.getPortLabelPosition(t.position,e),t},ad.prototype.getPortLabelLayout=function(t,e,n){var o=t.label.position.name||"left",t=t.label.position.args||{},o=_h.registry.get(o)||_h.presets.left;return o?o(e,n,t):null},ad);function ad(t){this.ports=[],this.groups={},this.init(mo(t))}function ld(t){return void 0===t&&(t={}),ed.call(this,t)||this}function cd(t){void 0===t&&(t={});t=rd.call(this,t)||this;return t.initPorts(),t}U.Node=(oa(cd,rd=U.Cell),cd.prototype.preprocess=function(t,e){var n,o=t.x,i=t.y,r=t.width,s=t.height,t=ra(t,["x","y","width","height"]);return null==o&&null==i||(n=t.position,t.position=ia(ia({},n),{x:null!=o?o:n?n.x:0,y:null!=i?i:n?n.y:0})),null==r&&null==s||(n=t.size,t.size=ia(ia({},n),{width:null!=r?r:n?n.width:0,height:null!=s?s:n?n.height:0})),rd.prototype.preprocess.call(this,t,e)},cd.prototype.isNode=function(){return!0},cd.prototype.size=function(t,e,n){return void 0===t?this.getSize():"number"==typeof t?this.setSize(t,e,n):this.setSize(t,e)},cd.prototype.getSize=function(){var t=this.store.get("size");return t?ia({},t):{width:1,height:1}},cd.prototype.setSize=function(t,e,n){return"object"==typeof t?this.resize(t.width,t.height,e):this.resize(t,e,n),this},cd.prototype.resize=function(t,e,n){void 0===n&&(n={}),this.startBatch("resize",n);var o=n.direction;if(o){var i=this.getSize();switch(o){case"left":case"right":e=i.height;break;case"top":case"bottom":t=i.width}var r={right:0,"top-right":0,top:1,"top-left":1,left:2,"bottom-left":2,bottom:3,"bottom-right":3}[o],s=U.Angle.normalize(this.getAngle()||0);n.absolute&&(r+=Math.floor((s+45)/90),r%=4);var a=this.getBBox(),i=(0===r?a.getBottomLeft():1===r?a.getCorner():2===r?a.getTopRight():a.getOrigin()).clone().rotate(-s,a.getCenter()),o=Math.sqrt(t*t+e*e)/2,a=r*Math.PI/2;a+=Math.atan(r%2==0?e/t:t/e),a-=U.Angle.toRad(s);i=U.Point.fromPolar(o,a,i).clone().translate(t/-2,e/-2);this.store.set("size",{width:t,height:e},n),this.setPosition(i.x,i.y,n)}else this.store.set("size",{width:t,height:e},n);return this.stopBatch("resize",n),this},cd.prototype.scale=function(t,e,n,o){void 0===o&&(o={});n=this.getBBox().scale(t,e,null==n?void 0:n);return this.startBatch("scale",o),this.setPosition(n.x,n.y,o),this.resize(n.width,n.height,o),this.stopBatch("scale"),this},cd.prototype.position=function(t,e,n){return"number"==typeof t?this.setPosition(t,e,n):this.getPosition(t)},cd.prototype.getPosition=function(t){if(void 0===t&&(t={}),t.relative){var e=this.getParent();if(null!=e&&e.isNode()){var t=this.getPosition(),n=e.getPosition();return{x:t.x-n.x,y:t.y-n.y}}}n=this.store.get("position");return n?ia({},n):{x:0,y:0}},cd.prototype.setPosition=function(t,e,n){var o,i,r,s;return void 0===n&&(n={}),(n="object"==typeof t?(o=t.x,i=t.y,e||{}):(o=t,i=e,n||{})).relative&&null!=(r=this.getParent())&&r.isNode()&&(o+=(s=r.getPosition()).x,i+=s.y),n.deep?(s=this.getPosition(),this.translate(o-s.x,i-s.y,n)):this.store.set("position",{x:o,y:i},n),this},cd.prototype.translate=function(e,n,o){if(void 0===e&&(e=0),void 0===n&&(n=0),void 0===o&&(o={}),0===e&&0===n)return this;o.translateBy=o.translateBy||this.id;var t,i,r,s,a=this.getPosition();null!=o.restrict&&o.translateBy===this.id&&(s=this.getBBox({deep:!0}),t=o.restrict,r=a.x-s.x,i=a.y-s.y,r=Math.max(t.x+r,Math.min(t.x+t.width+r-s.width,a.x+e)),s=Math.max(t.y+i,Math.min(t.y+t.height+i-s.height,a.y+n)),e=r-a.x,n=s-a.y);a={x:a.x+e,y:a.y+n};return o.tx=e,o.ty=n,o.transition?("object"!=typeof o.transition&&(o.transition={}),this.transition("position",a,ia(ia({},o.transition),{interp:U.Interp.object})),this.eachChild(function(t){return t.translate(e,n,o)})):(this.startBatch("translate",o),this.store.set("position",a,o),this.eachChild(function(t){return t.translate(e,n,o)}),this.stopBatch("translate",o)),this},cd.prototype.angle=function(t,e){return null==t?this.getAngle():this.rotate(t)},cd.prototype.getAngle=function(){return this.store.get("angle",0)},cd.prototype.rotate=function(t,e){void 0===e&&(e={});var n,o,i,r,s=this.getAngle();return e.center?(r=this.getSize(),n=this.getPosition(),(o=this.getBBox().getCenter()).rotate(s-t,e.center),i=o.x-r.width/2-n.x,r=o.y-r.height/2-n.y,this.startBatch("rotate",{angle:t,options:e}),this.setPosition(n.x+i,n.y+r,e),this.rotate(t,ia(ia({},e),{center:null})),this.stopBatch("rotate")):this.store.set("angle",e.absolute?t:(s+t)%360,e),this},cd.prototype.getBBox=function(t){if(void 0===t&&(t={}),t.deep){t=this.getDescendants({deep:!0,breadthFirst:!0});return t.push(this),U.Cell.getCellsBBox(t)}return U.Rectangle.fromPositionAndSize(this.getPosition(),this.getSize())},cd.prototype.getConnectionPoint=function(t,e){var n=this.getBBox(),o=n.getCenter(),t=t.getTerminal(e);if(null==t)return o;e=t.port;if(!e||!this.hasPort(e))return o;t=this.getPort(e);if(!t||!t.group)return o;e=this.getPortsPosition(t.group)[e].position,e=U.Point.create(e).translate(n.getOrigin()),n=this.getAngle();return n&&e.rotate(-n,o),e},cd.prototype.fit=function(e){void 0===e&&(e={});var t=(this.getChildren()||[]).filter(function(t){return t.isNode()});if(0===t.length)return this;this.startBatch("fit-embeds",e),e.deep&&t.forEach(function(t){return t.fit(e)});var n=U.Cell.getCellsBBox(t),o=n.x,i=n.y,r=n.width,t=n.height,n=Rr(e.padding);return o-=n.left,i-=n.top,r+=n.left+n.right,t+=n.bottom+n.top,this.store.set({position:{x:o,y:i},size:{width:r,height:t}},e),this.stopBatch("fit-embeds"),this},Object.defineProperty(cd.prototype,"portContainerMarkup",{get:function(){return this.getPortContainerMarkup()},set:function(t){this.setPortContainerMarkup(t)},enumerable:!1,configurable:!0}),cd.prototype.getDefaultPortContainerMarkup=function(){return this.store.get("defaultPortContainerMarkup")||U.Markup.getPortContainerMarkup()},cd.prototype.getPortContainerMarkup=function(){return this.store.get("portContainerMarkup")||this.getDefaultPortContainerMarkup()},cd.prototype.setPortContainerMarkup=function(t,e){return void 0===e&&(e={}),this.store.set("portContainerMarkup",U.Markup.clone(t),e),this},Object.defineProperty(cd.prototype,"portMarkup",{get:function(){return this.getPortMarkup()},set:function(t){this.setPortMarkup(t)},enumerable:!1,configurable:!0}),cd.prototype.getDefaultPortMarkup=function(){return this.store.get("defaultPortMarkup")||U.Markup.getPortMarkup()},cd.prototype.getPortMarkup=function(){return this.store.get("portMarkup")||this.getDefaultPortMarkup()},cd.prototype.setPortMarkup=function(t,e){return void 0===e&&(e={}),this.store.set("portMarkup",U.Markup.clone(t),e),this},Object.defineProperty(cd.prototype,"portLabelMarkup",{get:function(){return this.getPortLabelMarkup()},set:function(t){this.setPortLabelMarkup(t)},enumerable:!1,configurable:!0}),cd.prototype.getDefaultPortLabelMarkup=function(){return this.store.get("defaultPortLabelMarkup")||U.Markup.getPortLabelMarkup()},cd.prototype.getPortLabelMarkup=function(){return this.store.get("portLabelMarkup")||this.getDefaultPortLabelMarkup()},cd.prototype.setPortLabelMarkup=function(t,e){return void 0===e&&(e={}),this.store.set("portLabelMarkup",U.Markup.clone(t),e),this},Object.defineProperty(cd.prototype,"ports",{get:function(){var t=this.store.get("ports",{items:[]});return null==t.items&&(t.items=[]),t},enumerable:!1,configurable:!0}),cd.prototype.getPorts=function(){return mo(this.ports.items)},cd.prototype.getPortsByGroup=function(e){return this.getPorts().filter(function(t){return t.group===e})},cd.prototype.getPort=function(e){return mo(this.ports.items.find(function(t){return t.id&&t.id===e}))},cd.prototype.getPortAt=function(t){return this.ports.items[t]||null},cd.prototype.hasPorts=function(){return 0<this.ports.items.length},cd.prototype.hasPort=function(t){return-1!==this.getPortIndex(t)},cd.prototype.getPortIndex=function(t){var e="string"==typeof t?t:t.id;return null!=e?this.ports.items.findIndex(function(t){return t.id===e}):-1},cd.prototype.getPortsPosition=function(t){var e=this.getSize();return this.port.getPortsLayoutByGroup(t,new U.Rectangle(0,0,e.width,e.height)).reduce(function(t,e){var n=e.portLayout;return t[e.portId]={position:ia({},n.position),angle:n.angle||0},t},{})},cd.prototype.getPortProp=function(t,e){return this.getPropByPath(this.prefixPortPath(t,e))},cd.prototype.setPortProp=function(t,e,n,o){if("string"==typeof e||Array.isArray(e)){var i=this.prefixPortPath(t,e);return this.setPropByPath(i,n,o)}t=this.prefixPortPath(t);return this.setPropByPath(t,e,n)},cd.prototype.removePortProp=function(t,e,n){return"string"==typeof e||Array.isArray(e)?this.removePropByPath(this.prefixPortPath(t,e),n):this.removePropByPath(this.prefixPortPath(t),e)},cd.prototype.portProp=function(t,e,n,o){return null==e?this.getPortProp(t):"string"==typeof e||Array.isArray(e)?2===arguments.length?this.getPortProp(t,e):null==n?this.removePortProp(t,e,o):this.setPortProp(t,e,n,o):this.setPortProp(t,e,n)},cd.prototype.prefixPortPath=function(t,e){var n=this.getPortIndex(t);if(-1===n)throw new Error('Unable to find port with id: "'+t+'"');return null==e||""===e?["ports","items",""+n]:Array.isArray(e)?aa(["ports","items",""+n],e):"ports/items/"+n+"/"+e},cd.prototype.addPort=function(t,e){var n=aa(this.ports.items);return n.push(t),this.setPropByPath("ports/items",n,e),this},cd.prototype.addPorts=function(t,e){return this.setPropByPath("ports/items",aa(this.ports.items,t),e),this},cd.prototype.removePort=function(t,e){return void 0===e&&(e={}),this.removePortAt(this.getPortIndex(t),e)},cd.prototype.removePortAt=function(t,e){var n;return void 0===e&&(e={}),0<=t&&((n=aa(this.ports.items)).splice(t,1),e.rewrite=!0,this.setPropByPath("ports/items",n,e)),this},cd.prototype.removePorts=function(t,e){var n;return Array.isArray(t)?(n=e||{},t.length&&(n.rewrite=!0,e=aa(this.ports.items).filter(function(e){return!t.some(function(t){t="string"==typeof t?t:t.id;return e.id===t})}),this.setPropByPath("ports/items",e,n))):((n=t||{}).rewrite=!0,this.setPropByPath("ports/items",[],n)),this},cd.prototype.getParsedPorts=function(){return this.port.getPorts()},cd.prototype.getParsedGroups=function(){return this.port.groups},cd.prototype.getPortsLayoutByGroup=function(t,e){return this.port.getPortsLayoutByGroup(t,e)},cd.prototype.initPorts=function(){var t=this;this.updatePortData(),this.on("change:ports",function(){t.processRemovedPort(),t.updatePortData()})},cd.prototype.processRemovedPort=function(){var t=this.ports,e={};t.items.forEach(function(t){t.id&&(e[t.id]=!0)});var n={};(this.store.getPrevious("ports")||{items:[]}).items.forEach(function(t){t.id&&!e[t.id]&&(n[t.id]=!0)});t=this.model;t&&!vi(n)&&(t.getConnectedEdges(this,{incoming:!0}).forEach(function(t){var e=t.getTargetPortId();e&&n[e]&&t.remove()}),t.getConnectedEdges(this,{outgoing:!0}).forEach(function(t){var e=t.getSourcePortId();e&&n[e]&&t.remove()}))},cd.prototype.validatePorts=function(){var e=this,n={},o=[];return this.ports.items.forEach(function(t){"object"!=typeof t&&o.push("Invalid port "+t+"."),null==t.id&&(t.id=e.generatePortId()),n[t.id]&&o.push("Duplicitied port id."),n[t.id]=!0}),o},cd.prototype.generatePortId=Or,cd.prototype.updatePortData=function(){var t=this.validatePorts();if(0<t.length)throw this.store.set("ports",this.store.getPrevious("ports")),new Error(t.join(" "));var n=this.port?this.port.getPorts():null;this.port=new sd(this.ports);var o=this.port.getPorts(),e=n?o.filter(function(e){if(!n.find(function(t){return t.id===e.id}))return e}):aa(o),t=n?n.filter(function(e){if(!o.find(function(t){return t.id===e.id}))return e}):[];0<e.length&&this.notify("ports:added",{added:e,cell:this,node:this}),0<t.length&&this.notify("ports:removed",{removed:t,cell:this,node:this})},cd.defaults={angle:0,position:{x:0,y:0},size:{width:1,height:1}},cd),(id=U.Node||(U.Node={})).registry=Kc.create({type:"node",process:function(t,e){if(_p.exist(t,!0))throw new Error("Node with name '"+t+"' was registered by anthor Edge");if("function"==typeof e)return e.config({shape:t}),e;var n=id,o=e.inherit,i=ra(e,["inherit"]);o&&("string"==typeof o?null==(e=this.get(o))?this.onNotFound(o,"inherited"):n=e:n=o),null==i.constructorName&&(i.constructorName=t);i=n.define.call(n,i);return i.config({shape:t}),i}}),_p.setNodeRegistry(id.registry),(U.Node||(U.Node={})).config({propHooks:function(t){var e=t.ports,t=ra(t,["ports"]);return e&&(t.ports=Array.isArray(e)?{items:e}:e),t}}),nd=U.Node||(U.Node={}),od=0,nd.define=function(t){var e=t.constructorName,t=ra(t,["constructorName"]),e=Mr((e=e||t.shape)?Lr(e):"CustomNode"+(od+=1),this);return e.config(t),t.shape&&nd.registry.register(t.shape,e),e},nd.create=function(t){var e=t.shape||"rect",n=nd.registry.get(e);return n?new n(t):nd.registry.onNotFound(e)},U.Edge=(oa(ld,ed=U.Cell),ld.prototype.preprocess=function(t,e){var n,o,i,r=t.source,s=t.sourceCell,a=t.sourcePort,l=t.sourcePoint,c=t.target,h=t.targetCell,u=t.targetPort,p=t.targetPoint,d=ra(t,["source","sourceCell","sourcePort","sourcePoint","target","targetCell","targetPort","targetPoint"]),t=function(t){return"string"==typeof t||"number"==typeof t};return null!=r&&(r instanceof U.Cell?d.source={cell:r.id}:t(r)?d.source={cell:r}:r instanceof U.Point?d.source=r.toJSON():Array.isArray(r)?d.source={x:r[0],y:r[1]}:(i=r.cell)instanceof U.Cell?d.source=ia(ia({},r),{cell:i.id}):d.source=r),null!=s||null!=a?(n=d.source,null!=s&&(o=t(s)?s:s.id,n?n.cell=o:n=d.source={cell:o}),null!=a&&n&&(n.port=a)):null!=l&&(d.source=U.Point.create(l).toJSON()),null!=c&&(c instanceof U.Cell?d.target={cell:c.id}:t(c)?d.target={cell:c}:c instanceof U.Point?d.target=c.toJSON():Array.isArray(c)?d.target={x:c[0],y:c[1]}:(i=c.cell)instanceof U.Cell?d.target=ia(ia({},c),{cell:i.id}):d.target=c),null!=h||null!=u?(n=d.target,null!=h&&(o=t(h)?h:h.id,n?n.cell=o:n=d.target={cell:o}),null!=u&&n&&(n.port=u)):null!=p&&(d.target=U.Point.create(p).toJSON()),ed.prototype.preprocess.call(this,d,e)},ld.prototype.setup=function(){var e=this;ed.prototype.setup.call(this),this.on("change:labels",function(t){return e.onLabelsChanged(t)}),this.on("change:vertices",function(t){return e.onVertexsChanged(t)})},ld.prototype.isEdge=function(){return!0},ld.prototype.disconnect=function(t){return void 0===t&&(t={}),this.store.set({source:{x:0,y:0},target:{x:0,y:0}},t),this},Object.defineProperty(ld.prototype,"source",{get:function(){return this.getSource()},set:function(t){this.setSource(t)},enumerable:!1,configurable:!0}),ld.prototype.getSource=function(){return this.getTerminal("source")},ld.prototype.getSourceCellId=function(){return this.source.cell},ld.prototype.getSourcePortId=function(){return this.source.port},ld.prototype.setSource=function(t,e,n){return void 0===n&&(n={}),this.setTerminal("source",t,e,n)},Object.defineProperty(ld.prototype,"target",{get:function(){return this.getTarget()},set:function(t){this.setTarget(t)},enumerable:!1,configurable:!0}),ld.prototype.getTarget=function(){return this.getTerminal("target")},ld.prototype.getTargetCellId=function(){return this.target.cell},ld.prototype.getTargetPortId=function(){return this.target.port},ld.prototype.setTarget=function(t,e,n){return void 0===n&&(n={}),this.setTerminal("target",t,e,n)},ld.prototype.getTerminal=function(t){return ia({},this.store.get(t))},ld.prototype.setTerminal=function(t,e,n,o){if(void 0===o&&(o={}),e instanceof U.Cell)return this.store.set(t,Mi({},n,{cell:e.id}),o),this;return e instanceof U.Point||null!=e.x&&null!=e.y?this.store.set(t,Mi({},n,{x:e.x,y:e.y}),o):this.store.set(t,mo(e),o),this},ld.prototype.getSourcePoint=function(){return this.getTerminalPoint("source")},ld.prototype.getTargetPoint=function(){return this.getTerminalPoint("target")},ld.prototype.getTerminalPoint=function(t){var e=this[t];if(U.Point.isPointLike(e))return U.Point.create(e);e=this.getTerminalCell(t);return e?e.getConnectionPoint(this,t):new U.Point},ld.prototype.getSourceCell=function(){return this.getTerminalCell("source")},ld.prototype.getTargetCell=function(){return this.getTerminalCell("target")},ld.prototype.getTerminalCell=function(t){if(this.model){t="source"===t?this.getSourceCellId():this.getTargetCellId();if(t)return this.model.getCell(t)}return null},ld.prototype.getSourceNode=function(){return this.getTerminalNode("source")},ld.prototype.getTargetNode=function(){return this.getTerminalNode("target")},ld.prototype.getTerminalNode=function(t){for(var e=this,n={};e&&e.isEdge();){if(n[e.id])return null;n[e.id]=!0,e=e.getTerminalCell(t)}return e&&e.isNode()?e:null},Object.defineProperty(ld.prototype,"router",{get:function(){return this.getRouter()},set:function(t){null==t?this.removeRouter():this.setRouter(t)},enumerable:!1,configurable:!0}),ld.prototype.getRouter=function(){return this.store.get("router")},ld.prototype.setRouter=function(t,e,n){return"object"==typeof t?this.store.set("router",t,e):this.store.set("router",{name:t,args:e},n),this},ld.prototype.removeRouter=function(t){return void 0===t&&(t={}),this.store.remove("router",t),this},Object.defineProperty(ld.prototype,"connector",{get:function(){return this.getConnector()},set:function(t){null==t?this.removeConnector():this.setConnector(t)},enumerable:!1,configurable:!0}),ld.prototype.getConnector=function(){return this.store.get("connector")},ld.prototype.setConnector=function(t,e,n){return"object"==typeof t?this.store.set("connector",t,e):this.store.set("connector",{name:t,args:e},n),this},ld.prototype.removeConnector=function(t){return void 0===t&&(t={}),this.store.remove("connector",t)},Object.defineProperty(ld.prototype,"strategy",{get:function(){return this.getStrategy()},set:function(t){null==t?this.removeStrategy():this.setStrategy(t)},enumerable:!1,configurable:!0}),ld.prototype.getStrategy=function(){return this.store.get("strategy")},ld.prototype.setStrategy=function(t,e,n){return"object"==typeof t?this.store.set("strategy",t,e):this.store.set("strategy",{name:t,args:e},n),this},ld.prototype.removeStrategy=function(t){return void 0===t&&(t={}),this.store.remove("strategy",t)},ld.prototype.getDefaultLabel=function(){var t=this.constructor;return mo(this.store.get("defaultLabel")||t.defaultLabel||{})},Object.defineProperty(ld.prototype,"labels",{get:function(){return this.getLabels()},set:function(t){this.setLabels(t)},enumerable:!1,configurable:!0}),ld.prototype.getLabels=function(){var e=this;return aa(this.store.get("labels",[])).map(function(t){return e.parseLabel(t)})},ld.prototype.setLabels=function(t,e){return void 0===e&&(e={}),this.store.set("labels",Array.isArray(t)?t:[t],e),this},ld.prototype.insertLabel=function(t,e,n){void 0===n&&(n={});var o=this.getLabels(),i=o.length,e=null!=e&&isFinite(e)?e:i;return e<0&&(e=i+e+1),o.splice(e,0,this.parseLabel(t)),this.setLabels(o,n)},ld.prototype.appendLabel=function(t,e){return void 0===e&&(e={}),this.insertLabel(t,-1,e)},ld.prototype.getLabelAt=function(t){var e=this.getLabels();return null!=t&&isFinite(t)?this.parseLabel(e[t]):null},ld.prototype.setLabelAt=function(t,e,n){var o;return void 0===n&&(n={}),null!=t&&isFinite(t)&&((o=this.getLabels())[t]=this.parseLabel(e),this.setLabels(o,n)),this},ld.prototype.removeLabelAt=function(t,e){void 0===e&&(e={});var n=this.getLabels(),t=null!=t&&isFinite(t)?t:-1,t=n.splice(t,1);return this.setLabels(n,e),t.length?t[0]:null},ld.prototype.parseLabel=function(t){return"string"==typeof t?this.constructor.parseStringLabel(t):t},ld.prototype.onLabelsChanged=function(t){var n=t.previous,o=t.current,e=n&&o?o.filter(function(e){if(!n.find(function(t){return e===t||bi(e,t)}))return e}):o?aa(o):[],t=n&&o?n.filter(function(e){if(!o.find(function(t){return e===t||bi(e,t)}))return e}):n?aa(n):[];0<e.length&&this.notify("labels:added",{added:e,cell:this,edge:this}),0<t.length&&this.notify("labels:removed",{removed:t,cell:this,edge:this})},Object.defineProperty(ld.prototype,"vertexMarkup",{get:function(){return this.getVertexMarkup()},set:function(t){this.setVertexMarkup(t)},enumerable:!1,configurable:!0}),ld.prototype.getDefaultVertexMarkup=function(){return this.store.get("defaultVertexMarkup")||U.Markup.getEdgeVertexMarkup()},ld.prototype.getVertexMarkup=function(){return this.store.get("vertexMarkup")||this.getDefaultVertexMarkup()},ld.prototype.setVertexMarkup=function(t,e){return void 0===e&&(e={}),this.store.set("vertexMarkup",U.Markup.clone(t),e),this},Object.defineProperty(ld.prototype,"vertices",{get:function(){return this.getVertices()},set:function(t){this.setVertices(t)},enumerable:!1,configurable:!0}),ld.prototype.getVertices=function(){return aa(this.store.get("vertices",[]))},ld.prototype.setVertices=function(t,e){void 0===e&&(e={});t=Array.isArray(t)?t:[t];return this.store.set("vertices",t.map(function(t){return U.Point.toJSON(t)}),e),this},ld.prototype.insertVertex=function(t,e,n){void 0===n&&(n={});var o=this.getVertices(),i=o.length,e=null!=e&&isFinite(e)?e:i;return e<0&&(e=i+e+1),o.splice(e,0,U.Point.toJSON(t)),this.setVertices(o,n)},ld.prototype.appendVertex=function(t,e){return void 0===e&&(e={}),this.insertVertex(t,-1,e)},ld.prototype.getVertexAt=function(t){return null!=t&&isFinite(t)?this.getVertices()[t]:null},ld.prototype.setVertexAt=function(t,e,n){var o;return void 0===n&&(n={}),null!=t&&isFinite(t)&&((o=this.getVertices())[t]=e,this.setVertices(o,n)),this},ld.prototype.removeVertexAt=function(t,e){void 0===e&&(e={});var n=this.getVertices(),t=null!=t&&isFinite(t)?t:-1;return n.splice(t,1),this.setVertices(n,e)},ld.prototype.onVertexsChanged=function(t){var n=t.previous,o=t.current,e=n&&o?o.filter(function(e){if(!n.find(function(t){return U.Point.equals(e,t)}))return e}):o?aa(o):[],t=n&&o?n.filter(function(e){if(!o.find(function(t){return U.Point.equals(e,t)}))return e}):n?aa(n):[];0<e.length&&this.notify("vertexs:added",{added:e,cell:this,edge:this}),0<t.length&&this.notify("vertexs:removed",{removed:t,cell:this,edge:this})},ld.prototype.getDefaultMarkup=function(){return this.store.get("defaultMarkup")||U.Markup.getEdgeMarkup()},ld.prototype.getMarkup=function(){return ed.prototype.getMarkup.call(this)||this.getDefaultMarkup()},Object.defineProperty(ld.prototype,"toolMarkup",{get:function(){return this.getToolMarkup()},set:function(t){this.setToolMarkup(t)},enumerable:!1,configurable:!0}),ld.prototype.getDefaultToolMarkup=function(){return this.store.get("defaultToolMarkup")||U.Markup.getEdgeToolMarkup()},ld.prototype.getToolMarkup=function(){return this.store.get("toolMarkup")||this.getDefaultToolMarkup()},ld.prototype.setToolMarkup=function(t,e){return void 0===e&&(e={}),this.store.set("toolMarkup",t,e),this},Object.defineProperty(ld.prototype,"doubleToolMarkup",{get:function(){return this.getDoubleToolMarkup()},set:function(t){this.setDoubleToolMarkup(t)},enumerable:!1,configurable:!0}),ld.prototype.getDefaultDoubleToolMarkup=function(){return this.store.get("defaultDoubleToolMarkup")},ld.prototype.getDoubleToolMarkup=function(){return this.store.get("doubleToolMarkup")||this.getDefaultDoubleToolMarkup()},ld.prototype.setDoubleToolMarkup=function(t,e){return void 0===e&&(e={}),this.store.set("doubleToolMarkup",t,e),this},Object.defineProperty(ld.prototype,"arrowheadMarkup",{get:function(){return this.getArrowheadMarkup()},set:function(t){this.setArrowheadMarkup(t)},enumerable:!1,configurable:!0}),ld.prototype.getDefaultArrowheadMarkup=function(){return this.store.get("defaultArrowheadMarkup")||U.Markup.getEdgeArrowheadMarkup()},ld.prototype.getArrowheadMarkup=function(){return this.store.get("arrowheadMarkup")||this.getDefaultArrowheadMarkup()},ld.prototype.setArrowheadMarkup=function(t,e){return void 0===e&&(e={}),this.store.set("arrowheadMarkup",t,e),this},ld.prototype.translate=function(e,n,t){return void 0===t&&(t={}),t.translateBy=t.translateBy||this.id,t.tx=e,t.ty=n,this.applyToPoints(function(t){return{x:(t.x||0)+e,y:(t.y||0)+n}},t)},ld.prototype.scale=function(e,n,o,t){return void 0===t&&(t={}),this.applyToPoints(function(t){return U.Point.create(t).scale(e,n,o).toJSON()},t)},ld.prototype.applyToPoints=function(t,e){void 0===e&&(e={});var n={},o=this.getSource(),i=this.getTarget();U.Point.isPointLike(o)&&(n.source=t(o)),U.Point.isPointLike(i)&&(n.target=t(i));i=this.getVertices();return 0<i.length&&(n.vertices=i.map(t)),this.store.set(n,e),this},ld.prototype.getBBox=function(){return this.getPolyline().bbox()},ld.prototype.getConnectionPoint=function(){return this.getPolyline().pointAt(.5)},ld.prototype.getPolyline=function(){var e=[this.getSourcePoint(),this.getTargetPoint()];return this.getVertices().forEach(function(t){return e.push(U.Point.create(t))}),new U.Polyline(e)},ld.prototype.updateParent=function(t){var e=null,n=this.getSourceCell(),o=this.getTargetCell(),i=this.getParent();return n&&o&&(e=n===o||n.isDescendantOf(o)?o:o.isDescendantOf(n)?n:U.Cell.getCommonAncestor(n,o)),!i||e&&e.id===i.id||i.unembed(this,t),e&&e.embed(this,t),e},ld.prototype.hasLoop=function(t){void 0===t&&(t={});var e=this.getSource(),n=this.getTarget(),o=e.cell,e=n.cell;if(!o||!e)return!1;n=o===e;return!n&&t.deep&&this._model&&(o=this.getSourceCell(),e=this.getTargetCell(),o&&e&&(n=o.isAncestorOf(e,t)||e.isAncestorOf(o,t))),n},ld.prototype.getFragmentAncestor=function(){var t=[this,this.getSourceNode(),this.getTargetNode()].filter(function(t){return null!=t});return this.getCommonAncestor.apply(this,t)},ld.prototype.isFragmentDescendantOf=function(t){var e=this.getFragmentAncestor();return!!e&&(e.id===t.id||e.isDescendantOf(t))},ld.defaults={},ld),(U.Edge||(U.Edge={})).equalTerminals=function(t,e){return t.cell===e.cell&&(t.port===e.port||null==t.port&&null==e.port)},(dn=U.Edge||(U.Edge={})).defaultLabel={markup:[{tagName:"rect",selector:"body"},{tagName:"text",selector:"label"}],attrs:{text:{fill:"#000",fontSize:14,textAnchor:"middle",textVerticalAnchor:"middle",pointerEvents:"none"},rect:{ref:"label",fill:"#fff",rx:3,ry:3,refWidth:1,refHeight:1,refX:0,refY:0}},position:{distance:.5}},dn.parseStringLabel=function(t){return{attrs:{label:{text:t}}}},(td=U.Edge||(U.Edge={})).registry=Kc.create({type:"edge",process:function(t,e){if(_p.exist(t,!1))throw new Error("Edge with name '"+t+"' was registered by anthor Node");if("function"==typeof e)return e.config({shape:t}),e;var n=td,o=e.inherit,i=ra(e,["inherit"]),e=this.get(o||"edge");null==e&&o?this.onNotFound(o,"inherited"):n=e,null==i.constructorName&&(i.constructorName=t);i=n.define.call(n,i);return i.config({shape:t}),i}}),_p.setEdgeRegistry(td.registry),Qp=U.Edge||(U.Edge={}),pn="basic.edge",Qp.config({shape:pn,propHooks:function(t){var e=t.label,t=ra(t,["label"]);return e&&(null==t.labels&&(t.labels=[]),e="string"==typeof e?Qp.parseStringLabel(e):e,t.labels.push(e)),t}}),Qp.registry.register(pn,Qp),Zp=U.Edge||(U.Edge={}),Kp=0,Zp.define=function(t){var e=t.constructorName,t=ra(t,["constructorName"]),e=Mr((e=e||t.shape)?Lr(e):"CustomEdge"+(Kp+=1),this);return e.config(t),t.shape&&Zp.registry.register(t.shape,e),e},Zp.create=function(t){var e=t.shape||"edge",n=Zp.registry.get(e);return n?new n(t):Zp.registry.onNotFound(e)};var hd,ud,pd=(oa(dd,hd=U.Basecoat),dd.prototype.toJSON=function(){return this.cells.map(function(t){return t.toJSON()})},dd.prototype.add=function(t,e,n){var o,i=this,r="number"==typeof e?(o=e,ia({merge:!1},n)):(o=this.length,ia({merge:!1},e));o>this.length&&(o=this.length),o<0&&(o+=this.length+1);var t=Array.isArray(t)?t:[t],s=this.comparator&&"number"!=typeof e&&!1!==r.sort,a=this.comparator||null,l=!1,c=[],h=[];return t.forEach(function(t){var e=i.get(t);e?r.merge&&!t.isSameStore(e)&&(e.setProp(t.getProp(),n),h.push(e),s&&!l&&(l=null==a||"function"==typeof a?e.hasChanged():"string"==typeof a?e.hasChanged(a):a.some(function(t){return e.hasChanged(t)}))):(c.push(t),i.reference(t))}),c.length&&(s&&(l=!0),(t=this.cells).splice.apply(t,aa([o,0],c)),this.length=this.cells.length),l&&this.sort({silent:!0}),r.silent||(c.forEach(function(t,e){e={cell:t,index:o+e,options:r};i.trigger("added",e),r.dryrun||t.notify("added",ia({},e))}),l&&this.trigger("sorted"),(c.length||h.length)&&this.trigger("updated",{added:c,merged:h,removed:[],options:r})),this},dd.prototype.remove=function(t,e){void 0===e&&(e={});var n=Array.isArray(t)?t:[t],n=this.removeCells(n,e);return!e.silent&&0<n.length&&this.trigger("updated",{options:e,removed:n,added:[],merged:[]}),Array.isArray(t)?n:n[0]},dd.prototype.removeCells=function(t,e){for(var n=[],o=0;o<t.length;o+=1){var i,r=this.get(t[o]);null!=r&&(i=this.cells.indexOf(r),this.cells.splice(i,1),--this.length,delete this.map[r.id],n.push(r),this.unreference(r),e.dryrun||r.remove(),e.silent||(this.trigger("removed",{cell:r,index:i,options:e}),e.dryrun||r.notify("removed",{cell:r,index:i,options:e})))}return n},dd.prototype.reset=function(t,e){var n=this;void 0===e&&(e={});var o,i,r,s=this.cells.slice();return s.forEach(function(t){return n.unreference(t)}),this.clean(),this.add(t,ia({silent:!0},e)),e.silent||(o=this.cells.slice(),this.trigger("reseted",{options:e,previous:s,current:o}),i=[],r=[],o.forEach(function(e){s.some(function(t){return t.id===e.id})||i.push(e)}),s.forEach(function(e){o.some(function(t){return t.id===e.id})||r.push(e)}),this.trigger("updated",{options:e,added:i,removed:r,merged:[]})),this},dd.prototype.push=function(t,e){return this.add(t,this.length,e)},dd.prototype.pop=function(t){var e=this.at(this.length-1);return this.remove(e,t)},dd.prototype.unshift=function(t,e){return this.add(t,0,e)},dd.prototype.shift=function(t){var e=this.at(0);return this.remove(e,t)},dd.prototype.get=function(t){if(null==t)return null;t="string"==typeof t||"number"==typeof t?t:t.id;return this.map[t]||null},dd.prototype.has=function(t){return null!=this.get(t)},dd.prototype.at=function(t){return t<0&&(t+=this.length),this.cells[t]||null},dd.prototype.first=function(){return this.at(0)},dd.prototype.last=function(){return this.at(-1)},dd.prototype.indexOf=function(t){return this.cells.indexOf(t)},dd.prototype.toArray=function(){return this.cells.slice()},dd.prototype.sort=function(t){return void 0===t&&(t={}),null!=this.comparator&&(this.cells=Hi(this.cells,this.comparator),t.silent||this.trigger("sorted")),this},dd.prototype.clone=function(){return new this.constructor(this.cells.slice(),{comparator:this.comparator})},dd.prototype.reference=function(t){(this.map[t.id]=t).on("*",this.notifyCellEvent,this),t.on("change:zIndex",this.onCellZIndexChanged,this)},dd.prototype.unreference=function(t){t.off("*",this.notifyCellEvent,this),t.off("change:zIndex",this.onCellZIndexChanged,this),delete this.map[t.id]},dd.prototype.notifyCellEvent=function(t,e){var n=e.cell;this.trigger("cell:"+t,e),n&&(n.isNode()?this.trigger("node:"+t,ia(ia({},e),{node:n})):n.isEdge()&&this.trigger("edge:"+t,ia(ia({},e),{edge:n})))},dd.prototype.onCellZIndexChanged=function(t){this.sort(t.options)},dd.prototype.clean=function(){this.length=0,this.cells=[],this.map={}},dd);function dd(t,e){void 0===e&&(e={});var n=hd.call(this)||this;return n.length=0,n.comparator=e.comparator||"zIndex",n.clean(),t&&n.reset(t,{silent:!0}),n}function gd(t){void 0===t&&(t=[]);var e=ud.call(this)||this;return e.batches={},e.addings=new WeakMap,e.nodes={},e.edges={},e.outgoings={},e.incomings={},e.collection=new pd(t),e.setup(),e}U.Model=(oa(gd,ud=U.Basecoat),gd.prototype.notify=function(t,e){this.trigger(t,e);var n=this.graph;return n&&("sorted"===t||"reseted"===t||"updated"===t?n.trigger("model:"+t,e):n.trigger(t,e)),this},gd.prototype.setup=function(){var n=this,t=this.collection;t.on("sorted",function(){return n.notify("sorted",null)}),t.on("updated",function(t){return n.notify("updated",t)}),t.on("cell:change:zIndex",function(){return n.sortOnChangeZ()}),t.on("added",function(t){t=t.cell;n.onCellAdded(t)}),t.on("removed",function(t){var e=t.cell;n.onCellRemoved(e,t.options),n.notify("cell:removed",t),e.isNode()?n.notify("node:removed",ia(ia({},t),{node:e})):e.isEdge()&&n.notify("edge:removed",ia(ia({},t),{edge:e}))}),t.on("reseted",function(t){n.onReset(t.current),n.notify("reseted",t)}),t.on("edge:change:source",function(t){t=t.edge;return n.onEdgeTerminalChanged(t,"source")}),t.on("edge:change:target",function(t){t=t.edge;n.onEdgeTerminalChanged(t,"target")})},gd.prototype.sortOnChangeZ=function(){this.collection.sort()},gd.prototype.onCellAdded=function(t){var e=t.id;t.isEdge()?(t.updateParent(),this.edges[e]=!0,this.onEdgeTerminalChanged(t,"source"),this.onEdgeTerminalChanged(t,"target")):this.nodes[e]=!0},gd.prototype.onCellRemoved=function(t,e){var n,o,i,r,s=t.id;t.isEdge()?(delete this.edges[s],i=t.getSource(),r=t.getTarget(),i&&i.cell&&0<=(o=(n=this.outgoings[i.cell])?n.indexOf(s):-1)&&(n.splice(o,1),0===n.length&&delete this.outgoings[i.cell]),r&&r.cell&&0<=(o=(n=this.incomings[r.cell])?n.indexOf(s):-1)&&(n.splice(o,1),0===n.length&&delete this.incomings[r.cell])):delete this.nodes[s],e.clear||(e.disconnectEdges?this.disconnectConnectedEdges(t,e):this.removeConnectedEdges(t,e)),t.model===this&&(t.model=null)},gd.prototype.onReset=function(t){var e=this;this.nodes={},this.edges={},this.outgoings={},this.incomings={},t.forEach(function(t){return e.onCellAdded(t)})},gd.prototype.onEdgeTerminalChanged=function(t,e){var n="source"===e?this.outgoings:this.incomings,o=t.previous(e);o&&o.cell&&0<=(r=(i=n[o.cell])?i.indexOf(t.id):-1)&&(i.splice(r,1),0===i.length&&delete n[o.cell]);var i,r,e=t.getTerminal(e);e&&e.cell&&(-1===(r=(i=n[e.cell]||[]).indexOf(t.id))&&i.push(t.id),n[e.cell]=i)},gd.prototype.prepareCell=function(t,e){return t.model||e&&e.dryrun||(t.model=this),null==t.zIndex&&t.setZIndex(this.getMaxZIndex()+1,{silent:!0}),t},gd.prototype.resetCells=function(t,e){var n=this;return void 0===e&&(e={}),t.map(function(t){return n.prepareCell(t,ia(ia({},e),{dryrun:!0}))}),this.collection.reset(t,e),t.map(function(t){return n.prepareCell(t,{options:e})}),this},gd.prototype.clear=function(t){void 0===t&&(t={});var n=this.getCells();if(0===n.length)return this;var o=ia(ia({},t),{clear:!0});return this.batchUpdate("clear",function(){for(var t=n.sort(function(t,e){return(t.isEdge()?1:2)-(e.isEdge()?1:2)});0<t.length;){var e=t.shift();e&&e.remove(o)}},o),this},gd.prototype.addNode=function(t,e){void 0===e&&(e={});t=t instanceof U.Node?t:this.createNode(t);return this.addCell(t,e),t},gd.prototype.createNode=function(t){return U.Node.create(t)},gd.prototype.addEdge=function(t,e){void 0===e&&(e={});t=t instanceof U.Edge?t:this.createEdge(t);return this.addCell(t,e),t},gd.prototype.createEdge=function(t){return U.Edge.create(t)},gd.prototype.addCell=function(t,e){var n=this;return void 0===e&&(e={}),Array.isArray(t)?this.addCells(t,e):(this.collection.has(t)||this.addings.has(t)||(this.addings.set(t,!0),this.collection.add(this.prepareCell(t,e),e),t.eachChild(function(t){return n.addCell(t,e)}),this.addings.delete(t)),this)},gd.prototype.addCells=function(t,e){var n=this;void 0===e&&(e={});var o=t.length;if(0===o)return this;var i=ia(ia({},e),{position:o-1,maxPosition:o-1});return this.startBatch("add",i),t.forEach(function(t){n.addCell(t,i),--i.position}),this.stopBatch("add",i),this},gd.prototype.removeCell=function(t,e){void 0===e&&(e={});t="string"==typeof t?this.getCell(t):t;return t&&this.has(t)?this.collection.remove(t,e):null},gd.prototype.removeCells=function(t,e){var n=this;return void 0===e&&(e={}),t.length?this.batchUpdate("remove",function(){return t.map(function(t){return n.removeCell(t,e)})}):[]},gd.prototype.removeConnectedEdges=function(t,e){void 0===e&&(e={});t=this.getConnectedEdges(t);return t.forEach(function(t){t.remove(e)}),t},gd.prototype.disconnectConnectedEdges=function(t,o){void 0===o&&(o={});var i="string"==typeof t?t:t.id;this.getConnectedEdges(t).forEach(function(t){var e=t.getSourceCell(),n=t.getTargetCell();e&&e.id===i&&t.setSource({x:0,y:0},o),n&&n.id===i&&t.setTarget({x:0,y:0},o)})},gd.prototype.has=function(t){return this.collection.has(t)},gd.prototype.total=function(){return this.collection.length},gd.prototype.indexOf=function(t){return this.collection.indexOf(t)},gd.prototype.getCell=function(t){return this.collection.get(t)},gd.prototype.getCells=function(){return this.collection.toArray()},gd.prototype.getFirstCell=function(){return this.collection.first()},gd.prototype.getLastCell=function(){return this.collection.last()},gd.prototype.getMinZIndex=function(){var t=this.collection.first();return t&&t.getZIndex()||0},gd.prototype.getMaxZIndex=function(){var t=this.collection.last();return t&&t.getZIndex()||0},gd.prototype.getCellsFromCache=function(t){var e=this;return t?Object.keys(t).map(function(t){return e.getCell(t)}).filter(function(t){return null!=t}):[]},gd.prototype.getNodes=function(){return this.getCellsFromCache(this.nodes)},gd.prototype.getEdges=function(){return this.getCellsFromCache(this.edges)},gd.prototype.getOutgoingEdges=function(t){var e=this,t="string"==typeof t?t:t.id,t=this.outgoings[t];return t?t.map(function(t){return e.getCell(t)}).filter(function(t){return t&&t.isEdge()}):null},gd.prototype.getIncomingEdges=function(t){var e=this,t="string"==typeof t?t:t.id,t=this.incomings[t];return t?t.map(function(t){return e.getCell(t)}).filter(function(t){return t&&t.isEdge()}):null},gd.prototype.getConnectedEdges=function(t,o){var i=this;void 0===o&&(o={});var r=[],t="string"==typeof t?this.getCell(t):t;if(null==t)return r;var s={},a=o.indirect,l=o.incoming,c=o.outgoing;null==l&&null==c&&(l=c=!0);var h,e,u=function(t,e){var n,o=e?i.getOutgoingEdges(t):i.getIncomingEdges(t);null!=o&&o.forEach(function(t){s[t.id]||(r.push(t),s[t.id]=!0,a&&(l&&u(t,!1),c&&u(t,!0)))}),a&&t.isEdge()&&(n=e?t.getTargetCell():t.getSourceCell())&&n.isEdge()&&(s[n.id]||(r.push(n),u(n,e)))};return c&&u(t,!0),l&&u(t,!1),o.deep&&(t=t.getDescendants({deep:!0}),h={},t.forEach(function(t){t.isNode()&&(h[t.id]=!0)}),e=function(t,e){t=e?i.getOutgoingEdges(t.id):i.getIncomingEdges(t.id);null!=t&&t.forEach(function(t){var e,n;s[t.id]||(e=t.getSourceCell(),n=t.getTargetCell(),!o.enclosed&&e&&h[e.id]&&n&&h[n.id]||(r.push(t),s[t.id]=!0))})},t.forEach(function(t){t.isEdge()||(c&&e(t,!0),l&&e(t,!1))})),r},gd.prototype.isBoundary=function(t,e){t="string"==typeof t?this.getCell(t):t,t=e?this.getIncomingEdges(t):this.getOutgoingEdges(t);return null==t||0===t.length},gd.prototype.getBoundaryNodes=function(e){var n=this,o=[];return Object.keys(this.nodes).forEach(function(t){!n.isBoundary(t,e)||(t=n.getCell(t))&&o.push(t)}),o},gd.prototype.getRoots=function(){return this.getBoundaryNodes(!0)},gd.prototype.getLeafs=function(){return this.getBoundaryNodes(!1)},gd.prototype.isRoot=function(t){return this.isBoundary(t,!0)},gd.prototype.isLeaf=function(t){return this.isBoundary(t,!1)},gd.prototype.getNeighbors=function(i,r){void 0===r&&(r={});var s=r.incoming,a=r.outgoing;null==s&&null==a&&(s=a=!0);var t,e=this.getConnectedEdges(i,r).reduce(function(t,e){var n=e.hasLoop(r),o=e.getSourceCell(),e=e.getTargetCell();return s&&o&&o.isNode()&&!t[o.id]&&(!n&&(o===i||r.deep&&o.isDescendantOf(i))||(t[o.id]=o)),a&&e&&e.isNode()&&!t[e.id]&&(!n&&(e===i||r.deep&&e.isDescendantOf(i))||(t[e.id]=e)),t},{});return i.isEdge()&&(!s||(t=i.getSourceCell())&&t.isNode()&&!e[t.id]&&(e[t.id]=t),!a||(t=i.getTargetCell())&&t.isNode()&&!e[t.id]&&(e[t.id]=t)),Object.keys(e).map(function(t){return e[t]})},gd.prototype.isNeighbor=function(t,n,e){void 0===e&&(e={});var o=e.incoming,i=e.outgoing;return null==o&&null==i&&(o=i=!0),this.getConnectedEdges(t,e).some(function(t){var e=t.getSourceCell(),t=t.getTargetCell();return!(!o||!e||e.id!==n.id)||!(!i||!t||t.id!==n.id)||void 0})},gd.prototype.getSuccessors=function(n,o){var i=this;void 0===o&&(o={});var r=[];return this.search(n,function(t,e){t!==n&&i.matchDistance(e,o.distance)&&r.push(t)},ia(ia({},o),{outgoing:!0})),r},gd.prototype.isSuccessor=function(n,o,i){var r=this;void 0===i&&(i={});var s=!1;return this.search(n,function(t,e){if(t===o&&t!==n&&r.matchDistance(e,i.distance))return!(s=!0)},ia(ia({},i),{outgoing:!0})),s},gd.prototype.getPredecessors=function(n,o){var i=this;void 0===o&&(o={});var r=[];return this.search(n,function(t,e){t!==n&&i.matchDistance(e,o.distance)&&r.push(t)},ia(ia({},o),{incoming:!0})),r},gd.prototype.isPredecessor=function(n,o,i){var r=this;void 0===i&&(i={});var s=!1;return this.search(n,function(t,e){if(t===o&&t!==n&&r.matchDistance(e,i.distance))return!(s=!0)},ia(ia({},i),{incoming:!0})),s},gd.prototype.matchDistance=function(t,e){return null==e||("function"==typeof e?e(t):!(!Array.isArray(e)||!e.includes(t))||t===e)},gd.prototype.getCommonAncestor=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=[];return t.forEach(function(t){t&&(Array.isArray(t)?n.push.apply(n,t):n.push(t))}),U.Cell.getCommonAncestor.apply(U.Cell,n)},gd.prototype.getSubGraph=function(t,e){var n=this;void 0===e&&(e={});function o(t){r[t.id]||(i.push(t),(r[t.id]=t).isEdge()&&a.push(t),t.isNode()&&s.push(t))}var i=[],r={},s=[],a=[];return t.forEach(function(t){o(t),e.deep&&t.getDescendants({deep:!0}).forEach(o)}),a.forEach(function(t){var e=t.getSourceCell(),t=t.getTargetCell();e&&!r[e.id]&&(i.push(e),(r[e.id]=e).isNode()&&s.push(e)),t&&!r[t.id]&&(i.push(t),(r[t.id]=t).isNode()&&s.push(t))}),s.forEach(function(t){n.getConnectedEdges(t,e).forEach(function(t){var e=t.getSourceCell(),n=t.getTargetCell();!r[t.id]&&e&&r[e.id]&&n&&r[n.id]&&(i.push(t),r[t.id]=t)})}),i},gd.prototype.cloneSubGraph=function(t,e){void 0===e&&(e={});e=this.getSubGraph(t,e);return this.cloneCells(e)},gd.prototype.cloneCells=function(t){return U.Cell.cloneCells(t)},gd.prototype.getNodesFromPoint=function(t,e){var n="number"==typeof t?{x:t,y:e||0}:t;return this.getNodes().filter(function(t){return t.getBBox().containsPoint(n)})},gd.prototype.getNodesInArea=function(t,e,n,o,i){var r="number"==typeof t?new U.Rectangle(t,e,n,o):U.Rectangle.create(t),e="number"==typeof t?i:e,s=e&&e.strict;return this.getNodes().filter(function(t){t=t.getBBox();return s?r.containsRect(t):r.isIntersectWithRect(t)})},gd.prototype.getNodesUnderNode=function(e,t){void 0===t&&(t={});var n=e.getBBox();return(null==t.by||"bbox"===t.by?this.getNodesInArea(n):this.getNodesFromPoint(n[t.by])).filter(function(t){return e.id!==t.id&&!t.isDescendantOf(e)})},gd.prototype.getAllCellsBBox=function(){return this.getCellsBBox(this.getCells())},gd.prototype.getCellsBBox=function(t,e){return void 0===e&&(e={}),U.Cell.getCellsBBox(t,e)},gd.prototype.search=function(t,e,n){void 0===n&&(n={}),n.breadthFirst?this.breadthFirstSearch(t,e,n):this.depthFirstSearch(t,e,n)},gd.prototype.breadthFirstSearch=function(t,n,o){void 0===o&&(o={});var i=[],r={},s={};i.push(t),s[t.id]=0;for(var a=this;0<i.length;)!function(){var e=i.shift();null==e||r[e.id]||(!(r[e.id]=!0)===Gr(n,a,e,s[e.id])||a.getNeighbors(e,o).forEach(function(t){s[t.id]=s[e.id]+1,i.push(t)}))}()},gd.prototype.depthFirstSearch=function(t,o,i){void 0===i&&(i={});var r=[],s={},a={};r.push(t),a[t.id]=0;for(var l=this;0<r.length;)!function(){var e=r.pop();if(null==e||s[e.id])return;if(!(s[e.id]=!0)===Gr(o,l,e,a[e.id]))return;var t=l.getNeighbors(e,i),n=r.length;t.forEach(function(t){a[t.id]=a[e.id]+1,r.splice(n,0,t)})}()},gd.prototype.getShortestPath=function(t,e,n){void 0===n&&(n={});var o={};this.getEdges().forEach(function(t){var e=t.getSourceCellId(),t=t.getTargetCellId();e&&t&&(o[e]||(o[e]=[]),o[t]||(o[t]=[]),o[e].push(t),n.directed||o[t].push(e))});var t="string"==typeof t?t:t.id,i=U.Dijkstra.run(o,t,n.weight),r=[],s="string"==typeof e?e:e.id;for(i[s]&&r.push(s);s=i[s];)r.unshift(s);return r},gd.prototype.translate=function(e,n,o){return this.getCells().filter(function(t){return!t.hasParent()}).forEach(function(t){return t.translate(e,n,o)}),this},gd.prototype.resize=function(t,e,n){return this.resizeCells(t,e,this.getCells(),n)},gd.prototype.resizeCells=function(t,e,n,o){void 0===o&&(o={});var i,r,s,a=this.getCellsBBox(n);return a&&(i=Math.max(t/a.width,0),r=Math.max(e/a.height,0),s=a.getOrigin(),n.forEach(function(t){return t.scale(i,r,s,o)})),this},gd.prototype.toJSON=function(t){return void 0===t&&(t={}),gd.toJSON(this.getCells(),t)},gd.prototype.parseJSON=function(t){return gd.fromJSON(t)},gd.prototype.fromJSON=function(t,e){void 0===e&&(e={});t=this.parseJSON(t);return this.resetCells(t,e),this},gd.prototype.startBatch=function(t,e){return void 0===e&&(e={}),this.batches[t]=(this.batches[t]||0)+1,this.notify("batch:start",{name:t,data:e}),this},gd.prototype.stopBatch=function(t,e){return void 0===e&&(e={}),this.batches[t]=(this.batches[t]||0)-1,this.notify("batch:stop",{name:t,data:e}),this},gd.prototype.batchUpdate=function(t,e,n){void 0===n&&(n={}),this.startBatch(t,n);e=e();return this.stopBatch(t,n),e},gd.prototype.hasActiveBatch=function(t){var e=this;return void 0===t&&(t=Object.keys(this.batches)),(Array.isArray(t)?t:[t]).some(function(t){return 0<e.batches[t]})},gd),(wr=U.Model||(U.Model={})).toJSON=function(t,e){return void 0===e&&(e={}),{cells:t.map(function(t){return t.toJSON(e)})}},wr.fromJSON=function(t){var e=[];return Array.isArray(t)?e.push.apply(e,t):(t.cells&&e.push.apply(e,t.cells),t.nodes&&t.nodes.forEach(function(t){null==t.shape&&(t.shape="rect"),e.push(t)}),t.edges&&t.edges.forEach(function(t){null==t.shape&&(t.shape="edge"),e.push(t)})),e.map(function(t){var e=t.shape;if(e){if(U.Node.registry.exist(e))return U.Node.create(t);if(U.Edge.registry.exist(e))return U.Edge.create(t)}throw new Error("The `shape` should be specipied when creating a node/edge instance")})};var fd,yd=(oa(md,fd=U.CellView),md.prototype.getContainerClassName=function(){return[fd.prototype.getContainerClassName.call(this),this.prefixClassName("edge")].join(" ")},Object.defineProperty(md.prototype,"sourceBBox",{get:function(){var t=this.sourceView;if(!t){var e=this.cell.getSource();return new U.Rectangle(e.x,e.y)}e=this.sourceMagnet;return t.isEdgeElement(e)?new U.Rectangle(this.sourceAnchor.x,this.sourceAnchor.y):t.getBBoxOfElement(e||t.container)},enumerable:!1,configurable:!0}),Object.defineProperty(md.prototype,"targetBBox",{get:function(){var t=this.targetView;if(!t){var e=this.cell.getTarget();return new U.Rectangle(e.x,e.y)}e=this.targetMagnet;return t.isEdgeElement(e)?new U.Rectangle(this.targetAnchor.x,this.targetAnchor.y):t.getBBoxOfElement(e||t.container)},enumerable:!1,configurable:!0}),md.prototype.isEdgeView=function(){return!0},md.prototype.confirmUpdate=function(t,e){var n=this;void 0===e&&(e={});var o=t;if(this.hasAction(o,"source")){if(!this.updateTerminalProperties("source"))return o;o=this.removeAction(o,"source")}if(this.hasAction(o,"target")){if(!this.updateTerminalProperties("target"))return o;o=this.removeAction(o,"target")}var i=this.graph,r=this.sourceView,t=this.targetView;return i&&(r&&!i.renderer.isViewMounted(r)||t&&!i.renderer.isViewMounted(t))?o:o=this.hasAction(o,"render")?(this.render(),this.removeAction(o,["render","update","vertices","labels","tools","widget"])):(o=this.handleAction(o,"vertices",function(){return n.renderVertexMarkers()}),o=this.handleAction(o,"update",function(){return n.update(null,e)}),o=this.handleAction(o,"labels",function(){return n.onLabelsChange(e)}),o=this.handleAction(o,"tools",function(){n.renderTools(),n.updateToolsPosition()}),this.handleAction(o,"widget",function(){return n.renderExternalTools()}))},md.prototype.onLabelsChange=function(t){void 0===t&&(t={}),this.shouldRerenderLabels(t)?this.renderLabels():this.updateLabels(),this.updateLabelPositions()},md.prototype.shouldRerenderLabels=function(t){void 0===t&&(t={});var e=this.cell.previous("labels");if(null==e)return!0;if("propertyPathArray"in t&&"propertyValue"in t){var n=t.propertyPathArray||[],o=n.length;if(1<o&&e[n[1]]){if(2===o)return"object"==typeof t.propertyValue&&gi(t.propertyValue,"markup");if("markup"!==n[2])return!1}}return!0},md.prototype.render=function(){return this.empty(),this.containers={},this.renderMarkup(),this.renderLabels(),this.update(),this},md.prototype.renderMarkup=function(){var t=this.cell.markup;if(t)return"string"==typeof t?this.renderStringMarkup(t):this.renderJSONMarkup(t);throw new TypeError("Invalid edge markup.")},md.prototype.renderJSONMarkup=function(t){t=this.parseJSONMarkup(t,this.container);this.selectors=t.selectors,this.container.append(t.fragment)},md.prototype.renderStringMarkup=function(t){var n=this.containers,t=U.Vector.createVectors(t);t.forEach(function(t){var e=t.attr("class");e&&(n[An(e)]=t.node)}),this.renderTools(),this.renderVertexMarkers(),this.renderArrowheadMarkers(),xs(this.container,t.map(function(t){return t.node}))},md.prototype.renderLabels=function(){var t=this.cell,e=t.getLabels(),n=e.length,o=this.containers.labels;if(this.labelCache={},this.labelSelectors={},n<=0)return o&&o.parentNode&&o.parentNode.removeChild(o),this;o?this.empty(o):(o=hs("g"),this.addClass(this.prefixClassName("edge-labels"),o),this.containers.labels=o);for(var i=0,r=e.length;i<r;i+=1){var s=e[i],a=this.normalizeLabelMarkup(this.parseLabelMarkup(s.markup)),l=void 0,s=void 0;s=a?(l=a.node,a.selectors):(c=t.getDefaultLabel(),l=(c=this.normalizeLabelMarkup(this.parseLabelMarkup(c.markup))).node,c.selectors),l.setAttribute("data-index",""+i),o.appendChild(l);var c=this.rootSelector;if(s[c])throw new Error("Ambiguous label root selector.");s[c]=l,this.labelCache[i]=l,this.labelSelectors[i]=s}return null==o.parentNode&&this.container.appendChild(o),this.updateLabels(),this.customizeLabels(),this},md.prototype.parseLabelMarkup=function(t){return t?"string"==typeof t?this.parseLabelStringMarkup(t):this.parseJSONMarkup(t):null},md.prototype.parseLabelStringMarkup=function(t){for(var e=U.Vector.createVectors(t),n=document.createDocumentFragment(),o=0,i=e.length;o<i;o+=1){var r=e[o].node;n.appendChild(r)}return{fragment:n,selectors:{}}},md.prototype.normalizeLabelMarkup=function(t){if(null!=t){var e=t.fragment;if(!(e instanceof DocumentFragment&&e.hasChildNodes()))throw new Error("Invalid label markup.");var n=e.childNodes;return(n=1<n.length||"G"!==n[0].nodeName.toUpperCase()?U.Vector.create("g").append(e):U.Vector.create(n[0])).addClass(this.prefixClassName("edge-label")),{node:n.node,selectors:t.selectors}}},md.prototype.updateLabels=function(){if(this.containers.labels)for(var t=this.cell,e=t.labels,n=this.can("edgeLabelMovable"),o=t.getDefaultLabel(),i=0,r=e.length;i<r;i+=1){var s=this.labelCache[i],a=this.labelSelectors[i];s.setAttribute("cursor",n?"move":"default");var l=e[i],c=Mi({},o.attrs,l.attrs);this.updateAttrs(s,c,{selectors:a,rootBBox:l.size?U.Rectangle.fromSize(l.size):void 0})}},md.prototype.mergeLabelAttrs=function(t,e,n){return null===e?null:void 0===e?null===n?null:void 0===n?void 0:t?n:Mi({},n):t?Mi({},n,e):void 0},md.prototype.customizeLabels=function(){if(this.containers.labels)for(var t=this.cell,e=t.labels,n=0,o=e.length;n<o;n+=1){var i=e[n],r=this.labelCache[n],s=this.labelSelectors[n];this.graph.hook.onEdgeLabelRendered({edge:t,label:i,container:r,selectors:s})}},md.prototype.renderTools=function(){var t=this.containers.tools;if(null==t)return this;var e,n,o=this.cell.toolMarkup,i=this.$(t).empty();return U.Markup.isStringMarkup(o)&&(e=hr(o),n=U.Vector.create(e()),i.append(n.node),this.toolCache=n.node,this.options.doubleTools&&(t=void 0,o=this.cell.doubleToolMarkup,t=U.Markup.isStringMarkup(o)?(e=hr(o),U.Vector.create(e())):n.clone(),i.append(t.node),this.tool2Cache=t.node)),this},md.prototype.renderExternalTools=function(){var t=this.cell.getTools();return this.addTools(t),this},md.prototype.renderVertexMarkers=function(){var t=this.containers.vertices;if(null==t)return this;var n,e=this.cell.vertexMarkup,o=this.$(t).empty();return U.Markup.isStringMarkup(e)&&(n=hr(e),this.cell.getVertices().forEach(function(t,e){o.append(U.Vector.create(n(ia({index:e},t))).node)})),this},md.prototype.renderArrowheadMarkers=function(){var t=this.containers.arrowheads;if(null==t)return this;var e=this.cell.arrowheadMarkup,n=this.$(t).empty();return U.Markup.isStringMarkup(e)&&(t=hr(e),e=U.Vector.create(t({end:"source"})).node,t=U.Vector.create(t({end:"target"})).node,this.containers.sourceArrowhead=e,this.containers.targetArrowhead=t,n.append(e,t)),this},md.prototype.update=function(t,e){void 0===e&&(e={}),this.cleanCache(),this.updateConnection(e);var n=this.cell.getAttrs();return null!=n&&this.updateAttrs(this.container,n,{attrs:t===n?null:t,selectors:this.selectors}),this.updateConnectionPath(),this.updateLabelPositions(),this.updateToolsPosition(),this.updateArrowheadMarkers(),null==e.toolId?this.renderExternalTools():this.updateTools(e),this},md.prototype.removeRedundantLinearVertices=function(t){void 0===t&&(t={});var e=this.cell,n=e.getVertices(),o=aa([this.sourceAnchor],n,[this.targetAnchor]),i=o.length,n=new U.Polyline(o);n.simplify({threshold:.01});o=n.points.map(function(t){return t.toJSON()}),n=o.length;return i===n?0:(e.setVertices(o.slice(1,n-1),t),i-n)},md.prototype.updateConnectionPath=function(){var t,e=this.containers;e.connection&&(t=this.getConnectionPathData(),e.connection.setAttribute("d",t)),e.connectionWrap&&(t=this.getConnectionPathData(),e.connectionWrap.setAttribute("d",t)),e.sourceMarker&&e.targetMarker&&this.translateAndAutoOrientArrows(e.sourceMarker,e.targetMarker)},md.prototype.getTerminalView=function(t){switch(t){case"source":return this.sourceView||null;case"target":return this.targetView||null;default:throw new Error("Unknown terminal type '"+t+"'")}},md.prototype.getTerminalAnchor=function(t){switch(t){case"source":return U.Point.create(this.sourceAnchor);case"target":return U.Point.create(this.targetAnchor);default:throw new Error("Unknown terminal type '"+t+"'")}},md.prototype.getTerminalConnectionPoint=function(t){switch(t){case"source":return U.Point.create(this.sourcePoint);case"target":return U.Point.create(this.targetPoint);default:throw new Error("Unknown terminal type '"+t+"'")}},md.prototype.getTerminalMagnet=function(t,e){switch(void 0===e&&(e={}),t){case"source":if(e.raw)return this.sourceMagnet;var n=this.sourceView;return n?this.sourceMagnet||n.container:null;case"target":if(e.raw)return this.targetMagnet;e=this.targetView;return e?this.targetMagnet||e.container:null;default:throw new Error("Unknown terminal type '"+t+"'")}},md.prototype.updateConnection=function(t){void 0===t&&(t={});var e,n,o=this.cell;t.translateBy&&o.isFragmentDescendantOf(t.translateBy)?(e=t.tx||0,n=t.ty||0,this.routePoints=new U.Polyline(this.routePoints).translate(e,n).points,this.translateConnectionPoints(e,n),this.path.translate(e,n)):(n=o.getVertices(),o=this.findAnchors(n),this.sourceAnchor=o.source,this.targetAnchor=o.target,this.routePoints=this.findRoutePoints(n),n=this.findConnectionPoints(this.routePoints,this.sourceAnchor,this.targetAnchor),this.sourcePoint=n.source,this.targetPoint=n.target,n=this.findMarkerPoints(this.routePoints,this.sourcePoint,this.targetPoint),this.path=this.findPath(this.routePoints,n.source||this.sourcePoint,n.target||this.targetPoint)),this.cleanCache()},md.prototype.findAnchors=function(t){var e=this.cell,n=e.source,o=e.target,e=t[0],t=t[t.length-1];return o.priority&&!n.priority?this.findAnchorsOrdered("target",t,"source",e):this.findAnchorsOrdered("source",e,"target",t)},md.prototype.findAnchorsOrdered=function(t,e,n,o){var i,r=this.cell,s=r[t],a=r[n],l=this.getTerminalView(t),c=this.getTerminalView(n),h=this.getTerminalMagnet(t),u=this.getTerminalMagnet(n);return s=l?(r=void 0,r=e?U.Point.create(e):c?u:U.Point.create(a),this.getAnchor(s.anchor,l,h,r,t)):U.Point.create(s),i=c?(i=U.Point.create(o||s),this.getAnchor(a.anchor,c,u,i,n)):U.Point.isPointLike(a)?U.Point.create(a):new U.Point,(a={})[t]=s,a[n]=i,a},md.prototype.getAnchor=function(t,e,n,o,i){var r,s=e.isEdgeElement(n),a=this.graph.options.connecting,t="string"==typeof t?{name:t}:t;if(t||(t="string"==typeof(c=s?("source"===i?a.sourceEdgeAnchor:a.targetEdgeAnchor)||a.edgeAnchor:("source"===i?a.sourceAnchor:a.targetAnchor)||a.anchor)?{name:c}:c),!t)throw new Error("Anchor should be specified.");var l,c=t.name;if(s){if("function"!=typeof(l=qu.registry.get(c)))return qu.registry.onNotFound(c);r=Gr(l,this,e,n,o,t.args||{},i)}else{if("function"!=typeof(l=Uu.registry.get(c)))return Uu.registry.onNotFound(c);r=Gr(l,this,e,n,o,t.args||{},i)}return r?r.round(this.POINT_ROUNDING):new U.Point},md.prototype.findRoutePoints=function(t){void 0===t&&(t=[]);var e,n=this.graph.options.connecting.router||Lp.presets.normal,o=this.cell.getRouter()||n;if("function"==typeof o)e=Gr(o,this,t,{},this);else{var i="string"==typeof o?o:o.name,n="string"!=typeof o&&o.args||{},o=i?Lp.registry.get(i):Lp.presets.normal;if("function"!=typeof o)return Lp.registry.onNotFound(i);e=Gr(o,this,t,n,this)}return null==e?t.map(function(t){return U.Point.create(t)}):e.map(function(t){return U.Point.create(t)})},md.prototype.findConnectionPoints=function(t,e,n){var o,i=this.cell,r=this.graph.options.connecting,s=i.getSource(),a=i.getTarget(),l=this.sourceView,c=this.targetView,h=t[0],i=t[t.length-1];return{source:l&&!l.isEdgeElement(this.sourceMagnet)?(t=this.sourceMagnet||l.container,o=new La(h||n,e),s=s.connectionPoint||r.sourceConnectionPoint||r.connectionPoint,this.getConnectionPoint(s,l,t,o,"source")):e,target:c&&!c.isEdgeElement(this.targetMagnet)?(o=this.targetMagnet||c.container,r=a.connectionPoint||r.targetConnectionPoint||r.connectionPoint,e=new La(i||e,n),this.getConnectionPoint(r,c,o,e,"target")):n}},md.prototype.getConnectionPoint=function(t,e,n,o,i){var r=o.end;if(null==t)return r;var s="string"==typeof t?t:t.name,a="string"==typeof t?{}:t.args,t=Ju.registry.get(s);if("function"!=typeof t)return Ju.registry.onNotFound(s);i=Gr(t,this,o,e,n,a||{},i);return i?i.round(this.POINT_ROUNDING):r},md.prototype.updateMarkerAttr=function(t){var e=this.cell.getAttrs(),n="."+t+"-marker",t=e&&e[n];t&&this.updateAttrs(this.container,{},{attrs:((e={})[n]=t,e),selectors:this.selectors})},md.prototype.findMarkerPoints=function(t,e,n){function o(t){for(var e=l.cell.getAttrs(),n=Object.keys(e),o=0,i=n.length;o<i;o+=1){var r=e[n[o]];if(r[t+"Marker"]||r[t+"-marker"]){r=r.strokeWidth||r["stroke-width"];if(r)return parseFloat(r);break}}return null}var i,r,s,a,l=this,c=t[0],h=t[t.length-1],u=this.containers.sourceMarker,p=this.containers.targetMarker,t=this.markerCache;return u?(this.updateMarkerAttr("source"),t.sourceBBox=t.sourceBBox||ec(u),0<t.sourceBBox.width&&(s=gc(u),a=e.clone().move(c||n,t.sourceBBox.width*s.sx*-1))):(r=o("source"))&&(a=e.clone().move(c||n,-r)),p?(this.updateMarkerAttr("target"),t.targetBBox=t.targetBBox||ec(p),0<t.targetBBox.width&&(s=gc(p),i=n.clone().move(h||e,t.targetBBox.width*s.sx*-1))):(r=o("target"))&&(i=n.clone().move(h||e,-r)),t.sourcePoint=a||e.clone(),t.targetPoint=i||n.clone(),{source:a,target:i}},md.prototype.findPath=function(t,e,n){var o,i=this.cell.getConnector()||this.graph.options.connecting.connector;if("string"==typeof i?o=i:(o=i.name,s=i.args),o){var r=jp.registry.get(o);if("function"!=typeof r)return jp.registry.onNotFound(o);r=r}else r=jp.presets.normal;var s=Gr(r,this,e,n,t,ia(ia({},s),{raw:!0}),this);return"string"==typeof s?U.Path.parse(s):s},md.prototype.translateConnectionPoints=function(t,e){var n=this.markerCache;n.sourcePoint&&n.sourcePoint.translate(t,e),n.targetPoint&&n.targetPoint.translate(t,e),this.sourcePoint.translate(t,e),this.targetPoint.translate(t,e),this.sourceAnchor.translate(t,e),this.targetAnchor.translate(t,e)},md.prototype.updateLabelPositions=function(){if(null==this.containers.labels)return this;if(!this.path)return this;var t=this.cell,e=t.getLabels();if(0===e.length)return this;for(var t=t.getDefaultLabel(),n=this.normalizeLabelPosition(t.position),o=0,i=e.length;o<i;o+=1){var r=e[o],r=this.normalizeLabelPosition(r.position),r=Mi({},n,r),r=this.getLabelTransformationMatrix(r);this.labelCache[o].setAttribute("transform",Ul(r))}return this},md.prototype.updateToolsPosition=function(){if(null==this.containers.tools)return this;var t,e="",n=this.options.toolsOffset,o=this.getConnectionLength();return null!=o&&(o<this.options.shortLength&&(e="scale(.5)",n/=2),null!=(t=this.getPointAtLength(n))&&Fs(this.toolCache,"transform","translate("+t.x+","+t.y+") "+e),this.options.doubleTools&&o>=this.options.longLength?(n=this.options.doubleToolsOffset||n,null!=(t=this.getPointAtLength(o-n))&&Fs(this.tool2Cache,"transform","translate("+t.x+","+t.y+") "+e),Fs(this.tool2Cache,"visibility","visible")):this.options.doubleTools&&Fs(this.tool2Cache,"visibility","hidden")),this},md.prototype.updateArrowheadMarkers=function(){var t=this.containers.arrowheads;if(null==t)return this;if("none"===t.style.display)return this;var e=this.containers.sourceArrowhead,n=this.containers.targetArrowhead;return e&&n&&(gc(e,t=(this.getConnectionLength()||0)<this.options.shortLength?.5:1),gc(n,t),this.translateAndAutoOrientArrows(e,n)),this},md.prototype.updateTerminalProperties=function(t){var e=this.cell,n=this.graph,o=e[t],i=o&&o.cell,e=t+"View";if(!i)return this[e]=null,this.updateTerminalMagnet(t),!0;o=n.getCellById(i);if(!o)throw new Error("Edge's "+t+' node with id "'+i+'" not exists');n=o.findView(n);return!!n&&(this[e]=n,this.updateTerminalMagnet(t),!0)},md.prototype.updateTerminalMagnet=function(t){var e=t+"Magnet",n=this.getTerminalView(t);n?((t=n.getMagnetFromEdgeTerminal(this.cell[t]))===n.container&&(t=null),this[e]=t):this[e]=null},md.prototype.translateAndAutoOrientArrows=function(t,e){var n=this.routePoints;t&&fc(t,this.sourcePoint,n[0]||this.targetPoint,this.graph.view.stage),e&&fc(e,this.targetPoint,n[n.length-1]||this.sourcePoint,this.graph.view.stage)},md.prototype.getLabelPositionAngle=function(t){t=this.cell.getLabelAt(t);return t&&t.position&&"object"==typeof t.position&&t.position.angle||0},md.prototype.getLabelPositionArgs=function(t){t=this.cell.getLabelAt(t);if(t&&t.position&&"object"==typeof t.position)return t.position.options},md.prototype.getDefaultLabelPositionArgs=function(){var t=this.cell.getDefaultLabel();if(t&&t.position&&"object"==typeof t.position)return t.position.options},md.prototype.mergeLabelPositionArgs=function(t,e){return null===t?null:void 0===t?null===e?null:e:Mi({},e,t)},md.prototype.addLabel=function(t,e,n,o){var i,r,s=0,o="number"!=typeof t?(i=t.x,r=t.y,"number"==typeof e?(s=e,n):e):(i=t,r=e,"number"==typeof n?(s=n,o):n),n=this.getDefaultLabelPositionArgs(),n=this.mergeLabelPositionArgs(o,n),n={position:this.getLabelPosition(i,r,s,n)};return this.cell.insertLabel(n,-1,o),-1},md.prototype.addVertex=function(t,e,n){var o="number"!=typeof t,i=o?t.x:t,t=o?t.y:e,e=o?e:n,n={x:i,y:t},t=this.getVertexIndex(i,t);return this.cell.insertVertex(n,t,e),t},md.prototype.sendToken=function(t,e,n){var o,i,r,s="linear";"object"==typeof e?(o=e.duration,i=!0===e.reversed,a=e.selector,!1===e.rotate?r="":!0===e.rotate?r="auto":null!=e.rotate&&(r=""+e.rotate),e.timing&&(s=e.timing)):(o=e,i=!1,a=null);var a,l,c={dur:(o=o||1e3)+"ms",repeatCount:"1",calcMode:s,fill:"freeze"};if(r&&(c.rotate=r),i&&(c.keyPoints="1;0",c.keyTimes="0;1"),"object"==typeof e&&(e.duration,e.reversed,e.selector,e.rotate,e.timing,l=ra(e,["duration","reversed","selector","rotate","timing"]),Object.keys(l).forEach(function(t){return c[t]=l[t]})),!((a="string"==typeof a?this.findOne(a,this.container,this.selectors):this.containers.connection||this.container.querySelector("path"))instanceof SVGPathElement))throw new Error("Token animation requires a valid connection path.");var h="string"==typeof t?this.findOne(t):t;if(null==h)throw new Error("Token animation requires a valid token element.");function u(){p||vs(h)}var p=h.parentNode,t=U.Vector.create(h);p||t.appendTo(this.graph.view.stage);var d=c.complete;c.complete=function(t){u(),n&&n(),d&&d(t)};var g=t.animateAlongPath(c,a);return function(){u(),g()}},md.prototype.getConnection=function(){return null!=this.path?this.path.clone():null},md.prototype.getConnectionPathData=function(){if(null==this.path)return"";var t=this.cache.pathCache;return gi(t,"data")||(t.data=this.path.serialize()),t.data||""},md.prototype.getConnectionSubdivisions=function(){if(null==this.path)return null;var t=this.cache.pathCache;return gi(t,"segmentSubdivisions")||(t.segmentSubdivisions=this.path.getSegmentSubdivisions()),t.segmentSubdivisions},md.prototype.getConnectionLength=function(){if(null==this.path)return 0;var t=this.cache.pathCache;return gi(t,"length")||(t.length=this.path.length({segmentSubdivisions:this.getConnectionSubdivisions()})),t.length},md.prototype.getPointAtLength=function(t){return null==this.path?null:this.path.pointAtLength(t,{segmentSubdivisions:this.getConnectionSubdivisions()})},md.prototype.getPointAtRatio=function(t){return null==this.path?null:(Vr(t)&&(t=parseFloat(t)/100),this.path.pointAt(t,{segmentSubdivisions:this.getConnectionSubdivisions()}))},md.prototype.getTangentAtLength=function(t){return null==this.path?null:this.path.tangentAtLength(t,{segmentSubdivisions:this.getConnectionSubdivisions()})},md.prototype.getTangentAtRatio=function(t){return null==this.path?null:this.path.tangentAt(t,{segmentSubdivisions:this.getConnectionSubdivisions()})},md.prototype.getClosestPoint=function(t){return null==this.path?null:this.path.closestPoint(t,{segmentSubdivisions:this.getConnectionSubdivisions()})},md.prototype.getClosestPointLength=function(t){return null==this.path?null:this.path.closestPointLength(t,{segmentSubdivisions:this.getConnectionSubdivisions()})},md.prototype.getClosestPointRatio=function(t){return null==this.path?null:this.path.closestPointNormalizedLength(t,{segmentSubdivisions:this.getConnectionSubdivisions()})},md.prototype.getLabelPosition=function(t,e,n,o){var i={distance:0},r=0,s="number"==typeof n?(r=n,o):n;null!=s&&(i.options=s);var a,l,c=s&&s.absoluteOffset,h=!(s&&s.absoluteDistance),u=s&&s.absoluteDistance&&s.reverseDistance,o=this.path,n={segmentSubdivisions:this.getConnectionSubdivisions()},s=new U.Point(t,e),t=o.closestPointT(s,n),e=this.getConnectionLength()||0,n=o.lengthAtT(t,n);return h&&(n=0<e?n/e:0),u&&(n=-1*(e-n)||1),i.distance=n,c||(a=o.tangentAtT(t)),l=a?a.pointOffset(s):(l=o.pointAtT(t),{x:(l=s.diff(l)).x,y:l.y}),i.offset=l,i.angle=r,i},md.prototype.normalizeLabelPosition=function(t){return"number"==typeof t?{distance:t}:t},md.prototype.getLabelTransformationMatrix=function(t){var e=this.normalizeLabelPosition(t),n=e.options||{},o=e.angle||0,i=e.distance,r=0<i&&i<=1,s=0,a={x:0,y:0},l=e.offset;l&&("number"==typeof l?s=l:(null!=l.x&&(a.x=l.x),null!=l.y&&(a.y=l.y)));var c,h=0!==a.x||0!==a.y||0===s,t=n.keepGradient,e=n.ensureLegibility,l=this.path,n={segmentSubdivisions:this.getConnectionSubdivisions()},r=r?i*this.getConnectionLength():i,i=l.tangentAtLength(r,n),r=o;return i?(h?(c=i.start).translate(a):((n=i.clone()).rotate(-90,i.start),n.setLength(s),c=n.end),t&&(r=i.angle()+o,e&&(r=U.Angle.normalize((r+90)%180-90)))):(c=l.start,h&&c.translate(a)),_l().translate(c.x,c.y).rotate(r)},md.prototype.getLabelCoordinates=function(t){t=this.getLabelTransformationMatrix(t);return new U.Point(t.e,t.f)},md.prototype.getVertexIndex=function(t,e){var n=this.cell.getVertices(),o=this.getClosestPointLength(new U.Point(t,e)),i=0;if(null!=o)for(var r=n.length;i<r;i+=1){var s=n[i],s=this.getClosestPointLength(s);if(null!=s&&o<s)break}return i},md.prototype.getEventArgs=function(t,e,n){var o=this.cell;return null==e||null==n?{e:t,view:this,edge:o,cell:o}:{e:t,x:e,y:n,view:this,edge:o,cell:o}},md.prototype.notifyUnhandledMouseDown=function(t,e,n){this.notify("edge:unhandled:mousedown",{e:t,x:e,y:n,view:this,cell:this.cell,edge:this.cell})},md.prototype.notifyMouseDown=function(t,e,n){fd.prototype.onMouseDown.call(this,t,e,n),this.notify("edge:mousedown",this.getEventArgs(t,e,n))},md.prototype.notifyMouseMove=function(t,e,n){fd.prototype.onMouseMove.call(this,t,e,n),this.notify("edge:mousemove",this.getEventArgs(t,e,n))},md.prototype.notifyMouseUp=function(t,e,n){fd.prototype.onMouseUp.call(this,t,e,n),this.notify("edge:mouseup",this.getEventArgs(t,e,n))},md.prototype.onClick=function(t,e,n){fd.prototype.onClick.call(this,t,e,n),this.notify("edge:click",this.getEventArgs(t,e,n))},md.prototype.onDblClick=function(t,e,n){fd.prototype.onDblClick.call(this,t,e,n),this.notify("edge:dblclick",this.getEventArgs(t,e,n))},md.prototype.onContextMenu=function(t,e,n){fd.prototype.onContextMenu.call(this,t,e,n),this.notify("edge:contextmenu",this.getEventArgs(t,e,n))},md.prototype.onMouseDown=function(t,e,n){switch(this.notifyMouseDown(t,e,n),t.target.getAttribute("class")){case"vertex":return void this.startVertexDragging(t,e,n);case"vertex-remove":case"vertex-remove-area":return void this.handleVertexRemoving(t,e,n);case"connection":case"connection-wrap":return void this.handleVertexAdding(t,e,n);case"arrowhead":return void this.startArrowheadDragging(t,e,n);case"source-marker":case"target-marker":return void this.notifyUnhandledMouseDown(t,e,n)}this.startEdgeDragging(t,e,n)},md.prototype.onMouseMove=function(t,e,n){var o=this.getEventData(t);switch(o.action){case"drag-vertex":this.dragVertex(t,e,n);break;case"drag-label":this.dragLabel(t,e,n);break;case"drag-arrowhead":this.dragArrowhead(t,e,n);break;case"drag-edge":this.dragEdge(t,e,n)}return this.notifyMouseMove(t,e,n),o},md.prototype.onMouseUp=function(t,e,n){var o=this.getEventData(t);switch(o.action){case"drag-vertex":this.stopVertexDragging(t,e,n);break;case"drag-label":this.stopLabelDragging(t,e,n);break;case"drag-arrowhead":this.stopArrowheadDragging(t,e,n);break;case"drag-edge":this.stopEdgeDragging(t,e,n)}return this.notifyMouseUp(t,e,n),this.checkMouseleave(t),o},md.prototype.onMouseOver=function(t){fd.prototype.onMouseOver.call(this,t),this.notify("edge:mouseover",this.getEventArgs(t))},md.prototype.onMouseOut=function(t){fd.prototype.onMouseOut.call(this,t),this.notify("edge:mouseout",this.getEventArgs(t))},md.prototype.onMouseEnter=function(t){fd.prototype.onMouseEnter.call(this,t),this.notify("edge:mouseenter",this.getEventArgs(t))},md.prototype.onMouseLeave=function(t){fd.prototype.onMouseLeave.call(this,t),this.notify("edge:mouseleave",this.getEventArgs(t))},md.prototype.onMouseWheel=function(t,e,n,o){fd.prototype.onMouseWheel.call(this,t,e,n,o),this.notify("edge:mousewheel",ia({delta:o},this.getEventArgs(t,e,n)))},md.prototype.onCustomEvent=function(t,e,n,o){if(ms(t.target,"edge-tool",this.container)){if(t.stopPropagation(),this.can("useEdgeTools")){if("edge:remove"===e)return void this.cell.remove({ui:!0});this.notify("edge:customevent",ia({name:e},this.getEventArgs(t,n,o)))}this.notifyMouseDown(t,n,o)}else this.notify("edge:customevent",ia({name:e},this.getEventArgs(t,n,o))),fd.prototype.onCustomEvent.call(this,t,e,n,o)},md.prototype.onLabelMouseDown=function(t,e,n){this.notifyMouseDown(t,e,n),this.startLabelDragging(t,e,n),this.getEventData(t).stopPropagation&&t.stopPropagation()},md.prototype.startEdgeDragging=function(t,e,n){this.can("edgeMovable")?this.setEventData(t,{x:e,y:n,moving:!1,action:"drag-edge"}):this.notifyUnhandledMouseDown(t,e,n)},md.prototype.dragEdge=function(t,e,n){var o=this.getEventData(t);o.moving||(o.moving=!0,this.addClass("edge-moving"),this.notify("edge:move",{e:t,x:e,y:n,view:this,cell:this.cell,edge:this.cell})),this.cell.translate(e-o.x,n-o.y,{ui:!0}),this.setEventData(t,{x:e,y:n}),this.notify("edge:moving",{e:t,x:e,y:n,view:this,cell:this.cell,edge:this.cell})},md.prototype.stopEdgeDragging=function(t,e,n){var o=this.getEventData(t);o.moving&&(this.removeClass("edge-moving"),this.notify("edge:moved",{e:t,x:e,y:n,view:this,cell:this.cell,edge:this.cell})),o.moving=!1},md.prototype.prepareArrowheadDragging=function(t,e){var n=this.getTerminalMagnet(t),e={action:"drag-arrowhead",x:e.x,y:e.y,isNewEdge:!0===e.isNewEdge,terminalType:t,initialMagnet:n,initialTerminal:yo(this.cell[t]),fallbackAction:e.fallbackAction||"revert",getValidateConnectionArgs:this.createValidateConnectionArgs(t),options:e.options};return this.beforeArrowheadDragging(e),e},md.prototype.createValidateConnectionArgs=function(t){var n=[];n[4]=t,n[5]=this;var e=0,o=0,i="source"===t?(e=2,"target"):(o=2,"source"),r=this.cell[i],t=r.cell;return t&&(i=void 0,(t=n[e]=this.graph.renderer.findViewByCell(t))&&(i=t.getMagnetFromEdgeTerminal(r))===t.container&&(i=void 0),n[e+1]=i),function(t,e){return n[o]=t,n[o+1]=t.container===e?void 0:e,n}},md.prototype.beforeArrowheadDragging=function(t){t.zIndex=this.cell.zIndex,this.cell.toFront();var e=this.container.style;t.pointerEvents=e.pointerEvents,e.pointerEvents="none",this.graph.options.connecting.highlight&&this.highlightAvailableMagnets(t)},md.prototype.afterArrowheadDragging=function(t){null!=t.zIndex&&(this.cell.setZIndex(t.zIndex,{ui:!0}),t.zIndex=null),this.container.style.pointerEvents=t.pointerEvents||"",this.graph.options.connecting.highlight&&this.unhighlightAvailableMagnets(t)},md.prototype.arrowheadDragging=function(t,e,n,o){var i;o.x=e,o.y=n,o.currentTarget!==t&&(o.currentMagnet&&o.currentView&&o.currentView.unhighlight(o.currentMagnet,{type:"magnetAdsorbed"}),o.currentView=this.graph.renderer.findViewByElem(t),o.currentView?(o.currentMagnet=o.currentView.findMagnet(t),o.currentMagnet&&(i=this.graph.hook).validateConnection.apply(i,aa(o.getValidateConnectionArgs(o.currentView,o.currentMagnet),[o.currentView.getEdgeTerminal(o.currentMagnet,e,n,this.cell,o.terminalType)]))?o.currentView.highlight(o.currentMagnet,{type:"magnetAdsorbed"}):o.currentMagnet=null):o.currentMagnet=null),o.currentTarget=t,this.cell.prop(o.terminalType,{x:e,y:n},ia(ia({},o.options),{ui:!0}))},md.prototype.arrowheadDragged=function(t,e,n){var o=t.currentView,i=t.currentMagnet;i&&o&&(o.unhighlight(i,{type:"magnetAdsorbed"}),t=t.terminalType,n=o.getEdgeTerminal(i,e,n,this.cell,t),this.cell.setTerminal(t,n,{ui:!0}))},md.prototype.snapArrowhead=function(o,i,r){var s,a=this,l=this.graph,t=l.options.connecting.snap,c="object"==typeof t&&t.radius||50,e=l.renderer.findViewsInArea({x:o-c,y:i-c,width:2*c,height:2*c}),n=r.closestView||null,h=r.closestMagnet||null;r.closestView=null,r.closestMagnet=null;var u,p=Number.MAX_SAFE_INTEGER,d=new U.Point(o,i);e.forEach(function(n){var t;"false"!==n.container.getAttribute("magnet")&&(s=n.cell.getBBox().getCenter().distance(d))<c&&s<p&&(h===n.container||(t=l.hook).validateConnection.apply(t,aa(r.getValidateConnectionArgs(n,null),[n.getEdgeTerminal(n.container,o,i,a.cell,r.terminalType)])))&&(p=s,r.closestView=n,r.closestMagnet=n.container),n.container.querySelectorAll("[magnet]").forEach(function(t){var e;"false"!==t.getAttribute("magnet")&&(e=n.getBBoxOfElement(t),(s=d.distance(e.getCenter()))<c&&s<p&&(h===t||(e=l.hook).validateConnection.apply(e,aa(r.getValidateConnectionArgs(n,t),[n.getEdgeTerminal(t,o,i,a.cell,r.terminalType)])))&&(p=s,r.closestView=n,r.closestMagnet=t))})});var g=r.terminalType,f=r.closestView,t=r.closestMagnet,e=h!==t;if(n&&e&&n.unhighlight(h,{type:"magnetAdsorbed"}),f){if(!e)return;f.highlight(t,{type:"magnetAdsorbed"}),u=f.getEdgeTerminal(t,o,i,this.cell,g)}else u={x:o,y:i};this.cell.setTerminal(g,u,{},ia(ia({},r.options),{ui:!0}))},md.prototype.snapArrowheadEnd=function(t){var e=t.closestView,n=t.closestMagnet;e&&n&&(e.unhighlight(n,{type:"magnetAdsorbed"}),t.currentMagnet=e.findMagnet(n)),t.closestView=null,t.closestMagnet=null},md.prototype.finishEmbedding=function(t){this.graph.options.embedding.enabled&&this.cell.updateParent()&&(t.zIndex=null)},md.prototype.fallbackConnection=function(t){switch(t.fallbackAction){case"remove":this.cell.remove({ui:!0});break;case"revert":default:this.cell.prop(t.terminalType,t.initialTerminal,{ui:!0})}},md.prototype.notifyConnectionEvent=function(t,e){var n,o,i,r,s,a,l=t.terminalType,c=t.initialTerminal,h=this.cell[l];h&&!U.Edge.equalTerminals(c,h)&&(a=this.graph,n=(s=c).cell?a.getCellById(s.cell):null,o=s.port,i=n?a.findViewByCell(n):null,r=n||t.isNewEdge?null:U.Point.create(c).toJSON(),c=(s=h).cell?a.getCellById(s.cell):null,s=s.port,a=c?a.findViewByCell(c):null,h=c?null:U.Point.create(h).toJSON(),this.notify("edge:connected",{e:e,previousCell:n,previousPort:o,previousView:i,previousPoint:r,currentCell:c,currentView:a,currentPort:s,currentPoint:h,previousMagnet:t.initialMagnet,currentMagnet:t.currentMagnet,edge:this.cell,view:this,type:l,isNew:t.isNewEdge}))},md.prototype.highlightAvailableMagnets=function(r){var s=this,a=this.graph,l=a.model.getCells();r.marked={};for(var t=0,e=l.length;t<e;t+=1)!function(t){var n=a.renderer.findViewByCell(l[t]);if(!n)return;t=Array.prototype.slice.call(n.container.querySelectorAll("[magnet]"));"false"!==n.container.getAttribute("magnet")&&t.push(n.container);var e=t.filter(function(t){var e;return(e=a.hook).validateConnection.apply(e,aa(r.getValidateConnectionArgs(n,t),[n.getEdgeTerminal(t,r.x,r.y,s.cell,r.terminalType)]))});if(0<e.length){for(var o=0,i=e.length;o<i;o+=1)n.highlight(e[o],{type:"magnetAvailable"});n.highlight(null,{type:"nodeAvailable"}),r.marked[n.cell.id]=e}}(t)},md.prototype.unhighlightAvailableMagnets=function(t){var n=this,o=t.marked||{};Object.keys(o).forEach(function(t){var e=n.graph.renderer.findViewByCell(t);e&&(o[t].forEach(function(t){e.unhighlight(t,{type:"magnetAvailable"})}),e.unhighlight(null,{type:"nodeAvailable"}))}),t.marked=null},md.prototype.startArrowheadDragging=function(t,e,n){var o;this.can("arrowheadMovable")?(o=t.target.getAttribute("data-terminal"),o=this.prepareArrowheadDragging(o,{x:e,y:n}),this.setEventData(t,o)):this.notifyUnhandledMouseDown(t,e,n)},md.prototype.dragArrowhead=function(t,e,n){var o=this.getEventData(t);this.graph.options.connecting.snap?this.snapArrowhead(e,n,o):this.arrowheadDragging(this.getEventTarget(t),e,n,o)},md.prototype.stopArrowheadDragging=function(e,t,n){var o=this,i=this.graph,r=this.getEventData(e);i.options.connecting.snap?this.snapArrowheadEnd(r):this.arrowheadDragged(r,t,n),qr(i.hook.validateEdge(this.cell,r.terminalType,r.initialTerminal)).then(function(t){t?(o.finishEmbedding(r),o.notifyConnectionEvent(r,e)):o.fallbackConnection(r),o.afterArrowheadDragging(r)})},md.prototype.startLabelDragging=function(t,e,n){var o,i,r,s;this.can("edgeLabelMovable")?(s=t.currentTarget,o=parseInt(s.getAttribute("data-index"),10),i=this.getLabelPositionAngle(o),r=this.getLabelPositionArgs(o),s=this.getDefaultLabelPositionArgs(),s=this.mergeLabelPositionArgs(r,s),this.setEventData(t,{index:o,positionAngle:i,positionArgs:s,stopPropagation:!0,action:"drag-label"})):this.setEventData(t,{stopPropagation:!0}),this.graph.view.delegateDragEvents(t,this)},md.prototype.dragLabel=function(t,e,n){t=this.getEventData(t),n={position:this.getLabelPosition(e,n,t.positionAngle,t.positionArgs)};this.cell.setLabelAt(t.index,n)},md.prototype.stopLabelDragging=function(t,e,n){},md.prototype.handleVertexAdding=function(t,e,n){var o;this.can("vertexAddable")?(o=this.addVertex({x:e,y:n},{ui:!0}),this.setEventData(t,{index:o,action:"drag-vertex"})):this.notifyUnhandledMouseDown(t,e,n)},md.prototype.handleVertexRemoving=function(t,e,n){var o;this.can("vertexDeletable")?(o=t.target,o=parseInt(o.getAttribute("idx"),10),this.cell.removeVertexAt(o)):this.notifyUnhandledMouseDown(t,e,n)},md.prototype.startVertexDragging=function(t,e,n){var o;this.can("vertexMovable")?(o=t.target,o=parseInt(o.getAttribute("idx"),10),this.setEventData(t,{index:o,action:"drag-vertex"})):this.notifyUnhandledMouseDown(t,e,n)},md.prototype.dragVertex=function(t,e,n){t=this.getEventData(t);this.cell.setVertexAt(t.index,{x:e,y:n},{ui:!0})},md.prototype.stopVertexDragging=function(t,e,n){},md);function md(){var t=null!==fd&&fd.apply(this,arguments)||this;return t.POINT_ROUNDING=2,t.markerCache={},t}yd.config({isSvgElement:!0,priority:1,bootstrap:["render","source","target"],actions:{view:["render"],markup:["render"],attrs:["update"],source:["source","update"],target:["target","update"],router:["update"],connector:["update"],labels:["labels"],defaultLabel:["labels"],vertices:["vertices","update"],vertexMarkup:["vertices"],toolMarkup:["tools"],tools:["widget"]},shortLength:105,longLength:155,toolsOffset:40,doubleTools:!1,doubleToolsOffset:65,sampleInterval:50}),yd.registry.register("edge",yd,!0);var Cd,vd=(oa(bd,Cd=U.CellView),bd.prototype.getContainerClassName=function(){return[Cd.prototype.getContainerClassName.call(this),this.prefixClassName("node")].join(" ")},bd.prototype.isNodeView=function(){return!0},bd.prototype.confirmUpdate=function(t,e){var n=this;void 0===e&&(e={});return this.hasAction(t,"ports")&&(this.removePorts(),this.cleanPortsCache()),t=this.hasAction(t,"render")?(this.render(),this.removeAction(t,["render","update","resize","translate","rotate","ports","tools"])):(t=this.handleAction(t,"resize",function(){return n.resize(e)},"update"),t=this.handleAction(t,"update",function(){return n.update()},Uc.useCSSSelector?"ports":null),t=this.handleAction(t,"translate",function(){return n.translate()}),t=this.handleAction(t,"rotate",function(){return n.rotate()}),t=this.handleAction(t,"ports",function(){return n.renderPorts()}),this.handleAction(t,"tools",function(){return n.renderTools()}))},bd.prototype.update=function(t){this.cleanCache(),Uc.useCSSSelector&&this.removePorts();var e=this.cell,n=e.getSize(),e=e.getAttrs();this.updateAttrs(this.container,e,{attrs:t===e?null:t,rootBBox:new U.Rectangle(0,0,n.width,n.height),selectors:this.selectors,scalableNode:this.scalableNode,rotatableNode:this.rotatableNode}),Uc.useCSSSelector&&this.renderPorts()},bd.prototype.renderMarkup=function(){var t=this.cell.markup;if(t)return"string"==typeof t?this.renderStringMarkup(t):this.renderJSONMarkup(t);throw new TypeError("Invalid node markup.")},bd.prototype.renderJSONMarkup=function(t){var e=this.parseJSONMarkup(t,this.container),t=function(t){return Array.isArray(t)?t[0]:t};this.selectors=e.selectors,this.rotatableNode=t(this.selectors[this.rotatableSelector]),this.scalableNode=t(this.selectors[this.scalableSelector]),this.container.appendChild(e.fragment)},bd.prototype.renderStringMarkup=function(t){xs(this.container,U.Vector.toNodes(U.Vector.createVectors(t))),this.rotatableNode=ys(this.container,"."+this.rotatableSelector),this.scalableNode=ys(this.container,"."+this.scalableSelector),this.selectors={},this.rootSelector&&(this.selectors[this.rootSelector]=this.container)},bd.prototype.render=function(){return this.empty(),this.renderMarkup(),this.scalableNode&&this.update(),this.resize(),this.rotatableNode?(this.rotate(),this.translate()):this.updateTransform(),Uc.useCSSSelector||this.renderPorts(),this.renderTools(),this},bd.prototype.resize=function(t){if(void 0===t&&(t={}),this.scalableNode)return this.updateSize(t);this.cell.getAngle()&&this.rotate(),this.update()},bd.prototype.translate=function(){if(this.rotatableNode)return this.updateTranslation();this.updateTransform()},bd.prototype.rotate=function(){if(this.rotatableNode)return this.updateRotation(),void this.update();this.updateTransform()},bd.prototype.getTranslationString=function(){var t=this.cell.getPosition();return"translate("+t.x+","+t.y+")"},bd.prototype.getRotationString=function(){var t=this.cell.getAngle();if(t){var e=this.cell.getSize();return"rotate("+t+","+e.width/2+","+e.height/2+")"}},bd.prototype.updateTransform=function(){var t=this.getTranslationString(),e=this.getRotationString();e&&(t+=" "+e),this.container.setAttribute("transform",t)},bd.prototype.updateRotation=function(){var t;null!=this.rotatableNode&&(null!=(t=this.getRotationString())?this.rotatableNode.setAttribute("transform",t):this.rotatableNode.removeAttribute("transform"))},bd.prototype.updateTranslation=function(){this.container.setAttribute("transform",this.getTranslationString())},bd.prototype.updateSize=function(t){void 0===t&&(t={});var e=this.cell,n=e.getSize(),o=e.getAngle(),i=this.scalableNode,r=!1;0<i.getElementsByTagName("path").length&&(r=!0);var s=ec(i,{recursive:r}),r=n.width/(s.width||1),s=n.height/(s.height||1);i.setAttribute("transform","scale("+r+","+s+")");r=this.rotatableNode;null==r||(s=r.getAttribute("transform"))&&(r.setAttribute("transform",s+" rotate("+-o+","+n.width/2+","+n.height/2+")"),i=ec(i,{target:this.graph.view.stage}),e.prop("position",{x:i.x,y:i.y},ia({updated:!0},t)),this.translate(),this.rotate()),this.update()},bd.prototype.findPortElem=function(t,e){var n=t?this.portsCache[t]:null;if(!n)return null;t=n.portContentElement,n=n.portContentSelectors||{};return this.findOne(e,t,n)},bd.prototype.initializePorts=function(){this.cleanPortsCache()},bd.prototype.refreshPorts=function(){this.removePorts(),this.cleanPortsCache(),this.renderPorts()},bd.prototype.cleanPortsCache=function(){this.portsCache={}},bd.prototype.removePorts=function(){var e=this;Object.keys(this.portsCache).forEach(function(t){vs(e.portsCache[t].portElement)})},bd.prototype.renderPorts=function(){var n=this,e=this.getPortsContainer(),o=[];e.childNodes.forEach(function(t){o.push(t)});var i=ui(this.cell.getParsedPorts(),"zIndex");i.auto&&i.auto.forEach(function(t){t=n.getPortElement(t);e.append(t),o.push(t)}),Object.keys(i).forEach(function(t){var e;"auto"!==t&&(e=parseInt(t,10),n.appendPorts(i[t],e,o))}),this.updatePorts()},bd.prototype.getPortsContainer=function(){return this.rotatableNode||this.container},bd.prototype.appendPorts=function(t,e,n){var o=this,t=t.map(function(t){return o.getPortElement(t)});n[e]||e<0?Es(n[Math.max(e,0)],t):xs(this.getPortsContainer(),t)},bd.prototype.getPortElement=function(t){var e=this.portsCache[t.id];return e?e.portElement:this.createPortElement(t)},bd.prototype.createPortElement=function(t){var e=U.Markup.renderMarkup(this.getPortContainerMarkup()),n=e.elem;if(null==n)throw new Error("Invalid port container markup.");var o=(e=U.Markup.renderMarkup(this.getPortMarkup(t))).elem,i=e.selectors;if(null==o)throw new Error("Invalid port markup.");this.setAttrs({port:t.id,"port-group":t.group},o);var r,s=(e=U.Markup.renderMarkup(this.getPortLabelMarkup(t.label))).elem,e=e.selectors;if(null==s)throw new Error("Invalid port label markup.");if(i&&e){for(var a in e)if(i[a]&&a!==this.rootSelector)throw new Error("Selectors within port must be unique.");r=ia(ia({},i),e)}else r=i||e;return Qr(n,"x6-port"),Qr(o,"x6-port-body"),Qr(s,"x6-port-label"),n.appendChild(o),n.appendChild(s),this.portsCache[t.id]={portElement:n,portSelectors:r,portLabelElement:s,portLabelSelectors:e,portContentElement:o,portContentSelectors:i},this.graph.hook.onPortRendered({port:t,node:this.cell,container:n,selectors:r,labelContainer:s,labelSelectors:e,contentContainer:o,contentSelectors:i}),n},bd.prototype.updatePorts=function(){var e=this;this.updatePortGroup();var t=this.cell.getParsedGroups();Object.keys(t).forEach(function(t){return e.updatePortGroup(t)})},bd.prototype.updatePortGroup=function(t){for(var e=U.Rectangle.fromSize(this.cell.getSize()),n=this.cell.getPortsLayoutByGroup(t,e),o=0,i=n.length;o<i;o+=1){var r,s=n[o],a=s.portId,l=this.portsCache[a]||{},c=s.portLayout;this.applyPortTransform(l.portElement,c),null!=s.portAttrs&&(r={selectors:l.portSelectors||{}},s.portSize&&(r.rootBBox=U.Rectangle.fromSize(s.portSize)),this.updateAttrs(l.portElement,s.portAttrs,r));a=s.labelLayout;a&&(this.applyPortTransform(l.portLabelElement,a,-(c.angle||0)),a.attrs)&&(r={selectors:l.portLabelSelectors||{}},s.labelSize&&(r.rootBBox=U.Rectangle.fromSize(s.labelSize)),this.updateAttrs(l.portLabelElement,a.attrs,r))}},bd.prototype.applyPortTransform=function(t,e,n){void 0===n&&(n=0);var o=e.angle,e=e.position;uc(t,_l().rotate(n).translate(e.x||0,e.y||0).rotate(o||0),{absolute:!0})},bd.prototype.getPortContainerMarkup=function(){return this.cell.getPortContainerMarkup()||this.defaultPortContainerMarkup},bd.prototype.getPortMarkup=function(t){return t.markup||this.cell.portMarkup||this.defaultPortMarkup},bd.prototype.getPortLabelMarkup=function(t){return t.markup||this.cell.portLabelMarkup||this.defaultPortLabelMarkup},bd.prototype.getEventArgs=function(t,e,n){var o=this.cell;return null==e||null==n?{e:t,view:this,node:o,cell:o}:{e:t,x:e,y:n,view:this,node:o,cell:o}},bd.prototype.notifyMouseDown=function(t,e,n){Cd.prototype.onMouseDown.call(this,t,e,n),this.notify("node:mousedown",this.getEventArgs(t,e,n))},bd.prototype.notifyMouseMove=function(t,e,n){Cd.prototype.onMouseMove.call(this,t,e,n),this.notify("node:mousemove",this.getEventArgs(t,e,n))},bd.prototype.notifyMouseUp=function(t,e,n){Cd.prototype.onMouseUp.call(this,t,e,n),this.notify("node:mouseup",this.getEventArgs(t,e,n))},bd.prototype.onClick=function(t,e,n){Cd.prototype.onClick.call(this,t,e,n),this.notify("node:click",this.getEventArgs(t,e,n))},bd.prototype.onDblClick=function(t,e,n){Cd.prototype.onDblClick.call(this,t,e,n),this.notify("node:dblclick",this.getEventArgs(t,e,n))},bd.prototype.onContextMenu=function(t,e,n){Cd.prototype.onContextMenu.call(this,t,e,n),this.notify("node:contextmenu",this.getEventArgs(t,e,n))},bd.prototype.onMouseDown=function(t,e,n){this.isPropagationStopped(t)||(this.notifyMouseDown(t,e,n),this.startNodeDragging(t,e,n))},bd.prototype.onMouseMove=function(t,e,n){var o=this.getEventData(t),i=o.action;"magnet"===i?this.dragMagnet(t,e,n):("move"===i&&((i=o.targetView||this).dragNode(t,e,n),i.notify("node:moving",{e:t,x:e,y:n,view:i,cell:i.cell,node:i.cell})),this.notifyMouseMove(t,e,n)),this.setEventData(t,o)},bd.prototype.onMouseUp=function(t,e,n){var o=this.getEventData(t),i=o.action;"magnet"===i?this.stopMagnetDragging(t,e,n):(this.notifyMouseUp(t,e,n),"move"===i&&(o.targetView||this).stopNodeDragging(t,e,n));o=o.targetMagnet;o&&this.onMagnetClick(t,o,e,n),this.checkMouseleave(t)},bd.prototype.onMouseOver=function(t){Cd.prototype.onMouseOver.call(this,t),this.notify("node:mouseover",this.getEventArgs(t))},bd.prototype.onMouseOut=function(t){Cd.prototype.onMouseOut.call(this,t),this.notify("node:mouseout",this.getEventArgs(t))},bd.prototype.onMouseEnter=function(t){Cd.prototype.onMouseEnter.call(this,t),this.notify("node:mouseenter",this.getEventArgs(t))},bd.prototype.onMouseLeave=function(t){Cd.prototype.onMouseLeave.call(this,t),this.notify("node:mouseleave",this.getEventArgs(t))},bd.prototype.onMouseWheel=function(t,e,n,o){Cd.prototype.onMouseWheel.call(this,t,e,n,o),this.notify("node:mousewheel",ia({delta:o},this.getEventArgs(t,e,n)))},bd.prototype.onMagnetClick=function(t,e,n,o){this.graph.view.getMouseMovedCount(t)>this.graph.options.clickThreshold||this.notify("node:magnet:click",ia({magnet:e},this.getEventArgs(t,n,o)))},bd.prototype.onMagnetDblClick=function(t,e,n,o){this.notify("node:magnet:dblclick",ia({magnet:e},this.getEventArgs(t,n,o)))},bd.prototype.onMagnetContextMenu=function(t,e,n,o){this.notify("node:magnet:contextmenu",ia({magnet:e},this.getEventArgs(t,n,o)))},bd.prototype.onMagnetMouseDown=function(t,e,n,o){this.startMagnetDragging(t,n,o)},bd.prototype.onCustomEvent=function(t,e,n,o){this.notify("node:customevent",ia({name:e},this.getEventArgs(t,n,o))),Cd.prototype.onCustomEvent.call(this,t,e,n,o)},bd.prototype.prepareEmbedding=function(t){var e=this.getEventData(t).cell||this.cell,n=this.graph.findViewByCell(e),o=this.graph.snapToGrid(t.clientX,t.clientY);this.notify("node:embed",{e:t,node:e,view:n,cell:e,x:o.x,y:o.y,currentParent:e.getParent()})},bd.prototype.processEmbedding=function(t,e){var n=this,o=e.cell||this.cell,i=e.graph||this.graph,r=i.options.embedding,s=r.findParent,a="function"==typeof s?Gr(s,i,{view:this,node:this.cell}).filter(function(t){return t instanceof U.Cell&&n.cell.id!==t.id&&!t.isDescendantOf(n.cell)}):i.model.getNodesUnderNode(o,{by:s});r.frontOnly&&(a=a.slice(-1));for(var l=null,c=e.candidateEmbedView,h=r.validate,u=a.length-1;0<=u;--u){var p=a[u];if(c&&c.cell.id===p.id){l=c;break}p=p.findView(i);if(Gr(h,i,{child:this.cell,parent:p.cell,childView:this,parentView:p})){l=p;break}}this.clearEmbedding(e),l&&l.highlight(null,{type:"embedding"}),e.candidateEmbedView=l;e=i.snapToGrid(t.clientX,t.clientY);this.notify("node:embedding",{e:t,cell:o,node:o,view:i.findViewByCell(o),x:e.x,y:e.y,currentParent:o.getParent(),candidateParent:l?l.cell:null})},bd.prototype.clearEmbedding=function(t){var e=t.candidateEmbedView;e&&(e.unhighlight(null,{type:"embedding"}),t.candidateEmbedView=null)},bd.prototype.finalizeEmbedding=function(t,e){var n=e.cell||this.cell,o=e.graph||this.graph,i=n.getParent(),r=e.candidateEmbedView;r?(r.unhighlight(null,{type:"embedding"}),(e.candidateEmbedView=null)!=i&&i.id===r.cell.id||r.cell.insertChild(n,void 0,{ui:!0})):i&&i.unembed(n,{ui:!0}),o.model.getConnectedEdges(n,{deep:!0}).forEach(function(t){t.updateParent({ui:!0})});r=o.snapToGrid(t.clientX,t.clientY);this.notify("node:embedded",{e:t,cell:n,x:r.x,y:r.y,node:n,view:o.findViewByCell(n),previousParent:i,currentParent:n.getParent()})},bd.prototype.getDelegatedView=function(){for(var t=this.cell,e=this;e&&!t.isEdge();){if(!t.hasParent()||e.can("stopDelegateOnDragging"))return e;t=t.getParent(),e=this.graph.renderer.findViewByCell(t)}return null},bd.prototype.startMagnetDragging=function(t,e,n){var o,i;this.can("magnetConnectable")&&(t.stopPropagation(),o=t.currentTarget,i=this.graph,this.setEventData(t,{targetMagnet:o}),i.hook.validateMagnet(this,o,t)?(i.options.magnetThreshold<=0&&this.startConnectting(t,o,e,n),this.setEventData(t,{action:"magnet"}),this.stopPropagation(t)):this.onMouseDown(t,e,n),i.view.delegateDragEvents(t,this))},bd.prototype.startConnectting=function(t,e,n,o){this.graph.model.startBatch("add-edge");e=this.createEdgeFromMagnet(e,n,o);e.notifyMouseDown(t,n,o),e.setEventData(t,e.prepareArrowheadDragging("target",{x:n,y:o,isNewEdge:!0,fallbackAction:"remove"})),this.setEventData(t,{edgeView:e})},bd.prototype.createEdgeFromMagnet=function(t,e,n){var o=this.graph,i=o.model,r=o.hook.getDefaultEdge(this,t);return r.setSource(ia(ia({},r.getSource()),this.getEdgeTerminal(t,e,n,r,"source"))),r.setTarget(ia(ia({},r.getTarget()),{x:e,y:n})),r.addTo(i,{async:!1,ui:!0}),r.findView(o)},bd.prototype.dragMagnet=function(t,e,n){var o=this.getEventData(t),i=o.edgeView;if(i)i.onMouseMove(t,e,n);else{var r=this.graph,s=r.options.magnetThreshold,i=this.getEventTarget(t),o=o.targetMagnet;if("onleave"===s){if(o===i||o.contains(i))return}else if(r.view.getMouseMovedCount(t)<=s)return;this.startConnectting(t,o,e,n)}},bd.prototype.stopMagnetDragging=function(t,e,n){var o=this.eventData(t).edgeView;o&&(o.onMouseUp(t,e,n),this.graph.model.stopBatch("add-edge"))},bd.prototype.notifyUnhandledMouseDown=function(t,e,n){this.notify("node:unhandled:mousedown",{e:t,x:e,y:n,view:this,cell:this.cell,node:this.cell})},bd.prototype.notifyNodeMove=function(e,n,o,i,r){var t,s=this,a=[r];this.graph.selection.widget&&(t=this.graph.getSelectedCells(),a.push.apply(a,t.filter(function(t){return t.id!==r.id}))),a.forEach(function(t){s.notify(e,{e:n,x:o,y:i,cell:t,node:t,view:t.findView(s.graph)})})},bd.prototype.startNodeDragging=function(t,e,n){var o=this.getDelegatedView();if(null==o||!o.can("nodeMovable"))return this.notifyUnhandledMouseDown(t,e,n);this.setEventData(t,{targetView:o,action:"move"});var i=U.Point.create(o.cell.getPosition());o.setEventData(t,{moving:!1,offset:i.diff(e,n),restrict:this.graph.hook.getRestrictArea(o)})},bd.prototype.dragNode=function(t,e,n){var o=this.cell,i=this.graph,r=i.getGridSize(),s=this.getEventData(t),a=s.offset,l=s.restrict;s.moving||(s.moving=!0,(c=this.getEventData(t).targetView).addClass("node-moving"),this.notifyNodeMove("node:move",t,e,n,c.cell));var c=this.graph.scroller.widget;c&&c.autoScroll(t.clientX,t.clientY);e=U.Util.snapToGrid(e+a.x,r),r=U.Util.snapToGrid(n+a.y,r);o.setPosition(e,r,{restrict:l,deep:!0,ui:!0}),i.options.embedding.enabled&&(s.embedding||(this.prepareEmbedding(t),s.embedding=!0),this.processEmbedding(t,s))},bd.prototype.stopNodeDragging=function(t,e,n){var o,i=this.getEventData(t);i.embedding&&this.finalizeEmbedding(t,i),i.moving&&((o=this.getEventData(t).targetView).removeClass("node-moving"),this.notifyNodeMove("node:moved",t,e,n,o.cell)),i.moving=!1,i.embedding=!1},bd);function bd(){var t=null!==Cd&&Cd.apply(this,arguments)||this;return t.scalableNode=null,t.rotatableNode=null,t.scalableSelector="scalable",t.rotatableSelector="rotatable",t.defaultPortMarkup=U.Markup.getPortMarkup(),t.defaultPortLabelMarkup=U.Markup.getPortLabelMarkup(),t.defaultPortContainerMarkup=U.Markup.getPortContainerMarkup(),t.portsCache={},t}vd.config({isSvgElement:!0,priority:0,bootstrap:["render"],actions:{view:["render"],markup:["render"],attrs:["update"],size:["resize","ports","tools"],angle:["rotate","tools"],position:["translate","tools"],ports:["ports"],tools:["tools"]}}),vd.registry.register("node",vd,!0);var xd,wd=(oa(Ed,xd=U.Node),Object.defineProperty(Ed.prototype,"label",{get:function(){return this.getLabel()},set:function(t){this.setLabel(t)},enumerable:!1,configurable:!0}),Ed.prototype.getLabel=function(){return this.getAttrByPath("text/text")},Ed.prototype.setLabel=function(t,e){return null==t?this.removeLabel():this.setAttrByPath("text/text",t,e),this},Ed.prototype.removeLabel=function(){return this.removeAttrByPath("text/text"),this},Ed);function Ed(){return null!==xd&&xd.apply(this,arguments)||this}(wd||(wd={})).config({attrs:{text:{fontSize:14,fill:"#000000",refX:.5,refY:.5,textAnchor:"middle",textVerticalAnchor:"middle",fontFamily:"Arial, helvetica, sans-serif"}},propHooks:function(t){var e=t.label,t=ra(t,["label"]);return e&&Fr(t,"attrs/text/text",e),t}});var Ad,Pd,Dd=(oa(Md,Ad=wd),Object.defineProperty(Md.prototype,"html",{get:function(){return this.getHTML()},set:function(t){this.setHTML(t)},enumerable:!1,configurable:!0}),Md.prototype.getHTML=function(){return this.store.get("html")},Md.prototype.setHTML=function(t,e){return void 0===e&&(e={}),null==t?this.removeHTML(e):this.store.set("html",t,e),this},Md.prototype.removeHTML=function(t){return void 0===t&&(t={}),this.store.remove("html",t)},Md);function Md(){return null!==Ad&&Ad.apply(this,arguments)||this}function Sd(){return null!==Pd&&Pd.apply(this,arguments)||this}an=Dd=Dd||{},oa(Sd,Pd=vd),Sd.prototype.init=function(){var t=this;Pd.prototype.init.call(this),this.cell.on("change:*",function(){t.graph.hook.shouldUpdateHTMLComponent(t.cell)&&t.renderHTMLComponent()})},Sd.prototype.confirmUpdate=function(t){var e=this,t=Pd.prototype.confirmUpdate.call(this,t);return this.handleAction(t,Sd.action,function(){return e.renderHTMLComponent()})},Sd.prototype.renderHTMLComponent=function(){var t,e=this.selectors.foContent;e&&(t=this.$(e).empty(),(e=this.graph.hook.getHTMLComponent(this.cell))&&("string"==typeof e?t.html(e):t.append(e)))},ch=Sd,an.View=ch,(ch=ch=an.View||(an.View={})).action="html",ch.config({bootstrap:[ch.action],actions:{html:ch.action}}),vd.registry.register("html-view",ch),(nn=Dd=Dd||{}).config({view:"html-view",markup:[{tagName:"rect",selector:"body"},ia({},U.Markup.getForeignObjectMarkup()),{tagName:"text",selector:"label"}],attrs:{body:{fill:"none",stroke:"none",refWidth:"100%",refHeight:"100%"},fo:{refWidth:"100%",refHeight:"100%"}}}),U.Node.registry.register("html",nn),(Dd=Dd||{}).componentRegistry=Kc.create({type:"html componnet"});var kd,Fd,yn=(oa(Nd,Fd=U.Disposable),Object.defineProperty(Nd.prototype,"options",{get:function(){return this.graph.options},enumerable:!1,configurable:!0}),Object.defineProperty(Nd.prototype,"model",{get:function(){return this.graph.model},enumerable:!1,configurable:!0}),Object.defineProperty(Nd.prototype,"view",{get:function(){return this.graph.view},enumerable:!1,configurable:!0}),Nd.prototype.init=function(){},Nd),Td=(oa(Ld,kd=U.View),Object.defineProperty(Ld.prototype,"model",{get:function(){return this.graph.model},enumerable:!1,configurable:!0}),Object.defineProperty(Ld.prototype,"options",{get:function(){return this.graph.options},enumerable:!1,configurable:!0}),Ld.prototype.delegateEvents=function(){var t=this.constructor;return kd.prototype.delegateEvents.call(this,t.events),this},Ld.prototype.guard=function(t,e){return"mousedown"===t.type&&2===t.button||!(!this.options.guard||!this.options.guard(t,e))||(t.data&&void 0!==t.data.guarded?t.data.guarded:!(e&&e.cell&&e.cell instanceof U.Cell||this.svg===t.target||this.container===t.target||C.contains(this.svg,t.target)))},Ld.prototype.findView=function(t){return this.graph.renderer.findViewByElem(t)},Ld.prototype.onDblClick=function(t){t.preventDefault();var e=this.normalizeEvent(t),n=this.findView(e.target);this.guard(e,n)||(t=this.graph.snapToGrid(e.clientX,e.clientY),n?n.onDblClick(e,t.x,t.y):this.graph.trigger("blank:dblclick",{e:e,x:t.x,y:t.y}))},Ld.prototype.onClick=function(t){var e,n;this.getMouseMovedCount(t)<=this.options.clickThreshold&&(e=this.normalizeEvent(t),n=this.findView(e.target),this.guard(e,n)||(t=this.graph.snapToGrid(e.clientX,e.clientY),n?n.onClick(e,t.x,t.y):this.graph.trigger("blank:click",{e:e,x:t.x,y:t.y})))},Ld.prototype.onContextMenu=function(t){this.options.preventDefaultContextMenu&&t.preventDefault();var e=this.normalizeEvent(t),n=this.findView(e.target);this.guard(e,n)||(t=this.graph.snapToGrid(e.clientX,e.clientY),n?n.onContextMenu(e,t.x,t.y):this.graph.trigger("blank:contextmenu",{e:e,x:t.x,y:t.y}))},Ld.prototype.delegateDragEvents=function(t,e){null==t.data&&(t.data={}),this.setEventData(t,{currentView:e||null,mouseMovedCount:0});e=this.constructor;this.delegateDocumentEvents(e.documentEvents,t.data),this.undelegateEvents()},Ld.prototype.getMouseMovedCount=function(t){return this.getEventData(t).mouseMovedCount||0},Ld.prototype.onMouseDown=function(t){var e=this.normalizeEvent(t),n=this.findView(e.target);this.guard(e,n)||(t=this.graph.snapToGrid(e.clientX,e.clientY),n?(e.preventDefault(),n.onMouseDown(e,t.x,t.y)):(this.options.preventDefaultBlankAction&&e.preventDefault(),this.graph.trigger("blank:mousedown",{e:e,x:t.x,y:t.y})),this.delegateDragEvents(e,n))},Ld.prototype.onMouseMove=function(t){var e,n,o=this.getEventData(t);null==o.mouseMovedCount&&(o.mouseMovedCount=0),o.mouseMovedCount+=1,o.mouseMovedCount<=this.options.moveThreshold||(e=this.normalizeEvent(t),n=this.graph.snapToGrid(e.clientX,e.clientY),(t=o.currentView)?t.onMouseMove(e,n.x,n.y):this.graph.trigger("blank:mousemove",{e:e,x:n.x,y:n.y}),this.setEventData(e,o))},Ld.prototype.onMouseUp=function(t){this.undelegateDocumentEvents();var e=this.normalizeEvent(t),n=this.graph.snapToGrid(e.clientX,e.clientY),o=this.getEventData(t).currentView;o?o.onMouseUp(e,n.x,n.y):this.graph.trigger("blank:mouseup",{e:e,x:n.x,y:n.y}),t.isPropagationStopped()||this.onClick(C.Event(t,{type:"click",data:t.data})),t.stopImmediatePropagation(),this.delegateEvents()},Ld.prototype.onMouseOver=function(t){var e=this.normalizeEvent(t),t=this.findView(e.target);this.guard(e,t)||(t?t.onMouseOver(e):this.container!==e.target&&this.graph.trigger("blank:mouseover",{e:e}))},Ld.prototype.onMouseOut=function(t){var e=this.normalizeEvent(t),t=this.findView(e.target);this.guard(e,t)||(t?t.onMouseOut(e):this.container!==e.target&&this.graph.trigger("blank:mouseout",{e:e}))},Ld.prototype.onMouseEnter=function(t){var e=this.normalizeEvent(t),n=this.findView(e.target);this.guard(e,n)||(t=this.graph.renderer.findViewByElem(e.relatedTarget),n?t!==n&&n.onMouseEnter(e):t||this.graph.trigger("graph:mouseenter",{e:e}))},Ld.prototype.onMouseLeave=function(t){var e=this.normalizeEvent(t),n=this.findView(e.target);this.guard(e,n)||(t=this.graph.renderer.findViewByElem(e.relatedTarget),n?t!==n&&n.onMouseLeave(e):t||this.graph.trigger("graph:mouseleave",{e:e}))},Ld.prototype.onMouseWheel=function(t){var e,n=this.normalizeEvent(t),o=this.findView(n.target);this.guard(n,o)||(e=n.originalEvent,t=this.graph.snapToGrid(e.clientX,e.clientY),e=Math.max(-1,Math.min(1,e.wheelDelta||-e.detail)),o?o.onMouseWheel(n,t.x,t.y,e):this.graph.trigger("blank:mousewheel",{e:n,delta:e,x:t.x,y:t.y}))},Ld.prototype.onCustomEvent=function(t){var e,n=t.currentTarget,o=n.getAttribute("event")||n.getAttribute("data-event");!o||(e=this.findView(n))&&(n=this.normalizeEvent(t),this.guard(n,e)||(t=this.graph.snapToGrid(n.clientX,n.clientY),e.onCustomEvent(n,o,t.x,t.y)))},Ld.prototype.handleMagnetEvent=function(t,e){var n,o=t.currentTarget,i=o.getAttribute("magnet");!i||"false"===i.toLowerCase()||(n=this.findView(o))&&(i=this.normalizeEvent(t),this.guard(i,n)||(t=this.graph.snapToGrid(i.clientX,i.clientY),Gr(e,this.graph,n,i,o,t.x,t.y)))},Ld.prototype.onMagnetMouseDown=function(t){this.handleMagnetEvent(t,function(t,e,n,o,i){t.onMagnetMouseDown(e,n,o,i)})},Ld.prototype.onMagnetDblClick=function(t){this.handleMagnetEvent(t,function(t,e,n,o,i){t.onMagnetDblClick(e,n,o,i)})},Ld.prototype.onMagnetContextMenu=function(t){this.options.preventDefaultContextMenu&&t.preventDefault(),this.handleMagnetEvent(t,function(t,e,n,o,i){t.onMagnetContextMenu(e,n,o,i)})},Ld.prototype.onLabelMouseDown=function(t){var e=t.currentTarget,n=this.findView(e);n&&(e=this.normalizeEvent(t),this.guard(e,n)||(t=this.graph.snapToGrid(e.clientX,e.clientY),n.onLabelMouseDown(e,t.x,t.y)))},Ld.prototype.onImageDragStart=function(){return!1},Ld.prototype.dispose=function(){this.undelegateEvents(),this.undelegateDocumentEvents(),this.restore(),this.restore=function(){}},sa([U.View.dispose()],Ld.prototype,"dispose",null),Ld);function Ld(t){var e=kd.call(this)||this;e.graph=t;var n=U.Markup.parseJSONMarkup(Ld.markup),t=n.selectors,n=n.fragment;return e.background=t.background,e.grid=t.grid,e.svg=t.svg,e.defs=t.defs,e.viewport=t.viewport,e.primer=t.primer,e.stage=t.stage,e.decorator=t.decorator,e.overlay=t.overlay,e.container=e.options.container,e.restore=Ld.snapshoot(e.container),e.$(e.container).addClass(e.prefixClassName("graph")).append(n),e.delegateEvents(),e}function Nd(t){var e=Fd.call(this)||this;return e.graph=t,e.init(),e}rn=Td=Td||{},hn=Uc.prefixCls+"-graph",rn.markup=[{ns:ss.xhtml,tagName:"div",selector:"background",className:hn+"-background"},{ns:ss.xhtml,tagName:"div",selector:"grid",className:hn+"-grid"},{ns:ss.svg,tagName:"svg",selector:"svg",className:hn+"-svg",attrs:{width:"100%",height:"100%","xmlns:xlink":ss.xlink},children:[{tagName:"defs",selector:"defs"},{tagName:"g",selector:"viewport",className:hn+"-svg-viewport",children:[{tagName:"g",selector:"primer",className:hn+"-svg-primer"},{tagName:"g",selector:"stage",className:hn+"-svg-stage"},{tagName:"g",selector:"decorator",className:hn+"-svg-decorator"},{tagName:"g",selector:"overlay",className:hn+"-svg-overlay"}]}]}],rn.snapshoot=function(o){var i=o.cloneNode();return o.childNodes.forEach(function(t){return i.appendChild(t)}),function(){for(bs(o);0<o.attributes.length;)o.removeAttribute(o.attributes[0].name);for(var t=0,e=i.attributes.length;t<e;t+=1){var n=i.attributes[t];o.setAttribute(n.name,n.value)}i.childNodes.forEach(function(t){return o.appendChild(t)})}},mn=Td=Td||{},Ue=Uc.prefixCls,mn.events=((fn={dblclick:"onDblClick",contextmenu:"onContextMenu",touchstart:"onMouseDown",mousedown:"onMouseDown",mouseover:"onMouseOver",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",mousewheel:"onMouseWheel",DOMMouseScroll:"onMouseWheel"})["mouseenter  ."+Ue+"-cell"]="onMouseEnter",fn["mouseleave  ."+Ue+"-cell"]="onMouseLeave",fn["mouseenter  ."+Ue+"-cell-tools"]="onMouseEnter",fn["mouseleave  ."+Ue+"-cell-tools"]="onMouseLeave",fn["mousedown   ."+Ue+"-cell [event]"]="onCustomEvent",fn["touchstart  ."+Ue+"-cell [event]"]="onCustomEvent",fn["mousedown   ."+Ue+"-cell [data-event]"]="onCustomEvent",fn["touchstart  ."+Ue+"-cell [data-event]"]="onCustomEvent",fn["dblclick    ."+Ue+"-cell [magnet]"]="onMagnetDblClick",fn["contextmenu ."+Ue+"-cell [magnet]"]="onMagnetContextMenu",fn["mousedown   ."+Ue+"-cell [magnet]"]="onMagnetMouseDown",fn["touchstart  ."+Ue+"-cell [magnet]"]="onMagnetMouseDown",fn["dblclick    ."+Ue+"-cell [data-magnet]"]="onMagnetDblClick",fn["contextmenu ."+Ue+"-cell [data-magnet]"]="onMagnetContextMenu",fn["mousedown   ."+Ue+"-cell [data-magnet]"]="onMagnetMouseDown",fn["touchstart  ."+Ue+"-cell [data-magnet]"]="onMagnetMouseDown",fn["dragstart   ."+Ue+"-cell image"]="onImageDragStart",fn["mousedown   ."+Ue+"-edge .label"]="onLabelMouseDown",fn["touchstart  ."+Ue+"-edge .label"]="onLabelMouseDown",fn),mn.documentEvents={mousemove:"onMouseMove",touchmove:"onMouseMove",mouseup:"onMouseUp",touchend:"onMouseUp",touchcancel:"onMouseUp"},(Qf||(Qf={})).checkScroller=function(r,s){return function(t,o,e){var i=e.value;e.value=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(null!=this.scroller.widget)return i.call.apply(i,aa([this],t));var n="Shoule enable scroller to use method '"+o+"'";if(!1!==r)throw console.error(n),new Error(n);return!1!==s&&console.warn(n),this}}};var Od,Bd,zd,Vd=(oa(jd,Bd=yn),jd.prototype.init=function(){Uc.autoInsertCSS&&jd.ensure()},jd.prototype.dispose=function(){jd.clean()},sa([jd.dispose()],jd.prototype,"dispose",null),jd);function jd(){return null!==Bd&&Bd.apply(this,arguments)||this}(cn=Vd=Vd||{}).ensure=function(){var t;null!=zd||U.Platform.isApplyingHMR()||((zd=document.createElement("style")).setAttribute("type","text/css"),zd.textContent=".x6-graph {\n  position: relative;\n  outline: none;\n}\n.x6-graph-background,\n.x6-graph-grid,\n.x6-graph-svg {\n  position: absolute;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  left: 0;\n}\n.x6-graph-background-stage,\n.x6-graph-grid-stage,\n.x6-graph-svg-stage {\n  user-select: none;\n}\n.x6-graph.x6-graph-pannable {\n  cursor: grab;\n  cursor: -moz-grab;\n  cursor: -webkit-grab;\n}\n.x6-graph.x6-graph-panning {\n  cursor: grabbing;\n  cursor: -moz-grabbing;\n  cursor: -webkit-grabbing;\n  user-select: none;\n}\n.x6-node {\n  cursor: move;\n  /* stylelint-disable-next-line */\n}\n.x6-node * {\n  -webkit-user-drag: none;\n}\n.x6-node .scalable * {\n  vector-effect: non-scaling-stroke;\n}\n.x6-node [magnet='true'] {\n  cursor: crosshair;\n  transition: opacity 0.3s;\n}\n.x6-node [magnet='true']:hover {\n  opacity: 0.7;\n}\n.x6-node foreignobject {\n  display: block;\n  overflow: visible;\n  background-color: transparent;\n}\n.x6-node foreignobject > body {\n  position: static;\n  width: 100%;\n  height: 100%;\n  margin: 0;\n  padding: 0;\n  overflow: visible;\n  background-color: transparent;\n}\n.x6-edge .source-marker,\n.x6-edge .target-marker {\n  vector-effect: non-scaling-stroke;\n}\n.x6-edge .connection {\n  stroke-linejoin: round;\n  fill: none;\n}\n.x6-edge .connection-wrap {\n  cursor: move;\n  opacity: 0;\n  fill: none;\n  stroke: #000;\n  stroke-width: 15;\n  stroke-linecap: round;\n  stroke-linejoin: round;\n}\n.x6-edge .connection-wrap:hover {\n  opacity: 0.4;\n  stroke-opacity: 0.4;\n}\n.x6-edge .vertices {\n  cursor: move;\n  opacity: 0;\n}\n.x6-edge .vertices .vertex {\n  fill: #1abc9c;\n}\n.x6-edge .vertices .vertex :hover {\n  fill: #34495e;\n  stroke: none;\n}\n.x6-edge .vertices .vertex-remove {\n  cursor: pointer;\n  fill: #fff;\n}\n.x6-edge .vertices .vertex-remove-area {\n  cursor: pointer;\n  opacity: 0.1;\n}\n.x6-edge .vertices .vertex-group:hover .vertex-remove-area {\n  opacity: 1;\n}\n.x6-edge .arrowheads {\n  cursor: move;\n  opacity: 0;\n}\n.x6-edge .arrowheads .arrowhead {\n  fill: #1abc9c;\n}\n.x6-edge .arrowheads .arrowhead :hover {\n  fill: #f39c12;\n  stroke: none;\n}\n.x6-edge .tools {\n  cursor: pointer;\n  opacity: 0;\n}\n.x6-edge .tools .tool-options {\n  display: none;\n}\n.x6-edge .tools .tool-remove circle {\n  fill: #f00;\n}\n.x6-edge .tools .tool-remove path {\n  fill: #fff;\n}\n.x6-edge:hover .vertices,\n.x6-edge:hover .arrowheads,\n.x6-edge:hover .tools {\n  opacity: 1;\n}\n.x6-highlight-opacity {\n  opacity: 0.3;\n}\n@keyframes halo-pie-visibility {\n  0% {\n    visibility: hidden;\n  }\n  100% {\n    visibility: visible;\n  }\n}\n@keyframes halo-pie-opening {\n  0% {\n    transform: scale(0.4) rotate(-20deg);\n  }\n  100% {\n    transform: scale(1) rotate(0);\n  }\n}\n.x6-widget-handle {\n  position: absolute;\n  width: 20px;\n  height: 20px;\n  background-color: transparent;\n  background-repeat: no-repeat;\n  background-position: 0 0;\n  background-size: 20px 20px;\n  cursor: pointer;\n  user-select: none;\n  pointer-events: auto;\n  -webkit-user-drag: none;\n  user-drag: none;\n  /* stylelint-disable-line */\n}\n.x6-widget-handle.hidden {\n  display: none;\n}\n.x6-widget-handle-selected {\n  background-color: rgba(0, 0, 0, 0.1);\n  border-radius: 3px;\n}\n.x6-widget-handle-remove {\n  background-image: url('data:image/svg+xml;charset=utf8,%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22utf-8%22%3F%3E%3C!DOCTYPE%20svg%20PUBLIC%20%22-%2F%2FW3C%2F%2FDTD%20SVG%201.1%2F%2FEN%22%20%22http%3A%2F%2Fwww.w3.org%2FGraphics%2FSVG%2F1.1%2FDTD%2Fsvg11.dtd%22%3E%3Csvg%20version%3D%221.1%22%20id%3D%22Layer_1%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%20x%3D%220px%22%20y%3D%220px%22%20width%3D%2218.75px%22%20height%3D%2218.75px%22%20viewBox%3D%220%200%2018.75%2018.75%22%20enable-background%3D%22new%200%200%2018.75%2018.75%22%20xml%3Aspace%3D%22preserve%22%3E%3Cg%3E%3Cpath%20fill%3D%22%236A6C8A%22%20d%3D%22M15.386%2C3.365c-3.315-3.314-8.707-3.313-12.021%2C0c-3.314%2C3.315-3.314%2C8.706%2C0%2C12.02%20c3.314%2C3.314%2C8.707%2C3.314%2C12.021%2C0S18.699%2C6.68%2C15.386%2C3.365L15.386%2C3.365z%20M4.152%2C14.598C1.273%2C11.719%2C1.273%2C7.035%2C4.153%2C4.154%20c2.88-2.88%2C7.563-2.88%2C10.443%2C0c2.881%2C2.88%2C2.881%2C7.562%2C0%2C10.443C11.716%2C17.477%2C7.032%2C17.477%2C4.152%2C14.598L4.152%2C14.598z%22%2F%3E%3Cpath%20fill%3D%22%236A6C8A%22%20d%3D%22M12.157%2C11.371L7.38%2C6.593C7.162%2C6.375%2C6.809%2C6.375%2C6.592%2C6.592c-0.218%2C0.219-0.218%2C0.572%2C0%2C0.79%20l4.776%2C4.776c0.218%2C0.219%2C0.571%2C0.219%2C0.79%2C0C12.375%2C11.941%2C12.375%2C11.588%2C12.157%2C11.371L12.157%2C11.371z%22%2F%3E%3Cpath%20fill%3D%22%236A6C8A%22%20d%3D%22M11.369%2C6.593l-4.777%2C4.778c-0.217%2C0.217-0.217%2C0.568%2C0%2C0.787c0.219%2C0.219%2C0.571%2C0.217%2C0.788%2C0l4.777-4.777%20c0.218-0.218%2C0.218-0.571%2C0.001-0.789C11.939%2C6.375%2C11.587%2C6.375%2C11.369%2C6.593L11.369%2C6.593z%22%2F%3E%3C%2Fg%3E%3C%2Fsvg%3E%20');\n  cursor: pointer;\n}\n.x6-widget-handle-remove:hover {\n  background-image: url('data:image/svg+xml;charset=utf8,%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22utf-8%22%3F%3E%3C!DOCTYPE%20svg%20PUBLIC%20%22-%2F%2FW3C%2F%2FDTD%20SVG%201.1%2F%2FEN%22%20%22http%3A%2F%2Fwww.w3.org%2FGraphics%2FSVG%2F1.1%2FDTD%2Fsvg11.dtd%22%3E%3Csvg%20version%3D%221.1%22%20id%3D%22Layer_1%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%20x%3D%220px%22%20y%3D%220px%22%20width%3D%2218.75px%22%20height%3D%2218.75px%22%20viewBox%3D%220%200%2018.75%2018.75%22%20enable-background%3D%22new%200%200%2018.75%2018.75%22%20xml%3Aspace%3D%22preserve%22%3E%3Cg%3E%3Cpath%20fill%3D%22%236A6C8A%22%20d%3D%22M15.386%2C3.365c-3.315-3.314-8.707-3.313-12.021%2C0c-3.314%2C3.315-3.314%2C8.706%2C0%2C12.02%20c3.314%2C3.314%2C8.707%2C3.314%2C12.021%2C0S18.699%2C6.68%2C15.386%2C3.365L15.386%2C3.365z%22%2F%3E%3Cpath%20fill%3D%22%23FFFFFF%22%20d%3D%22M12.157%2C11.371L7.38%2C6.593C7.162%2C6.375%2C6.809%2C6.375%2C6.592%2C6.592c-0.218%2C0.219-0.218%2C0.572%2C0%2C0.79%20l4.776%2C4.776c0.218%2C0.219%2C0.571%2C0.219%2C0.79%2C0C12.375%2C11.941%2C12.375%2C11.588%2C12.157%2C11.371L12.157%2C11.371z%22%2F%3E%3Cpath%20fill%3D%22%23FFFFFF%22%20d%3D%22M11.369%2C6.593l-4.777%2C4.778c-0.217%2C0.217-0.217%2C0.568%2C0%2C0.787c0.219%2C0.219%2C0.571%2C0.217%2C0.788%2C0l4.777-4.777%20c0.218-0.218%2C0.218-0.571%2C0.001-0.789C11.939%2C6.375%2C11.587%2C6.375%2C11.369%2C6.593L11.369%2C6.593z%22%2F%3E%3C%2Fg%3E%3C%2Fsvg%3E%20');\n}\n.x6-widget-handle-rotate {\n  background-image: url('data:image/svg+xml;charset=utf8,%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22utf-8%22%3F%3E%3C!DOCTYPE%20svg%20PUBLIC%20%22-%2F%2FW3C%2F%2FDTD%20SVG%201.1%2F%2FEN%22%20%22http%3A%2F%2Fwww.w3.org%2FGraphics%2FSVG%2F1.1%2FDTD%2Fsvg11.dtd%22%3E%3Csvg%20version%3D%221.1%22%20id%3D%22Layer_1%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%20x%3D%220px%22%20y%3D%220px%22%20width%3D%2218.75px%22%20height%3D%2218.75px%22%20viewBox%3D%220%200%2018.75%2018.75%22%20enable-background%3D%22new%200%200%2018.75%2018.75%22%20xml%3Aspace%3D%22preserve%22%3E%3Cpath%20fill%3D%22%236A6C8A%22%20d%3D%22M9.374%2C17.592c-4.176%2C0-7.57-3.401-7.57-7.575c0-4.175%2C3.395-7.574%2C7.57-7.574c0.28%2C0%2C0.56%2C0.018%2C0.837%2C0.05%20V1.268c0-0.158%2C0.099-0.3%2C0.239-0.36c0.151-0.058%2C0.315-0.026%2C0.428%2C0.086l2.683%2C2.688c0.152%2C0.154%2C0.152%2C0.399%2C0%2C0.553l-2.68%2C2.693%20c-0.115%2C0.112-0.279%2C0.147-0.431%2C0.087c-0.141-0.063-0.239-0.205-0.239-0.361V5.296C9.934%2C5.243%2C9.654%2C5.22%2C9.374%2C5.22%20c-2.646%2C0-4.796%2C2.152-4.796%2C4.797s2.154%2C4.798%2C4.796%2C4.798c2.645%2C0%2C4.798-2.153%2C4.798-4.798c0-0.214%2C0.174-0.391%2C0.391-0.391h1.991%20c0.217%2C0%2C0.394%2C0.177%2C0.394%2C0.391C16.947%2C14.19%2C13.549%2C17.592%2C9.374%2C17.592L9.374%2C17.592z%20M9.374%2C17.592%22%2F%3E%3C%2Fsvg%3E%20');\n  cursor: move;\n}\n.x6-widget-handle-rotate:hover {\n  background-image: url('data:image/svg+xml;charset=utf8,%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22utf-8%22%3F%3E%3C!DOCTYPE%20svg%20PUBLIC%20%22-%2F%2FW3C%2F%2FDTD%20SVG%201.1%2F%2FEN%22%20%22http%3A%2F%2Fwww.w3.org%2FGraphics%2FSVG%2F1.1%2FDTD%2Fsvg11.dtd%22%3E%3Csvg%20version%3D%221.1%22%20id%3D%22Layer_1%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%20x%3D%220px%22%20y%3D%220px%22%20width%3D%2218.75px%22%20height%3D%2218.75px%22%20viewBox%3D%220%200%2018.75%2018.75%22%20enable-background%3D%22new%200%200%2018.75%2018.75%22%20xml%3Aspace%3D%22preserve%22%3E%3Cpath%20fill%3D%22%23FD6EB6%22%20d%3D%22M9.374%2C17.592c-4.176%2C0-7.57-3.401-7.57-7.575c0-4.175%2C3.395-7.574%2C7.57-7.574c0.28%2C0%2C0.56%2C0.018%2C0.837%2C0.05%20V1.268c0-0.158%2C0.099-0.3%2C0.239-0.36c0.151-0.058%2C0.315-0.026%2C0.428%2C0.086l2.683%2C2.688c0.152%2C0.154%2C0.152%2C0.399%2C0%2C0.553l-2.68%2C2.693%20c-0.115%2C0.112-0.279%2C0.147-0.431%2C0.087c-0.141-0.063-0.239-0.205-0.239-0.361V5.296C9.934%2C5.243%2C9.654%2C5.22%2C9.374%2C5.22%20c-2.646%2C0-4.796%2C2.152-4.796%2C4.797s2.154%2C4.798%2C4.796%2C4.798c2.645%2C0%2C4.798-2.153%2C4.798-4.798c0-0.214%2C0.174-0.391%2C0.391-0.391h1.991%20c0.217%2C0%2C0.394%2C0.177%2C0.394%2C0.391C16.947%2C14.19%2C13.549%2C17.592%2C9.374%2C17.592L9.374%2C17.592z%20M9.374%2C17.592%22%2F%3E%3C%2Fsvg%3E%20');\n}\n.x6-widget-handle-resize {\n  background-image: url('data:image/svg+xml;charset=utf8,%3C%3Fxml%20version%3D%221.0%22%20%3F%3E%3Csvg%20height%3D%2224px%22%20version%3D%221.1%22%20viewBox%3D%220%200%2024%2024%22%20width%3D%2224px%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Asketch%3D%22http%3A%2F%2Fwww.bohemiancoding.com%2Fsketch%2Fns%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%3E%3Ctitle%2F%3E%3Cdesc%2F%3E%3Cdefs%2F%3E%3Cg%20fill%3D%22none%22%20fill-rule%3D%22evenodd%22%20id%3D%22miu%22%20stroke%3D%22none%22%20stroke-width%3D%221%22%3E%3Cg%20id%3D%22Artboard-1%22%20transform%3D%22translate(-251.000000%2C%20-443.000000)%22%3E%3Cg%20id%3D%22slice%22%20transform%3D%22translate(215.000000%2C%20119.000000)%22%2F%3E%3Cpath%20d%3D%22M252%2C448%20L256%2C448%20L256%2C444%20L252%2C444%20L252%2C448%20Z%20M257%2C448%20L269%2C448%20L269%2C446%20L257%2C446%20L257%2C448%20Z%20M257%2C464%20L269%2C464%20L269%2C462%20L257%2C462%20L257%2C464%20Z%20M270%2C444%20L270%2C448%20L274%2C448%20L274%2C444%20L270%2C444%20Z%20M252%2C462%20L252%2C466%20L256%2C466%20L256%2C462%20L252%2C462%20Z%20M270%2C462%20L270%2C466%20L274%2C466%20L274%2C462%20L270%2C462%20Z%20M254%2C461%20L256%2C461%20L256%2C449%20L254%2C449%20L254%2C461%20Z%20M270%2C461%20L272%2C461%20L272%2C449%20L270%2C449%20L270%2C461%20Z%22%20fill%3D%22%236A6C8A%22%20id%3D%22editor-crop-glyph%22%2F%3E%3C%2Fg%3E%3C%2Fg%3E%3C%2Fsvg%3E');\n  cursor: se-resize;\n}\n.x6-widget-handle-resize:hover {\n  background-image: url('data:image/svg+xml;charset=utf8,%3C%3Fxml%20version%3D%221.0%22%20%3F%3E%3Csvg%20height%3D%2224px%22%20version%3D%221.1%22%20viewBox%3D%220%200%2024%2024%22%20width%3D%2224px%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Asketch%3D%22http%3A%2F%2Fwww.bohemiancoding.com%2Fsketch%2Fns%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%3E%3Ctitle%2F%3E%3Cdesc%2F%3E%3Cdefs%2F%3E%3Cg%20fill%3D%22none%22%20fill-rule%3D%22evenodd%22%20id%3D%22miu%22%20stroke%3D%22none%22%20stroke-width%3D%221%22%3E%3Cg%20id%3D%22Artboard-1%22%20transform%3D%22translate(-251.000000%2C%20-443.000000)%22%3E%3Cg%20id%3D%22slice%22%20transform%3D%22translate(215.000000%2C%20119.000000)%22%2F%3E%3Cpath%20d%3D%22M252%2C448%20L256%2C448%20L256%2C444%20L252%2C444%20L252%2C448%20Z%20M257%2C448%20L269%2C448%20L269%2C446%20L257%2C446%20L257%2C448%20Z%20M257%2C464%20L269%2C464%20L269%2C462%20L257%2C462%20L257%2C464%20Z%20M270%2C444%20L270%2C448%20L274%2C448%20L274%2C444%20L270%2C444%20Z%20M252%2C462%20L252%2C466%20L256%2C466%20L256%2C462%20L252%2C462%20Z%20M270%2C462%20L270%2C466%20L274%2C466%20L274%2C462%20L270%2C462%20Z%20M254%2C461%20L256%2C461%20L256%2C449%20L254%2C449%20L254%2C461%20Z%20M270%2C461%20L272%2C461%20L272%2C449%20L270%2C449%20L270%2C461%20Z%22%20fill%3D%22%23FD6EB6%22%20id%3D%22editor-crop-glyph%22%2F%3E%3C%2Fg%3E%3C%2Fg%3E%3C%2Fsvg%3E');\n}\n.x6-widget-handle-clone {\n  background-image: url('data:image/svg+xml;charset=utf8,%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22utf-8%22%3F%3E%3C!DOCTYPE%20svg%20PUBLIC%20%22-%2F%2FW3C%2F%2FDTD%20SVG%201.1%2F%2FEN%22%20%22http%3A%2F%2Fwww.w3.org%2FGraphics%2FSVG%2F1.1%2FDTD%2Fsvg11.dtd%22%3E%3Csvg%20version%3D%221.1%22%20id%3D%22Layer_1%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%20x%3D%220px%22%20y%3D%220px%22%20width%3D%2218.75px%22%20height%3D%2218.75px%22%20viewBox%3D%220%200%2018.75%2018.75%22%20enable-background%3D%22new%200%200%2018.75%2018.75%22%20xml%3Aspace%3D%22preserve%22%3E%3Cg%3E%3Cpath%20fill%3D%22%236A6C8A%22%20d%3D%22M12.852%2C0.875h-9.27c-0.853%2C0-1.547%2C0.694-1.547%2C1.547v10.816h1.547V2.422h9.27V0.875z%20M15.172%2C3.965h-8.5%20c-0.849%2C0-1.547%2C0.698-1.547%2C1.547v10.816c0%2C0.849%2C0.698%2C1.547%2C1.547%2C1.547h8.5c0.85%2C0%2C1.543-0.698%2C1.543-1.547V5.512%20C16.715%2C4.663%2C16.021%2C3.965%2C15.172%2C3.965L15.172%2C3.965z%20M15.172%2C16.328h-8.5V5.512h8.5V16.328z%22%2F%3E%3C%2Fg%3E%3C%2Fsvg%3E%20');\n  cursor: move;\n}\n.x6-widget-handle-clone:hover {\n  background-image: url('data:image/svg+xml;charset=utf8,%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22utf-8%22%3F%3E%3C!DOCTYPE%20svg%20PUBLIC%20%22-%2F%2FW3C%2F%2FDTD%20SVG%201.1%2F%2FEN%22%20%22http%3A%2F%2Fwww.w3.org%2FGraphics%2FSVG%2F1.1%2FDTD%2Fsvg11.dtd%22%3E%3Csvg%20version%3D%221.1%22%20id%3D%22Layer_1%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%20x%3D%220px%22%20y%3D%220px%22%20width%3D%2218.75px%22%20height%3D%2218.75px%22%20viewBox%3D%220%200%2018.75%2018.75%22%20enable-background%3D%22new%200%200%2018.75%2018.75%22%20xml%3Aspace%3D%22preserve%22%3E%3Cg%3E%3Cpath%20fill%3D%22%23FD6EB6%22%20d%3D%22M12.852%2C0.875h-9.27c-0.853%2C0-1.547%2C0.694-1.547%2C1.547v10.816h1.547V2.422h9.27V0.875z%20M15.172%2C3.965h-8.5%20c-0.849%2C0-1.547%2C0.698-1.547%2C1.547v10.816c0%2C0.849%2C0.698%2C1.547%2C1.547%2C1.547h8.5c0.849%2C0%2C1.543-0.698%2C1.543-1.547V5.512%20C16.715%2C4.663%2C16.021%2C3.965%2C15.172%2C3.965L15.172%2C3.965z%20M15.172%2C16.328h-8.5V5.512h8.5V16.328z%20M15.172%2C16.328%22%2F%3E%3C%2Fg%3E%3C%2Fsvg%3E%20');\n}\n.x6-widget-handle-link {\n  background-image: url('data:image/svg+xml;charset=utf8,%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22utf-8%22%3F%3E%3C!DOCTYPE%20svg%20PUBLIC%20%22-%2F%2FW3C%2F%2FDTD%20SVG%201.1%2F%2FEN%22%20%22http%3A%2F%2Fwww.w3.org%2FGraphics%2FSVG%2F1.1%2FDTD%2Fsvg11.dtd%22%3E%3Csvg%20version%3D%221.1%22%20id%3D%22Layer_1%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%20x%3D%220px%22%20y%3D%220px%22%20width%3D%2218.75px%22%20height%3D%2218.75px%22%20viewBox%3D%220%200%2018.75%2018.75%22%20enable-background%3D%22new%200%200%2018.75%2018.75%22%20xml%3Aspace%3D%22preserve%22%3E%3Cpath%20fill%3D%22%236A6C8A%22%20d%3D%22M9.884%2C9.838c0.54-0.551%2C1.005-0.955%2C1.384-1.201c0.463-0.308%2C0.749-0.352%2C0.887-0.352h1.34v1.367%20c0%2C0.104%2C0.061%2C0.2%2C0.154%2C0.242s0.204%2C0.027%2C0.284-0.038l3.168-2.669c0.06-0.051%2C0.096-0.125%2C0.096-0.203S17.16%2C6.83%2C17.101%2C6.781%20l-3.168-2.677c-0.08-0.067-0.19-0.081-0.284-0.038c-0.094%2C0.045-0.154%2C0.139-0.154%2C0.242v1.414h-1.343%20c-1.24%2C0.014-2.215%2C0.67-2.927%2C1.242c-0.797%2C0.65-1.533%2C1.447-2.245%2C2.217c-0.361%2C0.391-0.7%2C0.759-1.044%2C1.1%20c-0.541%2C0.549-1.011%2C0.951-1.395%2C1.199c-0.354%2C0.231-0.678%2C0.357-0.921%2C0.357h-1.8c-0.146%2C0-0.266%2C0.12-0.266%2C0.265v2.029%20c0%2C0.148%2C0.12%2C0.268%2C0.266%2C0.268h1.8l0%2C0c1.255-0.014%2C2.239-0.667%2C2.958-1.24c0.82-0.661%2C1.572-1.475%2C2.297-2.256%20C9.225%2C10.524%2C9.555%2C10.169%2C9.884%2C9.838z%22%2F%3E%3C%2Fsvg%3E%20');\n  cursor: move;\n  cursor: -moz-grabbing;\n  cursor: -webkit-grabbing;\n}\n.x6-widget-handle-link:hover {\n  background-image: url('data:image/svg+xml;charset=utf8,%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22utf-8%22%3F%3E%3C!DOCTYPE%20svg%20PUBLIC%20%22-%2F%2FW3C%2F%2FDTD%20SVG%201.1%2F%2FEN%22%20%22http%3A%2F%2Fwww.w3.org%2FGraphics%2FSVG%2F1.1%2FDTD%2Fsvg11.dtd%22%3E%3Csvg%20version%3D%221.1%22%20id%3D%22Layer_1%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%20x%3D%220px%22%20y%3D%220px%22%20width%3D%2218.75px%22%20height%3D%2218.75px%22%20viewBox%3D%220%200%2018.75%2018.75%22%20enable-background%3D%22new%200%200%2018.75%2018.75%22%20xml%3Aspace%3D%22preserve%22%3E%3Cpath%20fill%3D%22%23FD6EB6%22%20d%3D%22M9.884%2C9.838c0.54-0.551%2C1.005-0.955%2C1.384-1.201c0.463-0.308%2C0.749-0.352%2C0.887-0.352h1.34v1.367%20c0%2C0.104%2C0.061%2C0.2%2C0.154%2C0.242s0.204%2C0.027%2C0.284-0.038l3.168-2.669c0.06-0.051%2C0.096-0.125%2C0.096-0.203S17.16%2C6.83%2C17.101%2C6.781%20l-3.168-2.677c-0.08-0.067-0.19-0.081-0.284-0.038c-0.094%2C0.045-0.154%2C0.139-0.154%2C0.242v1.414h-1.343%20c-1.24%2C0.014-2.215%2C0.67-2.927%2C1.242c-0.797%2C0.65-1.533%2C1.447-2.245%2C2.217c-0.361%2C0.391-0.7%2C0.759-1.044%2C1.1%20c-0.541%2C0.549-1.011%2C0.951-1.395%2C1.199c-0.354%2C0.231-0.678%2C0.357-0.921%2C0.357h-1.8c-0.146%2C0-0.266%2C0.12-0.266%2C0.265v2.029%20c0%2C0.148%2C0.12%2C0.268%2C0.266%2C0.268h1.8l0%2C0c1.255-0.014%2C2.239-0.667%2C2.958-1.24c0.82-0.661%2C1.572-1.475%2C2.297-2.256%20C9.225%2C10.524%2C9.555%2C10.169%2C9.884%2C9.838z%22%2F%3E%3C%2Fsvg%3E%20');\n}\n.x6-widget-handle-fork {\n  background-image: url('data:image/svg+xml;charset=utf8,%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22utf-8%22%3F%3E%3C!DOCTYPE%20svg%20PUBLIC%20%22-%2F%2FW3C%2F%2FDTD%20SVG%201.1%2F%2FEN%22%20%22http%3A%2F%2Fwww.w3.org%2FGraphics%2FSVG%2F1.1%2FDTD%2Fsvg11.dtd%22%3E%3Csvg%20version%3D%221.1%22%20id%3D%22Layer_1%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%20x%3D%220px%22%20y%3D%220px%22%20width%3D%2218.75px%22%20height%3D%2218.75px%22%20viewBox%3D%220%200%2018.75%2018.75%22%20enable-background%3D%22new%200%200%2018.75%2018.75%22%20xml%3Aspace%3D%22preserve%22%3E%3Cg%3E%3Cg%3E%3Cpath%20fill-rule%3D%22evenodd%22%20clip-rule%3D%22evenodd%22%20fill%3D%22%236A6C8A%22%20d%3D%22M13.307%2C11.593c-0.69%2C0-1.299%2C0.33-1.693%2C0.835l-4.136-2.387%20C7.552%2C9.82%2C7.602%2C9.589%2C7.602%2C9.344c0-0.25-0.051-0.487-0.129-0.71l4.097-2.364c0.393%2C0.536%2C1.022%2C0.888%2C1.737%2C0.888%20c1.193%2C0%2C2.16-0.967%2C2.16-2.159s-0.967-2.159-2.16-2.159c-1.191%2C0-2.158%2C0.967-2.158%2C2.159c0%2C0.076%2C0.014%2C0.149%2C0.021%2C0.223%20L6.848%2C7.716C6.469%2C7.39%2C5.982%2C7.185%2C5.442%2C7.185c-1.191%2C0-2.158%2C0.967-2.158%2C2.159s0.967%2C2.159%2C2.158%2C2.159%20c0.545%2C0%2C1.037-0.208%2C1.417-0.541l4.319%2C2.493c-0.014%2C0.098-0.029%2C0.194-0.029%2C0.296c0%2C1.193%2C0.967%2C2.159%2C2.158%2C2.159%20c1.193%2C0%2C2.16-0.966%2C2.16-2.159C15.467%2C12.559%2C14.5%2C11.593%2C13.307%2C11.593z%22%2F%3E%3C%2Fg%3E%3C%2Fg%3E%3C%2Fsvg%3E%20');\n  cursor: move;\n}\n.x6-widget-handle-fork:hover {\n  background-image: url('data:image/svg+xml;charset=utf8,%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22utf-8%22%3F%3E%3C!DOCTYPE%20svg%20PUBLIC%20%22-%2F%2FW3C%2F%2FDTD%20SVG%201.1%2F%2FEN%22%20%22http%3A%2F%2Fwww.w3.org%2FGraphics%2FSVG%2F1.1%2FDTD%2Fsvg11.dtd%22%3E%3Csvg%20version%3D%221.1%22%20id%3D%22Layer_1%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%20x%3D%220px%22%20y%3D%220px%22%20width%3D%2218.75px%22%20height%3D%2218.75px%22%20viewBox%3D%220%200%2018.75%2018.75%22%20enable-background%3D%22new%200%200%2018.75%2018.75%22%20xml%3Aspace%3D%22preserve%22%3E%3Cg%3E%3Cg%3E%3Cpath%20fill-rule%3D%22evenodd%22%20clip-rule%3D%22evenodd%22%20fill%3D%22%23FD6EB6%22%20d%3D%22M13.307%2C11.593c-0.69%2C0-1.299%2C0.33-1.693%2C0.835l-4.136-2.387%20c0.075-0.22%2C0.125-0.452%2C0.125-0.697c0-0.25-0.051-0.487-0.129-0.71l4.097-2.365c0.394%2C0.536%2C1.022%2C0.888%2C1.737%2C0.888%20c1.193%2C0%2C2.16-0.967%2C2.16-2.159s-0.967-2.159-2.16-2.159c-1.191%2C0-2.158%2C0.967-2.158%2C2.159c0%2C0.076%2C0.015%2C0.148%2C0.022%2C0.223%20L6.848%2C7.716C6.469%2C7.39%2C5.981%2C7.185%2C5.442%2C7.185c-1.191%2C0-2.158%2C0.967-2.158%2C2.159s0.967%2C2.159%2C2.158%2C2.159%20c0.545%2C0%2C1.037-0.208%2C1.417-0.541l4.319%2C2.493c-0.013%2C0.098-0.029%2C0.194-0.029%2C0.296c0%2C1.193%2C0.967%2C2.159%2C2.158%2C2.159%20c1.193%2C0%2C2.16-0.966%2C2.16-2.159C15.467%2C12.559%2C14.5%2C11.593%2C13.307%2C11.593z%22%2F%3E%3C%2Fg%3E%3C%2Fg%3E%3C%2Fsvg%3E%20');\n}\n.x6-widget-handle-unlink {\n  background-image: url('data:image/svg+xml;charset=utf8,%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22utf-8%22%3F%3E%3C!DOCTYPE%20svg%20PUBLIC%20%22-%2F%2FW3C%2F%2FDTD%20SVG%201.1%2F%2FEN%22%20%22http%3A%2F%2Fwww.w3.org%2FGraphics%2FSVG%2F1.1%2FDTD%2Fsvg11.dtd%22%3E%3Csvg%20version%3D%221.1%22%20id%3D%22Layer_1%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%20x%3D%220px%22%20y%3D%220px%22%20width%3D%2218.75px%22%20height%3D%2218.75px%22%20viewBox%3D%220%200%2018.75%2018.75%22%20enable-background%3D%22new%200%200%2018.75%2018.75%22%20xml%3Aspace%3D%22preserve%22%3E%3Cg%3E%3Cg%3E%3Cpath%20fill%3D%22%236A6C8A%22%20d%3D%22M12.285%2C9.711l-2.104-0.302L9.243%2C8.568L6.669%2C7.095C6.948%2C6.6%2C6.995%2C6.026%2C6.845%2C5.474%20c-0.191-0.698-0.695-1.36-1.438-1.786C4.068%2C2.922%2C2.464%2C3.214%2C1.82%2C4.338C1.536%2C4.836%2C1.489%2C5.414%2C1.64%2C5.97%20c0.189%2C0.698%2C0.694%2C1.36%2C1.438%2C1.787c0.328%2C0.187%2C0.67%2C0.31%2C1.01%2C0.372c0.002%2C0%2C0.006%2C0.002%2C0.008%2C0.004%20c0.027%2C0.004%2C0.057%2C0.009%2C0.088%2C0.011c2.12%2C0.316%2C3.203%2C0.915%2C3.73%2C1.337c-0.527%2C0.424-1.61%2C1.021-3.731%2C1.339%20c-0.029%2C0.003-0.058%2C0.007-0.087%2C0.012c-0.002%2C0.002-0.004%2C0.002-0.007%2C0.003c-0.341%2C0.062-0.684%2C0.187-1.013%2C0.374%20c-0.74%2C0.425-1.246%2C1.089-1.437%2C1.787c-0.149%2C0.555-0.105%2C1.133%2C0.181%2C1.632c0.011%2C0.018%2C0.021%2C0.033%2C0.033%2C0.049l0.883%2C0.783%20c0.765%2C0.366%2C1.775%2C0.328%2C2.67-0.184c0.744-0.425%2C1.248-1.088%2C1.439-1.786c0.148-0.552%2C0.104-1.126-0.176-1.62l2.573-1.473%20c0.573%2C0.287%2C2.299%2C1.292%2C2.299%2C1.292s3.602%2C1.445%2C4.241%2C1.812c0.773%2C0.191%2C0.566-0.151%2C0.566-0.151L12.285%2C9.711z%20M5.571%2C6.482%20C5.279%2C6.993%2C4.425%2C7.076%2C3.705%2C6.664C3.282%2C6.424%2C2.966%2C6.039%2C2.856%2C5.64C2.81%2C5.464%2C2.778%2C5.203%2C2.917%2C4.963%20c0.291-0.51%2C1.146-0.593%2C1.866-0.182C5.21%2C5.027%2C5.521%2C5.4%2C5.632%2C5.807C5.679%2C5.98%2C5.708%2C6.242%2C5.571%2C6.482z%20M5.632%2C13.159%20c-0.111%2C0.406-0.422%2C0.778-0.848%2C1.025c-0.719%2C0.409-1.576%2C0.327-1.867-0.184c-0.137-0.239-0.106-0.499-0.06-0.676%20c0.108-0.398%2C0.426-0.781%2C0.847-1.022c0.72-0.412%2C1.574-0.329%2C1.866%2C0.181C5.708%2C12.723%2C5.679%2C12.983%2C5.632%2C13.159z%20M16.181%2C5.139%20c-0.448%2C0.258-4.435%2C1.9-4.435%2C1.9s-1.556%2C0.855-2.104%2C1.13l0.937%2C0.843l2.057-0.229l4.11-3.638%20C16.745%2C5.146%2C17.013%2C4.664%2C16.181%2C5.139z%22%2F%3E%3C%2Fg%3E%3C%2Fg%3E%3C%2Fsvg%3E%20');\n}\n.x6-widget-handle-unlink:hover {\n  background-image: url('data:image/svg+xml;charset=utf8,%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22utf-8%22%3F%3E%3C!DOCTYPE%20svg%20PUBLIC%20%22-%2F%2FW3C%2F%2FDTD%20SVG%201.1%2F%2FEN%22%20%22http%3A%2F%2Fwww.w3.org%2FGraphics%2FSVG%2F1.1%2FDTD%2Fsvg11.dtd%22%3E%3Csvg%20version%3D%221.1%22%20id%3D%22Layer_1%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%20x%3D%220px%22%20y%3D%220px%22%20width%3D%2218.75px%22%20height%3D%2218.75px%22%20viewBox%3D%220%200%2018.75%2018.75%22%20enable-background%3D%22new%200%200%2018.75%2018.75%22%20xml%3Aspace%3D%22preserve%22%3E%3Cg%3E%3Cg%3E%3Cpath%20fill%3D%22%23FD6EB6%22%20d%3D%22M12.285%2C9.711l-2.104-0.302L9.243%2C8.568L6.669%2C7.095C6.948%2C6.6%2C6.995%2C6.026%2C6.845%2C5.474%20c-0.191-0.698-0.695-1.36-1.438-1.786C4.068%2C2.922%2C2.464%2C3.214%2C1.82%2C4.338C1.536%2C4.836%2C1.489%2C5.414%2C1.64%2C5.97%20c0.189%2C0.698%2C0.694%2C1.36%2C1.438%2C1.787c0.328%2C0.187%2C0.67%2C0.31%2C1.01%2C0.372c0.002%2C0%2C0.006%2C0.002%2C0.008%2C0.004%20c0.027%2C0.004%2C0.057%2C0.009%2C0.088%2C0.011c2.12%2C0.316%2C3.203%2C0.915%2C3.73%2C1.337c-0.527%2C0.424-1.61%2C1.021-3.731%2C1.339%20c-0.029%2C0.003-0.058%2C0.007-0.087%2C0.012c-0.002%2C0.002-0.004%2C0.002-0.007%2C0.003c-0.341%2C0.062-0.684%2C0.187-1.013%2C0.374%20c-0.74%2C0.425-1.246%2C1.089-1.437%2C1.787c-0.149%2C0.555-0.105%2C1.133%2C0.181%2C1.632c0.011%2C0.018%2C0.021%2C0.033%2C0.033%2C0.049l0.883%2C0.783%20c0.765%2C0.366%2C1.775%2C0.328%2C2.67-0.184c0.744-0.425%2C1.248-1.088%2C1.439-1.786c0.148-0.552%2C0.104-1.126-0.176-1.62l2.573-1.473%20c0.573%2C0.287%2C2.299%2C1.292%2C2.299%2C1.292s3.602%2C1.445%2C4.241%2C1.812c0.773%2C0.191%2C0.566-0.151%2C0.566-0.151L12.285%2C9.711z%20M5.571%2C6.482%20C5.279%2C6.993%2C4.425%2C7.076%2C3.705%2C6.664C3.282%2C6.424%2C2.966%2C6.039%2C2.856%2C5.64C2.81%2C5.464%2C2.778%2C5.203%2C2.917%2C4.963%20c0.291-0.51%2C1.146-0.593%2C1.866-0.182C5.21%2C5.027%2C5.521%2C5.4%2C5.632%2C5.807C5.679%2C5.98%2C5.708%2C6.242%2C5.571%2C6.482z%20M5.632%2C13.159%20c-0.111%2C0.406-0.422%2C0.778-0.848%2C1.025c-0.719%2C0.409-1.576%2C0.327-1.867-0.184c-0.137-0.239-0.106-0.499-0.06-0.676%20c0.108-0.398%2C0.426-0.781%2C0.847-1.022c0.72-0.412%2C1.574-0.329%2C1.866%2C0.181C5.708%2C12.723%2C5.679%2C12.983%2C5.632%2C13.159z%20M16.181%2C5.139%20c-0.448%2C0.258-4.435%2C1.9-4.435%2C1.9s-1.556%2C0.855-2.104%2C1.13l0.937%2C0.843l2.057-0.229l4.11-3.638%20C16.745%2C5.146%2C17.013%2C4.664%2C16.181%2C5.139z%22%2F%3E%3C%2Fg%3E%3C%2Fg%3E%3C%2Fsvg%3E%20');\n}\n.x6-widget-handle-direction {\n  background-image: url(\"data:image/svg+xml;charset=UTF-8,%3C%3Fxml%20version%3D%221.0%22%20%3F%3E%3C!DOCTYPE%20svg%20%20PUBLIC%20'-%2F%2FW3C%2F%2FDTD%20SVG%201.1%2F%2FEN'%20%20'http%3A%2F%2Fwww.w3.org%2FGraphics%2FSVG%2F1.1%2FDTD%2Fsvg11.dtd'%3E%3Csvg%20id%3D%22Layer_1%22%20style%3D%22enable-background%3Anew%200%200%20512%20512%3B%22%20version%3D%221.1%22%20viewBox%3D%220%200%20512%20512%22%20xml%3Aspace%3D%22preserve%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%3E%3Cstyle%20type%3D%22text%2Fcss%22%3E%0A%09.st0%7Bfill%3A%236A6C8A%3Bstroke%3A%236A6C8A%3Bstroke-width%3A30%7D%0A%09.dot%7Bfill%3A%236A6C8A%3B%7D%0A%3C%2Fstyle%3E%3Cg%3E%3Cg%20id%3D%22XMLID_475_%22%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M133.1%2C277.1c1.8%2C0%2C3.7-0.6%2C5.4-1.7c4.1-3%2C5-8.7%2C2-12.8c-3-4.1-8.7-5-12.8-2c0%2C0%2C0%2C0%2C0%2C0%20%20%20%20%20c-4.1%2C3-5%2C8.7-2%2C12.8C127.5%2C275.8%2C130.3%2C277.1%2C133.1%2C277.1z%22%20id%3D%22XMLID_489_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M138.5%2C359.6c-4.1-3-9.8-2.1-12.8%2C2c-3%2C4.1-2.1%2C9.8%2C2%2C12.8c1.6%2C1.2%2C3.5%2C1.7%2C5.4%2C1.7%20%20%20%20%20c2.8%2C0%2C5.6-1.3%2C7.4-3.7C143.5%2C368.3%2C142.6%2C362.6%2C138.5%2C359.6z%22%20id%3D%22XMLID_726_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M108.1%2C327.7c-4.8%2C1.6-7.4%2C6.7-5.9%2C11.5c1.3%2C3.9%2C4.8%2C6.3%2C8.7%2C6.3c0.9%2C0%2C1.9-0.1%2C2.8-0.4%20%20%20%20%20c4.8-1.6%2C7.4-6.7%2C5.9-11.5C118%2C328.8%2C112.9%2C326.2%2C108.1%2C327.7z%22%20id%3D%22XMLID_776_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M108.1%2C307.3c0.9%2C0.3%2C1.9%2C0.4%2C2.8%2C0.4c3.8%2C0%2C7.4-2.4%2C8.7-6.3c1.6-4.8-1.1-9.9-5.9-11.5%20%20%20%20%20c-4.8-1.6-9.9%2C1.1-11.5%2C5.9C100.7%2C300.6%2C103.3%2C305.7%2C108.1%2C307.3z%22%20id%3D%22XMLID_777_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M169.2%2C265.4c2.4%2C0%2C4.7-1%2C6.5-2.6c1.7-1.7%2C2.7-4.1%2C2.7-6.5c0-2.4-1-4.8-2.7-6.5%20%20%20%20%20c-1.7-1.7-4.1-2.7-6.5-2.7s-4.7%2C1-6.5%2C2.7c-1.7%2C1.7-2.7%2C4-2.7%2C6.5c0%2C2.4%2C1%2C4.7%2C2.7%2C6.5C164.4%2C264.4%2C166.8%2C265.4%2C169.2%2C265.4z%22%20id%3D%22XMLID_797_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M247.7%2C256.3c0-5-4.1-9.1-9.1-9.1c-5%2C0-9.1%2C4.1-9.1%2C9.1c0%2C5%2C4.1%2C9.1%2C9.1%2C9.1%20%20%20%20%20C243.7%2C265.4%2C247.7%2C261.3%2C247.7%2C256.3z%22%20id%3D%22XMLID_798_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M213%2C256.3c0-5-4.1-9.1-9.1-9.1c-5%2C0-9.1%2C4.1-9.1%2C9.1c0%2C5%2C4.1%2C9.1%2C9.1%2C9.1%20%20%20%20%20C208.9%2C265.4%2C213%2C261.3%2C213%2C256.3z%22%20id%3D%22XMLID_799_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M317.2%2C256.3c0-5-4.1-9.1-9.1-9.1c-5%2C0-9.1%2C4.1-9.1%2C9.1c0%2C5%2C4.1%2C9.1%2C9.1%2C9.1%20%20%20%20%20C313.1%2C265.4%2C317.2%2C261.3%2C317.2%2C256.3z%22%20id%3D%22XMLID_800_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M282.5%2C256.3c0-5-4.1-9.1-9.1-9.1s-9.1%2C4.1-9.1%2C9.1c0%2C5%2C4.1%2C9.1%2C9.1%2C9.1%20%20%20%20%20S282.5%2C261.3%2C282.5%2C256.3z%22%20id%3D%22XMLID_801_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M401.1%2C185.2c0.9%2C0%2C1.9-0.1%2C2.8-0.5c4.8-1.6%2C7.4-6.7%2C5.9-11.5c-1.6-4.8-6.7-7.4-11.5-5.8%20%20%20%20%20c-4.8%2C1.6-7.4%2C6.7-5.8%2C11.5C393.6%2C182.8%2C397.2%2C185.2%2C401.1%2C185.2z%22%20id%3D%22XMLID_802_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M403.9%2C205.2c-4.8-1.6-9.9%2C1-11.5%2C5.9l0%2C0c-1.6%2C4.8%2C1.1%2C9.9%2C5.9%2C11.5%20%20%20%20%20c0.9%2C0.3%2C1.9%2C0.5%2C2.8%2C0.5c3.9%2C0%2C7.4-2.5%2C8.7-6.3c0%2C0%2C0%2C0%2C0%2C0C411.3%2C211.9%2C408.7%2C206.8%2C403.9%2C205.2z%22%20id%3D%22XMLID_803_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M373.5%2C237.2L373.5%2C237.2c-4.1%2C3-5%2C8.7-2%2C12.8c1.8%2C2.4%2C4.6%2C3.7%2C7.4%2C3.7%20%20%20%20%20c1.8%2C0%2C3.7-0.6%2C5.4-1.8c4.1-3%2C4.9-8.7%2C2-12.8C383.3%2C235.1%2C377.6%2C234.2%2C373.5%2C237.2z%22%20id%3D%22XMLID_804_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M373.5%2C152.9c1.6%2C1.2%2C3.5%2C1.8%2C5.4%2C1.8c2.8%2C0%2C5.6-1.3%2C7.4-3.8c3-4.1%2C2.1-9.8-2-12.7%20%20%20%20%20c-4.1-3-9.8-2.1-12.7%2C2C368.5%2C144.2%2C369.4%2C149.9%2C373.5%2C152.9z%22%20id%3D%22XMLID_805_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M342.8%2C247.1c-2.4%2C0-4.8%2C1-6.5%2C2.7c-1.7%2C1.7-2.7%2C4-2.7%2C6.5c0%2C2.4%2C1%2C4.7%2C2.7%2C6.4%20%20%20%20%20c1.7%2C1.7%2C4%2C2.7%2C6.5%2C2.7c2.4%2C0%2C4.7-1%2C6.5-2.7c1.7-1.7%2C2.7-4%2C2.7-6.4c0-2.4-1-4.8-2.7-6.5C347.6%2C248.1%2C345.2%2C247.1%2C342.8%2C247.1z%22%20id%3D%22XMLID_806_%22%2F%3E%0A%3Cpath%20class%3D%22st0%22%20d%3D%22M342.8%2C124.7H206.6l36.4-36.4c3.6-3.6%2C3.6-9.3%2C0-12.9c-3.6-3.6-9.3-3.6-12.9%2C0l-51.5%2C51.5%20%20%20%20%20c-1.9%2C1.9-2.8%2C4.4-2.7%2C6.9c-0.1%2C2.5%2C0.7%2C5%2C2.7%2C6.9l51.5%2C51.5c1.8%2C1.8%2C4.1%2C2.7%2C6.5%2C2.7c2.3%2C0%2C4.7-0.9%2C6.5-2.7%20%20%20%20%20c3.6-3.6%2C3.6-9.3%2C0-12.9l-36.4-36.4h136.1c0%2C0%2C0.1%2C0%2C0.1%2C0c0.6%2C0%2C1.2-0.1%2C1.8-0.2c0.2%2C0%2C0.4-0.1%2C0.6-0.1c0.1%2C0%2C0.2%2C0%2C0.3-0.1%20%20%20%20%20c3.2-1%2C5.6-3.6%2C6.3-6.9c0.1-0.6%2C0.2-1.2%2C0.2-1.8c0-0.6-0.1-1.2-0.2-1.8C351%2C127.8%2C347.3%2C124.7%2C342.8%2C124.7z%22%20id%3D%22XMLID_807_%22%2F%3E%0A%3Cpath%20class%3D%22st0%22%20d%3D%22M322.1%2C371.3l-51.5-51.5c-3.6-3.6-9.3-3.6-12.9%2C0c-3.6%2C3.6-3.6%2C9.3%2C0%2C12.9l36.9%2C36.9H169.2%20%20%20%20%20c-2.8%2C0-5.4%2C1.3-7%2C3.3c-0.1%2C0.1-0.2%2C0.2-0.3%2C0.4c-0.1%2C0.1-0.2%2C0.2-0.2%2C0.3c-0.1%2C0.1-0.1%2C0.2-0.2%2C0.4c-0.1%2C0.1-0.2%2C0.3-0.2%2C0.4%20%20%20%20%20c0%2C0.1-0.1%2C0.2-0.1%2C0.2c-0.1%2C0.2-0.2%2C0.4-0.3%2C0.6c0%2C0%2C0%2C0%2C0%2C0.1c-0.4%2C1.1-0.7%2C2.2-0.7%2C3.4c0%2C1.5%2C0.4%2C2.9%2C1%2C4.2c0%2C0%2C0%2C0.1%2C0.1%2C0.1%20%20%20%20%20c0.1%2C0.1%2C0.1%2C0.2%2C0.2%2C0.3c0.4%2C0.7%2C0.9%2C1.3%2C1.4%2C1.8c0.4%2C0.4%2C0.7%2C0.7%2C1.2%2C1c0.1%2C0.1%2C0.1%2C0.1%2C0.2%2C0.2c0%2C0%2C0.1%2C0%2C0.1%2C0.1%20%20%20%20%20c1.4%2C0.9%2C3.1%2C1.5%2C5%2C1.5h124.4l-36%2C36c-3.6%2C3.6-3.6%2C9.3%2C0%2C12.9c1.8%2C1.8%2C4.1%2C2.7%2C6.5%2C2.7c2.3%2C0%2C4.7-0.9%2C6.5-2.7l51.5-51.5%20%20%20%20%20c1.9-1.9%2C2.8-4.4%2C2.7-6.9C324.8%2C375.7%2C324%2C373.2%2C322.1%2C371.3z%22%20id%3D%22XMLID_808_%22%2F%3E%3C%2Fg%3E%3C%2Fg%3E%3C%2Fsvg%3E\");\n}\n.x6-widget-handle-direction:hover {\n  background-image: url(\"data:image/svg+xml;charset=UTF-8,%3C%3Fxml%20version%3D%221.0%22%20%3F%3E%3C!DOCTYPE%20svg%20%20PUBLIC%20'-%2F%2FW3C%2F%2FDTD%20SVG%201.1%2F%2FEN'%20%20'http%3A%2F%2Fwww.w3.org%2FGraphics%2FSVG%2F1.1%2FDTD%2Fsvg11.dtd'%3E%3Csvg%20id%3D%22Layer_1%22%20style%3D%22enable-background%3Anew%200%200%20512%20512%3B%22%20version%3D%221.1%22%20viewBox%3D%220%200%20512%20512%22%20xml%3Aspace%3D%22preserve%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%3E%3Cstyle%20type%3D%22text%2Fcss%22%3E%0A%09.st0%7Bfill%3A%23FD6EB6%3Bstroke%3A%23FD6EB6%3Bstroke-width%3A30%7D%0A%09.dot%7Bfill%3A%23FD6EB6%3B%7D%0A%3C%2Fstyle%3E%3Cg%3E%3Cg%20id%3D%22XMLID_475_%22%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M133.1%2C277.1c1.8%2C0%2C3.7-0.6%2C5.4-1.7c4.1-3%2C5-8.7%2C2-12.8c-3-4.1-8.7-5-12.8-2c0%2C0%2C0%2C0%2C0%2C0%20%20%20%20%20c-4.1%2C3-5%2C8.7-2%2C12.8C127.5%2C275.8%2C130.3%2C277.1%2C133.1%2C277.1z%22%20id%3D%22XMLID_489_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M138.5%2C359.6c-4.1-3-9.8-2.1-12.8%2C2c-3%2C4.1-2.1%2C9.8%2C2%2C12.8c1.6%2C1.2%2C3.5%2C1.7%2C5.4%2C1.7%20%20%20%20%20c2.8%2C0%2C5.6-1.3%2C7.4-3.7C143.5%2C368.3%2C142.6%2C362.6%2C138.5%2C359.6z%22%20id%3D%22XMLID_726_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M108.1%2C327.7c-4.8%2C1.6-7.4%2C6.7-5.9%2C11.5c1.3%2C3.9%2C4.8%2C6.3%2C8.7%2C6.3c0.9%2C0%2C1.9-0.1%2C2.8-0.4%20%20%20%20%20c4.8-1.6%2C7.4-6.7%2C5.9-11.5C118%2C328.8%2C112.9%2C326.2%2C108.1%2C327.7z%22%20id%3D%22XMLID_776_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M108.1%2C307.3c0.9%2C0.3%2C1.9%2C0.4%2C2.8%2C0.4c3.8%2C0%2C7.4-2.4%2C8.7-6.3c1.6-4.8-1.1-9.9-5.9-11.5%20%20%20%20%20c-4.8-1.6-9.9%2C1.1-11.5%2C5.9C100.7%2C300.6%2C103.3%2C305.7%2C108.1%2C307.3z%22%20id%3D%22XMLID_777_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M169.2%2C265.4c2.4%2C0%2C4.7-1%2C6.5-2.6c1.7-1.7%2C2.7-4.1%2C2.7-6.5c0-2.4-1-4.8-2.7-6.5%20%20%20%20%20c-1.7-1.7-4.1-2.7-6.5-2.7s-4.7%2C1-6.5%2C2.7c-1.7%2C1.7-2.7%2C4-2.7%2C6.5c0%2C2.4%2C1%2C4.7%2C2.7%2C6.5C164.4%2C264.4%2C166.8%2C265.4%2C169.2%2C265.4z%22%20id%3D%22XMLID_797_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M247.7%2C256.3c0-5-4.1-9.1-9.1-9.1c-5%2C0-9.1%2C4.1-9.1%2C9.1c0%2C5%2C4.1%2C9.1%2C9.1%2C9.1%20%20%20%20%20C243.7%2C265.4%2C247.7%2C261.3%2C247.7%2C256.3z%22%20id%3D%22XMLID_798_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M213%2C256.3c0-5-4.1-9.1-9.1-9.1c-5%2C0-9.1%2C4.1-9.1%2C9.1c0%2C5%2C4.1%2C9.1%2C9.1%2C9.1%20%20%20%20%20C208.9%2C265.4%2C213%2C261.3%2C213%2C256.3z%22%20id%3D%22XMLID_799_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M317.2%2C256.3c0-5-4.1-9.1-9.1-9.1c-5%2C0-9.1%2C4.1-9.1%2C9.1c0%2C5%2C4.1%2C9.1%2C9.1%2C9.1%20%20%20%20%20C313.1%2C265.4%2C317.2%2C261.3%2C317.2%2C256.3z%22%20id%3D%22XMLID_800_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M282.5%2C256.3c0-5-4.1-9.1-9.1-9.1s-9.1%2C4.1-9.1%2C9.1c0%2C5%2C4.1%2C9.1%2C9.1%2C9.1%20%20%20%20%20S282.5%2C261.3%2C282.5%2C256.3z%22%20id%3D%22XMLID_801_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M401.1%2C185.2c0.9%2C0%2C1.9-0.1%2C2.8-0.5c4.8-1.6%2C7.4-6.7%2C5.9-11.5c-1.6-4.8-6.7-7.4-11.5-5.8%20%20%20%20%20c-4.8%2C1.6-7.4%2C6.7-5.8%2C11.5C393.6%2C182.8%2C397.2%2C185.2%2C401.1%2C185.2z%22%20id%3D%22XMLID_802_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M403.9%2C205.2c-4.8-1.6-9.9%2C1-11.5%2C5.9l0%2C0c-1.6%2C4.8%2C1.1%2C9.9%2C5.9%2C11.5%20%20%20%20%20c0.9%2C0.3%2C1.9%2C0.5%2C2.8%2C0.5c3.9%2C0%2C7.4-2.5%2C8.7-6.3c0%2C0%2C0%2C0%2C0%2C0C411.3%2C211.9%2C408.7%2C206.8%2C403.9%2C205.2z%22%20id%3D%22XMLID_803_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M373.5%2C237.2L373.5%2C237.2c-4.1%2C3-5%2C8.7-2%2C12.8c1.8%2C2.4%2C4.6%2C3.7%2C7.4%2C3.7%20%20%20%20%20c1.8%2C0%2C3.7-0.6%2C5.4-1.8c4.1-3%2C4.9-8.7%2C2-12.8C383.3%2C235.1%2C377.6%2C234.2%2C373.5%2C237.2z%22%20id%3D%22XMLID_804_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M373.5%2C152.9c1.6%2C1.2%2C3.5%2C1.8%2C5.4%2C1.8c2.8%2C0%2C5.6-1.3%2C7.4-3.8c3-4.1%2C2.1-9.8-2-12.7%20%20%20%20%20c-4.1-3-9.8-2.1-12.7%2C2C368.5%2C144.2%2C369.4%2C149.9%2C373.5%2C152.9z%22%20id%3D%22XMLID_805_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M342.8%2C247.1c-2.4%2C0-4.8%2C1-6.5%2C2.7c-1.7%2C1.7-2.7%2C4-2.7%2C6.5c0%2C2.4%2C1%2C4.7%2C2.7%2C6.4%20%20%20%20%20c1.7%2C1.7%2C4%2C2.7%2C6.5%2C2.7c2.4%2C0%2C4.7-1%2C6.5-2.7c1.7-1.7%2C2.7-4%2C2.7-6.4c0-2.4-1-4.8-2.7-6.5C347.6%2C248.1%2C345.2%2C247.1%2C342.8%2C247.1z%22%20id%3D%22XMLID_806_%22%2F%3E%0A%3Cpath%20class%3D%22st0%22%20d%3D%22M342.8%2C124.7H206.6l36.4-36.4c3.6-3.6%2C3.6-9.3%2C0-12.9c-3.6-3.6-9.3-3.6-12.9%2C0l-51.5%2C51.5%20%20%20%20%20c-1.9%2C1.9-2.8%2C4.4-2.7%2C6.9c-0.1%2C2.5%2C0.7%2C5%2C2.7%2C6.9l51.5%2C51.5c1.8%2C1.8%2C4.1%2C2.7%2C6.5%2C2.7c2.3%2C0%2C4.7-0.9%2C6.5-2.7%20%20%20%20%20c3.6-3.6%2C3.6-9.3%2C0-12.9l-36.4-36.4h136.1c0%2C0%2C0.1%2C0%2C0.1%2C0c0.6%2C0%2C1.2-0.1%2C1.8-0.2c0.2%2C0%2C0.4-0.1%2C0.6-0.1c0.1%2C0%2C0.2%2C0%2C0.3-0.1%20%20%20%20%20c3.2-1%2C5.6-3.6%2C6.3-6.9c0.1-0.6%2C0.2-1.2%2C0.2-1.8c0-0.6-0.1-1.2-0.2-1.8C351%2C127.8%2C347.3%2C124.7%2C342.8%2C124.7z%22%20id%3D%22XMLID_807_%22%2F%3E%0A%3Cpath%20class%3D%22st0%22%20d%3D%22M322.1%2C371.3l-51.5-51.5c-3.6-3.6-9.3-3.6-12.9%2C0c-3.6%2C3.6-3.6%2C9.3%2C0%2C12.9l36.9%2C36.9H169.2%20%20%20%20%20c-2.8%2C0-5.4%2C1.3-7%2C3.3c-0.1%2C0.1-0.2%2C0.2-0.3%2C0.4c-0.1%2C0.1-0.2%2C0.2-0.2%2C0.3c-0.1%2C0.1-0.1%2C0.2-0.2%2C0.4c-0.1%2C0.1-0.2%2C0.3-0.2%2C0.4%20%20%20%20%20c0%2C0.1-0.1%2C0.2-0.1%2C0.2c-0.1%2C0.2-0.2%2C0.4-0.3%2C0.6c0%2C0%2C0%2C0%2C0%2C0.1c-0.4%2C1.1-0.7%2C2.2-0.7%2C3.4c0%2C1.5%2C0.4%2C2.9%2C1%2C4.2c0%2C0%2C0%2C0.1%2C0.1%2C0.1%20%20%20%20%20c0.1%2C0.1%2C0.1%2C0.2%2C0.2%2C0.3c0.4%2C0.7%2C0.9%2C1.3%2C1.4%2C1.8c0.4%2C0.4%2C0.7%2C0.7%2C1.2%2C1c0.1%2C0.1%2C0.1%2C0.1%2C0.2%2C0.2c0%2C0%2C0.1%2C0%2C0.1%2C0.1%20%20%20%20%20c1.4%2C0.9%2C3.1%2C1.5%2C5%2C1.5h124.4l-36%2C36c-3.6%2C3.6-3.6%2C9.3%2C0%2C12.9c1.8%2C1.8%2C4.1%2C2.7%2C6.5%2C2.7c2.3%2C0%2C4.7-0.9%2C6.5-2.7l51.5-51.5%20%20%20%20%20c1.9-1.9%2C2.8-4.4%2C2.7-6.9C324.8%2C375.7%2C324%2C373.2%2C322.1%2C371.3z%22%20id%3D%22XMLID_808_%22%2F%3E%3C%2Fg%3E%3C%2Fg%3E%3C%2Fsvg%3E\");\n}\n.x6-widget-handle-surround .x6-widget-handle-animate .x6-widget-handle {\n  transition: background-size 80ms, width 80ms, height 80ms, top 150ms, left 150ms, bottom 150ms, right 150ms;\n}\n.x6-widget-handle-surround .x6-widget-handle-pos-se {\n  right: -25px;\n  bottom: -25px;\n}\n.x6-widget-handle-surround .x6-widget-handle-pos-nw {\n  top: -21px;\n  left: -25px;\n}\n.x6-widget-handle-surround .x6-widget-handle-pos-n {\n  top: -22px;\n  left: 50%;\n  margin-left: -10px;\n}\n.x6-widget-handle-surround .x6-widget-handle-pos-e {\n  top: -webkit-calc(40%);\n  top: calc(50% - 10px);\n  right: -25px;\n}\n.x6-widget-handle-surround .x6-widget-handle-pos-ne {\n  top: -21px;\n  right: -25px;\n}\n.x6-widget-handle-surround .x6-widget-handle-pos-w {\n  top: 50%;\n  left: -25px;\n  margin-top: -10px;\n}\n.x6-widget-handle-surround .x6-widget-handle-pos-sw {\n  bottom: -25px;\n  left: -25px;\n}\n.x6-widget-handle-surround .x6-widget-handle-pos-s {\n  bottom: -24px;\n  left: 50%;\n  margin-left: -10px;\n}\n.x6-widget-handle-surround .x6-widget-handle-small .x6-widget-handle {\n  width: 15px;\n  height: 15px;\n  font-size: 15px;\n  background-size: 15px 15px;\n}\n.x6-widget-handle-surround .x6-widget-handle-small .x6-widget-handle-pos-se {\n  right: -19px;\n  bottom: -19px;\n}\n.x6-widget-handle-surround .x6-widget-handle-small .x6-widget-handle-pos-nw {\n  top: -19px;\n  left: -19px;\n}\n.x6-widget-handle-surround .x6-widget-handle-small .x6-widget-handle-pos-n {\n  top: -19px;\n  margin-left: -7.5px;\n}\n.x6-widget-handle-surround .x6-widget-handle-small .x6-widget-handle-pos-e {\n  top: -webkit-calc(42%);\n  top: calc(50% - 8px);\n  right: -19px;\n}\n.x6-widget-handle-surround .x6-widget-handle-small .x6-widget-handle-pos-ne {\n  top: -19px;\n  right: -19px;\n}\n.x6-widget-handle-surround .x6-widget-handle-small .x6-widget-handle-pos-w {\n  left: -19px;\n  margin-top: -8px;\n}\n.x6-widget-handle-surround .x6-widget-handle-small .x6-widget-handle-pos-sw {\n  bottom: -19px;\n  left: -19px;\n}\n.x6-widget-handle-surround .x6-widget-handle-small .x6-widget-handle-pos-s {\n  bottom: -19px;\n  margin-left: -7.5px;\n}\n.x6-widget-handle-surround .x6-widget-handle-tiny .x6-widget-handle {\n  width: 10px;\n  height: 10px;\n  font-size: 10px;\n  background-size: 10px 10px;\n}\n.x6-widget-handle-surround .x6-widget-handle-tiny .x6-widget-handle-pos-se {\n  right: -15px;\n  bottom: -13px;\n}\n.x6-widget-handle-surround .x6-widget-handle-tiny .x6-widget-handle-pos-nw {\n  top: -13px;\n  left: -15px;\n}\n.x6-widget-handle-surround .x6-widget-handle-tiny .x6-widget-handle-pos-n {\n  top: -13px;\n  margin-left: -5px;\n}\n.x6-widget-handle-surround .x6-widget-handle-tiny .x6-widget-handle-pos-e {\n  top: -webkit-calc(45%);\n  top: calc(50% - 5px);\n  right: -15px;\n}\n.x6-widget-handle-surround .x6-widget-handle-tiny .x6-widget-handle-pos-ne {\n  top: -13px;\n  right: -15px;\n}\n.x6-widget-handle-surround .x6-widget-handle-tiny .x6-widget-handle-pos-w {\n  left: -15px;\n  margin-top: -5px;\n}\n.x6-widget-handle-surround .x6-widget-handle-tiny .x6-widget-handle-pos-sw {\n  bottom: -13px;\n  left: -15px;\n}\n.x6-widget-handle-surround .x6-widget-handle-tiny .x6-widget-handle-pos-s {\n  bottom: -13px;\n  margin-left: -5px;\n}\n.x6-widget-handle-toolbar {\n  position: absolute;\n  top: -50px;\n  display: table-row;\n  padding: 7px 5px;\n}\n.x6-widget-handle-toolbar::after {\n  position: absolute;\n  top: 100%;\n  left: 10px;\n  width: 0;\n  height: 0;\n  margin-top: 4px;\n  border-right: 10px solid transparent;\n  border-left: 10px solid transparent;\n  content: '';\n}\n.x6-widget-handle-toolbar .x6-widget-handle {\n  position: relative;\n  display: table-cell;\n  min-width: 20px;\n  margin: 0 2px;\n  background-position: 3px 3px;\n  background-size: 16px 16px;\n}\n.x6-widget-handle-toolbar .x6-widget-handle::after {\n  position: absolute;\n  bottom: -11px;\n  width: 100%;\n  content: '';\n}\n.x6-widget-handle-pie {\n  position: absolute;\n  top: -webkit-calc(0%);\n  top: calc(50% - 50px);\n  right: -50px;\n  z-index: 1;\n  display: none;\n  width: 100px;\n  height: 100px;\n  margin: -2px -2px 0 0;\n  border-radius: 50%;\n  cursor: default;\n  pointer-events: visiblePainted;\n}\n.x6-widget-handle-pie .x6-widget-handle {\n  width: 1px;\n  height: auto;\n  pointer-events: visiblePainted;\n}\n.x6-widget-handle-pie-slice-svg {\n  width: 100%;\n  height: 100%;\n  overflow: visible !important;\n}\n.x6-widget-handle-pie-slice-img,\n.x6-widget-handle-pie-slice-txt {\n  display: none;\n  pointer-events: none;\n}\n.x6-widget-handle-pie[data-pie-toggle-position='e'] {\n  top: calc(50% - 50px);\n  right: -50px;\n  left: auto;\n}\n.x6-widget-handle-pie[data-pie-toggle-position='w'] {\n  top: calc(50% - 50px);\n  right: auto;\n  left: -52px;\n}\n.x6-widget-handle-pie[data-pie-toggle-position='n'] {\n  top: -50px;\n  right: auto;\n  bottom: auto;\n  left: calc(50% - 52px);\n}\n.x6-widget-handle-pie[data-pie-toggle-position='s'] {\n  top: auto;\n  right: auto;\n  bottom: -52px;\n  left: calc(50% - 52px);\n}\n.x6-widget-handle-pie-opened {\n  display: block;\n  animation: halo-pie-visibility 0.1s, halo-pie-opening 0.1s;\n  animation-timing-function: step-end, ease;\n  animation-delay: 0s, 0.1s;\n}\n.x6-widget-handle-pie-toggle {\n  position: absolute;\n  top: -webkit-calc(35%);\n  top: calc(50% - 15px);\n  right: -15px;\n  z-index: 2;\n  display: block;\n  box-sizing: border-box;\n  width: 30px;\n  height: 30px;\n  background-repeat: no-repeat;\n  background-position: center;\n  background-size: 20px 20px;\n  border-radius: 50%;\n  cursor: pointer;\n  user-select: none;\n  pointer-events: visiblePainted;\n  -webkit-user-drag: none;\n  user-drag: none;\n  /* stylelint-disable-line */\n}\n.x6-widget-handle-pie-toggle-pos-e {\n  top: -webkit-calc(35%);\n  top: calc(50% - 15px);\n  right: -15px;\n  bottom: auto;\n  left: auto;\n}\n.x6-widget-handle-pie-toggle-pos-w {\n  top: -webkit-calc(35%);\n  top: calc(50% - 15px);\n  right: auto;\n  bottom: auto;\n  left: -15px;\n}\n.x6-widget-handle-pie-toggle-pos-n {\n  top: -15px;\n  right: auto;\n  bottom: auto;\n  left: -webkit-calc(35%);\n  left: calc(50% - 15px);\n}\n.x6-widget-handle-pie-toggle-pos-s {\n  top: auto;\n  right: auto;\n  bottom: -15px;\n  left: -webkit-calc(35%);\n  left: calc(50% - 15px);\n}\n.x6-widget-handle-pie-toggle-opened {\n  transition: 0.1s background-image;\n}\n.x6-widget-handle-toolbar {\n  position: static;\n  display: inline-block;\n  margin-top: -50px;\n  margin-left: 45px;\n  white-space: nowrap;\n  vertical-align: top;\n  background-color: #f5f5f5;\n  border-bottom: 3px solid #333;\n  border-radius: 5px;\n  box-shadow: 0 1px 2px #222;\n}\n.x6-widget-handle-toolbar::after {\n  top: -12px;\n  left: 55px;\n  margin-top: 0;\n  border-top: 6px solid #333;\n  border-right: 10px solid transparent;\n  border-left: 10px solid transparent;\n}\n.x6-widget-handle-toolbar .x6-widget-handle {\n  display: inline-block;\n  vertical-align: top;\n}\n.x6-widget-handle-toolbar .x6-widget-handle:hover::after {\n  border-bottom: 4px solid #fc6cb8;\n}\n.x6-widget-handle-toolbar .x6-widget-handle-rotate {\n  position: absolute;\n  top: 100%;\n  right: 100%;\n  margin-top: 3px;\n  margin-right: 6px;\n}\n.x6-widget-handle-toolbar .x6-widget-handle-remove:hover::after,\n.x6-widget-handle-toolbar .x6-widget-handle-rotate:hover::after {\n  border-bottom: none;\n}\n.x6-widget-handle-toolbar .x6-widget-handle + .x6-widget-handle {\n  margin-left: 4px;\n}\n.x6-widget-handle-pie {\n  box-sizing: content-box;\n  background-color: #f5f5f5;\n  border: 2px solid #404040;\n}\n.x6-widget-handle-pie-slice {\n  fill: transparent;\n  stroke: #e9e9e9;\n  stroke-width: 1;\n}\n.x6-widget-handle-pie-slice:hover {\n  fill: #fff;\n}\n.x6-widget-handle-pie-slice-img {\n  display: block;\n}\n.x6-widget-handle-selected .x6-widget-handle-pie-slice {\n  fill: #fff;\n}\n.x6-widget-handle-pie-toggle {\n  background-color: #f6f6f6;\n  background-image: url('data:image/svg+xml;charset=utf8,%3C%3Fxml%20version%3D%221.0%22%20%3F%3E%3C!DOCTYPE%20svg%20PUBLIC%20%22-%2F%2FW3C%2F%2FDTD%20SVG%201.1%2F%2FEN%22%20%22http%3A%2F%2Fwww.w3.org%2FGraphics%2FSVG%2F1.1%2FDTD%2Fsvg11.dtd%22%3E%3Csvg%20height%3D%2216px%22%20id%3D%22Layer_1%22%20style%3D%22enable-background%3Anew%200%200%2016%2016%3B%22%20version%3D%221.1%22%20viewBox%3D%220%200%2016%2016%22%20width%3D%2216px%22%20xml%3Aspace%3D%22preserve%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%3E%3Cpath%20fill%3D%22%236A6C8A%22%20d%3D%22M15%2C6h-5V1c0-0.55-0.45-1-1-1H7C6.45%2C0%2C6%2C0.45%2C6%2C1v5H1C0.45%2C6%2C0%2C6.45%2C0%2C7v2c0%2C0.55%2C0.45%2C1%2C1%2C1h5v5c0%2C0.55%2C0.45%2C1%2C1%2C1h2%20c0.55%2C0%2C1-0.45%2C1-1v-5h5c0.55%2C0%2C1-0.45%2C1-1V7C16%2C6.45%2C15.55%2C6%2C15%2C6z%22%2F%3E%3C%2Fsvg%3E');\n  background-size: 16px 16px;\n  border: 2px solid #3b425f;\n}\n.x6-widget-handle-pie-toggle:hover {\n  background-color: #fff;\n  background-image: url('data:image/svg+xml;charset=utf8,%3C%3Fxml%20version%3D%221.0%22%20%3F%3E%3C!DOCTYPE%20svg%20PUBLIC%20%22-%2F%2FW3C%2F%2FDTD%20SVG%201.1%2F%2FEN%22%20%22http%3A%2F%2Fwww.w3.org%2FGraphics%2FSVG%2F1.1%2FDTD%2Fsvg11.dtd%22%3E%3Csvg%20height%3D%2216px%22%20id%3D%22Layer_1%22%20style%3D%22enable-background%3Anew%200%200%2016%2016%3B%22%20version%3D%221.1%22%20viewBox%3D%220%200%2016%2016%22%20width%3D%2216px%22%20xml%3Aspace%3D%22preserve%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%3E%3Cpath%20fill%3D%22%23FD6EB6%22%20d%3D%22M15%2C6h-5V1c0-0.55-0.45-1-1-1H7C6.45%2C0%2C6%2C0.45%2C6%2C1v5H1C0.45%2C6%2C0%2C6.45%2C0%2C7v2c0%2C0.55%2C0.45%2C1%2C1%2C1h5v5c0%2C0.55%2C0.45%2C1%2C1%2C1h2%20c0.55%2C0%2C1-0.45%2C1-1v-5h5c0.55%2C0%2C1-0.45%2C1-1V7C16%2C6.45%2C15.55%2C6%2C15%2C6z%22%2F%3E%3C%2Fsvg%3E');\n  border-color: #fd6eb6;\n}\n.x6-widget-handle-pie-toggle-opened {\n  background-image: url('data:image/svg+xml;charset=utf8,%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22UTF-8%22%20standalone%3D%22no%22%3F%3E%3Csvg%20xmlns%3Adc%3D%22http%3A%2F%2Fpurl.org%2Fdc%2Felements%2F1.1%2F%22%20xmlns%3Acc%3D%22http%3A%2F%2Fcreativecommons.org%2Fns%23%22%20xmlns%3Ardf%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2F02%2F22-rdf-syntax-ns%23%22%20xmlns%3Asvg%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20version%3D%221.1%22%20width%3D%2216%22%20height%3D%2216%22%20viewBox%3D%220%200%2016%2016%22%20id%3D%22Layer_1%22%20xml%3Aspace%3D%22preserve%22%3E%3Cmetadata%20id%3D%22metadata9%22%3E%3Crdf%3ARDF%3E%3Ccc%3AWork%20rdf%3Aabout%3D%22%22%3E%3Cdc%3Aformat%3Eimage%2Fsvg%2Bxml%3C%2Fdc%3Aformat%3E%3Cdc%3Atype%20rdf%3Aresource%3D%22http%3A%2F%2Fpurl.org%2Fdc%2Fdcmitype%2FStillImage%22%20%2F%3E%3Cdc%3Atitle%3E%3C%2Fdc%3Atitle%3E%3C%2Fcc%3AWork%3E%3C%2Frdf%3ARDF%3E%3C%2Fmetadata%3E%3Cdefs%20id%3D%22defs7%22%20%2F%3E%3Cpath%20d%3D%22M%2015%2C6%2010%2C6%20C%201.0301983%2C6.00505%2015.002631%2C6.011353%206%2C6%20L%201%2C6%20C%200.45%2C6%200%2C6.45%200%2C7%20l%200%2C2%20c%200%2C0.55%200.45%2C1%201%2C1%20l%205%2C0%20c%208.988585%2C-0.019732%20-5.02893401%2C-0.018728%204%2C0%20l%205%2C0%20c%200.55%2C0%201%2C-0.45%201%2C-1%20L%2016%2C7%20C%2016%2C6.45%2015.55%2C6%2015%2C6%20z%22%20id%3D%22path3%22%20style%3D%22fill%3A%236a6c8a%22%20%2F%3E%3C%2Fsvg%3E');\n}\n.x6-widget-handle-pie-toggle-opened:hover {\n  background-image: url('data:image/svg+xml;charset=utf8,%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22UTF-8%22%20standalone%3D%22no%22%3F%3E%3Csvg%20xmlns%3Adc%3D%22http%3A%2F%2Fpurl.org%2Fdc%2Felements%2F1.1%2F%22%20xmlns%3Acc%3D%22http%3A%2F%2Fcreativecommons.org%2Fns%23%22%20xmlns%3Ardf%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2F02%2F22-rdf-syntax-ns%23%22%20xmlns%3Asvg%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20version%3D%221.1%22%20width%3D%2216%22%20height%3D%2216%22%20viewBox%3D%220%200%2016%2016%22%20id%3D%22Layer_1%22%20xml%3Aspace%3D%22preserve%22%3E%3Cmetadata%20id%3D%22metadata9%22%3E%3Crdf%3ARDF%3E%3Ccc%3AWork%20rdf%3Aabout%3D%22%22%3E%3Cdc%3Aformat%3Eimage%2Fsvg%2Bxml%3C%2Fdc%3Aformat%3E%3Cdc%3Atype%20rdf%3Aresource%3D%22http%3A%2F%2Fpurl.org%2Fdc%2Fdcmitype%2FStillImage%22%20%2F%3E%3Cdc%3Atitle%3E%3C%2Fdc%3Atitle%3E%3C%2Fcc%3AWork%3E%3C%2Frdf%3ARDF%3E%3C%2Fmetadata%3E%3Cdefs%20id%3D%22defs7%22%20%2F%3E%3Cpath%20d%3D%22M%2015%2C6%2010%2C6%20C%201.0301983%2C6.00505%2015.002631%2C6.011353%206%2C6%20L%201%2C6%20C%200.45%2C6%200%2C6.45%200%2C7%20l%200%2C2%20c%200%2C0.55%200.45%2C1%201%2C1%20l%205%2C0%20c%208.988585%2C-0.019732%20-5.02893401%2C-0.018728%204%2C0%20l%205%2C0%20c%200.55%2C0%201%2C-0.45%201%2C-1%20L%2016%2C7%20C%2016%2C6.45%2015.55%2C6%2015%2C6%20z%22%20id%3D%22path3%22%20style%3D%22fill%3A%23FD6EB6%22%20%2F%3E%3C%2Fsvg%3E');\n}\n.x6-widget-dnd {\n  position: absolute;\n  top: -10000px;\n  left: -10000px;\n  z-index: 100;\n  display: none;\n  cursor: move;\n  opacity: 0.7;\n  pointer-events: 'cursor';\n}\n.x6-widget-dnd.dragging {\n  display: inline-block;\n}\n.x6-widget-dnd.dragging * {\n  pointer-events: none !important;\n}\n.x6-widget-dnd .x6-graph {\n  background: transparent;\n  box-shadow: none;\n}\n.x6-widget-halo {\n  position: absolute;\n  pointer-events: none;\n}\n.x6-widget-halo-content {\n  position: absolute;\n  top: 100%;\n  padding: 6px;\n  font-size: 10px;\n  line-height: 14px;\n  text-align: center;\n  border-radius: 6px;\n}\n.x6-widget-halo-handles + .x6-widget-halo-content {\n  right: -20px;\n  left: -20px;\n  margin-top: 30px;\n}\n.x6-widget-halo-handles.x6-widget-handle-small + .x6-widget-halo-content {\n  margin-top: 25px;\n}\n.x6-widget-halo-handles.x6-widget-handle-small + .x6-widget-halo-content {\n  margin-top: 20px;\n}\n.x6-widget-halo-handles.x6-widget-handle-pie + .x6-widget-halo-content {\n  right: 0;\n  left: 0;\n  margin-top: 10px;\n}\n.x6-widget-halo-content {\n  color: #fff;\n  background-color: #6a6b8a;\n}\n.x6-widget-halo.type-node .x6-widget-handle-toolbar .x6-widget-handle-remove {\n  position: absolute;\n  right: 100%;\n  bottom: 100%;\n  margin-right: 6px;\n  margin-bottom: 3px;\n}\n.x6-widget-halo.type-edge .x6-widget-handle-surround .x6-widget-handle-remove {\n  background-color: #fff;\n  border-radius: 50%;\n}\n.x6-widget-halo.type-edge .x6-widget-handle-toolbar {\n  margin-top: -60px;\n  margin-left: -18px;\n}\n.x6-widget-halo.type-edge .x6-widget-handle-toolbar::after {\n  top: -22px;\n  left: -9px;\n}\n@keyframes halo-pie-visibility {\n  0% {\n    visibility: hidden;\n  }\n  100% {\n    visibility: visible;\n  }\n}\n@keyframes halo-pie-opening {\n  0% {\n    transform: scale(0.4) rotate(-20deg);\n  }\n  100% {\n    transform: scale(1) rotate(0);\n  }\n}\n.x6-widget-handle {\n  position: absolute;\n  width: 20px;\n  height: 20px;\n  background-color: transparent;\n  background-repeat: no-repeat;\n  background-position: 0 0;\n  background-size: 20px 20px;\n  cursor: pointer;\n  user-select: none;\n  pointer-events: auto;\n  -webkit-user-drag: none;\n  user-drag: none;\n  /* stylelint-disable-line */\n}\n.x6-widget-handle.hidden {\n  display: none;\n}\n.x6-widget-handle-selected {\n  background-color: rgba(0, 0, 0, 0.1);\n  border-radius: 3px;\n}\n.x6-widget-handle-remove {\n  background-image: url('data:image/svg+xml;charset=utf8,%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22utf-8%22%3F%3E%3C!DOCTYPE%20svg%20PUBLIC%20%22-%2F%2FW3C%2F%2FDTD%20SVG%201.1%2F%2FEN%22%20%22http%3A%2F%2Fwww.w3.org%2FGraphics%2FSVG%2F1.1%2FDTD%2Fsvg11.dtd%22%3E%3Csvg%20version%3D%221.1%22%20id%3D%22Layer_1%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%20x%3D%220px%22%20y%3D%220px%22%20width%3D%2218.75px%22%20height%3D%2218.75px%22%20viewBox%3D%220%200%2018.75%2018.75%22%20enable-background%3D%22new%200%200%2018.75%2018.75%22%20xml%3Aspace%3D%22preserve%22%3E%3Cg%3E%3Cpath%20fill%3D%22%236A6C8A%22%20d%3D%22M15.386%2C3.365c-3.315-3.314-8.707-3.313-12.021%2C0c-3.314%2C3.315-3.314%2C8.706%2C0%2C12.02%20c3.314%2C3.314%2C8.707%2C3.314%2C12.021%2C0S18.699%2C6.68%2C15.386%2C3.365L15.386%2C3.365z%20M4.152%2C14.598C1.273%2C11.719%2C1.273%2C7.035%2C4.153%2C4.154%20c2.88-2.88%2C7.563-2.88%2C10.443%2C0c2.881%2C2.88%2C2.881%2C7.562%2C0%2C10.443C11.716%2C17.477%2C7.032%2C17.477%2C4.152%2C14.598L4.152%2C14.598z%22%2F%3E%3Cpath%20fill%3D%22%236A6C8A%22%20d%3D%22M12.157%2C11.371L7.38%2C6.593C7.162%2C6.375%2C6.809%2C6.375%2C6.592%2C6.592c-0.218%2C0.219-0.218%2C0.572%2C0%2C0.79%20l4.776%2C4.776c0.218%2C0.219%2C0.571%2C0.219%2C0.79%2C0C12.375%2C11.941%2C12.375%2C11.588%2C12.157%2C11.371L12.157%2C11.371z%22%2F%3E%3Cpath%20fill%3D%22%236A6C8A%22%20d%3D%22M11.369%2C6.593l-4.777%2C4.778c-0.217%2C0.217-0.217%2C0.568%2C0%2C0.787c0.219%2C0.219%2C0.571%2C0.217%2C0.788%2C0l4.777-4.777%20c0.218-0.218%2C0.218-0.571%2C0.001-0.789C11.939%2C6.375%2C11.587%2C6.375%2C11.369%2C6.593L11.369%2C6.593z%22%2F%3E%3C%2Fg%3E%3C%2Fsvg%3E%20');\n  cursor: pointer;\n}\n.x6-widget-handle-remove:hover {\n  background-image: url('data:image/svg+xml;charset=utf8,%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22utf-8%22%3F%3E%3C!DOCTYPE%20svg%20PUBLIC%20%22-%2F%2FW3C%2F%2FDTD%20SVG%201.1%2F%2FEN%22%20%22http%3A%2F%2Fwww.w3.org%2FGraphics%2FSVG%2F1.1%2FDTD%2Fsvg11.dtd%22%3E%3Csvg%20version%3D%221.1%22%20id%3D%22Layer_1%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%20x%3D%220px%22%20y%3D%220px%22%20width%3D%2218.75px%22%20height%3D%2218.75px%22%20viewBox%3D%220%200%2018.75%2018.75%22%20enable-background%3D%22new%200%200%2018.75%2018.75%22%20xml%3Aspace%3D%22preserve%22%3E%3Cg%3E%3Cpath%20fill%3D%22%236A6C8A%22%20d%3D%22M15.386%2C3.365c-3.315-3.314-8.707-3.313-12.021%2C0c-3.314%2C3.315-3.314%2C8.706%2C0%2C12.02%20c3.314%2C3.314%2C8.707%2C3.314%2C12.021%2C0S18.699%2C6.68%2C15.386%2C3.365L15.386%2C3.365z%22%2F%3E%3Cpath%20fill%3D%22%23FFFFFF%22%20d%3D%22M12.157%2C11.371L7.38%2C6.593C7.162%2C6.375%2C6.809%2C6.375%2C6.592%2C6.592c-0.218%2C0.219-0.218%2C0.572%2C0%2C0.79%20l4.776%2C4.776c0.218%2C0.219%2C0.571%2C0.219%2C0.79%2C0C12.375%2C11.941%2C12.375%2C11.588%2C12.157%2C11.371L12.157%2C11.371z%22%2F%3E%3Cpath%20fill%3D%22%23FFFFFF%22%20d%3D%22M11.369%2C6.593l-4.777%2C4.778c-0.217%2C0.217-0.217%2C0.568%2C0%2C0.787c0.219%2C0.219%2C0.571%2C0.217%2C0.788%2C0l4.777-4.777%20c0.218-0.218%2C0.218-0.571%2C0.001-0.789C11.939%2C6.375%2C11.587%2C6.375%2C11.369%2C6.593L11.369%2C6.593z%22%2F%3E%3C%2Fg%3E%3C%2Fsvg%3E%20');\n}\n.x6-widget-handle-rotate {\n  background-image: url('data:image/svg+xml;charset=utf8,%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22utf-8%22%3F%3E%3C!DOCTYPE%20svg%20PUBLIC%20%22-%2F%2FW3C%2F%2FDTD%20SVG%201.1%2F%2FEN%22%20%22http%3A%2F%2Fwww.w3.org%2FGraphics%2FSVG%2F1.1%2FDTD%2Fsvg11.dtd%22%3E%3Csvg%20version%3D%221.1%22%20id%3D%22Layer_1%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%20x%3D%220px%22%20y%3D%220px%22%20width%3D%2218.75px%22%20height%3D%2218.75px%22%20viewBox%3D%220%200%2018.75%2018.75%22%20enable-background%3D%22new%200%200%2018.75%2018.75%22%20xml%3Aspace%3D%22preserve%22%3E%3Cpath%20fill%3D%22%236A6C8A%22%20d%3D%22M9.374%2C17.592c-4.176%2C0-7.57-3.401-7.57-7.575c0-4.175%2C3.395-7.574%2C7.57-7.574c0.28%2C0%2C0.56%2C0.018%2C0.837%2C0.05%20V1.268c0-0.158%2C0.099-0.3%2C0.239-0.36c0.151-0.058%2C0.315-0.026%2C0.428%2C0.086l2.683%2C2.688c0.152%2C0.154%2C0.152%2C0.399%2C0%2C0.553l-2.68%2C2.693%20c-0.115%2C0.112-0.279%2C0.147-0.431%2C0.087c-0.141-0.063-0.239-0.205-0.239-0.361V5.296C9.934%2C5.243%2C9.654%2C5.22%2C9.374%2C5.22%20c-2.646%2C0-4.796%2C2.152-4.796%2C4.797s2.154%2C4.798%2C4.796%2C4.798c2.645%2C0%2C4.798-2.153%2C4.798-4.798c0-0.214%2C0.174-0.391%2C0.391-0.391h1.991%20c0.217%2C0%2C0.394%2C0.177%2C0.394%2C0.391C16.947%2C14.19%2C13.549%2C17.592%2C9.374%2C17.592L9.374%2C17.592z%20M9.374%2C17.592%22%2F%3E%3C%2Fsvg%3E%20');\n  cursor: move;\n}\n.x6-widget-handle-rotate:hover {\n  background-image: url('data:image/svg+xml;charset=utf8,%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22utf-8%22%3F%3E%3C!DOCTYPE%20svg%20PUBLIC%20%22-%2F%2FW3C%2F%2FDTD%20SVG%201.1%2F%2FEN%22%20%22http%3A%2F%2Fwww.w3.org%2FGraphics%2FSVG%2F1.1%2FDTD%2Fsvg11.dtd%22%3E%3Csvg%20version%3D%221.1%22%20id%3D%22Layer_1%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%20x%3D%220px%22%20y%3D%220px%22%20width%3D%2218.75px%22%20height%3D%2218.75px%22%20viewBox%3D%220%200%2018.75%2018.75%22%20enable-background%3D%22new%200%200%2018.75%2018.75%22%20xml%3Aspace%3D%22preserve%22%3E%3Cpath%20fill%3D%22%23FD6EB6%22%20d%3D%22M9.374%2C17.592c-4.176%2C0-7.57-3.401-7.57-7.575c0-4.175%2C3.395-7.574%2C7.57-7.574c0.28%2C0%2C0.56%2C0.018%2C0.837%2C0.05%20V1.268c0-0.158%2C0.099-0.3%2C0.239-0.36c0.151-0.058%2C0.315-0.026%2C0.428%2C0.086l2.683%2C2.688c0.152%2C0.154%2C0.152%2C0.399%2C0%2C0.553l-2.68%2C2.693%20c-0.115%2C0.112-0.279%2C0.147-0.431%2C0.087c-0.141-0.063-0.239-0.205-0.239-0.361V5.296C9.934%2C5.243%2C9.654%2C5.22%2C9.374%2C5.22%20c-2.646%2C0-4.796%2C2.152-4.796%2C4.797s2.154%2C4.798%2C4.796%2C4.798c2.645%2C0%2C4.798-2.153%2C4.798-4.798c0-0.214%2C0.174-0.391%2C0.391-0.391h1.991%20c0.217%2C0%2C0.394%2C0.177%2C0.394%2C0.391C16.947%2C14.19%2C13.549%2C17.592%2C9.374%2C17.592L9.374%2C17.592z%20M9.374%2C17.592%22%2F%3E%3C%2Fsvg%3E%20');\n}\n.x6-widget-handle-resize {\n  background-image: url('data:image/svg+xml;charset=utf8,%3C%3Fxml%20version%3D%221.0%22%20%3F%3E%3Csvg%20height%3D%2224px%22%20version%3D%221.1%22%20viewBox%3D%220%200%2024%2024%22%20width%3D%2224px%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Asketch%3D%22http%3A%2F%2Fwww.bohemiancoding.com%2Fsketch%2Fns%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%3E%3Ctitle%2F%3E%3Cdesc%2F%3E%3Cdefs%2F%3E%3Cg%20fill%3D%22none%22%20fill-rule%3D%22evenodd%22%20id%3D%22miu%22%20stroke%3D%22none%22%20stroke-width%3D%221%22%3E%3Cg%20id%3D%22Artboard-1%22%20transform%3D%22translate(-251.000000%2C%20-443.000000)%22%3E%3Cg%20id%3D%22slice%22%20transform%3D%22translate(215.000000%2C%20119.000000)%22%2F%3E%3Cpath%20d%3D%22M252%2C448%20L256%2C448%20L256%2C444%20L252%2C444%20L252%2C448%20Z%20M257%2C448%20L269%2C448%20L269%2C446%20L257%2C446%20L257%2C448%20Z%20M257%2C464%20L269%2C464%20L269%2C462%20L257%2C462%20L257%2C464%20Z%20M270%2C444%20L270%2C448%20L274%2C448%20L274%2C444%20L270%2C444%20Z%20M252%2C462%20L252%2C466%20L256%2C466%20L256%2C462%20L252%2C462%20Z%20M270%2C462%20L270%2C466%20L274%2C466%20L274%2C462%20L270%2C462%20Z%20M254%2C461%20L256%2C461%20L256%2C449%20L254%2C449%20L254%2C461%20Z%20M270%2C461%20L272%2C461%20L272%2C449%20L270%2C449%20L270%2C461%20Z%22%20fill%3D%22%236A6C8A%22%20id%3D%22editor-crop-glyph%22%2F%3E%3C%2Fg%3E%3C%2Fg%3E%3C%2Fsvg%3E');\n  cursor: se-resize;\n}\n.x6-widget-handle-resize:hover {\n  background-image: url('data:image/svg+xml;charset=utf8,%3C%3Fxml%20version%3D%221.0%22%20%3F%3E%3Csvg%20height%3D%2224px%22%20version%3D%221.1%22%20viewBox%3D%220%200%2024%2024%22%20width%3D%2224px%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Asketch%3D%22http%3A%2F%2Fwww.bohemiancoding.com%2Fsketch%2Fns%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%3E%3Ctitle%2F%3E%3Cdesc%2F%3E%3Cdefs%2F%3E%3Cg%20fill%3D%22none%22%20fill-rule%3D%22evenodd%22%20id%3D%22miu%22%20stroke%3D%22none%22%20stroke-width%3D%221%22%3E%3Cg%20id%3D%22Artboard-1%22%20transform%3D%22translate(-251.000000%2C%20-443.000000)%22%3E%3Cg%20id%3D%22slice%22%20transform%3D%22translate(215.000000%2C%20119.000000)%22%2F%3E%3Cpath%20d%3D%22M252%2C448%20L256%2C448%20L256%2C444%20L252%2C444%20L252%2C448%20Z%20M257%2C448%20L269%2C448%20L269%2C446%20L257%2C446%20L257%2C448%20Z%20M257%2C464%20L269%2C464%20L269%2C462%20L257%2C462%20L257%2C464%20Z%20M270%2C444%20L270%2C448%20L274%2C448%20L274%2C444%20L270%2C444%20Z%20M252%2C462%20L252%2C466%20L256%2C466%20L256%2C462%20L252%2C462%20Z%20M270%2C462%20L270%2C466%20L274%2C466%20L274%2C462%20L270%2C462%20Z%20M254%2C461%20L256%2C461%20L256%2C449%20L254%2C449%20L254%2C461%20Z%20M270%2C461%20L272%2C461%20L272%2C449%20L270%2C449%20L270%2C461%20Z%22%20fill%3D%22%23FD6EB6%22%20id%3D%22editor-crop-glyph%22%2F%3E%3C%2Fg%3E%3C%2Fg%3E%3C%2Fsvg%3E');\n}\n.x6-widget-handle-clone {\n  background-image: url('data:image/svg+xml;charset=utf8,%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22utf-8%22%3F%3E%3C!DOCTYPE%20svg%20PUBLIC%20%22-%2F%2FW3C%2F%2FDTD%20SVG%201.1%2F%2FEN%22%20%22http%3A%2F%2Fwww.w3.org%2FGraphics%2FSVG%2F1.1%2FDTD%2Fsvg11.dtd%22%3E%3Csvg%20version%3D%221.1%22%20id%3D%22Layer_1%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%20x%3D%220px%22%20y%3D%220px%22%20width%3D%2218.75px%22%20height%3D%2218.75px%22%20viewBox%3D%220%200%2018.75%2018.75%22%20enable-background%3D%22new%200%200%2018.75%2018.75%22%20xml%3Aspace%3D%22preserve%22%3E%3Cg%3E%3Cpath%20fill%3D%22%236A6C8A%22%20d%3D%22M12.852%2C0.875h-9.27c-0.853%2C0-1.547%2C0.694-1.547%2C1.547v10.816h1.547V2.422h9.27V0.875z%20M15.172%2C3.965h-8.5%20c-0.849%2C0-1.547%2C0.698-1.547%2C1.547v10.816c0%2C0.849%2C0.698%2C1.547%2C1.547%2C1.547h8.5c0.85%2C0%2C1.543-0.698%2C1.543-1.547V5.512%20C16.715%2C4.663%2C16.021%2C3.965%2C15.172%2C3.965L15.172%2C3.965z%20M15.172%2C16.328h-8.5V5.512h8.5V16.328z%22%2F%3E%3C%2Fg%3E%3C%2Fsvg%3E%20');\n  cursor: move;\n}\n.x6-widget-handle-clone:hover {\n  background-image: url('data:image/svg+xml;charset=utf8,%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22utf-8%22%3F%3E%3C!DOCTYPE%20svg%20PUBLIC%20%22-%2F%2FW3C%2F%2FDTD%20SVG%201.1%2F%2FEN%22%20%22http%3A%2F%2Fwww.w3.org%2FGraphics%2FSVG%2F1.1%2FDTD%2Fsvg11.dtd%22%3E%3Csvg%20version%3D%221.1%22%20id%3D%22Layer_1%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%20x%3D%220px%22%20y%3D%220px%22%20width%3D%2218.75px%22%20height%3D%2218.75px%22%20viewBox%3D%220%200%2018.75%2018.75%22%20enable-background%3D%22new%200%200%2018.75%2018.75%22%20xml%3Aspace%3D%22preserve%22%3E%3Cg%3E%3Cpath%20fill%3D%22%23FD6EB6%22%20d%3D%22M12.852%2C0.875h-9.27c-0.853%2C0-1.547%2C0.694-1.547%2C1.547v10.816h1.547V2.422h9.27V0.875z%20M15.172%2C3.965h-8.5%20c-0.849%2C0-1.547%2C0.698-1.547%2C1.547v10.816c0%2C0.849%2C0.698%2C1.547%2C1.547%2C1.547h8.5c0.849%2C0%2C1.543-0.698%2C1.543-1.547V5.512%20C16.715%2C4.663%2C16.021%2C3.965%2C15.172%2C3.965L15.172%2C3.965z%20M15.172%2C16.328h-8.5V5.512h8.5V16.328z%20M15.172%2C16.328%22%2F%3E%3C%2Fg%3E%3C%2Fsvg%3E%20');\n}\n.x6-widget-handle-link {\n  background-image: url('data:image/svg+xml;charset=utf8,%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22utf-8%22%3F%3E%3C!DOCTYPE%20svg%20PUBLIC%20%22-%2F%2FW3C%2F%2FDTD%20SVG%201.1%2F%2FEN%22%20%22http%3A%2F%2Fwww.w3.org%2FGraphics%2FSVG%2F1.1%2FDTD%2Fsvg11.dtd%22%3E%3Csvg%20version%3D%221.1%22%20id%3D%22Layer_1%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%20x%3D%220px%22%20y%3D%220px%22%20width%3D%2218.75px%22%20height%3D%2218.75px%22%20viewBox%3D%220%200%2018.75%2018.75%22%20enable-background%3D%22new%200%200%2018.75%2018.75%22%20xml%3Aspace%3D%22preserve%22%3E%3Cpath%20fill%3D%22%236A6C8A%22%20d%3D%22M9.884%2C9.838c0.54-0.551%2C1.005-0.955%2C1.384-1.201c0.463-0.308%2C0.749-0.352%2C0.887-0.352h1.34v1.367%20c0%2C0.104%2C0.061%2C0.2%2C0.154%2C0.242s0.204%2C0.027%2C0.284-0.038l3.168-2.669c0.06-0.051%2C0.096-0.125%2C0.096-0.203S17.16%2C6.83%2C17.101%2C6.781%20l-3.168-2.677c-0.08-0.067-0.19-0.081-0.284-0.038c-0.094%2C0.045-0.154%2C0.139-0.154%2C0.242v1.414h-1.343%20c-1.24%2C0.014-2.215%2C0.67-2.927%2C1.242c-0.797%2C0.65-1.533%2C1.447-2.245%2C2.217c-0.361%2C0.391-0.7%2C0.759-1.044%2C1.1%20c-0.541%2C0.549-1.011%2C0.951-1.395%2C1.199c-0.354%2C0.231-0.678%2C0.357-0.921%2C0.357h-1.8c-0.146%2C0-0.266%2C0.12-0.266%2C0.265v2.029%20c0%2C0.148%2C0.12%2C0.268%2C0.266%2C0.268h1.8l0%2C0c1.255-0.014%2C2.239-0.667%2C2.958-1.24c0.82-0.661%2C1.572-1.475%2C2.297-2.256%20C9.225%2C10.524%2C9.555%2C10.169%2C9.884%2C9.838z%22%2F%3E%3C%2Fsvg%3E%20');\n  cursor: move;\n  cursor: -moz-grabbing;\n  cursor: -webkit-grabbing;\n}\n.x6-widget-handle-link:hover {\n  background-image: url('data:image/svg+xml;charset=utf8,%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22utf-8%22%3F%3E%3C!DOCTYPE%20svg%20PUBLIC%20%22-%2F%2FW3C%2F%2FDTD%20SVG%201.1%2F%2FEN%22%20%22http%3A%2F%2Fwww.w3.org%2FGraphics%2FSVG%2F1.1%2FDTD%2Fsvg11.dtd%22%3E%3Csvg%20version%3D%221.1%22%20id%3D%22Layer_1%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%20x%3D%220px%22%20y%3D%220px%22%20width%3D%2218.75px%22%20height%3D%2218.75px%22%20viewBox%3D%220%200%2018.75%2018.75%22%20enable-background%3D%22new%200%200%2018.75%2018.75%22%20xml%3Aspace%3D%22preserve%22%3E%3Cpath%20fill%3D%22%23FD6EB6%22%20d%3D%22M9.884%2C9.838c0.54-0.551%2C1.005-0.955%2C1.384-1.201c0.463-0.308%2C0.749-0.352%2C0.887-0.352h1.34v1.367%20c0%2C0.104%2C0.061%2C0.2%2C0.154%2C0.242s0.204%2C0.027%2C0.284-0.038l3.168-2.669c0.06-0.051%2C0.096-0.125%2C0.096-0.203S17.16%2C6.83%2C17.101%2C6.781%20l-3.168-2.677c-0.08-0.067-0.19-0.081-0.284-0.038c-0.094%2C0.045-0.154%2C0.139-0.154%2C0.242v1.414h-1.343%20c-1.24%2C0.014-2.215%2C0.67-2.927%2C1.242c-0.797%2C0.65-1.533%2C1.447-2.245%2C2.217c-0.361%2C0.391-0.7%2C0.759-1.044%2C1.1%20c-0.541%2C0.549-1.011%2C0.951-1.395%2C1.199c-0.354%2C0.231-0.678%2C0.357-0.921%2C0.357h-1.8c-0.146%2C0-0.266%2C0.12-0.266%2C0.265v2.029%20c0%2C0.148%2C0.12%2C0.268%2C0.266%2C0.268h1.8l0%2C0c1.255-0.014%2C2.239-0.667%2C2.958-1.24c0.82-0.661%2C1.572-1.475%2C2.297-2.256%20C9.225%2C10.524%2C9.555%2C10.169%2C9.884%2C9.838z%22%2F%3E%3C%2Fsvg%3E%20');\n}\n.x6-widget-handle-fork {\n  background-image: url('data:image/svg+xml;charset=utf8,%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22utf-8%22%3F%3E%3C!DOCTYPE%20svg%20PUBLIC%20%22-%2F%2FW3C%2F%2FDTD%20SVG%201.1%2F%2FEN%22%20%22http%3A%2F%2Fwww.w3.org%2FGraphics%2FSVG%2F1.1%2FDTD%2Fsvg11.dtd%22%3E%3Csvg%20version%3D%221.1%22%20id%3D%22Layer_1%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%20x%3D%220px%22%20y%3D%220px%22%20width%3D%2218.75px%22%20height%3D%2218.75px%22%20viewBox%3D%220%200%2018.75%2018.75%22%20enable-background%3D%22new%200%200%2018.75%2018.75%22%20xml%3Aspace%3D%22preserve%22%3E%3Cg%3E%3Cg%3E%3Cpath%20fill-rule%3D%22evenodd%22%20clip-rule%3D%22evenodd%22%20fill%3D%22%236A6C8A%22%20d%3D%22M13.307%2C11.593c-0.69%2C0-1.299%2C0.33-1.693%2C0.835l-4.136-2.387%20C7.552%2C9.82%2C7.602%2C9.589%2C7.602%2C9.344c0-0.25-0.051-0.487-0.129-0.71l4.097-2.364c0.393%2C0.536%2C1.022%2C0.888%2C1.737%2C0.888%20c1.193%2C0%2C2.16-0.967%2C2.16-2.159s-0.967-2.159-2.16-2.159c-1.191%2C0-2.158%2C0.967-2.158%2C2.159c0%2C0.076%2C0.014%2C0.149%2C0.021%2C0.223%20L6.848%2C7.716C6.469%2C7.39%2C5.982%2C7.185%2C5.442%2C7.185c-1.191%2C0-2.158%2C0.967-2.158%2C2.159s0.967%2C2.159%2C2.158%2C2.159%20c0.545%2C0%2C1.037-0.208%2C1.417-0.541l4.319%2C2.493c-0.014%2C0.098-0.029%2C0.194-0.029%2C0.296c0%2C1.193%2C0.967%2C2.159%2C2.158%2C2.159%20c1.193%2C0%2C2.16-0.966%2C2.16-2.159C15.467%2C12.559%2C14.5%2C11.593%2C13.307%2C11.593z%22%2F%3E%3C%2Fg%3E%3C%2Fg%3E%3C%2Fsvg%3E%20');\n  cursor: move;\n}\n.x6-widget-handle-fork:hover {\n  background-image: url('data:image/svg+xml;charset=utf8,%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22utf-8%22%3F%3E%3C!DOCTYPE%20svg%20PUBLIC%20%22-%2F%2FW3C%2F%2FDTD%20SVG%201.1%2F%2FEN%22%20%22http%3A%2F%2Fwww.w3.org%2FGraphics%2FSVG%2F1.1%2FDTD%2Fsvg11.dtd%22%3E%3Csvg%20version%3D%221.1%22%20id%3D%22Layer_1%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%20x%3D%220px%22%20y%3D%220px%22%20width%3D%2218.75px%22%20height%3D%2218.75px%22%20viewBox%3D%220%200%2018.75%2018.75%22%20enable-background%3D%22new%200%200%2018.75%2018.75%22%20xml%3Aspace%3D%22preserve%22%3E%3Cg%3E%3Cg%3E%3Cpath%20fill-rule%3D%22evenodd%22%20clip-rule%3D%22evenodd%22%20fill%3D%22%23FD6EB6%22%20d%3D%22M13.307%2C11.593c-0.69%2C0-1.299%2C0.33-1.693%2C0.835l-4.136-2.387%20c0.075-0.22%2C0.125-0.452%2C0.125-0.697c0-0.25-0.051-0.487-0.129-0.71l4.097-2.365c0.394%2C0.536%2C1.022%2C0.888%2C1.737%2C0.888%20c1.193%2C0%2C2.16-0.967%2C2.16-2.159s-0.967-2.159-2.16-2.159c-1.191%2C0-2.158%2C0.967-2.158%2C2.159c0%2C0.076%2C0.015%2C0.148%2C0.022%2C0.223%20L6.848%2C7.716C6.469%2C7.39%2C5.981%2C7.185%2C5.442%2C7.185c-1.191%2C0-2.158%2C0.967-2.158%2C2.159s0.967%2C2.159%2C2.158%2C2.159%20c0.545%2C0%2C1.037-0.208%2C1.417-0.541l4.319%2C2.493c-0.013%2C0.098-0.029%2C0.194-0.029%2C0.296c0%2C1.193%2C0.967%2C2.159%2C2.158%2C2.159%20c1.193%2C0%2C2.16-0.966%2C2.16-2.159C15.467%2C12.559%2C14.5%2C11.593%2C13.307%2C11.593z%22%2F%3E%3C%2Fg%3E%3C%2Fg%3E%3C%2Fsvg%3E%20');\n}\n.x6-widget-handle-unlink {\n  background-image: url('data:image/svg+xml;charset=utf8,%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22utf-8%22%3F%3E%3C!DOCTYPE%20svg%20PUBLIC%20%22-%2F%2FW3C%2F%2FDTD%20SVG%201.1%2F%2FEN%22%20%22http%3A%2F%2Fwww.w3.org%2FGraphics%2FSVG%2F1.1%2FDTD%2Fsvg11.dtd%22%3E%3Csvg%20version%3D%221.1%22%20id%3D%22Layer_1%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%20x%3D%220px%22%20y%3D%220px%22%20width%3D%2218.75px%22%20height%3D%2218.75px%22%20viewBox%3D%220%200%2018.75%2018.75%22%20enable-background%3D%22new%200%200%2018.75%2018.75%22%20xml%3Aspace%3D%22preserve%22%3E%3Cg%3E%3Cg%3E%3Cpath%20fill%3D%22%236A6C8A%22%20d%3D%22M12.285%2C9.711l-2.104-0.302L9.243%2C8.568L6.669%2C7.095C6.948%2C6.6%2C6.995%2C6.026%2C6.845%2C5.474%20c-0.191-0.698-0.695-1.36-1.438-1.786C4.068%2C2.922%2C2.464%2C3.214%2C1.82%2C4.338C1.536%2C4.836%2C1.489%2C5.414%2C1.64%2C5.97%20c0.189%2C0.698%2C0.694%2C1.36%2C1.438%2C1.787c0.328%2C0.187%2C0.67%2C0.31%2C1.01%2C0.372c0.002%2C0%2C0.006%2C0.002%2C0.008%2C0.004%20c0.027%2C0.004%2C0.057%2C0.009%2C0.088%2C0.011c2.12%2C0.316%2C3.203%2C0.915%2C3.73%2C1.337c-0.527%2C0.424-1.61%2C1.021-3.731%2C1.339%20c-0.029%2C0.003-0.058%2C0.007-0.087%2C0.012c-0.002%2C0.002-0.004%2C0.002-0.007%2C0.003c-0.341%2C0.062-0.684%2C0.187-1.013%2C0.374%20c-0.74%2C0.425-1.246%2C1.089-1.437%2C1.787c-0.149%2C0.555-0.105%2C1.133%2C0.181%2C1.632c0.011%2C0.018%2C0.021%2C0.033%2C0.033%2C0.049l0.883%2C0.783%20c0.765%2C0.366%2C1.775%2C0.328%2C2.67-0.184c0.744-0.425%2C1.248-1.088%2C1.439-1.786c0.148-0.552%2C0.104-1.126-0.176-1.62l2.573-1.473%20c0.573%2C0.287%2C2.299%2C1.292%2C2.299%2C1.292s3.602%2C1.445%2C4.241%2C1.812c0.773%2C0.191%2C0.566-0.151%2C0.566-0.151L12.285%2C9.711z%20M5.571%2C6.482%20C5.279%2C6.993%2C4.425%2C7.076%2C3.705%2C6.664C3.282%2C6.424%2C2.966%2C6.039%2C2.856%2C5.64C2.81%2C5.464%2C2.778%2C5.203%2C2.917%2C4.963%20c0.291-0.51%2C1.146-0.593%2C1.866-0.182C5.21%2C5.027%2C5.521%2C5.4%2C5.632%2C5.807C5.679%2C5.98%2C5.708%2C6.242%2C5.571%2C6.482z%20M5.632%2C13.159%20c-0.111%2C0.406-0.422%2C0.778-0.848%2C1.025c-0.719%2C0.409-1.576%2C0.327-1.867-0.184c-0.137-0.239-0.106-0.499-0.06-0.676%20c0.108-0.398%2C0.426-0.781%2C0.847-1.022c0.72-0.412%2C1.574-0.329%2C1.866%2C0.181C5.708%2C12.723%2C5.679%2C12.983%2C5.632%2C13.159z%20M16.181%2C5.139%20c-0.448%2C0.258-4.435%2C1.9-4.435%2C1.9s-1.556%2C0.855-2.104%2C1.13l0.937%2C0.843l2.057-0.229l4.11-3.638%20C16.745%2C5.146%2C17.013%2C4.664%2C16.181%2C5.139z%22%2F%3E%3C%2Fg%3E%3C%2Fg%3E%3C%2Fsvg%3E%20');\n}\n.x6-widget-handle-unlink:hover {\n  background-image: url('data:image/svg+xml;charset=utf8,%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22utf-8%22%3F%3E%3C!DOCTYPE%20svg%20PUBLIC%20%22-%2F%2FW3C%2F%2FDTD%20SVG%201.1%2F%2FEN%22%20%22http%3A%2F%2Fwww.w3.org%2FGraphics%2FSVG%2F1.1%2FDTD%2Fsvg11.dtd%22%3E%3Csvg%20version%3D%221.1%22%20id%3D%22Layer_1%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%20x%3D%220px%22%20y%3D%220px%22%20width%3D%2218.75px%22%20height%3D%2218.75px%22%20viewBox%3D%220%200%2018.75%2018.75%22%20enable-background%3D%22new%200%200%2018.75%2018.75%22%20xml%3Aspace%3D%22preserve%22%3E%3Cg%3E%3Cg%3E%3Cpath%20fill%3D%22%23FD6EB6%22%20d%3D%22M12.285%2C9.711l-2.104-0.302L9.243%2C8.568L6.669%2C7.095C6.948%2C6.6%2C6.995%2C6.026%2C6.845%2C5.474%20c-0.191-0.698-0.695-1.36-1.438-1.786C4.068%2C2.922%2C2.464%2C3.214%2C1.82%2C4.338C1.536%2C4.836%2C1.489%2C5.414%2C1.64%2C5.97%20c0.189%2C0.698%2C0.694%2C1.36%2C1.438%2C1.787c0.328%2C0.187%2C0.67%2C0.31%2C1.01%2C0.372c0.002%2C0%2C0.006%2C0.002%2C0.008%2C0.004%20c0.027%2C0.004%2C0.057%2C0.009%2C0.088%2C0.011c2.12%2C0.316%2C3.203%2C0.915%2C3.73%2C1.337c-0.527%2C0.424-1.61%2C1.021-3.731%2C1.339%20c-0.029%2C0.003-0.058%2C0.007-0.087%2C0.012c-0.002%2C0.002-0.004%2C0.002-0.007%2C0.003c-0.341%2C0.062-0.684%2C0.187-1.013%2C0.374%20c-0.74%2C0.425-1.246%2C1.089-1.437%2C1.787c-0.149%2C0.555-0.105%2C1.133%2C0.181%2C1.632c0.011%2C0.018%2C0.021%2C0.033%2C0.033%2C0.049l0.883%2C0.783%20c0.765%2C0.366%2C1.775%2C0.328%2C2.67-0.184c0.744-0.425%2C1.248-1.088%2C1.439-1.786c0.148-0.552%2C0.104-1.126-0.176-1.62l2.573-1.473%20c0.573%2C0.287%2C2.299%2C1.292%2C2.299%2C1.292s3.602%2C1.445%2C4.241%2C1.812c0.773%2C0.191%2C0.566-0.151%2C0.566-0.151L12.285%2C9.711z%20M5.571%2C6.482%20C5.279%2C6.993%2C4.425%2C7.076%2C3.705%2C6.664C3.282%2C6.424%2C2.966%2C6.039%2C2.856%2C5.64C2.81%2C5.464%2C2.778%2C5.203%2C2.917%2C4.963%20c0.291-0.51%2C1.146-0.593%2C1.866-0.182C5.21%2C5.027%2C5.521%2C5.4%2C5.632%2C5.807C5.679%2C5.98%2C5.708%2C6.242%2C5.571%2C6.482z%20M5.632%2C13.159%20c-0.111%2C0.406-0.422%2C0.778-0.848%2C1.025c-0.719%2C0.409-1.576%2C0.327-1.867-0.184c-0.137-0.239-0.106-0.499-0.06-0.676%20c0.108-0.398%2C0.426-0.781%2C0.847-1.022c0.72-0.412%2C1.574-0.329%2C1.866%2C0.181C5.708%2C12.723%2C5.679%2C12.983%2C5.632%2C13.159z%20M16.181%2C5.139%20c-0.448%2C0.258-4.435%2C1.9-4.435%2C1.9s-1.556%2C0.855-2.104%2C1.13l0.937%2C0.843l2.057-0.229l4.11-3.638%20C16.745%2C5.146%2C17.013%2C4.664%2C16.181%2C5.139z%22%2F%3E%3C%2Fg%3E%3C%2Fg%3E%3C%2Fsvg%3E%20');\n}\n.x6-widget-handle-direction {\n  background-image: url(\"data:image/svg+xml;charset=UTF-8,%3C%3Fxml%20version%3D%221.0%22%20%3F%3E%3C!DOCTYPE%20svg%20%20PUBLIC%20'-%2F%2FW3C%2F%2FDTD%20SVG%201.1%2F%2FEN'%20%20'http%3A%2F%2Fwww.w3.org%2FGraphics%2FSVG%2F1.1%2FDTD%2Fsvg11.dtd'%3E%3Csvg%20id%3D%22Layer_1%22%20style%3D%22enable-background%3Anew%200%200%20512%20512%3B%22%20version%3D%221.1%22%20viewBox%3D%220%200%20512%20512%22%20xml%3Aspace%3D%22preserve%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%3E%3Cstyle%20type%3D%22text%2Fcss%22%3E%0A%09.st0%7Bfill%3A%236A6C8A%3Bstroke%3A%236A6C8A%3Bstroke-width%3A30%7D%0A%09.dot%7Bfill%3A%236A6C8A%3B%7D%0A%3C%2Fstyle%3E%3Cg%3E%3Cg%20id%3D%22XMLID_475_%22%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M133.1%2C277.1c1.8%2C0%2C3.7-0.6%2C5.4-1.7c4.1-3%2C5-8.7%2C2-12.8c-3-4.1-8.7-5-12.8-2c0%2C0%2C0%2C0%2C0%2C0%20%20%20%20%20c-4.1%2C3-5%2C8.7-2%2C12.8C127.5%2C275.8%2C130.3%2C277.1%2C133.1%2C277.1z%22%20id%3D%22XMLID_489_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M138.5%2C359.6c-4.1-3-9.8-2.1-12.8%2C2c-3%2C4.1-2.1%2C9.8%2C2%2C12.8c1.6%2C1.2%2C3.5%2C1.7%2C5.4%2C1.7%20%20%20%20%20c2.8%2C0%2C5.6-1.3%2C7.4-3.7C143.5%2C368.3%2C142.6%2C362.6%2C138.5%2C359.6z%22%20id%3D%22XMLID_726_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M108.1%2C327.7c-4.8%2C1.6-7.4%2C6.7-5.9%2C11.5c1.3%2C3.9%2C4.8%2C6.3%2C8.7%2C6.3c0.9%2C0%2C1.9-0.1%2C2.8-0.4%20%20%20%20%20c4.8-1.6%2C7.4-6.7%2C5.9-11.5C118%2C328.8%2C112.9%2C326.2%2C108.1%2C327.7z%22%20id%3D%22XMLID_776_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M108.1%2C307.3c0.9%2C0.3%2C1.9%2C0.4%2C2.8%2C0.4c3.8%2C0%2C7.4-2.4%2C8.7-6.3c1.6-4.8-1.1-9.9-5.9-11.5%20%20%20%20%20c-4.8-1.6-9.9%2C1.1-11.5%2C5.9C100.7%2C300.6%2C103.3%2C305.7%2C108.1%2C307.3z%22%20id%3D%22XMLID_777_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M169.2%2C265.4c2.4%2C0%2C4.7-1%2C6.5-2.6c1.7-1.7%2C2.7-4.1%2C2.7-6.5c0-2.4-1-4.8-2.7-6.5%20%20%20%20%20c-1.7-1.7-4.1-2.7-6.5-2.7s-4.7%2C1-6.5%2C2.7c-1.7%2C1.7-2.7%2C4-2.7%2C6.5c0%2C2.4%2C1%2C4.7%2C2.7%2C6.5C164.4%2C264.4%2C166.8%2C265.4%2C169.2%2C265.4z%22%20id%3D%22XMLID_797_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M247.7%2C256.3c0-5-4.1-9.1-9.1-9.1c-5%2C0-9.1%2C4.1-9.1%2C9.1c0%2C5%2C4.1%2C9.1%2C9.1%2C9.1%20%20%20%20%20C243.7%2C265.4%2C247.7%2C261.3%2C247.7%2C256.3z%22%20id%3D%22XMLID_798_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M213%2C256.3c0-5-4.1-9.1-9.1-9.1c-5%2C0-9.1%2C4.1-9.1%2C9.1c0%2C5%2C4.1%2C9.1%2C9.1%2C9.1%20%20%20%20%20C208.9%2C265.4%2C213%2C261.3%2C213%2C256.3z%22%20id%3D%22XMLID_799_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M317.2%2C256.3c0-5-4.1-9.1-9.1-9.1c-5%2C0-9.1%2C4.1-9.1%2C9.1c0%2C5%2C4.1%2C9.1%2C9.1%2C9.1%20%20%20%20%20C313.1%2C265.4%2C317.2%2C261.3%2C317.2%2C256.3z%22%20id%3D%22XMLID_800_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M282.5%2C256.3c0-5-4.1-9.1-9.1-9.1s-9.1%2C4.1-9.1%2C9.1c0%2C5%2C4.1%2C9.1%2C9.1%2C9.1%20%20%20%20%20S282.5%2C261.3%2C282.5%2C256.3z%22%20id%3D%22XMLID_801_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M401.1%2C185.2c0.9%2C0%2C1.9-0.1%2C2.8-0.5c4.8-1.6%2C7.4-6.7%2C5.9-11.5c-1.6-4.8-6.7-7.4-11.5-5.8%20%20%20%20%20c-4.8%2C1.6-7.4%2C6.7-5.8%2C11.5C393.6%2C182.8%2C397.2%2C185.2%2C401.1%2C185.2z%22%20id%3D%22XMLID_802_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M403.9%2C205.2c-4.8-1.6-9.9%2C1-11.5%2C5.9l0%2C0c-1.6%2C4.8%2C1.1%2C9.9%2C5.9%2C11.5%20%20%20%20%20c0.9%2C0.3%2C1.9%2C0.5%2C2.8%2C0.5c3.9%2C0%2C7.4-2.5%2C8.7-6.3c0%2C0%2C0%2C0%2C0%2C0C411.3%2C211.9%2C408.7%2C206.8%2C403.9%2C205.2z%22%20id%3D%22XMLID_803_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M373.5%2C237.2L373.5%2C237.2c-4.1%2C3-5%2C8.7-2%2C12.8c1.8%2C2.4%2C4.6%2C3.7%2C7.4%2C3.7%20%20%20%20%20c1.8%2C0%2C3.7-0.6%2C5.4-1.8c4.1-3%2C4.9-8.7%2C2-12.8C383.3%2C235.1%2C377.6%2C234.2%2C373.5%2C237.2z%22%20id%3D%22XMLID_804_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M373.5%2C152.9c1.6%2C1.2%2C3.5%2C1.8%2C5.4%2C1.8c2.8%2C0%2C5.6-1.3%2C7.4-3.8c3-4.1%2C2.1-9.8-2-12.7%20%20%20%20%20c-4.1-3-9.8-2.1-12.7%2C2C368.5%2C144.2%2C369.4%2C149.9%2C373.5%2C152.9z%22%20id%3D%22XMLID_805_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M342.8%2C247.1c-2.4%2C0-4.8%2C1-6.5%2C2.7c-1.7%2C1.7-2.7%2C4-2.7%2C6.5c0%2C2.4%2C1%2C4.7%2C2.7%2C6.4%20%20%20%20%20c1.7%2C1.7%2C4%2C2.7%2C6.5%2C2.7c2.4%2C0%2C4.7-1%2C6.5-2.7c1.7-1.7%2C2.7-4%2C2.7-6.4c0-2.4-1-4.8-2.7-6.5C347.6%2C248.1%2C345.2%2C247.1%2C342.8%2C247.1z%22%20id%3D%22XMLID_806_%22%2F%3E%0A%3Cpath%20class%3D%22st0%22%20d%3D%22M342.8%2C124.7H206.6l36.4-36.4c3.6-3.6%2C3.6-9.3%2C0-12.9c-3.6-3.6-9.3-3.6-12.9%2C0l-51.5%2C51.5%20%20%20%20%20c-1.9%2C1.9-2.8%2C4.4-2.7%2C6.9c-0.1%2C2.5%2C0.7%2C5%2C2.7%2C6.9l51.5%2C51.5c1.8%2C1.8%2C4.1%2C2.7%2C6.5%2C2.7c2.3%2C0%2C4.7-0.9%2C6.5-2.7%20%20%20%20%20c3.6-3.6%2C3.6-9.3%2C0-12.9l-36.4-36.4h136.1c0%2C0%2C0.1%2C0%2C0.1%2C0c0.6%2C0%2C1.2-0.1%2C1.8-0.2c0.2%2C0%2C0.4-0.1%2C0.6-0.1c0.1%2C0%2C0.2%2C0%2C0.3-0.1%20%20%20%20%20c3.2-1%2C5.6-3.6%2C6.3-6.9c0.1-0.6%2C0.2-1.2%2C0.2-1.8c0-0.6-0.1-1.2-0.2-1.8C351%2C127.8%2C347.3%2C124.7%2C342.8%2C124.7z%22%20id%3D%22XMLID_807_%22%2F%3E%0A%3Cpath%20class%3D%22st0%22%20d%3D%22M322.1%2C371.3l-51.5-51.5c-3.6-3.6-9.3-3.6-12.9%2C0c-3.6%2C3.6-3.6%2C9.3%2C0%2C12.9l36.9%2C36.9H169.2%20%20%20%20%20c-2.8%2C0-5.4%2C1.3-7%2C3.3c-0.1%2C0.1-0.2%2C0.2-0.3%2C0.4c-0.1%2C0.1-0.2%2C0.2-0.2%2C0.3c-0.1%2C0.1-0.1%2C0.2-0.2%2C0.4c-0.1%2C0.1-0.2%2C0.3-0.2%2C0.4%20%20%20%20%20c0%2C0.1-0.1%2C0.2-0.1%2C0.2c-0.1%2C0.2-0.2%2C0.4-0.3%2C0.6c0%2C0%2C0%2C0%2C0%2C0.1c-0.4%2C1.1-0.7%2C2.2-0.7%2C3.4c0%2C1.5%2C0.4%2C2.9%2C1%2C4.2c0%2C0%2C0%2C0.1%2C0.1%2C0.1%20%20%20%20%20c0.1%2C0.1%2C0.1%2C0.2%2C0.2%2C0.3c0.4%2C0.7%2C0.9%2C1.3%2C1.4%2C1.8c0.4%2C0.4%2C0.7%2C0.7%2C1.2%2C1c0.1%2C0.1%2C0.1%2C0.1%2C0.2%2C0.2c0%2C0%2C0.1%2C0%2C0.1%2C0.1%20%20%20%20%20c1.4%2C0.9%2C3.1%2C1.5%2C5%2C1.5h124.4l-36%2C36c-3.6%2C3.6-3.6%2C9.3%2C0%2C12.9c1.8%2C1.8%2C4.1%2C2.7%2C6.5%2C2.7c2.3%2C0%2C4.7-0.9%2C6.5-2.7l51.5-51.5%20%20%20%20%20c1.9-1.9%2C2.8-4.4%2C2.7-6.9C324.8%2C375.7%2C324%2C373.2%2C322.1%2C371.3z%22%20id%3D%22XMLID_808_%22%2F%3E%3C%2Fg%3E%3C%2Fg%3E%3C%2Fsvg%3E\");\n}\n.x6-widget-handle-direction:hover {\n  background-image: url(\"data:image/svg+xml;charset=UTF-8,%3C%3Fxml%20version%3D%221.0%22%20%3F%3E%3C!DOCTYPE%20svg%20%20PUBLIC%20'-%2F%2FW3C%2F%2FDTD%20SVG%201.1%2F%2FEN'%20%20'http%3A%2F%2Fwww.w3.org%2FGraphics%2FSVG%2F1.1%2FDTD%2Fsvg11.dtd'%3E%3Csvg%20id%3D%22Layer_1%22%20style%3D%22enable-background%3Anew%200%200%20512%20512%3B%22%20version%3D%221.1%22%20viewBox%3D%220%200%20512%20512%22%20xml%3Aspace%3D%22preserve%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%3E%3Cstyle%20type%3D%22text%2Fcss%22%3E%0A%09.st0%7Bfill%3A%23FD6EB6%3Bstroke%3A%23FD6EB6%3Bstroke-width%3A30%7D%0A%09.dot%7Bfill%3A%23FD6EB6%3B%7D%0A%3C%2Fstyle%3E%3Cg%3E%3Cg%20id%3D%22XMLID_475_%22%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M133.1%2C277.1c1.8%2C0%2C3.7-0.6%2C5.4-1.7c4.1-3%2C5-8.7%2C2-12.8c-3-4.1-8.7-5-12.8-2c0%2C0%2C0%2C0%2C0%2C0%20%20%20%20%20c-4.1%2C3-5%2C8.7-2%2C12.8C127.5%2C275.8%2C130.3%2C277.1%2C133.1%2C277.1z%22%20id%3D%22XMLID_489_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M138.5%2C359.6c-4.1-3-9.8-2.1-12.8%2C2c-3%2C4.1-2.1%2C9.8%2C2%2C12.8c1.6%2C1.2%2C3.5%2C1.7%2C5.4%2C1.7%20%20%20%20%20c2.8%2C0%2C5.6-1.3%2C7.4-3.7C143.5%2C368.3%2C142.6%2C362.6%2C138.5%2C359.6z%22%20id%3D%22XMLID_726_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M108.1%2C327.7c-4.8%2C1.6-7.4%2C6.7-5.9%2C11.5c1.3%2C3.9%2C4.8%2C6.3%2C8.7%2C6.3c0.9%2C0%2C1.9-0.1%2C2.8-0.4%20%20%20%20%20c4.8-1.6%2C7.4-6.7%2C5.9-11.5C118%2C328.8%2C112.9%2C326.2%2C108.1%2C327.7z%22%20id%3D%22XMLID_776_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M108.1%2C307.3c0.9%2C0.3%2C1.9%2C0.4%2C2.8%2C0.4c3.8%2C0%2C7.4-2.4%2C8.7-6.3c1.6-4.8-1.1-9.9-5.9-11.5%20%20%20%20%20c-4.8-1.6-9.9%2C1.1-11.5%2C5.9C100.7%2C300.6%2C103.3%2C305.7%2C108.1%2C307.3z%22%20id%3D%22XMLID_777_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M169.2%2C265.4c2.4%2C0%2C4.7-1%2C6.5-2.6c1.7-1.7%2C2.7-4.1%2C2.7-6.5c0-2.4-1-4.8-2.7-6.5%20%20%20%20%20c-1.7-1.7-4.1-2.7-6.5-2.7s-4.7%2C1-6.5%2C2.7c-1.7%2C1.7-2.7%2C4-2.7%2C6.5c0%2C2.4%2C1%2C4.7%2C2.7%2C6.5C164.4%2C264.4%2C166.8%2C265.4%2C169.2%2C265.4z%22%20id%3D%22XMLID_797_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M247.7%2C256.3c0-5-4.1-9.1-9.1-9.1c-5%2C0-9.1%2C4.1-9.1%2C9.1c0%2C5%2C4.1%2C9.1%2C9.1%2C9.1%20%20%20%20%20C243.7%2C265.4%2C247.7%2C261.3%2C247.7%2C256.3z%22%20id%3D%22XMLID_798_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M213%2C256.3c0-5-4.1-9.1-9.1-9.1c-5%2C0-9.1%2C4.1-9.1%2C9.1c0%2C5%2C4.1%2C9.1%2C9.1%2C9.1%20%20%20%20%20C208.9%2C265.4%2C213%2C261.3%2C213%2C256.3z%22%20id%3D%22XMLID_799_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M317.2%2C256.3c0-5-4.1-9.1-9.1-9.1c-5%2C0-9.1%2C4.1-9.1%2C9.1c0%2C5%2C4.1%2C9.1%2C9.1%2C9.1%20%20%20%20%20C313.1%2C265.4%2C317.2%2C261.3%2C317.2%2C256.3z%22%20id%3D%22XMLID_800_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M282.5%2C256.3c0-5-4.1-9.1-9.1-9.1s-9.1%2C4.1-9.1%2C9.1c0%2C5%2C4.1%2C9.1%2C9.1%2C9.1%20%20%20%20%20S282.5%2C261.3%2C282.5%2C256.3z%22%20id%3D%22XMLID_801_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M401.1%2C185.2c0.9%2C0%2C1.9-0.1%2C2.8-0.5c4.8-1.6%2C7.4-6.7%2C5.9-11.5c-1.6-4.8-6.7-7.4-11.5-5.8%20%20%20%20%20c-4.8%2C1.6-7.4%2C6.7-5.8%2C11.5C393.6%2C182.8%2C397.2%2C185.2%2C401.1%2C185.2z%22%20id%3D%22XMLID_802_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M403.9%2C205.2c-4.8-1.6-9.9%2C1-11.5%2C5.9l0%2C0c-1.6%2C4.8%2C1.1%2C9.9%2C5.9%2C11.5%20%20%20%20%20c0.9%2C0.3%2C1.9%2C0.5%2C2.8%2C0.5c3.9%2C0%2C7.4-2.5%2C8.7-6.3c0%2C0%2C0%2C0%2C0%2C0C411.3%2C211.9%2C408.7%2C206.8%2C403.9%2C205.2z%22%20id%3D%22XMLID_803_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M373.5%2C237.2L373.5%2C237.2c-4.1%2C3-5%2C8.7-2%2C12.8c1.8%2C2.4%2C4.6%2C3.7%2C7.4%2C3.7%20%20%20%20%20c1.8%2C0%2C3.7-0.6%2C5.4-1.8c4.1-3%2C4.9-8.7%2C2-12.8C383.3%2C235.1%2C377.6%2C234.2%2C373.5%2C237.2z%22%20id%3D%22XMLID_804_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M373.5%2C152.9c1.6%2C1.2%2C3.5%2C1.8%2C5.4%2C1.8c2.8%2C0%2C5.6-1.3%2C7.4-3.8c3-4.1%2C2.1-9.8-2-12.7%20%20%20%20%20c-4.1-3-9.8-2.1-12.7%2C2C368.5%2C144.2%2C369.4%2C149.9%2C373.5%2C152.9z%22%20id%3D%22XMLID_805_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M342.8%2C247.1c-2.4%2C0-4.8%2C1-6.5%2C2.7c-1.7%2C1.7-2.7%2C4-2.7%2C6.5c0%2C2.4%2C1%2C4.7%2C2.7%2C6.4%20%20%20%20%20c1.7%2C1.7%2C4%2C2.7%2C6.5%2C2.7c2.4%2C0%2C4.7-1%2C6.5-2.7c1.7-1.7%2C2.7-4%2C2.7-6.4c0-2.4-1-4.8-2.7-6.5C347.6%2C248.1%2C345.2%2C247.1%2C342.8%2C247.1z%22%20id%3D%22XMLID_806_%22%2F%3E%0A%3Cpath%20class%3D%22st0%22%20d%3D%22M342.8%2C124.7H206.6l36.4-36.4c3.6-3.6%2C3.6-9.3%2C0-12.9c-3.6-3.6-9.3-3.6-12.9%2C0l-51.5%2C51.5%20%20%20%20%20c-1.9%2C1.9-2.8%2C4.4-2.7%2C6.9c-0.1%2C2.5%2C0.7%2C5%2C2.7%2C6.9l51.5%2C51.5c1.8%2C1.8%2C4.1%2C2.7%2C6.5%2C2.7c2.3%2C0%2C4.7-0.9%2C6.5-2.7%20%20%20%20%20c3.6-3.6%2C3.6-9.3%2C0-12.9l-36.4-36.4h136.1c0%2C0%2C0.1%2C0%2C0.1%2C0c0.6%2C0%2C1.2-0.1%2C1.8-0.2c0.2%2C0%2C0.4-0.1%2C0.6-0.1c0.1%2C0%2C0.2%2C0%2C0.3-0.1%20%20%20%20%20c3.2-1%2C5.6-3.6%2C6.3-6.9c0.1-0.6%2C0.2-1.2%2C0.2-1.8c0-0.6-0.1-1.2-0.2-1.8C351%2C127.8%2C347.3%2C124.7%2C342.8%2C124.7z%22%20id%3D%22XMLID_807_%22%2F%3E%0A%3Cpath%20class%3D%22st0%22%20d%3D%22M322.1%2C371.3l-51.5-51.5c-3.6-3.6-9.3-3.6-12.9%2C0c-3.6%2C3.6-3.6%2C9.3%2C0%2C12.9l36.9%2C36.9H169.2%20%20%20%20%20c-2.8%2C0-5.4%2C1.3-7%2C3.3c-0.1%2C0.1-0.2%2C0.2-0.3%2C0.4c-0.1%2C0.1-0.2%2C0.2-0.2%2C0.3c-0.1%2C0.1-0.1%2C0.2-0.2%2C0.4c-0.1%2C0.1-0.2%2C0.3-0.2%2C0.4%20%20%20%20%20c0%2C0.1-0.1%2C0.2-0.1%2C0.2c-0.1%2C0.2-0.2%2C0.4-0.3%2C0.6c0%2C0%2C0%2C0%2C0%2C0.1c-0.4%2C1.1-0.7%2C2.2-0.7%2C3.4c0%2C1.5%2C0.4%2C2.9%2C1%2C4.2c0%2C0%2C0%2C0.1%2C0.1%2C0.1%20%20%20%20%20c0.1%2C0.1%2C0.1%2C0.2%2C0.2%2C0.3c0.4%2C0.7%2C0.9%2C1.3%2C1.4%2C1.8c0.4%2C0.4%2C0.7%2C0.7%2C1.2%2C1c0.1%2C0.1%2C0.1%2C0.1%2C0.2%2C0.2c0%2C0%2C0.1%2C0%2C0.1%2C0.1%20%20%20%20%20c1.4%2C0.9%2C3.1%2C1.5%2C5%2C1.5h124.4l-36%2C36c-3.6%2C3.6-3.6%2C9.3%2C0%2C12.9c1.8%2C1.8%2C4.1%2C2.7%2C6.5%2C2.7c2.3%2C0%2C4.7-0.9%2C6.5-2.7l51.5-51.5%20%20%20%20%20c1.9-1.9%2C2.8-4.4%2C2.7-6.9C324.8%2C375.7%2C324%2C373.2%2C322.1%2C371.3z%22%20id%3D%22XMLID_808_%22%2F%3E%3C%2Fg%3E%3C%2Fg%3E%3C%2Fsvg%3E\");\n}\n.x6-widget-handle-surround .x6-widget-handle-animate .x6-widget-handle {\n  transition: background-size 80ms, width 80ms, height 80ms, top 150ms, left 150ms, bottom 150ms, right 150ms;\n}\n.x6-widget-handle-surround .x6-widget-handle-pos-se {\n  right: -25px;\n  bottom: -25px;\n}\n.x6-widget-handle-surround .x6-widget-handle-pos-nw {\n  top: -21px;\n  left: -25px;\n}\n.x6-widget-handle-surround .x6-widget-handle-pos-n {\n  top: -22px;\n  left: 50%;\n  margin-left: -10px;\n}\n.x6-widget-handle-surround .x6-widget-handle-pos-e {\n  top: -webkit-calc(40%);\n  top: calc(50% - 10px);\n  right: -25px;\n}\n.x6-widget-handle-surround .x6-widget-handle-pos-ne {\n  top: -21px;\n  right: -25px;\n}\n.x6-widget-handle-surround .x6-widget-handle-pos-w {\n  top: 50%;\n  left: -25px;\n  margin-top: -10px;\n}\n.x6-widget-handle-surround .x6-widget-handle-pos-sw {\n  bottom: -25px;\n  left: -25px;\n}\n.x6-widget-handle-surround .x6-widget-handle-pos-s {\n  bottom: -24px;\n  left: 50%;\n  margin-left: -10px;\n}\n.x6-widget-handle-surround .x6-widget-handle-small .x6-widget-handle {\n  width: 15px;\n  height: 15px;\n  font-size: 15px;\n  background-size: 15px 15px;\n}\n.x6-widget-handle-surround .x6-widget-handle-small .x6-widget-handle-pos-se {\n  right: -19px;\n  bottom: -19px;\n}\n.x6-widget-handle-surround .x6-widget-handle-small .x6-widget-handle-pos-nw {\n  top: -19px;\n  left: -19px;\n}\n.x6-widget-handle-surround .x6-widget-handle-small .x6-widget-handle-pos-n {\n  top: -19px;\n  margin-left: -7.5px;\n}\n.x6-widget-handle-surround .x6-widget-handle-small .x6-widget-handle-pos-e {\n  top: -webkit-calc(42%);\n  top: calc(50% - 8px);\n  right: -19px;\n}\n.x6-widget-handle-surround .x6-widget-handle-small .x6-widget-handle-pos-ne {\n  top: -19px;\n  right: -19px;\n}\n.x6-widget-handle-surround .x6-widget-handle-small .x6-widget-handle-pos-w {\n  left: -19px;\n  margin-top: -8px;\n}\n.x6-widget-handle-surround .x6-widget-handle-small .x6-widget-handle-pos-sw {\n  bottom: -19px;\n  left: -19px;\n}\n.x6-widget-handle-surround .x6-widget-handle-small .x6-widget-handle-pos-s {\n  bottom: -19px;\n  margin-left: -7.5px;\n}\n.x6-widget-handle-surround .x6-widget-handle-tiny .x6-widget-handle {\n  width: 10px;\n  height: 10px;\n  font-size: 10px;\n  background-size: 10px 10px;\n}\n.x6-widget-handle-surround .x6-widget-handle-tiny .x6-widget-handle-pos-se {\n  right: -15px;\n  bottom: -13px;\n}\n.x6-widget-handle-surround .x6-widget-handle-tiny .x6-widget-handle-pos-nw {\n  top: -13px;\n  left: -15px;\n}\n.x6-widget-handle-surround .x6-widget-handle-tiny .x6-widget-handle-pos-n {\n  top: -13px;\n  margin-left: -5px;\n}\n.x6-widget-handle-surround .x6-widget-handle-tiny .x6-widget-handle-pos-e {\n  top: -webkit-calc(45%);\n  top: calc(50% - 5px);\n  right: -15px;\n}\n.x6-widget-handle-surround .x6-widget-handle-tiny .x6-widget-handle-pos-ne {\n  top: -13px;\n  right: -15px;\n}\n.x6-widget-handle-surround .x6-widget-handle-tiny .x6-widget-handle-pos-w {\n  left: -15px;\n  margin-top: -5px;\n}\n.x6-widget-handle-surround .x6-widget-handle-tiny .x6-widget-handle-pos-sw {\n  bottom: -13px;\n  left: -15px;\n}\n.x6-widget-handle-surround .x6-widget-handle-tiny .x6-widget-handle-pos-s {\n  bottom: -13px;\n  margin-left: -5px;\n}\n.x6-widget-handle-toolbar {\n  position: absolute;\n  top: -50px;\n  display: table-row;\n  padding: 7px 5px;\n}\n.x6-widget-handle-toolbar::after {\n  position: absolute;\n  top: 100%;\n  left: 10px;\n  width: 0;\n  height: 0;\n  margin-top: 4px;\n  border-right: 10px solid transparent;\n  border-left: 10px solid transparent;\n  content: '';\n}\n.x6-widget-handle-toolbar .x6-widget-handle {\n  position: relative;\n  display: table-cell;\n  min-width: 20px;\n  margin: 0 2px;\n  background-position: 3px 3px;\n  background-size: 16px 16px;\n}\n.x6-widget-handle-toolbar .x6-widget-handle::after {\n  position: absolute;\n  bottom: -11px;\n  width: 100%;\n  content: '';\n}\n.x6-widget-handle-pie {\n  position: absolute;\n  top: -webkit-calc(0%);\n  top: calc(50% - 50px);\n  right: -50px;\n  z-index: 1;\n  display: none;\n  width: 100px;\n  height: 100px;\n  margin: -2px -2px 0 0;\n  border-radius: 50%;\n  cursor: default;\n  pointer-events: visiblePainted;\n}\n.x6-widget-handle-pie .x6-widget-handle {\n  width: 1px;\n  height: auto;\n  pointer-events: visiblePainted;\n}\n.x6-widget-handle-pie-slice-svg {\n  width: 100%;\n  height: 100%;\n  overflow: visible !important;\n}\n.x6-widget-handle-pie-slice-img,\n.x6-widget-handle-pie-slice-txt {\n  display: none;\n  pointer-events: none;\n}\n.x6-widget-handle-pie[data-pie-toggle-position='e'] {\n  top: calc(50% - 50px);\n  right: -50px;\n  left: auto;\n}\n.x6-widget-handle-pie[data-pie-toggle-position='w'] {\n  top: calc(50% - 50px);\n  right: auto;\n  left: -52px;\n}\n.x6-widget-handle-pie[data-pie-toggle-position='n'] {\n  top: -50px;\n  right: auto;\n  bottom: auto;\n  left: calc(50% - 52px);\n}\n.x6-widget-handle-pie[data-pie-toggle-position='s'] {\n  top: auto;\n  right: auto;\n  bottom: -52px;\n  left: calc(50% - 52px);\n}\n.x6-widget-handle-pie-opened {\n  display: block;\n  animation: halo-pie-visibility 0.1s, halo-pie-opening 0.1s;\n  animation-timing-function: step-end, ease;\n  animation-delay: 0s, 0.1s;\n}\n.x6-widget-handle-pie-toggle {\n  position: absolute;\n  top: -webkit-calc(35%);\n  top: calc(50% - 15px);\n  right: -15px;\n  z-index: 2;\n  display: block;\n  box-sizing: border-box;\n  width: 30px;\n  height: 30px;\n  background-repeat: no-repeat;\n  background-position: center;\n  background-size: 20px 20px;\n  border-radius: 50%;\n  cursor: pointer;\n  user-select: none;\n  pointer-events: visiblePainted;\n  -webkit-user-drag: none;\n  user-drag: none;\n  /* stylelint-disable-line */\n}\n.x6-widget-handle-pie-toggle-pos-e {\n  top: -webkit-calc(35%);\n  top: calc(50% - 15px);\n  right: -15px;\n  bottom: auto;\n  left: auto;\n}\n.x6-widget-handle-pie-toggle-pos-w {\n  top: -webkit-calc(35%);\n  top: calc(50% - 15px);\n  right: auto;\n  bottom: auto;\n  left: -15px;\n}\n.x6-widget-handle-pie-toggle-pos-n {\n  top: -15px;\n  right: auto;\n  bottom: auto;\n  left: -webkit-calc(35%);\n  left: calc(50% - 15px);\n}\n.x6-widget-handle-pie-toggle-pos-s {\n  top: auto;\n  right: auto;\n  bottom: -15px;\n  left: -webkit-calc(35%);\n  left: calc(50% - 15px);\n}\n.x6-widget-handle-pie-toggle-opened {\n  transition: 0.1s background-image;\n}\n.x6-widget-handle-toolbar {\n  position: static;\n  display: inline-block;\n  margin-top: -50px;\n  margin-left: 45px;\n  white-space: nowrap;\n  vertical-align: top;\n  background-color: #f5f5f5;\n  border-bottom: 3px solid #333;\n  border-radius: 5px;\n  box-shadow: 0 1px 2px #222;\n}\n.x6-widget-handle-toolbar::after {\n  top: -12px;\n  left: 55px;\n  margin-top: 0;\n  border-top: 6px solid #333;\n  border-right: 10px solid transparent;\n  border-left: 10px solid transparent;\n}\n.x6-widget-handle-toolbar .x6-widget-handle {\n  display: inline-block;\n  vertical-align: top;\n}\n.x6-widget-handle-toolbar .x6-widget-handle:hover::after {\n  border-bottom: 4px solid #fc6cb8;\n}\n.x6-widget-handle-toolbar .x6-widget-handle-rotate {\n  position: absolute;\n  top: 100%;\n  right: 100%;\n  margin-top: 3px;\n  margin-right: 6px;\n}\n.x6-widget-handle-toolbar .x6-widget-handle-remove:hover::after,\n.x6-widget-handle-toolbar .x6-widget-handle-rotate:hover::after {\n  border-bottom: none;\n}\n.x6-widget-handle-toolbar .x6-widget-handle + .x6-widget-handle {\n  margin-left: 4px;\n}\n.x6-widget-handle-pie {\n  box-sizing: content-box !important;\n  background-color: #f5f5f5;\n  border: 2px solid #404040;\n}\n.x6-widget-handle-pie-slice {\n  fill: transparent;\n  stroke: #e9e9e9;\n  stroke-width: 1;\n}\n.x6-widget-handle-pie-slice:hover {\n  fill: #fff;\n}\n.x6-widget-handle-pie-slice-img {\n  display: block;\n}\n.x6-widget-handle-selected .x6-widget-handle-pie-slice {\n  fill: #fff;\n}\n.x6-widget-handle-pie-toggle {\n  background-color: #f6f6f6;\n  background-image: url('data:image/svg+xml;charset=utf8,%3C%3Fxml%20version%3D%221.0%22%20%3F%3E%3C!DOCTYPE%20svg%20PUBLIC%20%22-%2F%2FW3C%2F%2FDTD%20SVG%201.1%2F%2FEN%22%20%22http%3A%2F%2Fwww.w3.org%2FGraphics%2FSVG%2F1.1%2FDTD%2Fsvg11.dtd%22%3E%3Csvg%20height%3D%2216px%22%20id%3D%22Layer_1%22%20style%3D%22enable-background%3Anew%200%200%2016%2016%3B%22%20version%3D%221.1%22%20viewBox%3D%220%200%2016%2016%22%20width%3D%2216px%22%20xml%3Aspace%3D%22preserve%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%3E%3Cpath%20fill%3D%22%236A6C8A%22%20d%3D%22M15%2C6h-5V1c0-0.55-0.45-1-1-1H7C6.45%2C0%2C6%2C0.45%2C6%2C1v5H1C0.45%2C6%2C0%2C6.45%2C0%2C7v2c0%2C0.55%2C0.45%2C1%2C1%2C1h5v5c0%2C0.55%2C0.45%2C1%2C1%2C1h2%20c0.55%2C0%2C1-0.45%2C1-1v-5h5c0.55%2C0%2C1-0.45%2C1-1V7C16%2C6.45%2C15.55%2C6%2C15%2C6z%22%2F%3E%3C%2Fsvg%3E');\n  background-size: 16px 16px;\n  border: 2px solid #3b425f;\n}\n.x6-widget-handle-pie-toggle:hover {\n  background-color: #fff;\n  background-image: url('data:image/svg+xml;charset=utf8,%3C%3Fxml%20version%3D%221.0%22%20%3F%3E%3C!DOCTYPE%20svg%20PUBLIC%20%22-%2F%2FW3C%2F%2FDTD%20SVG%201.1%2F%2FEN%22%20%22http%3A%2F%2Fwww.w3.org%2FGraphics%2FSVG%2F1.1%2FDTD%2Fsvg11.dtd%22%3E%3Csvg%20height%3D%2216px%22%20id%3D%22Layer_1%22%20style%3D%22enable-background%3Anew%200%200%2016%2016%3B%22%20version%3D%221.1%22%20viewBox%3D%220%200%2016%2016%22%20width%3D%2216px%22%20xml%3Aspace%3D%22preserve%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%3E%3Cpath%20fill%3D%22%23FD6EB6%22%20d%3D%22M15%2C6h-5V1c0-0.55-0.45-1-1-1H7C6.45%2C0%2C6%2C0.45%2C6%2C1v5H1C0.45%2C6%2C0%2C6.45%2C0%2C7v2c0%2C0.55%2C0.45%2C1%2C1%2C1h5v5c0%2C0.55%2C0.45%2C1%2C1%2C1h2%20c0.55%2C0%2C1-0.45%2C1-1v-5h5c0.55%2C0%2C1-0.45%2C1-1V7C16%2C6.45%2C15.55%2C6%2C15%2C6z%22%2F%3E%3C%2Fsvg%3E');\n  border-color: #fd6eb6;\n}\n.x6-widget-handle-pie-toggle-opened {\n  background-image: url('data:image/svg+xml;charset=utf8,%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22UTF-8%22%20standalone%3D%22no%22%3F%3E%3Csvg%20xmlns%3Adc%3D%22http%3A%2F%2Fpurl.org%2Fdc%2Felements%2F1.1%2F%22%20xmlns%3Acc%3D%22http%3A%2F%2Fcreativecommons.org%2Fns%23%22%20xmlns%3Ardf%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2F02%2F22-rdf-syntax-ns%23%22%20xmlns%3Asvg%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20version%3D%221.1%22%20width%3D%2216%22%20height%3D%2216%22%20viewBox%3D%220%200%2016%2016%22%20id%3D%22Layer_1%22%20xml%3Aspace%3D%22preserve%22%3E%3Cmetadata%20id%3D%22metadata9%22%3E%3Crdf%3ARDF%3E%3Ccc%3AWork%20rdf%3Aabout%3D%22%22%3E%3Cdc%3Aformat%3Eimage%2Fsvg%2Bxml%3C%2Fdc%3Aformat%3E%3Cdc%3Atype%20rdf%3Aresource%3D%22http%3A%2F%2Fpurl.org%2Fdc%2Fdcmitype%2FStillImage%22%20%2F%3E%3Cdc%3Atitle%3E%3C%2Fdc%3Atitle%3E%3C%2Fcc%3AWork%3E%3C%2Frdf%3ARDF%3E%3C%2Fmetadata%3E%3Cdefs%20id%3D%22defs7%22%20%2F%3E%3Cpath%20d%3D%22M%2015%2C6%2010%2C6%20C%201.0301983%2C6.00505%2015.002631%2C6.011353%206%2C6%20L%201%2C6%20C%200.45%2C6%200%2C6.45%200%2C7%20l%200%2C2%20c%200%2C0.55%200.45%2C1%201%2C1%20l%205%2C0%20c%208.988585%2C-0.019732%20-5.02893401%2C-0.018728%204%2C0%20l%205%2C0%20c%200.55%2C0%201%2C-0.45%201%2C-1%20L%2016%2C7%20C%2016%2C6.45%2015.55%2C6%2015%2C6%20z%22%20id%3D%22path3%22%20style%3D%22fill%3A%236a6c8a%22%20%2F%3E%3C%2Fsvg%3E');\n}\n.x6-widget-handle-pie-toggle-opened:hover {\n  background-image: url('data:image/svg+xml;charset=utf8,%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22UTF-8%22%20standalone%3D%22no%22%3F%3E%3Csvg%20xmlns%3Adc%3D%22http%3A%2F%2Fpurl.org%2Fdc%2Felements%2F1.1%2F%22%20xmlns%3Acc%3D%22http%3A%2F%2Fcreativecommons.org%2Fns%23%22%20xmlns%3Ardf%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2F02%2F22-rdf-syntax-ns%23%22%20xmlns%3Asvg%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20version%3D%221.1%22%20width%3D%2216%22%20height%3D%2216%22%20viewBox%3D%220%200%2016%2016%22%20id%3D%22Layer_1%22%20xml%3Aspace%3D%22preserve%22%3E%3Cmetadata%20id%3D%22metadata9%22%3E%3Crdf%3ARDF%3E%3Ccc%3AWork%20rdf%3Aabout%3D%22%22%3E%3Cdc%3Aformat%3Eimage%2Fsvg%2Bxml%3C%2Fdc%3Aformat%3E%3Cdc%3Atype%20rdf%3Aresource%3D%22http%3A%2F%2Fpurl.org%2Fdc%2Fdcmitype%2FStillImage%22%20%2F%3E%3Cdc%3Atitle%3E%3C%2Fdc%3Atitle%3E%3C%2Fcc%3AWork%3E%3C%2Frdf%3ARDF%3E%3C%2Fmetadata%3E%3Cdefs%20id%3D%22defs7%22%20%2F%3E%3Cpath%20d%3D%22M%2015%2C6%2010%2C6%20C%201.0301983%2C6.00505%2015.002631%2C6.011353%206%2C6%20L%201%2C6%20C%200.45%2C6%200%2C6.45%200%2C7%20l%200%2C2%20c%200%2C0.55%200.45%2C1%201%2C1%20l%205%2C0%20c%208.988585%2C-0.019732%20-5.02893401%2C-0.018728%204%2C0%20l%205%2C0%20c%200.55%2C0%201%2C-0.45%201%2C-1%20L%2016%2C7%20C%2016%2C6.45%2015.55%2C6%2015%2C6%20z%22%20id%3D%22path3%22%20style%3D%22fill%3A%23FD6EB6%22%20%2F%3E%3C%2Fsvg%3E');\n}\n.x6-path-drawer {\n  cursor: crosshair;\n}\n.x6-path-drawer .start-point {\n  fill: #fff;\n  stroke: #000;\n  stroke-width: 2px;\n}\n.x6-path-drawer .start-point:hover {\n  fill: #000;\n}\n.x6-path-drawer .control-path {\n  pointer-events: none;\n  fill: none;\n  stroke: #000;\n  stroke-width: 1px;\n  stroke-linecap: round;\n}\n.x6-graph-scroller {\n  position: relative;\n  box-sizing: border-box;\n  overflow: scroll;\n  outline: none;\n}\n.x6-graph-scroller-content {\n  position: relative;\n}\n.x6-graph-scroller-background {\n  position: absolute;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  left: 0;\n}\n.x6-graph-scroller .x6-graph {\n  position: absolute;\n  display: inline-block;\n  margin: 0;\n  box-shadow: none;\n}\n.x6-graph-scroller .x6-graph > svg {\n  display: block;\n}\n.x6-graph-scroller.x6-graph-scroller-paged .x6-graph {\n  box-shadow: 0 0 4px 0 #eee;\n}\n.x6-graph-scroller.x6-graph-scroller-pannable {\n  cursor: grab;\n  cursor: -moz-grab;\n  cursor: -webkit-grab;\n}\n.x6-graph-scroller.x6-graph-scroller-panning {\n  cursor: grabbing;\n  cursor: -moz-grabbing;\n  cursor: -webkit-grabbing;\n  user-select: none;\n}\n.x6-graph-pagebreak {\n  position: absolute;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  left: 0;\n}\n.x6-graph-pagebreak-vertical {\n  position: absolute;\n  top: 0;\n  bottom: 0;\n  box-sizing: border-box;\n  width: 1px;\n  border-left: 1px dashed #bdbdbd;\n}\n.x6-graph-pagebreak-horizontal {\n  position: absolute;\n  right: 0;\n  left: 0;\n  box-sizing: border-box;\n  height: 1px;\n  border-top: 1px dashed #bdbdbd;\n}\n.x6-widget-selection {\n  position: absolute;\n  display: none;\n  width: 0;\n  height: 0;\n  touch-action: none;\n}\n.x6-widget-selection-rubberband {\n  display: block;\n  overflow: visible;\n  opacity: 0.3;\n}\n.x6-widget-selection-selected {\n  display: block;\n}\n.x6-widget-selection-box {\n  cursor: move;\n}\n.x6-widget-selection-inner[data-selection-length='0'],\n.x6-widget-selection-inner[data-selection-length='1'] {\n  display: none;\n}\n.x6-widget-selection-content {\n  position: absolute;\n  top: 100%;\n  right: -20px;\n  left: -20px;\n  margin-top: 30px;\n  padding: 6px;\n  line-height: 14px;\n  text-align: center;\n  border-radius: 6px;\n}\n.x6-widget-selection-content:empty {\n  display: none;\n}\n.x6-widget-selection-rubberband {\n  background-color: #3498db;\n  border: 2px solid #2980b9;\n}\n.x6-widget-selection-box {\n  box-sizing: content-box !important;\n  margin-top: -4px;\n  margin-left: -4px;\n  padding-right: 4px;\n  padding-bottom: 4px;\n  border: 2px dashed #feb663;\n  box-shadow: 2px 2px 5px #d3d3d3;\n}\n.x6-widget-selection-inner {\n  box-sizing: content-box !important;\n  margin-top: -8px;\n  margin-left: -8px;\n  padding-right: 12px;\n  padding-bottom: 12px;\n  border: 2px solid #feb663;\n  box-shadow: 2px 2px 5px #d3d3d3;\n}\n.x6-widget-selection-content {\n  color: #fff;\n  font-size: 10px;\n  background-color: #6a6b8a;\n}\n.x6-widget-snapline {\n  position: absolute;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  left: 0;\n  pointer-events: none;\n}\n.x6-widget-snapline-vertical,\n.x6-widget-snapline-horizontal {\n  position: absolute;\n  opacity: 1;\n  pointer-events: none;\n}\n.x6-widget-snapline-horizontal {\n  border-bottom: 1px solid #2ecc71;\n}\n.x6-widget-snapline-vertical {\n  border-right: 1px solid #2ecc71;\n}\n.x6-widget-stencil {\n  position: absolute;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  left: 0;\n}\n.x6-widget-stencil::after {\n  position: absolute;\n  top: 0;\n  display: block;\n  width: 100%;\n  height: 20px;\n  padding: 8px 0;\n  line-height: 20px;\n  text-align: center;\n  opacity: 0;\n  transition: top 0.1s linear, opacity 0.1s linear;\n  content: ' ';\n  pointer-events: none;\n}\n.x6-widget-stencil-content {\n  position: absolute;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  left: 0;\n  height: auto;\n  overflow-x: hidden;\n  overflow-y: auto;\n}\n.x6-widget-stencil .x6-node [magnet]:not([magnet='passive']) {\n  pointer-events: none;\n}\n.x6-widget-stencil-group {\n  padding: 0;\n  padding-bottom: 8px;\n  overflow: hidden;\n  user-select: none;\n}\n.x6-widget-stencil-group.collapsed {\n  height: auto;\n  padding-bottom: 0;\n}\n.x6-widget-stencil-group-title {\n  position: relative;\n  margin-top: 0;\n  margin-bottom: 0;\n  padding: 4px;\n  cursor: pointer;\n}\n.x6-widget-stencil-title,\n.x6-widget-stencil-group > .x6-widget-stencil-group-title {\n  overflow: hidden;\n  white-space: nowrap;\n  text-overflow: ellipsis;\n  user-select: none;\n}\n.x6-widget-stencil .unmatched {\n  opacity: 0.3;\n}\n.x6-widget-stencil .x6-node.unmatched {\n  display: none;\n}\n.x6-widget-stencil-group.unmatched {\n  display: none;\n}\n.x6-widget-stencil-search-text {\n  position: relative;\n  z-index: 1;\n  box-sizing: border-box;\n  width: 100%;\n  height: 30px;\n  max-height: 30px;\n  line-height: 30px;\n  outline: 0;\n}\n.x6-widget-stencil.not-found::after {\n  opacity: 1;\n  content: 'No matches found';\n}\n.x6-widget-stencil.not-found.searchable::after {\n  top: 30px;\n}\n.x6-widget-stencil.not-found.searchable.collapsable::after {\n  top: 50px;\n}\n.x6-widget-stencil {\n  color: #333;\n  background: #f5f5f5;\n}\n.x6-widget-stencil-content {\n  position: absolute;\n}\n.x6-widget-stencil.collapsable > .x6-widget-stencil-content {\n  top: 32px;\n}\n.x6-widget-stencil.searchable > .x6-widget-stencil-content {\n  top: 80px;\n}\n.x6-widget-stencil.not-found::after {\n  position: absolute;\n}\n.x6-widget-stencil.not-found.searchable.collapsable::after {\n  top: 80px;\n}\n.x6-widget-stencil.not-found.searchable::after {\n  top: 60px;\n}\n.x6-widget-stencil-group {\n  height: auto;\n  margin-bottom: 1px;\n  padding: 0;\n  transition: none;\n}\n.x6-widget-stencil-group .x6-graph {\n  background: transparent;\n  box-shadow: none;\n}\n.x6-widget-stencil-group.collapsed {\n  height: auto;\n  max-height: 31px;\n}\n.x6-widget-stencil-title,\n.x6-widget-stencil-group > .x6-widget-stencil-group-title {\n  position: relative;\n  left: 0;\n  box-sizing: border-box;\n  width: 100%;\n  height: 32px;\n  padding: 0 5px 0 8px;\n  color: #666;\n  font-weight: 700;\n  font-size: 12px;\n  line-height: 32px;\n  cursor: default;\n  transition: all 0.3;\n}\n.x6-widget-stencil-title:hover,\n.x6-widget-stencil-group > .x6-widget-stencil-group-title:hover {\n  color: #444;\n}\n.x6-widget-stencil-title {\n  background: #e9e9e9;\n}\n.x6-widget-stencil-group > .x6-widget-stencil-group-title {\n  background: #ededed;\n}\n.x6-widget-stencil.collapsable > .x6-widget-stencil-title,\n.x6-widget-stencil-group.collapsable > .x6-widget-stencil-group-title {\n  padding-left: 32px;\n  cursor: pointer;\n}\n.x6-widget-stencil.collapsable > .x6-widget-stencil-title::before,\n.x6-widget-stencil-group.collapsable > .x6-widget-stencil-group-title::before {\n  position: absolute;\n  top: 6px;\n  left: 8px;\n  display: block;\n  width: 18px;\n  height: 18px;\n  margin: 0;\n  padding: 0;\n  background-color: transparent;\n  background-repeat: no-repeat;\n  background-position: 0 0;\n  border: none;\n  content: ' ';\n}\n.x6-widget-stencil.collapsable > .x6-widget-stencil-title::before,\n.x6-widget-stencil-group.collapsable > .x6-widget-stencil-group-title::before {\n  background-image: url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTgiIGhlaWdodD0iMTgiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGcgZmlsbD0iIzAwMCIgZmlsbC1ydWxlPSJub256ZXJvIj48cGF0aCBkPSJNOS4zNzUuNUM0LjY4Ny41Ljg3NSA0LjMxMy44NzUgOWMwIDQuNjg4IDMuODEyIDguNSA4LjUgOC41IDQuNjg3IDAgOC41LTMuODEyIDguNS04LjUgMC00LjY4Ny0zLjgxMy04LjUtOC41LTguNXptMCAxNS44ODZDNS4zMDMgMTYuMzg2IDEuOTkgMTMuMDcyIDEuOTkgOXMzLjMxMi03LjM4NSA3LjM4NS03LjM4NVMxNi43NiA0LjkyOCAxNi43NiA5YzAgNC4wNzItMy4zMTMgNy4zODYtNy4zODUgNy4zODZ6Ii8+PHBhdGggZD0iTTEyLjc1MyA4LjQ0M0g1Ljk5N2EuNTU4LjU1OCAwIDAwMCAxLjExNmg2Ljc1NmEuNTU4LjU1OCAwIDAwMC0xLjExNnoiLz48L2c+PC9zdmc+');\n  opacity: 0.4;\n  transition: all 0.3s;\n}\n.x6-widget-stencil.collapsable > .x6-widget-stencil-title:hover::before,\n.x6-widget-stencil-group.collapsable > .x6-widget-stencil-group-title:hover::before {\n  opacity: 0.6;\n}\n.x6-widget-stencil.collapsable.collapsed > .x6-widget-stencil-title::before,\n.x6-widget-stencil-group.collapsable.collapsed > .x6-widget-stencil-group-title::before {\n  background-image: url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTgiIGhlaWdodD0iMTgiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGcgZmlsbD0iIzAwMCIgZmlsbC1ydWxlPSJub256ZXJvIj48cGF0aCBkPSJNOS4zNzUuNUM0LjY4Ny41Ljg3NSA0LjMxMy44NzUgOWMwIDQuNjg4IDMuODEyIDguNSA4LjUgOC41IDQuNjg3IDAgOC41LTMuODEyIDguNS04LjUgMC00LjY4Ny0zLjgxMy04LjUtOC41LTguNXptMCAxNS44ODZDNS4zMDMgMTYuMzg2IDEuOTkgMTMuMDcyIDEuOTkgOXMzLjMxMi03LjM4NSA3LjM4NS03LjM4NVMxNi43NiA0LjkyOCAxNi43NiA5YzAgNC4wNzItMy4zMTMgNy4zODYtNy4zODUgNy4zODZ6Ii8+PHBhdGggZD0iTTEyLjc1MyA4LjQ0M0g1Ljk5N2EuNTU4LjU1OCAwIDAwMCAxLjExNmg2Ljc1NmEuNTU4LjU1OCAwIDAwMC0xLjExNnoiLz48cGF0aCBkPSJNOC44MTcgNS42MjN2Ni43NTZhLjU1OC41NTggMCAwMDEuMTE2IDBWNS42MjNhLjU1OC41NTggMCAxMC0xLjExNiAweiIvPjwvZz48L3N2Zz4=');\n  opacity: 0.4;\n}\n.x6-widget-stencil.collapsable.collapsed > .x6-widget-stencil-title:hover::before,\n.x6-widget-stencil-group.collapsable.collapsed > .x6-widget-stencil-group-title:hover::before {\n  opacity: 0.6;\n}\n.x6-widget-stencil input[type='search'] {\n  -webkit-appearance: textfield;\n}\n.x6-widget-stencil input[type='search']::-webkit-search-cancel-button,\n.x6-widget-stencil input[type='search']::-webkit-search-decoration {\n  -webkit-appearance: none;\n}\n.x6-widget-stencil-search-text {\n  display: block;\n  width: 90%;\n  margin: 8px 5%;\n  padding-left: 8px;\n  color: #333;\n  background: #fff;\n  border: 1px solid #e9e9e9;\n  border-radius: 12px;\n  outline: 0;\n}\n.x6-widget-stencil-search-text:focus {\n  outline: 0;\n}\n.x6-widget-stencil::after {\n  color: #808080;\n  font-weight: 600;\n  font-size: 12px;\n  background: 0 0;\n}\n.x6-widget-transform {\n  position: absolute;\n  box-sizing: content-box !important;\n  margin: -5px 0 0 -5px;\n  padding: 4px;\n  border: 1px dashed #000;\n  border-radius: 5px;\n  user-select: none;\n  pointer-events: none;\n}\n.x6-widget-transform > div {\n  position: absolute;\n  box-sizing: border-box;\n  background-color: #fff;\n  border: 1px solid #000;\n  transition: background-color 0.2s;\n  pointer-events: auto;\n  -webkit-user-drag: none;\n  user-drag: none;\n  /* stylelint-disable-line */\n}\n.x6-widget-transform > div:hover {\n  background-color: #d3d3d3;\n}\n.x6-widget-transform-cursor-n {\n  cursor: n-resize;\n}\n.x6-widget-transform-cursor-s {\n  cursor: s-resize;\n}\n.x6-widget-transform-cursor-e {\n  cursor: e-resize;\n}\n.x6-widget-transform-cursor-w {\n  cursor: w-resize;\n}\n.x6-widget-transform-cursor-ne {\n  cursor: ne-resize;\n}\n.x6-widget-transform-cursor-nw {\n  cursor: nw-resize;\n}\n.x6-widget-transform-cursor-se {\n  cursor: se-resize;\n}\n.x6-widget-transform-cursor-sw {\n  cursor: sw-resize;\n}\n.x6-widget-transform-resize {\n  width: 10px;\n  height: 10px;\n  border-radius: 6px;\n}\n.x6-widget-transform-resize[data-position='top-left'] {\n  top: -5px;\n  left: -5px;\n}\n.x6-widget-transform-resize[data-position='top-right'] {\n  top: -5px;\n  right: -5px;\n}\n.x6-widget-transform-resize[data-position='bottom-left'] {\n  bottom: -5px;\n  left: -5px;\n}\n.x6-widget-transform-resize[data-position='bottom-right'] {\n  right: -5px;\n  bottom: -5px;\n}\n.x6-widget-transform-resize[data-position='top'] {\n  top: -5px;\n  left: 50%;\n  margin-left: -5px;\n}\n.x6-widget-transform-resize[data-position='bottom'] {\n  bottom: -5px;\n  left: 50%;\n  margin-left: -5px;\n}\n.x6-widget-transform-resize[data-position='left'] {\n  top: 50%;\n  left: -5px;\n  margin-top: -5px;\n}\n.x6-widget-transform-resize[data-position='right'] {\n  top: 50%;\n  right: -5px;\n  margin-top: -5px;\n}\n.x6-widget-transform.prevent-aspect-ratio .x6-widget-transform-resize[data-position='top'],\n.x6-widget-transform.prevent-aspect-ratio .x6-widget-transform-resize[data-position='bottom'],\n.x6-widget-transform.prevent-aspect-ratio .x6-widget-transform-resize[data-position='left'],\n.x6-widget-transform.prevent-aspect-ratio .x6-widget-transform-resize[data-position='right'] {\n  display: none;\n}\n.x6-widget-transform.no-orth-resize .x6-widget-transform-resize[data-position='bottom'],\n.x6-widget-transform.no-orth-resize .x6-widget-transform-resize[data-position='left'],\n.x6-widget-transform.no-orth-resize .x6-widget-transform-resize[data-position='right'],\n.x6-widget-transform.no-orth-resize .x6-widget-transform-resize[data-position='top'] {\n  display: none;\n}\n.x6-widget-transform.no-resize .x6-widget-transform-resize {\n  display: none;\n}\n.x6-widget-transform-rotate {\n  top: -20px;\n  left: -20px;\n  width: 12px;\n  height: 12px;\n  border-radius: 6px;\n  cursor: crosshair;\n}\n.x6-widget-transform.no-rotate .x6-widget-transform-rotate {\n  display: none;\n}\n.x6-widget-transform-active {\n  pointer-events: all;\n}\n.x6-widget-transform-active > div {\n  display: none;\n}\n.x6-widget-transform-active > .x6-widget-transform-active-handle {\n  display: block;\n  background-color: #808080;\n}\n.x6-graph-print {\n  position: relative;\n}\n.x6-graph-print .x6-graph-print-ready {\n  display: none;\n}\n.x6-graph-print .x6-graph-print-preview {\n  overflow: hidden !important;\n  background: #fff !important;\n}\n@media print {\n  html,\n  html > body.x6-graph-printing {\n    position: relative !important;\n    width: 100% !important;\n    height: 100% !important;\n    margin: 0 !important;\n    padding: 0 !important;\n  }\n  html > body.x6-graph-printing > * {\n    display: none !important;\n  }\n  html > body.x6-graph-printing > .x6-graph-print {\n    display: block !important;\n  }\n  .x6-graph-print {\n    top: 0 !important;\n    left: 0 !important;\n    margin: 0 !important;\n    padding: 0 !important;\n    overflow: hidden !important;\n    page-break-after: always;\n    background: #fff !important;\n  }\n  .x6-graph-print .x6-graph-print-ready {\n    display: none;\n  }\n}\n",(t=document.querySelector("head"))&&t.insertBefore(zd,t.firstChild))},cn.clean=function(){zd&&zd.parentNode&&zd.parentNode.removeChild(zd),zd=null},(un=Od=Od||{}).root="widget-minimap",un.viewport=un.root+"-viewport",un.zoom=un.viewport+"-zoom";var Id,Rd,_d=(oa(Gd,Rd=U.View),Object.defineProperty(Gd.prototype,"scroller",{get:function(){return this.options.scroller},enumerable:!1,configurable:!0}),Gd.prototype.startListening=function(){var t;this.scroller.$container.on("scroll"+this.getEventNamespace(),this.updateViewport),this.sourceGraph.on("resize",this.updatePaper,this),this.delegateEvents(((t={mousedown:"startAction",touchstart:"startAction"})["mousedown ."+this.prefixClassName("graph")]="scrollTo",t["touchstart ."+this.prefixClassName("graph")]="scrollTo",t))},Gd.prototype.stopListening=function(){this.scroller.$container.off(this.getEventNamespace()),this.sourceGraph.off("resize",this.updatePaper,this),this.undelegateEvents()},Gd.prototype.onRemove=function(){this.targetGraph.view.remove(),this.stopListening()},Gd.prototype.updatePaper=function(t,e){var n,o="object"==typeof t?(n=t.width,t.height):(n=t,e),i=this.sourceGraph.options,r=this.sourceGraph.scale(),t=this.options.width-2*this.options.padding,e=this.options.height-2*this.options.padding;n/=r.sx,o/=r.sy,this.ratio=Math.min(t/n,e/o);t=this.ratio,e=i.x*t/r.sx,r=i.y*t/r.sy;return n*=t,o*=t,this.targetGraph.resizeGraph(n,o),this.targetGraph.translate(e,r),this.targetGraph.scale(t,t),this.updateViewport(),this},Gd.prototype.updateViewport=function(){var t=this.ratio,e=this.sourceGraph.scale(),n=this.scroller,o=n.clientToLocalPoint(0,0),i=this.$(this.targetGraph.container).position(),r=this.targetGraph.translate();r.ty=r.ty||0,this.geometry={top:i.top+o.y*t+r.ty,left:i.left+o.x*t+r.tx,width:n.$container.innerWidth()*t/e.sx,height:n.$container.innerHeight()*t/e.sy},this.$viewport.css(this.geometry)},Gd.prototype.startAction=function(t){t=this.normalizeEvent(t),t={action:t.target===this.zoomHandle?"zooming":"panning",clientX:t.clientX,clientY:t.clientY,scrollLeft:this.scroller.container.scrollLeft,scrollTop:this.scroller.container.scrollTop,zoom:this.scroller.zoom(),scale:this.sourceGraph.scale(),geometry:this.geometry};this.delegateDocumentEvents(Id.documentEvents,t)},Gd.prototype.doAction=function(t){var e=this,n=this.normalizeEvent(t),o=n.clientX,t=n.clientY,i=n.data;switch(i.action){case"panning":var r=this.sourceGraph.scale(),s=(o-i.clientX)*r.sx,r=(t-i.clientY)*r.sy;this.scroller.container.scrollLeft=i.scrollLeft+s/this.ratio,this.scroller.container.scrollTop=i.scrollTop+r/this.ratio;break;case"zooming":var s=i.scale,r=i.geometry,a=1+(i.clientX-o)/r.width/s.sx;i.frameId&&cancelAnimationFrame(i.frameId),i.frameId=requestAnimationFrame(function(){e.scroller.zoom(a*i.zoom,{absolute:!0,minScale:e.options.minScale,maxScale:e.options.maxScale})})}},Gd.prototype.stopAction=function(){this.undelegateDocumentEvents()},Gd.prototype.scrollTo=function(t){var e=this.normalizeEvent(t),n=this.targetGraph.translate();n.ty=n.ty||0,e=null==e.offsetX?(t=this.$(this.targetGraph.container).offset(),o=e.pageX-t.left,e.pageY-t.top):(o=e.offsetX,e.offsetY);var o=(o-n.tx)/this.ratio,n=(e-n.ty)/this.ratio;this.scroller.centerPoint(o,n)},Gd.prototype.dispose=function(){this.remove()},sa([U.View.dispose()],Gd.prototype,"dispose",null),Gd);function Gd(t){var e=Rd.call(this)||this;e.options=ia(ia({},Id.defaultOptions),t),e.updateViewport=$o(e.updateViewport.bind(e),0),e.container=document.createElement("div"),e.$container=e.$(e.container).addClass(e.prefixClassName(Od.root));t=document.createElement("div");e.container.appendChild(t),e.$viewport=e.$("<div>").addClass(e.prefixClassName(Od.viewport)),e.options.scalable&&(e.zoomHandle=e.$("<div>").addClass(e.prefixClassName(Od.zoom)).appendTo(e.$viewport).get(0)),e.$container.append(e.$viewport).css({width:e.options.width,height:e.options.height,padding:e.options.padding}),e.options.container&&e.options.container.appendChild(e.container),e.sourceGraph=e.scroller.graph;t=ia(ia({},e.options.graphOptions),{container:t,model:e.sourceGraph.model,frozen:!0,interacting:!1,grid:!1,background:!1,rotating:!1,resizing:!1,embedding:!1,selecting:!1,snapline:!1,clipboard:!1,history:!1,scroller:!1});return e.targetGraph=e.options.createGraph?e.options.createGraph(t):new U.Graph(t),e.targetGraph.renderer.unfreeze(),e.updatePaper(e.sourceGraph.options.width,e.sourceGraph.options.height),e.startListening(),e}(dn=Id=Id||{}).defaultOptions={width:300,height:200,padding:10,scalable:!0,minScale:.01,maxScale:16,graphOptions:{},createGraph:function(t){return new U.Graph(t)}},dn.documentEvents={mousemove:"doAction",touchmove:"doAction",mouseup:"stopAction",touchend:"stopAction"};var Hd,Ud,$d=(oa(Xd,Ud=U.View),Object.defineProperty(Xd.prototype,"model",{get:function(){return this.graph.model},enumerable:!1,configurable:!0}),Object.defineProperty(Xd.prototype,"containerClassName",{get:function(){return this.prefixClassName("widget-snapline")},enumerable:!1,configurable:!0}),Object.defineProperty(Xd.prototype,"verticalClassName",{get:function(){return this.containerClassName+"-vertical"},enumerable:!1,configurable:!0}),Object.defineProperty(Xd.prototype,"horizontalClassName",{get:function(){return this.containerClassName+"-horizontal"},enumerable:!1,configurable:!0}),Object.defineProperty(Xd.prototype,"disabled",{get:function(){return!0!==this.options.enabled||!0!==this.graph.options.snapline.enabled},enumerable:!1,configurable:!0}),Xd.prototype.enable=function(){this.disabled&&(this.options.enabled=!0,this.graph.options.snapline.enabled=!0,this.startListening())},Xd.prototype.disable=function(){this.disabled||(this.options.enabled=!1,this.graph.options.snapline.enabled=!1,this.stopListening())},Xd.prototype.setFilter=function(t){this.options.filter=t,this.parseFilter()},Xd.prototype.render=function(){this.container=document.createElement("div"),this.$container=this.$(this.container),this.$horizontal=this.$(document.createElement("div")).addClass(this.horizontalClassName),this.$vertical=this.$(document.createElement("div")).addClass(this.verticalClassName),this.$container.hide().addClass(this.containerClassName).append([this.$horizontal,this.$vertical]),this.options.className&&this.$container.addClass(this.options.className)},Xd.prototype.startListening=function(){this.stopListening(),this.graph.on("node:mousedown",this.captureCursorOffset,this),this.graph.on("node:mousemove",this.snapOnMoving,this),this.model.on("batch:stop",this.onBatchStop,this),this.delegateDocumentEvents({mouseup:"hide",touchend:"hide"})},Xd.prototype.stopListening=function(){this.graph.off("node:mousedown",this.captureCursorOffset,this),this.graph.off("node:mousemove",this.snapOnMoving,this),this.model.off("batch:stop",this.onBatchStop,this),this.undelegateDocumentEvents()},Xd.prototype.parseFilter=function(){var e=this;this.filterShapes={},this.filterCells={},this.filterFunction=null;var t=this.options.filter;Array.isArray(t)?t.forEach(function(t){"string"==typeof t?e.filterShapes[t]=!0:e.filterCells[t.id]=!0}):"function"==typeof t&&(this.filterFunction=t)},Xd.prototype.onBatchStop=function(t){var e=t.name,t=t.data;"resize"===e&&this.snapOnResizing(t.cell,t)},Xd.prototype.captureCursorOffset=function(t){var e=t.view,n=t.x,o=t.y,t=e.getDelegatedView();t&&this.isNodeMovable(t)&&(e=e.cell.getPosition(),this.offset={x:n-e.x,y:o-e.y})},Xd.prototype.isNodeMovable=function(t){return t&&t.cell.isNode()&&t.can("nodeMovable")},Xd.prototype.snapOnResizing=function(r,t){var s=this;if(this.options.resizing&&!t.snapped&&t.ui&&t.direction&&t.trueDirection){var e=this.graph.renderer.findViewByCell(r);if(e&&e.cell.isNode()){var a,l,c,h,u,p,n=r.getBBox(),d=n.bbox(r.getAngle()),o=d.getTopLeft(),g=d.getBottomRight(),i=U.Angle.normalize(r.getAngle()),f=this.options.tolerance||0,y={vertical:0,horizontal:0},m=t.direction,C=t.trueDirection,v=t.relativeDirection;-1!==C.indexOf("right")?y.vertical=g.x:y.vertical=o.x,-1!==C.indexOf("bottom")?y.horizontal=g.y:y.horizontal=o.y,this.model.getNodes().some(function(t){if(s.isIgnored(r,t))return!1;var e=t.getBBox().bbox(t.getAngle()),n=e.getTopLeft(),t=e.getBottomRight(),o={vertical:[n.x,t.x],horizontal:[n.y,t.y]},i={};return Object.keys(o).forEach(function(t){var e=t,t=o[e].map(function(t){return{position:t,distance:Math.abs(t-y[e])}}).filter(function(t){return t.distance<=f});i[e]=Hi(t,function(t){return t.distance})}),null==a&&0<i.vertical.length&&(a=i.vertical[0].position,l=Math.min(d.y,e.y),c=Math.max(g.y,t.y)-l),null==h&&0<i.horizontal.length&&(h=i.horizontal[0].position,u=Math.min(d.x,e.x),p=Math.max(g.x,t.x)-u),null!=a&&null!=h}),this.hide();var b=0,x=0;null==h&&null==a||(null!=a&&(b=-1!==C.indexOf("right")?a-g.x:o.x-a),null!=h&&(x=-1!==C.indexOf("bottom")?h-g.y:o.y-h));var w=0,o=0;if(i%90==0)o=90===i||270===i?(w=x,b):(w=b,x);else{var E=0<=i&&i<90?1:90<=i&&i<180?4:180<=i&&i<270?3:2;null!=h&&null!=a&&(b<x?h=void(x=0):a=void(b=0));var A=U.Angle.toRad(i%90);b&&(w=3==E?b/Math.cos(A):b/Math.sin(A)),x&&(o=3==E?x/Math.cos(A):x/Math.sin(A));E=1==E||3==E;switch(v){case"top":case"bottom":o=x?x/(E?Math.cos(A):Math.sin(A)):b/(E?Math.sin(A):Math.cos(A));break;case"left":case"right":w=b?b/(E?Math.cos(A):Math.sin(A)):x/(E?Math.sin(A):Math.cos(A))}}switch(v){case"top":case"bottom":w=0;break;case"left":case"right":o=0}x=this.graph.getGridSize(),E=Math.max(n.width+w,x),A=Math.max(n.height+o,x);t.minWidth&&t.minWidth>x&&(E=Math.max(E,t.minWidth)),t.minHeight&&t.minHeight>x&&(A=Math.max(A,t.minHeight)),t.maxWidth&&(E=Math.min(E,t.maxWidth)),t.maxHeight&&(A=Math.min(A,t.maxHeight)),t.preserveAspectRatio&&(o<w?A=E*(n.height/n.width):E=A*(n.width/n.height)),E===n.width&&A===n.height||(r.resize(E,A,{direction:m,relativeDirection:v,trueDirection:C,snapped:!0,snaplines:this.cid,restrict:this.graph.hook.getRestrictArea(e)}),c&&(c+=A-n.height),p&&(p+=E-n.width));i=r.getBBox().bbox(i);a&&1<Math.abs(i.x-a)&&1<Math.abs(i.width+i.x-a)&&(a=void 0),h&&1<Math.abs(i.y-h)&&1<Math.abs(i.height+i.y-h)&&(h=void 0),this.update({verticalLeft:a,verticalTop:l,verticalHeight:c,horizontalTop:h,horizontalLeft:u,horizontalWidth:p})}}},Xd.prototype.snapOnMoving=function(t){var i,r,s,a,l,c,h,u,p,d,g,f,y,m,C=this,e=t.view,n=t.e,o=t.x,v=t.y,t=e.getEventData(n).delegatedView||e;this.isNodeMovable(t)&&(n=(h=t.cell).getSize(),e=h.getPosition(),o=new U.Rectangle(o-this.offset.x,v-this.offset.y,n.width,n.height),v=h.getAngle(),u=o.getCenter(),p=o.bbox(v),d=p.getTopLeft(),g=p.getBottomRight(),f=this.options.tolerance||0,m=y=0,this.model.getNodes().some(function(t){if(C.isIgnored(h,t))return!1;var e=t.getBBox().bbox(t.getAngle()),n=e.getCenter(),o=e.getTopLeft(),t=e.getBottomRight();return null==i&&(Math.abs(n.x-u.x)<f?(i=n.x,y=.5):Math.abs(o.x-d.x)<f?(i=o.x,y=0):Math.abs(o.x-g.x)<f?(i=o.x,y=1):Math.abs(t.x-g.x)<f?(i=t.x,y=1):Math.abs(t.x-d.x)<f&&(i=t.x),null!=i&&(r=Math.min(p.y,e.y),s=Math.max(g.y,t.y)-r)),null==a&&(Math.abs(n.y-u.y)<f?(a=n.y,m=.5):Math.abs(o.y-d.y)<f?a=o.y:Math.abs(o.y-g.y)<f?(a=o.y,m=1):Math.abs(t.y-g.y)<f?(a=t.y,m=1):Math.abs(t.y-d.y)<f&&(a=t.y),null!=a&&(l=Math.min(p.x,e.x),c=Math.max(g.x,t.x)-l)),null!=i&&null!=a}),this.hide(),null==a&&null==i||(null!=a&&(p.y=a-m*p.height),null!=i&&(p.x=i-y*p.width),v=(n=p.getCenter()).x-o.width/2,o=n.y-o.height/2,v=v-e.x,e=o-e.y,0==v&&0==e||(h.translate(v,e,{snapped:!0,restrict:this.graph.hook.getRestrictArea(t)}),c&&(c+=v),s&&(s+=e)),this.update({verticalLeft:i,verticalTop:r,verticalHeight:s,horizontalTop:a,horizontalLeft:l,horizontalWidth:c})))},Xd.prototype.isIgnored=function(t,e){return e.id===t.id||e.isDescendantOf(t)||this.filterShapes[e.shape]||this.filterCells[e.id]||this.filterFunction&&Gr(this.filterFunction,this.graph,e)},Xd.prototype.update=function(t){var e=this.graph.matrix(),n=e.a,o=e.d,i=e.e,r=e.f,s=this.options.sharp,e=null!=this.graph.scroller.widget;t.horizontalTop?this.$horizontal.css({top:t.horizontalTop*o+r,left:s?t.horizontalLeft*n+i:e?"-300%":0,width:s?t.horizontalWidth*n:e?"700%":"100%"}).show():this.$horizontal.hide(),t.verticalLeft?this.$vertical.css({left:t.verticalLeft*n+i,top:s?t.verticalTop*o+r:e?"-300%":0,height:s?t.verticalHeight*o:e?"700%":"100%"}).show():this.$vertical.hide(),this.show()},Xd.prototype.resetTimer=function(){this.timer&&(clearTimeout(this.timer),this.timer=null)},Xd.prototype.show=function(){return this.$container.show(),this.resetTimer(),null==this.container.parentNode&&this.graph.container.appendChild(this.container),this},Xd.prototype.hide=function(){var t=this;this.$container.hide(),this.resetTimer();var e=this.options.clean,e="number"==typeof e?e:!1!==e?3e3:0;return 0<e&&(this.timer=window.setTimeout(function(){t.unmount()},e)),this},Xd.prototype.onRemove=function(){this.stopListening(),this.hide()},Xd.prototype.dispose=function(){this.remove()},sa([U.View.dispose()],Xd.prototype,"dispose",null),Xd),qd=(oa(Wd,Hd=yn),Wd.prototype.init=function(){this.resetUpdates(),this.startListening(),this.resetViews(this.model.getCells()),!this.isFrozen()&&this.isAsync()&&this.updateViewsAsync()},Wd.prototype.startListening=function(){this.model.on("sorted",this.onSortModel,this),this.model.on("reseted",this.onModelReseted,this),this.model.on("batch:stop",this.onBatchStop,this),this.model.on("cell:added",this.onCellAdded,this),this.model.on("cell:removed",this.onCellRemoved,this),this.model.on("cell:change:zIndex",this.onCellZIndexChanged,this),this.model.on("cell:change:visible",this.onCellVisibleChanged,this)},Wd.prototype.stopListening=function(){this.model.off("sorted",this.onSortModel,this),this.model.off("reseted",this.onModelReseted,this),this.model.off("batch:stop",this.onBatchStop,this),this.model.off("cell:added",this.onCellAdded,this),this.model.off("cell:removed",this.onCellRemoved,this),this.model.off("cell:change:zIndex",this.onCellZIndexChanged,this),this.model.off("cell:change:visible",this.onCellVisibleChanged,this)},Wd.prototype.resetUpdates=function(){this.updates={priorities:[{},{},{}],mounted:{},mountedCids:[],unmounted:{},unmountedCids:[],count:0,sort:!1,frozen:!1,freezeKey:null,animationId:null}},Wd.prototype.onSortModel=function(){this.model.hasActiveBatch(Wd.SORT_DELAYING_BATCHES)||this.sortViews()},Wd.prototype.onModelReseted=function(t){t=t.options;this.removeZPivots(),this.resetViews(this.model.getCells(),t)},Wd.prototype.onBatchStop=function(t){var e,n=t.name,o=t.data;this.isFrozen()||(e=this.model,this.isAsync()||(t=Wd.UPDATE_DELAYING_BATCHES).includes(n)&&!e.hasActiveBatch(t)&&this.updateViews(o),(o=Wd.SORT_DELAYING_BATCHES).includes(n)&&!e.hasActiveBatch(o)&&this.sortViews())},Wd.prototype.onCellAdded=function(t){var e=t.cell,n=t.options,t=n.position;this.isAsync()||"number"!=typeof t?this.renderView(e,n):(n.maxPosition===t&&this.freeze({key:"addCells"}),this.renderView(e,n),0===t&&this.unfreeze({key:"addCells"}))},Wd.prototype.onCellRemoved=function(t){var e=t.cell,t=t.options,e=this.findViewByCell(e);e&&this.requestViewUpdate(e,Wd.FLAG_REMOVE,e.priority,t)},Wd.prototype.onCellZIndexChanged=function(t){var e=t.cell,t=t.options;"approx"!==this.options.sorting||(e=this.findViewByCell(e))&&this.requestViewUpdate(e,Wd.FLAG_INSERT,e.priority,t)},Wd.prototype.onCellVisibleChanged=function(t){var e=t.cell,n=t.current,o=t.options;n||this.processEdgeOnTerminalVisibleChanged(e,!1);t=this.findViewByCell(e);!n&&t?this.removeView(e):n&&null==t&&this.renderView(e,o),n&&this.processEdgeOnTerminalVisibleChanged(e,!0)},Wd.prototype.processEdgeOnTerminalVisibleChanged=function(o,i){this.model.getConnectedEdges(o).forEach(function(t){var e,n,e=(n=o,(e=t).getSourceCellId()!==n.id?e.getSourceCell():e.getTargetCellId()!==n.id?e.getTargetCell():null);null!=e&&!e.isVisible()||(i?t.show():t.hide())})},Wd.prototype.isEdgeTerminalVisible=function(t,e){t="source"===e?t.getSourceCellId():t.getTargetCellId(),t=t?this.model.getCell(t):null;return!(t&&!t.isVisible())},Wd.prototype.requestConnectedEdgesUpdate=function(t,e){if(void 0===e&&(e={}),t instanceof U.CellView)for(var n=t.cell,o=this.model.getConnectedEdges(n),i=0,r=o.length;i<r;i+=1){var s,a=o[i],l=this.findViewByCell(a);l&&(s=["update"],a.getTargetCell()===n&&s.push("target"),a.getSourceCell()===n&&s.push("source"),this.scheduleViewUpdate(l,l.getFlag(s),l.priority,e))}},Wd.prototype.forcePostponedViewUpdate=function(t,e){if(!(t&&t instanceof U.CellView))return!1;var n=t.cell;if(n.isNode())return!1;var o=t;if(n.isEdge()&&0==(e&t.getFlag(["source","target"]))){e=0,t=this.findViewByCell(n.getSourceCell());t&&!this.isViewMounted(t)&&(e=this.dumpView(t),o.updateTerminalMagnet("source"));t=0,n=this.findViewByCell(n.getTargetCell());if(n&&!this.isViewMounted(n)&&(t=this.dumpView(n),o.updateTerminalMagnet("target")),0===e&&0===t)return!this.dumpView(o)}return!1},Wd.prototype.scheduleViewUpdate=function(t,e,n,o){void 0===o&&(o={});var i=t.cid,r=this.updates,s=r.priorities[n],n=(s=s||(r.priorities[n]={}))[i]||0;(n&e)!==e&&(n||(r.count+=1),e&Wd.FLAG_REMOVE&&n&Wd.FLAG_INSERT?s[i]^=Wd.FLAG_INSERT:e&Wd.FLAG_INSERT&&n&Wd.FLAG_REMOVE&&(s[i]^=Wd.FLAG_REMOVE),s[i]|=e,this.graph.hook.onViewUpdated(t,e,o))},Wd.prototype.requestViewUpdate=function(t,e,n,o){void 0===o&&(o={}),this.scheduleViewUpdate(t,e,n,o);e=this.isAsync();this.isFrozen()||e&&!1!==o.async||this.model.hasActiveBatch(Wd.UPDATE_DELAYING_BATCHES)||(n=this.updateViews(o),e&&this.graph.trigger("render:done",{stats:n,options:o}))},Wd.prototype.dumpView=function(t,e){if(void 0===e&&(e={}),null==t)return 0;var n=t.cid,o=this.updates.priorities[t.priority],i=this.registerMountedView(t)|o[n];return delete o[n],i?this.updateView(t,i,e):0},Wd.prototype.dumpViews=function(t){void 0===t&&(t={}),this.checkView(t),this.updateViews(t)},Wd.prototype.requireView=function(t,e){void 0===e&&(e={});t=this.findViewByCell(t);return null==t?null:(this.dumpView(t,e),t)},Wd.prototype.updateView=function(t,e,n){if(void 0===n&&(n={}),null==t)return 0;if(t instanceof U.CellView){if(e&Wd.FLAG_REMOVE)return this.removeView(t.cell),0;e&Wd.FLAG_INSERT&&(this.insertView(t),e^=Wd.FLAG_INSERT)}return e?t.confirmUpdate(e,n):0},Wd.prototype.updateViews=function(t){var e;void 0===t&&(t={});for(var n=0,o=0,i=Wd.MIN_PRIORITY;n+=1,o+=(e=this.updateViewsBatch(t)).updatedCount,i=Math.min(e.priority,i),!e.empty;);return{priority:i,batchCount:n,updatedCount:o}},Wd.prototype.updateViewsBatch=function(t){void 0===t&&(t={});var e=this.updates,n=e.priorities,o=t.batchSize||Wd.UPDATE_BATCH_SIZE,i=!0,r=Wd.MIN_PRIORITY,s=0,a=0,l=0,c=0,h=t.checkView||this.options.checkView;"function"!=typeof h&&(h=null);t:for(var u=0,p=n.length;u<p;u+=1){var d,g=n[u];for(d in g){if(o<=l){i=!1;break t}var f=U.View.views[d];if(f){var y=g[d];if(0==(y&Wd.FLAG_REMOVE)){var m=d in e.unmounted;if(h&&!Gr(h,this.graph,{view:f,unmounted:m})){m||(this.registerUnmountedView(f),f.unmount()),e.unmounted[d]|=y,delete g[d],a+=1;continue}m&&(y|=Wd.FLAG_INSERT,s+=1),y|=this.registerMountedView(f)}m=f,f=this.updateView(f,y,t);0<f&&((y=m.cell)&&y.isEdge()&&(m.hasAction(f,"source")&&!this.isEdgeTerminalVisible(y,"source")&&(f=m.removeAction(f,"source"),f|=Wd.FLAG_REMOVE),m.hasAction(f,"target")&&!this.isEdgeTerminalVisible(y,"target")&&(f=m.removeAction(f,"target"),f|=Wd.FLAG_REMOVE))),0<f&&(g[d]=f,!this.graph.hook.onViewPostponed(m,f,t)||g[d])?(c+=1,i=!1):(u<r&&(r=u),l+=1,delete g[d])}else delete g[d]}}return{empty:i,priority:r,mountedCount:s,unmountedCount:a,updatedCount:l,postponedCount:c}},Wd.prototype.updateViewsAsync=function(t,e){var n=this;void 0===t&&(t={}),void 0===e&&(e={processed:0,priority:Wd.MIN_PRIORITY});var o=this.updates,i=o.animationId;if(i){Xs(i),0===e.processed&&"function"==typeof(c=t.before)&&Gr(c,this.graph,this.graph);var r=this.updateViewsBatch(t),s=this.checkViewImpl({checkView:t.checkView,mountedBatchSize:Wd.MOUNT_BATCH_SIZE-r.mountedCount,unmountedBatchSize:Wd.MOUNT_BATCH_SIZE-r.unmountedCount}),a=e.processed,l=o.count,c=s.mountedCount,s=s.unmountedCount;0<r.updatedCount&&(a+=r.updatedCount+r.unmountedCount,e.priority=Math.min(r.priority,e.priority),r.empty&&0===c?(r.priority=e.priority,r.mountedCount+=c,r.unmountedCount+=s,this.graph.trigger("render:done",{stats:r,options:t}),e.processed=0,o.count=0):e.processed=a);s=t.progress;if(l&&"function"==typeof s&&Gr(s,this.graph,{total:l,done:r.empty,current:a}),o.animationId!==i)return}o.animationId=Ws(function(){n.updateViewsAsync(t,e)})},Wd.prototype.registerMountedView=function(t){var e=t.cid,n=this.updates;if(e in n.mounted)return 0;n.mounted[e]=!0,n.mountedCids.push(e);t=n.unmounted[e]||0;return delete n.unmounted[e],t},Wd.prototype.registerUnmountedView=function(t){var e=t.cid,n=this.updates;if(e in n.unmounted)return 0;n.unmounted[e]|=Wd.FLAG_INSERT;t=n.unmounted[e];return n.unmountedCids.push(e),delete n.mounted[e],t},Wd.prototype.isViewMounted=function(t){return null!=t&&t.cid in this.updates.mounted},Wd.prototype.getMountedViews=function(){return Object.keys(this.updates.mounted).map(function(t){return U.CellView.views[t]})},Wd.prototype.getUnmountedViews=function(){return Object.keys(this.updates.unmounted).map(function(t){return U.CellView.views[t]})},Wd.prototype.checkMountedViews=function(t,e){var n=0;if("function"!=typeof t)return n;for(var o=this.updates,i=o.mounted,r=o.mountedCids,s=null==e?r.length:Math.min(r.length,e),a=0;a<s;a+=1){var l,c=r[a];c in i&&(null!=(l=U.CellView.views[c])&&(Gr(t,this.graph,{view:l,unmounted:!0})?r.push(c):(n+=1,this.registerUnmountedView(l)&&l.unmount())))}return r.splice(0,s),n},Wd.prototype.checkUnmountedViews=function(t,e){var n=0;"function"!=typeof t&&(t=null);for(var o=this.updates,i=o.unmounted,r=o.unmountedCids,s=null==e?r.length:Math.min(r.length,e),a=0;a<s;a+=1){var l,c,h=r[a];h in i&&(null!=(l=U.CellView.views[h])&&(!t||Gr(t,this.graph,{view:l,unmounted:!1})?(n+=1,(c=this.registerMountedView(l))&&this.scheduleViewUpdate(l,c,l.priority,{mounting:!0})):r.push(h)))}return r.splice(0,s),n},Wd.prototype.checkViewImpl=function(t){void 0===t&&(t={mountedBatchSize:Number.MAX_SAFE_INTEGER,unmountedBatchSize:Number.MAX_SAFE_INTEGER});var e=t.checkView||this.options.checkView,n=this.checkMountedViews(e,t.unmountedBatchSize);return{mountedCount:this.checkUnmountedViews(e,0<n?Math.min(this.updates.unmountedCids.length-n,t.mountedBatchSize):t.mountedBatchSize),unmountedCount:n}},Wd.prototype.checkView=function(t){return void 0===t&&(t={}),this.checkViewImpl(t)},Wd.prototype.isFrozen=function(){return!!this.options.frozen},Wd.prototype.freeze=function(t){void 0===t&&(t={});var e=t.key,n=this.updates,o=this.options.frozen,t=n.freezeKey;if(e&&e!==t){if(o&&t)return;n.frozen=o,n.freezeKey=e}this.options.frozen=!0;o=n.animationId;n.animationId=null,this.isAsync()&&null!=o&&Xs(o),this.graph.trigger("freeze",{key:e})},Wd.prototype.unfreeze=function(e){var o=this;void 0===e&&(e={});var i,r,n=e.key,s=this.updates,t=s.freezeKey;n&&t&&n!==t||(s.freezeKey=null,n&&n===t&&s.frozen)||(i=function(){o.options.frozen=s.frozen=!1,s.sort&&(o.sortViews(),s.sort=!1);var t=e.after;t&&Gr(t,o.graph,o.graph),o.graph.trigger("unfreeze",{key:n})},this.isAsync()?(this.freeze(),r=e.progress,this.updateViewsAsync(ia(ia({},e),{progress:function(t){var e=t.done,n=t.current,t=t.total;r&&Gr(r,o.graph,{done:e,current:n,total:t}),e&&i()}}))):(this.updateViews(e),i()))},Wd.prototype.isAsync=function(){return!!this.options.async},Wd.prototype.setAsync=function(t){this.options.async=t},Wd.prototype.onRemove=function(){this.freeze(),this.removeViews()},Wd.prototype.resetViews=function(t,e){void 0===t&&(t=[]),void 0===e&&(e={}),this.resetUpdates(),this.removeViews(),this.freeze({key:"reset"});for(var n=0,o=t.length;n<o;n+=1)this.renderView(t[n],e);this.unfreeze({key:"reset"}),this.sortViews()},Wd.prototype.removeView=function(t){var e,n,o,i=this.views[t.id];return i&&(e=i.cid,n=(o=this.updates).mounted,o=o.unmounted,i.remove(),delete this.views[t.id],delete n[e],delete o[e]),i},Wd.prototype.removeViews=function(){var e=this;this.views&&Object.keys(this.views).forEach(function(t){t=e.views[t];t&&e.removeView(t.cell)}),this.views={}},Wd.prototype.renderView=function(t,e){void 0===e&&(e={});var n=t.id,o=this.views,i=0,r=o[n];t.isVisible()&&(!t.isEdge()||this.isEdgeTerminalVisible(t,"source")&&this.isEdgeTerminalVisible(t,"target"))&&(r?i=Wd.FLAG_INSERT:(n=this.graph.hook.createCellView(t))&&((r=o[t.id]=n).graph=this.graph,i=this.registerUnmountedView(r)|r.getBootstrapFlag()),r&&this.requestViewUpdate(r,i,r.priority,e))},Wd.prototype.isExactSorting=function(){return"exact"===this.options.sorting},Wd.prototype.sortViews=function(){this.isExactSorting()&&(this.isFrozen()?this.updates.sort=!0:this.sortViewsExact())},Wd.prototype.sortElements=function(t,e){var n=t.map(function(t){var e=t.parentNode,n=e.insertBefore(document.createTextNode(""),t.nextSibling);return function(t){if(e===t)throw new Error("You can't sort elements if any one is a descendant of another.");e.insertBefore(t,n),e.removeChild(n)}});t.sort(e).forEach(function(t,e){return n[e](t)})},Wd.prototype.sortViewsExact=function(){var t=this.view.$(this.view.stage).children("[data-cell-id]").toArray(),n=this.model;this.sortElements(t,function(t,e){t=n.getCell(t.getAttribute("data-cell-id")||""),e=n.getCell(e.getAttribute("data-cell-id")||""),t=t.getZIndex()||0,e=e.getZIndex()||0;return t===e?0:t<e?-1:1})},Wd.prototype.addZPivot=function(t){void 0===t&&(t=0),null==this.zPivots&&(this.zPivots={});var e=this.zPivots,n=e[t];if(n)return n;n=e[t]=document.createComment("z-index:"+(t+1));var o,i=-1/0;for(o in e){var r=+o;r<t&&i<r&&(i=r)}var s=this.view.stage;return i!==-1/0?(e=e[i],s.insertBefore(n,e.nextSibling)):s.insertBefore(n,s.firstChild),n},Wd.prototype.removeZPivots=function(){var e=this;this.zPivots&&Object.keys(this.zPivots).forEach(function(t){t=e.zPivots[t];t&&t.parentNode&&t.parentNode.removeChild(t)}),this.zPivots={}},Wd.prototype.insertView=function(t){var e=this.view.stage;switch(this.options.sorting){case"approx":var n=t.cell.getZIndex(),n=this.addZPivot(n);e.insertBefore(t.container,n);break;case"exact":default:e.appendChild(t.container)}},Wd.prototype.findViewByCell=function(t){if(null==t)return null;t=t instanceof U.Cell?t.id:t;return this.views[t]},Wd.prototype.findViewByElem=function(t){if(null==t)return null;t="string"==typeof t?this.view.stage.querySelector(t):t instanceof Element?t:t[0];if(t){t=this.view.findAttr("data-cell-id",t);if(t)return this.views[t]}return null},Wd.prototype.findViewsFromPoint=function(t){var e=this,n={x:t.x,y:t.y};return this.model.getCells().map(function(t){return e.findViewByCell(t)}).filter(function(t){if(null!=t)return ec(t.container,{target:e.view.stage}).containsPoint(n)})},Wd.prototype.findViewsInArea=function(t,e){var n=this;void 0===e&&(e={});var o=U.Rectangle.create(t);return this.model.getNodes().map(function(t){return n.findViewByCell(t)}).filter(function(t){if(t){t=ec(t.container,{target:n.view.stage});return e.strict?o.containsRect(t):o.isIntersectWithRect(t)}})},Wd.prototype.dispose=function(){this.resetUpdates(),this.stopListening()},sa([yn.dispose()],Wd.prototype,"dispose",null),Wd);function Wd(){return null!==Hd&&Hd.apply(this,arguments)||this}function Xd(t){var e=Ud.call(this)||this,n=t.graph,t=ra(t,["graph"]);return e.graph=n,e.options=ia({tolerance:10},t),e.render(),e.parseFilter(),e.disabled||e.startListening(),e}(pn=qd=qd||{}).FLAG_INSERT=1<<30,pn.FLAG_REMOVE=1<<29,pn.MOUNT_BATCH_SIZE=1e3,pn.UPDATE_BATCH_SIZE=1e3,pn.MIN_PRIORITY=2,pn.SORT_DELAYING_BATCHES=["add","to-front","to-back"],pn.UPDATE_DELAYING_BATCHES=["translate"];var Yd,Jd,Zd,Kd,Qd,tg=(oa(og,Zd=yn),Object.defineProperty(og.prototype,"container",{get:function(){return this.view.container},enumerable:!1,configurable:!0}),Object.defineProperty(og.prototype,"elem",{get:function(){return this.view.background},enumerable:!1,configurable:!0}),og.prototype.init=function(){this.startListening(),this.options.background&&this.draw(this.options.background)},og.prototype.startListening=function(){this.graph.on("scale",this.update,this),this.graph.on("translate",this.update,this)},og.prototype.stopListening=function(){this.graph.off("scale",this.update,this),this.graph.off("translate",this.update,this)},og.prototype.updateBackgroundImage=function(t){void 0===t&&(t={});var e=t.size||"auto auto",n=t.position||"center",o=this.graph.scale(),t=this.graph.translate();"object"==typeof n&&(n=t.tx+o.sx*(n.x||0)+"px "+(t.ty+o.sy*(n.y||0))+"px"),"object"==typeof e&&(e=(e=U.Rectangle.fromSize(e).scale(o.sx,o.sy)).width+"px "+e.height+"px"),this.view.$(this.elem).css({backgroundSize:e,backgroundPosition:n})},og.prototype.drawBackgroundImage=function(t,e){if(void 0===e&&(e={}),t instanceof HTMLImageElement){var n,o=e.opacity||1,i=e.size,r=e.repeat||"no-repeat",s=Ah.registry.get(r);if("function"==typeof s){var a=e.quality||1;t.width*=a,t.height*=a;s=s(t,e);if(!(s instanceof HTMLCanvasElement))throw new Error("Background pattern must return an HTML Canvas instance");n=s.toDataURL("image/png"),r=e.repeat&&r!==e.repeat?e.repeat:"repeat","object"==typeof i?(i.width*=s.width/t.width,i.height*=s.height/t.height):void 0===i&&(e.size={width:s.width/a,height:s.height/a})}else n=t.src,void 0===i&&(e.size={width:t.width,height:t.height});this.view.$(this.elem).css({opacity:o,backgroundRepeat:r,backgroundImage:"url("+n+")"}),this.updateBackgroundImage(e)}else this.elem.style.backgroundImage=""},og.prototype.updateBackgroundColor=function(t){this.container.style.backgroundColor=t||""},og.prototype.update=function(){this.optionCache&&this.updateBackgroundImage(this.optionCache)},og.prototype.draw=function(t){var e,n=this;void 0===t&&(t={}),this.updateBackgroundColor(t.color),t.image?((e=document.createElement("img")).onload=function(){return n.drawBackgroundImage(e,t)},e.setAttribute("crossorigin","anonymous"),e.src=t.image,this.optionCache=yo(t)):(this.drawBackgroundImage(null),this.optionCache=null)},og.prototype.clear=function(){this.draw()},og.prototype.dispose=function(){this.clear(),this.stopListening()},sa([yn.dispose()],og.prototype,"dispose",null),og),eg=(oa(ng,Jd=U.View),Object.defineProperty(ng.prototype,"graph",{get:function(){return this.options.graph},enumerable:!1,configurable:!0}),Object.defineProperty(ng.prototype,"model",{get:function(){return this.graph.model},enumerable:!1,configurable:!0}),ng.prototype.startListening=function(){var t=this.graph,e=this.model;t.on("scale",this.onScale,this),t.on("resize",this.onResize,this),t.on("before:print",this.storeScrollPosition,this),t.on("before:export",this.storeScrollPosition,this),t.on("after:print",this.restoreScrollPosition,this),t.on("after:export",this.restoreScrollPosition,this),this.options.autoResize&&(t.renderer.isAsync()?t.on("render:done",this.onRenderDone,this):(t.on("unfreeze",this.update,this),e.on("reseted",this.update,this),e.on("cell:added",this.update,this),e.on("cell:removed",this.update,this),e.on("cell:changed",this.update,this),e.on("batch:stop",this.onBatchStop,this))),this.delegateBackgroundEvents()},ng.prototype.stopListening=function(){var t=this.graph,e=this.model;t.off("scale",this.onScale,this),t.off("resize",this.onResize,this),t.off("beforeprint",this.storeScrollPosition,this),t.off("beforeexport",this.storeScrollPosition,this),t.off("afterprint",this.restoreScrollPosition,this),t.off("afterexport",this.restoreScrollPosition,this),t.off("render:done",this.onRenderDone,this),t.off("unfreeze",this.update,this),e.off("reseted",this.update,this),e.off("cell:added",this.update,this),e.off("cell:removed",this.update,this),e.off("cell:changed",this.update,this),e.off("batch:stop",this.onBatchStop,this),this.undelegateBackgroundEvents()},ng.prototype.delegateBackgroundEvents=function(t){var o=this,i=t||Td.events;this.delegatedHandlers=Object.keys(i).reduce(function(t,e){var n=i[e];return-1===e.indexOf(" ")&&("function"==typeof n?t[e]=n:"function"==typeof(n=o.graph.view[n])&&(n=n.bind(o.graph.view),t[e]=n)),t},{}),this.onBackgroundEvent=this.onBackgroundEvent.bind(this),Object.keys(this.delegatedHandlers).forEach(function(t){o.delegateEvent(t,{guarded:!1},o.onBackgroundEvent)})},ng.prototype.undelegateBackgroundEvents=function(){var e=this;Object.keys(this.delegatedHandlers).forEach(function(t){e.undelegateEvent(t,e.onBackgroundEvent)})},ng.prototype.onBackgroundEvent=function(t){var e=t.target;(this.options.pageVisible?this.options.background?this.background!==e:this.content!==e:this.graph.view.background!==e&&this.graph.view.grid!==e)||"function"==typeof(t=this.delegatedHandlers[t.type])&&t.apply(this.graph,arguments)},ng.prototype.onRenderDone=function(t){t.stats.priority<2&&this.update()},ng.prototype.onResize=function(){this.cachedCenterPoint&&(this.centerPoint(this.cachedCenterPoint.x,this.cachedCenterPoint.y),this.updatePageBreak())},ng.prototype.onScale=function(t){var e=t.sx,n=t.sy,o=t.ox,t=t.oy;this.updateScale(e,n),(o||t)&&(this.centerPoint(o,t),this.updatePageBreak()),"function"==typeof this.options.fitTocontentOptions&&this.update()},ng.prototype.storeScrollPosition=function(){this.cachedScrollLeft=this.container.scrollLeft,this.cachedScrollTop=this.container.scrollTop},ng.prototype.restoreScrollPosition=function(){this.container.scrollLeft=this.cachedScrollLeft,this.container.scrollTop=this.cachedScrollTop,this.cachedScrollLeft=null,this.cachedScrollTop=null},ng.prototype.beforeManipulation=function(){(U.Platform.IS_IE||U.Platform.IS_EDGE)&&this.$container.css("visibility","hidden")},ng.prototype.afterManipulation=function(){(U.Platform.IS_IE||U.Platform.IS_EDGE)&&this.$container.css("visibility","visible")},ng.prototype.updatePageBreak=function(){this.pageBreak&&this.pageBreak.parentNode&&this.pageBreak.parentNode.removeChild(this.pageBreak);var t=this.options;if(t.pageVisible&&t.pageBreak){var e=Math.round(this.graph.options.width/this.sx),n=Math.round(this.graph.options.height/this.sy),o=t.pageWidth||e,i=t.pageHeight||n;if(o<e||i<n){this.pageBreak=document.createElement("div"),Qr(this.pageBreak,this.prefixClassName("graph-pagebreak")),this.$(this.graph.view.grid).after(this.pageBreak);for(var r=1,s=Math.floor(e/o);r<s;r+=1)this.$("<div/>").addClass(this.prefixClassName("graph-pagebreak-vertical")).css({left:r*o}).appendTo(this.pageBreak);for(r=1,s=Math.floor(n/i);r<s;r+=1)this.$("<div/>").addClass(this.prefixClassName("graph-pagebreak-horizontal")).css({top:r*i}).appendTo(this.pageBreak)}}},ng.prototype.onBatchStop=function(t){qd.UPDATE_DELAYING_BATCHES.includes(t.name)&&this.update()},ng.prototype.update=function(){var t=this.getClientSize();this.cachedCenterPoint=this.clientToLocalPoint(t.width/2,t.height/2);t=this.options.fitTocontentOptions;"function"==typeof t&&(t=Gr(t,this,this));t=ia({gridWidth:this.options.pageWidth,gridHeight:this.options.pageHeight,allowNewOrigin:"negative"},t);this.graph.fitToContent(this.getFitToContentOptions(t))},ng.prototype.getFitToContentOptions=function(t){var e=this.sx,n=this.sy;return t.gridWidth&&(t.gridWidth*=e),t.gridHeight&&(t.gridHeight*=n),t.minWidth&&(t.minWidth*=e),t.minHeight&&(t.minHeight*=n),"object"==typeof t.padding?t.padding={left:(t.padding.left||0)*e,right:(t.padding.right||0)*e,top:(t.padding.top||0)*n,bottom:(t.padding.bottom||0)*n}:"number"==typeof t.padding&&(t.padding=t.padding*e),t},ng.prototype.updateScale=function(t,e){var n=this.graph.options,o=t/this.sx,i=e/this.sy;this.sx=t,this.sy=e,this.graph.translate(n.x*o,n.y*i),this.graph.resizeGraph(n.width*o,n.height*i)},ng.prototype.scrollbarPosition=function(t,e,n){if(null==t&&null==e)return{left:this.container.scrollLeft,top:this.container.scrollTop};var o={};return"number"==typeof t&&(o.scrollLeft=t),"number"==typeof e&&(o.scrollTop=e),n&&n.animation?this.$container.animate(o,n.animation):this.$container.prop(o),this},ng.prototype.scrollToPoint=function(t,e,n){var o=this.getClientSize(),i=this.graph.matrix(),r={};return"number"==typeof t&&(r.scrollLeft=t-o.width/2+i.e+(this.padding.left||0)),"number"==typeof e&&(r.scrollTop=e-o.height/2+i.f+(this.padding.top||0)),n&&n.animation?this.$container.animate(r,n.animation):this.$container.prop(r),this},ng.prototype.scrollToContent=function(t){var e=this.sx,n=this.sy,o=this.graph.getContentArea().getCenter();return this.scrollToPoint(o.x*e,o.y*n,t)},ng.prototype.scrollToCell=function(t,e){var n=this.sx,o=this.sy,t=t.getBBox().getCenter();return this.scrollToPoint(t.x*n,t.y*o,e)},ng.prototype.center=function(t){return this.centerPoint(t)},ng.prototype.centerPoint=function(t,e,n){var o,i=this.graph.matrix(),r=i.a,s=i.d,a=-i.e,l=-i.f,c=a+this.graph.options.width,i=l+this.graph.options.height;if("number"==typeof t||"number"==typeof e?(o=n,h=this.getVisibleArea().getCenter(),"number"==typeof t?t*=r:t=h.x,"number"==typeof e?e*=s:e=h.y):(o=t,t=(a+c)/2,e=(l+i)/2),o&&o.padding)return this.positionPoint({x:t,y:e},"50%","50%",o);var r=this.getPadding(),s=this.getClientSize(),h=s.width/2,s=s.height/2,a=h-r.left-t+a,c=h-r.right+t-c,l=s-r.top-e+l,i=s-r.bottom+e-i;return this.addPadding(Math.max(a,0),Math.max(c,0),Math.max(l,0),Math.max(i,0)),this.scrollToPoint(t,e,o||void 0)},ng.prototype.centerContent=function(t){return this.positionContent("center",t)},ng.prototype.centerCell=function(t,e){return this.positionCell(t,"center",e)},ng.prototype.positionContent=function(t,e){var n=this.graph.getContentArea(e);return this.positionRect(n,t,e)},ng.prototype.positionCell=function(t,e,n){t=t.getBBox();return this.positionRect(t,e,n)},ng.prototype.positionRect=function(t,e,n){t=U.Rectangle.create(t);switch(e){case"center":return this.positionPoint(t.getCenter(),"50%","50%",n);case"top":return this.positionPoint(t.getTopCenter(),"50%",0,n);case"top-right":return this.positionPoint(t.getTopRight(),"100%",0,n);case"right":return this.positionPoint(t.getRightMiddle(),"100%","50%",n);case"bottom-right":return this.positionPoint(t.getBottomRight(),"100%","100%",n);case"bottom":return this.positionPoint(t.getBottomCenter(),"50%","100%",n);case"bottom-left":return this.positionPoint(t.getBottomLeft(),0,"100%",n);case"left":return this.positionPoint(t.getLeftMiddle(),0,"50%",n);case"top-left":return this.positionPoint(t.getTopLeft(),0,0,n);default:return this}},ng.prototype.positionPoint=function(t,e,n,o){void 0===o&&(o={});var i=o.padding,r=ra(o,["padding"]),o=Rr(i),i=U.Rectangle.fromSize(this.getClientSize()),o=i.clone().moveAndExpand({x:o.left,y:o.top,width:-o.right-o.left,height:-o.top-o.bottom});(e=jr(e,Math.max(0,o.width)))<0&&(e=o.width+e),(n=jr(n,Math.max(0,o.height)))<0&&(n=o.height+n);n=o.getTopLeft().translate(e,n),i=i.getCenter().diff(n),n=this.zoom(),n=i.scale(1/n,1/n),n=U.Point.create(t).translate(n);return this.centerPoint(n.x,n.y,r)},ng.prototype.zoom=function(t,e){if(null==t)return this.sx;e=e||{};var n,o=this.getClientSize(),i=this.clientToLocalPoint(o.width/2,o.height/2),r=t,o=t;return e.absolute||(r+=this.sx,o+=this.sy),e.scaleGrid&&(r=Math.round(r/e.scaleGrid)*e.scaleGrid,o=Math.round(o/e.scaleGrid)*e.scaleGrid),e.maxScale&&(r=Math.min(e.maxScale,r),o=Math.min(e.maxScale,o)),e.minScale&&(r=Math.max(e.minScale,r),o=Math.max(e.minScale,o)),r=this.graph.transform.clampScale(r),o=this.graph.transform.clampScale(o),i=e.center?(n=r/this.sx,t=o/this.sy,n=e.center.x-(e.center.x-i.x)/n,e.center.y-(e.center.y-i.y)/t):(n=i.x,i.y),this.beforeManipulation(),this.graph.transform.scale(r,o),this.centerPoint(n,i),this.afterManipulation(),this},ng.prototype.zoomToRect=function(t,e){void 0===e&&(e={});var n=U.Rectangle.create(t),t=this.graph;e.contentArea=n,null==e.viewportArea&&(e.viewportArea={x:t.options.x,y:t.options.y,width:this.$container.width(),height:this.$container.height()}),this.beforeManipulation(),t.transform.scaleContentToFitImpl(e,!1);n=n.getCenter();return this.centerPoint(n.x,n.y),this.afterManipulation(),this},ng.prototype.zoomToFit=function(t){return void 0===t&&(t={}),this.zoomToRect(this.graph.getContentArea(t),t)},ng.prototype.transitionToPoint=function(e,n,t){var o=this;"object"==typeof e&&(t=n,n=e.y,e=e.x),null==t&&(t={});var i,r,s=this.sx,a=Math.max(t.scale||s,1e-6),l=this.getClientSize(),c=new U.Point(e,n),l=this.clientToLocalPoint(l.width/2,l.height/2);s===a?i="translate("+(i=l.diff(c).scale(s,s).round()).x+"px,"+i.y+"px)":(r=a/(s-a)*c.distance(l),r=l.clone().move(c,r),r=this.localToBackgroundPoint(r).round(),i="scale("+a/s+")",r=r.x+"px "+r.y+"px");var h=t.onTransitionEnd;return this.$container.addClass(Yd.transitionClassName),this.$content.off(Yd.transitionEventName).on(Yd.transitionEventName,function(t){o.syncTransition(a,{x:e,y:n}),"function"==typeof h&&Gr(h,o,t.originalEvent)}).css({transform:i,transformOrigin:r,transition:"transform",transitionDuration:t.duration||"1s",transitionDelay:t.delay,transitionTimingFunction:t.timing}),this},ng.prototype.syncTransition=function(t,e){return this.beforeManipulation(),this.graph.scale(t),this.removeTransition(),this.centerPoint(e.x,e.y),this.afterManipulation(),this},ng.prototype.removeTransition=function(){return this.$container.removeClass(Yd.transitionClassName),this.$content.off(Yd.transitionEventName).css({transform:"",transformOrigin:"",transition:"",transitionDuration:"",transitionDelay:"",transitionTimingFunction:""}),this},ng.prototype.transitionToRect=function(t,e){void 0===e&&(e={});var n=U.Rectangle.create(t),o=e.maxScale||1/0,i=e.minScale||Number.MIN_VALUE,r=e.scaleGrid||null,s=e.visibility||1,a=e.center?U.Point.create(e.center):n.getCenter(),l=this.getClientSize(),t=l.width*s,s=l.height*s,n=new U.Rectangle(a.x-t/2,a.y-s/2,t,s).getMaxUniformScaleToFit(n,a),n=Math.min(n,o);return r&&(n=Math.floor(n/r)*r),n=Math.max(i,n),this.transitionToPoint(a,ia({scale:n},e))},ng.prototype.startPanning=function(t){t=this.normalizeEvent(t);this.clientX=t.clientX,this.clientY=t.clientY,this.trigger("pan:start",{e:t}),this.$(document.body).on({"mousemove.panning touchmove.panning":this.pan.bind(this),"mouseup.panning touchend.panning":this.stopPanning.bind(this)}),this.$(window).on("mouseup.panning",this.stopPanning.bind(this))},ng.prototype.pan=function(t){var e=this.normalizeEvent(t),n=e.clientX-this.clientX,t=e.clientY-this.clientY;this.container.scrollTop-=t,this.container.scrollLeft-=n,this.clientX=e.clientX,this.clientY=e.clientY},ng.prototype.stopPanning=function(t){this.$(document.body).off(".panning"),this.$(window).off(".panning"),this.trigger("pan:stop",{e:t})},ng.prototype.clientToLocalPoint=function(t,e){var n="object"==typeof t?t.x:t,t="object"==typeof t?t.y:e,e=this.graph.matrix();return n+=this.container.scrollLeft-this.padding.left-e.e,t+=this.container.scrollTop-this.padding.top-e.f,new U.Point(n/e.a,t/e.d)},ng.prototype.localToBackgroundPoint=function(t,e){var n="object"==typeof t?U.Point.create(t):new U.Point(t,e),t=this.graph.matrix(),e=this.padding;return Zl(n,t).translate(e.left,e.top)},ng.prototype.resize=function(t,e){t=null!=t?t:this.container.clientWidth,e=null!=e?e:this.container.clientHeight;"number"==typeof t&&(t=Math.round(t)),"number"==typeof e&&(e=Math.round(e)),this.options.width=t,this.options.height=e,this.$container.css({width:t,height:e}),this.update()},ng.prototype.getClientSize=function(){return{width:this.container.clientWidth,height:this.container.clientHeight}},ng.prototype.autoScroll=function(t,e){var n=this.container,o=n.getBoundingClientRect(),i=0,r=0;t<=o.left+10&&(i=-10),e<=o.top+10&&(r=-10),t>=o.right-10&&(i=10),e>=o.bottom-10&&(r=10),0!==i&&(n.scrollLeft+=i),0!==r&&(n.scrollTop+=r)},ng.prototype.addPadding=function(t,e,n,o){var i=this.getPadding();this.padding={left:Math.round(i.left+(t||0)),top:Math.round(i.top+(n||0)),bottom:Math.round(i.bottom+(o||0)),right:Math.round(i.right+(e||0))},i=this.padding,this.$content.css({width:i.left+this.graph.options.width+i.right,height:i.top+this.graph.options.height+i.bottom});i=this.graph.container;return i.style.left=this.padding.left+"px",i.style.top=this.padding.top+"px",this},ng.prototype.getPadding=function(){var t=this.options.padding;return Rr("function"==typeof t?Gr(t,this):t)},ng.prototype.getVisibleArea=function(){var t=this.graph.matrix(),e=this.getClientSize(),t=Ql({x:this.container.scrollLeft||0,y:this.container.scrollTop||0,width:e.width,height:e.height},t.inverse());return t.x-=(this.padding.left||0)/this.sx,t.y-=(this.padding.top||0)/this.sy,t},ng.prototype.isCellVisible=function(t,e){void 0===e&&(e={});var n=t.getBBox(),t=this.getVisibleArea();return e.strict?t.containsRect(n):t.isIntersectWithRect(n)},ng.prototype.isPointVisible=function(t){return this.getVisibleArea().containsPoint(t)},ng.prototype.lock=function(){return this.$container.css("overflow","hidden"),this},ng.prototype.unlock=function(){return this.$container.css("overflow","scroll"),this},ng.prototype.onRemove=function(){this.stopListening()},ng.prototype.dispose=function(){this.$(this.graph.container).insertBefore(this.$container),this.remove()},sa([U.View.dispose()],ng.prototype,"dispose",null),ng);function ng(t){var e=Jd.call(this)||this;e.padding={left:0,top:0,right:0,bottom:0},e.options=Yd.getOptions(t);var n=e.graph.scale();e.sx=n.sx,e.sy=n.sy;t=e.options.width||e.graph.options.width,n=e.options.height||e.graph.options.height;e.container=document.createElement("div"),e.$container=e.$(e.container).addClass(e.prefixClassName(Yd.containerClass)).css({width:t,height:n}),e.options.pageVisible&&e.$container.addClass(e.prefixClassName(Yd.pagedClass)),e.options.className&&e.$container.addClass(e.options.className);t=e.graph,n=t.container;return n.parentNode&&e.$container.insertBefore(n),e.content=document.createElement("div"),e.$content=e.$(e.content).addClass(e.prefixClassName(Yd.contentClass)).css({width:t.options.width,height:t.options.height}),e.options.background&&(e.background=document.createElement("div"),e.$background=e.$(e.background).addClass(e.prefixClassName(Yd.backgroundClass)),e.$content.append(e.background)),e.options.pageVisible||(e.$content.append(e.graph.view.background),e.$content.append(e.graph.view.grid)),e.$content.append(n),e.$content.appendTo(e.container),e.startListening(),e.options.pageVisible||(e.graph.grid.update(),e.graph.background.update()),e.backgroundManager=new ng.Background(e),e}function og(){return null!==Zd&&Zd.apply(this,arguments)||this}function ig(t,e,n,o){var i;void 0===o&&(o={}),n&&(e=(i=n.graph).view.normalizeEvent(e),i=i.snapToGrid(e.clientX,e.clientY),n.notify(t,ia({e:e,view:n,node:n.cell,cell:n.cell,x:i.x,y:i.y},o)))}function rg(t){var e=Qd.call(this,t.graph)||this;return(e.scroller=t).options.background&&e.draw(t.options.background),e}wr=eg=eg||{},oa(rg,Qd=tg),Object.defineProperty(rg.prototype,"elem",{get:function(){return this.scroller.background},enumerable:!1,configurable:!0}),Object.defineProperty(rg.prototype,"container",{get:function(){return this.scroller.content},enumerable:!1,configurable:!0}),rg.prototype.init=function(){this.graph.on("scale",this.update,this),this.graph.on("translate",this.update,this)},an=rg,wr.Background=an,(Kd=Yd=Yd||{}).containerClass="graph-scroller",Kd.panningClass=Kd.containerClass+"-panning",Kd.pannableClass=Kd.containerClass+"-pannable",Kd.pagedClass=Kd.containerClass+"-paged",Kd.contentClass=Kd.containerClass+"-content",Kd.backgroundClass=Kd.containerClass+"-background",Kd.transitionClassName="transition-in-progress",Kd.transitionEventName="transitionend.graph-scroller-transition",Kd.defaultOptions={padding:function(){var t=this.getClientSize(),e=Math.max(this.options.minVisibleWidth||0,1)||1,n=Math.max(this.options.minVisibleHeight||0,1)||1,e=Math.max(t.width-e,0),n=Math.max(t.height-n,0);return{left:e,top:n,right:e,bottom:n}},minVisibleWidth:50,minVisibleHeight:50,pageVisible:!1,pageBreak:!1,autoResize:!0},Kd.getOptions=function(t){var e=Mi({},Kd.defaultOptions,t),t=t.graph;return null==e.pageWidth&&(e.pageWidth=t.options.width),null==e.pageHeight&&(e.pageHeight=t.options.height),e};var sg,ag=(Object.defineProperty(lg.prototype,"handleClassName",{get:function(){return sg.handle},enumerable:!1,configurable:!0}),Object.defineProperty(lg.prototype,"pie",{get:function(){return ia(ia({},lg.defaultPieOptions),this.handleOptions.pie)},enumerable:!1,configurable:!0}),lg.prototype.initHandles=function(){var n,t,o=this;this.handles=[],this.handleOptions.handles&&this.handleOptions.handles.forEach(function(t){return o.addHandle(t)}),"pie"===this.handleOptions.type&&(this.pie.toggles&&(n=sg.pieToggle,this.$pieToggles={},this.pie.toggles.forEach(function(t){var e=o.$("<div/>");o.applyAttrs(e,t.attrs),e.addClass(n).addClass(n+"-pos-"+(t.position||"e")).attr("data-name",t.name).appendTo(o.container),o.$pieToggles[t.name]=e})),this.setPieIcons()),this.$handleContainer&&(t=this.handleOptions.type||"surround",this.$handleContainer.addClass(sg.wrap).addClass(sg.animate).addClass(sg.handle+"-"+t)),this.delegateEvents(((t={})["mousedown ."+sg.handle]="onHandleMouseDown",t["touchstart ."+sg.handle]="onHandleMouseDown",t["mousedown ."+sg.pieToggle]="onPieToggleMouseDown",t["touchstart ."+sg.pieToggle]="onPieToggleMouseDown",t))},lg.prototype.onHandleMouseDown=function(t){var e=this.$(t.currentTarget).closest("."+sg.handle).attr("data-action");e&&(t.preventDefault(),t.stopPropagation(),this.setEventData(t,{action:e,clientX:t.clientX,clientY:t.clientY,startX:t.clientX,startY:t.clientY}),"mousedown"===t.type&&2===t.button?this.triggerHandleAction(e,"contextmenu",t):(this.triggerHandleAction(e,"mousedown",t),this.delegateDocumentEvents({mousemove:"onHandleMouseMove",touchmove:"onHandleMouseMove",mouseup:"onHandleMouseUp",touchend:"onHandleMouseUp",touchcancel:"onHandleMouseUp"},t.data)))},lg.prototype.onHandleMouseMove=function(t){var e=this.getEventData(t).action;e&&this.triggerHandleAction(e,"mousemove",t)},lg.prototype.onHandleMouseUp=function(t){var e=this.getEventData(t).action;e&&(this.triggerHandleAction(e,"mouseup",t),this.undelegateDocumentEvents())},lg.prototype.triggerHandleAction=function(t,e,n,o){n.preventDefault(),n.stopPropagation();var i=this.normalizeEvent(n),r=this.getEventData(i),s=this.graph.snapToGrid(i.clientX,i.clientY),a=this.graph.snapToGrid(r.clientX,r.clientY),l=s.x-a.x,a=s.y-a.y;this.trigger("action:"+t+":"+e,ia({e:i,dx:l,dy:a,x:s.x,y:s.y,offsetX:n.clientX-r.startX,offsetY:n.clientY-r.startY},o)),r.clientX=n.clientX,r.clientY=n.clientY},lg.prototype.onPieToggleMouseDown=function(t){t.stopPropagation();t=this.$(t.target).closest("."+sg.pieToggle).attr("data-name");this.isOpen(t)||this.isOpen()&&this.toggleState(),this.toggleState(t)},lg.prototype.setPieIcons=function(){var r=this;"pie"===this.handleOptions.type&&this.$handleContainer.find("."+sg.handle).each(function(t,e){var n=r.$(e),o=n.attr("data-action"),i=sg.pieSlice,o=r.getHandle(o);o&&o.icon||(!(o=window.getComputedStyle(e,":before").getPropertyValue("content"))||"none"===o||(e=n.find("."+i+"-txt")).length&&U.Vector.create(e[0]).text(o.replace(/['"]/g,"")),!(o=n.css("background-image"))||(o=o.match(/url\(['"]?([^'"]+)['"]?\)/))&&(o=o[1],0<(i=n.find("."+i+"-img")).length&&U.Vector.create(i[0]).attr("xlink:href",o)))})},lg.prototype.getHandleIdx=function(e){return this.handles.findIndex(function(t){return t.name===e})},lg.prototype.hasHandle=function(t){return 0<=this.getHandleIdx(t)},lg.prototype.getHandle=function(e){return this.handles.find(function(t){return t.name===e})},lg.prototype.renderHandle=function(t){var e,n,o,i,r,s,a,l,c=this.$("<div/>").addClass(sg.handle+" "+sg.handle+"-"+t.name).attr("data-action",t.name).prop("draggable",!1);return"pie"===this.handleOptions.type?(i=this.getHandleIdx(t.name),e=((r=(a=this.pie).outerRadius)+(o=a.innerRadius))/2,s=new U.Point(r,r),o=Bl(o,r,n=i*(l=U.Angle.toRad(a.sliceAngle))+U.Angle.toRad(a.startAngle),n+l),i=U.Vector.create("svg").addClass(sg.pieSlice+"-svg"),r=U.Vector.create("path").addClass(sg.pieSlice).attr("d",o).translate(r,r),l=U.Point.fromPolar(e,-n-l/2,s).toJSON(),s=a.iconSize,a=U.Vector.create("image").attr(l).addClass(sg.pieSlice+"-img"),l.y=l.y+s-2,l=U.Vector.create("text",{"font-size":s}).attr(l).addClass(sg.pieSlice+"-txt"),a.attr({width:s,height:s}),a.translate(-s/2,-s/2),l.translate(-s/2,-s/2),i.append([r,a,l]),c.append(i.node)):(c.addClass(sg.handle+"-pos-"+t.position),t.content&&("string"==typeof t.content?c.html(t.content):c.append(t.content))),this.updateHandleIcon(c,t.icon),this.applyAttrs(c,t.attrs),c},lg.prototype.addHandle=function(n){var o,i=this;return this.hasHandle(n.name)||(this.handles.push(n),(o=n.events)&&Object.keys(o).forEach(function(t){var e=o[t],t="action:"+n.name+":"+t;"string"==typeof e?i.on(t,i[e],i):i.on(t,e)}),this.$handleContainer&&this.$handleContainer.append(this.renderHandle(n))),this},lg.prototype.addHandles=function(t){var e=this;return t.forEach(function(t){return e.addHandle(t)}),this},lg.prototype.removeHandles=function(){for(;this.handles.length;)this.removeHandle(this.handles[0].name);return this},lg.prototype.removeHandle=function(e){var n=this,t=this.getHandleIdx(e),o=this.handles[t];return o&&(o.events&&Object.keys(o.events).forEach(function(t){n.off("action:"+e+":"+t)}),this.getHandleElem(e).remove(),this.handles.splice(t,1)),this},lg.prototype.changeHandle=function(t,e){var n=this.getHandle(t);return n&&(this.removeHandle(t),this.addHandle(ia(ia({},n),e))),this},lg.prototype.toggleHandle=function(t,e){var n,o=this.getHandle(t);return o&&(n=this.getHandleElem(t),t=sg.handle+"-selected",void 0===e&&(e=!n.hasClass(t)),n.toggleClass(t,e),(o=e?o.iconSelected:o.icon)&&this.updateHandleIcon(n,o)),this},lg.prototype.selectHandle=function(t){return this.toggleHandle(t,!0)},lg.prototype.deselectHandle=function(t){return this.toggleHandle(t,!1)},lg.prototype.deselectAllHandles=function(){var e=this;return this.handles.forEach(function(t){return e.deselectHandle(t.name)}),this},lg.prototype.getHandleElem=function(t){return this.$handleContainer.find("."+sg.handle+"-"+t)},lg.prototype.updateHandleIcon=function(t,e){var n;"pie"===this.handleOptions.type?(n=t.find("."+sg.pieSliceImg),this.$(n[0]).attr("xlink:href",e||"")):t.css("background-image",e?"url("+e+")":"")},lg.prototype.isRendered=function(){return null!=this.$handleContainer},lg.prototype.isOpen=function(t){return!!this.isRendered()&&(t?this.$pieToggles[t].hasClass(sg.pieToggleOpened):this.$handleContainer.hasClass(""+sg.pieOpended))},lg.prototype.toggleState=function(e){var t,n,o=this;this.isRendered()&&(t=this.$handleContainer,Object.keys(this.$pieToggles).forEach(function(t){o.$pieToggles[t].removeClass(sg.pieToggleOpened)}),this.isOpen()?(this.trigger("pie:close",{name:e}),t.removeClass(sg.pieOpended)):(this.trigger("pie:open",{name:e}),e&&((n=(n=this.pie.toggles)&&n.find(function(t){return t.name===e}))&&t.attr({"data-pie-toggle-name":n.name,"data-pie-toggle-position":n.position}),this.$pieToggles[e].addClass(sg.pieToggleOpened)),t.addClass(sg.pieOpended)))},lg.prototype.applyAttrs=function(t,o){var i;o&&(i=U.View.$(t),Object.keys(o).forEach(function(t){var e=i.find(t).addBack().filter(t),n=o[t],t=n.class,n=ra(n,["class"]);t&&e.addClass(t),e.attr(n)}))},lg);function lg(){}(ag=ag||{}).defaultPieOptions={innerRadius:20,outerRadius:50,sliceAngle:45,startAngle:0,iconSize:14,toggles:[{name:"default",position:"e"}]},(ch=sg=sg||{}).handle=U.View.prototype.prefixClassName("widget-handle"),ch.wrap=ch.handle+"-wrap",ch.animate=ch.handle+"-animate",ch.pieOpended=ch.handle+"-pie-opened",ch.pieToggle=ch.handle+"-pie-toggle",ch.pieToggleOpened=ch.handle+"-pie-toggle-opened",ch.pieSlice=ch.handle+"-pie-slice",ch.pieSliceImg=ch.handle+"-pie-slice-img";var cg,hg,ug,nn=(oa(gg,ug=U.View),gg.ensureCache=function(){return this.instanceCache.has(this)||this.instanceCache.set(this,{}),this.instanceCache.get(this)},gg.register=function(t,e){null==e&&(e=t.graph);var n=this.ensureCache(),o=n[e.view.cid];null==o&&(o=n[e.view.cid]={}),o[t.cid]=t},gg.unregister=function(t,e){null==e&&(e=t.graph);var n=this.ensureCache();n[e.view.cid]&&delete n[e.view.cid][t.cid]},gg.removeInstances=function(t){var e=this.ensureCache()[t.view.cid];e&&Object.keys(e).forEach(function(t){t=e[t];t&&t.remove()})},gg.getInstances=function(t){return this.ensureCache()[t.view.cid]||{}},gg.prototype.init=function(t){},gg.prototype.render=function(){return this},gg.prototype.startListening=function(){!1!==this.options.clearOnBlankMouseDown&&this.graph.on("blank:mousedown",this.remove,this)},gg.prototype.stopListening=function(){!1!==this.options.clearOnBlankMouseDown&&this.graph.off("blank:mousedown",this.remove,this)},gg.prototype.remove=function(){return this.stopListening(),this.constructor.unregister(this),ug.prototype.remove.call(this)},gg.prototype.dispose=function(){this.remove()},gg.instanceCache=new WeakMap,sa([U.View.dispose()],gg.prototype,"dispose",null),gg),pg=(oa(dg,hg=U.View),Object.defineProperty(dg.prototype,"graph",{get:function(){return this.options.graph},enumerable:!1,configurable:!0}),Object.defineProperty(dg.prototype,"boxClassName",{get:function(){return this.prefixClassName(cg.classNames.box)},enumerable:!1,configurable:!0}),Object.defineProperty(dg.prototype,"$boxes",{get:function(){return this.$container.children("."+this.boxClassName)},enumerable:!1,configurable:!0}),Object.defineProperty(dg.prototype,"handleOptions",{get:function(){return this.options},enumerable:!1,configurable:!0}),dg.prototype.startListening=function(){var t,e=this.graph,n=this.collection;this.delegateEvents(((t={})["mousedown ."+this.boxClassName]="onSelectionBoxMouseDown",t["touchstart ."+this.boxClassName]="onSelectionBoxMouseDown",t),!0),e.on("scale",this.onTransformed,this),e.on("translate",this.onTransformed,this),e.model.on("updated",this.onModelUpdated,this),n.on("added",this.onCellAdded,this),n.on("removed",this.onCellRemoved,this),n.on("reseted",this.onReseted,this),n.on("updated",this.onCollectionUpdated,this),n.on("node:change:position",this.onNodePositionChanged,this),n.on("cell:change:*",this.onCellChanged,this)},dg.prototype.stopListening=function(){var t=this.graph,e=this.collection;this.undelegateEvents(),t.off("scale",this.onTransformed,this),t.off("translate",this.onTransformed,this),t.model.off("updated",this.onModelUpdated,this),e.off("added",this.onCellAdded,this),e.off("removed",this.onCellRemoved,this),e.off("reseted",this.onReseted,this),e.off("updated",this.onCollectionUpdated,this),e.off("node:change:position",this.onNodePositionChanged,this),e.off("cell:change:*",this.onCellChanged,this)},dg.prototype.onRemove=function(){this.stopListening()},dg.prototype.onTransformed=function(){this.updateSelectionBoxes({async:!1})},dg.prototype.onCellChanged=function(){this.updateSelectionBoxes()},dg.prototype.onNodePositionChanged=function(t){var e,n,o=t.node,i=t.options;!0===this.options.showNodeSelectionBox||this.translating||(this.translating=!0,e=o.position(),n=o.previous("position"),t=e.x-n.x,n=e.y-n.y,0==t&&0==n||this.translateSelectedNodes(t,n,o,i),this.translating=!1)},dg.prototype.onModelUpdated=function(t){t=t.removed;t&&t.length&&this.unselect(t)},dg.prototype.isEmpty=function(){return this.length<=0},dg.prototype.isSelected=function(t){return this.collection.has(t)},Object.defineProperty(dg.prototype,"length",{get:function(){return this.collection.length},enumerable:!1,configurable:!0}),Object.defineProperty(dg.prototype,"cells",{get:function(){return this.collection.toArray()},enumerable:!1,configurable:!0}),dg.prototype.select=function(t,e){void 0===e&&(e={}),e.dryrun=!0;t=this.filter(Array.isArray(t)?t:[t]);return this.collection.add(t,e),this},dg.prototype.unselect=function(t,e){return void 0===e&&(e={}),e.dryrun=!0,this.collection.remove(Array.isArray(t)?t:[t],e),this},dg.prototype.reset=function(t,e){if(void 0===e&&(e={}),t){var n=this.cells,t=this.filter(Array.isArray(t)?t:[t]),o={},i={};n.forEach(function(t){return o[t.id]=t}),t.forEach(function(t){return i[t.id]=t});var r=[],s=[];return t.forEach(function(t){o[t.id]||r.push(t)}),n.forEach(function(t){i[t.id]||s.push(t)}),s.length&&this.unselect(s,ia(ia({},e),{ui:!0})),r.length&&this.select(r,ia(ia({},e),{ui:!0})),0===s.length&&0===r.length&&this.updateContainer(),this}return this.clean(e)},dg.prototype.clean=function(t){return void 0===t&&(t={}),this.length&&this.collection.reset([],ia(ia({},t),{ui:!0})),this},dg.prototype.setFilter=function(t){this.options.filter=t},dg.prototype.setContent=function(t){this.options.content=t},dg.prototype.startSelecting=function(t){t=this.normalizeEvent(t),this.clean();var e,n,o,i,r=this.graph.container;i=null!=t.offsetX&&null!=t.offsetY&&r.contains(t.target)?(o=t.offsetX,t.offsetY):(e=this.$(r).offset(),n=r.scrollLeft,i=r.scrollTop,o=t.clientX-e.left+window.pageXOffset+n,t.clientY-e.top+window.pageYOffset+i),this.$container.css({top:i,left:o,width:1,height:1}),this.setEventData(t,{action:"selecting",clientX:t.clientX,clientY:t.clientY,offsetX:o,offsetY:i}),this.delegateDocumentEvents(cg.documentEvents,t.data)},dg.prototype.filter=function(t){var e=this,n=this.options.filter;return Array.isArray(n)?t.filter(function(t){return!n.includes(t)&&!n.includes(t.shape)}):"function"==typeof n?t.filter(function(t){return Gr(n,e.graph,t)}):t},dg.prototype.stopSelecting=function(t){var e=this.graph;switch(this.getEventData(t).action){case"selecting":var n=this.$container.width(),o=this.$container.height(),i=this.$container.offset(),r=e.pageToLocal(i.left,i.top),i=e.transform.getScale();n/=i.sx,o/=i.sy;o=new U.Rectangle(r.x,r.y,n,o),o=this.getNodesInArea(o).map(function(t){return t.cell});this.reset(o),this.hideRubberband();break;case"translating":this.graph.model.stopBatch("move-selection");e=e.snapToGrid(t.clientX,t.clientY);this.notifyBoxEvent("box:mouseup",t,e.x,e.y);break;default:this.clean()}},dg.prototype.onMouseUp=function(t){this.getEventData(t).action&&(this.stopSelecting(t),this.undelegateDocumentEvents())},dg.prototype.onSelectionBoxMouseDown=function(t){var e=this.normalizeEvent(t);this.options.movable&&this.startTranslating(e);t=this.getCellViewFromElem(e.target);this.setEventData(e,{activeView:t});t=this.graph.snapToGrid(e.clientX,e.clientY);this.notifyBoxEvent("box:mousedown",e,t.x,t.y),this.delegateDocumentEvents(cg.documentEvents,e.data)},dg.prototype.startTranslating=function(t){this.graph.model.startBatch("move-selection");var e=this.graph.snapToGrid(t.clientX,t.clientY);this.setEventData(t,{action:"translating",clientX:e.x,clientY:e.y})},dg.prototype.adjustSelection=function(t){var e=this.normalizeEvent(t),n=this.getEventData(e);switch(n.action){case"selecting":!0!==(l=n).moving&&(this.$container.appendTo(this.graph.container),this.showRubberband(),l.moving=!0);var o=e.clientX-l.clientX,i=e.clientY-l.clientY,r=parseInt(this.$container.css("left"),10),s=parseInt(this.$container.css("top"),10);this.$container.css({left:o<0?l.offsetX+o:r,top:i<0?l.offsetY+i:s,width:Math.abs(o),height:Math.abs(i)});break;case"translating":var a,l=n,s=this.graph.snapToGrid(e.clientX,e.clientY),n=(o=s.x-l.clientX,i=s.y-l.clientY,this.graph.hook.getRestrictArea());n&&(e=this.collection.toArray(),a=U.Cell.getCellsBBox(e),o<(e=n.x-a.x)&&(o=e),i<(e=n.y-a.y)&&(i=e),(e=n.x+n.width-(a.x+a.width))<o&&(o=e),(a=n.y+n.height-(a.y+a.height))<i&&(i=a)),(o||i)&&(this.translateSelectedNodes(o,i),this.boxesUpdated?1<this.collection.length&&this.updateSelectionBoxes():(a=this.graph.transform.getScale(),this.$boxes.add(this.$selectionContainer).css({left:"+="+o*a.sx,top:"+="+i*a.sy})),l.clientX=s.x,l.clientY=s.y),this.notifyBoxEvent("box:mousemove",t,s.x,s.y)}this.boxesUpdated=!1},dg.prototype.translateSelectedNodes=function(n,o,i,r){var s=this,a={};this.collection.toArray().forEach(function(t){var e;a[t.id]||t===i||(e=ia(ia({},r),{selection:s.cid}),t.translate(n,o,e),t.getDescendants({deep:!0}).forEach(function(t){a[t.id]=!0}),s.graph.model.getConnectedEdges(t).forEach(function(t){a[t.id]||(t.translate(n,o,e),a[t.id]=!0)}))})},dg.prototype.getNodesInArea=function(t){var e=this.graph,n={strict:this.options.strict};return this.options.useCellGeometry?e.model.getNodesInArea(t,n).map(function(t){return e.renderer.findViewByCell(t)}).filter(function(t){return null!=t}):e.renderer.findViewsInArea(t,n)},dg.prototype.notifyBoxEvent=function(t,e,n,o){var i=this.getEventData(e).activeView;this.trigger(t,{e:e,view:i,x:n,y:o,cell:i.cell})},dg.prototype.getSelectedClassName=function(t){return this.prefixClassName((t.isNode()?"node":"edge")+"-selected")},dg.prototype.addCellSelectedClassName=function(t){var e=this.graph.renderer.findViewByCell(t);e&&e.addClass(this.getSelectedClassName(t))},dg.prototype.removeCellUnSelectedClassName=function(t){var e=this.graph.renderer.findViewByCell(t);e&&e.removeClass(this.getSelectedClassName(t))},dg.prototype.destroySelectionBox=function(t){this.removeCellUnSelectedClassName(t),this.canShowSelectionBox(t)&&(this.$container.find('[data-cell-id="'+t.id+'"]').remove(),0===this.$boxes.length&&this.hide(),this.boxCount=Math.max(0,this.boxCount-1))},dg.prototype.destroyAllSelectionBoxes=function(t){var e=this;t.forEach(function(t){return e.removeCellUnSelectedClassName(t)}),this.hide(),this.$boxes.remove(),this.boxCount=0},dg.prototype.hide=function(){this.$container.removeClass(this.prefixClassName(cg.classNames.rubberband)).removeClass(this.prefixClassName(cg.classNames.selected))},dg.prototype.showRubberband=function(){this.$container.addClass(this.prefixClassName(cg.classNames.rubberband))},dg.prototype.hideRubberband=function(){this.$container.removeClass(this.prefixClassName(cg.classNames.rubberband))},dg.prototype.showSelected=function(){this.$container.removeAttr("style").addClass(this.prefixClassName(cg.classNames.selected))},dg.prototype.createContainer=function(){this.container=document.createElement("div"),this.$container=this.$(this.container),this.$container.addClass(this.prefixClassName(cg.classNames.root)),this.options.className&&this.$container.addClass(this.options.className),this.$selectionContainer=this.$("<div/>").addClass(this.prefixClassName(cg.classNames.inner)),this.$selectionContent=this.$("<div/>").addClass(this.prefixClassName(cg.classNames.content)),this.$selectionContainer.append(this.$selectionContent),this.$selectionContainer.attr("data-selection-length",this.collection.length),this.$container.prepend(this.$selectionContainer),this.$handleContainer=this.$selectionContainer},dg.prototype.updateContainer=function(){var e=this,n={x:1/0,y:1/0},o={x:0,y:0};this.collection.toArray().filter(function(t){return e.canShowSelectionBox(t)}).forEach(function(t){t=e.graph.renderer.findViewByCell(t);t&&(t=t.getBBox({useCellGeometry:e.options.useCellGeometry}),n.x=Math.min(n.x,t.x),n.y=Math.min(n.y,t.y),o.x=Math.max(o.x,t.x+t.width),o.y=Math.max(o.y,t.y+t.height))}),this.$selectionContainer.css({position:"absolute",pointerEvents:"none",left:n.x,top:n.y,width:o.x-n.x,height:o.y-n.y}).attr("data-selection-length",this.collection.length);var t,i=this.options.content;i&&("function"==typeof i?(t=Gr(i,this.graph,this,this.$selectionContent[0]))&&this.$selectionContent.html(t):this.$selectionContent.html(i)),0<this.collection.length&&!this.container.parentNode?this.$container.appendTo(this.graph.container):this.collection.length<=0&&this.container.parentNode&&this.container.parentNode.removeChild(this.container)},dg.prototype.canShowSelectionBox=function(t){return t.isNode()&&!0===this.options.showNodeSelectionBox||t.isEdge()&&!0===this.options.showEdgeSelectionBox},dg.prototype.createSelectionBox=function(t){var e,n;this.addCellSelectedClassName(t),this.canShowSelectionBox(t)&&(n=this.graph.renderer.findViewByCell(t))&&(e=n.getBBox({useCellGeometry:this.options.useCellGeometry}),n=this.boxClassName,this.$("<div/>").addClass(n).addClass(n+"-"+(t.isNode()?"node":"edge")).attr("data-cell-id",t.id).css({position:"absolute",left:e.x,top:e.y,width:e.width,height:e.height}).appendTo(this.container),this.showSelected(),this.boxCount+=1)},dg.prototype.updateSelectionBoxes=function(t){void 0===t&&(t={}),0<this.collection.length&&(this.boxesUpdated=!0,this.graph.renderer.requestViewUpdate(this,1,2,t))},dg.prototype.confirmUpdate=function(){var n=this;return this.boxCount&&(this.hide(),this.$boxes.each(function(t,e){e=n.$(e).remove().attr("data-cell-id"),e=n.collection.get(e);e&&n.createSelectionBox(e)}),this.updateContainer()),0},dg.prototype.getCellViewFromElem=function(t){t=t.getAttribute("data-cell-id");if(t){t=this.collection.get(t);if(t)return this.graph.renderer.findViewByCell(t)}return null},dg.prototype.onCellRemoved=function(t){t=t.cell;this.destroySelectionBox(t),this.updateContainer()},dg.prototype.onReseted=function(t){var e=this,n=t.previous,t=t.current;this.destroyAllSelectionBoxes(n),t.forEach(function(t){e.listenCellRemoveEvent(t),e.createSelectionBox(t)}),this.updateContainer()},dg.prototype.onCellAdded=function(t){t=t.cell;this.listenCellRemoveEvent(t),this.createSelectionBox(t),this.updateContainer()},dg.prototype.listenCellRemoveEvent=function(t){t.off("removed",this.onCellRemoved,this),t.on("removed",this.onCellRemoved,this)},dg.prototype.onCollectionUpdated=function(t){var e=this,n=t.added,o=t.removed,i=t.options;n.forEach(function(t){e.trigger("cell:selected",{cell:t,options:i}),e.graph.trigger("cell:selected",{cell:t,options:i}),t.isNode()?(e.trigger("node:selected",{cell:t,options:i,node:t}),e.graph.trigger("node:selected",{cell:t,options:i,node:t})):t.isEdge()&&(e.trigger("edge:selected",{cell:t,options:i,edge:t}),e.graph.trigger("edge:selected",{cell:t,options:i,edge:t}))}),o.forEach(function(t){e.trigger("cell:unselected",{cell:t,options:i}),e.graph.trigger("cell:unselected",{cell:t,options:i}),t.isNode()?(e.trigger("node:unselected",{cell:t,options:i,node:t}),e.graph.trigger("node:unselected",{cell:t,options:i,node:t})):t.isEdge()&&(e.trigger("edge:unselected",{cell:t,options:i,edge:t}),e.graph.trigger("edge:unselected",{cell:t,options:i,edge:t}))});o={added:n,removed:o,options:i,selected:this.cells};this.trigger("selection:changed",o),this.graph.trigger("selection:changed",o)},dg.prototype.deleteSelectedCells=function(){var t=this.collection.toArray();this.clean(),this.graph.model.removeCells(t,{selection:this.cid})},dg.prototype.startRotate=function(t){var e=t.e,n=this.collection.toArray(),o=U.Cell.getCellsBBox(n).getCenter(),t=this.graph.snapToGrid(e.clientX,e.clientY),n=n.reduce(function(t,e){return t[e.id]=U.Angle.normalize(e.getAngle()),t},{});this.setEventData(e,{center:o,angles:n,start:t.theta(o)})},dg.prototype.doRotate=function(t){var n=this,e=t.e,o=this.getEventData(e),t=this.graph.options.rotating.grid,i="function"==typeof t?Gr(t,this.graph,null):t,e=this.graph.snapToGrid(e.clientX,e.clientY),r=o.start-e.theta(o.center);o.rotated||(o.rotated=!0),.001<Math.abs(r)&&(this.collection.toArray().forEach(function(t){var e=U.Util.snapToGrid(o.angles[t.id]+r,i||15);t.rotate(e,{absolute:!0,center:o.center,selection:n.cid})}),this.updateSelectionBoxes())},dg.prototype.stopRotate=function(t){var e=this,n=t.e,t=this.getEventData(n);t.rotated&&(t.rotated=!1,this.collection.toArray().forEach(function(t){ig("node:rotated",n,e.graph.findViewByCell(t))}))},dg.prototype.startResize=function(t){var e=t.e,n=this.graph.getGridSize(),o=this.collection.toArray(),i=U.Cell.getCellsBBox(o),r=o.map(function(t){return t.getBBox()}),t=r.reduce(function(t,e){return e.width<t?e.width:t},1/0),r=r.reduce(function(t,e){return e.height<t?e.height:t},1/0);this.setEventData(e,{bbox:i,cells:this.graph.model.getSubGraph(o),minWidth:n*i.width/t,minHeight:n*i.height/r})},dg.prototype.doResize=function(t){var e=t.e,n=t.dx,o=t.dy,i=this.eventData(e),r=i.bbox,t=r.width,e=r.height,n=Math.max(t+n,i.minWidth),o=Math.max(e+o,i.minHeight);i.resized||(i.resized=!0),(.001<Math.abs(t-n)||.001<Math.abs(e-o))&&(this.graph.model.resizeCells(n,o,i.cells,{selection:this.cid}),r.width=n,r.height=o,this.updateSelectionBoxes())},dg.prototype.stopResize=function(t){var e=this,n=t.e,t=this.eventData(n);t.resized&&(t.resized=!1,this.collection.toArray().forEach(function(t){ig("node:resized",n,e.graph.findViewByCell(t))}))},dg.prototype.dispose=function(){this.clean(),this.remove()},sa([U.View.dispose()],dg.prototype,"dispose",null),dg);function dg(t){var e=hg.call(this)||this;return e.options=Mi({},cg.defaultOptions,t),e.options.model&&(e.options.collection=e.options.model.collection),e.options.collection?e.collection=e.options.collection:(e.collection=new pd([],{comparator:cg.depthComparator}),e.options.collection=e.collection),e.boxCount=0,e.createContainer(),e.initHandles(),e.startListening(),e}function gg(t){var e=ug.call(this)||this,n=t.view,o=t.cell,i=t.node,r=t.edge,s=t.graph,a=ra(t,["view","cell","node","edge","graph"]);n?(e.view=n,e.cell=n.cell,e.graph=n.graph,e.model=e.graph.model):(o||r||i)&&s&&(e.cell=i||r||o,e.view=s.renderer.findViewByCell(e.cell),e.graph=s,e.model=e.graph.model);s=e.constructor;return!1!==t.clearAll&&s.removeInstances(e.graph),s.register(e),e.init(a),e}Er(pg,ag),hn=cg=cg||{},rn="widget-selection",hn.classNames={root:rn,inner:rn+"-inner",box:rn+"-box",content:rn+"-content",rubberband:rn+"-rubberband",selected:rn+"-selected"},hn.documentEvents={mousemove:"adjustSelection",touchmove:"adjustSelection",mouseup:"onMouseUp",touchend:"onMouseUp",touchcancel:"onMouseUp"},hn.defaultOptions={movable:!0,strict:!1,useCellGeometry:!1,content:function(t){return hr('<%= length %> node<%= length > 1 ? "s":"" %> selected.')({length:t.length})},handles:[{name:"remove",position:"nw",events:{mousedown:"deleteSelectedCells"}},{name:"rotate",position:"sw",events:{mousedown:"startRotate",mousemove:"doRotate",mouseup:"stopRotate"}},{name:"resize",position:"se",events:{mousedown:"startResize",mousemove:"doResize",mouseup:"stopResize"}}]},hn.depthComparator=function(t){return t.getAncestors().length};var fg,yg,mg=(Cg.prototype.copy=function(t,e,n){void 0===n&&(n={}),this.options=ia({},n);var o=(e instanceof U.Model?e:e.model).cloneSubGraph(t,n);this.cells=Hi(Object.keys(o).map(function(t){return o[t]}),function(t){return t.isEdge()?2:1}),this.serialize(n)},Cg.prototype.cut=function(t,e,n){void 0===n&&(n={}),this.copy(t,e,n),(e instanceof U.Graph?e.model:e).batchUpdate("cut",function(){t.forEach(function(t){return t.remove()})})},Cg.prototype.paste=function(t,e){var n=this;void 0===e&&(e={});var o=ia(ia({},e),this.options),i=o.offset,r=o.edgeProps,s=o.nodeProps,a=20,l=20;i&&(a="number"==typeof i?i:i.dx,l="number"==typeof i?i:i.dy),this.deserialize(o);o=this.cells;o.map(function(t){t.model=null,t.removeProp("zIndex"),(a||l)&&t.translate(a,l),s&&t.isNode()&&t.prop(s),r&&t.isEdge()&&t.prop(r)});var c=t instanceof U.Graph?t.model:t;return c.batchUpdate("paste",function(){c.addCells(n.cells)}),this.copy(o,t,e),o},Cg.prototype.serialize=function(t){!1!==t.useLocalStorage&&fg.save(this.cells)},Cg.prototype.deserialize=function(t){!t.useLocalStorage||(t=fg.fetch())&&(this.cells=t)},Cg.prototype.isEmpty=function(){return this.cells.length<=0},Cg.prototype.clean=function(){this.options={},this.cells=[],fg.clean()},Cg);function Cg(){this.cells=[]}Ue=fg=fg||{},yg=Uc.prefixCls+".clipboard.cells",Ue.save=function(t){window.localStorage&&(t=t.map(function(t){return t.toJSON()}),localStorage.setItem(yg,JSON.stringify(t)))},Ue.fetch=function(){if(window.localStorage){var t=localStorage.getItem(yg),t=t?JSON.parse(t):[];if(t)return U.Model.fromJSON(t)}},Ue.clean=function(){window.localStorage&&localStorage.removeItem(yg)};var vg,bg,xg=(oa(wg,bg=nn),Object.defineProperty(wg.prototype,"node",{get:function(){return this.cell},enumerable:!1,configurable:!0}),Object.defineProperty(wg.prototype,"containerClassName",{get:function(){return this.prefixClassName("widget-transform")},enumerable:!1,configurable:!0}),Object.defineProperty(wg.prototype,"resizeClassName",{get:function(){return this.containerClassName+"-resize"},enumerable:!1,configurable:!0}),Object.defineProperty(wg.prototype,"rotateClassName",{get:function(){return this.containerClassName+"-rotate"},enumerable:!1,configurable:!0}),wg.prototype.init=function(t){this.options=ia(ia({},vg.defaultOptions),t),this.render(),this.startListening()},wg.prototype.startListening=function(){var t;this.delegateEvents(((t={})["mousedown ."+this.resizeClassName]="startResizing",t["touchstart ."+this.resizeClassName]="startResizing",t["mousedown ."+this.rotateClassName]="startRotating",t["touchstart ."+this.rotateClassName]="startRotating",t)),this.model.on("*",this.update,this),this.model.on("reseted",this.remove,this),this.node.on("removed",this.remove,this),this.graph.on("scale",this.update,this),this.graph.on("translate",this.update,this),bg.prototype.startListening.call(this)},wg.prototype.stopListening=function(){this.undelegateEvents(),this.model.off("*",this.update,this),this.model.off("reseted",this.remove,this),this.node.off("removed",this.remove,this),this.graph.off("scale",this.update,this),this.graph.off("translate",this.update,this),bg.prototype.stopListening.call(this)},wg.prototype.onRemove=function(){this.stopListening()},wg.prototype.renderHandles=function(){var e=this;this.container=document.createElement("div"),this.$container=this.$(this.container);var n=this.$("<div/>").prop("draggable",!1),t=n.clone().addClass(this.rotateClassName),o=vg.POSITIONS.map(function(t){return n.clone().addClass(e.resizeClassName).attr("data-position",t)});this.empty(),this.$container.append(o,t)},wg.prototype.render=function(){return this.renderHandles(),this.view.addClass(vg.NODE_CLS),this.$container.addClass(this.containerClassName).toggleClass("no-orth-resize",this.options.preserveAspectRatio||!this.options.orthogonalResizing).toggleClass("no-resize",!this.options.resizable).toggleClass("no-rotate",!this.options.rotatable),this.options.className&&this.$container.addClass(this.options.className),this.graph.container.appendChild(this.container),this.update()},wg.prototype.update=function(){var t=this.graph.matrix(),e=this.node.getBBox();e.x*=t.a,e.x+=t.e,e.y*=t.d,e.y+=t.f,e.width*=t.a,e.height*=t.d;t=U.Angle.normalize(this.node.getAngle()),t=0!==t?"rotate("+t+"deg)":"";return this.$container.css({transform:t,width:e.width,height:e.height,left:e.x,top:e.y}),this.updateResizerDirections(),this},wg.prototype.remove=function(){return this.view.removeClass(vg.NODE_CLS),bg.prototype.remove.call(this)},wg.prototype.updateResizerDirections=function(){var n,o,i=this,t=U.Angle.normalize(this.node.getAngle()),t=Math.floor(t*(vg.DIRECTIONS.length/360));t!==this.prevShift&&(n=vg.DIRECTIONS.slice(t).concat(vg.DIRECTIONS.slice(0,t)),o=function(t){return i.containerClassName+"-cursor-"+t},this.$container.find("."+this.resizeClassName).removeClass(vg.DIRECTIONS.map(o).join(" ")).each(function(t,e){i.$(e).addClass(o(n[t]))}),this.prevShift=t)},wg.prototype.getTrueDirection=function(t){var e=U.Angle.normalize(this.node.getAngle()),t=vg.POSITIONS.indexOf(t);return t+=Math.floor(e*(vg.POSITIONS.length/360)),t%=vg.POSITIONS.length,vg.POSITIONS[t]},wg.prototype.toValidResizeDirection=function(t){return{top:"top-left",bottom:"bottom-right",left:"bottom-left",right:"top-right"}[t]||t},wg.prototype.startResizing=function(t){t.stopPropagation(),this.model.startBatch("resize",{cid:this.cid});var e=this.$(t.target).attr("data-position");this.prepareResizing(t,e),this.startAction(t)},wg.prototype.prepareResizing=function(t,e){var n=this.getTrueDirection(e),o=0,i=0;e.split("-").forEach(function(t){o={left:-1,right:1}[t]||o,i={top:-1,bottom:1}[t]||i});var r=this.toValidResizeDirection(e),s={"top-right":"bottomLeft","top-left":"bottomRight","bottom-left":"topRight","bottom-right":"topLeft"}[r],a=U.Angle.normalize(this.node.getAngle());this.setEventData(t,{selector:s,direction:r,trueDirection:n,relativeDirection:e,angle:a,resizeX:o,resizeY:i,action:"resizing"})},wg.prototype.startRotating=function(t){t.stopPropagation(),this.model.startBatch("rotate",{cid:this.cid});var e=this.node.getBBox().getCenter(),n=this.graph.snapToGrid(t.clientX,t.clientY);this.setEventData(t,{center:e,action:"rotating",angle:U.Angle.normalize(this.node.getAngle()),start:U.Point.create(n).theta(e)}),this.startAction(t)},wg.prototype.onMouseMove=function(t){var e,n,o,i,r,s,a,l,c,h,u,p=this.graph.findViewByCell(this.node),d=this.getEventData(t);d.action&&(i=(o=this.normalizeEvent(t)).clientX,s=o.clientY,r=this.graph.scroller.widget,this.options.restrictedResizing?(l=r?8:0,i=Dn(i,(h=this.graph.container.getBoundingClientRect()).left+l,h.right-l),s=Dn(s,h.top+l,h.bottom-l)):this.options.autoScrollOnResizing&&r&&r.autoScroll(i,s),u=this.graph.snapToGrid(i,s),e=this.graph.getGridSize(),n=this.node,o=this.options,"resizing"===d.action?(d.resized||(d.resized=!0),h=n.getBBox(),l=U.Point.create(u).rotate(d.angle,h.getCenter()).diff(h[d.selector]),i=r=d.resizeX?l.x*d.resizeX:h.width,l=s=d.resizeY?l.y*d.resizeY:h.height,r=U.Util.snapToGrid(r,e),s=U.Util.snapToGrid(s,e),r=Math.max(r,o.minWidth||e),s=Math.max(s,o.minHeight||e),r=Math.min(r,o.maxWidth||1/0),s=Math.min(s,o.maxHeight||1/0),o.preserveAspectRatio&&(c=h.width*s/h.height,a=h.height*r/h.width,r<c?s=a:r=c),a=d.relativeDirection,(i<=-r||l<=-s)&&(c=void 0,"left"===a?i<=-r&&(c="right"):"right"===a?i<=-r&&(c="left"):"top"===a?l<=-s&&(c="bottom"):"bottom"===a?l<=-s&&(c="top"):"top-left"===a?i<=-r&&l<=-s?c="bottom-right":i<=-r?c="top-right":l<=-s&&(c="bottom-left"):"top-right"===a?i<=-r&&l<=-s?c="bottom-left":i<=-r?c="top-left":l<=-s&&(c="bottom-right"):"bottom-left"===a?i<=-r&&l<=-s?c="top-right":i<=-r?c="bottom-right":l<=-s&&(c="top-left"):"bottom-right"===a&&(i<=-r&&l<=-s?c="top-left":i<=-r?c="bottom-left":l<=-s&&(c="top-right")),l=c,this.stopHandle(),c=this.$container.find("."+this.resizeClassName+'[data-position="'+l+'"]'),this.startHandle(c[0]),this.prepareResizing(t,l),this.onMouseMove(t)),h.width===r&&h.height===s||(h={ui:!0,direction:d.direction,relativeDirection:d.relativeDirection,trueDirection:d.trueDirection,minWidth:o.minWidth,minHeight:o.minHeight,maxWidth:o.maxWidth,maxHeight:o.maxHeight,preserveAspectRatio:!0===o.preserveAspectRatio},n.resize(r,s,h),ig("node:resizing",t,p))):"rotating"===d.action&&(d.rotated||(d.rotated=!0),u=d.start-U.Point.create(u).theta(d.center),u=d.angle+u,o.rotateGrid&&(u=U.Util.snapToGrid(u,o.rotateGrid)),n.rotate(u,{absolute:!0}),ig("node:rotating",t,p)))},wg.prototype.onMouseUp=function(t){var e=this.getEventData(t);e.action&&(this.stopAction(t),this.model.stopBatch("resizing"===e.action?"resize":"rotate",{cid:this.cid}))},wg.prototype.startHandle=function(t){this.handle=t,this.$(t).addClass(this.containerClassName+"-active-handle"),this.$container.addClass(this.containerClassName+"-active");t=t.getAttribute("data-position");t&&(t=vg.DIRECTIONS[vg.POSITIONS.indexOf(t)],this.$container.addClass(this.containerClassName+"-cursor-"+t))},wg.prototype.stopHandle=function(){var t;this.handle&&(this.$(this.handle).removeClass(this.containerClassName+"-active-handle"),this.$container.removeClass(this.containerClassName+"-active"),(t=this.handle.getAttribute("data-position"))&&(t=vg.DIRECTIONS[vg.POSITIONS.indexOf(t)],this.$container.removeClass(this.containerClassName+"-cursor-"+t)),this.handle=null)},wg.prototype.startAction=function(t){this.startHandle(t.target),this.graph.view.undelegateEvents(),this.delegateDocumentEvents(vg.documentEvents,t.data);var e=this.graph.findViewByCell(this.node),n=this.getEventData(t);e&&(e.addClass("node-"+n.action),"resizing"===n.action?ig("node:resize",t,e):"rotating"===n.action&&ig("node:rotate",t,e))},wg.prototype.stopAction=function(t){this.stopHandle(),this.undelegateDocumentEvents(),this.graph.view.delegateEvents();var e=this.graph.findViewByCell(this.node),n=this.getEventData(t);e&&(e.removeClass("node-"+n.action),"resizing"===n.action?ig("node:resized",t,e):"rotating"===n.action&&ig("node:rotated",t,e))},wg);function wg(){return null!==bg&&bg.apply(this,arguments)||this}(fn=vg=vg||{}).NODE_CLS="has-widget-transform",fn.DIRECTIONS=["nw","n","ne","e","se","s","sw","w"],fn.POSITIONS=["top-left","top","top-right","right","bottom-right","bottom","bottom-left","left"],fn.documentEvents={mousemove:"onMouseMove",touchmove:"onMouseMove",mouseup:"onMouseUp",touchend:"onMouseUp"},fn.defaultOptions={minWidth:0,minHeight:0,maxWidth:1/0,maxHeight:1/0,rotateGrid:15,rotatable:!0,preserveAspectRatio:!1,orthogonalResizing:!0,restrictedResizing:!1,autoScrollOnResizing:!0};var Eg,Ag,Pg=U.Edge.define({shape:"edge",markup:[{tagName:"path",selector:"wrap",groupSelector:"lines",attrs:{fill:"none",cursor:"pointer",stroke:"transparent",strokeLinecap:"round"}},{tagName:"path",selector:"line",groupSelector:"lines",attrs:{fill:"none",pointerEvents:"none"}}],attrs:{lines:{connection:!0,strokeLinejoin:"round"},wrap:{strokeWidth:10},line:{stroke:"#333",strokeWidth:2,targetMarker:"classic"}}});(Eg||(Eg={})).parseOptionGroup=function(n,o,i){var r={};return Object.keys(i||{}).forEach(function(t){var e=i[t];r[t]="function"==typeof e?e.call(n,o):e}),r},(Ag=Eg=Eg||{}).get=function(n){var t=n.grid,e=(n.panning,n.selecting,n.embedding,n.snapline,n.resizing,n.rotating,n.clipboard,n.history,n.scroller,n.minimap,n.keyboard,n.mousewheel,ra(n,["grid","panning","selecting","embedding","snapline","resizing","rotating","clipboard","history","scroller","minimap","keyboard","mousewheel"])),o=n.container;if(null==o)throw new Error("Ensure the container of the graph is specified and valid");null==e.width&&(e.width=o.clientWidth),null==e.height&&(e.height=o.clientHeight);var i=Mi({},Ag.defaults,e);return i.grid="number"==typeof t?{size:t,visible:!1}:ia(ia({},{size:10,visible:!1}),"boolean"==typeof t?{visible:t}:t),["panning","selecting","embedding","snapline","resizing","rotating","clipboard","history","scroller","minimap","keyboard","mousewheel"].forEach(function(t){var e=n[t];"boolean"==typeof e?i[t].enabled=e:i[t]=ia(ia({},i[t]),e)}),i.background&&i.scroller.enabled&&null==i.scroller.background&&(i.scroller.background=i.background,delete i.background),i},(Eg||(Eg={})).defaults={x:0,y:0,grid:{size:10,visible:!1},scaling:{min:.01,max:16},background:!1,highlighting:{default:{name:"stroke",args:{padding:3}},nodeAvailable:{name:"className",args:{className:U.Util.prefix("available-node")}},magnetAvailable:{name:"className",args:{className:U.Util.prefix("available-magnet")}}},connecting:{snap:!1,multi:!0,dangling:!0,allowLoop:!0,allowNode:!0,allowEdge:!1,allowPort:!0,highlight:!1,anchor:"center",edgeAnchor:"ratio",connectionPoint:"boundary",strategy:null,router:"normal",connector:"normal",validateConnection:function(t){var e=t.type,n=t.sourceView,t=t.targetView;return null!=("target"===e?t:n)},createEdge:function(){return new Pg}},transforming:{clearAll:!0,clearOnBlankMouseDown:!0},resizing:{enabled:!1,minWidth:0,minHeight:0,maxWidth:Number.MAX_SAFE_INTEGER,maxHeight:Number.MAX_SAFE_INTEGER,orthogonal:!0,restricted:!1,autoScroll:!0,preserveAspectRatio:!1},rotating:{enabled:!1,grid:15},translating:{restrict:!1},embedding:{enabled:!1,findParent:"bbox",frontOnly:!0,validate:function(){return!0}},selecting:{enabled:!1,rubberband:!1,multiple:!0,movable:!0,strict:!1,useCellGeometry:!1,selectCellOnMoved:!1,selectNodeOnMoved:!1,selectEdgeOnMoved:!1,content:null,handles:null},panning:{enabled:!1},snapline:{enabled:!1},clipboard:{enabled:!1},history:{enabled:!1},scroller:{enabled:!1},keyboard:{enabled:!1},mousewheel:{enabled:!1,factor:1.2,zoomAtMousePosition:!0},async:!1,frozen:!1,sorting:"exact",moveThreshold:0,clickThreshold:0,magnetThreshold:0,preventDefaultContextMenu:!0,preventDefaultBlankAction:!0,interacting:{edgeLabelMovable:!1},guard:function(){return!1}};var Dg,Mg,Sg,kg,Fg,Tg=(oa(jg,Fg=yn),Object.defineProperty(jg.prototype,"cid",{get:function(){return this.graph.view.cid},enumerable:!1,configurable:!0}),Object.defineProperty(jg.prototype,"svg",{get:function(){return this.view.svg},enumerable:!1,configurable:!0}),Object.defineProperty(jg.prototype,"defs",{get:function(){return this.view.defs},enumerable:!1,configurable:!0}),jg.prototype.isDefined=function(t){return null!=this.svg.getElementById(t)},jg.prototype.filter=function(t){var e=t.id,n=t.name,e=e||"filter-"+n+"-"+this.cid+"-"+Nr(JSON.stringify(t));if(!this.isDefined(e)){var o=Eh.registry.get(n);if(null==o)return Eh.registry.onNotFound(n);o=o(t.args||{}),t=ia(ia({x:-1,y:-1,width:3,height:3,filterUnits:"objectBoundingBox"},t.attrs),{id:e});U.Vector.create(U.Markup.sanitize(o),t).appendTo(this.defs)}return e},jg.prototype.gradient=function(t){var e=t.id,n=t.type,e=e||"gradient-"+n+"-"+this.cid+"-"+Nr(JSON.stringify(t));return this.isDefined(e)||(n="<"+n+">"+t.stops.map(function(t){var e=null!=t.opacity&&Number.isFinite(t.opacity)?t.opacity:1;return'<stop offset="'+t.offset+'" stop-color="'+t.color+'" stop-opacity="'+e+'"/>'}).join("")+"</"+n+">",t=ia({id:e},t.attrs),U.Vector.create(n,t).appendTo(this.defs)),e},jg.prototype.marker=function(t){var e=t.id,n=t.refX,o=t.refY,i=t.markerUnits,r=t.markerOrient,s=t.tagName,a=t.children,l=ra(t,["id","refX","refY","markerUnits","markerOrient","tagName","children"]),e=(e=e)||"marker-"+this.cid+"-"+Nr(JSON.stringify(t));return this.isDefined(e)||("path"!==s&&delete l.d,s=U.Vector.create("marker",{refX:n,refY:o,id:e,overflow:"visible",orient:null!=r?r:"auto",markerUnits:i||"userSpaceOnUse"},a?a.map(function(t){var e=t.tagName,t=ra(t,["tagName"]);return U.Vector.create(""+e||"path",Ls(ia(ia({},l),t)))}):[U.Vector.create(s||"path",Ls(l))]),this.defs.appendChild(s.node)),e},jg),Lg=(oa(Vg,kg=yn),Object.defineProperty(Vg.prototype,"elem",{get:function(){return this.view.grid},enumerable:!1,configurable:!0}),Object.defineProperty(Vg.prototype,"grid",{get:function(){return this.options.grid},enumerable:!1,configurable:!0}),Vg.prototype.init=function(){this.startListening(),this.draw(this.grid)},Vg.prototype.startListening=function(){this.graph.on("scale",this.update,this),this.graph.on("translate",this.update,this)},Vg.prototype.stopListening=function(){this.graph.off("scale",this.update,this),this.graph.off("translate",this.update,this)},Vg.prototype.setVisible=function(t){this.grid.visible!==t&&(this.grid.visible=t,this.update())},Vg.prototype.getGridSize=function(){return this.grid.size},Vg.prototype.setGridSize=function(t){this.grid.size=Math.max(t,1),this.update()},Vg.prototype.show=function(){this.setVisible(!0),this.update()},Vg.prototype.hide=function(){this.setVisible(!1),this.update()},Vg.prototype.clear=function(){this.elem.style.backgroundImage=""},Vg.prototype.draw=function(t){this.clear(),this.instance=null,Object.assign(this.grid,t),this.patterns=this.resolveGrid(t),this.update()},Vg.prototype.update=function(t){void 0===t&&(t={});var a=this.grid.size;if(a<=1||!this.grid.visible)return this.clear();var l=this.graph.matrix(),c=this.getInstance(),h=Array.isArray(t)?t:[t];this.patterns.forEach(function(t,e){var n="pattern_"+e,o=l.a||1,i=l.d||1,r=t.update,s=t.markup,t=ra(t,["update","markup"]),i=ia(ia(ia({},t),h[e]),{sx:o,sy:i,ox:l.e||0,oy:l.f||0,width:a*o,height:a*i});c.has(n)||c.add(n,U.Vector.create("pattern",{id:n,patternUnits:"userSpaceOnUse"},U.Vector.createVectors(s)).node);s=c.get(n);"function"==typeof r&&r(s.childNodes[0],i);n=i.ox%i.width;n<0&&(n+=i.width);r=i.oy%i.height;r<0&&(r+=i.height),Fs(s,{x:n,y:r,width:i.width,height:i.height})});t=(new XMLSerializer).serializeToString(c.root),t="url(data:image/svg+xml;base64,"+btoa(t)+")";this.elem.style.backgroundImage=t},Vg.prototype.getInstance=function(){return this.instance||(this.instance=new vh),this.instance},Vg.prototype.resolveGrid=function(t){if(!t)return[];var e=t.type;if(null==e)return[ia(ia({},vh.presets.dot),t.args)];var n=vh.registry.get(e);if(n){var o=t.args||[];return Array.isArray(o)||(o=[o]),Array.isArray(n)?n.map(function(t,e){return ia(ia({},t),o[e])}):[ia(ia({},n),o[0])]}return vh.registry.onNotFound(e)},Vg.prototype.dispose=function(){this.stopListening(),this.clear()},sa([yn.dispose()],Vg.prototype,"dispose",null),Vg),Ng=(oa(zg,Sg=yn),zg.prototype.getClientMatrix=function(){return _l(this.view.stage.getScreenCTM())},zg.prototype.getClientOffset=function(){var t=this.view.svg.getBoundingClientRect();return new U.Point(t.left,t.top)},zg.prototype.getPageOffset=function(){return this.getClientOffset().translate(window.scrollX,window.scrollY)},zg.prototype.snapToGrid=function(t,e){return("number"==typeof t?this.clientToLocalPoint(t,e):this.clientToLocalPoint(t.x,t.y)).snapToGrid(this.graph.getGridSize())},zg.prototype.localToGraphPoint=function(t,e){return Zl(U.Point.create(t,e),this.graph.matrix())},zg.prototype.localToClientPoint=function(t,e){return Zl(U.Point.create(t,e),this.getClientMatrix())},zg.prototype.localToPagePoint=function(t,e){return("number"==typeof t?this.localToGraphPoint(t,e):this.localToGraphPoint(t)).translate(this.getPageOffset())},zg.prototype.localToGraphRect=function(t,e,n,o){return Ql(U.Rectangle.create(t,e,n,o),this.graph.matrix())},zg.prototype.localToClientRect=function(t,e,n,o){return Ql(U.Rectangle.create(t,e,n,o),this.getClientMatrix())},zg.prototype.localToPageRect=function(t,e,n,o){return("number"==typeof t?this.localToGraphRect(t,e,n,o):this.localToGraphRect(t)).translate(this.getPageOffset())},zg.prototype.graphToLocalPoint=function(t,e){return Zl(U.Point.create(t,e),this.graph.matrix().inverse())},zg.prototype.clientToLocalPoint=function(t,e){return Zl(U.Point.create(t,e),this.getClientMatrix().inverse())},zg.prototype.pageToLocalPoint=function(t,e){e=U.Point.create(t,e).diff(this.getPageOffset());return this.graphToLocalPoint(e)},zg.prototype.graphToLocalRect=function(t,e,n,o){return Ql(U.Rectangle.create(t,e,n,o),this.graph.matrix().inverse())},zg.prototype.clientToLocalRect=function(t,e,n,o){return Ql(U.Rectangle.create(t,e,n,o),this.getClientMatrix().inverse())},zg.prototype.pageToLocalRect=function(t,e,n,o){n=U.Rectangle.create(t,e,n,o),o=this.getPageOffset();return n.x-=o.x,n.y-=o.y,this.graphToLocalRect(n)},zg),Og=(oa(Bg,Mg=yn),Bg.prototype.dispose=function(){this.widget.dispose()},sa([yn.dispose()],Bg.prototype,"dispose",null),Bg);function Bg(){var t=null!==Mg&&Mg.apply(this,arguments)||this;return t.widget=t.graph.hook.createSnapline(),t}function zg(){return null!==Sg&&Sg.apply(this,arguments)||this}function Vg(){return null!==kg&&kg.apply(this,arguments)||this}function jg(){return null!==Fg&&Fg.apply(this,arguments)||this}function Ig(t){var e=[],n=[];return Array.isArray(t)?e.push.apply(e,t):t.split("|").forEach(function(t){-1===t.indexOf("&")?e.push(t):n.push.apply(n,t.split("&"))}),{or:e,and:n}}(mn=Dg=Dg||{}).parse=Ig,mn.equals=function(t,e){if(null==t||null==e)return null==t&&null==e;var n=Ig(t),o=Ig(e),i=n.or.sort(),t=o.or.sort(),e=n.and.sort(),n=o.and.sort(),o=function(t,n){return t.length===n.length&&(0===t.length||t.every(function(t,e){return t===n[e]}))};return o(i,t)&&o(e,n)},mn.isMatch=function(e,t,n){if(null==t||Array.isArray(t)&&0===t.length)return!n||!0!==e.altKey&&!0!==e.ctrlKey&&!0!==e.metaKey&&!0!==e.shiftKey;var o=Ig(t),n=o.or,t=o.and,o=function(t){t=t.toLowerCase()+"Key";return!0===e[t]};return n.some(o)&&t.every(o)};var Rg,_g,Gg,Hg,Ug,$g,qg,Wg,Xg,Yg=(oa(af,qg=yn),Object.defineProperty(af.prototype,"widgetOptions",{get:function(){return this.options.scroller},enumerable:!1,configurable:!0}),Object.defineProperty(af.prototype,"pannable",{get:function(){return this.widgetOptions&&!0===this.widgetOptions.pannable},enumerable:!1,configurable:!0}),af.prototype.init=function(){this.widget=this.graph.hook.createScroller(),this.startListening(),this.updateClassName(),this.widget&&this.widget.center()},af.prototype.startListening=function(){this.graph.on("blank:mousedown",this.preparePanning,this),this.graph.on("node:unhandled:mousedown",this.preparePanning,this),this.graph.on("edge:unhandled:mousedown",this.preparePanning,this)},af.prototype.stopListening=function(){this.graph.off("blank:mousedown",this.preparePanning,this),this.graph.off("node:unhandled:mousedown",this.preparePanning,this),this.graph.off("edge:unhandled:mousedown",this.preparePanning,this)},af.prototype.preparePanning=function(t){var e=this,t=t.e;this.widget&&(this.allowPanning(t,!0)||this.allowPanning(t)&&!this.graph.selection.allowRubberband(t,!0))&&(this.updateClassName(!0),this.widget.startPanning(t),this.widget.once("pan:stop",function(){return e.updateClassName(!1)}))},af.prototype.allowPanning=function(t,e){return this.widget&&this.pannable&&Dg.isMatch(t,this.widgetOptions.modifiers,e)&&this.graph.hook.allowPanning(t)},af.prototype.updateClassName=function(t){var e,n,o;null!=this.widget&&(e=this.widget.container,n=this.view.prefixClassName("graph-scroller-panning"),o=this.view.prefixClassName("graph-scroller-pannable"),this.pannable?t?(Qr(e,n),ts(e,o)):(ts(e,n),Qr(e,o)):(ts(e,n),ts(e,o)))},af.prototype.enablePanning=function(){this.pannable||(this.widgetOptions.pannable=!0,this.updateClassName())},af.prototype.disablePanning=function(){this.pannable&&(this.widgetOptions.pannable=!1,this.updateClassName())},af.prototype.lock=function(){this.widget&&this.widget.lock()},af.prototype.unlock=function(){this.widget&&this.widget.unlock()},af.prototype.update=function(){this.widget&&this.widget.update()},af.prototype.resize=function(t,e){this.widget&&this.widget.resize(t,e)},af.prototype.dispose=function(){this.widget&&this.widget.dispose(),this.stopListening()},sa([yn.dispose()],af.prototype,"dispose",null),af),Jg=(oa(sf,$g=yn),Object.defineProperty(sf.prototype,"commonOptions",{get:function(){var t=this.instanceOptions;return t.enabled,ra(t,["enabled"])},enumerable:!1,configurable:!0}),Object.defineProperty(sf.prototype,"instanceOptions",{get:function(){return this.options.clipboard},enumerable:!1,configurable:!0}),Object.defineProperty(sf.prototype,"cells",{get:function(){return this.widget.cells},enumerable:!1,configurable:!0}),Object.defineProperty(sf.prototype,"disabled",{get:function(){return!0!==this.instanceOptions.enabled},enumerable:!1,configurable:!0}),sf.prototype.init=function(){this.widget=this.graph.hook.createClipboard(),this.widget.deserialize(this.instanceOptions)},sf.prototype.enable=function(){this.disabled&&(this.instanceOptions.enabled=!0)},sf.prototype.disable=function(){this.disabled||(this.instanceOptions.enabled=!1)},sf.prototype.copy=function(t,e){void 0===e&&(e={}),this.disabled||this.widget.copy(t,this.graph,ia(ia({},this.commonOptions),e))},sf.prototype.cut=function(t,e){void 0===e&&(e={}),this.disabled||this.widget.cut(t,this.graph,ia(ia({},this.commonOptions),e))},sf.prototype.paste=function(t,e){return void 0===t&&(t={}),void 0===e&&(e=this.graph),this.disabled?[]:this.widget.paste(e,ia(ia({},this.commonOptions),t))},sf.prototype.clean=function(t){this.disabled&&!t||this.widget.clean()},sf.prototype.isEmpty=function(){return this.widget.isEmpty()},sf.prototype.dispose=function(){this.clean(!0)},sa([yn.dispose()],sf.prototype,"dispose",null),sf),Zg=(oa(rf,Ug=yn),rf.prototype.init=function(){this.startListening()},rf.prototype.startListening=function(){this.graph.on("cell:highlight",this.onCellHighlight,this),this.graph.on("cell:unhighlight",this.onCellUnhighlight,this)},rf.prototype.stopListening=function(){this.graph.off("cell:highlight",this.onCellHighlight,this),this.graph.off("cell:unhighlight",this.onCellUnhighlight,this)},rf.prototype.onCellHighlight=function(t){var e=t.view,n=t.magnet,o=t.options,i=void 0===o?{}:o,t=this.resolveHighlighter(i);t&&(o=this.getHighlighterId(n,t),this.highlights[o]||((i=t.highlighter).highlight(e,n,ia({},t.args)),this.highlights[o]={cellView:e,magnet:n,highlighter:i,args:t.args}))},rf.prototype.onCellUnhighlight=function(t){var e=t.magnet,t=t.options,t=void 0===t?{}:t,t=this.resolveHighlighter(t);t&&(t=this.getHighlighterId(e,t),this.unhighlight(t))},rf.prototype.resolveHighlighter=function(t){var e=this.options,n=t.highlighter;if(null==n&&(n=(o=t.type)&&e.highlighting[o]||e.highlighting.default),null==n)return null;var o="string"==typeof n?{name:n}:n,e=o.name,n=kh.registry.get(e);return null==n?kh.registry.onNotFound(e):(kh.check(e,n),{name:e,highlighter:n,args:o.args||{}})},rf.prototype.getHighlighterId=function(t,e){return is(t),e.name+t.id+JSON.stringify(e.args)},rf.prototype.unhighlight=function(t){var e=this.highlights[t];e&&(e.highlighter.unhighlight(e.cellView,e.magnet,e.args),delete this.highlights[t])},rf.prototype.dispose=function(){var e=this;Object.keys(this.highlights).forEach(function(t){return e.unhighlight(t)}),this.stopListening()},sa([rf.dispose()],rf.prototype,"dispose",null),rf),Kg=(oa(of,Hg=yn),Object.defineProperty(of.prototype,"container",{get:function(){return this.graph.view.container},enumerable:!1,configurable:!0}),Object.defineProperty(of.prototype,"viewport",{get:function(){return this.graph.view.viewport},enumerable:!1,configurable:!0}),Object.defineProperty(of.prototype,"isSelectionEnabled",{get:function(){return!0===this.options.selecting.enabled},enumerable:!1,configurable:!0}),of.prototype.init=function(){this.startListening(),this.resize()},of.prototype.startListening=function(){this.graph.on("node:mouseup",this.onNodeMouseUp,this),this.graph.on("node:selected",this.onNodeSelected,this),this.graph.on("node:unselected",this.onNodeUnSelected,this)},of.prototype.stopListening=function(){this.graph.off("node:mouseup",this.onNodeMouseUp,this),this.graph.off("node:selected",this.onNodeSelected,this),this.graph.off("node:unselected",this.onNodeUnSelected,this)},of.prototype.onNodeMouseUp=function(t){var e=t.node;this.isSelectionEnabled||(t=this.graph.hook.createTransform(e,{clearAll:!0}))&&this.widgets.set(e,t)},of.prototype.onNodeSelected=function(t){var e=t.node;!this.isSelectionEnabled||(t=this.graph.hook.createTransform(e,{clearAll:!1}))&&this.widgets.set(e,t)},of.prototype.onNodeUnSelected=function(t){var e=t.node;this.isSelectionEnabled&&((t=this.widgets.get(e))&&t.dispose(),this.widgets.delete(e))},of.prototype.getMatrix=function(){var t=this.viewport.getAttribute("transform");return t!==this.viewportTransformString&&(this.viewportMatrix=this.viewport.getCTM(),this.viewportTransformString=t),_l(this.viewportMatrix)},of.prototype.setMatrix=function(t){var e=_l(t),t=Ul(e);this.viewport.setAttribute("transform",t),this.viewportMatrix=e,this.viewportTransformString=t},of.prototype.resize=function(t,e){var n=this.options,t=void 0===t?n.width:t,e=void 0===e?n.height:e;n.width=t,n.height=e,"number"==typeof t&&(t=Math.round(t)),"number"==typeof e&&(e=Math.round(e)),this.container.style.width=null==t?"":t+"px",this.container.style.height=null==e?"":e+"px";e=this.getComputedSize();return this.graph.trigger("resize",ia({},e)),this},of.prototype.getComputedSize=function(){var t=this.options,e=t.width,t=t.height;return Ei(e)||(e=this.container.clientWidth),Ei(t)||(t=this.container.clientHeight),{width:e,height:t}},of.prototype.getScale=function(){return Xl(this.getMatrix())},of.prototype.scale=function(t,e,n,o){var i,r;void 0===e&&(e=t),void 0===n&&(n=0),void 0===o&&(o=0),t=this.clampScale(t),e=this.clampScale(e),(n||o)&&(r=(i=this.getTranslation()).tx-n*(t-1),s=i.ty-o*(e-1),r===i.tx&&s===i.ty||this.translate(r,s));var s=this.getMatrix();return s.a=t,s.d=e,this.setMatrix(s),this.graph.trigger("scale",{sx:t,sy:e,ox:n,oy:o}),this},of.prototype.clampScale=function(t){var e=this.graph.options.scaling;return Dn(t,e.min||.01,e.max||16)},of.prototype.getZoom=function(){return this.getScale().sx},of.prototype.zoom=function(t,e){e=e||{};var n=t,o=t,i=this.getScale(),r=this.getComputedSize(),t=r.width/2,r=r.height/2;return e.absolute||(n+=i.sx,o+=i.sy),e.scaleGrid&&(n=Math.round(n/e.scaleGrid)*e.scaleGrid,o=Math.round(o/e.scaleGrid)*e.scaleGrid),e.maxScale&&(n=Math.min(e.maxScale,n),o=Math.min(e.maxScale,o)),e.minScale&&(n=Math.max(e.minScale,n),o=Math.max(e.minScale,o)),e.center&&(t=e.center.x,r=e.center.y),n=this.clampScale(n),o=this.clampScale(o),(t||r)&&(t=t-(t-(e=this.getTranslation()).tx)*(n/i.sx),i=r-(r-e.ty)*(o/i.sy),t===e.tx&&i===e.ty||this.translate(t,i)),this.scale(n,o),this},of.prototype.getRotation=function(){return Yl(this.getMatrix())},of.prototype.rotate=function(t,e,n){var o;null!=e&&null!=n||(e=(o=ec(this.graph.view.stage)).width/2,n=o.height/2);n=this.getMatrix().translate(e,n).rotate(t).translate(-e,-n);return this.setMatrix(n),this},of.prototype.getTranslation=function(){return Jl(this.getMatrix())},of.prototype.translate=function(t,e){var n=this.getMatrix();n.e=t||0,n.f=e||0,this.setMatrix(n);n=this.getTranslation();return this.options.x=n.tx,this.options.y=n.ty,this.graph.trigger("translate",ia({},n)),this},of.prototype.setOrigin=function(t,e){return this.translate(t||0,e||0)},of.prototype.fitToContent=function(t,e,n,o){"object"==typeof t?(t=(u=t).gridWidth||1,e=u.gridHeight||1,n=u.padding||0,o=u):(t=t||1,e=e||1,n=n||0,null==o&&(o={}));var i=Rr(n),r=o.contentArea?U.Rectangle.create(o.contentArea):this.getContentArea(o),s=this.getScale(),a=this.getTranslation(),l=s.sx,c=s.sy;r.x*=l,r.y*=c,r.width*=l,r.height*=c;var h=Math.max(Math.ceil((r.width+r.x)/t),1)*t,u=Math.max(Math.ceil((r.height+r.y)/e),1)*e,n=0,s=0;("negative"===o.allowNewOrigin&&r.x<0||"positive"===o.allowNewOrigin&&0<=r.x||"any"===o.allowNewOrigin)&&(n=Math.ceil(-r.x/t)*t,h+=n+=i.left),("negative"===o.allowNewOrigin&&r.y<0||"positive"===o.allowNewOrigin&&0<=r.y||"any"===o.allowNewOrigin)&&(s=Math.ceil(-r.y/e)*e,u+=s+=i.top),h+=i.right,u+=i.bottom,h=Math.max(h,o.minWidth||0),u=Math.max(u,o.minHeight||0),h=Math.min(h,o.maxWidth||Number.MAX_SAFE_INTEGER),u=Math.min(u,o.maxHeight||Number.MAX_SAFE_INTEGER);o=this.getComputedSize(),o=h!==o.width||u!==o.height;return n===a.tx&&s===a.ty||this.translate(n,s),o&&this.resize(h,u),new U.Rectangle(-n/l,-s/c,h/l,u/c)},of.prototype.scaleContentToFit=function(t){void 0===t&&(t={}),this.scaleContentToFitImpl(t)},of.prototype.scaleContentToFitImpl=function(t,e){var n,o,i,r,s,a,l,c,h;void 0===t&&(t={}),void 0===e&&(e=!0),o=t.contentArea?(r=t.contentArea,n=this.graph.localToGraph(r),U.Point.create(r)):(n=this.getContentBBox(t),this.graph.graphToLocal(n)),n.width&&n.height&&(h=t.padding||0,s=t.minScale||0,a=t.maxScale||Number.MAX_SAFE_INTEGER,i=t.minScaleX||s,r=t.maxScaleX||a,s=t.minScaleY||s,a=t.maxScaleY||a,l=t.viewportArea||(c=this.getComputedSize(),{x:(l=this.getTranslation()).tx,y:l.ty,width:c.width,height:c.height}),l=U.Rectangle.create(l).inflate(-h),c=this.getScale(),h=l.width/n.width*c.sx,c=l.height/n.height*c.sy,!1!==t.preserveAspectRatio&&(h=c=Math.min(h,c)),(t=t.scaleGrid)&&(h=t*Math.floor(h/t),c=t*Math.floor(c/t)),h=Dn(h,i,r),c=Dn(c,s,a),this.scale(h,c),e&&(e=this.options,h=l.x-o.x*h-e.x,e=l.y-o.y*c-e.y,this.translate(h,e)))},of.prototype.getContentArea=function(t){return void 0===t&&(t={}),t.useCellGeometry?this.model.getAllCellsBBox()||new U.Rectangle:ec(this.graph.view.stage)},of.prototype.getContentBBox=function(t){return void 0===t&&(t={}),this.graph.localToGraph(this.getContentArea(t))},of.prototype.getGraphArea=function(){var t=U.Rectangle.fromSize(this.getComputedSize());return this.graph.graphToLocal(t)},of.prototype.zoomToRect=function(t,e){void 0===e&&(e={});var n=U.Rectangle.create(t),t=this.graph;e.contentArea=n,null==e.viewportArea&&(e.viewportArea={x:t.options.x,y:t.options.y,width:this.options.width,height:this.options.height}),this.scaleContentToFitImpl(e,!1);n=n.getCenter();return this.centerPoint(n.x,n.y),this},of.prototype.zoomToFit=function(t){return void 0===t&&(t={}),this.zoomToRect(this.getContentArea(t),t)},of.prototype.centerPoint=function(t,e){var n=this.getComputedSize(),o=this.getScale(),i=this.getTranslation(),r=n.width/2,n=n.height/2;e="number"==typeof e?e:n,t=r-(t="number"==typeof t?t:r)*o.sx,e=n-e*o.sy,i.tx===t&&i.ty===e||this.translate(t,e)},of.prototype.centerContent=function(t){t=this.graph.getContentArea(t).getCenter();this.centerPoint(t.x,t.y)},of.prototype.centerCell=function(t){return this.positionCell(t,"center")},of.prototype.positionPoint=function(t,e,n){var o=this.getComputedSize();(e=jr(e,Math.max(0,o.width)))<0&&(e=o.width+e),(n=jr(n,Math.max(0,o.height)))<0&&(n=o.height+n);var i=this.getTranslation(),o=this.getScale(),e=e-t.x*o.sx,o=n-t.y*o.sy;i.tx===e&&i.ty===o||this.translate(e,o)},of.prototype.positionRect=function(t,e){t=U.Rectangle.create(t);switch(e){case"center":return this.positionPoint(t.getCenter(),"50%","50%");case"top":return this.positionPoint(t.getTopCenter(),"50%",0);case"top-right":return this.positionPoint(t.getTopRight(),"100%",0);case"right":return this.positionPoint(t.getRightMiddle(),"100%","50%");case"bottom-right":return this.positionPoint(t.getBottomRight(),"100%","100%");case"bottom":return this.positionPoint(t.getBottomCenter(),"50%","100%");case"bottom-left":return this.positionPoint(t.getBottomLeft(),0,"100%");case"left":return this.positionPoint(t.getLeftMiddle(),0,"50%");case"top-left":return this.positionPoint(t.getTopLeft(),0,0);default:return this}},of.prototype.positionCell=function(t,e){t=t.getBBox();return this.positionRect(t,e)},of.prototype.positionContent=function(t,e){e=this.graph.getContentArea(e);return this.positionRect(e,t)},of.prototype.dispose=function(){this.widgets.forEach(function(t){return t.dispose()}),this.widgets.clear(),this.stopListening()},sa([of.dispose()],of.prototype,"dispose",null),of),Qg=(oa(nf,Gg=yn),Object.defineProperty(nf.prototype,"widgetOptions",{get:function(){return this.options.selecting},enumerable:!1,configurable:!0}),Object.defineProperty(nf.prototype,"rubberbandDisabled",{get:function(){return!0!==this.widgetOptions.enabled||!0!==this.widgetOptions.rubberband},enumerable:!1,configurable:!0}),Object.defineProperty(nf.prototype,"disabled",{get:function(){return!0!==this.widgetOptions.enabled},enumerable:!1,configurable:!0}),Object.defineProperty(nf.prototype,"length",{get:function(){return this.widget.length},enumerable:!1,configurable:!0}),Object.defineProperty(nf.prototype,"cells",{get:function(){return this.widget.cells},enumerable:!1,configurable:!0}),nf.prototype.init=function(){this.widget=this.graph.hook.createSelection(),this.startListening()},nf.prototype.startListening=function(){this.graph.on("blank:mousedown",this.onBlankMouseDown,this),this.graph.on("cell:mousemove",this.onCellMouseMove,this),this.graph.on("cell:mouseup",this.onCellMouseUp,this),this.widget.on("box:mousedown",this.onBoxMouseDown,this)},nf.prototype.stopListening=function(){this.graph.off("blank:mousedown",this.onBlankMouseDown,this),this.graph.off("cell:mousemove",this.onCellMouseMove,this),this.graph.off("cell:mouseup",this.onCellMouseUp,this),this.widget.off("box:mousedown",this.onBoxMouseDown,this)},nf.prototype.onBlankMouseDown=function(t){t=t.e;this.allowRubberband(t,!0)||this.allowRubberband(t)&&!this.graph.scroller.allowPanning(t,!0)&&!this.graph.panning.allowPanning(t,!0)?this.startRubberband(t):this.clean()},nf.prototype.allowRubberband=function(t,e){return!this.rubberbandDisabled&&Dg.isMatch(t,this.widgetOptions.modifiers,e)&&this.graph.hook.allowRubberband(t)},nf.prototype.onCellMouseMove=function(t){t=t.cell;this.movedMap.set(t,!0)},nf.prototype.onCellMouseUp=function(t){var e=t.e,n=t.cell,o=this.widgetOptions,t=this.disabled;!t&&this.movedMap.has(n)&&((t=!1===o.selectCellOnMoved)||(t=!1===o.selectNodeOnMoved&&n.isNode()),t=t||!1===o.selectEdgeOnMoved&&n.isEdge()),t||(!1===o.multiple||!e.ctrlKey&&!e.metaKey?this.reset(n):this.unselectMap.has(n)?this.unselectMap.delete(n):this.isSelected(n)?this.unselect(n):this.select(n)),this.movedMap.delete(n)},nf.prototype.onBoxMouseDown=function(t){var e=t.e,t=t.cell;this.disabled||!1!==this.widgetOptions.multiple&&(e.ctrlKey||e.metaKey)&&(this.unselect(t),this.unselectMap.set(t,!0))},nf.prototype.isEmpty=function(){return this.length<=0},nf.prototype.isSelected=function(t){return this.widget.isSelected(t)},nf.prototype.getCells=function(t){var e=this;return(Array.isArray(t)?t:[t]).map(function(t){return"string"==typeof t?e.graph.getCellById(t):t}).filter(function(t){return null!=t})},nf.prototype.select=function(t,e){void 0===e&&(e={});t=this.getCells(t);return t.length&&(this.isMultiple()?this.widget.select(t,e):this.reset(t.slice(0,1),e)),this},nf.prototype.unselect=function(t,e){return void 0===e&&(e={}),this.widget.unselect(this.getCells(t),e),this},nf.prototype.reset=function(t,e){return void 0===e&&(e={}),this.widget.reset(t?this.getCells(t):[],e),this},nf.prototype.clean=function(){return this.widget.clean(),this},nf.prototype.enable=function(){return this.disabled&&(this.widgetOptions.enabled=!0),this},nf.prototype.disable=function(){return this.disabled||(this.widgetOptions.enabled=!1),this},nf.prototype.startRubberband=function(t){return this.rubberbandDisabled||this.widget.startSelecting(t),this},nf.prototype.enableRubberband=function(){return this.rubberbandDisabled&&(this.widgetOptions.rubberband=!0),this},nf.prototype.disableRubberband=function(){return this.rubberbandDisabled||(this.widgetOptions.rubberband=!1),this},nf.prototype.isMultiple=function(){return!1!==this.widgetOptions.multiple},nf.prototype.enableMultiple=function(){return this.widgetOptions.multiple=!0,this},nf.prototype.disableMultiple=function(){return this.widgetOptions.multiple=!1,this},nf.prototype.setModifiers=function(t){return this.widgetOptions.modifiers=t,this},nf.prototype.setContent=function(t){return this.widget.setContent(t),this},nf.prototype.setFilter=function(t){return this.widget.setFilter(t),this},nf.prototype.dispose=function(){this.stopListening(),this.widget.dispose()},sa([yn.dispose()],nf.prototype,"dispose",null),nf),tf=(oa(ef,_g=U.Basecoat),Object.defineProperty(ef.prototype,"disabled",{get:function(){return!0!==this.options.enabled},enumerable:!1,configurable:!0}),ef.prototype.enable=function(){this.disabled&&(this.options.enabled=!0)},ef.prototype.disable=function(){this.disabled||(this.options.enabled=!1)},ef.prototype.undo=function(t){var e;return void 0===t&&(t={}),this.disabled||(e=this.undoStack.pop())&&(this.revertCommand(e,t),this.redoStack.push(e),this.notify("undo",e,t)),this},ef.prototype.redo=function(t){var e;return void 0===t&&(t={}),this.disabled||(e=this.redoStack.pop())&&(this.applyCommand(e,t),this.undoStack.push(e),this.notify("redo",e,t)),this},ef.prototype.cancel=function(t){var e;return void 0===t&&(t={}),this.disabled||(e=this.undoStack.pop())&&(this.revertCommand(e,t),this.redoStack=[],this.notify("cancel",e,t)),this},ef.prototype.clean=function(t){return void 0===t&&(t={}),this.undoStack=[],this.redoStack=[],this.notify("clean",null,t),this},ef.prototype.canUndo=function(){return!this.disabled&&0<this.undoStack.length},ef.prototype.canRedo=function(){return!this.disabled&&0<this.redoStack.length},ef.prototype.validate=function(t){for(var e,n=[],o=1;o<arguments.length;o++)n[o-1]=arguments[o];return(e=this.validator).validate.apply(e,aa([t],n)),this},ef.prototype.dispose=function(){this.validator.dispose(),this.clean(),this.stopListening()},ef.prototype.startListening=function(){var n=this;this.model.on("batch:start",this.initBatchCommand,this),this.model.on("batch:stop",this.storeBatchCommand,this),this.options.eventNames&&this.options.eventNames.forEach(function(t,e){n.handlers[e]=n.addCommand.bind(n,t),n.model.on(t,n.handlers[e])}),this.validator.on("invalid",function(t){return n.trigger("invalid",t)})},ef.prototype.stopListening=function(){var n=this;this.model.off("batch:start",this.initBatchCommand,this),this.model.off("batch:stop",this.storeBatchCommand,this),this.options.eventNames&&(this.options.eventNames.forEach(function(t,e){n.model.off(t,n.handlers[e])}),this.handlers.length=0),this.validator.off("invalid")},ef.prototype.createCommand=function(t){return{batch:!!t&&t.batch,data:{}}},ef.prototype.revertCommand=function(t,e){this.freezed=!0;for(var n=Array.isArray(t)?Rg.sortBatchCommands(t):[t],o=n.length-1;0<=o;--o){var i=n[o],r=ia(ia({},e),Gi(i.options,this.options.revertOptionsList||[]));this.executeCommand(i,!0,r)}this.freezed=!1},ef.prototype.applyCommand=function(t,e){this.freezed=!0;for(var n=Array.isArray(t)?Rg.sortBatchCommands(t):[t],o=0;o<n.length;o+=1){var i=n[o],r=ia(ia({},e),Gi(i.options,this.options.applyOptionsList||[]));this.executeCommand(i,!1,r)}this.freezed=!1},ef.prototype.executeCommand=function(t,e,n){var o,i,r=this.model,s=r.getCell(t.data.id),a=t.event;Rg.isAddEvent(a)&&e||Rg.isRemoveEvent(a)&&!e?s.remove(n):Rg.isAddEvent(a)&&!e||Rg.isRemoveEvent(a)&&e?(o=t.data).node?r.addNode(o.props,n):o.edge&&r.addEdge(o.props,n):Rg.isChangeEvent(a)?(a=(o=t.data).key)&&(i=(e?o.prev:o.next)[a],s.prop(a,i,n)):(i=this.options.executeCommand)&&Gr(i,this,t,e,n)},ef.prototype.addCommand=function(e,t){if(!this.freezed&&!this.disabled){var n=t,o=n.options||{};if(!o.dryrun&&!(Rg.isAddEvent(e)&&this.options.ignoreAdd||Rg.isRemoveEvent(e)&&this.options.ignoreRemove||Rg.isChangeEvent(e)&&this.options.ignoreChange)){var i=this.options.beforeAddCommand;if(null==i||!1!==Gr(i,this,e,t)){"cell:change:*"===e&&(e="cell:change:"+n.key);var r,s=n.cell,a=s instanceof U.Model;if(this.batchCommands?(r=this.batchCommands[Math.max(this.lastBatchIndex,0)],i=a&&!r.modelChange||r.data.id!==s.id,n=r.event!==e,0<=this.lastBatchIndex&&(i||n)&&((n=this.batchCommands.findIndex(function(t){return(a&&t.modelChange||t.data.id===s.id)&&t.event===e}))<0||Rg.isAddEvent(e)||Rg.isRemoveEvent(e)?r=this.createCommand({batch:!0}):(r=this.batchCommands[n],this.batchCommands.splice(n,1)),this.batchCommands.push(r),this.lastBatchIndex=this.batchCommands.length-1)):r=this.createCommand({batch:!1}),Rg.isAddEvent(e)||Rg.isRemoveEvent(e)){var l=r.data;return r.event=e,r.options=o,l.id=s.id,l.props=mo(s.toJSON()),s.isEdge()?l.edge=!0:s.isNode()&&(l.node=!0),this.push(r,o)}if(Rg.isChangeEvent(e)){var c=t.key,l=r.data;return r.batch&&r.event||(r.event=e,r.options=o,l.key=c,null==l.prev&&(l.prev={}),l.prev[c]=yo(s.previous(c)),a?r.modelChange=!0:l.id=s.id),null==l.next&&(l.next={}),l.next[c]=yo(s.prop(c)),this.push(r,o)}c=this.options.afterAddCommand;c&&Gr(c,this,e,t,r),this.push(r,o)}}}},ef.prototype.initBatchCommand=function(t){this.batchCommands?this.batchLevel+=1:(this.batchCommands=[this.createCommand({batch:!0})],this.batchLevel=0,this.lastBatchIndex=-1)},ef.prototype.storeBatchCommand=function(t){var e;this.batchCommands&&this.batchLevel<=0?(0<(e=this.filterBatchCommand(this.batchCommands)).length&&(this.redoStack=[],this.undoStack.push(e),this.notify("add",e,t)),this.batchCommands=null,this.lastBatchIndex=-1,this.batchLevel=0):this.batchCommands&&0<this.batchLevel&&--this.batchLevel},ef.prototype.filterBatchCommand=function(t){for(var r=t.slice(),s=[];0<r.length;)!function(){var t=r.shift(),e=t.event,n=t.data.id;if(null!=e&&(null!=n||t.modelChange)){if(Rg.isAddEvent(e)){var o=r.findIndex(function(t){return Rg.isRemoveEvent(t.event)&&t.data.id===n});if(0<=o)return r=r.filter(function(t,e){return o<e||t.data.id!==n})}else if(Rg.isRemoveEvent(e)){var i=r.findIndex(function(t){return Rg.isAddEvent(t.event)&&t.data.id===n});if(0<=i)return r.splice(i,1)}else if(Rg.isChangeEvent(e)){e=t.data;if(bi(e.prev,e.next))return}s.push(t)}}();return s},ef.prototype.notify=function(t,e,n){e=null==e?null:Array.isArray(e)?e:[e];this.emit(t,{cmds:e,options:n}),this.emit("change",{cmds:e,options:n})},ef.prototype.push=function(t,e){this.redoStack=[],t.batch?(this.lastBatchIndex=Math.max(this.lastBatchIndex,0),this.emit("batch",{cmd:t,options:e})):(this.undoStack.push(t),this.notify("add",t,e))},sa([U.Basecoat.dispose()],ef.prototype,"dispose",null),ef);function ef(t){var e=_g.call(this)||this;return e.batchCommands=null,e.batchLevel=0,e.lastBatchIndex=-1,e.freezed=!1,e.handlers=[],e.model=t.graph.model,e.options=Rg.getOptions(t),e.validator=new ef.Validator({history:e,cancelInvalid:e.options.cancelInvalid}),e.clean(),e.startListening(),e}function nf(){var t=null!==Gg&&Gg.apply(this,arguments)||this;return t.movedMap=new WeakMap,t.unselectMap=new WeakMap,t}function of(){var t=null!==Hg&&Hg.apply(this,arguments)||this;return t.widgets=new Map,t}function rf(){var t=null!==Ug&&Ug.apply(this,arguments)||this;return t.highlights={},t}function sf(){return null!==$g&&$g.apply(this,arguments)||this}function af(){return null!==qg&&qg.apply(this,arguments)||this}function lf(t){var e=Xg.call(this)||this;return e.map={},e.command=t.history,e.cancelInvalid=!1!==t.cancelInvalid,e.command.on("add",e.onCommandAdded,e),e}cn=tf=tf||{},oa(lf,Xg=U.Basecoat),lf.prototype.onCommandAdded=function(t){var e=this,t=t.cmds;return Array.isArray(t)?t.every(function(t){return e.isValidCommand(t)}):this.isValidCommand(t)},lf.prototype.isValidCommand=function(r){if(r.options&&!1===r.options.validation)return!0;var t=r.event&&this.map[r.event]||[],s=null;return t.forEach(function(n){var o=0,i=function(t){var e=n[o];o+=1;try{if(!e)return void(s=t);e(t,r,i)}catch(t){i(t)}};i(s)}),!s||(this.cancelInvalid&&this.command.cancel(),this.emit("invalid",{err:s}),!1)},lf.prototype.validate=function(t){for(var e=this,n=[],o=1;o<arguments.length;o++)n[o-1]=arguments[o];var i=Array.isArray(t)?t:t.split(/\s+/);return n.forEach(function(t){if("function"!=typeof t)throw new Error(i.join(" ")+" requires callback functions.")}),i.forEach(function(t){null==e.map[t]&&(e.map[t]=[]),e.map[t].push(n)}),this},lf.prototype.dispose=function(){this.command.off("add",this.onCommandAdded,this)},sa([U.Basecoat.dispose()],lf.prototype,"dispose",null),un=lf,cn.Validator=un,(Wg=Rg=Rg||{}).isAddEvent=function(t){return"cell:added"===t},Wg.isRemoveEvent=function(t){return"cell:removed"===t},Wg.isChangeEvent=function(t){return null!=t&&t.startsWith("cell:change:")},Wg.getOptions=function(t){t.graph;var e=ra(t,["graph"]),n=["cell:added","cell:removed","cell:change:*"],o=["batch:start","batch:stop"],i=t.eventNames?t.eventNames.filter(function(t){return!(Wg.isChangeEvent(t)||n.includes(t)||o.includes(t))}):n;return ia(ia({},e),{eventNames:i,applyOptionsList:t.applyOptionsList||["propertyPath"],revertOptionsList:t.revertOptionsList||["propertyPath"]})},Wg.sortBatchCommands=function(t){for(var e=[],n=0,o=t.length;n<o;n+=1){var i=t[n],r=null;if(Wg.isAddEvent(i.event))for(var s=i.data.id,a=0;a<n;a+=1)if(t[a].data.id===s){r=a;break}null!==r?e.splice(r,0,i):e.push(i)}return e};var cf,hf,uf=(oa(ff,hf=yn),Object.defineProperty(ff.prototype,"widgetOptions",{get:function(){return this.options.minimap},enumerable:!1,configurable:!0}),ff.prototype.init=function(){this.widget=this.graph.hook.createMiniMap()},ff.prototype.dispose=function(){this.widget&&this.widget.dispose()},sa([yn.dispose()],ff.prototype,"dispose",null),ff),pf=t(function(s){!function(t,o){if(t){for(var l,c={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"ins",46:"del",91:"meta",93:"meta",224:"meta"},n={106:"*",107:"+",109:"-",110:".",111:"/",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},h={"~":"`","!":"1","@":"2","#":"3",$:"4","%":"5","^":"6","&":"7","*":"8","(":"9",")":"0",_:"-","+":"=",":":";",'"':"'","<":",",">":".","?":"/","|":"\\"},u={option:"alt",command:"meta",return:"enter",escape:"esc",plus:"+",mod:/Mac|iPod|iPhone|iPad/.test(navigator.platform)?"meta":"ctrl"},e=1;e<20;++e)c[111+e]="f"+e;for(e=0;e<=9;++e)c[e+96]=e.toString();r.prototype.bind=function(t,e,n){return t=t instanceof Array?t:[t],this._bindMultiple.call(this,t,e,n),this},r.prototype.unbind=function(t,e){return this.bind.call(this,t,function(){},e)},r.prototype.trigger=function(t,e){return this._directMap[t+":"+e]&&this._directMap[t+":"+e]({},t),this},r.prototype.reset=function(){return this._callbacks={},this._directMap={},this},r.prototype.stopCallback=function(t,e){return!(-1<(" "+e.className+" ").indexOf(" mousetrap "))&&(!function t(e,n){return null!==e&&e!==o&&(e===n||t(e.parentNode,n))}(e,this.target)&&("composedPath"in t&&"function"==typeof t.composedPath&&((n=t.composedPath()[0])!==t.target&&(e=n)),"INPUT"==e.tagName||"SELECT"==e.tagName||"TEXTAREA"==e.tagName||e.isContentEditable));var n},r.prototype.handleKey=function(){return this._handleKey.apply(this,arguments)},r.addKeycodes=function(t){for(var e in t)t.hasOwnProperty(e)&&(c[e]=t[e]);l=null},(r.init=function(){var t,e=r(o);for(t in e)"_"!==t.charAt(0)&&(r[t]=function(t){return function(){return e[t].apply(e,arguments)}}(t))})(),t.Mousetrap=r,s.exports&&(s.exports=r)}function i(t,e,n){t.addEventListener?t.addEventListener(e,n,!1):t.attachEvent("on"+e,n)}function m(t){if("keypress"!=t.type)return c[t.which]||n[t.which]||String.fromCharCode(t.which).toLowerCase();var e=String.fromCharCode(t.which);return t.shiftKey||(e=e.toLowerCase()),e}function C(t){return"shift"==t||"ctrl"==t||"alt"==t||"meta"==t}function v(t,e){for(var n,o,i,r=[],s="+"===t?["+"]:t.replace(/\+{2}/g,"+plus").split("+"),a=0;a<s.length;++a)n=s[a],u[n]&&(n=u[n]),e&&"keypress"!=e&&h[n]&&(n=h[n],r.push("shift")),C(n)&&r.push(n);return{key:n,modifiers:r,action:(o=n,i=r,"keypress"==(t=(t=e)||(function(){if(!l)for(var t in l={},c)95<t&&t<112||c.hasOwnProperty(t)&&(l[c[t]]=t);return l}()[o]?"keydown":"keypress"))&&i.length&&(t="keydown"),e=t)}}function r(t){var p=this;if(t=t||o,!(p instanceof r))return new r(t);p.target=t,p._callbacks={},p._directMap={};var a,d={},l=!1,c=!1,h=!1;function u(t){t=t||{};var e,n=!1;for(e in d)t[e]?n=!0:d[e]=0;n||(h=!1)}function g(t,e,n,o,i,r){var s,a=[],l=n.type;if(!p._callbacks[t])return[];for("keyup"==l&&C(t)&&(e=[t]),s=0;s<p._callbacks[t].length;++s){var c,h,u=p._callbacks[t][s];!o&&u.seq&&d[u.seq]!=u.level||l!=u.action||("keypress"!=l||n.metaKey||n.ctrlKey)&&(h=u.modifiers,e.sort().join(",")!==h.sort().join(","))||(c=!o&&u.combo==i,h=o&&u.seq==o&&u.level==r,(c||h)&&p._callbacks[t].splice(s,1),a.push(u))}return a}function f(t,e,n,o){p.stopCallback(e,e.target||e.srcElement,n,o)||!1===t(e,n)&&((n=e).preventDefault?n.preventDefault():n.returnValue=!1,(e=e).stopPropagation?e.stopPropagation():e.cancelBubble=!0)}function e(t){"number"!=typeof t.which&&(t.which=t.keyCode);var e,n=m(t);n&&("keyup"!=t.type||l!==n?p.handleKey(n,(e=[],(n=t).shiftKey&&e.push("shift"),n.altKey&&e.push("alt"),n.ctrlKey&&e.push("ctrl"),n.metaKey&&e.push("meta"),e),t):l=!1)}function s(e,t,n,o){function i(t){f(n,t,e),"keyup"!==o&&(l=m(t)),setTimeout(u,10)}for(var r=d[e]=0;r<t.length;++r){var s=r+1===t.length?i:function(t){return function(){h=t,++d[e],clearTimeout(a),a=setTimeout(u,1e3)}}(o||v(t[r+1]).action);y(t[r],s,o,e,r)}}function y(t,e,n,o,i){p._directMap[t+":"+n]=e;var r=(t=t.replace(/\s+/g," ")).split(" ");1<r.length?s(t,r,e,n):(n=v(t,n),p._callbacks[n.key]=p._callbacks[n.key]||[],g(n.key,n.modifiers,{type:n.action},o,t,i),p._callbacks[n.key][o?"unshift":"push"]({callback:e,modifiers:n.modifiers,action:n.action,seq:o,level:i,combo:t}))}p._handleKey=function(t,e,n){for(var o=g(t,e,n),i={},r=0,s=!1,a=0;a<o.length;++a)o[a].seq&&(r=Math.max(r,o[a].level));for(a=0;a<o.length;++a)if(o[a].seq){if(o[a].level!=r)continue;s=!0,i[o[a].seq]=1,f(o[a].callback,n,o[a].combo,o[a].seq)}else s||f(o[a].callback,n,o[a].combo);e="keypress"==n.type&&c;n.type!=h||C(t)||e||u(i),c=s&&"keydown"==n.type},p._bindMultiple=function(t,e,n){for(var o=0;o<t.length;++o)y(t[o],e,n)},i(t,"keypress",e),i(t,"keydown",e),i(t,"keyup",e)}}("undefined"!=typeof window?window:null,"undefined"!=typeof window?document:null)}),df=(oa(gf,cf=U.Disposable),Object.defineProperty(gf.prototype,"graph",{get:function(){return this.options.graph},enumerable:!1,configurable:!0}),Object.defineProperty(gf.prototype,"disabled",{get:function(){return!0!==this.options.enabled},enumerable:!1,configurable:!0}),gf.prototype.enable=function(){this.disabled&&(this.options.enabled=!0,this.graph.options.keyboard.enabled=!0,this.target instanceof HTMLElement&&this.target.setAttribute("tabindex","-1"))},gf.prototype.disable=function(){this.disabled||(this.options.enabled=!1,this.graph.options.keyboard.enabled=!1,this.target instanceof HTMLElement&&this.target.removeAttribute("tabindex"))},gf.prototype.on=function(t,e,n){this.mousetrap.bind(this.getKeys(t),e,n)},gf.prototype.off=function(t,e){this.mousetrap.unbind(this.getKeys(t),e)},gf.prototype.focus=function(){this.target.focus()},gf.prototype.getKeys=function(t){var e=this;return(Array.isArray(t)?t:[t]).map(function(t){return e.formatkey(t)})},gf.prototype.formatkey=function(t){var e=t.toLowerCase().replace(/\s/g,"").replace("delete","del").replace("cmd","command"),t=this.options.format;return t?Gr(t,this.graph,e):e},gf.prototype.isGraphEvent=function(t){t=t.srcElement||t.target;return!!t&&(t===this.target||t.parentElement===this.target||Cs(this.container,t))},gf.prototype.isEnabledForEvent=function(t){var e=!this.disabled&&this.isGraphEvent(t);return e&&this.options.guard?Gr(this.options.guard,this.graph,t):e},gf.prototype.dispose=function(){this.mousetrap.reset()},sa([U.Disposable.dispose()],gf.prototype,"dispose",null),gf);function gf(t){var e=cf.call(this)||this;e.options=t;var n=e.graph.scroller.widget;return e.container=(n||e.graph).container,t.global?e.target=document:(e.target=e.container,e.disabled||e.target.setAttribute("tabindex","-1"),e.graph.on("cell:mousedown",e.focus,e),e.graph.on("blank:mousedown",e.focus,e)),e.mousetrap=gf.createMousetrap(e),e}function ff(){return null!==hf&&hf.apply(this,arguments)||this}(df||(df={})).createMousetrap=function(o){var i=new pf(o.target),r=i.stopCallback;return i.stopCallback=function(t,e,n){return!(!o.isEnabledForEvent(t)||!r)&&r.call(i,t,e,n)},i};var yf,mf,Cf=(oa(xf,mf=U.Disposable),Object.defineProperty(xf.prototype,"graph",{get:function(){return this.options.graph},enumerable:!1,configurable:!0}),Object.defineProperty(xf.prototype,"disabled",{get:function(){return!0!==this.options.enabled},enumerable:!1,configurable:!0}),xf.prototype.enable=function(t){(this.disabled||t)&&(this.options.enabled=!0,this.graph.options.mousewheel.enabled=!0,U.Platform.SUPPORT_PASSIVE?this.target.addEventListener(this.eventName,this.handler,{passive:!1}):C(this.target).on("mousewheel",this.handler))},xf.prototype.disable=function(){this.disabled||(this.options.enabled=!1,this.graph.options.mousewheel.enabled=!1,U.Platform.SUPPORT_PASSIVE?this.target.removeEventListener(this.eventName,this.handler):C(this.target).off("mousewheel"))},xf.prototype.onMouseWheel=function(t){var o=this,e=t.originalEvent||t,n=this.options.guard;(null==n||n.call(this.graph,e))&&Dg.isMatch(e,this.options.modifiers)&&(t.preventDefault(),t.stopPropagation(),this.frameId&&(Xs(this.frameId),this.frameId=null),e=this.options.factor||1.2,null==this.currentScale&&(this.startPos={x:t.clientX,y:t.clientY},this.currentScale=this.graph.scroller.widget?this.graph.scroller.widget.zoom():this.graph.transform.getScale().sx),t.deltaY<0?this.currentScale*this.cumulatedFactor<.15?this.cumulatedFactor=(this.currentScale+.01)/this.currentScale:this.cumulatedFactor*=e:this.currentScale*this.cumulatedFactor<=.15?this.cumulatedFactor=(this.currentScale-.01)/this.currentScale:this.cumulatedFactor/=e,this.cumulatedFactor=Math.round(this.currentScale*this.cumulatedFactor*20)/20/this.currentScale,this.cumulatedFactor=Math.max(.01,Math.min(this.currentScale*this.cumulatedFactor,160)/this.currentScale),this.frameId=Ws(function(){var t=o.graph.scroller.widget,e=o.currentScale,n=o.graph.transform.clampScale(e*o.cumulatedFactor);(n=Dn(n,o.options.minScale||Number.MIN_SAFE_INTEGER,o.options.maxScale||Number.MAX_SAFE_INTEGER))!==e&&(t?o.options.zoomAtMousePosition?(e=o.graph.coord.clientToLocalPoint(o.startPos),t.zoom(n,{absolute:!0,center:e.clone()})):t.zoom(n,{absolute:!0}):(o.options.zoomAtMousePosition&&(t=o.graph.coord.clientToLocalPoint(o.startPos),o.graph.translate(t.x*(1-n),t.y*(1-n))),o.graph.scale(n,n))),o.frameId=null,o.currentScale=null,o.cumulatedFactor=1}))},xf.prototype.dispose=function(){this.disable()},sa([U.Disposable.dispose()],xf.prototype,"dispose",null),xf),vf=(oa(bf,yf=yn),bf.prototype.show=function(t){var e=this;void 0===t&&(t={});var n=ia(ia({},bf.defaultOptions),t),t=this.createPrintPages(n);n.ready(t,function(t){return e.showPrintWindow(t,n)},{sheetSize:this.getSheetSize(n)})},Object.defineProperty(bf.prototype,"className",{get:function(){return this.view.prefixClassName("graph-print")},enumerable:!1,configurable:!0}),bf.prototype.showPrintWindow=function(t,e){var n,o,i,r,s,a,l=this;t&&(n=C(document.body),o=C(this.view.container),i=this.view.prefixClassName("graph-printing"),n.addClass(i),r=o.children().detach(),t.forEach(function(t){t.removeClass(l.className+"-preview").addClass(l.className+"-ready").appendTo(n)}),s=!1,a=function(){s||(s=!0,n.removeClass(i),t.forEach(function(t){return t.remove()}),o.append(r),C("#"+l.styleSheetId).remove(),l.graph.trigger("after:print",e),C(window).off("afterprint",a))},C(window).one("afterprint",a),setTimeout(a,200),window.print())},bf.prototype.createPrintPage=function(t,e){this.graph.trigger("before:print",e);var n=C("<div/>").addClass(this.className),o=C("<div/>").addClass(this.view.prefixClassName("graph-print-inner")).css("position","relative");e.size&&n.addClass(this.className+"-size-"+e.size);var i=U.Vector.create(this.view.svg).clone(),r=i.findOne("."+this.view.prefixClassName("graph-svg-stage"));o.append(i.node);var s=this.getSheetSize(e),a=this.graph.transform.getGraphArea(),l=this.graph.transform.getScale(),e=this.graph.translate(),l=_l().translate(e.tx/l.sx,e.ty/l.sy),a=this.getPageInfo(a,t,s),t=a.scale,a=a.bbox;return o.css({left:0,top:0}),i.attr({width:a.width*t,height:a.height*t,style:"position:relative",viewBox:[a.x,a.y,a.width,a.height].join(" ")}),r.attr("transform",Ul(l)),n.append(o),n.addClass(this.className+"-preview"),{$page:n,sheetSize:s}},bf.prototype.createPrintPages=function(e){var n,t,o=this,i=this.getPrintArea(e),r=[];return e.page?(t=this.getPageSize(i,e.page),this.getPageAreas(i,t).forEach(function(t){n=o.createPrintPage(t,e),r.push(n.$page)})):(n=this.createPrintPage(i,e),r.push(n.$page)),n&&(i={width:n.sheetSize.cssWidth,height:n.sheetSize.cssHeight},this.updatePrintStyle(i,e)),r},Object.defineProperty(bf.prototype,"styleSheetId",{get:function(){return this.view.prefixClassName("graph-print-style")},enumerable:!1,configurable:!0}),bf.prototype.updatePrintStyle=function(n,t){var e=Object.keys(n).reduce(function(t,e){return t+" "+e+":"+n[e]+";"},""),o=Rr(t.margin),i=t.marginUnit||"",r=t.sheetUnit||"",t="\n      @media print {\n        ."+this.className+"."+this.className+"-ready {\n          "+e+"\n        }\n\n        @page {\n          margin:\n          "+[o.top+i,o.right+i,o.bottom+i,o.left+i].join(" ")+";\n          size: "+(t.sheet.width+r)+" "+(t.sheet.height+r)+";\n\n        ."+this.className+"."+this.className+"-preview {\n          "+e+"\n        }\n      }",r=this.styleSheetId,e=C("#"+r);e.length?e.html(t):C("head").append('\'<style type="text/css" id="'+r+'">'+t+"</style>'")},bf.prototype.getPrintArea=function(t){var e=t.area;return e||(t=Rr(t.padding),e=this.graph.getContentArea().moveAndExpand({x:-t.left,y:-t.top,width:t.left+t.right,height:t.top+t.bottom})),e},bf.prototype.getPageSize=function(t,e){if("object"!=typeof e)return{width:t.width,height:t.height};var n=e,e={width:n.width,height:n.height};return null==e.width&&(e.width=Math.ceil(t.width/(n.columns||1))),null==e.height&&(e.height=Math.ceil(t.height/(n.rows||1))),e},bf.prototype.getPageAreas=function(t,e){for(var n=[],o=e.width,i=e.height,r=0,s=0;r<t.height&&s<200;r+=i,s+=1)for(var a=0,l=0;a<t.width&&l<200;a+=o,l+=1)n.push(new U.Rectangle(t.x+a,t.y+r,o,i));return n},bf.prototype.getSheetSize=function(t){var e=t.sheet,n=Rr(t.margin),o=t.marginUnit||"",i=t.sheetUnit||"",t="calc("+e.width+i+" - "+(n.left+n.right)+o+")",n="calc("+e.height+i+" - "+(n.top+n.bottom)+o+")",o=U.Unit.measure(t,n);return{cssWidth:t,cssHeight:n,width:o.width,height:o.height}},bf.prototype.getPageInfo=function(t,e,n){var o=new U.Rectangle(e.x-t.x,e.y-t.y,e.width,e.height),t=o.width/o.height,e=n.width/n.height;return{bbox:o,scale:e<t?n.width/o.width:n.height/o.height,fitHorizontal:e<t}},bf.prototype.dispose=function(){},sa([yn.dispose()],bf.prototype,"dispose",null),bf);function bf(){return null!==yf&&yf.apply(this,arguments)||this}function xf(t){var e=mf.call(this)||this;e.options=t,e.cumulatedFactor=1;t=e.graph.scroller.widget;return e.container=(t||e.graph).container,e.target=e.options.global?document:e.container,e.eventName=U.Platform.isEventSupported("wheel")?"wheel":"mousewheel",e.handler=e.onMouseWheel.bind(e),e.options.enabled&&e.enable(!0),e}(vf||(vf={})).defaultOptions={page:!1,sheet:{width:210,height:297},sheetUnit:"mm",margin:.4,marginUnit:"in",padding:5,ready:function(t,e){return e(t)}};var wf,Ef,Af=(oa(Mf,Ef=yn),Mf.prototype.toSVG=function(n,o){var i=this;void 0===o&&(o={}),this.graph.trigger("before:export",o);var t=this.view.svg,e=U.Vector.create(t).clone(),r=e.node,s=e.findOne("."+this.view.prefixClassName("graph-svg-stage")),a=o.viewBox||this.graph.graphToLocal(this.graph.getContentBBox()),l=o.preserveDimensions;if(l&&(l="boolean"==typeof l?a:l,e.attr({width:l.width,height:l.height})),e.removeAttribute("style").attr("viewBox",[a.x,a.y,a.width,a.height].join(" ")),s.removeAttribute("transform"),!1!==o.copyStyles){for(var c=t.ownerDocument,s=Array.from(t.querySelectorAll("*")),h=Array.from(r.querySelectorAll("*")),u=c.styleSheets.length,p=[],d=u-1;0<=d;--d)p[d]=c.styleSheets[d],c.styleSheets[d].disabled=!0;var g={};s.forEach(function(t,e){var n=window.getComputedStyle(t,null),o={};Object.keys(n).forEach(function(t){o[t]=n.getPropertyValue(t)}),g[e]=o}),u!==c.styleSheets.length&&p.forEach(function(t,e){c.styleSheets[e]=t});for(var f=0;f<u;f+=1)c.styleSheets[f].disabled=!1;var y={};s.forEach(function(t,e){var n=window.getComputedStyle(t,null),o=g[e],i={};Object.keys(n).forEach(function(t){n.getPropertyValue(t)!==o[t]&&(i[t]=n.getPropertyValue(t))}),y[e]=i}),h.forEach(function(t,e){C(t).css(y[e])})}h=o.stylesheet;"string"==typeof h&&(m=t.ownerDocument.implementation.createDocument(null,"xml",null).createCDATASection(h),e.prepend(U.Vector.create("style",{type:"text/css"},[m])));var m=function(){var t=o.beforeSerialize;"function"!=typeof t||(e=Gr(t,i.graph,r))instanceof SVGSVGElement&&(r=e);var e=(new XMLSerializer).serializeToString(r).replace(/&nbsp;/g,"Â ");i.graph.trigger("after:export",o),n(e)};o.serializeImages?(e=e.find("image").map(function(o){return new Promise(function(n){var t=o.attr("xlink:href")||o.attr("href");U.DataUri.imageToDataUri(t,function(t,e){!t&&e&&o.attr("xlink:href",e),n()})})}),Promise.all(e).then(m)):m()},Mf.prototype.toDataURL=function(o,i){var t=i.viewBox||this.graph.graphToLocal(this.graph.getContentBBox()),e=Rr(i.padding);i.width&&i.height&&(e.left+e.right>=i.width&&(e.left=e.right=0),e.top+e.bottom>=i.height&&(e.top=e.bottom=0));var n=new U.Rectangle(-e.left,-e.top,e.left+e.right,e.top+e.bottom);i.width&&i.height&&(r=t.width+e.left+e.right,s=t.height+e.top+e.bottom,n.scale(r/i.width,s/i.height)),t=U.Rectangle.create(t).moveAndExpand(n);var r="number"==typeof i.width&&"number"==typeof i.height?{width:i.width,height:i.height}:t,s=i.ratio?parseFloat(i.ratio):1;isFinite(s)&&0!==s||(s=1);var a={width:Math.max(Math.round(r.width*s),1),height:Math.max(Math.round(r.height*s),1)},n=document.createElement("canvas"),r=n.getContext("2d");n.width=a.width,n.height=a.height;s=a.width-1,n=a.height-1;r.fillStyle="rgb(1,1,1)",r.fillRect(s,n,1,1);n=r.getImageData(s,n,1,1).data;if(1!==n[0]||1!==n[1]||1!==n[2])throw new Error("size exceeded");var l=new Image;l.onload=function(){var t=document.createElement("canvas");t.width=a.width,t.height=a.height;var e=t.getContext("2d");e.fillStyle=i.backgroundColor||"white",e.fillRect(0,0,a.width,a.height);try{e.drawImage(l,0,0,a.width,a.height);var n=t.toDataURL(i.type,i.quality);o(n)}catch(t){}},this.toSVG(function(t){l.src="data:image/svg+xml,"+encodeURIComponent(t)},ia(ia({},i),{viewBox:t,serializeImages:!0,preserveDimensions:ia({},a)}))},Mf.prototype.toPNG=function(t,e){void 0===e&&(e={}),this.toDataURL(t,ia(ia({},e),{type:"image/png"}))},Mf.prototype.toJPEG=function(t,e){void 0===e&&(e={}),this.toDataURL(t,ia(ia({},e),{type:"image/jpeg"}))},Mf),Pf=(oa(Df,wf=yn),Object.defineProperty(Df.prototype,"widgetOptions",{get:function(){return this.options.panning},enumerable:!1,configurable:!0}),Object.defineProperty(Df.prototype,"pannable",{get:function(){return this.widgetOptions&&!0===this.widgetOptions.enabled},enumerable:!1,configurable:!0}),Df.prototype.init=function(){this.startListening(),this.updateClassName()},Df.prototype.startListening=function(){this.graph.on("blank:mousedown",this.preparePanning,this),this.graph.on("node:unhandled:mousedown",this.preparePanning,this),this.graph.on("edge:unhandled:mousedown",this.preparePanning,this)},Df.prototype.stopListening=function(){this.graph.off("blank:mousedown",this.preparePanning,this),this.graph.off("node:unhandled:mousedown",this.preparePanning,this),this.graph.off("edge:unhandled:mousedown",this.preparePanning,this)},Df.prototype.preparePanning=function(t){t=t.e;(this.allowPanning(t,!0)||this.allowPanning(t)&&!this.graph.selection.allowRubberband(t,!0))&&this.startPanning(t)},Df.prototype.allowPanning=function(t,e){return this.pannable&&Dg.isMatch(t,this.widgetOptions.modifiers,e)&&this.graph.hook.allowPanning(t)},Df.prototype.startPanning=function(t){t=this.view.normalizeEvent(t);this.clientX=t.clientX,this.clientY=t.clientY,this.panning=!0,this.updateClassName(),this.view.$(document.body).on({"mousemove.panning touchmove.panning":this.pan.bind(this),"mouseup.panning touchend.panning":this.stopPanning.bind(this)}),this.view.$(window).on("mouseup.panning",this.stopPanning.bind(this))},Df.prototype.pan=function(t){var e=this.view.normalizeEvent(t),n=e.clientX-this.clientX,t=e.clientY-this.clientY;this.clientX=e.clientX,this.clientY=e.clientY,this.graph.translateBy(n,t)},Df.prototype.stopPanning=function(t){this.panning=!1,this.updateClassName(),this.view.$(document.body).off(".panning"),this.view.$(window).off(".panning")},Df.prototype.updateClassName=function(){var t=this.view.container,e=this.view.prefixClassName("graph-panning"),n=this.view.prefixClassName("graph-pannable");this.pannable?this.panning?(Qr(t,e),ts(t,n)):(ts(t,e),Qr(t,n)):(ts(t,e),ts(t,n))},Df.prototype.enablePanning=function(){this.pannable||(this.widgetOptions.enabled=!0,this.updateClassName())},Df.prototype.disablePanning=function(){this.pannable&&(this.widgetOptions.enabled=!1,this.updateClassName())},Df.prototype.dispose=function(){this.stopListening()},sa([yn.dispose()],Df.prototype,"dispose",null),Df);function Df(){return null!==wf&&wf.apply(this,arguments)||this}function Mf(){return null!==Ef&&Ef.apply(this,arguments)||this}(dn=Kf=Kf||{}).hook=function(r,s){return function(t,e,n){var o=n.value,i=s||e;n.value=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=this.options[i];if(null!=n){this.getNativeValue=o.bind.apply(o,aa([this],t));n=Gr.apply(Wr,aa([n,this.graph],t));if((this.getNativeValue=null)!=n||!0===r&&null===n)return n}return o.call.apply(o,aa([this],t))}}},dn.after=function(o){return function(t,e,n){var i=n.value,r=o||e;n.value=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=i.call.apply(i,aa([this],t)),o=this.options[r];return null!=o&&(n=Gr.apply(Wr,aa([o,this.graph],t))&&n),n}}};var Sf,kf,Ff,Tf=(oa(Lf,Sf=yn),Lf.prototype.createModel=function(){if(this.options.model)return this.options.model;var t=new U.Model;return t.graph=this.graph,t},Lf.prototype.createView=function(){return new Td(this.graph)},Lf.prototype.createRenderer=function(){return new qd(this.graph)},Lf.prototype.createDefsManager=function(){return new Tg(this.graph)},Lf.prototype.createGridManager=function(){return new Lg(this.graph)},Lf.prototype.createCoordManager=function(){return new Ng(this.graph)},Lf.prototype.createTransform=function(t,e){var n=this.getTransformOptions(t);return n.resizable||n.rotatable?new xg(ia(ia({node:t,graph:this.graph},n),e)):null},Lf.prototype.getTransformOptions=function(t){var e=Eg.parseOptionGroup(this.graph,t,this.options.resizing),n=Eg.parseOptionGroup(this.graph,t,this.options.rotating),t=Eg.parseOptionGroup(this.graph,t,this.options.transforming);return ia(ia({},t),{resizable:e.enabled,minWidth:e.minWidth,maxWidth:e.maxWidth,minHeight:e.minHeight,maxHeight:e.maxHeight,orthogonalResizing:e.orthogonal,restrictedResizing:e.restricted,autoScrollOnResizing:e.autoScroll,preserveAspectRatio:e.preserveAspectRatio,rotatable:n.enabled,rotateGrid:n.grid})},Lf.prototype.createTransformManager=function(){return new Kg(this.graph)},Lf.prototype.createHighlightManager=function(){return new Zg(this.graph)},Lf.prototype.createBackgroundManager=function(){return new tg(this.graph)},Lf.prototype.createClipboard=function(){return new mg},Lf.prototype.createClipboardManager=function(){return new Jg(this.graph)},Lf.prototype.createSnapline=function(){return new $d(ia({graph:this.graph},this.options.snapline))},Lf.prototype.createSnaplineManager=function(){return new Og(this.graph)},Lf.prototype.createSelection=function(){return new pg(ia({graph:this.graph},this.options.selecting))},Lf.prototype.createSelectionManager=function(){return new Qg(this.graph)},Lf.prototype.allowRubberband=function(t){return!0},Lf.prototype.createHistoryManager=function(){return new tf(ia({graph:this.graph},this.options.history))},Lf.prototype.createScroller=function(){return this.options.scroller.enabled?new eg(ia({graph:this.graph},this.options.scroller)):null},Lf.prototype.createScrollerManager=function(){return new Yg(this.graph)},Lf.prototype.allowPanning=function(t){return!0},Lf.prototype.createMiniMap=function(){var t=this.options.minimap,e=t.enabled,t=ra(t,["enabled"]);if(e){e=this.graph.scroller.widget;if(null==e)throw new Error("Minimap requires scroller be enabled.");return new _d(ia({scroller:e},t))}return null},Lf.prototype.createMiniMapManager=function(){return new uf(this.graph)},Lf.prototype.createKeyboard=function(){return new df(ia({graph:this.graph},this.options.keyboard))},Lf.prototype.createMouseWheel=function(){return new Cf(ia({graph:this.graph},this.options.mousewheel))},Lf.prototype.createPrintManager=function(){return new vf(this.graph)},Lf.prototype.createFormatManager=function(){return new Af(this.graph)},Lf.prototype.createPanningManager=function(){return new Pf(this.graph)},Lf.prototype.allowConnectToBlank=function(t){var e=this.options.connecting,n=null!=e.allowBlank?e.allowBlank:e.dangling;if("function"!=typeof n)return!!n;var o=this.graph.findViewByCell(t),i=t.getSourceCell(),r=t.getTargetCell(),s=this.graph.findViewByCell(i),e=this.graph.findViewByCell(r);return Gr(n,this.graph,{edge:t,edgeView:o,sourceCell:i,targetCell:r,sourceView:s,targetView:e,sourcePort:t.getSourcePortId(),targetPort:t.getTargetPortId(),sourceMagnet:o.sourceMagnet,targetMagnet:o.targetMagnet})},Lf.prototype.validateEdge=function(t,e,n){if(!this.allowConnectToBlank(t)){var o=t.getSourceCellId(),i=t.getTargetCellId();if(!o||!i)return!1}i=this.options.connecting.validateEdge;return!i||Gr(i,this.graph,{edge:t,type:e,previous:n})},Lf.prototype.validateMagnet=function(t,e,n){if("passive"===e.getAttribute("magnet"))return!1;var o=this.options.connecting.validateMagnet;return!o||Gr(o,this.graph,{e:n,magnet:e,view:t,cell:t.cell})},Lf.prototype.getDefaultEdge=function(t,e){var n,o=this.options.connecting.createEdge;return o&&(n=Gr(o,this.graph,{sourceMagnet:e,sourceView:t,sourceCell:t.cell})),null==n&&(n=new Pg),n},Lf.prototype.validateConnection=function(o,i,r,s,a,l,c){var n,h,u=this,t=this.options.connecting,e=t.allowLoop,p=t.allowNode,d=t.allowEdge,g=t.allowPort,f=null!=t.allowMulti?t.allowMulti:t.multi,y=t.validateConnection,m=l?l.cell:null,C="target"===a?r:o,v=!0,t=function(t){var e="source"===a?c?c.port:null:m?m.getSourcePortId():null,n="target"===a?c?c.port:null:m?m.getTargetPortId():null;return Gr(t,u.graph,{edge:m,edgeView:l,sourceView:o,targetView:r,sourcePort:e,targetPort:n,sourceMagnet:i,targetMagnet:s,sourceCell:o?o.cell:null,targetCell:r?r.cell:null,type:a})};return null!=e&&("boolean"==typeof e?e||o!==r||(v=!1):v=t(e)),v&&null!=g&&("boolean"==typeof g?!g&&s&&(v=!1):v=t(g)),v&&null!=d&&("boolean"==typeof d?!d&&C instanceof yd&&(v=!1):v=t(d)),v&&null!=p&&("boolean"==typeof p?p||null==C||C instanceof vd&&null==s&&(v=!1):v=t(p)),v&&null!=f&&l&&(p=l.cell,n="source"===a?c:p.getSource(),h="target"===a?c:p.getTarget(),p=c?this.graph.getCellById(c.cell):null,n&&h&&n.cell&&h.cell&&p&&("function"==typeof f?v=t(f):(p=this.model.getConnectedEdges(p,{outgoing:"source"===a,incoming:"target"===a})).length&&("withPort"===f?p.some(function(t){var e=t.getSource(),t=t.getTarget();return e&&t&&e.cell===n.cell&&t.cell===h.cell&&null!=e.port&&e.port===n.port&&null!=t.port&&t.port===h.port})&&(v=!1):f||p.some(function(t){var e=t.getSource(),t=t.getTarget();return e&&t&&e.cell===n.cell&&t.cell===h.cell})&&(v=!1)))),v&&null!=y&&(v=t(y)),v},Lf.prototype.getRestrictArea=function(t){var e=this.options.translating.restrict;return"function"==typeof e?Gr(e,this.graph,t):!0===e?this.graph.transform.getGraphArea():e||null},Lf.prototype.onViewUpdated=function(t,e,n){e&qd.FLAG_INSERT||n.mounting||this.graph.renderer.requestConnectedEdgesUpdate(t,n)},Lf.prototype.onViewPostponed=function(t,e,n){return this.graph.renderer.forcePostponedViewUpdate(t,e)},Lf.prototype.getCellView=function(t){return null},Lf.prototype.createCellView=function(t){var e={interacting:this.options.interacting},n=this.getCellView(t);if(n)return new n(t,e);var o=t.view;if(null==o||"string"!=typeof o)return t.isNode()?new vd(t,e):t.isEdge()?new yd(t,e):null;n=U.CellView.registry.get(o);return n?new n(t,e):U.CellView.registry.onNotFound(o)},Lf.prototype.getHTMLComponent=function(t){var e=t.getHTML();return e&&"object"==typeof e&&(e=e.render),"string"==typeof e&&(e=Dd.componentRegistry.get(e)||e),"function"==typeof e?Gr(e,this.graph,t):e},Lf.prototype.shouldUpdateHTMLComponent=function(t){var e=t.getHTML();if(e&&"object"==typeof e){e=e.shouldComponentUpdate;return"function"==typeof e?Gr(e,this.graph,t):!!e}return!1},Lf.prototype.onEdgeLabelRendered=function(t){},Lf.prototype.onPortRendered=function(t){},Lf.prototype.onToolItemCreated=function(t){},sa([Kf.hook()],Lf.prototype,"createModel",null),sa([Kf.hook()],Lf.prototype,"createView",null),sa([Kf.hook()],Lf.prototype,"createRenderer",null),sa([Kf.hook()],Lf.prototype,"createDefsManager",null),sa([Kf.hook()],Lf.prototype,"createGridManager",null),sa([Kf.hook()],Lf.prototype,"createCoordManager",null),sa([Kf.hook()],Lf.prototype,"createTransform",null),sa([Kf.hook()],Lf.prototype,"createTransformManager",null),sa([Kf.hook()],Lf.prototype,"createHighlightManager",null),sa([Kf.hook()],Lf.prototype,"createBackgroundManager",null),sa([Kf.hook()],Lf.prototype,"createClipboard",null),sa([Kf.hook()],Lf.prototype,"createClipboardManager",null),sa([Kf.hook()],Lf.prototype,"createSnapline",null),sa([Kf.hook()],Lf.prototype,"createSnaplineManager",null),sa([Kf.hook()],Lf.prototype,"createSelection",null),sa([Kf.hook()],Lf.prototype,"createSelectionManager",null),sa([Kf.hook()],Lf.prototype,"allowRubberband",null),sa([Kf.hook()],Lf.prototype,"createHistoryManager",null),sa([Kf.hook()],Lf.prototype,"createScroller",null),sa([Kf.hook()],Lf.prototype,"createScrollerManager",null),sa([Kf.hook()],Lf.prototype,"allowPanning",null),sa([Kf.hook()],Lf.prototype,"createMiniMap",null),sa([Kf.hook()],Lf.prototype,"createMiniMapManager",null),sa([Kf.hook()],Lf.prototype,"createKeyboard",null),sa([Kf.hook()],Lf.prototype,"createMouseWheel",null),sa([Kf.hook()],Lf.prototype,"createPrintManager",null),sa([Kf.hook()],Lf.prototype,"createFormatManager",null),sa([Kf.hook()],Lf.prototype,"createPanningManager",null),sa([Kf.after()],Lf.prototype,"onViewUpdated",null),sa([Kf.after()],Lf.prototype,"onViewPostponed",null),sa([Kf.hook()],Lf.prototype,"getCellView",null),sa([Kf.hook(!0)],Lf.prototype,"createCellView",null),sa([Kf.hook()],Lf.prototype,"getHTMLComponent",null),sa([Kf.hook()],Lf.prototype,"shouldUpdateHTMLComponent",null),sa([Kf.hook()],Lf.prototype,"onEdgeLabelRendered",null),sa([Kf.hook()],Lf.prototype,"onPortRendered",null),sa([Kf.hook()],Lf.prototype,"onToolItemCreated",null),Lf);function Lf(){return null!==Sf&&Sf.apply(this,arguments)||this}function Nf(t){return"basic."+t}function Of(r){return void 0===r&&(r="xlink:href"),function(t){var e=t.imageUrl,n=t.imageWidth,o=t.imageHeight,i=ra(t,["imageUrl","imageWidth","imageHeight"]);return null==e&&null==n&&null==o||(t=function(){var t;i.attrs&&(t=i.attrs.image,null!=e&&(t[r]=e),null!=n&&(t.width=n),null!=o&&(t.height=o),i.attrs.image=t)},i.attrs?null==i.attrs.image&&(i.attrs.image={}):i.attrs={image:{}},t()),i}}function Bf(t,e,n){void 0===n&&(n={});var o,i=Nf(t),r={constructorName:i,attrs:((o={".":{fill:"#ffffff",stroke:"none"}})[t]={fill:"#ffffff",stroke:"#000000"},o)};return n.ignoreMarkup||(r.markup=(void 0===(o=!0===n.noText)&&(o=!1),'<g class="rotatable"><g class="scalable"><'+t+"/></g>"+(o?"":"<text/>")+"</g>")),(n.parent||wd).define(Mi(r,e,{shape:i}))}function zf(t){var e=Ff.call(this)||this;return e.options=Eg.get(t),e.css=new Vd(e),e.hook=new Tf(e),e.view=e.hook.createView(),e.defs=e.hook.createDefsManager(),e.coord=e.hook.createCoordManager(),e.transform=e.hook.createTransformManager(),e.highlight=e.hook.createHighlightManager(),e.grid=e.hook.createGridManager(),e.background=e.hook.createBackgroundManager(),e.model=e.hook.createModel(),e.renderer=e.hook.createRenderer(),e.clipboard=e.hook.createClipboardManager(),e.snapline=e.hook.createSnaplineManager(),e.selection=e.hook.createSelectionManager(),e.history=e.hook.createHistoryManager(),e.scroller=e.hook.createScrollerManager(),e.minimap=e.hook.createMiniMapManager(),e.keyboard=e.hook.createKeyboard(),e.mousewheel=e.hook.createMouseWheel(),e.print=e.hook.createPrintManager(),e.format=e.hook.createFormatManager(),e.panning=e.hook.createPanningManager(),e.setup(),e}U.Graph=(oa(zf,Ff=U.Basecoat),Object.defineProperty(zf.prototype,"container",{get:function(){return this.view.container},enumerable:!1,configurable:!0}),zf.prototype.setup=function(){var e=this;this.model.on("sorted",function(){return e.trigger("model:sorted")}),this.model.on("reseted",function(t){return e.trigger("model:reseted",t)}),this.model.on("updated",function(t){return e.trigger("model:updated",t)})},zf.prototype.isNode=function(t){return t.isNode()},zf.prototype.isEdge=function(t){return t.isEdge()},zf.prototype.resetCells=function(t,e){return void 0===e&&(e={}),this.model.resetCells(t,e),this},zf.prototype.clearCells=function(t){return void 0===t&&(t={}),this.model.clear(t),this},zf.prototype.toJSON=function(t){return void 0===t&&(t={}),this.model.toJSON(t)},zf.prototype.parseJSON=function(t){return this.model.parseJSON(t)},zf.prototype.fromJSON=function(t,e){return void 0===e&&(e={}),this.model.fromJSON(t,e),this},zf.prototype.getCellById=function(t){return this.model.getCell(t)},zf.prototype.addNode=function(t,e){return void 0===e&&(e={}),this.model.addNode(t,e)},zf.prototype.createNode=function(t){return this.model.createNode(t)},zf.prototype.removeNode=function(t,e){return void 0===e&&(e={}),this.model.removeCell(t,e)},zf.prototype.addEdge=function(t,e){return void 0===e&&(e={}),this.model.addEdge(t,e)},zf.prototype.removeEdge=function(t,e){return void 0===e&&(e={}),this.model.removeCell(t,e)},zf.prototype.createEdge=function(t){return this.model.createEdge(t)},zf.prototype.addCell=function(t,e){return void 0===e&&(e={}),this.model.addCell(t,e),this},zf.prototype.removeCell=function(t,e){return void 0===e&&(e={}),this.model.removeCell(t,e)},zf.prototype.removeCells=function(t,e){return void 0===e&&(e={}),this.model.removeCells(t,e)},zf.prototype.removeConnectedEdges=function(t,e){return void 0===e&&(e={}),this.model.removeConnectedEdges(t,e)},zf.prototype.disconnectConnectedEdges=function(t,e){return void 0===e&&(e={}),this.model.disconnectConnectedEdges(t,e),this},zf.prototype.hasCell=function(t){return this.model.has(t)},zf.prototype.getCell=function(t){return this.model.getCell(t)},zf.prototype.getCells=function(){return this.model.getCells()},zf.prototype.getCellCount=function(){return this.model.total()},zf.prototype.getNodes=function(){return this.model.getNodes()},zf.prototype.getEdges=function(){return this.model.getEdges()},zf.prototype.getOutgoingEdges=function(t){return this.model.getOutgoingEdges(t)},zf.prototype.getIncomingEdges=function(t){return this.model.getIncomingEdges(t)},zf.prototype.getConnectedEdges=function(t,e){return void 0===e&&(e={}),this.model.getConnectedEdges(t,e)},zf.prototype.getRootNodes=function(){return this.model.getRoots()},zf.prototype.getLeafNodes=function(){return this.model.getLeafs()},zf.prototype.isRootNode=function(t){return this.model.isRoot(t)},zf.prototype.isLeafNode=function(t){return this.model.isLeaf(t)},zf.prototype.getNeighbors=function(t,e){return void 0===e&&(e={}),this.model.getNeighbors(t,e)},zf.prototype.isNeighbor=function(t,e,n){return void 0===n&&(n={}),this.model.isNeighbor(t,e,n)},zf.prototype.getSuccessors=function(t,e){return void 0===e&&(e={}),this.model.getSuccessors(t,e)},zf.prototype.isSuccessor=function(t,e,n){return void 0===n&&(n={}),this.model.isSuccessor(t,e,n)},zf.prototype.getPredecessors=function(t,e){return void 0===e&&(e={}),this.model.getPredecessors(t,e)},zf.prototype.isPredecessor=function(t,e,n){return void 0===n&&(n={}),this.model.isPredecessor(t,e,n)},zf.prototype.getCommonAncestor=function(){for(var t,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return(t=this.model).getCommonAncestor.apply(t,e)},zf.prototype.getSubGraph=function(t,e){return void 0===e&&(e={}),this.model.getSubGraph(t,e)},zf.prototype.cloneSubGraph=function(t,e){return void 0===e&&(e={}),this.model.cloneSubGraph(t,e)},zf.prototype.cloneCells=function(t){return this.model.cloneCells(t)},zf.prototype.getNodesFromPoint=function(t,e){return this.model.getNodesFromPoint(t,e)},zf.prototype.getNodesInArea=function(t,e,n,o,i){return this.model.getNodesInArea(t,e,n,o,i)},zf.prototype.getNodesUnderNode=function(t,e){return void 0===e&&(e={}),this.model.getNodesUnderNode(t,e)},zf.prototype.searchCell=function(t,e,n){return void 0===n&&(n={}),this.model.search(t,e,n),this},zf.prototype.getShortestPath=function(t,e,n){return void 0===n&&(n={}),this.model.getShortestPath(t,e,n)},zf.prototype.getAllCellsBBox=function(){return this.model.getAllCellsBBox()},zf.prototype.getCellsBBox=function(t,e){return void 0===e&&(e={}),this.model.getCellsBBox(t,e)},zf.prototype.startBatch=function(t,e){void 0===e&&(e={}),this.model.startBatch(t,e)},zf.prototype.stopBatch=function(t,e){void 0===e&&(e={}),this.model.stopBatch(t,e)},zf.prototype.batchUpdate=function(t,e,n){this.startBatch(t,n);e=e();return this.stopBatch(t,n),e},zf.prototype.isFrozen=function(){return this.renderer.isFrozen()},zf.prototype.freeze=function(t){return void 0===t&&(t={}),this.renderer.freeze(t),this},zf.prototype.unfreeze=function(t){return void 0===t&&(t={}),this.renderer.unfreeze(t),this},zf.prototype.isAsync=function(){return this.renderer.isAsync()},zf.prototype.setAsync=function(t){return this.renderer.setAsync(t),this},zf.prototype.findView=function(t){return t instanceof U.Cell?this.findViewByCell(t):this.findViewByElem(t)},zf.prototype.findViews=function(t){return U.Rectangle.isRectangleLike(t)?this.findViewsInArea(t):U.Point.isPointLike(t)?this.findViewsFromPoint(t):[]},zf.prototype.findViewByCell=function(t){return this.renderer.findViewByCell(t)},zf.prototype.findViewByElem=function(t){return this.renderer.findViewByElem(t)},zf.prototype.findViewsFromPoint=function(t,e){t="number"==typeof t?{x:t,y:e}:t;return this.renderer.findViewsFromPoint(t)},zf.prototype.findViewsInArea=function(t,e,n,o,i){o="number"==typeof t?{x:t,y:e,width:n,height:o}:t,e="number"==typeof t?i:e;return this.renderer.findViewsInArea(o,e)},zf.prototype.isViewMounted=function(t){return this.renderer.isViewMounted(t)},zf.prototype.getMountedViews=function(){return this.renderer.getMountedViews()},zf.prototype.getUnmountedViews=function(){return this.renderer.getUnmountedViews()},zf.prototype.matrix=function(t){return void 0===t?this.transform.getMatrix():(this.transform.setMatrix(t),this)},zf.prototype.resize=function(t,e){return(this.scroller.widget?this.scroller:this.transform).resize(t,e),this},zf.prototype.resizeGraph=function(t,e){return this.transform.resize(t,e),this},zf.prototype.resizeScroller=function(t,e){return this.scroller.resize(t,e),this},zf.prototype.scale=function(t,e,n,o){return void 0===e&&(e=t),void 0===n&&(n=0),void 0===o&&(o=0),void 0===t?this.transform.getScale():(this.transform.scale(t,e,n,o),this)},zf.prototype.zoom=function(t,e){var n=this.scroller.widget;if(n){if(void 0===t)return n.zoom();n.zoom(t,e)}else{if(void 0===t)return this.transform.getZoom();this.transform.zoom(t,e)}return this},zf.prototype.zoomTo=function(t,e){void 0===e&&(e={});var n=this.scroller.widget;(n||this.transform).zoom(t,ia(ia({},e),{absolute:!0}))},zf.prototype.zoomToRect=function(t,e){void 0===e&&(e={});var n=this.scroller.widget;return(n||this.transform).zoomToRect(t,e),this},zf.prototype.zoomToFit=function(t){void 0===t&&(t={});var e=this.scroller.widget;return(e||this.transform).zoomToFit(t),this},zf.prototype.rotate=function(t,e,n){return void 0===t?this.transform.getRotation():(this.transform.rotate(t,e,n),this)},zf.prototype.translate=function(t,e){return void 0===t?this.transform.getTranslation():(this.transform.translate(t,e),this)},zf.prototype.translateBy=function(t,e){var n=this.translate(),t=n.tx+t,e=n.ty+e;return this.translate(t,e)},zf.prototype.getArea=function(){return this.transform.getGraphArea()},zf.prototype.getGraphArea=function(){return this.transform.getGraphArea()},zf.prototype.getContentArea=function(t){return void 0===t&&(t={}),this.transform.getContentArea(t)},zf.prototype.getContentBBox=function(t){return void 0===t&&(t={}),this.transform.getContentBBox(t)},zf.prototype.fitToContent=function(t,e,n,o){return this.transform.fitToContent(t,e,n,o)},zf.prototype.scaleContentToFit=function(t){return void 0===t&&(t={}),this.transform.scaleContentToFit(t),this},zf.prototype.center=function(t){return this.centerPoint(t)},zf.prototype.centerPoint=function(t,e,n){var o=this.scroller.widget;return o?o.centerPoint(t,e,n):this.transform.centerPoint(t,e),this},zf.prototype.centerContent=function(t){var e=this.scroller.widget;return(e||this.transform).centerContent(t),this},zf.prototype.centerCell=function(t,e){var n=this.scroller.widget;return n?n.centerCell(t,e):this.transform.centerCell(t),this},zf.prototype.positionPoint=function(t,e,n,o){void 0===o&&(o={});var i=this.scroller.widget;return i?i.positionPoint(t,e,n,o):this.transform.positionPoint(t,e,n),this},zf.prototype.positionRect=function(t,e,n){var o=this.scroller.widget;return o?o.positionRect(t,e,n):this.transform.positionRect(t,e),this},zf.prototype.positionCell=function(t,e,n){var o=this.scroller.widget;return o?o.positionCell(t,e,n):this.transform.positionCell(t,e),this},zf.prototype.positionContent=function(t,e){var n=this.scroller.widget;return(n||this.transform).positionContent(t,e),this},zf.prototype.getClientMatrix=function(){return this.coord.getClientMatrix()},zf.prototype.getClientOffset=function(){return this.coord.getClientOffset()},zf.prototype.getPageOffset=function(){return this.coord.getPageOffset()},zf.prototype.snapToGrid=function(t,e){return this.coord.snapToGrid(t,e)},zf.prototype.pageToLocal=function(t,e,n,o){return U.Rectangle.isRectangleLike(t)?this.coord.pageToLocalRect(t):"number"==typeof t&&"number"==typeof e&&"number"==typeof n&&"number"==typeof o?this.coord.pageToLocalRect(t,e,n,o):this.coord.pageToLocalPoint(t,e)},zf.prototype.localToPage=function(t,e,n,o){return U.Rectangle.isRectangleLike(t)?this.coord.localToPageRect(t):"number"==typeof t&&"number"==typeof e&&"number"==typeof n&&"number"==typeof o?this.coord.localToPageRect(t,e,n,o):this.coord.localToPagePoint(t,e)},zf.prototype.clientToLocal=function(t,e,n,o){return U.Rectangle.isRectangleLike(t)?this.coord.clientToLocalRect(t):"number"==typeof t&&"number"==typeof e&&"number"==typeof n&&"number"==typeof o?this.coord.clientToLocalRect(t,e,n,o):this.coord.clientToLocalPoint(t,e)},zf.prototype.localToClient=function(t,e,n,o){return U.Rectangle.isRectangleLike(t)?this.coord.localToClientRect(t):"number"==typeof t&&"number"==typeof e&&"number"==typeof n&&"number"==typeof o?this.coord.localToClientRect(t,e,n,o):this.coord.localToClientPoint(t,e)},zf.prototype.localToGraph=function(t,e,n,o){return U.Rectangle.isRectangleLike(t)?this.coord.localToGraphRect(t):"number"==typeof t&&"number"==typeof e&&"number"==typeof n&&"number"==typeof o?this.coord.localToGraphRect(t,e,n,o):this.coord.localToGraphPoint(t,e)},zf.prototype.graphToLocal=function(t,e,n,o){return U.Rectangle.isRectangleLike(t)?this.coord.graphToLocalRect(t):"number"==typeof t&&"number"==typeof e&&"number"==typeof n&&"number"==typeof o?this.coord.graphToLocalRect(t,e,n,o):this.coord.graphToLocalPoint(t,e)},zf.prototype.defineFilter=function(t){return this.defs.filter(t)},zf.prototype.defineGradient=function(t){return this.defs.gradient(t)},zf.prototype.defineMarker=function(t){return this.defs.marker(t)},zf.prototype.getGridSize=function(){return this.grid.getGridSize()},zf.prototype.setGridSize=function(t){return this.grid.setGridSize(t),this},zf.prototype.showGrid=function(){return this.grid.show(),this},zf.prototype.hideGrid=function(){return this.grid.hide(),this},zf.prototype.clearGrid=function(){return this.grid.clear(),this},zf.prototype.drawGrid=function(t){return this.grid.draw(t),this},zf.prototype.updateBackground=function(){return this.background.update(),this},zf.prototype.drawBackground=function(t){return this.background.draw(t),this},zf.prototype.clearBackground=function(){return this.background.clear(),this},zf.prototype.isClipboardEnabled=function(){return!this.clipboard.disabled},zf.prototype.enableClipboard=function(){return this.clipboard.enable(),this},zf.prototype.disableClipboard=function(){return this.clipboard.disable(),this},zf.prototype.toggleClipboard=function(t){return null!=t?t!==this.isClipboardEnabled()&&(t?this.enableClipboard():this.disableClipboard()):this.isClipboardEnabled()?this.disableClipboard():this.enableClipboard(),this},zf.prototype.isClipboardEmpty=function(){return this.clipboard.isEmpty()},zf.prototype.getCellsInClipboard=function(){return this.clipboard.cells},zf.prototype.cleanClipboard=function(){return this.clipboard.clean(),this},zf.prototype.copy=function(t,e){return void 0===e&&(e={}),this.clipboard.copy(t,e),this},zf.prototype.cut=function(t,e){return void 0===e&&(e={}),this.clipboard.cut(t,e),this},zf.prototype.paste=function(t,e){return void 0===t&&(t={}),void 0===e&&(e=this),this.clipboard.paste(t,e)},zf.prototype.isHistoryEnabled=function(){return!this.history.disabled},zf.prototype.enableHistory=function(){return this.history.enable(),this},zf.prototype.disableHistory=function(){return this.history.disable(),this},zf.prototype.toggleHistory=function(t){return null!=t?t!==this.isHistoryEnabled()&&(t?this.enableHistory():this.disableHistory()):this.isHistoryEnabled()?this.disableHistory():this.enableHistory(),this},zf.prototype.undo=function(t){return void 0===t&&(t={}),this.history.undo(t),this},zf.prototype.undoAndCancel=function(t){return void 0===t&&(t={}),this.history.cancel(t),this},zf.prototype.redo=function(t){return void 0===t&&(t={}),this.history.redo(t),this},zf.prototype.canUndo=function(){return this.history.canUndo()},zf.prototype.canRedo=function(){return this.history.canRedo()},zf.prototype.cleanHistory=function(t){void 0===t&&(t={}),this.history.clean(t)},zf.prototype.isKeyboardEnabled=function(){return!this.keyboard.disabled},zf.prototype.enableKeyboard=function(){return this.keyboard.enable(),this},zf.prototype.disableKeyboard=function(){return this.keyboard.disable(),this},zf.prototype.toggleKeyboard=function(t){return null!=t?t!==this.isKeyboardEnabled()&&(t?this.enableKeyboard():this.disableKeyboard()):this.isKeyboardEnabled()?this.disableKeyboard():this.enableKeyboard(),this},zf.prototype.bindKey=function(t,e,n){return this.keyboard.on(t,e,n),this},zf.prototype.unbindKey=function(t,e){return this.keyboard.off(t,e),this},zf.prototype.isMouseWheelEnabled=function(){return!this.mousewheel.disabled},zf.prototype.enableMouseWheel=function(){return this.mousewheel.enable(),this},zf.prototype.disableMouseWheel=function(){return this.mousewheel.disable(),this},zf.prototype.toggleMouseWheel=function(t){return null==t?this.isMouseWheelEnabled()?this.disableMouseWheel():this.enableMouseWheel():t?this.enableMouseWheel():this.disableMouseWheel(),this},zf.prototype.lockScroller=function(){var t;null===(t=this.scroller.widget)||void 0===t||t.lock()},zf.prototype.unlockScroller=function(){var t;null===(t=this.scroller.widget)||void 0===t||t.unlock()},zf.prototype.updateScroller=function(){var t;null===(t=this.scroller.widget)||void 0===t||t.update()},zf.prototype.getScrollbarPosition=function(){return this.scroller.widget.scrollbarPosition()},zf.prototype.setScrollbarPosition=function(t,e,n){return this.scroller.widget.scrollbarPosition(t,e,n),this},zf.prototype.scrollToPoint=function(t,e,n){return this.scroller.widget.scrollToPoint(t,e,n),this},zf.prototype.scrollToContent=function(t){return this.scroller.widget.scrollToContent(t),this},zf.prototype.scrollToCell=function(t,e){return this.scroller.widget.scrollToCell(t,e),this},zf.prototype.transitionToPoint=function(t,e,n){return this.scroller.widget.transitionToPoint(t,e,n),this},zf.prototype.transitionToRect=function(t,e){return void 0===e&&(e={}),this.scroller.widget.transitionToRect(t,e),this},zf.prototype.isPannable=function(){return this.scroller.pannable},zf.prototype.enablePanning=function(){return this.scroller.enablePanning(),this},zf.prototype.disablePanning=function(){return this.scroller.disablePanning(),this},zf.prototype.togglePanning=function(t){return null==t?this.isPannable()?this.disablePanning():this.enablePanning():t!==this.isPannable()&&(t?this.enablePanning():this.disablePanning()),this},zf.prototype.isSelectionEnabled=function(){return!this.selection.disabled},zf.prototype.enableSelection=function(){return this.selection.enable(),this},zf.prototype.disableSelection=function(){return this.selection.disable(),this},zf.prototype.toggleSelection=function(t){return null!=t?t!==this.isSelectionEnabled()&&(t?this.enableSelection():this.disableSelection()):this.isSelectionEnabled()?this.disableSelection():this.enableSelection(),this},zf.prototype.isMultipleSelection=function(){return this.selection.isMultiple()},zf.prototype.enableMultipleSelection=function(){return this.selection.enableMultiple(),this},zf.prototype.disableMultipleSelection=function(){return this.selection.disableMultiple(),this},zf.prototype.toggleMultipleSelection=function(t){return null!=t?t!==this.isMultipleSelection()&&(t?this.enableMultipleSelection():this.disableMultipleSelection()):this.isMultipleSelection()?this.disableMultipleSelection():this.enableMultipleSelection(),this},zf.prototype.isSelectionMovable=function(){return!1!==this.selection.widget.options.movable},zf.prototype.enableSelectionMovable=function(){return this.selection.widget.options.movable=!0,this},zf.prototype.disableSelectionMovable=function(){return this.selection.widget.options.movable=!1,this},zf.prototype.toggleSelectionMovable=function(t){return null!=t?t!==this.isSelectionMovable()&&(t?this.enableSelectionMovable():this.disableSelectionMovable()):this.isSelectionMovable()?this.disableSelectionMovable():this.enableSelectionMovable(),this},zf.prototype.isRubberbandEnabled=function(){return!this.selection.rubberbandDisabled},zf.prototype.enableRubberband=function(){return this.selection.enableRubberband(),this},zf.prototype.disableRubberband=function(){return this.selection.disableRubberband(),this},zf.prototype.toggleRubberband=function(t){return null!=t?t!==this.isRubberbandEnabled()&&(t?this.enableRubberband():this.disableRubberband()):this.isRubberbandEnabled()?this.disableRubberband():this.enableRubberband(),this},zf.prototype.isStrictRubberband=function(){return!0===this.selection.widget.options.strict},zf.prototype.enableStrictRubberband=function(){return this.selection.widget.options.strict=!0,this},zf.prototype.disableStrictRubberband=function(){return this.selection.widget.options.strict=!1,this},zf.prototype.toggleStrictRubberband=function(t){return null!=t?t!==this.isStrictRubberband()&&(t?this.enableStrictRubberband():this.disableStrictRubberband()):this.isStrictRubberband()?this.disableStrictRubberband():this.enableStrictRubberband(),this},zf.prototype.setRubberbandModifiers=function(t){this.selection.setModifiers(t)},zf.prototype.setSelectionFilter=function(t){return this.selection.setFilter(t),this},zf.prototype.setSelectionDisplayContent=function(t){return this.selection.setContent(t),this},zf.prototype.isSelectionEmpty=function(){return this.selection.isEmpty()},zf.prototype.cleanSelection=function(){return this.selection.clean(),this},zf.prototype.resetSelection=function(t){return this.selection.reset(t),this},zf.prototype.getSelectedCells=function(){return this.selection.cells},zf.prototype.getSelectedCellCount=function(){return this.selection.length},zf.prototype.isSelected=function(t){return this.selection.isSelected(t)},zf.prototype.select=function(t,e){return void 0===e&&(e={}),this.selection.select(t,e),this},zf.prototype.unselect=function(t,e){return void 0===e&&(e={}),this.selection.unselect(t,e),this},zf.prototype.isSnaplineEnabled=function(){return!this.snapline.widget.disabled},zf.prototype.enableSnapline=function(){return this.snapline.widget.enable(),this},zf.prototype.disableSnapline=function(){return this.snapline.widget.disable(),this},zf.prototype.toggleSnapline=function(t){if(null==t)return this.isSnaplineEnabled()?this.disableSnapline():this.enableSnapline(),this;t!==this.isSnaplineEnabled()&&(t?this.enableSnapline():this.disableSnapline())},zf.prototype.hideSnapline=function(){return this.snapline.widget.hide(),this},zf.prototype.setSnaplineFilter=function(t){return this.snapline.widget.setFilter(t),this},zf.prototype.isSnaplineOnResizingEnabled=function(){return!0===this.snapline.widget.options.resizing},zf.prototype.enableSnaplineOnResizing=function(){return this.snapline.widget.options.resizing=!0,this},zf.prototype.disableSnaplineOnResizing=function(){return this.snapline.widget.options.resizing=!1,this},zf.prototype.toggleSnaplineOnResizing=function(t){return null!=t?t!==this.isSnaplineOnResizingEnabled()&&(t?this.enableSnaplineOnResizing():this.disableSnaplineOnResizing()):this.isSnaplineOnResizingEnabled()?this.disableSnaplineOnResizing():this.enableSnaplineOnResizing(),this},zf.prototype.isSharpSnapline=function(){return!0===this.snapline.widget.options.sharp},zf.prototype.enableSharpSnapline=function(){return this.snapline.widget.options.sharp=!0,this},zf.prototype.disableSharpSnapline=function(){return this.snapline.widget.options.sharp=!1,this},zf.prototype.toggleSharpSnapline=function(t){return null!=t?t!==this.isSharpSnapline()&&(t?this.enableSharpSnapline():this.disableSharpSnapline()):this.isSharpSnapline()?this.disableSharpSnapline():this.enableSharpSnapline(),this},zf.prototype.getSnaplineTolerance=function(){return this.snapline.widget.options.tolerance},zf.prototype.setSnaplineTolerance=function(t){return this.snapline.widget.options.tolerance=t,this},zf.prototype.removeTools=function(){return this.emit("tools:remove"),this},zf.prototype.hideTools=function(){return this.emit("tools:hide"),this},zf.prototype.showTools=function(){return this.emit("tools:show"),this},zf.prototype.toSVG=function(t,e){void 0===e&&(e={}),this.format.toSVG(t,e)},zf.prototype.toDataURL=function(t,e){this.format.toDataURL(t,e)},zf.prototype.toPNG=function(t,e){void 0===e&&(e={}),this.format.toPNG(t,e)},zf.prototype.toJPEG=function(t,e){void 0===e&&(e={}),this.format.toJPEG(t,e)},zf.prototype.printPreview=function(t){this.print.show(t)},zf.prototype.dispose=function(){this.css.dispose(),this.hook.dispose(),this.defs.dispose(),this.grid.dispose(),this.coord.dispose(),this.transform.dispose(),this.highlight.dispose(),this.background.dispose(),this.clipboard.dispose(),this.snapline.dispose(),this.selection.dispose(),this.history.dispose(),this.keyboard.dispose(),this.mousewheel.dispose(),this.print.dispose(),this.format.dispose(),this.minimap.dispose(),this.panning.dispose(),this.scroller.dispose(),this.view.dispose(),this.renderer.dispose()},sa([Qf.checkScroller()],zf.prototype,"lockScroller",null),sa([Qf.checkScroller()],zf.prototype,"unlockScroller",null),sa([Qf.checkScroller()],zf.prototype,"updateScroller",null),sa([Qf.checkScroller()],zf.prototype,"getScrollbarPosition",null),sa([Qf.checkScroller()],zf.prototype,"setScrollbarPosition",null),sa([Qf.checkScroller()],zf.prototype,"scrollToPoint",null),sa([Qf.checkScroller()],zf.prototype,"scrollToContent",null),sa([Qf.checkScroller()],zf.prototype,"scrollToCell",null),sa([Qf.checkScroller()],zf.prototype,"transitionToPoint",null),sa([Qf.checkScroller()],zf.prototype,"transitionToRect",null),sa([U.Basecoat.dispose()],zf.prototype,"dispose",null),zf),(pn=U.Graph||(U.Graph={})).View=Td,pn.Hook=Tf,pn.Renderer=qd,pn.Keyboard=df,pn.MouseWheel=Cf,pn.BaseManager=yn,pn.DefsManager=Tg,pn.GridManager=Lg,pn.CoordManager=Ng,pn.PrintManager=vf,pn.FormatManager=Af,pn.MiniMapManager=uf,pn.HistoryManager=tf,pn.SnaplineManager=Og,pn.ScrollerManager=Yg,pn.ClipboardManager=Jg,pn.TransformManager=Kg,pn.HighlightManager=Zg,pn.BackgroundManager=tg,pn.SelectionManager=Qg,(kf=U.Graph||(U.Graph={})).render=function(t,e){t=t instanceof HTMLElement?new kf({container:t}):new kf(t);return null!=e&&t.fromJSON(e),t},(wr=U.Graph||(U.Graph={})).registerNode=U.Node.registry.register,wr.registerEdge=U.Edge.registry.register,wr.registerView=U.CellView.registry.register,wr.registerAttr=Ch.registry.register,wr.registerGrid=vh.registry.register,wr.registerFilter=Eh.registry.register,wr.registerNodeTool=Iu.registry.register,wr.registerEdgeTool=Ru.registry.register,wr.registerBackground=Ah.registry.register,wr.registerHighlighter=kh.registry.register,wr.registerPortLayout=Oh.registry.register,wr.registerPortLabelLayout=_h.registry.register,wr.registerMarker=gh.registry.register,wr.registerRouter=Lp.registry.register,wr.registerConnector=jp.registry.register,wr.registerAnchor=Uu.registry.register,wr.registerEdgeAnchor=qu.registry.register,wr.registerConnectionPoint=Ju.registry.register,wr.registerConnectionStrategy=Jh.registry.register,wr.registerHTMLComponent=Dd.componentRegistry.register,(an=U.Graph||(U.Graph={})).unregisterNode=U.Node.registry.unregister,an.unregisterEdge=U.Edge.registry.unregister,an.unregisterView=U.CellView.registry.unregister,an.unregisterAttr=Ch.registry.unregister,an.unregisterGrid=vh.registry.unregister,an.unregisterFilter=Eh.registry.unregister,an.unregisterNodeTool=Iu.registry.unregister,an.unregisterEdgeTool=Ru.registry.unregister,an.unregisterBackground=Ah.registry.unregister,an.unregisterHighlighter=kh.registry.unregister,an.unregisterPortLayout=Oh.registry.unregister,an.unregisterPortLabelLayout=_h.registry.unregister,an.unregisterMarker=gh.registry.unregister,an.unregisterRouter=Lp.registry.unregister,an.unregisterConnector=jp.registry.unregister,an.unregisterAnchor=Uu.registry.unregister,an.unregisterEdgeAnchor=qu.registry.unregister,an.unregisterConnectionPoint=Ju.registry.unregister,an.unregisterConnectionStrategy=Jh.registry.unregister,an.unregisterHTMLComponent=Dd.componentRegistry.unregister,Bf("rect",{attrs:{rect:{width:100,height:60}}}),Bf("circle",{width:60,height:60,attrs:{circle:{r:30,cx:30,cy:30}}}),Bf("ellipse",{width:60,height:40,attrs:{ellipse:{rx:30,ry:20,cx:30,cy:20}}}),Bf("polygon",{width:60,height:40,attrs:{text:{refY:null,refDy:16}}}),Bf("polyline",{width:60,height:40,attrs:{text:{refY:null,refDy:16}}}),Bf("image",{attrs:{text:{refY:null,refDy:16}},propHooks:Of()});var Vf,jf,ch=Bf("path",{width:60,height:60,attrs:{text:{ref:"path",refY:null,refDy:16}},propHooks:function(t){var e=t.d,t=ra(t,["d"]);return null!=e&&Fr(t,"attrs/path/d",e),t}}),rn=(Bf("rhombus",{d:"M 30 0 L 60 30 30 60 0 30 z",attrs:{text:{refY:.5,refDy:null}}},{parent:ch,ignoreMarkup:!0}),Bf("cylinder",{width:40,height:40,attrs:{path:{fill:"#FFFFFF",stroke:"#cbd2d7",strokeWidth:3,d:["M 0 10 C 10 5, 30 5, 40 10 C 30 15, 10 15, 0 10","L 0 20","C 10 25, 30 25, 40 20","L 40 10"].join(" ")},text:{refY:.7,refDy:null,fill:"#435460"}}},{parent:ch,ignoreMarkup:!0}),Nf("text")),hn=(oa(If,Vf=Bf("text",{view:rn,attrs:{text:{fontSize:18,fill:"#000000",stroke:null,refX:.5,refY:.5}}},{noText:!0})),If);function If(){return null!==Vf&&Vf.apply(this,arguments)||this}function Rf(){return null!==jf&&jf.apply(this,arguments)||this}Ue=hn=hn||{},oa(Rf,jf=vd),Rf.prototype.confirmUpdate=function(t,e){void 0===e&&(e={});e=jf.prototype.confirmUpdate.call(this,t,e);return this.hasAction(e,"scale")&&(this.resize(),e=this.removeAction(e,"scale")),e},fn=Rf,(Ue.View=fn).config({actions:{attrs:["scale"]}}),vd.registry.register(rn,fn);var _f,Gf,Hf,Uf=".text-block-content",mn=Nf("text-block"),cn=(oa($f,_f=U.Node),Object.defineProperty($f.prototype,"content",{get:function(){return this.getContent()},set:function(t){this.setContent(t)},enumerable:!1,configurable:!0}),$f.prototype.getContent=function(){return this.store.get("content","")},$f.prototype.setContent=function(t,e){void 0===e&&(e={}),this.store.set("content",t,e)},$f.prototype.setup=function(){var e=this;_f.prototype.setup.call(this),this.store.on("change:*",function(t){t=t.key;"content"===t?e.updateContent(e.getContent()):"size"===t&&e.updateSize(e.getSize())}),this.updateSize(this.getSize()),this.updateContent(this.getContent())},$f.prototype.updateSize=function(t){var e;U.Platform.SUPPORT_FOREIGNOBJECT&&this.setAttrs(((e={foreignObject:ia({},t)})[Uf]={style:ia({},t)},e))},$f.prototype.updateContent=function(t){var e;U.Platform.SUPPORT_FOREIGNOBJECT?this.setAttrs(((e={})[Uf]={html:t?Br(t):""},e)):this.setAttrs(((e={})[Uf]={text:t},e))},$f);function $f(){return null!==_f&&_f.apply(this,arguments)||this}function qf(){return null!==Gf&&Gf.apply(this,arguments)||this}(un=cn=cn||{}).config({type:mn,view:mn,markup:['<g class="rotatable">','<g class="scalable"><rect/></g>',U.Platform.SUPPORT_FOREIGNOBJECT?["<foreignObject>",'<body xmlns="http://www.w3.org/1999/xhtml">','<div class="'+Uf.substr(1)+'" />',"</body>","</foreignObject>"].join(""):'<text class="'+Uf.substr(1)+'"/>',"</g>"].join(""),attrs:((dn={".":{fill:"#ffffff",stroke:"none"},rect:{fill:"#ffffff",stroke:"#000000",width:80,height:100},text:{fill:"#000000",fontSize:14,fontFamily:"Arial, helvetica, sans-serif"},body:{style:{background:"transparent",position:"static",margin:0,padding:0}},foreignObject:{style:{overflow:"hidden"}}})[Uf]={refX:.5,refY:.5,yAlign:"middle",xAlign:"middle",style:{textAlign:"center",verticalAlign:"middle",display:"table-cell",padding:"0 5px",margin:0}},dn)}),U.Node.registry.register(mn,un),Kf=cn=cn||{},Hf="content",oa(qf,Gf=vd),qf.prototype.confirmUpdate=function(t,e){void 0===e&&(e={});e=Gf.prototype.confirmUpdate.call(this,t,e);return this.hasAction(e,Hf)&&(this.updateContent(),e=this.removeAction(e,Hf)),e},qf.prototype.update=function(t){var e;U.Platform.SUPPORT_FOREIGNOBJECT?Gf.prototype.update.call(this,t):(e=this.cell,delete(e=ia({},t||e.getAttrs()))[Uf],Gf.prototype.update.call(this,e),t&&!gi(t,Uf)||this.updateContent(t))},qf.prototype.updateContent=function(t){var e,n;U.Platform.SUPPORT_FOREIGNOBJECT?Gf.prototype.update.call(this,t):(n=this.cell,e=(t||n.getAttrs())[Uf],t=bl(n.getContent(),n.getSize(),e,{svgDocument:this.graph.view.svg}),(n={})[Uf]=Mi({},e,{text:t}),n=n,Gf.prototype.update.call(this,n))},Qf=qf,Kf.View=Qf,(Qf=Qf=Kf.View||(Kf.View={})).config({bootstrap:["render",Hf],actions:U.Platform.SUPPORT_FOREIGNOBJECT?{}:{size:Hf,content:Hf}}),vd.registry.register(mn,Qf);yn={fill:"#ffffff",stroke:"#333333",strokeWidth:2},pn={fontSize:14,fill:"#333333",refX:"50%",refY:"50%",textAnchor:"middle",textVerticalAnchor:"middle"};function Wf(t,e,n){void 0===n&&(n={});var o,i,i={constructorName:t,markup:(o=t,void 0===(i=n.selector)&&(i="body"),[{tagName:o,selector:i},{tagName:"text",selector:"label"}]),attrs:((i={})[t]={fill:"#ffffff",stroke:"#333333",strokeWidth:2},i)};return(n.parent||wd).define(Mi(i,e,{shape:t}))}var Xf,wr=Wf("rect",{attrs:{body:{refWidth:"100%",refHeight:"100%"}}}),an=U.Node.define({shape:"rect-headered",markup:[{tagName:"rect",selector:"body"},{tagName:"rect",selector:"header"},{tagName:"text",selector:"headerText"},{tagName:"text",selector:"bodyText"}],attrs:{body:ia(ia({},yn),{refWidth:"100%",refHeight:"100%"}),header:ia(ia({},yn),{refWidth:"100%",height:30,stroke:"#000000"}),headerText:ia(ia({},pn),{refX:"50%",refY:15,fontSize:16}),bodyText:ia(ia({},pn),{refY2:15})}}),ch=Wf("circle",{attrs:{body:{refCx:"50%",refCy:"50%",refR:"50%"}}}),hn=wd.define({shape:"cylinder",markup:[{tagName:"path",selector:"body"},{tagName:"ellipse",selector:"top"},{tagName:"text",selector:"label"}],attrs:{body:ia(ia({},yn),{lateralArea:10}),top:ia(ia({},yn),{refCx:"50%",refRx:"50%",cy:10,ry:10})},attrHooks:{lateralArea:{set:function(t,e){var n=e.refBBox,o=Vr(t);o&&(t=parseFloat(t)/100);var i=n.x,r=n.y,s=n.width,a=n.height,l=o?a*t:t,c=s/2*.551784,e=.551784*l,n=i+s/2,o=i+s,t=r+l,s=t-l,l=r+a-l,a=r+a;return{d:["M",i,t,"L",i,l,"C",i,l+e,n-c,a,n,a,"C",n+c,a,o,l+e,o,l,"L",o,t,"C",o,t-e,n+c,s,n,s,"C",n-c,s,i,t-e,i,t,"Z"].join(" ")}}}}}),Ue=Wf("ellipse",{attrs:{body:{refCx:"50%",refCy:"50%",refRx:"50%",refRy:"50%"}}}),rn=(oa(Yf,Xf=wd),Object.defineProperty(Yf.prototype,"points",{get:function(){return this.getPoints()},set:function(t){this.setPoints(t)},enumerable:!1,configurable:!0}),Yf.prototype.getPoints=function(){return this.getAttrByPath("body/refPoints")},Yf.prototype.setPoints=function(t,e){return null==t?this.removePoints():this.setAttrByPath("body/refPoints",Yf.pointsToString(t),e),this},Yf.prototype.removePoints=function(){return this.removeAttrByPath("body/refPoints"),this},Yf);function Yf(){return null!==Xf&&Xf.apply(this,arguments)||this}function Jf(t){return"string"==typeof t?t:t.map(function(t){return Array.isArray(t)?t.join(","):U.Point.isPointLike(t)?t.x+", "+t.y:""}).join(" ")}(fn=rn=rn||{}).pointsToString=Jf,fn.config({propHooks:function(t){var e=t.points,t=ra(t,["points"]);return!e||(e=Jf(e))&&Fr(t,"attrs/body/refPoints",e),t}});dn=Wf("polygon",{},{parent:rn}),un=Wf("polyline",{},{parent:rn}),cn=Wf("path",{});cn.config({propHooks:function(t){var e=t.path,t=ra(t,["path"]);return e&&Fr(t,"attrs/body/refD",e),t}});var Zf,Kf=wd.define({shape:"text-block",markup:[{tagName:"rect",selector:"body"},U.Platform.SUPPORT_FOREIGNOBJECT?{tagName:"foreignObject",selector:"foreignObject",children:[{tagName:"div",ns:ss.xhtml,selector:"label",style:{width:"100%",height:"100%",position:"static",backgroundColor:"transparent",textAlign:"center",margin:0,padding:"0px 5px",boxSizing:"border-box",display:"flex",alignItems:"center",justifyContent:"center"}}]}:{tagName:"text",selector:"label",attrs:{textAnchor:"middle"}}],attrs:{body:ia(ia({},yn),{refWidth:"100%",refHeight:"100%"}),foreignObject:{refWidth:"100%",refHeight:"100%"},label:{style:{fontSize:14}}},propHooks:function(t){var e=t.text,t=ra(t,["text"]);return e&&Fr(t,"attrs/label/text",e),t},attrHooks:{text:{set:function(t,e){var n=e.cell,o=e.view,i=e.refBBox,r=e.elem,s=e.attrs;if(!(r instanceof HTMLElement)){var a=s.style||{},e={text:t,width:-5,height:"100%"},s=Object.assign({textVerticalAnchor:"middle"},a);return Gr(Ch.presets.textWrap.set,this,e,{cell:n,view:o,elem:r,refBBox:i,attrs:s}),{fill:a.color||null}}r.textContent=t},position:function(t,e){var n=e.refBBox;if(e.elem instanceof SVGElement)return n.getCenter()}}}}),mn=Wf("image",{attrs:{image:{refWidth:"100%",refHeight:"100%"}},propHooks:Of()},{selector:"image"}),Qf=Wf("image-bordered",{markup:[{tagName:"rect",selector:"background",attrs:{stroke:"none"}},{tagName:"image",selector:"image"},{tagName:"rect",selector:"border",attrs:{fill:"none"}},{tagName:"text",selector:"label"}],attrs:{background:{refWidth:-1,refHeight:-1,x:.5,y:.5,fill:"#ffffff"},border:{refWidth:"100%",refHeight:"100%",stroke:"#333333",strokeWidth:2},image:{refWidth:-1,refHeight:-1,x:.5,y:.5}},propHooks:Of()}),pn=Wf("image-embedded",{markup:[{tagName:"rect",selector:"body"},{tagName:"image",selector:"image"},{tagName:"text",selector:"label"}],attrs:{body:{refWidth:"100%",refHeight:"100%",stroke:"#333333",fill:"#FFFFFF",strokeWidth:2},image:{refWidth:"30%",refHeight:-20,x:10,y:10,preserveAspectRatio:"xMidYMin"}},propHooks:Of()}),fn=Wf("image-inscribed",{propHooks:Of(),markup:[{tagName:"ellipse",selector:"background"},{tagName:"image",selector:"image"},{tagName:"ellipse",selector:"border",attrs:{fill:"none"}},{tagName:"text",selector:"label"}],attrs:{border:{refRx:"50%",refRy:"50%",refCx:"50%",refCy:"50%",stroke:"#333333",strokeWidth:2},background:{refRx:"50%",refRy:"50%",refCx:"50%",refCy:"50%",fill:"#ffffff"},image:{refWidth:"68%",refHeight:"68%",refX:"16%",refY:"16%",preserveAspectRatio:"xMidYMid"}}}),rn=U.Edge.define({shape:"shadow-edge",markup:[{tagName:"path",selector:"shadow",attrs:{fill:"none"}},{tagName:"path",selector:"line",attrs:{fill:"none"}}],attrs:{line:{connection:!0,stroke:"#FF0000",strokeWidth:20,strokeLinejoin:"round",targetMarker:{name:"path",stroke:"none",d:"M 0 -10 -10 0 0 10 z",offsetX:-5},sourceMarker:{name:"path",stroke:"none",d:"M -10 -10 0 0 -10 10 0 10 0 -10 z",offsetX:-5}},shadow:{connection:!0,refX:3,refY:6,stroke:"#000000",strokeOpacity:.2,strokeWidth:20,strokeLinejoin:"round",targetMarker:{name:"path",d:"M 0 -10 -10 0 0 10 z",stroke:"none",offsetX:-5},sourceMarker:{name:"path",stroke:"none",d:"M -10 -10 0 0 -10 10 0 10 0 -10 z",offsetX:-5}}}}),yn=U.Edge.define({shape:"double-edge",markup:[{tagName:"path",selector:"outline",attrs:{fill:"none"}},{tagName:"path",selector:"line",attrs:{fill:"none"}}],attrs:{line:{connection:!0,stroke:"#dddddd",strokeWidth:4,strokeLinejoin:"round",targetMarker:{tagName:"path",stroke:"#000000",d:"M 10 -3 10 -10 -2 0 10 10 10 3"}},outline:{connection:!0,stroke:"#000000",strokeWidth:6,strokeLinejoin:"round"}}}),yn=Object.freeze({__proto__:null,Rect:wr,HeaderedRect:an,Circle:ch,Cylinder:hn,Ellipse:Ue,Polygon:dn,Polyline:un,Path:cn,TextBlock:Kf,Image:mn,BorderedImage:Qf,EmbeddedImage:pn,InscribedImage:fn,Edge:Pg,ShadowEdge:rn,DoubleEdge:yn,get HTML(){return Dd}}),ty=(oa(ey,Zf=sn),Object.defineProperty(ey.prototype,"graph",{get:function(){return this.options.graph},enumerable:!1,configurable:!0}),ey.prototype.onModelChanged=function(){var t;this.disabled||((t=((new Date).getTime()-this.timestamp)/1e3)>this.delay||this.changeCount>=this.threshold&&t>this.throttle?(this.save(),this.reset()):this.changeCount+=1)},ey.prototype.save=function(){this.trigger("save")},ey.prototype.reset=function(){this.changeCount=0,this.timestamp=(new Date).getTime()},ey.prototype.dispose=function(){this.graph.model.off("cell:change:*",this.onModelChanged,this)},sa([sn.dispose()],ey.prototype,"dispose",null),ey);function ey(t){var e=Zf.call(this)||this;return e.delay=10,e.throttle=2,e.threshold=5,e.changeCount=0,e.timestamp=0,e.options=ia(ia({},ey.defaultOptions),t),e.graph.model.on("cell:change:*",e.onModelChanged,e),e}(ty=ty||{}).defaultOptions={delay:10,throttle:2,threshold:5};var ny,oy,iy=(Object.defineProperty(cy.prototype,"options",{get:function(){return this.halo.options},enumerable:!1,configurable:!0}),Object.defineProperty(cy.prototype,"graph",{get:function(){return this.halo.graph},enumerable:!1,configurable:!0}),Object.defineProperty(cy.prototype,"model",{get:function(){return this.halo.model},enumerable:!1,configurable:!0}),Object.defineProperty(cy.prototype,"view",{get:function(){return this.halo.view},enumerable:!1,configurable:!0}),Object.defineProperty(cy.prototype,"cell",{get:function(){return this.halo.cell},enumerable:!1,configurable:!0}),Object.defineProperty(cy.prototype,"node",{get:function(){return this.cell},enumerable:!1,configurable:!0}),cy.prototype.getPresets=function(){return{className:"type-node",handles:[{name:"remove",position:"nw",events:{mousedown:this.removeCell.bind(this)},icon:null},{name:"resize",position:"se",events:{mousedown:this.startResize.bind(this),mousemove:this.doResize.bind(this),mouseup:this.stopResize.bind(this)},icon:null},{name:"clone",position:"n",events:{mousedown:this.startClone.bind(this),mousemove:this.doClone.bind(this),mouseup:this.stopClone.bind(this)},icon:null},{name:"link",position:"e",events:{mousedown:this.startLink.bind(this),mousemove:this.doLink.bind(this),mouseup:this.stopLink.bind(this)},icon:null},{name:"fork",position:"ne",events:{mousedown:this.startFork.bind(this),mousemove:this.doFork.bind(this),mouseup:this.stopFork.bind(this)},icon:null},{name:"unlink",position:"w",events:{mousedown:this.unlink.bind(this)},icon:null},{name:"rotate",position:"sw",events:{mousedown:this.startRotate.bind(this),mousemove:this.doRotate.bind(this),mouseup:this.stopRotate.bind(this)},icon:null}],bbox:function(t){return(this.options.useCellGeometry?t.cell:t).getBBox()},content:function(t){var e=hr("x: <%= x %>, y: <%= y %>, width: <%= width %>, height: <%= height %>, angle: <%= angle %>"),n=t.cell,t=n.getBBox();return e({x:Math.floor(t.x),y:Math.floor(t.y),width:Math.floor(t.width),height:Math.floor(t.height),angle:Math.floor(n.getAngle())})},magnet:function(t){return t.container},tinyThreshold:40,smallThreshold:80,loopEdgePreferredSide:"top",loopEdgeWidth:40,rotateGrid:15,rotateEmbeds:!1}},cy.prototype.removeCell=function(){this.model.removeConnectedEdges(this.cell),this.cell.remove()},cy.prototype.startLink=function(t){var e=t.x,n=t.y;this.halo.startBatch();var o=this.graph,t=this.createEdgeConnectedToSource();t.setTarget({x:e,y:n}),this.model.addEdge(t,{validation:!1,halo:this.halo.cid,async:!1}),o.view.undelegateEvents(),this.edgeView=o.renderer.findViewByCell(t),this.edgeView.prepareArrowheadDragging("target",{x:e,y:n,fallbackAction:"remove"})},cy.prototype.createEdgeConnectedToSource=function(){var t=this.getMagnet(this.view,"source"),e=this.getEdgeTerminal(this.view,t),t=this.graph.hook.getDefaultEdge(this.view,t);return t.setSource(e),t},cy.prototype.getMagnet=function(t,e){var n=this.options.magnet;if("function"==typeof n){e=Gr(n,this.halo,t,e);if(e instanceof SVGElement)return e}throw new Error("`magnet()` has to return an SVGElement")},cy.prototype.getEdgeTerminal=function(t,e){var n,o={cell:t.cell.id};return e!==t.container&&((n=e.getAttribute("port"))?o.port=n:o.selector=t.getSelector(e)),o},cy.prototype.doLink=function(t){var e=t.e,n=t.x,t=t.y;this.edgeView&&this.edgeView.onMouseMove(e,n,t)},cy.prototype.stopLink=function(t){var e=t.e,n=t.x,o=t.y,t=this.edgeView;t&&(t.onMouseUp(e,n,o),(t=t.cell).hasLoop()&&this.makeLoopEdge(t),this.halo.stopBatch(),this.halo.trigger("action:edge:addde",{edge:t}),this.edgeView=null),this.graph.view.delegateEvents()},cy.prototype.makeLoopEdge=function(t){var i=null,r=null,s=this.options.loopEdgeWidth,e=this.graph.options,a=new U.Rectangle(0,0,e.width,e.height),l=this.graph.graphToLocal(this.view.getBBox());[this.options.loopEdgePreferredSide,"top","bottom","left","right"].some(function(t){var e=null,n=0,o=0;switch(t){case"top":e=new U.Point(l.x+l.width/2,l.y-s),n=s/2;break;case"bottom":e=new U.Point(l.x+l.width/2,l.y+l.height+s),n=s/2;break;case"left":e=new U.Point(l.x-s,l.y+l.height/2),o=s/2;break;case"right":e=new U.Point(l.x+l.width+s,l.y+l.height/2),o=s/2}if(e)return i=e.translate(-n,-o),r=e.translate(n,o),a.containsPoint(i)&&a.containsPoint(r)})&&i&&r&&t.setVertices([i,r])},cy.prototype.startResize=function(t){t=t.e;this.halo.startBatch(),this.flip=[1,0,0,1,1,0,0,1][Math.floor(U.Angle.normalize(this.node.getAngle())/45)],this.view.addClass("node-resizing"),ig("node:resize",t,this.view)},cy.prototype.doResize=function(t){var e=t.e,n=t.dx,o=t.dy,i=this.node.getSize(),t=Math.max(i.width+(this.flip?n:o),1),n=Math.max(i.height+(this.flip?o:n),1);this.node.resize(t,n,{absolute:!0}),ig("node:resizing",e,this.view)},cy.prototype.stopResize=function(t){t=t.e;this.view.removeClass("node-resizing"),ig("node:resized",t,this.view),this.halo.stopBatch()},cy.prototype.startClone=function(t){var e=t.e,n=t.x,o=t.y;this.halo.startBatch();t=this.options.clone(this.cell,{clone:!0});if(!(t instanceof U.Cell))throw new Error("option 'clone()' has to return a cell");this.centerNodeAtCursor(t,n,o),this.model.addCell(t,{halo:this.halo.cid,async:!1});t=this.graph.renderer.findViewByCell(t);t.onMouseDown(e,n,o),this.halo.setEventData(e,{cloneView:t})},cy.prototype.centerNodeAtCursor=function(t,e,n){var o=t.getBBox().getCenter(),e=e-o.x,o=n-o.y;t.translate(e,o)},cy.prototype.doClone=function(t){var e=t.e,n=t.x,o=t.y,t=this.halo.getEventData(e).cloneView;t&&t.onMouseMove(e,n,o)},cy.prototype.stopClone=function(t){var e=t.e,n=t.x,o=t.y,t=this.halo.getEventData(e).cloneView;t&&t.onMouseUp(e,n,o),this.halo.stopBatch()},cy.prototype.startFork=function(t){var e=t.e,n=t.x,o=t.y;this.halo.startBatch();var i=this.options.clone(this.cell,{fork:!0});if(!(i instanceof U.Cell))throw new Error("option 'clone()' has to return a cell");this.centerNodeAtCursor(i,n,o),this.model.addCell(i,{halo:this.halo.cid,async:!1});var r=this.createEdgeConnectedToSource(),t=this.graph.renderer.findViewByCell(i),i=this.getMagnet(t,"target"),i=this.getEdgeTerminal(t,i);r.setTarget(i),this.model.addEdge(r,{halo:this.halo.cid,async:!1}),t.onMouseDown(e,n,o),this.halo.setEventData(e,{cloneView:t})},cy.prototype.doFork=function(t){var e=t.e,n=t.x,o=t.y,t=this.halo.getEventData(e).cloneView;t&&t.onMouseMove(e,n,o)},cy.prototype.stopFork=function(t){var e=t.e,n=t.x,o=t.y,t=this.halo.getEventData(e).cloneView;t&&t.onMouseUp(e,n,o),this.halo.stopBatch()},cy.prototype.startRotate=function(t){var e=this,n=t.e,o=t.x,i=t.y;this.halo.startBatch();var r=this.node.getBBox().getCenter(),t=[this.node];this.options.rotateEmbeds&&this.node.getDescendants({deep:!0}).reduce(function(t,e){return e.isNode()&&t.push(e),t},t),this.halo.setEventData(n,{center:r,nodes:t,rotateStartAngles:t.map(function(t){return t.getAngle()}),clientStartAngle:new U.Point(o,i).theta(r)}),t.forEach(function(t){t=e.graph.findViewByCell(t);t&&(t.addClass("node-rotating"),ig("node:rotate",n,t))})},cy.prototype.doRotate=function(t){var n=this,o=t.e,e=t.x,t=t.y,i=this.halo.getEventData(o),r=i.clientStartAngle-new U.Point(e,t).theta(i.center);i.nodes.forEach(function(t,e){e=i.rotateStartAngles[e],e=U.Util.snapToGrid(e+r,n.options.rotateGrid);t.rotate(e,{absolute:!0,center:i.center,halo:n.halo.cid}),ig("node:rotating",o,n.graph.findViewByCell(t))})},cy.prototype.stopRotate=function(t){var e=this,n=t.e;this.halo.getEventData(n).nodes.forEach(function(t){t=e.graph.findViewByCell(t);t.removeClass("node-rotating"),ig("node:rotated",n,t)}),this.halo.stopBatch()},cy.prototype.unlink=function(){this.halo.startBatch(),this.model.removeConnectedEdges(this.cell),this.halo.stopBatch()},cy),ry=(Object.defineProperty(ly.prototype,"options",{get:function(){return this.halo.options},enumerable:!1,configurable:!0}),Object.defineProperty(ly.prototype,"graph",{get:function(){return this.halo.graph},enumerable:!1,configurable:!0}),Object.defineProperty(ly.prototype,"model",{get:function(){return this.halo.model},enumerable:!1,configurable:!0}),Object.defineProperty(ly.prototype,"view",{get:function(){return this.halo.view},enumerable:!1,configurable:!0}),Object.defineProperty(ly.prototype,"cell",{get:function(){return this.halo.cell},enumerable:!1,configurable:!0}),Object.defineProperty(ly.prototype,"edge",{get:function(){return this.cell},enumerable:!1,configurable:!0}),ly.prototype.getPresets=function(){return{className:"type-edge",handles:[{name:"remove",position:"nw",icon:null,events:{mousedown:this.removeEdge.bind(this)}},{name:"direction",position:"se",icon:null,events:{mousedown:this.directionSwap.bind(this)}}],content:!1,bbox:function(t){return t.graph.localToGraph(t.getPointAtRatio(.5))},tinyThreshold:-1,smallThreshold:-1}},ly.prototype.removeEdge=function(){this.cell.remove()},ly.prototype.directionSwap=function(){var t=this.edge.getSource(),e=this.edge.getTarget();this.edge.prop({source:e,target:t})},ly),sy=(oa(ay,oy=nn),Object.defineProperty(ay.prototype,"type",{get:function(){return this.options.type||"surround"},enumerable:!1,configurable:!0}),Object.defineProperty(ay.prototype,"handleOptions",{get:function(){return this.options},enumerable:!1,configurable:!0}),ay.prototype.init=function(t){this.options=Mi(ay.defaultOptions,this.cell.isNode()?new iy(this).getPresets():this.cell.isEdge()?new ry(this).getPresets():null,t),this.render(),this.initHandles(),this.update(),this.startListening()},ay.prototype.startListening=function(){var t=this.model,e=this.graph;this.view.cell.on("removed",this.remove,this),t.on("reseted",this.remove,this),e.on("halo:destroy",this.remove,this),t.on("*",this.update,this),e.on("scale",this.update,this),e.on("translate",this.update,this),oy.prototype.startListening.call(this)},ay.prototype.stopListening=function(){var t=this.model,e=this.graph,n=this.view.cell;this.undelegateEvents(),n.off("removed",this.remove,this),t.off("reseted",this.remove,this),e.off("halo:destroy",this.remove,this),t.off("*",this.update,this),e.off("scale",this.update,this),e.off("translate",this.update,this),oy.prototype.stopListening.call(this)},ay.prototype.render=function(){var t=this.options,e=this.prefixClassName("widget-halo");return this.view.addClass(ny.NODE_CLS),this.container=document.createElement("div"),this.$container=this.$(this.container).addClass(e).attr("data-shape",this.view.cell.shape),t.className&&this.$container.addClass(t.className),this.$handleContainer=this.$("<div/>").addClass(e+"-handles").appendTo(this.container),this.$content=this.$("<div/>").addClass(e+"-content").appendTo(this.container),this.$container.appendTo(this.graph.container),this},ay.prototype.remove=function(){return this.stopBatch(),this.view.removeClass(ny.NODE_CLS),oy.prototype.remove.call(this)},ay.prototype.update=function(){var t,e,n;this.isRendered()&&(this.updateContent(),t=this.getBBox(),n=this.options.tinyThreshold||0,e=this.options.smallThreshold||0,this.$handleContainer.toggleClass(this.handleClassName+"-tiny",t.width<n&&t.height<n),n=this.handleClassName+"-small",this.$handleContainer.toggleClass(n,!this.$handleContainer.hasClass(n)&&t.width<e&&t.height<e),this.$container.css({width:t.width,height:t.height,left:t.x,top:t.y}),this.hasHandle("unlink")&&this.toggleUnlink(),"surround"!==this.type&&"toolbar"!==this.type||this.hasHandle("fork")&&this.toggleFork())},ay.prototype.updateContent=function(){var t,e=this.options.content;"function"==typeof e?(t=Gr(e,this,this.view,this.$content[0]))&&this.$content.html(t):e?this.$content.html(e):this.$content.remove()},ay.prototype.getBBox=function(){var t=this.view,e=this.options.bbox,e="function"==typeof e?Gr(e,this,t):e;return U.Rectangle.create(ia({x:0,y:0,width:1,height:1},e))},ay.prototype.removeCell=function(){this.cell.remove()},ay.prototype.toggleFork=function(){var t=this.view.cell.clone(),e=this.graph.hook.createCellView(t),t=this.graph.hook.validateConnection(this.view,null,e,null,"target");this.$handleContainer.children(".fork").toggleClass("hidden",!t),e.remove()},ay.prototype.toggleUnlink=function(){var t=0<this.model.getConnectedEdges(this.view.cell).length;this.$handleContainer.children(".unlink").toggleClass("hidden",!t)},ay.prototype.startBatch=function(){this.model.startBatch("halo",{halo:this.cid})},ay.prototype.stopBatch=function(){this.model.hasActiveBatch("halo")&&this.model.stopBatch("halo",{halo:this.cid})},ay);function ay(){return null!==oy&&oy.apply(this,arguments)||this}function ly(t){this.halo=t}function cy(t){this.halo=t}(sy||(sy={})).defaultOptions={type:"surround",clearAll:!0,clearOnBlankMouseDown:!0,useCellGeometry:!1,clone:function(t){return t.clone().removeZIndex()}},Object.getOwnPropertyNames(ag.prototype).forEach(function(t){"constructor"!==t&&Object.defineProperty(sy.prototype,t,Object.getOwnPropertyDescriptor(ag.prototype,t))}),(ny=ny||{}).NODE_CLS="has-widget-halo";var hy,uy=(oa(py,hy=U.View),Object.defineProperty(py.prototype,"vel",{get:function(){return U.Vector.create(this.container)},enumerable:!1,configurable:!0}),py.prototype.render=function(){var t=this.options;return this.container=hs("g"),Qr(this.container,this.prefixClassName("path-drawer")),this.pathTemplate=hs("path"),Fs(this.pathTemplate,t.pathAttributes),this.startPointElement=U.Vector.create(t.startPointMarkup).addClass("start-point").node,this.controlElement=hs("path"),Qr(this.controlElement,"control-path"),U.Vector.create("rect",{x:0,y:0,width:"100%",height:"100%",fill:"transparent",stroke:"none"}).appendTo(this.container),this.options.target.appendChild(this.container),this},py.prototype.onRemove=function(){this.remove(this.pathElement),this.clear(),this.stopListening()},py.prototype.startListening=function(){this.delegateEvents({mousedown:"onMouseDown",touchstart:"onMouseDown",dblclick:"onDoubleClick",contextmenu:"onContextMenu","mousedown .start-point":"onStartPointMouseDown","touchstart .start-point":"onStartPointMouseDown"})},py.prototype.stopListening=function(){this.undelegateEvents()},py.prototype.clear=function(){var t=this.pathElement;t&&t.pathSegList.numberOfItems<=1&&this.remove(t),this.startPointElement.remove(),this.controlElement.remove(),this.undelegateDocumentEvents(),this.action="awaiting-input",this.emit("clear")},py.prototype.createPath=function(t,e){this.pathElement=this.pathTemplate.cloneNode(!0),this.addMoveSegment(t,e),pc(this.startPointElement,t,e,{absolute:!0}),this.vel.before(this.pathElement),this.vel.append(this.startPointElement),this.emit("path:create",{path:this.pathElement})},py.prototype.closePath=function(){var t=this.pathElement,e=this.getPathSeg(t,0),n=this.getPathSeg(t,-1);n.pathSegType===SVGPathSeg.PATHSEG_LINETO_ABS?t.pathSegList.replaceItem(t.createSVGPathSegClosePath(),t.pathSegList.numberOfItems-1):(n.x=e.x,n.y=e.y,t.pathSegList.appendItem(t.createSVGPathSegClosePath())),this.finishPath("path:close")},py.prototype.finishPath=function(t){var e=this.pathElement;e&&0<this.numberOfVisibleSegments()?(this.emit("path:finish",{path:e}),this.trigger(t,{path:e})):this.emit("path:abort",{path:e}),this.clear()},py.prototype.numberOfVisibleSegments=function(){var t=this.pathElement,e=t.pathSegList.numberOfItems;return--e,this.getPathSeg(t,-1).pathSegType===SVGPathSeg.PATHSEG_CLOSEPATH&&--e,e},py.prototype.addMoveSegment=function(t,e){var n=this.pathElement,e=n.createSVGPathSegMovetoAbs(t,e);n.pathSegList.appendItem(e),this.emit("path:segment:add",{path:n}),this.emit("path:move-segment:add",{path:n})},py.prototype.addLineSegment=function(t,e){var n=this.pathElement,e=n.createSVGPathSegLinetoAbs(t,e);n.pathSegList.appendItem(e),this.emit("path:segment:add",{path:n}),this.emit("path:line-segment:add",{path:n})},py.prototype.addCurveSegment=function(t,e,n,o,i,r){var s=this.pathElement,e=s.createSVGPathSegCurvetoCubicAbs(t,e,n,o,i||t,r||e);s.pathSegList.appendItem(e),this.emit("path:segment:add",{path:s}),this.emit("path:curve-segment:add",{path:s})},py.prototype.adjustLastSegment=function(t,e,n,o,i,r){var s=this.pathElement,a=this.options.snapRadius;a&&null!=t&&null!=e&&(t=(l=this.snapLastSegmentCoordinates(t,e,a)).x,e=l.y);var l=this.getPathSeg(s,-1);null!=t&&(l.x=t),null!=e&&(l.y=e),null!=n&&(l.x1=n),null!=o&&(l.y1=o),null!=i&&(l.x2=i),null!=r&&(l.y2=r),this.emit("path:edit",{path:s}),this.emit("path:last-segment:adjust",{path:s})},py.prototype.snapLastSegmentCoordinates=function(t,e,n){for(var o=this.pathElement,i=!1,r=!1,s=t,a=e,l=o.pathSegList.numberOfItems-2;0<=l&&(!i||!r);--l){var c=this.getPathSeg(o,l);!i&&Math.abs(c.x-t)<n&&(s=c.x,i=!0),!r&&Math.abs(c.y-e)<n&&(a=c.y,r=!0)}return new U.Point(s,a)},py.prototype.removeLastSegment=function(){var t=this.pathElement;t.pathSegList.removeItem(t.pathSegList.numberOfItems-1),this.emit("path:edit",{path:t}),this.emit("path:last-segment:remove",{path:t})},py.prototype.findControlPoint=function(t,e){var n=this.pathElement,n=this.getPathSeg(n,-1);return new U.Point(t,e).reflection(n)},py.prototype.replaceLastSegmentWithCurve=function(){var t=this.pathElement,e=this.getPathSeg(t,-1),n=this.getPathSeg(t,-2),e=t.createSVGPathSegCurvetoCubicAbs(e.x,e.y,n.x,n.y,e.x,e.y);t.pathSegList.replaceItem(e,t.pathSegList.numberOfItems-1),this.emit("path:edit",{path:t}),this.emit("path:last-segment:replace-with-curve",{path:t})},py.prototype.adjustControlPath=function(t,e,n,o){var i=this.controlElement;i.pathSegList.initialize(i.createSVGPathSegMovetoAbs(t,e)),i.pathSegList.appendItem(i.createSVGPathSegLinetoAbs(n,o)),this.vel.append(i);i=this.pathElement;this.emit("path:interact",{path:i}),this.emit("path:control:adjust",{path:i})},py.prototype.removeControlPath=function(){var t=this.pathElement,e=this.controlElement;e.pathSegList.clear(),this.vel.append(e),this.emit("path:interact",{path:t}),this.emit("path:control:remove",{path:t})},py.prototype.getPathSeg=function(t,e){e=e<0?t.pathSegList.numberOfItems+e:e;return t.pathSegList.getItem(e)},py.prototype.onMouseDown=function(t){var e=this.normalizeEvent(t);if(e.stopPropagation(),this.isLeftMouseDown(e)&&this.isSamePositionEvent(e)&&this.container.parentNode){t=this.vel.toLocalPoint(e.clientX,e.clientY);switch(this.action){case"awaiting-input":this.createPath(t.x,t.y),this.action="path-created",this.delegateDocumentEvents(py.documentEvents);break;case"adjusting-line-end":this.action="awaiting-line-end";break;case"adjusting-curve-end":this.action="awaiting-curve-control-2"}this.timeStamp=e.timeStamp}},py.prototype.onMouseMove=function(t){var e=this.normalizeEvent(t);if(e.stopPropagation(),"awaiting-input"!==this.action){var n=this.vel.toLocalPoint(e.clientX,e.clientY),t=this.timeStamp;if(t)if(e.timeStamp-t<this.MOVEMENT_DETECTION_THRESHOLD)switch(this.action){case"path-created":var o=pc(this.startPointElement);this.adjustControlPath(o.tx,o.ty,n.x,n.y);break;case"awaiting-line-end":case"adjusting-curve-control-1":this.adjustLastSegment(n.x,n.y);break;case"awaiting-curve-control-2":this.adjustLastSegment(n.x,n.y,null,null,n.x,n.y)}else switch(this.action){case"path-created":this.action="adjusting-curve-control-1";break;case"awaiting-line-end":this.replaceLastSegmentWithCurve(),this.action="adjusting-curve-control-2";break;case"awaiting-curve-control-2":this.action="adjusting-curve-control-2";break;case"adjusting-curve-control-1":o=pc(this.startPointElement),this.adjustControlPath(o.tx,o.ty,n.x,n.y);break;case"adjusting-curve-control-2":o=this.findControlPoint(n.x,n.y);this.adjustLastSegment(null,null,null,null,o.x,o.y),this.adjustControlPath(o.x,o.y,n.x,n.y)}else switch(this.action){case"adjusting-line-end":this.adjustLastSegment(n.x,n.y);break;case"adjusting-curve-end":this.adjustLastSegment(n.x,n.y,null,null,n.x,n.y)}}},py.prototype.onPointerUp=function(t){this.timeStamp=null;t=this.normalizeEvent(t);if(t.stopPropagation(),this.isLeftMouseDown(t)&&this.isSamePositionEvent(t)){t=this.vel.toLocalPoint(t.clientX,t.clientY);switch(this.action){case"path-created":case"awaiting-line-end":this.addLineSegment(t.x,t.y),this.action="adjusting-line-end";break;case"awaiting-curve-control-2":this.removeControlPath(),this.addLineSegment(t.x,t.y),this.action="adjusting-line-end";break;case"adjusting-curve-control-1":case"adjusting-curve-control-2":this.addCurveSegment(t.x,t.y,t.x,t.y),this.action="adjusting-curve-end"}}},py.prototype.onStartPointMouseDown=function(t){t=this.normalizeEvent(t);t.stopPropagation(),this.isLeftMouseDown(t)&&this.isSamePositionEvent(t)&&this.closePath()},py.prototype.onDoubleClick=function(t){t=this.normalizeEvent(t);t.preventDefault(),t.stopPropagation(),this.isLeftMouseDown(t)&&this.pathElement&&0<this.numberOfVisibleSegments()&&(this.removeLastSegment(),this.finishPath("path:stop"))},py.prototype.onContextMenu=function(t){t=this.normalizeEvent(t);t.preventDefault(),t.stopPropagation(),this.isSamePositionEvent(t)&&this.pathElement&&0<this.numberOfVisibleSegments()&&(this.removeLastSegment(),this.finishPath("path:stop"))},py.prototype.isLeftMouseDown=function(t){return(t.which||0)<=1},py.prototype.isSamePositionEvent=function(t){t=t.originalEvent;return null==t||t.detail<=1},py);function py(t){var e=hy.call(this)||this;return e.MOVEMENT_DETECTION_THRESHOLD=150,e.options=Mi({},py.defaultOptions,t),e.action="awaiting-input",e.render(),e.startListening(),e}(nn=uy=uy||{}).defaultOptions={pathAttributes:{class:null,fill:"#ffffff",stroke:"#000000","stroke-width":1,"pointer-events":"none"},startPointMarkup:'<circle r="5"/>',snapRadius:0},nn.documentEvents={mousemove:"onMouseMove",touchmove:"onMouseMove",mouseup:"onMouseUp",touchend:"onMouseUp",touchcancel:"onMouseUp"};var dy,gy,fy=(oa(yy,gy=U.View),Object.defineProperty(yy.prototype,"targetScroller",{get:function(){var t=this.options.target;return t instanceof U.Graph?t.scroller.widget:t},enumerable:!1,configurable:!0}),Object.defineProperty(yy.prototype,"targetGraph",{get:function(){var t=this.options.target;return t instanceof U.Graph?t:t.graph},enumerable:!1,configurable:!0}),Object.defineProperty(yy.prototype,"targetModel",{get:function(){return this.targetGraph.model},enumerable:!1,configurable:!0}),Object.defineProperty(yy.prototype,"snapline",{get:function(){return this.targetGraph.snapline.widget},enumerable:!1,configurable:!0}),yy.prototype.start=function(t,e){var n=e;n.preventDefault(),this.targetModel.startBatch("dnd"),this.$container.addClass("dragging").appendTo(document.body),this.sourceNode=t,this.prepareDragging(t,n.clientX,n.clientY);e=this.updateNodePosition(n.clientX,n.clientY);this.isSnaplineEnabled()&&(this.snapline.captureCursorOffset({e:n,node:t,cell:t,view:this.draggingView,x:e.x,y:e.y}),this.draggingNode.on("change:position",this.snap,this)),this.delegateDocumentEvents(yy.documentEvents,n.data)},yy.prototype.isSnaplineEnabled=function(){return this.snapline&&!this.snapline.disabled},yy.prototype.prepareDragging=function(t,e,n){var o=this.draggingGraph,i=o.model,r=this.options.getDragNode(t,{sourceNode:t,draggingGraph:o,targetGraph:this.targetGraph});r.position(0,0);var s=5;this.isSnaplineEnabled()&&(s+=this.snapline.options.tolerance||0),this.isSnaplineEnabled()||this.options.scaled?(t=this.targetGraph.transform.getScale(),o.scale(t.sx,t.sy),s*=Math.max(t.sx,t.sy)):o.scale(1,1),this.clearDragging(),this.options.animation&&this.$container.stop(!0,!0),i.resetCells([r]);i=o.findViewByCell(r);i.undelegateEvents(),i.cell.off("changed"),o.fitToContent({padding:s,allowNewOrigin:"any"});o=i.getBBox();this.geometryBBox=i.getBBox({useCellGeometry:!0}),this.delta=this.geometryBBox.getTopLeft().diff(o.getTopLeft()),this.draggingNode=r,this.draggingView=i,this.draggingBBox=r.getBBox(),this.padding=s,this.originOffset=this.updateGraphPosition(e,n)},yy.prototype.updateGraphPosition=function(t,e){var n=document.body.scrollTop||document.documentElement.scrollTop,o=this.delta,i=this.geometryBBox,r=this.padding||5,n={left:t-o.x-i.width/2-r,top:e-o.y-i.height/2-r+n};return this.draggingGraph&&this.$container.offset(n),n},yy.prototype.updateNodePosition=function(t,e){t=this.targetGraph.clientToLocal(t,e),e=this.draggingBBox;return t.x-=e.width/2,t.y-=e.height/2,this.draggingNode.position(t.x,t.y),t},yy.prototype.snap=function(t){var e=t.cell,n=t.current,o=t.options,t=e;o.snapped?(e=this.draggingBBox,t.position(e.x+o.tx,e.y+o.ty,{silent:!0}),this.draggingView.translate(),t.position(n.x,n.y,{silent:!0}),this.snapOffset={x:o.tx,y:o.ty}):this.snapOffset=null},yy.prototype.onDragging=function(t){var e,n,o,i,r=this.draggingView;r&&(t.preventDefault(),n=(e=this.normalizeEvent(t)).clientX,i=e.clientY,this.updateGraphPosition(n,i),o=this.updateNodePosition(n,i),i=((t=this.targetGraph.options.embedding.enabled)||this.isSnaplineEnabled())&&this.isInsideValidArea({x:n,y:i}),t&&(r.setEventData(e,{graph:this.targetGraph,candidateEmbedView:this.candidateEmbedView}),t=r.getEventData(e),i?r.processEmbedding(e,t):r.clearEmbedding(t),this.candidateEmbedView=t.candidateEmbedView),this.isSnaplineEnabled()&&(i?this.snapline.snapOnMoving({e:e,view:r,x:o.x,y:o.y}):this.snapline.hide()))},yy.prototype.onDragEnd=function(t){var e,n,o,i,r=this,s=this.draggingNode;s&&(e=this.normalizeEvent(t),n=this.draggingView,i=this.draggingBBox,o=this.snapOffset,t=i.x,i=i.y,o&&(t+=o.x,i+=o.y),s.position(t,i,{silent:!0}),t=function(t){t?(r.onDropped(s),r.targetGraph.options.embedding.enabled&&n&&(n.setEventData(e,{cell:t,graph:r.targetGraph,candidateEmbedView:r.candidateEmbedView}),n.finalizeEmbedding(e,n.getEventData(e)))):r.onDropInvalid(),r.candidateEmbedView=null,r.targetModel.stopBatch("dnd")},Ur(i=this.drop(s,{x:e.clientX,y:e.clientY}))?(this.undelegateDocumentEvents(),i.then(t)):t(i))},yy.prototype.clearDragging=function(){this.draggingNode&&(this.sourceNode=null,this.draggingNode.remove(),this.draggingNode=null,this.draggingView=null,this.delta=null,this.padding=null,this.snapOffset=null,this.originOffset=null,this.undelegateDocumentEvents())},yy.prototype.onDropped=function(t){this.draggingNode===t&&(this.clearDragging(),this.$container.removeClass("dragging").remove())},yy.prototype.onDropInvalid=function(){var t,e,n=this,o=this.draggingNode;o&&((e=this.options.animation)?(t="object"==typeof e&&e.duration||150,e="object"==typeof e&&e.easing||"swing",this.draggingView=null,this.$container.animate(this.originOffset,t,e,function(){return n.onDropped(o)})):this.onDropped(o))},yy.prototype.isInsideValidArea=function(t){var e=this.targetGraph,n=this.targetScroller;return(e=n?n.options.autoResize?this.getDropArea(n.container):(n=this.getDropArea(n.container),this.getDropArea(e.container).intersectsWithRect(n)):this.getDropArea(e.container))&&e.containsPoint(t)},yy.prototype.getDropArea=function(t){var e=this.$(t),n=e.offset(),o=document.body.scrollTop||document.documentElement.scrollTop,t=document.body.scrollLeft||document.documentElement.scrollLeft;return U.Rectangle.create({x:n.left+parseInt(e.css("border-left-width"),10)-t,y:n.top+parseInt(e.css("border-top-width"),10)-o,width:e.innerWidth(),height:e.innerHeight()})},yy.prototype.drop=function(t,e){var n=this;if(this.isInsideValidArea(e)){var o=this.targetGraph,i=o.model,r=o.clientToLocal(e),s=this.sourceNode,a=this.options.getDropNode(t,{sourceNode:s,draggingNode:t,targetGraph:this.targetGraph,draggingGraph:this.draggingGraph}),e=a.getBBox();r.x+=e.x-e.width/2,r.y+=e.y-e.height/2;e=this.snapOffset?1:o.getGridSize();a.position(U.Util.snapToGrid(r.x,e),U.Util.snapToGrid(r.y,e)),a.removeZIndex();e=this.options.validateNode,o=!e||e(a,{sourceNode:s,draggingNode:t,droppingNode:a,targetGraph:o,draggingGraph:this.draggingGraph});return"boolean"==typeof o?o?(i.addCell(a,{stencil:this.cid}),a):null:qr(o).then(function(t){return t?(i.addCell(a,{stencil:n.cid}),a):null})}return null},yy.prototype.onRemove=function(){this.draggingGraph&&this.draggingGraph.view.remove()},yy);function yy(t){var e=gy.call(this)||this;return e.options=ia(ia({},yy.defaults),t),e.container=document.createElement("div"),e.$container=e.$(e.container).addClass(e.prefixClassName("widget-dnd")),e.draggingGraph=new U.Graph(ia(ia({},e.options.delegateGraphOptions),{container:document.createElement("div"),width:1,height:1})),e.$container.append(e.draggingGraph.container),e}(nn=fy=fy||{}).defaults={animation:!1,getDragNode:function(t){return t.clone()},getDropNode:function(t){return t.clone()}},nn.documentEvents={mousemove:"onDragging",touchmove:"onDragging",mouseup:"onDragEnd",touchend:"onDragEnd",touchcancel:"onDragEnd"},(nn=dy=dy||{}).getMaxDim=function(t,n){return t.reduce(function(t,e){return Math.max(e.getSize()[n],t)},0)},nn.getNodesInRow=function(t,e,n){for(var o=[],i=n*e,r=i+n;i<r;i+=1)o.push(t[i]);return o},nn.getNodesInColumn=function(t,e,n){for(var o=[],i=e,r=t.length;i<r;i+=n)o.push(t[i]);return o},nn.accumulate=function(t,e){return t.reduce(function(t,e,n){return t.push(t[n]+e),t},[e||0])};var my,Cy,vy,by=(oa(xy,vy=U.View),Object.defineProperty(xy.prototype,"targetScroller",{get:function(){var t=this.options.target;return t instanceof U.Graph?t.scroller.widget:t},enumerable:!1,configurable:!0}),Object.defineProperty(xy.prototype,"targetGraph",{get:function(){var t=this.options.target;return t instanceof U.Graph?t:t.graph},enumerable:!1,configurable:!0}),Object.defineProperty(xy.prototype,"targetModel",{get:function(){return this.targetGraph.model},enumerable:!1,configurable:!0}),xy.prototype.renderSearch=function(){return this.$("<div/>").addClass(this.prefixClassName(my.search)).append(this.$("<input/>").attr({type:"search",placeholder:"Search"}).addClass(this.prefixClassName(my.searchText)))},xy.prototype.startListening=function(){var t,e=this,n=this.prefixClassName(my.title),o=this.prefixClassName(my.searchText),i=this.prefixClassName(my.groupTitle);this.delegateEvents(((t={})["click ."+n]="onTitleClick",t["touchstart ."+n]="onTitleClick",t["click ."+i]="onGroupTitleClick",t["touchstart ."+i]="onGroupTitleClick",t["input ."+o]="onSearch",t["focusin ."+o]="onSearchFocusIn",t["focusout ."+o]="onSearchFocusOut",t)),Object.keys(this.graphs).forEach(function(t){e.graphs[t].on("cell:mousedown",e.onDragStart,e)})},xy.prototype.stopListening=function(){var e=this;this.undelegateEvents(),Object.keys(this.graphs).forEach(function(t){e.graphs[t].off("cell:mousedown",e.onDragStart,e)})},xy.prototype.load=function(e,t){var n=this;return Array.isArray(e)?this.loadGroup(e,t):this.options.groups&&Object.keys(this.options.groups).forEach(function(t){e[t]&&n.loadGroup(e[t],t)}),this},xy.prototype.loadGroup=function(t,e){var n=this.getModel(e);n&&(i=t.map(function(t){return t instanceof U.Node?t:U.Node.create(t)}),n.resetCells(i));var o=this.getGroup(e),t=this.options.stencilGraphHeight;o&&null!=o.graphHeight&&(t=o.graphHeight);var i=o&&o.layout||this.options.layout;return i&&n&&Gr(i,this,n,o),t||(e=this.getGraph(e)).fitToContent({minWidth:e.options.width,gridHeight:1,padding:o&&o.graphPadding||this.options.stencilGraphPadding||10}),this},xy.prototype.onDragStart=function(t){var e=t.e,t=t.node;this.dnd.start(t,e)},xy.prototype.filter=function(l,c){var h=this,t=Object.keys(this.graphs).reduce(function(t,e){var n=h.graphs[e],o=e===Cy.defaultGroupName?null:e,i=n.model.getNodes().filter(function(t){var e="function"==typeof c?Gr(c,h,t,l,o,h):"boolean"==typeof c?c:h.isCellMatched(t,l,c,l.toLowerCase()!==l),t=n.renderer.findViewByCell(t);return t&&t.$(t.container).toggleClass("unmatched",!e),e}),r=0<i.length,s=h.options,a=new U.Model;return a.resetCells(i),s.layout&&Gr(s.layout,h,a,h.getGroup(e)),h.$groups[e]&&h.$groups[e].toggleClass("unmatched",!r),n.fitToContent({gridWidth:1,gridHeight:1,padding:s.stencilGraphPadding||10}),t||r},!1);this.$container.toggleClass("not-found",!t)},xy.prototype.isCellMatched=function(e,n,o,i){return!n||!o||Object.keys(o).some(function(t){if("*"!==t&&e.shape!==t)return!1;t=o[t];return"boolean"==typeof t?t:(Array.isArray(t)?t:[t]).some(function(t){t=e.getPropByPath(t);if(null!=t)return t=""+t,i&&(t=t.toLowerCase()),0<=t.indexOf(n)})})},xy.prototype.onSearch=function(t){this.filter(t.target.value,this.options.search)},xy.prototype.onSearchFocusIn=function(){this.$container.addClass("is-focused")},xy.prototype.onSearchFocusOut=function(){this.$container.removeClass("is-focused")},xy.prototype.onTitleClick=function(){this.options.collapsable&&(this.$container.toggleClass("collapsed"),this.$container.hasClass("collapsed")?this.collapseGroups():this.expandGroups())},xy.prototype.onGroupTitleClick=function(t){var n=this,t=this.$(t.target).closest("."+this.prefixClassName(my.group));this.toggleGroup(t.attr("data-name")||"");t=Object.keys(this.$groups).every(function(t){var e=n.getGroup(t),t=n.$groups[t];return e&&!1===e.collapsable||t.hasClass("collapsed")});this.$container.toggleClass("collapsed",t)},xy.prototype.getModel=function(t){t=this.getGraph(t);return t?t.model:null},xy.prototype.getGraph=function(t){return this.graphs[t||Cy.defaultGroupName]},xy.prototype.getGroup=function(e){var t=this.options.groups;return null!=e&&t&&t.length?t.find(function(t){return t.name===e}):null},xy.prototype.toggleGroup=function(t){return this.isGroupCollapsed(t)?this.expandGroup(t):this.collapseGroup(t),this},xy.prototype.collapseGroup=function(t){var e;return!this.isGroupCollapsable(t)||(e=this.$groups[t])&&!this.isGroupCollapsed(t)&&(this.trigger("group:collapse",{name:t}),e.addClass("collapsed")),this},xy.prototype.expandGroup=function(t){var e;return!this.isGroupCollapsable(t)||(e=this.$groups[t])&&this.isGroupCollapsed(t)&&(this.trigger("group:expand",{name:t}),e.removeClass("collapsed")),this},xy.prototype.isGroupCollapsable=function(t){return this.$groups[t].hasClass("collapsable")},xy.prototype.isGroupCollapsed=function(t){t=this.$groups[t];return t&&t.hasClass("collapsed")},xy.prototype.collapseGroups=function(){var e=this;return Object.keys(this.$groups).forEach(function(t){return e.collapseGroup(t)}),this},xy.prototype.expandGroups=function(){var e=this;return Object.keys(this.$groups).forEach(function(t){return e.expandGroup(t)}),this},xy.prototype.onRemove=function(){var e=this;Object.keys(this.graphs).forEach(function(t){e.graphs[t].view.remove(),delete e.graphs[t]}),this.dnd.remove(),this.stopListening(),this.undelegateDocumentEvents()},xy);function xy(r){var s=vy.call(this)||this;s.graphs={},s.$groups={},s.options=ia(ia({},xy.defaultOptions),r),s.dnd=new fy(s.options),s.onSearch=$o(s.onSearch,200),s.container=document.createElement("div"),s.$container=s.$(s.container).addClass(s.prefixClassName(my.base)),s.options.collapsable=r.collapsable&&r.groups&&r.groups.some(function(t){return!1!==t.collapsable}),s.options.collapsable&&(s.$container.addClass("collapsable"),r.groups&&r.groups.every(function(t){return t.collapsed||!1===t.collapsable})&&s.$container.addClass("collapsed")),s.$("<div/>").addClass(s.prefixClassName(my.title)).html(s.options.title).appendTo(s.$container),r.search&&s.$container.addClass("searchable").append(s.renderSearch()),s.$content=s.$("<div/>").addClass(s.prefixClassName(my.content)).appendTo(s.$container);var t,a=r.stencilGraphOptions||{};return r.groups&&r.groups.length?r.groups.forEach(function(t){var e=s.$("<div/>").addClass(s.prefixClassName(my.group)).attr("data-name",t.name);(null==t.collapsable&&r.collapsable||!1!==t.collapsable)&&e.addClass("collapsable"),e.toggleClass("collapsed",!0===t.collapsed);var n=s.$("<h3/>").addClass(s.prefixClassName(my.groupTitle)).html(t.title||t.name),o=s.$("<div/>").addClass(s.prefixClassName(my.groupContent)),i=t.graphOptions,i=new U.Graph(ia(ia(ia({},a),i),{container:document.createElement("div"),model:a.model||new U.Model,width:t.graphWidth||r.stencilGraphWidth,height:t.graphHeight||r.stencilGraphHeight,interacting:!1,preventDefaultBlankAction:!1}));o.append(i.container),e.append(n,o).appendTo(s.$content),s.$groups[t.name]=e,s.graphs[t.name]=i}):(t=new U.Graph(ia(ia({},a),{container:document.createElement("div"),model:a.model||new U.Model,width:r.stencilGraphWidth,height:r.stencilGraphHeight,interacting:!1,preventDefaultBlankAction:!1})),s.$content.append(t.container),s.graphs[Cy.defaultGroupName]=t),s.startListening(),s}(by||(by={})).defaultOptions=ia({stencilGraphWidth:200,stencilGraphHeight:800,title:"Stencil",collapsable:!1,layout:function(t,e){var n={columnWidth:this.options.stencilGraphWidth/2-10,columns:2,rowHeight:80,resizeToFit:!1,dx:10,dy:10};!function(t,p){void 0===p&&(p={});var e=t instanceof U.Model?t:(new U.Model).resetCells(t,{sort:!1,dryrun:!0}),n=e.getNodes(),d=p.columns||1,o=Math.ceil(n.length/d),g=p.dx||0,f=p.dy||0,y=!1!==p.center,m=!0===p.resizeToFit,i=p.marginX||0,t=p.marginY||0,C=[],r=p.columnWidth;if("compact"===r)for(var s=0;s<d;s+=1){var a=dy.getNodesInColumn(n,s,d);C.push(dy.getMaxDim(a,"width")+g)}else{null!=r&&"auto"!==r||(r=dy.getMaxDim(n,"width")+g);for(var l=0;l<d;l+=1)C.push(r)}var v=dy.accumulate(C,i),b=[],c=p.rowHeight;if("compact"===c)for(l=0;l<o;l+=1)a=dy.getNodesInRow(n,l,d),b.push(dy.getMaxDim(a,"height")+f);else for(null!=c&&"auto"!==c||(c=dy.getMaxDim(n,"height")+f),l=0;l<o;l+=1)b.push(c);var x=dy.accumulate(b,t);e.startBatch("layout"),n.forEach(function(t,e){var n,o,i,r=e%d,s=Math.floor(e/d),a=C[r],l=b[s],c=0,h=0,u=t.getSize();m&&(n=a-2*g,o=l-2*f,i=u.height*(u.width?n/u.width:1),e=u.width*(u.height?o/u.height:1),l<i?n=e:o=i,u={width:n,height:o},t.setSize(u,p)),y&&(c=(a-u.width)/2,h=(l-u.height)/2),t.position(v[r]+g+c,x[s]+f+h,p)}),e.stopBatch("layout")}(t,ia(ia(ia({},n),this.options.layoutOptions),e?e.layoutOptions:{}))}},fy.defaults),(nn=my=my||{}).base="widget-stencil",nn.title=nn.base+"-title",nn.search=nn.base+"-search",nn.searchText=nn.search+"-text",nn.content=nn.base+"-content",nn.group=nn.base+"-group",nn.groupTitle=nn.group+"-title",nn.groupContent=nn.group+"-content",(Cy=Cy||{}).defaultGroupName="__default__";nn=Object.freeze({__proto__:null,get AutoSave(){return ty},Clipboard:mg,get Halo(){return sy},MiniMap:_d,get PathDrawer(){return uy},get Scroller(){return eg},Selection:pg,Snapline:$d,Transform:xg,get Dnd(){return fy},get Stencil(){return by}});Uc.trackable&&setTimeout(function(){var t,e;Uc.trackable&&(t=new Image,e=ia(ia({},Uc.trackInfo),{version:"1.7.4",pg:document.URL,r:(new Date).getTime(),x6:!0,page_type:"syslog"}),e=encodeURIComponent(JSON.stringify([e])),t.src="https://kcart.alipay.com/web/bi.do?BIProfile=merge&d="+e)},3e3),U.$=C,U.Addon=nn,U.ArrayExt=Me,U.Collection=pd,U.Config=Uc,U.Dictionary=Vc,U.Disablable=sn,U.DisposableDelegate=gn,U.Dom=vn,U.EdgeView=yd,U.Events=ln,U.FunctionExt=Wr,U.Lang=De,U.Line=La,U.NodeView=vd,U.NumberExt=Ie,U.ObjectExt=He,U.Registry=on,U.Segment=Cn,U.Shape=yn,U.StringExt=Ge,U.Text=Ve,U.version="1.7.4",Object.defineProperty(U,"__esModule",{value:!0})});