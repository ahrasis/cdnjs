"use strict";var __importDefault=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(exports,"__esModule",{value:!0});const d3_selection_1=require("d3-selection"),evaluate_1=__importDefault(require("../evaluate")),utils_1=__importDefault(require("../utils"));function interval(t){let e;const a=t.meta.xScale,n=t.meta.yScale;function l(t,a,n,l){if(n>l){const t=n;n=l,l=t}const i=Math.min(a,l),r=Math.max(t,n);return r>i?[-e,0]:[r,i]}const i=function(t,i){let r="";const o=n.range(),s=Math.min.apply(Math,o),c=Math.max.apply(Math,o);for(let o=0,u=t.length;o<u;o+=1)if(t[o]){const u=t[o][0],f=t[o][1];let _=f.lo,h=f.hi;i&&(_=Math.min(_,0),h=Math.max(h,0));const d=a(u.lo)+t.scaledDx/2,p=l(s,c,isFinite(h)?n(h):-1/0,isFinite(_)?n(_):1/0),m=p[0],M=p[1];r+=" M "+d+" "+m,r+=" v "+Math.max(M-m,e)}return r};return function a(n){n.each(function(n){const l=a.el=d3_selection_1.select(this),r=n.index,o=n.closed,s=evaluate_1.default(t,n),c=l.selectAll(":scope > path.line").data(s);e=Math.max(s[0].scaledDx,1);const u=c.enter().append("path").attr("class","line line-"+r).attr("fill","none");c.merge(u).attr("stroke-width",e).attr("stroke",utils_1.default.color(n,r)).attr("opacity",o?.5:1).attr("d",function(t){return i(t,o)}).attr(n.attr),c.exit().remove()})}}exports.default=interval;