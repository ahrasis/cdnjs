"use strict";function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.TreeTable=void 0;var _react=_interopRequireWildcard(require("react")),_propTypes=_interopRequireDefault(require("prop-types")),_ClassNames=require("../utils/ClassNames"),_ObjectUtils=_interopRequireDefault(require("../utils/ObjectUtils")),_FilterUtils=_interopRequireDefault(require("../utils/FilterUtils")),_DomHandler=_interopRequireDefault(require("../utils/DomHandler")),_Paginator=require("../paginator/Paginator"),_TreeTableHeader=require("./TreeTableHeader"),_TreeTableBody=require("./TreeTableBody"),_TreeTableFooter=require("./TreeTableFooter"),_TreeTableScrollableView=require("./TreeTableScrollableView");function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _getRequireWildcardCache(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return _getRequireWildcardCache=function(){return e},e}function _interopRequireWildcard(e){if(e&&e.__esModule)return e;if(null===e||"object"!==_typeof(e)&&"function"!=typeof e)return{default:e};var t=_getRequireWildcardCache();if(t&&t.has(e))return t.get(e);var r,o,n={},l=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(r in e)Object.prototype.hasOwnProperty.call(e,r)&&((o=l?Object.getOwnPropertyDescriptor(e,r):null)&&(o.get||o.set)?Object.defineProperty(n,r,o):n[r]=e[r]);return n.default=e,t&&t.set(e,n),n}function _createForOfIteratorHelper(e,t){var r;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=_unsupportedIterableToArray(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var o=0,t=function(){};return{s:t,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(e){throw e},f:t}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var n,l=!0,i=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return l=e.done,e},e:function(e){i=!0,n=e},f:function(){try{l||null==r.return||r.return()}finally{if(i)throw n}}}}function ownKeys(t,e){var r,o=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),o.push.apply(o,r)),o}function _objectSpread(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?ownKeys(Object(r),!0).forEach(function(e){_defineProperty(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ownKeys(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray(e,t):void 0}}function _iterableToArray(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,o=new Array(t);r<t;r++)o[r]=e[r];return o}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),e}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _createSuper(r){var o=_isNativeReflectConstruct();return function(){var e,t=_getPrototypeOf(r);return _possibleConstructorReturn(this,o?(e=_getPrototypeOf(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments))}}function _possibleConstructorReturn(e,t){return!t||"object"!==_typeof(t)&&"function"!=typeof t?_assertThisInitialized(e):t}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var TreeTable=function(){_inherits(n,_react.Component);var o=_createSuper(n);function n(e){var t;_classCallCheck(this,n);var r={};return(t=o.call(this,e)).props.onToggle||(t.state={expandedKeys:t.props.expandedKeys}),t.props.onPage||(r.first=e.first,r.rows=e.rows),t.props.onSort||(r.sortField=e.sortField,r.sortOrder=e.sortOrder,r.multiSortMeta=e.multiSortMeta),t.props.onFilter||(r.filters=e.filters),Object.keys(r).length&&(t.state=r),t.onToggle=t.onToggle.bind(_assertThisInitialized(t)),t.onPageChange=t.onPageChange.bind(_assertThisInitialized(t)),t.onSort=t.onSort.bind(_assertThisInitialized(t)),t.onFilter=t.onFilter.bind(_assertThisInitialized(t)),t.onColumnResizeStart=t.onColumnResizeStart.bind(_assertThisInitialized(t)),t.onColumnDragStart=t.onColumnDragStart.bind(_assertThisInitialized(t)),t.onColumnDragOver=t.onColumnDragOver.bind(_assertThisInitialized(t)),t.onColumnDragLeave=t.onColumnDragLeave.bind(_assertThisInitialized(t)),t.onColumnDrop=t.onColumnDrop.bind(_assertThisInitialized(t)),t}return _createClass(n,[{key:"onToggle",value:function(e){this.props.onToggle?this.props.onToggle(e):this.setState({expandedKeys:e.value})}},{key:"onPageChange",value:function(e){this.props.onPage?this.props.onPage(e):this.setState({first:e.first,rows:e.rows})}},{key:"onSort",value:function(e){var t,r,o=e.sortField,n=this.getSortField()===e.sortField?-1*this.getSortOrder():this.props.defaultSortOrder;this.columnSortable=e.sortable,this.columnSortFunction=e.sortFunction,"multiple"===this.props.sortMode&&(t=e.originalEvent.metaKey||e.originalEvent.ctrlKey,(r=this.getMultiSortMeta())&&r instanceof Array&&(n=(e=r.find(function(e){return e.field===o}))?this.getCalculatedSortOrder(e.order):n),r&&t||(r=[]),r=this.addSortMeta({field:o,order:n},r)),this.props.onSort?this.props.onSort({sortField:o,sortOrder:n,multiSortMeta:r}):this.setState({sortField:o,sortOrder:n,first:0,multiSortMeta:r})}},{key:"getCalculatedSortOrder",value:function(e){return-1*e}},{key:"addSortMeta",value:function(e,t){for(var r=-1,o=0;o<t.length;o++)if(t[o].field===e.field){r=o;break}var n=_toConsumableArray(t);return 0<=r?n[r]=e:n.push(e),n}},{key:"sortSingle",value:function(e){return this.sortNodes(e)}},{key:"sortNodes",value:function(e){var o=this,t=_toConsumableArray(e);if(this.columnSortable&&"custom"===this.columnSortable&&this.columnSortFunction)t=this.columnSortFunction({field:this.getSortField(),order:this.getSortOrder()});else{t.sort(function(e,t){var r=o.getSortField(),e=_ObjectUtils.default.resolveFieldData(e.data,r),t=_ObjectUtils.default.resolveFieldData(t.data,r),r=null,r=null==e&&null!=t?-1:null!=e&&null==t?1:null==e&&null==t?0:"string"==typeof e&&"string"==typeof t?e.localeCompare(t,void 0,{numeric:!0}):e<t?-1:t<e?1:0;return o.getSortOrder()*r});for(var r=0;r<t.length;r++)t[r].children&&t[r].children.length&&(t[r].children=this.sortNodes(t[r].children))}return t}},{key:"sortMultiple",value:function(e){var t=this.getMultiSortMeta();return t?this.sortMultipleNodes(e,t):e}},{key:"sortMultipleNodes",value:function(e,r){var o=this,t=_toConsumableArray(e);t.sort(function(e,t){return o.multisortField(e,t,r,0)});for(var n=0;n<t.length;n++)t[n].children&&t[n].children.length&&(t[n].children=this.sortMultipleNodes(t[n].children,r));return t}},{key:"multisortField",value:function(e,t,r,o){var n=_ObjectUtils.default.resolveFieldData(e.data,r[o].field),l=_ObjectUtils.default.resolveFieldData(t.data,r[o].field),i=null;if(null==n&&null!=l)i=-1;else if(null!=n&&null==l)i=1;else if(null==n&&null==l)i=0;else{if(n===l)return r.length-1>o?this.multisortField(e,t,r,o+1):0;if(("string"==typeof n||n instanceof String)&&("string"==typeof l||l instanceof String))return r[o].order*n.localeCompare(l,void 0,{numeric:!0});i=n<l?-1:1}return r[o].order*i}},{key:"filter",value:function(e,t,r){this.onFilter({value:e,field:t,matchMode:r})}},{key:"onFilter",value:function(e){var t=this.getFilters(),t=t?_objectSpread({},t):{};this.isFilterBlank(e.value)?t[e.field]&&delete t[e.field]:t[e.field]={value:e.value,matchMode:e.matchMode},this.props.onFilter?this.props.onFilter({filters:t}):this.setState({first:0,filters:t})}},{key:"hasFilter",value:function(){var e=this.getFilters();return e&&0<Object.keys(e).length}},{key:"isFilterBlank",value:function(e){return null==e||("string"==typeof e&&0===e.trim().length||e instanceof Array&&0===e.length)}},{key:"onColumnResizeStart",value:function(e){var t=_DomHandler.default.getOffset(this.container).left;this.resizeColumn=e.columnEl,this.resizeColumnProps=e.column,this.columnResizing=!0,this.lastResizerHelperX=e.originalEvent.pageX-t+this.container.scrollLeft,this.bindColumnResizeEvents()}},{key:"onColumnResize",value:function(e){var t=_DomHandler.default.getOffset(this.container).left;_DomHandler.default.addClass(this.container,"p-unselectable-text"),this.resizerHelper.style.height=this.container.offsetHeight+"px",this.resizerHelper.style.top="0px",this.resizerHelper.style.left=e.pageX-t+this.container.scrollLeft+"px",this.resizerHelper.style.display="block"}},{key:"onColumnResizeEnd",value:function(){var e,t,r,o,n=this.resizerHelper.offsetLeft-this.lastResizerHelperX,l=this.resizeColumn.offsetWidth,i=l+n,a=this.resizeColumn.style.minWidth||15;l+n>parseInt(a,10)&&("fit"===this.props.columnResizeMode?(r=(t=this.resizeColumn.nextElementSibling).offsetWidth-n,15<i&&15<r&&(this.props.scrollable?(e=this.findParentScrollableView(this.resizeColumn),l=_DomHandler.default.findSingle(e,"table.p-treetable-scrollable-body-table"),a=_DomHandler.default.findSingle(e,"table.p-treetable-scrollable-header-table"),o=_DomHandler.default.findSingle(e,"table.p-treetable-scrollable-footer-table"),e=_DomHandler.default.index(this.resizeColumn),this.resizeColGroup(a,e,i,r),this.resizeColGroup(l,e,i,r),this.resizeColGroup(o,e,i,r)):(this.resizeColumn.style.width=i+"px",t&&(t.style.width=r+"px")))):"expand"===this.props.columnResizeMode&&(this.props.scrollable?(o=this.findParentScrollableView(this.resizeColumn),e=_DomHandler.default.findSingle(o,"table.p-treetable-scrollable-body-table"),t=_DomHandler.default.findSingle(o,"table.p-treetable-scrollable-header-table"),r=_DomHandler.default.findSingle(o,"table.p-treetable-scrollable-footer-table"),e.style.width=e.offsetWidth+n+"px",t.style.width=t.offsetWidth+n+"px",r&&(r.style.width=t.offsetWidth+n+"px"),o=_DomHandler.default.index(this.resizeColumn),this.resizeColGroup(t,o,i,null),this.resizeColGroup(e,o,i,null),this.resizeColGroup(r,o,i,null)):(this.table.style.width=this.table.offsetWidth+n+"px",this.resizeColumn.style.width=i+"px")),this.props.onColumnResizeEnd&&this.props.onColumnResizeEnd({element:this.resizeColumn,column:this.resizeColumnProps,delta:n})),this.resizerHelper.style.display="none",this.resizeColumn=null,this.resizeColumnProps=null,_DomHandler.default.removeClass(this.container,"p-unselectable-text"),this.unbindColumnResizeEvents()}},{key:"findParentScrollableView",value:function(e){if(e){for(var t=e.parentElement;t&&!_DomHandler.default.hasClass(t,"p-treetable-scrollable-view");)t=t.parentElement;return t}return null}},{key:"resizeColGroup",value:function(e,t,r,o){if(e){e="COLGROUP"===e.children[0].nodeName?e.children[0]:null;if(!e)throw new Error("Scrollable tables require a colgroup to support resizable columns");e=e.children[t],t=e.nextElementSibling;e.style.width=r+"px",t&&o&&(t.style.width=o+"px")}}},{key:"bindColumnResizeEvents",value:function(){var t=this;this.documentColumnResizeListener=document.addEventListener("mousemove",function(e){t.columnResizing&&t.onColumnResize(e)}),this.documentColumnResizeEndListener=document.addEventListener("mouseup",function(e){t.columnResizing&&(t.columnResizing=!1,t.onColumnResizeEnd(e))})}},{key:"unbindColumnResizeEvents",value:function(){document.removeEventListener("document",this.documentColumnResizeListener),document.removeEventListener("document",this.documentColumnResizeEndListener)}},{key:"onColumnDragStart",value:function(e){this.columnResizing?e.preventDefault():(this.iconWidth=_DomHandler.default.getHiddenElementOuterWidth(this.reorderIndicatorUp),this.iconHeight=_DomHandler.default.getHiddenElementOuterHeight(this.reorderIndicatorUp),this.draggedColumn=this.findParentHeader(e.target),e.dataTransfer.setData("text","b"))}},{key:"onColumnDragOver",value:function(e){var t,r,o,n,l=this.findParentHeader(e.target);this.props.reorderableColumns&&this.draggedColumn&&l&&(e.preventDefault(),t=_DomHandler.default.getOffset(this.container),r=_DomHandler.default.getOffset(l),this.draggedColumn!==l&&(o=r.left-t.left,n=r.left+l.offsetWidth/2,this.reorderIndicatorUp.style.top=r.top-t.top-(this.iconHeight-1)+"px",this.reorderIndicatorDown.style.top=r.top-t.top+l.offsetHeight+"px",e.pageX>n?(this.reorderIndicatorUp.style.left=o+l.offsetWidth-Math.ceil(this.iconWidth/2)+"px",this.reorderIndicatorDown.style.left=o+l.offsetWidth-Math.ceil(this.iconWidth/2)+"px",this.dropPosition=1):(this.reorderIndicatorUp.style.left=o-Math.ceil(this.iconWidth/2)+"px",this.reorderIndicatorDown.style.left=o-Math.ceil(this.iconWidth/2)+"px",this.dropPosition=-1),this.reorderIndicatorUp.style.display="block",this.reorderIndicatorDown.style.display="block"))}},{key:"onColumnDragLeave",value:function(e){this.props.reorderableColumns&&this.draggedColumn&&(e.preventDefault(),this.reorderIndicatorUp.style.display="none",this.reorderIndicatorDown.style.display="none")}},{key:"onColumnDrop",value:function(e){if(e.preventDefault(),this.draggedColumn){var t=_DomHandler.default.index(this.draggedColumn),r=_DomHandler.default.index(this.findParentHeader(e.target)),e=t!==r;if(e&&(r-t==1&&-1===this.dropPosition||t-r==1&&1===this.dropPosition)&&(e=!1),e){e=this.state.columnOrder?this.getColumns():_react.default.Children.toArray(this.props.children);_ObjectUtils.default.reorderArray(e,t,r);var o=[],n=_createForOfIteratorHelper(e);try{for(n.s();!(l=n.n()).done;){var l=l.value;o.push(l.props.columnKey||l.props.field)}}catch(e){n.e(e)}finally{n.f()}this.setState({columnOrder:o}),this.props.onColReorder&&this.props.onColReorder({dragIndex:t,dropIndex:r,columns:e})}this.reorderIndicatorUp.style.display="none",this.reorderIndicatorDown.style.display="none",this.draggedColumn.draggable=!1,this.draggedColumn=null,this.dropPosition=null}}},{key:"findParentHeader",value:function(e){if("TH"===e.nodeName)return e;for(var t=e.parentElement;"TH"!==t.nodeName&&(t=t.parentElement););return t}},{key:"getExpandedKeys",value:function(){return(this.props.onToggle?this.props:this.state).expandedKeys}},{key:"getFirst",value:function(){return(this.props.onPage?this.props:this.state).first}},{key:"getRows",value:function(){return(this.props.onPage?this.props:this.state).rows}},{key:"getSortField",value:function(){return(this.props.onSort?this.props:this.state).sortField}},{key:"getSortOrder",value:function(){return(this.props.onSort?this.props:this.state).sortOrder}},{key:"getMultiSortMeta",value:function(){return(this.props.onSort?this.props:this.state).multiSortMeta}},{key:"getFilters",value:function(){return(this.props.onFilter?this.props:this.state).filters}},{key:"findColumnByKey",value:function(e,t){if(e&&e.length)for(var r=0;r<e.length;r++){var o=e[r];if(o.props.columnKey===t||o.props.field===t)return o}return null}},{key:"getColumns",value:function(){var e=_react.default.Children.toArray(this.props.children);if(this.props.reorderableColumns&&this.state.columnOrder){for(var t=[],r=0;r<this.state.columnOrder.length;r++)t.push(this.findColumnByKey(e,this.state.columnOrder[r]));return t}return e}},{key:"getTotalRecords",value:function(e){return this.props.lazy?this.props.totalRecords:e?e.length:0}},{key:"isSingleSelectionMode",value:function(){return this.props.selectionMode&&"single"===this.props.selectionMode}},{key:"isMultipleSelectionMode",value:function(){return this.props.selectionMode&&"multiple"===this.props.selectionMode}},{key:"isRowSelectionMode",value:function(){return this.isSingleSelectionMode()||this.isMultipleSelectionMode()}},{key:"getFrozenColumns",value:function(e){var t=null,r=_createForOfIteratorHelper(e);try{for(r.s();!(o=r.n()).done;){var o=o.value;o.props.frozen&&(t=t||[]).push(o)}}catch(e){r.e(e)}finally{r.f()}return t}},{key:"getScrollableColumns",value:function(e){var t=null,r=_createForOfIteratorHelper(e);try{for(r.s();!(o=r.n()).done;){var o=o.value;o.props.frozen||(t=t||[]).push(o)}}catch(e){r.e(e)}finally{r.f()}return t}},{key:"filterLocal",value:function(e){var t=[],r=this.getFilters(),o=_react.default.Children.toArray(this.props.children),n="strict"===this.props.filterMode,l=_createForOfIteratorHelper(e);try{for(l.s();!(y=l.n()).done;){for(var i=_objectSpread({},y.value),a=!0,s=!1,p=0;p<o.length;p++){var u=o[p],d=r?r[u.props.field]:null,c=u.props.field,f=void 0;if(d){var h=d.matchMode||u.props.filterMatchMode,f={filterField:c,filterValue:d.value,filterConstraint:"custom"===h?u.props.filterFunction:_FilterUtils.default[h],isStrictMode:n};if((!n||this.findFilteredNodes(i,f)||this.isFilterMatched(i,f))&&(n||this.isFilterMatched(i,f)||this.findFilteredNodes(i,f))||(a=!1),!a)break}this.props.globalFilter&&!s&&(h=_objectSpread({},i),f={filterField:c,filterValue:this.props.globalFilter,filterConstraint:_FilterUtils.default.contains,isStrictMode:n},(n&&(this.findFilteredNodes(h,f)||this.isFilterMatched(h,f))||!n&&(this.isFilterMatched(h,f)||this.findFilteredNodes(h,f)))&&(s=!0,i=h))}var y=a;this.props.globalFilter&&(y=a&&s),y&&t.push(i)}}catch(e){l.e(e)}finally{l.f()}return t}},{key:"findFilteredNodes",value:function(e,t){if(e){var r=!1;if(e.children){var o=_toConsumableArray(e.children);e.children=[];var n=_createForOfIteratorHelper(o);try{for(n.s();!(l=n.n()).done;){var l=_objectSpread({},l.value);this.isFilterMatched(l,t)&&(r=!0,e.children.push(l))}}catch(e){n.e(e)}finally{n.f()}}if(r)return!0}}},{key:"isFilterMatched",value:function(e,t){var r=t.filterField,o=t.filterValue,n=t.filterConstraint,l=t.isStrictMode,t=!1;return n(_ObjectUtils.default.resolveFieldData(e.data,r),o,this.props.filterLocale)&&(t=!0),t&&(!l||this.isNodeLeaf(e))||(t=this.findFilteredNodes(e,{filterField:r,filterValue:o,filterConstraint:n,isStrictMode:l})||t),t}},{key:"isNodeLeaf",value:function(e){return!1!==e.leaf&&!(e.children&&e.children.length)}},{key:"processValue",value:function(){var e,t=this.props.value;return this.props.lazy||t&&t.length&&((this.getSortField()||this.getMultiSortMeta())&&("single"===this.props.sortMode?t=this.sortSingle(t):"multiple"===this.props.sortMode&&(t=this.sortMultiple(t))),((e=this.getFilters())||this.props.globalFilter)&&(t=this.filterLocal(t,e))),t}},{key:"createTableHeader",value:function(e,t){return _react.default.createElement(_TreeTableHeader.TreeTableHeader,{columns:e,columnGroup:t,tabIndex:this.props.tabIndex,onSort:this.onSort,sortField:this.getSortField(),sortOrder:this.getSortOrder(),multiSortMeta:this.getMultiSortMeta(),resizableColumns:this.props.resizableColumns,onResizeStart:this.onColumnResizeStart,reorderableColumns:this.props.reorderableColumns,onDragStart:this.onColumnDragStart,onDragOver:this.onColumnDragOver,onDragLeave:this.onColumnDragLeave,onDrop:this.onColumnDrop,onFilter:this.onFilter,filters:this.getFilters()})}},{key:"createTableFooter",value:function(e,t){return _react.default.createElement(_TreeTableFooter.TreeTableFooter,{columns:e,columnGroup:t})}},{key:"createTableBody",value:function(e,t){return _react.default.createElement(_TreeTableBody.TreeTableBody,{value:e,columns:t,expandedKeys:this.getExpandedKeys(),onToggle:this.onToggle,onExpand:this.props.onExpand,onCollapse:this.props.onCollapse,paginator:this.props.paginator,first:this.getFirst(),rows:this.getRows(),selectionMode:this.props.selectionMode,selectionKeys:this.props.selectionKeys,onSelectionChange:this.props.onSelectionChange,metaKeySelection:this.props.metaKeySelection,onRowClick:this.props.onRowClick,onSelect:this.props.onSelect,onUnselect:this.props.onUnselect,propagateSelectionUp:this.props.propagateSelectionUp,propagateSelectionDown:this.props.propagateSelectionDown,lazy:this.props.lazy,rowClassName:this.props.rowClassName,emptyMessage:this.props.emptyMessage,loading:this.props.loading,contextMenuSelectionKey:this.props.contextMenuSelectionKey,onContextMenuSelectionChange:this.props.onContextMenuSelectionChange,onContextMenu:this.props.onContextMenu})}},{key:"createPaginator",value:function(e,t){e="p-paginator-"+e;return _react.default.createElement(_Paginator.Paginator,{first:this.getFirst(),rows:this.getRows(),pageLinkSize:this.props.pageLinkSize,className:e,onPageChange:this.onPageChange,template:this.props.paginatorTemplate,totalRecords:t,rowsPerPageOptions:this.props.rowsPerPageOptions,currentPageReportTemplate:this.props.currentPageReportTemplate,leftContent:this.props.paginatorLeft,rightContent:this.props.paginatorRight,alwaysShow:this.props.alwaysShowPaginator,dropdownAppendTo:this.props.paginatorDropdownAppendTo})}},{key:"createScrollableView",value:function(e,t,r,o,n){o=this.createTableHeader(t,o),n=this.createTableFooter(t,n),e=this.createTableBody(e,t);return _react.default.createElement(_TreeTableScrollableView.TreeTableScrollableView,{columns:t,header:o,body:e,footer:n,scrollHeight:this.props.scrollHeight,frozen:r,frozenWidth:this.props.frozenWidth})}},{key:"renderScrollableTable",value:function(e){var t,r=this.getColumns(),o=this.getFrozenColumns(r),r=o?this.getScrollableColumns(r):r;return o&&(t=this.createScrollableView(e,o,!0,this.props.frozenHeaderColumnGroup,this.props.frozenFooterColumnGroup)),r=this.createScrollableView(e,r,!1,this.props.headerColumnGroup,this.props.footerColumnGroup),_react.default.createElement("div",{className:"p-treetable-scrollable-wrapper"},t,r)}},{key:"renderRegularTable",value:function(e){var t=this,r=this.getColumns(),o=this.createTableHeader(r,this.props.headerColumnGroup),n=this.createTableFooter(r,this.props.footerColumnGroup),r=this.createTableBody(e,r);return _react.default.createElement("div",{className:"p-treetable-wrapper"},_react.default.createElement("table",{style:this.props.tableStyle,className:this.props.tableClassName,ref:function(e){return t.table=e}},o,n,r))}},{key:"renderTable",value:function(e){return this.props.scrollable?this.renderScrollableTable(e):this.renderRegularTable(e)}},{key:"renderLoader",value:function(){if(this.props.loading){var e=(0,_ClassNames.classNames)("p-treetable-loading-icon pi-spin",this.props.loadingIcon);return _react.default.createElement("div",{className:"p-treetable-loading"},_react.default.createElement("div",{className:"p-treetable-loading-overlay p-component-overlay"},_react.default.createElement("i",{className:e})))}return null}},{key:"render",value:function(){var t=this,e=this.processValue(),r=(0,_ClassNames.classNames)("p-treetable p-component",{"p-treetable-hoverable-rows":this.isRowSelectionMode(),"p-treetable-resizable":this.props.resizableColumns,"p-treetable-resizable-fit":this.props.resizableColumns&&"fit"===this.props.columnResizeMode,"p-treetable-auto-layout":this.props.autoLayout},this.props.className),o=this.renderTable(e),n=this.getTotalRecords(e),l=this.props.header&&_react.default.createElement("div",{className:"p-treetable-header"},this.props.header),i=this.props.footer&&_react.default.createElement("div",{className:"p-treetable-footer"},this.props.footer),a=this.props.paginator&&"bottom"!==this.props.paginatorPosition&&this.createPaginator("top",n),s=this.props.paginator&&"top"!==this.props.paginatorPosition&&this.createPaginator("bottom",n),p=this.renderLoader(),u=this.props.resizableColumns&&_react.default.createElement("div",{ref:function(e){t.resizerHelper=e},className:"p-column-resizer-helper",style:{display:"none"}}),e=this.props.reorderableColumns&&_react.default.createElement("span",{ref:function(e){return t.reorderIndicatorUp=e},className:"pi pi-arrow-down p-datatable-reorder-indicator-up",style:{position:"absolute",display:"none"}}),n=this.props.reorderableColumns&&_react.default.createElement("span",{ref:function(e){return t.reorderIndicatorDown=e},className:"pi pi-arrow-up p-datatable-reorder-indicator-down",style:{position:"absolute",display:"none"}});return _react.default.createElement("div",{id:this.props.id,className:r,style:this.props.style,ref:function(e){return t.container=e},"data-scrollselectors":".p-treetable-scrollable-body"},p,l,a,o,s,i,u,e,n)}}]),n}();_defineProperty(exports.TreeTable=TreeTable,"defaultProps",{id:null,value:null,header:null,footer:null,style:null,className:null,tableStyle:null,tableClassName:null,expandedKeys:null,paginator:!1,paginatorPosition:"bottom",alwaysShowPaginator:!0,paginatorTemplate:"FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink RowsPerPageDropdown",paginatorLeft:null,paginatorRight:null,paginatorDropdownAppendTo:null,pageLinkSize:5,rowsPerPageOptions:null,currentPageReportTemplate:"({currentPage} of {totalPages})",first:null,rows:null,totalRecords:null,lazy:!1,sortField:null,sortOrder:null,multiSortMeta:null,sortMode:"single",defaultSortOrder:1,selectionMode:null,selectionKeys:null,contextMenuSelectionKey:null,metaKeySelection:!0,propagateSelectionUp:!0,propagateSelectionDown:!0,autoLayout:!1,rowClassName:null,loading:!1,loadingIcon:"pi pi-spinner",tabIndex:0,scrollable:!1,scrollHeight:null,reorderableColumns:!1,headerColumnGroup:null,footerColumnGroup:null,frozenHeaderColumnGroup:null,frozenFooterColumnGroup:null,frozenWidth:null,resizableColumns:!1,columnResizeMode:"fit",emptyMessage:"No records found",filters:null,globalFilter:null,filterMode:"lenient",filterLocale:void 0,onFilter:null,onExpand:null,onCollapse:null,onToggle:null,onPage:null,onSort:null,onSelect:null,onUnselect:null,onRowClick:null,onSelectionChange:null,onContextMenuSelectionChange:null,onColumnResizeEnd:null,onColReorder:null,onContextMenu:null}),_defineProperty(TreeTable,"propTypes",{id:_propTypes.default.string,value:_propTypes.default.any,header:_propTypes.default.any,footer:_propTypes.default.any,style:_propTypes.default.object,className:_propTypes.default.string,tableStyle:_propTypes.default.any,tableClassName:_propTypes.default.string,expandedKeys:_propTypes.default.object,paginator:_propTypes.default.bool,paginatorPosition:_propTypes.default.string,alwaysShowPaginator:_propTypes.default.bool,paginatorTemplate:_propTypes.default.string,paginatorLeft:_propTypes.default.any,paginatorRight:_propTypes.default.any,paginatorDropdownAppendTo:_propTypes.default.any,pageLinkSize:_propTypes.default.number,rowsPerPageOptions:_propTypes.default.array,currentPageReportTemplate:_propTypes.default.string,first:_propTypes.default.number,rows:_propTypes.default.number,totalRecords:_propTypes.default.number,lazy:_propTypes.default.bool,sortField:_propTypes.default.string,sortOrder:_propTypes.default.number,multiSortMeta:_propTypes.default.array,sortMode:_propTypes.default.string,defaultSortOrder:_propTypes.default.number,selectionMode:_propTypes.default.string,selectionKeys:_propTypes.default.any,contextMenuSelectionKey:_propTypes.default.any,metaKeySelection:_propTypes.default.bool,propagateSelectionUp:_propTypes.default.bool,propagateSelectionDown:_propTypes.default.bool,autoLayout:_propTypes.default.bool,rowClassName:_propTypes.default.func,loading:_propTypes.default.bool,loadingIcon:_propTypes.default.string,tabIndex:_propTypes.default.number,scrollable:_propTypes.default.bool,scrollHeight:_propTypes.default.string,reorderableColumns:_propTypes.default.bool,headerColumnGroup:_propTypes.default.any,footerColumnGroup:_propTypes.default.any,frozenHeaderColumnGroup:_propTypes.default.any,frozenFooterColumnGroup:_propTypes.default.any,frozenWidth:_propTypes.default.string,resizableColumns:_propTypes.default.bool,columnResizeMode:_propTypes.default.string,emptyMessage:_propTypes.default.string,filters:_propTypes.default.object,globalFilter:_propTypes.default.any,filterMode:_propTypes.default.string,filterLocale:_propTypes.default.string,onFilter:_propTypes.default.func,onExpand:_propTypes.default.func,onCollapse:_propTypes.default.func,onToggle:_propTypes.default.func,onPage:_propTypes.default.func,onSort:_propTypes.default.func,onSelect:_propTypes.default.func,onUnselect:_propTypes.default.func,onRowClick:_propTypes.default.func,onSelectionChange:_propTypes.default.func,onContextMenuSelectionChange:_propTypes.default.func,onColumnResizeEnd:_propTypes.default.func,onColReorder:_propTypes.default.func,onContextMenu:_propTypes.default.func});