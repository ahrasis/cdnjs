"use strict";function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.confirmDialog=confirmDialog,exports.ConfirmDialog=void 0;var _react=_interopRequireWildcard(require("react")),_reactDom=_interopRequireDefault(require("react-dom")),_propTypes=_interopRequireDefault(require("prop-types")),_ClassNames=require("../utils/ClassNames"),_Dialog=require("../dialog/Dialog"),_Button=require("../button/Button"),_DomHandler=_interopRequireDefault(require("../utils/DomHandler")),_ObjectUtils=_interopRequireDefault(require("../utils/ObjectUtils")),_Locale=require("../api/Locale");function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _getRequireWildcardCache(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return _getRequireWildcardCache=function(){return e},e}function _interopRequireWildcard(e){if(e&&e.__esModule)return e;if(null===e||"object"!==_typeof(e)&&"function"!=typeof e)return{default:e};var t=_getRequireWildcardCache();if(t&&t.has(e))return t.get(e);var r,o,n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(r in e)Object.prototype.hasOwnProperty.call(e,r)&&((o=i?Object.getOwnPropertyDescriptor(e,r):null)&&(o.get||o.set)?Object.defineProperty(n,r,o):n[r]=e[r]);return n.default=e,t&&t.set(e,n),n}function _extends(){return(_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r,o=arguments[t];for(r in o)Object.prototype.hasOwnProperty.call(o,r)&&(e[r]=o[r])}return e}).apply(this,arguments)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),e}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _createSuper(r){var o=_isNativeReflectConstruct();return function(){var e,t=_getPrototypeOf(r);return _possibleConstructorReturn(this,o?(e=_getPrototypeOf(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments))}}function _possibleConstructorReturn(e,t){return!t||"object"!==_typeof(t)&&"function"!=typeof t?_assertThisInitialized(e):t}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ownKeys(t,e){var r,o=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),o.push.apply(o,r)),o}function _objectSpread(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?ownKeys(Object(r),!0).forEach(function(e){_defineProperty(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ownKeys(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function _defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function confirmDialog(t){var e=t.appendTo||document.body,r=document.createDocumentFragment();_DomHandler.default.appendChild(r,e),t=_objectSpread(_objectSpread({},t),{visible:void 0===t.visible||t.visible});var o=_react.default.createElement(ConfirmDialog,t);_reactDom.default.render(o,r);function n(e){t=_objectSpread(_objectSpread({},t),e),_reactDom.default.render(_react.default.cloneElement(o,t),r)}return{_destroy:function(){_reactDom.default.unmountComponentAtNode(r)},show:function(){n({visible:!0,onHide:function(){n({visible:!1})}})},hide:function(){n({visible:!1})},update:function(e){n(e)}}}var ConfirmDialog=function(){_inherits(i,_react.Component);var r=_createSuper(i);function i(e){var t;return _classCallCheck(this,i),(t=r.call(this,e)).state={visible:e.visible},t.appendTo=e.appendTo||document.body,t.reject=t.reject.bind(_assertThisInitialized(t)),t.accept=t.accept.bind(_assertThisInitialized(t)),t.hide=t.hide.bind(_assertThisInitialized(t)),t}return _createClass(i,[{key:"acceptLabel",value:function(){return this.props.acceptLabel||(0,_Locale.localeOption)("accept")}},{key:"rejectLabel",value:function(){return this.props.rejectLabel||(0,_Locale.localeOption)("reject")}},{key:"accept",value:function(){this.props.accept&&this.props.accept(),this.hide("accept")}},{key:"reject",value:function(){this.props.reject&&this.props.reject(),this.hide("reject")}},{key:"show",value:function(){this.setState({visible:!0})}},{key:"hide",value:function(e){var t=this;this.setState({visible:!1},function(){t.props.onHide&&t.props.onHide(e)})}},{key:"componentDidUpdate",value:function(e){e.visible!==this.props.visible&&this.setState({visible:this.props.visible})}},{key:"renderFooter",value:function(){var e=(0,_ClassNames.classNames)("p-confirm-dialog-accept",this.props.acceptClassName),t=(0,_ClassNames.classNames)("p-confirm-dialog-reject",{"p-button-text":!this.props.rejectClassName},this.props.rejectClassName);return this.props.footer?_ObjectUtils.default.getJSXElement(this.props.footer,this.props):_react.default.createElement(_react.default.Fragment,null,_react.default.createElement(_Button.Button,{label:this.rejectLabel(),icon:this.props.rejectIcon,className:t,onClick:this.reject}),_react.default.createElement(_Button.Button,{label:this.acceptLabel(),icon:this.props.acceptIcon,className:e,onClick:this.accept,autoFocus:!0}))}},{key:"renderElement",value:function(){var e=(0,_ClassNames.classNames)("p-confirm-dialog",this.props.className),t=(0,_ClassNames.classNames)("p-confirm-dialog-icon",this.props.icon),r=_ObjectUtils.default.findDiffKeys(this.props,i.defaultProps),o=_ObjectUtils.default.getJSXElement(this.props.message,this.props),n=this.renderFooter();return _react.default.createElement(_Dialog.Dialog,_extends({visible:this.state.visible},r,{className:e,footer:n,onHide:this.hide}),_react.default.createElement("i",{className:t}),_react.default.createElement("span",{className:"p-confirm-dialog-message"},o))}},{key:"render",value:function(){var e=this.renderElement();return _reactDom.default.createPortal(e,this.appendTo)}}]),i}();_defineProperty(exports.ConfirmDialog=ConfirmDialog,"defaultProps",{visible:!1,message:null,rejectLabel:null,acceptLabel:null,icon:null,rejectIcon:null,acceptIcon:null,rejectClassName:null,acceptClassName:null,className:null,appendTo:null,footer:null,onHide:null}),_defineProperty(ConfirmDialog,"propTypes",{visible:_propTypes.default.bool,message:_propTypes.default.any,rejectLabel:_propTypes.default.string,acceptLabel:_propTypes.default.string,icon:_propTypes.default.string,rejectIcon:_propTypes.default.string,acceptIcon:_propTypes.default.string,rejectClassName:_propTypes.default.string,acceptClassName:_propTypes.default.string,appendTo:_propTypes.default.any,className:_propTypes.default.string,footer:_propTypes.default.any,onHide:_propTypes.default.func});