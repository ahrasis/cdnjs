!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(require("@firebase/app")):"function"==typeof define&&define.amd?define(["@firebase/app"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self).firebase)}(this,function(Ad){"use strict";try{(function(){var u,t,e=(t=Ad)&&"object"==typeof t&&"default"in t?t:{default:t};function s(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),i=0,e=0;e<n;e++)for(var o=arguments[e],s=0,u=o.length;s<u;s++,i++)r[i]=o[s];return r}function n(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(!(e<t.logLevel)){var i=(new Date).toISOString(),o=a[e];if(!o)throw new Error("Attempted to log a message with an invalid logType (value: "+e+")");console[o].apply(console,s(["["+i+"]  "+t.name+":"],n))}}(ge=u=u||{})[ge.DEBUG=0]="DEBUG",ge[ge.VERBOSE=1]="VERBOSE",ge[ge.INFO=2]="INFO",ge[ge.WARN=3]="WARN",ge[ge.ERROR=4]="ERROR",ge[ge.SILENT=5]="SILENT";var r={debug:u.DEBUG,verbose:u.VERBOSE,info:u.INFO,warn:u.WARN,error:u.ERROR,silent:u.SILENT},i=u.INFO,a=((me={})[u.DEBUG]="log",me[u.VERBOSE]="log",me[u.INFO]="info",me[u.WARN]="warn",me[u.ERROR]="error",me),o=(Object.defineProperty(c.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in u))throw new TypeError('Invalid value "'+t+'" assigned to `logLevel`');this._logLevel=t},enumerable:!1,configurable:!0}),c.prototype.setLogLevel=function(t){this._logLevel="string"==typeof t?r[t]:t},Object.defineProperty(c.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(t){this._userLogHandler=t},enumerable:!1,configurable:!0}),c.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,s([this,u.DEBUG],t)),this._logHandler.apply(this,s([this,u.DEBUG],t))},c.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,s([this,u.VERBOSE],t)),this._logHandler.apply(this,s([this,u.VERBOSE],t))},c.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,s([this,u.INFO],t)),this._logHandler.apply(this,s([this,u.INFO],t))},c.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,s([this,u.WARN],t)),this._logHandler.apply(this,s([this,u.WARN],t))},c.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,s([this,u.ERROR],t)),this._logHandler.apply(this,s([this,u.ERROR],t))},c);function c(t){this.name=t,this._logLevel=i,this._logHandler=n,this._userLogHandler=null}var h=function(t,e){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function f(t,e){function n(){this.constructor=t}h(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}function y(t,s,u,a){return new(u=u||Promise)(function(n,e){function r(t){try{o(a.next(t))}catch(t){e(t)}}function i(t){try{o(a.throw(t))}catch(t){e(t)}}function o(t){var e;t.done?n(t.value):((e=t.value)instanceof u?e:new u(function(t){t(e)})).then(r,i)}o((a=a.apply(t,s||[])).next())})}function v(n,r){var i,o,s,u={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},t={next:e(0),throw:e(1),return:e(2)};return"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(e){return function(t){return function(e){if(i)throw new TypeError("Generator is already executing.");for(;u;)try{if(i=1,o&&(s=2&e[0]?o.return:e[0]?o.throw||((s=o.return)&&s.call(o),0):o.next)&&!(s=s.call(o,e[1])).done)return s;switch(o=0,s&&(e=[2&e[0],s.value]),e[0]){case 0:case 1:s=e;break;case 4:return u.label++,{value:e[1],done:!1};case 5:u.label++,o=e[1],e=[0];continue;case 7:e=u.ops.pop(),u.trys.pop();continue;default:if(!(s=0<(s=u.trys).length&&s[s.length-1])&&(6===e[0]||2===e[0])){u=0;continue}if(3===e[0]&&(!s||e[1]>s[0]&&e[1]<s[3])){u.label=e[1];break}if(6===e[0]&&u.label<s[1]){u.label=s[1],s=e;break}if(s&&u.label<s[2]){u.label=s[2],u.ops.push(e);break}s[2]&&u.ops.pop(),u.trys.pop();continue}e=r.call(n,u)}catch(t){e=[6,t],o=0}finally{i=s=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}}function l(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),i=0,e=0;e<n;e++)for(var o=arguments[e],s=0,u=o.length;s<u;s++,i++)r[i]=o[s];return r}function p(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}var d,g="FirebaseError",m=(f(w,d=Error),w);function w(t,e,n){return(e=d.call(this,e)||this).code=t,e.customData=n,e.name=g,Object.setPrototypeOf(e,w.prototype),Error.captureStackTrace&&Error.captureStackTrace(e,b.prototype.create),e}var b=(_.prototype.create=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r,i=e[0]||{},o=this.service+"/"+t,t=(t=this.errors[t])?(r=i,t.replace(E,function(t,e){var n=r[e];return null!=n?String(n):"<"+e+"?>"})):"Error",t=this.serviceName+": "+t+" ("+o+").";return new m(o,t,i)},_);function _(t,e,n){this.service=t,this.serviceName=e,this.errors=n}var E=/\{\$([^}]+)}/g,I=function(t,e){return(I=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function T(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}var A="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},N=A||self;function O(){}function S(t){var e=typeof t;return"array"==(e="object"!=e?e:t?Array.isArray(t)?"array":e:"null")||"object"==e&&"number"==typeof t.length}function R(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var k="closure_uid_"+(1e9*Math.random()>>>0),L=0;function D(t,e,n){return t.call.apply(t.bind,arguments)}function P(e,n,t){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var t=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(t,r),e.apply(n,t)}}return function(){return e.apply(n,arguments)}}function C(t,e,n){return(C=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?D:P).apply(null,arguments)}function U(e){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function V(){return Date.now()}function x(t,o){function e(){}e.prototype=o.prototype,t.X=o.prototype,t.prototype=new e,(t.prototype.constructor=t).Kb=function(t,e,n){for(var r=Array(arguments.length-2),i=2;i<arguments.length;i++)r[i-2]=arguments[i];return o.prototype[e].apply(t,r)}}function M(){this.j=this.j,this.i=this.i}M.prototype.j=!1,M.prototype.ja=function(){!this.j&&(this.j=!0,this.G(),0)&&(Object.prototype.hasOwnProperty.call(this,k)&&this[k]||(this[k]=++L))},M.prototype.G=function(){if(this.i)for(;this.i.length;)this.i.shift()()};var j=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},q=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"==typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)};function F(){return Array.prototype.concat.apply([],arguments)}function B(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}function G(t){return/^[\s\xa0]*$/.test(t)}var z=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function H(t,e){return-1!=t.indexOf(e)}function W(t,e){return t<e?-1:e<t?1:0}var Y=N.navigator;function Q(t,e,n){for(var r in t)e.call(n,t[r],r,t)}function K(t){var e,n={};for(e in t)n[e]=t[e];return n}ut=(Y=Y&&Y.userAgent)?Y:"";var X="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function J(t){for(var e,n,r=1;r<arguments.length;r++){for(e in n=arguments[r])t[e]=n[e];for(var i=0;i<X.length;i++)e=X[i],Object.prototype.hasOwnProperty.call(n,e)&&(t[e]=n[e])}}function $(t){return $[" "](t),t}$[" "]=O;var Z,tt=H(ut,"Opera"),et=H(ut,"Trident")||H(ut,"MSIE"),nt=H(ut,"Edge"),rt=nt||et,it=H(ut,"Gecko")&&!(H(ut.toLowerCase(),"webkit")&&!H(ut,"Edge"))&&!(H(ut,"Trident")||H(ut,"MSIE"))&&!H(ut,"Edge"),ot=H(ut.toLowerCase(),"webkit")&&!H(ut,"Edge");function st(){var t=N.document;return t?t.documentMode:void 0}var Y="",ut=(ut=ut,it?/rv:([^\);]+)(\)|;)/.exec(ut):nt?/Edge\/([\d\.]+)/.exec(ut):et?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(ut):ot?/WebKit\/(\S+)/.exec(ut):tt?/(?:Version)[ \/]?(\S+)/.exec(ut):void 0);ut&&(Y=ut?ut[1]:""),Z=et&&null!=(ut=st())&&ut>parseFloat(Y)?String(ut):Y;var at={};function ct(u){return t=u,e=function(){for(var t=0,e=z(String(Z)).split("."),n=z(String(u)).split("."),r=Math.max(e.length,n.length),i=0;0==t&&i<r;i++)for(var o=e[i]||"",s=n[i]||"";o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],(0!=o[0].length||0!=s[0].length)&&(t=W(0==o[1].length?0:parseInt(o[1],10),0==s[1].length?0:parseInt(s[1],10))||W(0==o[2].length,0==s[2].length)||W(o[2],s[2]),o=o[3],s=s[3],0==t););return 0<=t},n=at,Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e();var t,e,n}var ht=N.document&&et&&(st()||parseInt(Z,10))||void 0,ft=!et||9<=Number(ht),lt=et&&!ct("9"),pt=function(){if(!N.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{N.addEventListener("test",O,e),N.removeEventListener("test",O,e)}catch(t){}return t}();function dt(t,e){this.type=t,this.a=this.target=e,this.defaultPrevented=!1}function yt(t,e){if(dt.call(this,t?t.type:""),this.relatedTarget=this.a=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.c=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.a=e,e=t.relatedTarget){if(it){t:{try{$(e.nodeName);var i=!0;break t}catch(t){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:vt[t.pointerType]||"",(this.c=t).defaultPrevented&&this.b()}}dt.prototype.b=function(){this.defaultPrevented=!0},x(yt,dt);var vt={2:"touch",3:"pen",4:"mouse"};yt.prototype.b=function(){yt.X.b.call(this);var t=this.c;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,lt)try{(t.ctrlKey||112<=t.keyCode&&t.keyCode<=123)&&(t.keyCode=-1)}catch(t){}};var gt="closure_listenable_"+(1e6*Math.random()|0),mt=0;function wt(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.ca=i,this.key=++mt,this.Y=this.Z=!1}function bt(t){t.Y=!0,t.listener=null,t.proxy=null,t.src=null,t.ca=null}function _t(t){this.src=t,this.a={},this.b=0}function Et(t,e){var n,r,i,o=e.type;o in t.a&&(n=t.a[o],(i=0<=(r=j(n,e)))&&Array.prototype.splice.call(n,r,1),i&&(bt(e),0==t.a[o].length&&(delete t.a[o],t.b--)))}function It(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.Y&&o.listener==e&&o.capture==!!n&&o.ca==r)return i}return-1}_t.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var s=It(t,e,r,i);return-1<s?(e=t[s],n||(e.Z=!1)):((e=new wt(e,this.src,o,!!r,i)).Z=n,t.push(e)),e};var Tt="closure_lm_"+(1e6*Math.random()|0),At={};function Nt(t,e,n,r,i){if(r&&r.once)return function t(e,n,r,i,o){if(Array.isArray(n)){for(var s=0;s<n.length;s++)t(e,n[s],r,i,o);return null}return r=Ct(r),e&&e[gt]?e.wa(n,r,R(i)?!!i.capture:!!i,o):Ot(e,n,r,!0,i,o)}(t,e,n,r,i);if(Array.isArray(e)){for(var o=0;o<e.length;o++)Nt(t,e[o],n,r,i);return null}return n=Ct(n),t&&t[gt]?t.va(e,n,R(r)?!!r.capture:!!r,i):Ot(t,e,n,!1,r,i)}function Ot(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var s=R(i)?!!i.capture:!!i;if(s&&!ft)return null;var u,a,c=Dt(t);if(c||(t[Tt]=c=new _t(t)),(n=c.add(e,n,r,s,o)).proxy)return n;if(u=Lt,r=a=ft?function(t){return u.call(a.src,a.listener,t)}:function(t){if(!(t=u.call(a.src,a.listener,t)))return t},(n.proxy=r).src=t,r.listener=n,t.addEventListener)pt||(i=s),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(Rt(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function St(t){var e,n,r;"number"!=typeof t&&t&&!t.Y&&((e=t.src)&&e[gt]?Et(e.c,t):(n=t.type,r=t.proxy,e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(Rt(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=Dt(e))?(Et(n,t),0==n.b&&(n.src=null,e[Tt]=null)):bt(t)))}function Rt(t){return t in At?At[t]:At[t]="on"+t}function kt(t,e){var n=t.listener,r=t.ca||t.src;return t.Z&&St(t),n.call(r,e)}function Lt(t,e){if(t.Y)return!0;if(ft)return kt(t,new yt(e,this));if(!e)t:{e=["window","event"];for(var n=N,r=0;r<e.length;r++)if(null==(n=n[e[r]])){e=null;break t}e=n}return kt(t,e=new yt(e,this))}function Dt(t){return(t=t[Tt])instanceof _t?t:null}var Pt="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ct(e){return"function"==typeof e?e:(e[Pt]||(e[Pt]=function(t){return e.handleEvent(t)}),e[Pt])}function Ut(){M.call(this),this.c=new _t(this),(this.J=this).C=null}function Vt(t,e){var n,r=t.C;if(r)for(n=[];r;r=r.C)n.push(r);if(t=t.J,r=e.type||e,"string"==typeof e?e=new dt(e,t):e instanceof dt?e.target=e.target||t:(s=e,J(e=new dt(r,t),s)),s=!0,n)for(var i=n.length-1;0<=i;i--)var o=e.a=n[i],s=xt(o,r,!0,e)&&s;if(s=xt(o=e.a=t,r,!0,e)&&s,s=xt(o,r,!1,e)&&s,n)for(i=0;i<n.length;i++)s=xt(o=e.a=n[i],r,!1,e)&&s}function xt(t,e,n,r){if(!(e=t.c.a[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var s,u,a=e[o];a&&!a.Y&&a.capture==n&&(s=a.listener,u=a.ca||a.src,a.Z&&Et(t.c,a),i=!1!==s.call(u,r)&&i)}return i&&!r.defaultPrevented}x(Ut,M),Ut.prototype[gt]=!0,(ut=Ut.prototype).addEventListener=function(t,e,n,r){Nt(this,t,e,n,r)},ut.removeEventListener=function(t,e,n,r){!function t(e,n,r,i,o){if(Array.isArray(n))for(var s=0;s<n.length;s++)t(e,n[s],r,i,o);else i=R(i)?!!i.capture:!!i,r=Ct(r),e&&e[gt]?(e=e.c,(n=String(n).toString())in e.a&&-1<(r=It(s=e.a[n],r,i,o))&&(bt(s[r]),Array.prototype.splice.call(s,r,1),0==s.length&&(delete e.a[n],e.b--))):(e=e&&Dt(e))&&(n=e.a[n.toString()],e=-1,n&&(e=It(n,r,i,o)),(r=-1<e?n[e]:null)&&St(r))}(this,t,e,n,r)},ut.G=function(){if(Ut.X.G.call(this),this.c){var t,e=this.c;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)bt(n[r]);delete e.a[t],e.b--}}this.C=null},ut.va=function(t,e,n,r){return this.c.add(String(t),e,!1,n,r)},ut.wa=function(t,e,n,r){return this.c.add(String(t),e,!0,n,r)};var Mt=N.JSON.stringify;function jt(){this.b=this.a=null}var qt,Ft=(Bt.prototype.get=function(){var t;return 0<this.b?(this.b--,t=this.a,this.a=t.next,t.next=null):t=this.c(),t},new Bt(function(){return new Gt},function(t){t.reset()}));function Bt(t,e){this.c=t,this.f=e,this.b=0,this.a=null}function Gt(){this.next=this.b=this.a=null}function zt(t,e){var n;qt||(n=N.Promise.resolve(void 0),qt=function(){n.then(Yt)}),Ht||(qt(),Ht=!0),Wt.add(t,e)}jt.prototype.add=function(t,e){var n=Ft.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},Gt.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null};var Ht=!(Gt.prototype.reset=function(){this.next=this.b=this.a=null}),Wt=new jt;function Yt(){for(var t,e;n=e=void 0,n=null,(e=Wt).a&&(n=e.a,e.a=e.a.next,e.a||(e.b=null),n.next=null),t=n;){try{t.a.call(t.b)}catch(t){!function(t){N.setTimeout(function(){throw t},0)}(t)}var n=Ft;n.f(t),n.b<100&&(n.b++,t.next=n.a,n.a=t)}Ht=!1}function Qt(t,e){Ut.call(this),this.b=t||1,this.a=e||N,this.f=C(this.Za,this),this.g=V()}function Kt(t){t.aa=!1,t.M&&(t.a.clearTimeout(t.M),t.M=null)}function Xt(t,e,n){if("function"==typeof t)n&&(t=C(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=C(t.handleEvent,t)}return 2147483647<Number(e)?-1:N.setTimeout(t,e||0)}x(Qt,Ut),(ut=Qt.prototype).aa=!1,ut.M=null,ut.Za=function(){var t;this.aa&&(0<(t=V()-this.g)&&t<.8*this.b?this.M=this.a.setTimeout(this.f,this.b-t):(this.M&&(this.a.clearTimeout(this.M),this.M=null),Vt(this,"tick"),this.aa&&(Kt(this),this.start())))},ut.start=function(){this.aa=!0,this.M||(this.M=this.a.setTimeout(this.f,this.b),this.g=V())},ut.G=function(){Qt.X.G.call(this),Kt(this),delete this.a};var Jt,$t,Zt=(I($t=ee,Y=Jt=M),$t.prototype=null===Y?Object.create(Y):(te.prototype=Y.prototype,new te),ee.prototype.f=function(t){this.b=arguments,this.a?this.c=!0:function t(e){e.a=Xt(function(){e.a=null,e.c&&(e.c=!1,t(e))},e.h);var n=e.b;e.b=null,e.g.apply(null,n)}(this)},ee.prototype.G=function(){Jt.prototype.G.call(this),this.a&&(N.clearTimeout(this.a),this.a=null,this.c=!1,this.b=null)},ee);function te(){this.constructor=$t}function ee(t,e){var n=Jt.call(this)||this;return n.g=t,n.h=e,n.b=null,n.c=!1,n.a=null,n}function ne(t){M.call(this),this.b=t,this.a={}}x(ne,M);var re=[];function ie(t,e,n,r){Array.isArray(n)||(n&&(re[0]=n.toString()),n=re);for(var i=0;i<n.length;i++){var o=Nt(e,n[i],r||t.handleEvent,!1,t.b||t);if(!o)break;t.a[o.key]=o}}function oe(t){Q(t.a,function(t,e){this.a.hasOwnProperty(e)&&St(t)},t),t.a={}}function se(){this.a=!0}function ue(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+function(t,e){if(!t.a)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(r.length<2)){var i=r[1];if(Array.isArray(i)&&!(i.length<1)&&"noop"!=(r=i[0])&&"stop"!=r&&"close"!=r)for(var o=1;o<i.length;o++)i[o]=""}}return Mt(n)}catch(t){return e}}(t,n)+(r?" "+r:"")})}ne.prototype.G=function(){ne.X.G.call(this),oe(this)},ne.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},se.prototype.info=function(){};var ae={},ce=null;function he(){return ce=ce||new Ut}function fe(t){dt.call(this,ae.Fa,t)}function le(){var t=he();Vt(t,new fe(t))}function pe(t,e){dt.call(this,ae.STAT_EVENT,t),this.stat=e}function de(t){var e=he();Vt(e,new pe(e,t))}function ye(t){dt.call(this,ae.Ga,t)}function ve(t,e){if("function"!=typeof t)throw Error("Fn must not be null and must be a function");return N.setTimeout(function(){t()},e)}ae.Fa="serverreachability",x(fe,dt),ae.STAT_EVENT="statevent",x(pe,dt),ae.Ga="timingevent",x(ye,dt);var ge={NO_ERROR:0,$a:1,nb:2,mb:3,hb:4,lb:5,ob:6,Da:7,TIMEOUT:8,rb:9},me={fb:"complete",Bb:"success",Ea:"error",Da:"abort",tb:"ready",ub:"readystatechange",TIMEOUT:"timeout",pb:"incrementaldata",sb:"progress",ib:"downloadprogress",Jb:"uploadprogress"};function we(){}function be(t){var e;return(e=t.a)||(e=t.a={}),e}function _e(){}we.prototype.a=null;var Ee,A={OPEN:"a",eb:"b",Ea:"c",qb:"d"};function Ie(){dt.call(this,"d")}function Te(){dt.call(this,"c")}function Ae(){}function Ne(t,e,n,r){this.g=t,this.c=e,this.f=n,this.S=r||1,this.J=new ne(this),this.P=Oe,t=rt?125:void 0,this.R=new Qt(t),this.B=null,this.b=!1,this.j=this.l=this.i=this.H=this.u=this.T=this.o=null,this.s=[],this.a=null,this.D=0,this.h=this.m=null,this.N=-1,this.A=!1,this.O=0,this.F=null,this.V=this.C=this.U=this.I=!1}x(Ie,dt),x(Te,dt),x(Ae,we),Ee=new Ae;var Oe=45e3,Se={},Re={};function ke(t,e,n){t.H=1,t.i=Je(He(e)),t.j=n,t.I=!0,Le(t,null)}function Le(t,e){t.u=V(),Pe(t),t.l=He(t.i);var s,u,a,c,h,f,n=t.l,r=t.S;Array.isArray(r)||(r=[String(r)]),fn(n.b,"t",r),t.D=0,t.a=ir(t.g,t.g.C?e:null),0<t.O&&(t.F=new Zt(C(t.Ca,t,t.a),t.O)),ie(t.J,t.a,"readystatechange",t.Xa),e=t.B?K(t.B):{},t.j?(t.m||(t.m="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.a.ba(t.l,t.m,t.j,e)):(t.m="GET",t.a.ba(t.l,t.m,null,e)),le(),s=t.c,u=t.m,a=t.l,c=t.f,h=t.S,f=t.j,s.info(function(){if(s.a)if(f)for(var t="",e=f.split("&"),n=0;n<e.length;n++){var r,i,o=e[n].split("=");1<o.length&&(r=o[0],o=o[1],t=2<=(i=r.split("_")).length&&"type"==i[1]?t+(r+"=")+o+"&":t+(r+"=redacted&"))}else t=null;else t=f;return"XMLHTTP REQ ("+c+") [attempt "+h+"]: "+u+"\n"+a+"\n"+t})}function De(t,e,n){for(var r,i,o,s=!0;!t.A&&t.D<n.length;){var u=(u=n,o=void 0,i=(r=t).D,-1==(o=u.indexOf("\n",i))?Re:(i=Number(u.substring(i,o)),isNaN(i)?Se:(o+=1)+i>u.length?Re:(u=u.substr(o,i),r.D=o+i,u)));if(u==Re){4==e&&(t.h=4,de(14),s=!1),ue(t.c,t.f,null,"[Incomplete Response]");break}if(u==Se){t.h=4,de(15),ue(t.c,t.f,n,"[Invalid Chunk]"),s=!1;break}ue(t.c,t.f,u,null),Me(t,u)}4==e&&0==n.length&&(t.h=1,de(16),s=!1),t.b=t.b&&s,s?0<n.length&&!t.V&&(t.V=!0,(e=t.g).a==t&&e.U&&!e.F&&(e.c.info("Great, no buffering proxy detected. Bytes received: "+n.length),Xn(e),e.F=!0,de(11))):(ue(t.c,t.f,n,"[Invalid Chunked Response]"),xe(t),Ve(t))}function Pe(t){t.T=V()+t.P,Ce(t,t.P)}function Ce(t,e){if(null!=t.o)throw Error("WatchDog timer not null");t.o=ve(C(t.Va,t),e)}function Ue(t){t.o&&(N.clearTimeout(t.o),t.o=null)}function Ve(t){0==t.g.v||t.A||Zn(t.g,t)}function xe(t){Ue(t);var e=t.F;e&&"function"==typeof e.ja&&e.ja(),t.F=null,Kt(t.R),oe(t.J),t.a&&(e=t.a,t.a=null,e.abort(),e.ja())}function Me(t,e){try{var n,r,i,o,s,u=t.g;if(0!=u.v&&(u.a==t||mn(u.b,t)))if(u.I=t.N,!t.C&&mn(u.b,t)&&3==u.v){try{var a=u.ka.a.parse(e)}catch(t){a=null}if(Array.isArray(a)&&3==a.length){var c=a;if(0==c[0]){t:if(!u.j){if(u.a){if(!(u.a.u+3e3<t.u))break t;$n(u),Fn(u)}Kn(u),de(18)}}else u.oa=c[1],0<u.oa-u.P&&c[2]<37500&&u.H&&0==u.o&&!u.m&&(u.m=ve(C(u.Sa,u),6e3));if(gn(u.b)<=1&&u.ea){try{u.ea()}catch(t){}u.ea=void 0}}else er(u,11)}else if(!t.C&&u.a!=t||$n(u),!G(e))for(e=a=u.ka.a.parse(e),a=0;a<e.length;a++)c=e[a],u.P=c[0],c=c[1],2==u.v?"c"==c[0]?(u.J=c[1],u.ga=c[2],null!=(r=c[3])&&(u.ha=r,u.c.info("VER="+u.ha)),null!=(o=c[4])&&(u.pa=o,u.c.info("SVER="+u.pa)),null!=(r=c[5])&&"number"==typeof r&&0<r&&(n=1.5*r,u.D=n,u.c.info("backChannelRequestTimeoutMs_="+n)),n=u,(o=t.a)&&(!(r=o.a?o.a.getResponseHeader("X-Client-Wire-Protocol"):null)||!(i=n.b).a&&(H(r,"spdy")||H(r,"quic")||H(r,"h2"))&&(i.f=i.g,i.a=new Set,i.b&&(wn(i,i.b),i.b=null)),!n.A||(s=o.a?o.a.getResponseHeader("X-HTTP-Session-Id"):null)&&(n.na=s,Xe(n.B,n.A,s))),u.v=3,u.f&&u.f.ta(),u.U&&(u.N=V()-t.u,u.c.info("Handshake RTT: "+u.N+"ms")),i=t,(n=u).la=rr(n,n.C?n.ga:null,n.fa),i.C?(bn(n.b,i),o=i,(s=n.D)&&o.setTimeout(s),o.o&&(Ue(o),Pe(o)),n.a=i):Qn(n),0<u.g.length&&zn(u)):"stop"!=c[0]&&"close"!=c[0]||er(u,7):3==u.v&&("stop"==c[0]||"close"==c[0]?"stop"==c[0]?er(u,7):qn(u):"noop"!=c[0]&&u.f&&u.f.sa(c),u.o=0);le()}catch(t){}}function je(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(S(t)||"string"==typeof t)q(t,e,void 0);else{if(t.L&&"function"==typeof t.L)var n=t.L();else if(t.K&&"function"==typeof t.K)n=void 0;else if(S(t)||"string"==typeof t){n=[];for(var r=t.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,t)n[r++]=i;i=(r=function(t){if(t.K&&"function"==typeof t.K)return t.K();if("string"==typeof t)return t.split("");if(S(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}(t)).length;for(var o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}}function qe(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof qe)for(n=t.L(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function Fe(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];Be(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){for(var i={},n=e=0;e<t.a.length;)Be(i,r=t.a[e])||(i[t.a[n++]=r]=1),e++;t.a.length=n}}function Be(t,e){return Object.prototype.hasOwnProperty.call(t,e)}(ut=Ne.prototype).setTimeout=function(t){this.P=t},ut.Xa=function(t){t=t.target;var e=this.F;e&&3==Vn(t)?e.f():this.Ca(t)},ut.Ca=function(t){try{if(t==this.a)t:{var e=Vn(this.a),n=this.a.ua(),r=this.a.W();if(!(e<3||3==e&&!rt&&!this.a.$())){this.A||4!=e||7==n||le(),Ue(this);var i=this.a.W();if(this.N=i,n=this.a.$(),this.b=200==i,r=this.c,u=this.m,a=this.l,c=this.f,h=this.S,f=e,l=i,r.info(function(){return"XMLHTTP RESP ("+c+") [ attempt "+h+"]: "+u+"\n"+a+"\n"+f+" "+l}),this.b){if(this.U&&!this.C){e:{if(this.a){var o=this.a;if((o=o.a?o.a.getResponseHeader("X-HTTP-Initial-Response"):null)&&!G(o)){var s=o;break e}}s=null}if(!s){this.b=!1,this.h=3,de(12),xe(this),Ve(this);break t}ue(this.c,this.f,s,"Initial handshake response via X-HTTP-Initial-Response"),this.C=!0,Me(this,s)}this.I?(De(this,e,n),rt&&this.b&&3==e&&(ie(this.J,this.R,"tick",this.Wa),this.R.start())):(ue(this.c,this.f,n,null),Me(this,n)),4==e&&xe(this),this.b&&!this.A&&(4==e?Zn(this.g,this):(this.b=!1,Pe(this)))}else 400==i&&0<n.indexOf("Unknown SID")?(this.h=3,de(12)):(this.h=0,de(13)),xe(this),Ve(this)}}}catch(t){}var u,a,c,h,f,l},ut.Wa=function(){var t,e;this.a&&(t=Vn(this.a),e=this.a.$(),this.D<e.length&&(Ue(this),De(this,t,e),this.b&&4!=t&&Pe(this)))},ut.cancel=function(){this.A=!0,xe(this)},ut.Va=function(){this.o=null;var t,e,n=V();0<=n-this.T?(t=this.c,e=this.l,t.info(function(){return"TIMEOUT: "+e}),2!=this.H&&(le(),de(17)),xe(this),this.h=2,Ve(this)):Ce(this,this.T-n)},(ut=qe.prototype).K=function(){Fe(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},ut.L=function(){return Fe(this),this.a.concat()},ut.get=function(t,e){return Be(this.b,t)?this.b[t]:e},ut.set=function(t,e){Be(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},ut.forEach=function(t,e){for(var n=this.L(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var Ge=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function ze(t,e){var n;this.c=this.j=this.f="",this.h=null,this.i=this.g="",this.a=!1,t instanceof ze?(this.a=void 0!==e?e:t.a,We(this,t.f),this.j=t.j,Ye(this,t.c),Qe(this,t.h),this.g=t.g,e=t.b,(n=new un).c=e.c,e.a&&(n.a=new qe(e.a),n.b=e.b),Ke(this,n),this.i=t.i):t&&(n=String(t).match(Ge))?(this.a=!!e,We(this,n[1]||"",!0),this.j=$e(n[2]||""),Ye(this,n[3]||"",!0),Qe(this,n[4]),this.g=$e(n[5]||"",!0),Ke(this,n[6]||"",!0),this.i=$e(n[7]||"")):(this.a=!!e,this.b=new un(null,this.a))}function He(t){return new ze(t)}function We(t,e,n){t.f=n?$e(e,!0):e,t.f&&(t.f=t.f.replace(/:$/,""))}function Ye(t,e,n){t.c=n?$e(e,!0):e}function Qe(t,e){if(e){if(e=Number(e),isNaN(e)||e<0)throw Error("Bad port number "+e);t.h=e}else t.h=null}function Ke(t,e,n){var r,i;e instanceof un?(t.b=e,r=t.b,(i=t.a)&&!r.f&&(an(r),r.c=null,r.a.forEach(function(t,e){var n=e.toLowerCase();e!=n&&(cn(this,e),fn(this,n,t))},r)),r.f=i):(n||(e=Ze(e,on)),t.b=new un(e,t.a))}function Xe(t,e,n){t.b.set(e,n)}function Je(t){return Xe(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^V()).toString(36)),t}function $e(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Ze(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,tn),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function tn(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}ze.prototype.toString=function(){var t=[],e=this.f;e&&t.push(Ze(e,en,!0),":");var n=this.c;return!n&&"file"!=e||(t.push("//"),(e=this.j)&&t.push(Ze(e,en,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.h)&&t.push(":",String(n))),(n=this.g)&&(this.c&&"/"!=n.charAt(0)&&t.push("/"),t.push(Ze(n,"/"==n.charAt(0)?rn:nn,!0))),(n=this.b.toString())&&t.push("?",n),(n=this.i)&&t.push("#",Ze(n,sn)),t.join("")};var en=/[#\/\?@]/g,nn=/[#\?:]/g,rn=/[#\?]/g,on=/[#\?@]/g,sn=/#/g;function un(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function an(o){o.a||(o.a=new qe,o.b=0,o.c&&function(t){if(t){t=t.split("&");for(var e=0;e<t.length;e++){var n,r=t[e].indexOf("="),i=null;0<=r?(n=t[e].substring(0,r),i=t[e].substring(r+1)):n=t[e],r=n,i=i?decodeURIComponent(i.replace(/\+/g," ")):"",o.add(decodeURIComponent(r.replace(/\+/g," ")),i)}}}(o.c))}function cn(t,e){an(t),e=ln(t,e),Be(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,Be((t=t.a).b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&Fe(t)))}function hn(t,e){return an(t),e=ln(t,e),Be(t.a.b,e)}function fn(t,e,n){cn(t,e),0<n.length&&(t.c=null,t.a.set(ln(t,e),B(n)),t.b+=n.length)}function ln(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}(ut=un.prototype).add=function(t,e){an(this),this.c=null,t=ln(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},ut.forEach=function(n,r){an(this),this.a.forEach(function(t,e){q(t,function(t){n.call(r,t,e,this)},this)},this)},ut.L=function(){an(this);for(var t=this.a.K(),e=this.a.L(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},ut.K=function(t){an(this);var e=[];if("string"==typeof t)hn(this,t)&&(e=F(e,this.a.get(ln(this,t))));else{t=this.a.K();for(var n=0;n<t.length;n++)e=F(e,t[n])}return e},ut.set=function(t,e){return an(this),this.c=null,hn(this,t=ln(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},ut.get=function(t,e){return t&&0<(t=this.K(t)).length?String(t[0]):e},ut.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.L(),n=0;n<e.length;n++)for(var r=e[n],i=encodeURIComponent(String(r)),r=this.K(r),o=0;o<r.length;o++){var s=i;""!==r[o]&&(s+="="+encodeURIComponent(String(r[o]))),t.push(s)}return this.c=t.join("&")};function pn(t,e){this.b=t,this.a=e}function dn(t){this.g=t||yn,t=N.PerformanceNavigationTiming?0<(t=N.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):!!(N.ia&&N.ia.ya&&N.ia.ya()&&N.ia.ya().Lb),this.f=t?this.g:1,this.a=null,1<this.f&&(this.a=new Set),this.b=null,this.c=[]}var yn=10;function vn(t){return t.b||t.a&&t.a.size>=t.f}function gn(t){return t.b?1:t.a?t.a.size:0}function mn(t,e){return t.b?t.b==e:t.a&&t.a.has(e)}function wn(t,e){t.a?t.a.add(e):t.b=e}function bn(t,e){t.b&&t.b==e?t.b=null:t.a&&t.a.has(e)&&t.a.delete(e)}function _n(t){var e,n;if(null!=t.b)return t.c.concat(t.b.s);if(null==t.a||0===t.a.size)return B(t.c);var r=t.c;try{for(var i=T(t.a.values()),o=i.next();!o.done;o=i.next())var s=o.value,r=r.concat(s.s)}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}function En(){}function In(){this.a=new En}function Tn(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(t){}}dn.prototype.cancel=function(){var t,e;if(this.c=_n(this),this.b)this.b.cancel(),this.b=null;else if(this.a&&0!==this.a.size){try{for(var n=T(this.a.values()),r=n.next();!r.done;r=n.next())r.value.cancel()}catch(e){t={error:e}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}this.a.clear()}},En.prototype.stringify=function(t){return N.JSON.stringify(t,void 0)},En.prototype.parse=function(t){return N.JSON.parse(t,void 0)};var An=N.JSON.parse;function Nn(t){Ut.call(this),this.headers=new qe,this.H=t||null,this.b=!1,this.s=this.a=null,this.B="",this.h=0,this.f="",this.g=this.A=this.l=this.u=!1,this.o=0,this.m=null,this.I=On,this.D=this.F=!1}x(Nn,Ut);var On="",Sn=/^https?$/i,Rn=["POST","PUT"];function kn(t){return"content-type"==t.toLowerCase()}function Ln(t,e){t.b=!1,t.a&&(t.g=!0,t.a.abort(),t.g=!1),t.f=e,t.h=5,Dn(t),Cn(t)}function Dn(t){t.u||(t.u=!0,Vt(t,"complete"),Vt(t,"error"))}function Pn(t){if(t.b&&(!t.s[1]||4!=Vn(t)||2!=t.W()))if(t.l&&4==Vn(t))Xt(t.za,0,t);else if(Vt(t,"readystatechange"),4==Vn(t)){t.b=!1;try{var e,n,r,i,o=t.W();t:switch(o){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var s=!0;break t;default:s=!1}if((e=s)||((n=0===o)&&(!(i=String(t.B).match(Ge)[1]||null)&&N.self&&N.self.location&&(i=(r=N.self.location.protocol).substr(0,r.length-1)),n=!Sn.test(i?i.toLowerCase():"")),e=n),e)Vt(t,"complete"),Vt(t,"success");else{t.h=6;try{var u=2<Vn(t)?t.a.statusText:""}catch(o){u=""}t.f=u+" ["+t.W()+"]",Dn(t)}}finally{Cn(t)}}}function Cn(t,e){if(t.a){Un(t);var n=t.a,r=t.s[0]?O:null;t.a=null,t.s=null,e||Vt(t,"ready");try{n.onreadystatechange=r}catch(t){}}}function Un(t){t.a&&t.D&&(t.a.ontimeout=null),t.m&&(N.clearTimeout(t.m),t.m=null)}function Vn(t){return t.a?t.a.readyState:0}function xn(t,e,n){t:{for(r in n){var r=!1;break t}r=!0}var i;r||(i="",Q(n,function(t,e){i+=e,i+=":",i+=t,i+="\r\n"}),n=i,"string"==typeof t?null!=n&&encodeURIComponent(String(n)):Xe(t,e,n))}function Mn(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function jn(t){this.pa=0,this.g=[],this.c=new se,this.ga=this.la=this.B=this.fa=this.a=this.na=this.A=this.V=this.i=this.O=this.l=null,this.Oa=this.R=0,this.La=Mn("failFast",!1,t),this.H=this.m=this.j=this.h=this.f=null,this.S=!0,this.I=this.oa=this.P=-1,this.T=this.o=this.u=0,this.Ha=Mn("baseRetryDelayMs",5e3,t),this.Ra=Mn("retryDelaySeedMs",1e4,t),this.Ma=Mn("forwardChannelMaxRetries",2,t),this.ma=Mn("forwardChannelRequestTimeoutMs",2e4,t),this.Na=t&&t.g||void 0,this.D=void 0,this.C=t&&t.supportsCrossDomainXhr||!1,this.J="",this.b=new dn(t&&t.concurrentRequestLimit),this.ka=new In,this.da=t&&t.fastHandshake||!1,this.Ia=t&&t.b||!1,t&&t.f&&(this.c.a=!1),t&&t.forceLongPolling&&(this.S=!1),this.U=!this.da&&this.S&&t&&t.detectBufferingProxy||!1,this.ea=void 0,this.N=0,this.F=!1,this.s=null,(this.Ka=t&&t.c||!1)&&this.c.info("Opt-in to enable Chrome Origin Trials.")}function qn(t){var e,n;Bn(t),3==t.v&&(e=t.R++,Xe(n=He(t.B),"SID",t.J),Xe(n,"RID",e),Xe(n,"TYPE","terminate"),Wn(t,n),(e=new Ne(t,t.c,e,void 0)).H=2,e.i=Je(He(n)),n=!1,N.navigator&&N.navigator.sendBeacon&&(n=N.navigator.sendBeacon(e.i.toString(),"")),!n&&N.Image&&((new Image).src=e.i,n=!0),n||(e.a=ir(e.g,null),e.a.ba(e.i)),e.u=V(),Pe(e)),nr(t)}function Fn(t){t.a&&(Xn(t),t.a.cancel(),t.a=null)}function Bn(t){Fn(t),t.j&&(N.clearTimeout(t.j),t.j=null),$n(t),t.b.cancel(),t.h&&("number"==typeof t.h&&N.clearTimeout(t.h),t.h=null)}function Gn(t,e){t.g.push(new pn(t.Oa++,e)),3==t.v&&zn(t)}function zn(t){vn(t.b)||t.h||(t.h=!0,zt(t.Ba,t),t.u=0)}function Hn(t,e){var n=e?e.f:t.R++,r=He(t.B);Xe(r,"SID",t.J),Xe(r,"RID",n),Xe(r,"AID",t.P),Wn(t,r),t.i&&t.l&&xn(r,t.i,t.l),n=new Ne(t,t.c,n,t.u+1),null===t.i&&(n.B=t.l),e&&(t.g=e.s.concat(t.g)),e=Yn(t,n,1e3),n.setTimeout(Math.round(.5*t.ma)+Math.round(.5*t.ma*Math.random())),wn(t.b,n),ke(n,r,e)}function Wn(t,n){t.f&&je({},function(t,e){Xe(n,e,t)})}function Yn(t,e,n){n=Math.min(t.g.length,n);var r=t.f?C(t.f.Ja,t.f,t):null;t:for(var i=t.g,o=-1;;){var s=["count="+n];-1==o?0<n?(o=i[0].b,s.push("ofs="+o)):o=0:s.push("ofs="+o);for(var u=!0,a=0;a<n;a++){var c=i[a].b,h=i[a].a;if((c-=o)<0)o=Math.max(0,i[a].b-100),u=!1;else try{!function(t,r){var i="req"+c+"_"||"";try{je(t,function(t,e){var n=t;R(t)&&(n=Mt(t)),r.push(i+e+"="+encodeURIComponent(n))})}catch(t){throw r.push(i+"type="+encodeURIComponent("_badmap")),t}}(h,s)}catch(t){r&&r(h)}}if(u){r=s.join("&");break t}}return t=t.g.splice(0,n),e.s=t,r}function Qn(t){t.a||t.j||(t.T=1,zt(t.Aa,t),t.o=0)}function Kn(t){return!(t.a||t.j||3<=t.o)&&(t.T++,t.j=ve(C(t.Aa,t),tr(t,t.o)),t.o++,1)}function Xn(t){null!=t.s&&(N.clearTimeout(t.s),t.s=null)}function Jn(t){t.a=new Ne(t,t.c,"rpc",t.T),null===t.i&&(t.a.B=t.l),t.a.O=0;var e=He(t.la);Xe(e,"RID","rpc"),Xe(e,"SID",t.J),Xe(e,"CI",t.H?"0":"1"),Xe(e,"AID",t.P),Wn(t,e),Xe(e,"TYPE","xmlhttp"),t.i&&t.l&&xn(e,t.i,t.l),t.D&&t.a.setTimeout(t.D);var n=t.a;t=t.ga,n.H=1,n.i=Je(He(e)),n.j=null,n.I=!0,Le(n,t)}function $n(t){null!=t.m&&(N.clearTimeout(t.m),t.m=null)}function Zn(t,e){var n,r,i,o=null;if(t.a==e){$n(t),Xn(t),t.a=null;var s=2}else{if(!mn(t.b,e))return;o=e.s,bn(t.b,e),s=1}if(t.I=e.N,0!=t.v)if(e.b)1==s?(o=e.j?e.j.length:0,e=V()-e.u,n=t.u,Vt(s=he(),new ye(s)),zn(t)):Qn(t);else if(3==(n=e.h)||0==n&&0<t.I||(1!=s||(i=e,gn((r=t).b)>=r.b.f-(r.h?1:0)||(r.h?(r.g=i.s.concat(r.g),0):1==r.v||2==r.v||r.u>=(r.La?0:r.Ma)||(r.h=ve(C(r.Ba,r,i),tr(r,r.u)),r.u++,0))))&&(2!=s||!Kn(t)))switch(o&&0<o.length&&(e=t.b,e.c=e.c.concat(o)),n){case 1:er(t,5);break;case 4:er(t,10);break;case 3:er(t,6);break;default:er(t,2)}}function tr(t,e){var n=t.Ha+Math.floor(Math.random()*t.Ra);return t.f||(n*=2),n*e}function er(t,e){var n,r,i,o;t.c.info("Error code "+e),2==e?(r=null,t.f&&(r=null),o=C(t.Ya,t),r||(r=new ze("//www.google.com/images/cleardot.gif"),N.location&&"http"==N.location.protocol||We(r,"https"),Je(r)),n=r.toString(),r=o,o=new se,N.Image?((i=new Image).onload=U(Tn,o,i,"TestLoadImage: loaded",!0,r),i.onerror=U(Tn,o,i,"TestLoadImage: error",!1,r),i.onabort=U(Tn,o,i,"TestLoadImage: abort",!1,r),i.ontimeout=U(Tn,o,i,"TestLoadImage: timeout",!1,r),N.setTimeout(function(){i.ontimeout&&i.ontimeout()},1e4),i.src=n):r(!1)):de(2),t.v=0,t.f&&t.f.ra(e),nr(t),Bn(t)}function nr(t){t.v=0,t.I=-1,t.f&&(0==_n(t.b).length&&0==t.g.length||(t.b.c.length=0,B(t.g),t.g.length=0),t.f.qa())}function rr(t,e,n){var r,i,o,s,u,a=(s=n)instanceof ze?He(s):new ze(s,void 0);return""!=a.c?(e&&Ye(a,e+"."+a.c),Qe(a,a.h)):(r=(u=N.location).protocol,i=e?e+"."+u.hostname:u.hostname,o=+u.port,s=n,u=new ze(null,void 0),r&&We(u,r),i&&Ye(u,i),o&&Qe(u,o),s&&(u.g=s),a=u),t.V&&Q(t.V,function(t,e){Xe(a,e,t)}),e=t.A,n=t.na,e&&n&&Xe(a,e,n),Xe(a,"VER",t.ha),Wn(t,a),a}function ir(t,e){if(e&&!t.C)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Nn(t.Na)).F=t.C,e}function or(){}function sr(){if(et&&!(10<=Number(ht)))throw Error("Environmental error: no available transport.")}function ur(t,e){Ut.call(this),this.a=new jn(e),this.o=t,this.b=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.a.l=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.a&&(t?t["X-WebChannel-Client-Profile"]=e.a:t={"X-WebChannel-Client-Profile":e.a}),this.a.O=t,(t=e&&e.httpHeadersOverwriteParam)&&!G(t)&&(this.a.i=t),this.m=e&&e.supportsCrossDomainXhr||!1,this.l=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!G(e)&&(this.a.A=e,null!==(t=this.b)&&e in t&&e in(t=this.b)&&delete t[e]),this.f=new hr(this)}function ar(t){Ie.call(this);var e=t.__sm__;if(e){t:{for(var n in e){t=n;break t}t=void 0}(this.c=t)?(t=this.c,this.data=null!==e&&t in e?e[t]:void 0):this.data=e}else this.data=t}function cr(){Te.call(this),this.status=1}function hr(t){this.a=t}(ut=Nn.prototype).ba=function(t,e,n,r){if(this.a)throw Error("[goog.net.XhrIo] Object is active with another request="+this.B+"; newUri="+t);e=e?e.toUpperCase():"GET",this.B=t,this.f="",this.h=0,this.u=!1,this.b=!0,this.a=new XMLHttpRequest,this.s=this.H?be(this.H):be(Ee),this.a.onreadystatechange=C(this.za,this);try{this.A=!0,this.a.open(e,String(t),!0),this.A=!1}catch(t){return void Ln(this,t)}t=n||"";var i,o=new qe(this.headers);r&&je(r,function(t,e){o.set(e,t)}),r=function(t){t:{for(var e=kn,n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return e<0?null:"string"==typeof t?t.charAt(e):t[e]}(o.L()),n=N.FormData&&t instanceof N.FormData,0<=j(Rn,e)&&!r&&!n&&o.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),o.forEach(function(t,e){this.a.setRequestHeader(e,t)},this),this.I&&(this.a.responseType=this.I),"withCredentials"in this.a&&this.a.withCredentials!==this.F&&(this.a.withCredentials=this.F);try{Un(this),0<this.o&&((this.D=(i=this.a,et&&ct(9)&&"number"==typeof i.timeout&&void 0!==i.ontimeout))?(this.a.timeout=this.o,this.a.ontimeout=C(this.xa,this)):this.m=Xt(this.xa,this.o,this)),this.l=!0,this.a.send(t),this.l=!1}catch(t){Ln(this,t)}},ut.xa=function(){this.a&&(this.f="Timed out after "+this.o+"ms, aborting",this.h=8,Vt(this,"timeout"),this.abort(8))},ut.abort=function(t){this.a&&this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1,this.h=t||7,Vt(this,"complete"),Vt(this,"abort"),Cn(this))},ut.G=function(){this.a&&(this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1),Cn(this,!0)),Nn.X.G.call(this)},ut.za=function(){this.j||(this.A||this.l||this.g?Pn(this):this.Ua())},ut.Ua=function(){Pn(this)},ut.W=function(){try{return 2<Vn(this)?this.a.status:-1}catch(t){return-1}},ut.$=function(){try{return this.a?this.a.responseText:""}catch(t){return""}},ut.Pa=function(t){if(this.a){var e=this.a.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),An(e)}},ut.ua=function(){return this.h},ut.Qa=function(){return"string"==typeof this.f?this.f:String(this.f)},(ut=jn.prototype).ha=8,ut.v=1,ut.Ba=function(t){if(this.h)if(this.h=null,1==this.v){if(!t){this.R=Math.floor(1e5*Math.random()),t=this.R++;var e,n=new Ne(this,this.c,t,void 0),r=this.l;if(this.O&&(r?J(r=K(r),this.O):r=this.O),null===this.i&&(n.B=r),this.da)t:{for(var i=e=0;i<this.g.length;i++){var o=this.g[i];if(void 0===(o="__data__"in o.a&&"string"==typeof(o=o.a.__data__)?o.length:void 0))break;if(4096<(e+=o)){e=i;break t}if(4096===e||i===this.g.length-1){e=i+1;break t}}e=1e3}else e=1e3;e=Yn(this,n,e),Xe(i=He(this.B),"RID",t),Xe(i,"CVER",22),this.A&&Xe(i,"X-HTTP-Session-Id",this.A),Wn(this,i),this.i&&r&&xn(i,this.i,r),wn(this.b,n),this.Ia&&Xe(i,"TYPE","init"),this.da?(Xe(i,"$req",e),Xe(i,"SID","null"),n.U=!0,ke(n,i,null)):ke(n,i,e),this.v=2}}else 3==this.v&&(t?Hn(this,t):0==this.g.length||vn(this.b)||Hn(this))},ut.Aa=function(){var t;this.j=null,Jn(this),this.U&&!(this.F||null==this.a||this.N<=0)&&(t=2*this.N,this.c.info("BP detection timer enabled: "+t),this.s=ve(C(this.Ta,this),t))},ut.Ta=function(){this.s&&(this.s=null,this.c.info("BP detection timeout reached."),this.c.info("Buffering proxy detected and switch to long-polling!"),this.H=!1,this.F=!0,de(10),Fn(this),Jn(this))},ut.Sa=function(){null!=this.m&&(this.m=null,Fn(this),Kn(this),de(19))},ut.Ya=function(t){t?(this.c.info("Successfully pinged google.com"),de(2)):(this.c.info("Failed to ping google.com"),de(1))},(ut=or.prototype).ta=function(){},ut.sa=function(){},ut.ra=function(){},ut.qa=function(){},ut.Ja=function(){},sr.prototype.a=function(t,e){return new ur(t,e)},x(ur,Ut),ur.prototype.g=function(){this.a.f=this.f,this.m&&(this.a.C=!0);var t=this.a,e=this.o,n=this.b||void 0;de(0),t.fa=e,t.V=n||{},t.H=t.S,t.B=rr(t,null,t.fa),zn(t)},ur.prototype.close=function(){qn(this.a)},ur.prototype.h=function(t){var e;"string"==typeof t?((e={}).__data__=t,Gn(this.a,e)):this.l?((e={}).__data__=Mt(t),Gn(this.a,e)):Gn(this.a,t)},ur.prototype.G=function(){this.a.f=null,delete this.f,qn(this.a),delete this.a,ur.X.G.call(this)},x(ar,Ie),x(cr,Te),x(hr,or),hr.prototype.ta=function(){Vt(this.a,"a")},hr.prototype.sa=function(t){Vt(this.a,new ar(t))},hr.prototype.ra=function(t){Vt(this.a,new cr)},hr.prototype.qa=function(){Vt(this.a,"b")},sr.prototype.createWebChannel=sr.prototype.a,ur.prototype.send=ur.prototype.h,ur.prototype.open=ur.prototype.g,ge.NO_ERROR=0,ge.TIMEOUT=8,ge.HTTP_ERROR=6,me.COMPLETE="complete",(_e.EventType=A).OPEN="a",A.CLOSE="b",A.ERROR="c",A.MESSAGE="d",Ut.prototype.listen=Ut.prototype.va,Nn.prototype.listenOnce=Nn.prototype.wa,Nn.prototype.getLastError=Nn.prototype.Qa,Nn.prototype.getLastErrorCode=Nn.prototype.ua,Nn.prototype.getStatus=Nn.prototype.W,Nn.prototype.getResponseJson=Nn.prototype.Pa,Nn.prototype.getResponseText=Nn.prototype.$,Nn.prototype.send=Nn.prototype.ba;var fr=he,lr=ge,pr=me,dr=ae,yr=_e,vr=Nn,gr=new o("@firebase/firestore");function mr(){return gr.logLevel}function wr(t){for(var e,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];gr.logLevel<=u.DEBUG&&(e=n.map(Er),gr.debug.apply(gr,l(["Firestore (8.2.0): "+t],e)))}function br(t){for(var e,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];gr.logLevel<=u.ERROR&&(e=n.map(Er),gr.error.apply(gr,l(["Firestore (8.2.0): "+t],e)))}function _r(t){for(var e,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];gr.logLevel<=u.WARN&&(e=n.map(Er),gr.warn.apply(gr,l(["Firestore (8.2.0): "+t],e)))}function Er(e){if("string"==typeof e)return e;try{return JSON.stringify(e)}catch(t){return e}}function Ir(t){throw void 0===t&&(t="Unexpected state"),br(t="FIRESTORE (8.2.0) INTERNAL ASSERTION FAILED: "+t),new Error(t)}function Tr(t){t||Ir()}var Ar=(Nr.t=function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length,n="";n.length<20;)for(var r=function(){var t="undefined"!=typeof self&&(self.crypto||self.msCrypto),e=new Uint8Array(40);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(e);else for(var n=0;n<40;n++)e[n]=Math.floor(256*Math.random());return e}(),i=0;i<r.length;++i)n.length<20&&r[i]<e&&(n+=t.charAt(r[i]%t.length));return n},Nr);function Nr(){}function Or(t,e){return t<e?-1:e<t?1:0}function Sr(t,n,r){return t.length===n.length&&t.every(function(t,e){return r(t,n[e])})}var Rr=(kr.fromBase64String=function(t){return new kr(atob(t))},kr.fromUint8Array=function(t){return new kr(function(t){for(var e="",n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}(t))},kr.prototype.toBase64=function(){return t=this.i,btoa(t);var t},kr.prototype.toUint8Array=function(){return function(t){for(var e=new Uint8Array(t.length),n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}(this.i)},kr.prototype.o=function(){return 2*this.i.length},kr.prototype.u=function(t){return Or(this.i,t.i)},kr.prototype.isEqual=function(t){return this.i===t.i},kr);function kr(t){this.i=t}Rr.h=new Rr("");var Lr,Dr={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},Pr=(f(xr,Lr=Error),xr),Cr=(Vr.fromBase64String=function(t){try{return new Vr(Rr.fromBase64String(t))}catch(t){throw new Pr(Dr.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}},Vr.fromUint8Array=function(t){return new Vr(Rr.fromUint8Array(t))},Vr.prototype.toBase64=function(){return this.l.toBase64()},Vr.prototype.toUint8Array=function(){return this.l.toUint8Array()},Vr.prototype.toString=function(){return"Bytes(base64: "+this.toBase64()+")"},Vr.prototype.isEqual=function(t){return this.l.isEqual(t.l)},Vr),Ur=function(t){this._=t};function Vr(t){this.l=t}function xr(t,e){var n=this;return(n=Lr.call(this,e)||this).code=t,n.message=e,n.name="FirebaseError",n.toString=function(){return n.name+": [code="+n.code+"]: "+n.message},n}function Mr(){if("undefined"==typeof Uint8Array)throw new Pr(Dr.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function jr(){if("undefined"==typeof atob)throw new Pr(Dr.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var qr,Fr=(f(zr,qr=Ur),zr.fromBase64String=function(t){return jr(),new zr(Cr.fromBase64String(t))},zr.fromUint8Array=function(t){return Mr(),new zr(Cr.fromUint8Array(t))},zr.prototype.toBase64=function(){return jr(),this._.toBase64()},zr.prototype.toUint8Array=function(){return Mr(),this._.toUint8Array()},zr.prototype.isEqual=function(t){return this._.isEqual(t._)},zr.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},zr),Br=(Gr.prototype.T=function(){return null!=this.uid},Gr.prototype.I=function(){return this.T()?"uid:"+this.uid:"anonymous-user"},Gr.prototype.isEqual=function(t){return t.uid===this.uid},Gr);function Gr(t){this.uid=t}function zr(){return null!==qr&&qr.apply(this,arguments)||this}function Hr(t,e){this.user=e,this.type="OAuth",this.R={},this.R.Authorization="Bearer "+t}Br.UNAUTHENTICATED=new Br(null),Br.m=new Br("google-credentials-uid"),Br.A=new Br("first-party-uid");var Wr=(si.prototype.getToken=function(){return Promise.resolve(null)},si.prototype.g=function(){},si.prototype.V=function(t){(this.P=t)(Br.UNAUTHENTICATED)},si.prototype.p=function(){this.P=null},si),Yr=(oi.prototype.getToken=function(){var e=this,n=this.D,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(function(t){return e.D!==n?(wr("FirebaseCredentialsProvider","getToken aborted due to token change."),e.getToken()):t?(Tr("string"==typeof t.accessToken),new Hr(t.accessToken,e.currentUser)):null}):Promise.resolve(null)},oi.prototype.g=function(){this.forceRefresh=!0},oi.prototype.V=function(t){this.P=t,this.S&&t(this.currentUser)},oi.prototype.p=function(){this.auth&&this.auth.removeAuthTokenListener(this.v),this.v=null,this.P=null},oi.prototype.C=function(){var t=this.auth&&this.auth.getUid();return Tr(null===t||"string"==typeof t),new Br(t)},oi),Qr=(Object.defineProperty(ii.prototype,"R",{get:function(){var t={"X-Goog-AuthUser":this.F},e=this.N.auth.getAuthHeaderValueForFirstParty([]);return e&&(t.Authorization=e),t},enumerable:!1,configurable:!0}),ii),Kr=(ri.prototype.getToken=function(){return Promise.resolve(new Qr(this.N,this.F))},ri.prototype.V=function(t){t(Br.A)},ri.prototype.p=function(){},ri.prototype.g=function(){},ri),Xr=function(t,e,n,r,i,o){this.O=t,this.persistenceKey=e,this.host=n,this.ssl=r,this.forceLongPolling=i,this.k=o},Jr=(Object.defineProperty(ni.prototype,"M",{get:function(){return"(default)"===this.database},enumerable:!1,configurable:!0}),ni.prototype.isEqual=function(t){return t instanceof ni&&t.projectId===this.projectId&&t.database===this.database},ni),$r=(ei.prototype.L=function(t){},ei.prototype.$=function(){},ei),Zr=(ti.prototype.L=function(t){this.W.push(t)},ti.prototype.$=function(){window.removeEventListener("online",this.B),window.removeEventListener("offline",this.U)},ti.prototype.j=function(){window.addEventListener("online",this.B),window.addEventListener("offline",this.U)},ti.prototype.q=function(){wr("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var t=0,e=this.W;t<e.length;t++)(0,e[t])(0)},ti.prototype.K=function(){wr("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var t=0,e=this.W;t<e.length;t++)(0,e[t])(1)},ti.G=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},ti);function ti(){var t=this;this.B=function(){return t.q()},this.U=function(){return t.K()},this.W=[],this.j()}function ei(){}function ni(t,e){this.projectId=t,this.database=e||"(default)"}function ri(t,e){this.N=t,this.F=e}function ii(t,e){this.N=t,this.F=e,this.type="FirstParty",this.user=Br.A}function oi(t){var e=this;this.v=null,this.currentUser=Br.UNAUTHENTICATED,this.S=!1,this.D=0,this.P=null,this.forceRefresh=!1,this.v=function(){e.D++,e.currentUser=e.C(),e.S=!0,e.P&&e.P(e.currentUser)},this.D=0,this.auth=t.getImmediate({optional:!0}),this.auth?this.auth.addAuthTokenListener(this.v):(this.v(null),t.get().then(function(t){e.auth=t,e.v&&e.auth.addAuthTokenListener(e.v)},function(){}))}function si(){this.P=null}function ui(t){return null==t}function ai(t){return 0===t&&1/t==-1/0}var ci,hi={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};function fi(t){switch(t){case Dr.OK:return Ir(),0;case Dr.CANCELLED:case Dr.UNKNOWN:case Dr.DEADLINE_EXCEEDED:case Dr.RESOURCE_EXHAUSTED:case Dr.INTERNAL:case Dr.UNAVAILABLE:case Dr.UNAUTHENTICATED:return;case Dr.INVALID_ARGUMENT:case Dr.NOT_FOUND:case Dr.ALREADY_EXISTS:case Dr.PERMISSION_DENIED:case Dr.FAILED_PRECONDITION:case Dr.ABORTED:case Dr.OUT_OF_RANGE:case Dr.UNIMPLEMENTED:case Dr.DATA_LOSS:return 1;default:return Ir(),0}}function li(t){if(void 0===t)return br("GRPC error has no .code"),Dr.UNKNOWN;switch(t){case ci.OK:return Dr.OK;case ci.CANCELLED:return Dr.CANCELLED;case ci.UNKNOWN:return Dr.UNKNOWN;case ci.DEADLINE_EXCEEDED:return Dr.DEADLINE_EXCEEDED;case ci.RESOURCE_EXHAUSTED:return Dr.RESOURCE_EXHAUSTED;case ci.INTERNAL:return Dr.INTERNAL;case ci.UNAVAILABLE:return Dr.UNAVAILABLE;case ci.UNAUTHENTICATED:return Dr.UNAUTHENTICATED;case ci.INVALID_ARGUMENT:return Dr.INVALID_ARGUMENT;case ci.NOT_FOUND:return Dr.NOT_FOUND;case ci.ALREADY_EXISTS:return Dr.ALREADY_EXISTS;case ci.PERMISSION_DENIED:return Dr.PERMISSION_DENIED;case ci.FAILED_PRECONDITION:return Dr.FAILED_PRECONDITION;case ci.ABORTED:return Dr.ABORTED;case ci.OUT_OF_RANGE:return Dr.OUT_OF_RANGE;case ci.UNIMPLEMENTED:return Dr.UNIMPLEMENTED;case ci.DATA_LOSS:return Dr.DATA_LOSS;default:return Ir()}}(me=ci={})[me.OK=0]="OK",me[me.CANCELLED=1]="CANCELLED",me[me.UNKNOWN=2]="UNKNOWN",me[me.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",me[me.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",me[me.NOT_FOUND=5]="NOT_FOUND",me[me.ALREADY_EXISTS=6]="ALREADY_EXISTS",me[me.PERMISSION_DENIED=7]="PERMISSION_DENIED",me[me.UNAUTHENTICATED=16]="UNAUTHENTICATED",me[me.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",me[me.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",me[me.ABORTED=10]="ABORTED",me[me.OUT_OF_RANGE=11]="OUT_OF_RANGE",me[me.UNIMPLEMENTED=12]="UNIMPLEMENTED",me[me.INTERNAL=13]="INTERNAL",me[me.UNAVAILABLE=14]="UNAVAILABLE",me[me.DATA_LOSS=15]="DATA_LOSS";var pi,di,yi,vi=(Pi.prototype.Y=function(t){this.X=t},Pi.prototype.Z=function(t){this.tt=t},Pi.prototype.onMessage=function(t){this.et=t},Pi.prototype.close=function(){this.J()},Pi.prototype.send=function(t){this.H(t)},Pi.prototype.nt=function(){this.X()},Pi.prototype.st=function(t){this.tt(t)},Pi.prototype.it=function(t){this.et(t)},Pi),gi=function(){var n=this;this.promise=new Promise(function(t,e){n.resolve=t,n.reject=e})},mi=(Di.prototype.at=function(e,t,n,r){var i=this.ut(e,t);return wr("RestConnection","Sending: ",i,n),t={},this.ht(t,r),this.lt(e,i,t,n).then(function(t){return wr("RestConnection","Received: ",t),t},function(t){throw _r("RestConnection",e+" failed with error: ",t,"url: ",i,"request:",n),t})},Di.prototype._t=function(t,e,n,r){return this.at(t,e,n,r)},Di.prototype.ht=function(t,e){if(t["X-Goog-Api-Client"]="gl-js/ fire/8.2.0",t["Content-Type"]="text/plain",e)for(var n in e.R)e.R.hasOwnProperty(n)&&(t[n]=e.R[n])},Di.prototype.ut=function(t,e){return t=hi[t],this.ot+"/v1/"+e+":"+t},f(Li,yi=Di),Li.prototype.lt=function(o,e,s,u){return new Promise(function(n,r){var i=new vr;i.listenOnce(pr.COMPLETE,function(){try{switch(i.getLastErrorCode()){case lr.NO_ERROR:var t=i.getResponseJson();wr("Connection","XHR received:",JSON.stringify(t)),n(t);break;case lr.TIMEOUT:wr("Connection",'RPC "'+o+'" timed out'),r(new Pr(Dr.DEADLINE_EXCEEDED,"Request time out"));break;case lr.HTTP_ERROR:var e=i.getStatus();wr("Connection",'RPC "'+o+'" failed with status:',e,"response text:",i.getResponseText()),0<e?(t=i.getResponseJson().error)&&t.status&&t.message?(e=t.status.toLowerCase().replace(/_/g,"-"),e=0<=Object.values(Dr).indexOf(e)?e:Dr.UNKNOWN,r(new Pr(e,t.message))):r(new Pr(Dr.UNKNOWN,"Server responded with status "+i.getStatus())):r(new Pr(Dr.UNAVAILABLE,"Connection failed."));break;default:Ir()}}finally{wr("Connection",'RPC "'+o+'" completed.')}});var t=JSON.stringify(u);i.send(e,"POST",t,s,15)})},Li.prototype.ft=function(t,e){var n,r=[this.ot,"/","google.firestore.v1.Firestore","/",t,"/channel"],i=new sr,o=fr(),t={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.O.projectId+"/databases/"+this.O.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.k};this.ht(t.initMessageHeaders,e),"undefined"!=typeof window&&(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(p())||"object"==typeof navigator&&"ReactNative"===navigator.product||0<=p().indexOf("Electron/")||0<=(n=p()).indexOf("MSIE ")||0<=n.indexOf("Trident/")||0<=p().indexOf("MSAppHost/")||"object"==typeof(n="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0)&&void 0!==n.id||(t.httpHeadersOverwriteParam="$httpHeaders"),wr("Connection","Creating WebChannel: "+(r=r.join("")),t);var s=i.createWebChannel(r,t),u=!1,a=!1,c=new vi({H:function(t){a?wr("Connection","Not sending because WebChannel is closed:",t):(u||(wr("Connection","Opening WebChannel transport."),s.open(),u=!0),wr("Connection","WebChannel sending:",t),s.send(t))},J:function(){return s.close()}});return(t=function(t,e,n){t.listen(e,function(t){try{n(t)}catch(t){setTimeout(function(){throw t},0)}})})(s,yr.EventType.OPEN,function(){a||wr("Connection","WebChannel transport opened.")}),t(s,yr.EventType.CLOSE,function(){a||(a=!0,wr("Connection","WebChannel transport closed"),c.st())}),t(s,yr.EventType.ERROR,function(t){a||(a=!0,_r("Connection","WebChannel transport errored:",t),c.st(new Pr(Dr.UNAVAILABLE,"The operation could not be completed")))}),t(s,yr.EventType.MESSAGE,function(t){var e,n,r,i;a||(Tr(!!(e=t.data[0])),(n=e.error||(null===(i=e[0])||void 0===i?void 0:i.error))?(wr("Connection","WebChannel received error:",n),r=n.status,t=function(){var t=ci[r];if(void 0!==t)return li(t)}(),i=n.message,void 0===t&&(t=Dr.INTERNAL,i="Unknown error status: "+r+" with message "+n.message),a=!0,c.st(new Pr(t,i)),s.close()):(wr("Connection","WebChannel received:",e),c.it(e)))}),t(o,dr.STAT_EVENT,function(t){10===t.stat?wr("Connection","Detected buffering proxy"):11===t.stat&&wr("Connection","Detected no buffering proxy")}),setTimeout(function(){c.nt()},0),c},Li),wi=(ki.now=function(){return ki.fromMillis(Date.now())},ki.fromDate=function(t){return ki.fromMillis(t.getTime())},ki.fromMillis=function(t){var e=Math.floor(t/1e3);return new ki(e,1e6*(t-1e3*e))},ki.prototype.toDate=function(){return new Date(this.toMillis())},ki.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},ki.prototype.dt=function(t){return this.seconds===t.seconds?Or(this.nanoseconds,t.nanoseconds):Or(this.seconds,t.seconds)},ki.prototype.isEqual=function(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds},ki.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},ki.prototype.toJSON=function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}},ki.prototype.valueOf=function(){var t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")},ki),bi=(Ri.wt=function(t){return new Ri(t)},Ri.min=function(){return new Ri(new wi(0,0))},Ri.prototype.u=function(t){return this.timestamp.dt(t.timestamp)},Ri.prototype.isEqual=function(t){return this.timestamp.isEqual(t.timestamp)},Ri.prototype.Et=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},Ri.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},Ri.prototype.Tt=function(){return this.timestamp},Ri),o=(Object.defineProperty(Si.prototype,"length",{get:function(){return this.It},enumerable:!1,configurable:!0}),Si.prototype.isEqual=function(t){return 0===Si.At(this,t)},Si.prototype.child=function(t){var e=this.segments.slice(this.offset,this.limit());return t instanceof Si?t.forEach(function(t){e.push(t)}):e.push(t),this.Rt(e)},Si.prototype.limit=function(){return this.offset+this.length},Si.prototype.Pt=function(t){return t=void 0===t?1:t,this.Rt(this.segments,this.offset+t,this.length-t)},Si.prototype.yt=function(){return this.Rt(this.segments,this.offset,this.length-1)},Si.prototype.gt=function(){return this.segments[this.offset]},Si.prototype.Vt=function(){return this.get(this.length-1)},Si.prototype.get=function(t){return this.segments[this.offset+t]},Si.prototype.bt=function(){return 0===this.length},Si.prototype.vt=function(t){if(t.length<this.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},Si.prototype.St=function(t){if(this.length+1!==t.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},Si.prototype.forEach=function(t){for(var e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])},Si.prototype.Dt=function(){return this.segments.slice(this.offset,this.limit())},Si.At=function(t,e){for(var n=Math.min(t.length,e.length),r=0;r<n;r++){var i=t.get(r),o=e.get(r);if(i<o)return-1;if(o<i)return 1}return t.length<e.length?-1:t.length>e.length?1:0},Si),_i=(f(Oi,di=o),Oi.prototype.Rt=function(t,e,n){return new Oi(t,e,n)},Oi.prototype.Ct=function(){return this.Dt().join("/")},Oi.prototype.toString=function(){return this.Ct()},Oi.xt=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=[],r=0,i=t;r<i.length;r++){var o=i[r];if(0<=o.indexOf("//"))throw new Pr(Dr.INVALID_ARGUMENT,"Invalid segment ("+o+"). Paths must not contain // in them.");n.push.apply(n,o.split("/").filter(function(t){return 0<t.length}))}return new Oi(n)},Oi.Nt=function(){return new Oi([])},Oi),Ei=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Ii=(f(Ni,pi=o),Ni.prototype.Rt=function(t,e,n){return new Ni(t,e,n)},Ni.Ft=function(t){return Ei.test(t)},Ni.prototype.Ct=function(){return this.Dt().map(function(t){return t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ni.Ft(t)||(t="`"+t+"`"),t}).join(".")},Ni.prototype.toString=function(){return this.Ct()},Ni.prototype.Ot=function(){return 1===this.length&&"__name__"===this.get(0)},Ni.kt=function(){return new Ni(["__name__"])},Ni.Mt=function(t){for(var e=[],n="",r=0,i=function(){if(0===n.length)throw new Pr(Dr.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");e.push(n),n=""},o=!1;r<t.length;){var s=t[r];if("\\"===s){if(r+1===t.length)throw new Pr(Dr.INVALID_ARGUMENT,"Path has trailing escape character: "+t);var u=t[r+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new Pr(Dr.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);n+=u,r+=2}else"`"===s?o=!o:"."!==s||o?n+=s:i(),r++}if(i(),o)throw new Pr(Dr.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new Ni(e)},Ni.Nt=function(){return new Ni([])},Ni),Ti=(Ai.Lt=function(t){return new Ai(_i.xt(t))},Ai.$t=function(t){return new Ai(_i.xt(t).Pt(5))},Ai.prototype.Bt=function(t){return 2<=this.path.length&&this.path.get(this.path.length-2)===t},Ai.prototype.isEqual=function(t){return null!==t&&0===_i.At(this.path,t.path)},Ai.prototype.toString=function(){return this.path.toString()},Ai.At=function(t,e){return _i.At(t.path,e.path)},Ai.qt=function(t){return t.length%2==0},Ai.Ut=function(t){return new Ai(new _i(t.slice()))},Ai);function Ai(t){this.path=t}function Ni(){return null!==pi&&pi.apply(this,arguments)||this}function Oi(){return null!==di&&di.apply(this,arguments)||this}function Si(t,e,n){void 0===e?e=0:e>t.length&&Ir(),void 0===n?n=t.length-e:n>t.length-e&&Ir(),this.segments=t,this.offset=e,this.It=n}function Ri(t){this.timestamp=t}function ki(t,e){if(this.seconds=t,(this.nanoseconds=e)<0)throw new Pr(Dr.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(1e9<=e)throw new Pr(Dr.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new Pr(Dr.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(253402300800<=t)throw new Pr(Dr.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}function Li(t){var e=this;return(e=yi.call(this,t)||this).forceLongPolling=t.forceLongPolling,e.k=t.k,e}function Di(t){this.rt=t,this.O=t.O;var e=t.ssl?"https":"http";this.ot=e+"://"+t.host,this.ct="projects/"+this.O.projectId+"/databases/"+this.O.database+"/documents"}function Pi(t){this.H=t.H,this.J=t.J}function Ci(t){var e,n=0;for(e in t)Object.prototype.hasOwnProperty.call(t,e)&&n++;return n}function Ui(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Vi(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var xi=(ji.prototype.Qt=function(t){for(var e=0,n=this.fields;e<n.length;e++)if(n[e].vt(t))return!0;return!1},ji.prototype.isEqual=function(t){return Sr(this.fields,t.fields,function(t,e){return t.isEqual(e)})},ji),Mi=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ji(t){(this.fields=t).sort(Ii.At)}function qi(t){if(Tr(!!t),"string"!=typeof t)return{seconds:Fi(t.seconds),nanos:Fi(t.nanos)};var e=0,n=Mi.exec(t);return Tr(!!n),n[1]&&(n=(n[1]+"000000000").substr(0,9),e=Number(n)),t=new Date(t),{seconds:Math.floor(t.getTime()/1e3),nanos:e}}function Fi(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function Bi(t){return"string"==typeof t?Rr.fromBase64String(t):Rr.fromUint8Array(t)}function Gi(t){return"server_timestamp"===(null===(t=((null===(t=null==t?void 0:t.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function zi(t){return t=qi(t.mapValue.fields.__local_write_time__.timestampValue),new wi(t.seconds,t.nanos)}function Hi(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Gi(t)?4:10:Ir()}function Wi(r,i){var t,e=Hi(r);if(e!==Hi(i))return!1;switch(e){case 0:return!0;case 1:return r.booleanValue===i.booleanValue;case 4:return zi(r).isEqual(zi(i));case 3:return function(t){if("string"==typeof r.timestampValue&&"string"==typeof t.timestampValue&&r.timestampValue.length===t.timestampValue.length)return r.timestampValue===t.timestampValue;var e=qi(r.timestampValue),t=qi(t.timestampValue);return e.seconds===t.seconds&&e.nanos===t.nanos}(i);case 5:return r.stringValue===i.stringValue;case 6:return t=i,Bi(r.bytesValue).isEqual(Bi(t.bytesValue));case 7:return r.referenceValue===i.referenceValue;case 8:return e=i,Fi((t=r).geoPointValue.latitude)===Fi(e.geoPointValue.latitude)&&Fi(t.geoPointValue.longitude)===Fi(e.geoPointValue.longitude);case 2:return t=i,"integerValue"in(e=r)&&"integerValue"in t?Fi(e.integerValue)===Fi(t.integerValue):"doubleValue"in e&&"doubleValue"in t&&((e=Fi(e.doubleValue))===(t=Fi(t.doubleValue))?ai(e)===ai(t):isNaN(e)&&isNaN(t));case 9:return Sr(r.arrayValue.values||[],i.arrayValue.values||[],Wi);case 10:return function(){var t,e=r.mapValue.fields||{},n=i.mapValue.fields||{};if(Ci(e)!==Ci(n))return!1;for(t in e)if(e.hasOwnProperty(t)&&(void 0===n[t]||!Wi(e[t],n[t])))return!1;return!0}();default:return Ir()}}function Yi(t,e){return void 0!==(t.values||[]).find(function(t){return Wi(t,e)})}function Qi(t,e){var n,r,i,o=Hi(t),s=Hi(e);if(o!==s)return Or(o,s);switch(o){case 0:return 0;case 1:return Or(t.booleanValue,e.booleanValue);case 2:return n=e,(r=Fi(t.integerValue||t.doubleValue))<(n=Fi(n.integerValue||n.doubleValue))?-1:n<r?1:r===n?0:isNaN(r)?isNaN(n)?0:-1:1;case 3:return Ki(t.timestampValue,e.timestampValue);case 4:return Ki(zi(t),zi(e));case 5:return Or(t.stringValue,e.stringValue);case 6:return i=t.bytesValue,s=e.bytesValue,i=Bi(i),s=Bi(s),i.u(s);case 7:return function(t,e){for(var n=t.split("/"),r=e.split("/"),i=0;i<n.length&&i<r.length;i++){var o=Or(n[i],r[i]);if(0!==o)return o}return Or(n.length,r.length)}(t.referenceValue,e.referenceValue);case 8:return o=t.geoPointValue,r=e.geoPointValue,0!==(n=Or(Fi(o.latitude),Fi(r.latitude)))?n:Or(Fi(o.longitude),Fi(r.longitude));case 9:return function(t,e){for(var n=t.values||[],r=e.values||[],i=0;i<n.length&&i<r.length;++i){var o=Qi(n[i],r[i]);if(o)return o}return Or(n.length,r.length)}(t.arrayValue,e.arrayValue);case 10:return function(t,e){var n=t.fields||{},r=Object.keys(n),i=e.fields||{},o=Object.keys(i);r.sort(),o.sort();for(var s=0;s<r.length&&s<o.length;++s){var u=Or(r[s],o[s]);if(0!==u)return u;if(0!==(u=Qi(n[r[s]],i[o[s]])))return u}return Or(r.length,o.length)}(t.mapValue,e.mapValue);default:throw Ir()}}function Ki(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return Or(t,e);var n=qi(t),t=qi(e);return 0!==(e=Or(n.seconds,t.seconds))?e:Or(n.nanos,t.nanos)}function Xi(t){return function s(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?"time("+(t=qi(t=i.timestampValue)).seconds+","+t.nanos+")":"stringValue"in i?i.stringValue:"bytesValue"in i?Bi(i.bytesValue).toBase64():"referenceValue"in i?(e=i.referenceValue,Ti.$t(e).toString()):"geoPointValue"in i?"geo("+(e=i.geoPointValue).latitude+","+e.longitude+")":"arrayValue"in i?function(){for(var t="[",e=!0,n=0,r=i.arrayValue.values||[];n<r.length;n++)e?e=!1:t+=",",t+=s(r[n]);return t+"]"}():"mapValue"in i?function(t){for(var e="{",n=!0,r=0,i=Object.keys(t.fields||{}).sort();r<i.length;r++){var o=i[r];n?n=!1:e+=",",e+=o+":"+s(t.fields[o])}return e+"}"}(i.mapValue):Ir();var t,e}(t)}function Ji(t,e){return{referenceValue:"projects/"+t.projectId+"/databases/"+t.database+"/documents/"+e.path.Ct()}}function $i(t){return t&&"integerValue"in t}function Zi(t){return!!t&&"arrayValue"in t}function to(t){return t&&"nullValue"in t}function eo(t){return t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function no(t){return t&&"mapValue"in t}var ro=(so.empty=function(){return new so({mapValue:{}})},so.prototype.field=function(t){if(t.bt())return this.proto;for(var e=this.proto,n=0;n<t.length-1;++n){if(!e.mapValue.fields)return null;if(!no(e=e.mapValue.fields[t.get(n)]))return null}return(e=(e.mapValue.fields||{})[t.Vt()])||null},so.prototype.isEqual=function(t){return Wi(this.proto,t.proto)},so),io=(oo.prototype.set=function(t,e){return this.jt(t,e),this},oo.prototype.delete=function(t){return this.jt(t,null),this},oo.prototype.jt=function(t,e){for(var n=this.Wt,r=0;r<t.length-1;++r)var i=t.get(r),o=n.get(i),n=(o instanceof Map||(o=o&&10===Hi(o)?new Map(Object.entries(o.mapValue.fields||{})):new Map,n.set(i,o)),o);n.set(t.Vt(),e)},oo.prototype.Gt=function(){var t=this.zt(Ii.Nt(),this.Wt);return null!=t?new ro(t):this.Kt},oo.prototype.zt=function(r,t){var i=this,o=!1,e=this.Kt.field(r),s=no(e)?Object.assign({},e.mapValue.fields):{};return t.forEach(function(t,e){var n;t instanceof Map?null!=(n=i.zt(r.child(e),t))&&(s[e]=n,o=!0):null!==t?(s[e]=t,o=!0):s.hasOwnProperty(e)&&(delete s[e],o=!0)}),o?{mapValue:{fields:s}}:null},oo);function oo(t){void 0===t&&(t=ro.empty()),this.Kt=t,this.Wt=new Map}function so(t){this.proto=t}var uo,ao,co,ho=(f(go,co=me=function(t,e){this.key=t,this.version=e}),go.prototype.field=function(t){return this.Ht.field(t)},go.prototype.data=function(){return this.Ht},go.prototype.Yt=function(){return this.Ht.proto},go.prototype.isEqual=function(t){return t instanceof go&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.Jt===t.Jt&&this.hasCommittedMutations===t.hasCommittedMutations&&this.Ht.isEqual(t.Ht)},go.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+this.Ht.toString()+", {hasLocalMutations: "+this.Jt+"}), {hasCommittedMutations: "+this.hasCommittedMutations+"})"},Object.defineProperty(go.prototype,"hasPendingWrites",{get:function(){return this.Jt||this.hasCommittedMutations},enumerable:!1,configurable:!0}),go),fo=(f(vo,ao=me),vo.prototype.toString=function(){return"NoDocument("+this.key+", "+this.version+")"},Object.defineProperty(vo.prototype,"hasPendingWrites",{get:function(){return this.hasCommittedMutations},enumerable:!1,configurable:!0}),vo.prototype.isEqual=function(t){return t instanceof vo&&t.hasCommittedMutations===this.hasCommittedMutations&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},vo),lo=(f(yo,uo=me),yo.prototype.toString=function(){return"UnknownDocument("+this.key+", "+this.version+")"},Object.defineProperty(yo.prototype,"hasPendingWrites",{get:function(){return!0},enumerable:!1,configurable:!0}),yo.prototype.isEqual=function(t){return t instanceof yo&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},yo),po=function(t,e,n,r,i,o,s){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=s,this.Xt=null};function yo(){return null!==uo&&uo.apply(this,arguments)||this}function vo(t,e,n){var r=this;return(r=ao.call(this,t,e)||this).hasCommittedMutations=!(!n||!n.hasCommittedMutations),r}function go(t,e,n,r){var i=this;return(i=co.call(this,t,e)||this).Ht=n,i.Jt=!!r.Jt,i.hasCommittedMutations=!!r.hasCommittedMutations,i}function mo(t,e,n,r,i,o,s){return void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),new po(t,e,n,r,i,o,s)}function wo(t){var e=t;return null===e.Xt&&(t=e.path.Ct(),null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(function(t){return t.field.Ct()+t.op.toString()+Xi(t.value)}).join(","),t+="|ob:",t+=e.orderBy.map(function(t){return t.field.Ct()+t.dir}).join(","),ui(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=Qo(e.startAt)),e.endAt&&(t+="|ub:",t+=Qo(e.endAt)),e.Xt=t),e.Xt}function bo(t,e){if(t.limit!==e.limit)return!1;if(t.orderBy.length!==e.orderBy.length)return!1;for(var n,r,i=0;i<t.orderBy.length;i++)if(n=t.orderBy[i],r=e.orderBy[i],n.dir!==r.dir||!n.field.isEqual(r.field))return!1;if(t.filters.length!==e.filters.length)return!1;for(var o,s,u=0;u<t.filters.length;u++)if(o=t.filters[u],s=e.filters[u],o.op!==s.op||!o.field.isEqual(s.field)||!Wi(o.value,s.value))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Jo(t.startAt,e.startAt)&&Jo(t.endAt,e.endAt)}function _o(t){return Ti.qt(t.path)&&null===t.collectionGroup&&0===t.filters.length}var Eo,Io=(f(To,Eo=function(){}),To.create=function(t,e,n){return t.Ot()?"in"===e||"not-in"===e?this.Zt(t,e,n):new So(t,e,n):"array-contains"===e?new jo(t,n):"in"===e?new qo(t,n):"not-in"===e?new Fo(t,n):"array-contains-any"===e?new Bo(t,n):new To(t,e,n)},To.Zt=function(t,e,n){return new("in"===e?Ro:ko)(t,n)},To.prototype.matches=function(t){return t=t.field(this.field),"!="===this.op?null!==t&&this.te(Qi(t,this.value)):null!==t&&Hi(this.value)===Hi(t)&&this.te(Qi(t,this.value))},To.prototype.te=function(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return 0<t;case">=":return 0<=t;default:return Ir()}},To.prototype.ee=function(){return 0<=["<","<=",">",">=","!=","not-in"].indexOf(this.op)},To);function To(t,e,n){var r=this;return(r=Eo.call(this)||this).field=t,r.op=e,r.value=n,r}var Ao,No,Oo,So=(f(Po,Oo=Io),Po.prototype.matches=function(t){return t=Ti.At(t.key,this.key),this.te(t)},Po),Ro=(f(Do,No=Io),Do.prototype.matches=function(e){return this.keys.some(function(t){return t.isEqual(e.key)})},Do),ko=(f(Lo,Ao=Io),Lo.prototype.matches=function(e){return!this.keys.some(function(t){return t.isEqual(e.key)})},Lo);function Lo(t,e){var n=this;return(n=Ao.call(this,t,"not-in",e)||this).keys=Co(0,e),n}function Do(t,e){var n=this;return(n=No.call(this,t,"in",e)||this).keys=Co(0,e),n}function Po(t,e,n){var r=this;return(r=Oo.call(this,t,e,n)||this).key=Ti.$t(n.referenceValue),r}function Co(t,e){return((null===(e=e.arrayValue)||void 0===e?void 0:e.values)||[]).map(function(t){return Ti.$t(t.referenceValue)})}var Uo,Vo,xo,Mo,jo=(f(Yo,Mo=Io),Yo.prototype.matches=function(t){return Zi(t=t.field(this.field))&&Yi(t.arrayValue,this.value)},Yo),qo=(f(Wo,xo=Io),Wo.prototype.matches=function(t){return null!==(t=t.field(this.field))&&Yi(this.value.arrayValue,t)},Wo),Fo=(f(Ho,Vo=Io),Ho.prototype.matches=function(t){return!Yi(this.value.arrayValue,{nullValue:"NULL_VALUE"})&&(null!==(t=t.field(this.field))&&!Yi(this.value.arrayValue,t))},Ho),Bo=(f(zo,Uo=Io),zo.prototype.matches=function(t){var e=this;return!(!Zi(t=t.field(this.field))||!t.arrayValue.values)&&t.arrayValue.values.some(function(t){return Yi(e.value.arrayValue,t)})},zo),Go=function(t,e){this.position=t,this.before=e};function zo(t,e){return Uo.call(this,t,"array-contains-any",e)||this}function Ho(t,e){return Vo.call(this,t,"not-in",e)||this}function Wo(t,e){return xo.call(this,t,"in",e)||this}function Yo(t,e){return Mo.call(this,t,"array-contains",e)||this}function Qo(t){return(t.before?"b":"a")+":"+t.position.map(Xi).join(",")}var Ko=function(t,e){void 0===e&&(e="asc"),this.field=t,this.dir=e};function Xo(t,e,n){for(var r=0,i=0;i<t.position.length;i++){var o=e[i],s=t.position[i],r=o.field.Ot()?Ti.At(Ti.$t(s.referenceValue),n.key):Qi(s,n.field(o.field));if("desc"===o.dir&&(r*=-1),0!==r)break}return t.before?r<=0:r<0}function Jo(t,e){if(null===t)return null===e;if(null===e)return!1;if(t.before!==e.before||t.position.length!==e.position.length)return!1;for(var n=0;n<t.position.length;n++)if(!Wi(t.position[n],e.position[n]))return!1;return!0}var $o=function(t,e,n,r,i,o,s,u){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o="F"),void 0===s&&(s=null),void 0===u&&(u=null),this.path=t,this.collectionGroup=e,this.ne=n,this.filters=r,this.limit=i,this.limitType=o,this.startAt=s,this.endAt=u,this.se=null,this.ie=null,this.startAt,this.endAt};function Zo(t){return new $o(t)}function ts(t){return!ui(t.limit)&&"F"===t.limitType}function es(t){return!ui(t.limit)&&"L"===t.limitType}function ns(t){return 0<t.ne.length?t.ne[0].field:null}function rs(t){for(var e=0,n=t.filters;e<n.length;e++){var r=n[e];if(r.ee())return r.field}return null}function is(t){return null!==t.collectionGroup}function os(t){var e=t;if(null===e.se){e.se=[];var n=rs(e),t=ns(e);if(null!==n&&null===t)n.Ot()||e.se.push(new Ko(n)),e.se.push(new Ko(Ii.kt(),"asc"));else{for(var r=!1,i=0,o=e.ne;i<o.length;i++){var s=o[i];e.se.push(s),s.field.Ot()&&(r=!0)}r||(n=0<e.ne.length?e.ne[e.ne.length-1].dir:"asc",e.se.push(new Ko(Ii.kt(),n)))}}return e.se}function ss(t){var e=t;if(!e.ie)if("F"===e.limitType)e.ie=mo(e.path,e.collectionGroup,os(e),e.filters,e.limit,e.startAt,e.endAt);else{for(var n=[],r=0,i=os(e);r<i.length;r++){var o=i[r],s="desc"===o.dir?"asc":"desc";n.push(new Ko(o.field,s))}var u=e.endAt?new Go(e.endAt.position,!e.endAt.before):null,t=e.startAt?new Go(e.startAt.position,!e.startAt.before):null;e.ie=mo(e.path,e.collectionGroup,n,e.filters,e.limit,u,t)}return e.ie}function us(t,e,n){return new $o(t.path,t.collectionGroup,t.ne.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function as(t,e){return bo(ss(t),ss(e))&&t.limitType===e.limitType}function cs(t){return wo(ss(t))+"|lt:"+t.limitType}function hs(t){return"Query(target="+(n=(e=ss(t)).path.Ct(),null!==e.collectionGroup&&(n+=" collectionGroup="+e.collectionGroup),0<e.filters.length&&(n+=", filters: ["+e.filters.map(function(t){return t.field.Ct()+" "+t.op+" "+Xi(t.value)}).join(", ")+"]"),ui(e.limit)||(n+=", limit: "+e.limit),0<e.orderBy.length&&(n+=", orderBy: ["+e.orderBy.map(function(t){return t.field.Ct()+" ("+t.dir+")"}).join(", ")+"]"),e.startAt&&(n+=", startAt: "+Qo(e.startAt)),e.endAt&&(n+=", endAt: "+Qo(e.endAt)),"Target("+n+")")+"; limitType="+t.limitType+")";var e,n}function fs(i,t){return e=i,n=t.key.path,(null!==e.collectionGroup?t.key.Bt(e.collectionGroup)&&e.path.vt(n):Ti.qt(e.path)?e.path.isEqual(n):e.path.St(n))&&function(t){for(var e=0,n=i.ne;e<n.length;e++){var r=n[e];if(!r.field.Ot()&&null===t.field(r.field))return}return 1}(t)&&function(t){for(var e=0,n=i.filters;e<n.length;e++)if(!n[e].matches(t))return;return 1}(t)&&(n=t,(!(t=i).startAt||Xo(t.startAt,os(t),n))&&(!t.endAt||!Xo(t.endAt,os(t),n)));var e,n}function ls(u){return function(t,e){for(var n=!1,r=0,i=os(u);r<i.length;r++){var o=i[r],s=function(t,e,n){var r,i;switch(n=t.field.Ot()?Ti.At(e.key,n.key):(r=t.field,i=n,e=e.field(r),r=i.field(r),null!==e&&null!==r?Qi(e,r):Ir()),t.dir){case"asc":return n;case"desc":return-1*n;default:return Ir()}}(o,t,e);if(0!==s)return s;n=n||o.field.Ot()}return 0}}var ps=(ds.prototype.ce=function(t){return new ds(this.target,this.targetId,this.re,t,this.oe,this.lastLimboFreeSnapshotVersion,this.resumeToken)},ds.prototype.ae=function(t,e){return new ds(this.target,this.targetId,this.re,this.sequenceNumber,e,this.lastLimboFreeSnapshotVersion,t)},ds.prototype.ue=function(t){return new ds(this.target,this.targetId,this.re,this.sequenceNumber,this.oe,t,this.resumeToken)},ds);function ds(t,e,n,r,i,o,s){void 0===i&&(i=bi.min()),void 0===o&&(o=bi.min()),void 0===s&&(s=Rr.h),this.target=t,this.targetId=e,this.re=n,this.sequenceNumber=r,this.oe=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=s}function ys(t,e){if(t.he){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ai(e)?"-0":e}}function vs(t){return{integerValue:""+t}}function gs(t,e){return"number"==typeof(n=e)&&Number.isInteger(n)&&!ai(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER?vs(e):ys(t,e);var n}function ms(t,e){return t instanceof Ls?$i(t=e)||t&&"doubleValue"in t?e:{integerValue:0}:null}var ws,bs,_s=(f(Ts,bs=o=function(){this.le=void 0}),Ts),Es=(f(Is,ws=o),Is);function Is(t){var e=this;return(e=ws.call(this)||this).elements=t,e}function Ts(){return null!==bs&&bs.apply(this,arguments)||this}function As(t,e){for(var n=Cs(e),r=0,i=t.elements;r<i.length;r++)!function(e){n.some(function(t){return Wi(t,e)})||n.push(e)}(i[r]);return{arrayValue:{values:n}}}var Ns,Os=(f(Ss,Ns=o),Ss);function Ss(t){var e=this;return(e=Ns.call(this)||this).elements=t,e}function Rs(t,e){for(var n=Cs(e),r=0,i=t.elements;r<i.length;r++)!function(e){n=n.filter(function(t){return!Wi(t,e)})}(i[r]);return{arrayValue:{values:n}}}var ks,Ls=(f(Ds,ks=o),Ds);function Ds(t,e){var n=this;return(n=ks.call(this)||this).fe=t,n._e=e,n}function Ps(t){return Fi(t.integerValue||t.doubleValue)}function Cs(t){return Zi(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function Us(t,e){this.field=t,this.transform=e}function Vs(t,e){this.version=t,this.transformResults=e}var xs=(Ms.de=function(){return new Ms},Ms.exists=function(t){return new Ms(void 0,t)},Ms.updateTime=function(t){return new Ms(t)},Object.defineProperty(Ms.prototype,"we",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!1,configurable:!0}),Ms.prototype.isEqual=function(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)},Ms);function Ms(t,e){this.updateTime=t,this.exists=e}function js(t,e){return void 0!==t.updateTime?e instanceof ho&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e instanceof ho}function qs(t,e,n,r){return t instanceof Hs?function(t,e,n,r){if(!js(t.Ee,e))return e;var i=t.value;return t.fieldTransforms&&(r=Js(t.fieldTransforms,n,e,r),i=$s(t.fieldTransforms,i,r)),e=Bs(e),new ho(t.key,e,i,{Jt:!0})}(t,e,r,n):t instanceof Ws?function(t,e,n,r){if(!js(t.Ee,e))return e;var i=Bs(e),r=Ks(t,e,Js(t.fieldTransforms,n,e,r));return new ho(t.key,i,r,{Jt:!0})}(t,e,r,n):js(t.Ee,e)?new fo(t.key,bi.min()):e}function Fs(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.Ee.isEqual(e.Ee)&&(n=t.fieldTransforms,r=e.fieldTransforms,!!(void 0===n&&void 0===r||n&&r&&Sr(n,r,function(t,e){return t.field.isEqual(e.field)&&(t=t.transform,e=e.transform,t instanceof Es&&e instanceof Es||t instanceof Os&&e instanceof Os?Sr(t.elements,e.elements,Wi):t instanceof Ls&&e instanceof Ls?Wi(t._e,e._e):t instanceof _s&&e instanceof _s)})))&&(0===t.type?t.value.isEqual(e.value):1!==t.type||t.data.isEqual(e.data)&&t.Te.isEqual(e.Te));var n,r}function Bs(t){return t instanceof ho?t.version:bi.min()}var Gs,zs,Hs=(f(Qs,zs=me=function(){}),Qs),Ws=(f(Ys,Gs=me),Ys);function Ys(t,e,n,r,i){void 0===i&&(i=[]);var o=this;return(o=Gs.call(this)||this).key=t,o.data=e,o.Te=n,o.Ee=r,o.fieldTransforms=i,o.type=1,o}function Qs(t,e,n,r){void 0===r&&(r=[]);var i=this;return(i=zs.call(this)||this).key=t,i.value=e,i.Ee=n,i.fieldTransforms=r,i.type=0,i}function Ks(t,e,n){var r,i,o=t;return e=e instanceof ho?e.data():ro.empty(),i=new io(e),o.Te.fields.forEach(function(t){var e;t.bt()||(null!==(e=o.data.field(t))?i.set(t,e):i.delete(t))}),r=i.Gt(),$s(t.fieldTransforms,r,n)}function Xs(t,e,n){var r=[];Tr(t.length===n.length);for(var i=0;i<n.length;i++){var o=t[i],s=o.transform,u=null;e instanceof ho&&(u=e.field(o.field)),r.push((o=s,s=u,u=n[i],o instanceof Es?As(o,s):o instanceof Os?Rs(o,s):u))}return r}function Js(t,e,n,r){for(var i,o=[],s=0,u=t;s<u.length;s++){var a=u[s],c=a.transform,h=null;n instanceof ho&&(h=n.field(a.field)),null===h&&r instanceof ho&&(h=r.field(a.field)),o.push((i=h,a=e,h=void 0,c instanceof _s?(h={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}},i&&(h.fields.__previous_value__=i),{mapValue:h}):c instanceof Es?As(c,i):c instanceof Os?Rs(c,i):(i=Ps(c=ms(h=c,i))+Ps(h._e),$i(c)&&$i(h._e)?vs(i):ys(h.fe,i))))}return o}function $s(t,e,n){for(var r=new io(e),i=0;i<t.length;i++){var o=t[i];r.set(o.field,n[i])}return r.Gt()}function Zs(t){this.count=t}var tu,eu,nu=(f(fu,eu=me),fu),ru=(f(hu,tu=me),hu),iu=(cu.prototype.Ie=function(t,e){return new cu(this.At,this.root.Ie(t,e,this.At).copy(null,null,su.me,null,null))},cu.prototype.remove=function(t){return new cu(this.At,this.root.remove(t,this.At).copy(null,null,su.me,null,null))},cu.prototype.get=function(t){for(var e=this.root;!e.bt();){var n=this.At(t,e.key);if(0===n)return e.value;n<0?e=e.left:0<n&&(e=e.right)}return null},cu.prototype.indexOf=function(t){for(var e=0,n=this.root;!n.bt();){var r=this.At(t,n.key);if(0===r)return e+n.left.size;n=r<0?n.left:(e+=n.left.size+1,n.right)}return-1},cu.prototype.bt=function(){return this.root.bt()},Object.defineProperty(cu.prototype,"size",{get:function(){return this.root.size},enumerable:!1,configurable:!0}),cu.prototype.Ae=function(){return this.root.Ae()},cu.prototype.Re=function(){return this.root.Re()},cu.prototype.Pe=function(t){return this.root.Pe(t)},cu.prototype.forEach=function(n){this.Pe(function(t,e){return n(t,e),!1})},cu.prototype.toString=function(){var n=[];return this.Pe(function(t,e){return n.push(t+":"+e),!1}),"{"+n.join(", ")+"}"},cu.prototype.ye=function(t){return this.root.ye(t)},cu.prototype.ge=function(){return new ou(this.root,null,this.At,!1)},cu.prototype.Ve=function(t){return new ou(this.root,t,this.At,!1)},cu.prototype.pe=function(){return new ou(this.root,null,this.At,!0)},cu.prototype.be=function(t){return new ou(this.root,t,this.At,!0)},cu),ou=(au.prototype.De=function(){var t=this.Se.pop(),e={key:t.key,value:t.value};if(this.ve)for(t=t.left;!t.bt();)this.Se.push(t),t=t.right;else for(t=t.right;!t.bt();)this.Se.push(t),t=t.left;return e},au.prototype.Ce=function(){return 0<this.Se.length},au.prototype.xe=function(){if(0===this.Se.length)return null;var t=this.Se[this.Se.length-1];return{key:t.key,value:t.value}},au),su=(uu.prototype.copy=function(t,e,n,r,i){return new uu(null!=t?t:this.key,null!=e?e:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)},uu.prototype.bt=function(){return!1},uu.prototype.Pe=function(t){return this.left.Pe(t)||t(this.key,this.value)||this.right.Pe(t)},uu.prototype.ye=function(t){return this.right.ye(t)||t(this.key,this.value)||this.left.ye(t)},uu.prototype.min=function(){return this.left.bt()?this:this.left.min()},uu.prototype.Ae=function(){return this.min().key},uu.prototype.Re=function(){return this.right.bt()?this.key:this.right.Re()},uu.prototype.Ie=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.Ie(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.Ie(t,e,n))).Ne()},uu.prototype.Fe=function(){if(this.left.bt())return uu.EMPTY;var t=this;return t.left.Oe()||t.left.left.Oe()||(t=t.ke()),(t=t.copy(null,null,null,t.left.Fe(),null)).Ne()},uu.prototype.remove=function(t,e){var n,r=this;if(e(t,r.key)<0)r.left.bt()||r.left.Oe()||r.left.left.Oe()||(r=r.ke()),r=r.copy(null,null,null,r.left.remove(t,e),null);else{if(r.left.Oe()&&(r=r.Me()),r.right.bt()||r.right.Oe()||r.right.left.Oe()||(r=r.Le()),0===e(t,r.key)){if(r.right.bt())return uu.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.Fe())}r=r.copy(null,null,null,null,r.right.remove(t,e))}return r.Ne()},uu.prototype.Oe=function(){return this.color},uu.prototype.Ne=function(){var t=this;return t.right.Oe()&&!t.left.Oe()&&(t=t.$e()),t.left.Oe()&&t.left.left.Oe()&&(t=t.Me()),t.left.Oe()&&t.right.Oe()&&(t=t.Be()),t},uu.prototype.ke=function(){var t=this.Be();return t.right.left.Oe()&&(t=(t=(t=t.copy(null,null,null,null,t.right.Me())).$e()).Be()),t},uu.prototype.Le=function(){var t=this.Be();return t.left.left.Oe()&&(t=(t=t.Me()).Be()),t},uu.prototype.$e=function(){var t=this.copy(null,null,uu.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)},uu.prototype.Me=function(){var t=this.copy(null,null,uu.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)},uu.prototype.Be=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},uu.prototype.qe=function(){var t=this.Ue();return Math.pow(2,t)<=this.size+1},uu.prototype.Ue=function(){if(this.Oe()&&this.left.Oe())throw Ir();if(this.right.Oe())throw Ir();var t=this.left.Ue();if(t!==this.right.Ue())throw Ir();return t+(this.Oe()?0:1)},uu);function uu(t,e,n,r,i){this.key=t,this.value=e,this.color=null!=n?n:uu.RED,this.left=null!=r?r:uu.EMPTY,this.right=null!=i?i:uu.EMPTY,this.size=this.left.size+1+this.right.size}function au(t,e,n,r){this.ve=r,this.Se=[];for(var i=1;!t.bt();)if(i=e?n(t.key,e):1,r&&(i*=-1),i<0)t=this.ve?t.left:t.right;else{if(0===i){this.Se.push(t);break}this.Se.push(t),t=this.ve?t.right:t.left}}function cu(t,e){this.At=t,this.root=e||su.EMPTY}function hu(t,e){var n=this;return(n=tu.call(this)||this).key=t,n.Ee=e,n.type=3,n.fieldTransforms=[],n}function fu(t,e){var n=this;return(n=eu.call(this)||this).key=t,n.Ee=e,n.type=2,n.fieldTransforms=[],n}function lu(){this.size=0}su.EMPTY=null,su.RED=!0,su.me=!1,su.EMPTY=(Object.defineProperty(lu.prototype,"key",{get:function(){throw Ir()},enumerable:!1,configurable:!0}),Object.defineProperty(lu.prototype,"value",{get:function(){throw Ir()},enumerable:!1,configurable:!0}),Object.defineProperty(lu.prototype,"color",{get:function(){throw Ir()},enumerable:!1,configurable:!0}),Object.defineProperty(lu.prototype,"left",{get:function(){throw Ir()},enumerable:!1,configurable:!0}),Object.defineProperty(lu.prototype,"right",{get:function(){throw Ir()},enumerable:!1,configurable:!0}),lu.prototype.copy=function(t,e,n,r,i){return this},lu.prototype.Ie=function(t,e,n){return new su(t,e)},lu.prototype.remove=function(t,e){return this},lu.prototype.bt=function(){return!0},lu.prototype.Pe=function(t){return!1},lu.prototype.ye=function(t){return!1},lu.prototype.Ae=function(){return null},lu.prototype.Re=function(){return null},lu.prototype.Oe=function(){return!1},lu.prototype.qe=function(){return!0},lu.prototype.Ue=function(){return 0},new lu);var pu=(gu.prototype.has=function(t){return null!==this.data.get(t)},gu.prototype.first=function(){return this.data.Ae()},gu.prototype.last=function(){return this.data.Re()},Object.defineProperty(gu.prototype,"size",{get:function(){return this.data.size},enumerable:!1,configurable:!0}),gu.prototype.indexOf=function(t){return this.data.indexOf(t)},gu.prototype.forEach=function(n){this.data.Pe(function(t,e){return n(t),!1})},gu.prototype.Qe=function(t,e){for(var n=this.data.Ve(t[0]);n.Ce();){var r=n.De();if(0<=this.At(r.key,t[1]))return;e(r.key)}},gu.prototype.Ke=function(t,e){for(var n=void 0!==e?this.data.Ve(e):this.data.ge();n.Ce();)if(!t(n.De().key))return},gu.prototype.We=function(t){return(t=this.data.Ve(t)).Ce()?t.De().key:null},gu.prototype.ge=function(){return new du(this.data.ge())},gu.prototype.Ve=function(t){return new du(this.data.Ve(t))},gu.prototype.add=function(t){return this.copy(this.data.remove(t).Ie(t,!0))},gu.prototype.delete=function(t){return this.has(t)?this.copy(this.data.remove(t)):this},gu.prototype.bt=function(){return this.data.bt()},gu.prototype.je=function(t){var e=this;return e.size<t.size&&(e=t,t=this),t.forEach(function(t){e=e.add(t)}),e},gu.prototype.isEqual=function(t){if(!(t instanceof gu))return!1;if(this.size!==t.size)return!1;for(var e=this.data.ge(),n=t.data.ge();e.Ce();){var r=e.De().key,i=n.De().key;if(0!==this.At(r,i))return!1}return!0},gu.prototype.Dt=function(){var e=[];return this.forEach(function(t){e.push(t)}),e},gu.prototype.toString=function(){var e=[];return this.forEach(function(t){return e.push(t)}),"SortedSet("+e.toString()+")"},gu.prototype.copy=function(t){var e=new gu(this.At);return e.data=t,e},gu),du=(vu.prototype.De=function(){return this.Ge.De().key},vu.prototype.Ce=function(){return this.Ge.Ce()},vu),yu=new iu(Ti.At);function vu(t){this.Ge=t}function gu(t){this.At=t,this.data=new iu(this.At)}var mu=new iu(Ti.At),wu=new iu(Ti.At),bu=new pu(Ti.At);function _u(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=bu,r=0,i=t;r<i.length;r++)var o=i[r],n=n.add(o);return n}var Eu=new pu(Or),Iu=(ju.Je=function(t){return new ju(t.At)},ju.prototype.has=function(t){return null!=this.ze.get(t)},ju.prototype.get=function(t){return this.ze.get(t)},ju.prototype.first=function(){return this.He.Ae()},ju.prototype.last=function(){return this.He.Re()},ju.prototype.bt=function(){return this.He.bt()},ju.prototype.indexOf=function(t){return(t=this.ze.get(t))?this.He.indexOf(t):-1},Object.defineProperty(ju.prototype,"size",{get:function(){return this.He.size},enumerable:!1,configurable:!0}),ju.prototype.forEach=function(n){this.He.Pe(function(t,e){return n(t),!1})},ju.prototype.add=function(t){var e=this.delete(t.key);return e.copy(e.ze.Ie(t.key,t),e.He.Ie(t,null))},ju.prototype.delete=function(t){var e=this.get(t);return e?this.copy(this.ze.remove(t),this.He.remove(e)):this},ju.prototype.isEqual=function(t){if(!(t instanceof ju))return!1;if(this.size!==t.size)return!1;for(var e=this.He.ge(),n=t.He.ge();e.Ce();){var r=e.De().key,i=n.De().key;if(!r.isEqual(i))return!1}return!0},ju.prototype.toString=function(){var e=[];return this.forEach(function(t){e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"},ju.prototype.copy=function(t,e){var n=new ju;return n.At=this.At,n.ze=t,n.He=e,n},ju),Tu=(Mu.prototype.track=function(t){var e=t.doc.key,n=this.Ye.get(e);!n||0!==t.type&&3===n.type?this.Ye=this.Ye.Ie(e,t):3===t.type&&1!==n.type?this.Ye=this.Ye.Ie(e,{type:n.type,doc:t.doc}):2===t.type&&2===n.type?this.Ye=this.Ye.Ie(e,{type:2,doc:t.doc}):2===t.type&&0===n.type?this.Ye=this.Ye.Ie(e,{type:0,doc:t.doc}):1===t.type&&0===n.type?this.Ye=this.Ye.remove(e):1===t.type&&2===n.type?this.Ye=this.Ye.Ie(e,{type:1,doc:n.doc}):0===t.type&&1===n.type?this.Ye=this.Ye.Ie(e,{type:2,doc:t.doc}):Ir()},Mu.prototype.Xe=function(){var n=[];return this.Ye.Pe(function(t,e){n.push(e)}),n},Mu),Au=(xu.sn=function(t,e,n,r){var i=[];return e.forEach(function(t){i.push({type:0,doc:t})}),new xu(t,e,Iu.Je(e),i,n,r,!0,!1)},Object.defineProperty(xu.prototype,"hasPendingWrites",{get:function(){return!this.tn.bt()},enumerable:!1,configurable:!0}),xu.prototype.isEqual=function(t){if(!(this.fromCache===t.fromCache&&this.en===t.en&&this.tn.isEqual(t.tn)&&as(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.Ze.isEqual(t.Ze)))return!1;var e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(var r=0;r<e.length;r++)if(e[r].type!==n[r].type||!e[r].doc.isEqual(n[r].doc))return!1;return!0},xu),Nu=(Vu.un=function(t,e){var n=new Map;return n.set(t,Ou.hn(t,e)),new Vu(bi.min(),n,Eu,yu,_u())},Vu),Ou=(Uu.hn=function(t,e){return new Uu(Rr.h,e,_u(),_u(),_u())},Uu),Su=function(t,e,n,r){this.wn=t,this.removedTargetIds=e,this.key=n,this.En=r},Ru=function(t,e){this.targetId=t,this.Tn=e},ku=function(t,e,n,r){void 0===n&&(n=Rr.h),void 0===r&&(r=null),this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=r},Lu=(Object.defineProperty(Cu.prototype,"ln",{get:function(){return this.Rn},enumerable:!1,configurable:!0}),Object.defineProperty(Cu.prototype,"resumeToken",{get:function(){return this.An},enumerable:!1,configurable:!0}),Object.defineProperty(Cu.prototype,"yn",{get:function(){return 0!==this.In},enumerable:!1,configurable:!0}),Object.defineProperty(Cu.prototype,"gn",{get:function(){return this.Pn},enumerable:!1,configurable:!0}),Cu.prototype.Vn=function(t){0<t.o()&&(this.Pn=!0,this.An=t)},Cu.prototype.pn=function(){var n=_u(),r=_u(),i=_u();return this.mn.forEach(function(t,e){switch(e){case 0:n=n.add(t);break;case 2:r=r.add(t);break;case 1:i=i.add(t);break;default:Ir()}}),new Ou(this.An,this.Rn,n,r,i)},Cu.prototype.bn=function(){this.Pn=!1,this.mn=Fu()},Cu.prototype.vn=function(t,e){this.Pn=!0,this.mn=this.mn.Ie(t,e)},Cu.prototype.Sn=function(t){this.Pn=!0,this.mn=this.mn.remove(t)},Cu.prototype.Dn=function(){this.In+=1},Cu.prototype.Cn=function(){--this.In},Cu.prototype.xn=function(){this.Pn=!0,this.Rn=!0},Cu),Du=(Pu.prototype.Ln=function(t){for(var e=0,n=t.wn;e<n.length;e++){var r=n[e];t.En instanceof ho?this.$n(r,t.En):t.En instanceof fo&&this.Bn(r,t.key,t.En)}for(var i=0,o=t.removedTargetIds;i<o.length;i++)r=o[i],this.Bn(r,t.key,t.En)},Pu.prototype.qn=function(n){var r=this;this.Un(n,function(t){var e=r.Qn(t);switch(n.state){case 0:r.Kn(t)&&e.Vn(n.resumeToken);break;case 1:e.Cn(),e.yn||e.bn(),e.Vn(n.resumeToken);break;case 2:e.Cn(),e.yn||r.removeTarget(t);break;case 3:r.Kn(t)&&(e.xn(),e.Vn(n.resumeToken));break;case 4:r.Kn(t)&&(r.Wn(t),e.Vn(n.resumeToken));break;default:Ir()}})},Pu.prototype.Un=function(t,n){var r=this;0<t.targetIds.length?t.targetIds.forEach(n):this.Fn.forEach(function(t,e){r.Kn(e)&&n(e)})},Pu.prototype.jn=function(t){var e=t.targetId,n=t.Tn.count;(t=this.Gn(e))&&(_o(t=t.target)?0===n?(t=new Ti(t.path),this.Bn(e,t,new fo(t,bi.min()))):Tr(1===n):this.zn(e)!==n&&(this.Wn(e),this.Mn=this.Mn.add(e)))},Pu.prototype.Hn=function(r){var i=this,o=new Map;this.Fn.forEach(function(t,e){var n=i.Gn(e);n&&(t.ln&&_o(n.target)&&(n=new Ti(n.target.path),null!==i.On.get(n)||i.Jn(e,n)||i.Bn(e,n,new fo(n,r))),t.gn&&(o.set(e,t.pn()),t.bn()))});var s=_u();this.kn.forEach(function(t,e){var n=!0;e.Ke(function(t){return!(t=i.Gn(t))||2===t.re||(n=!1)}),n&&(s=s.add(t))});var t=new Nu(r,o,this.Mn,this.On,s);return this.On=yu,this.kn=qu(),this.Mn=new pu(Or),t},Pu.prototype.$n=function(t,e){var n;this.Kn(t)&&(n=this.Jn(t,e.key)?2:0,this.Qn(t).vn(e.key,n),this.On=this.On.Ie(e.key,e),this.kn=this.kn.Ie(e.key,this.Yn(e.key).add(t)))},Pu.prototype.Bn=function(t,e,n){var r;this.Kn(t)&&(r=this.Qn(t),this.Jn(t,e)?r.vn(e,1):r.Sn(e),this.kn=this.kn.Ie(e,this.Yn(e).delete(t)),n&&(this.On=this.On.Ie(e,n)))},Pu.prototype.removeTarget=function(t){this.Fn.delete(t)},Pu.prototype.zn=function(t){var e=this.Qn(t).pn();return this.Nn.Xn(t).size+e._n.size-e.dn.size},Pu.prototype.Dn=function(t){this.Qn(t).Dn()},Pu.prototype.Qn=function(t){var e=this.Fn.get(t);return e||(e=new Lu,this.Fn.set(t,e)),e},Pu.prototype.Yn=function(t){var e=this.kn.get(t);return e||(e=new pu(Or),this.kn=this.kn.Ie(t,e)),e},Pu.prototype.Kn=function(t){var e=null!==this.Gn(t);return e||wr("WatchChangeAggregator","Detected inactive target",t),e},Pu.prototype.Gn=function(t){var e=this.Fn.get(t);return e&&e.yn?null:this.Nn.Zn(t)},Pu.prototype.Wn=function(e){var n=this;this.Fn.set(e,new Lu),this.Nn.Xn(e).forEach(function(t){n.Bn(e,t,null)})},Pu.prototype.Jn=function(t,e){return this.Nn.Xn(t).has(e)},Pu);function Pu(t){this.Nn=t,this.Fn=new Map,this.On=yu,this.kn=qu(),this.Mn=new pu(Or)}function Cu(){this.In=0,this.mn=Fu(),this.An=Rr.h,this.Rn=!1,this.Pn=!0}function Uu(t,e,n,r,i){this.resumeToken=t,this.ln=e,this._n=n,this.fn=r,this.dn=i}function Vu(t,e,n,r,i){this.oe=t,this.rn=e,this.on=n,this.cn=r,this.an=i}function xu(t,e,n,r,i,o,s,u){this.query=t,this.docs=e,this.Ze=n,this.docChanges=r,this.tn=i,this.fromCache=o,this.en=s,this.nn=u}function Mu(){this.Ye=new iu(Ti.At)}function ju(n){this.At=n?function(t,e){return n(t,e)||Ti.At(t.key,e.key)}:function(t,e){return Ti.At(t.key,e.key)},this.ze=mu,this.He=new iu(this.At)}function qu(){return new iu(Ti.At)}function Fu(){return new iu(Ti.At)}var Bu={asc:"ASCENDING",desc:"DESCENDING"},Gu={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},zu=function(t,e){this.O=t,this.he=e};function Hu(t,e){return t.he?new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+e.nanoseconds).slice(-9)+"Z":{seconds:""+e.seconds,nanos:e.nanoseconds}}function Wu(t,e){return t.he?e.toBase64():e.toUint8Array()}function Yu(t){return Tr(!!t),bi.wt((t=qi(t),new wi(t.seconds,t.nanos)))}function Qu(t,e){return new _i(["projects",t.projectId,"databases",t.database]).child("documents").child(e).Ct()}function Ku(t){return Tr(aa(t=_i.xt(t))),t}function Xu(t,e){return Qu(t.O,e.path)}function Ju(t,e){if((e=Ku(e)).get(1)!==t.O.projectId)throw new Pr(Dr.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+e.get(1)+" vs "+t.O.projectId);if(e.get(3)!==t.O.database)throw new Pr(Dr.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+e.get(3)+" vs "+t.O.database);return new Ti(ta(e))}function $u(t,e){return Qu(t.O,e)}function Zu(t){return new _i(["projects",t.O.projectId,"databases",t.O.database]).Ct()}function ta(t){return Tr(4<t.length&&"documents"===t.get(4)),t.Pt(5)}function ea(t,e,n){return{name:Xu(t,e),fields:n.proto.mapValue.fields}}function na(t,e){var n,r,i;if(e instanceof Hs)n={update:ea(t,e.key,e.value)};else if(e instanceof nu)n={delete:Xu(t,e.key)};else if(e instanceof Ws)n={update:ea(t,e.key,e.data),updateMask:(i=e.Te,r=[],i.fields.forEach(function(t){return r.push(t.Ct())}),{fieldPaths:r})};else{if(!(e instanceof ru))return Ir();n={verify:Xu(t,e.key)}}return 0<e.fieldTransforms.length&&(n.updateTransforms=e.fieldTransforms.map(function(t){var e=t.transform;if(e instanceof _s)return{fieldPath:t.field.Ct(),setToServerValue:"REQUEST_TIME"};if(e instanceof Es)return{fieldPath:t.field.Ct(),appendMissingElements:{values:e.elements}};if(e instanceof Os)return{fieldPath:t.field.Ct(),removeAllFromArray:{values:e.elements}};if(e instanceof Ls)return{fieldPath:t.field.Ct(),increment:e._e};throw Ir()})),e.Ee.we||(n.currentDocument=void 0!==(i=e.Ee).updateTime?{updateTime:Hu(e=t,(t=i.updateTime).Tt())}:void 0!==i.exists?{exists:i.exists}:Ir()),n}function ra(t){var e=4===(o=Ku(t.parent)).length?_i.Nt():ta(o),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;0<r&&(Tr(1===r),(s=n.from[0]).allDescendants?i=s.collectionId:e=e.child(s.collectionId));var o=[];n.where&&(o=function t(e){return e?void 0!==e.unaryFilter?[function(t){switch(t.unaryFilter.op){case"IS_NAN":var e=ua(t.unaryFilter.field);return Io.create(e,"==",{doubleValue:NaN});case"IS_NULL":var n=ua(t.unaryFilter.field);return Io.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":return n=ua(t.unaryFilter.field),Io.create(n,"!=",{doubleValue:NaN});case"IS_NOT_NULL":return t=ua(t.unaryFilter.field),Io.create(t,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":default:return Ir()}}(e)]:void 0!==e.fieldFilter?[(n=e,Io.create(ua(n.fieldFilter.field),function(){switch(n.fieldFilter.op){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":default:return Ir()}}(),n.fieldFilter.value))]:void 0!==e.compositeFilter?e.compositeFilter.filters.map(t).reduce(function(t,e){return t.concat(e)}):Ir():[];var n}(n.where)),t=[],n.orderBy&&(t=n.orderBy.map(function(t){return new Ko(ua((e=t).field),function(){switch(e.direction){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}());var e})),r=null,n.limit&&(r=ui(u="object"==typeof(u=n.limit)?u.value:u)?null:u);var s=null;n.startAt&&(s=oa(n.startAt));var u=null;return n.endAt&&(u=oa(n.endAt)),new $o(e,i,t,o,r,"F",s,u)}function ia(t){return{before:t.before,values:t.position}}function oa(t){var e=!!t.before,t=t.values||[];return new Go(t,e)}function sa(t){return{fieldPath:t.Ct()}}function ua(t){return Ii.Mt(t.fieldPath)}function aa(t){return 4<=t.length&&"projects"===t.get(0)&&"databases"===t.get(2)}function ca(t){return new zu(t,!0)}var ha=(fa.prototype.catch=function(t){return this.next(void 0,t)},fa.prototype.next=function(r,i){var o=this;return this.ss&&Ir(),this.ss=!0,this.ns?this.error?this.rs(i,this.error):this.os(r,this.result):new fa(function(e,n){o.ts=function(t){o.os(r,t).next(e,n)},o.es=function(t){o.rs(i,t).next(e,n)}})},fa.prototype.cs=function(){var n=this;return new Promise(function(t,e){n.next(t,e)})},fa.prototype.us=function(t){try{var e=t();return e instanceof fa?e:fa.resolve(e)}catch(t){return fa.reject(t)}},fa.prototype.os=function(t,e){return t?this.us(function(){return t(e)}):fa.resolve(e)},fa.prototype.rs=function(t,e){return t?this.us(function(){return t(e)}):fa.reject(e)},fa.resolve=function(n){return new fa(function(t,e){t(n)})},fa.reject=function(n){return new fa(function(t,e){e(n)})},fa.hs=function(t){return new fa(function(e,n){var r=0,i=0,o=!1;t.forEach(function(t){++r,t.next(function(){++i,o&&i===r&&e()},function(t){return n(t)})}),o=!0,i===r&&e()})},fa.ls=function(t){for(var n=fa.resolve(!1),e=0,r=t;e<r.length;e++)!function(e){n=n.next(function(t){return t?fa.resolve(t):e()})}(r[e]);return n},fa.forEach=function(t,n){var r=this,i=[];return t.forEach(function(t,e){i.push(n.call(r,t,e))}),this.hs(i)},fa);function fa(t){var e=this;this.ts=null,this.es=null,this.result=void 0,this.error=void 0,this.ns=!1,this.ss=!1,t(function(t){e.ns=!0,e.result=t,e.ts&&e.ts(t)},function(t){e.ns=!0,e.error=t,e.es&&e.es(t)})}function la(t){return"IndexedDbTransactionError"===t.name}var pa=(da.qs=function(t,e,n,r,i){return(i=new da(t,e,Date.now()+n,r,i)).start(n),i},da.prototype.start=function(t){var e=this;this.Us=setTimeout(function(){return e.Qs()},t)},da.prototype.Ks=function(){return this.Qs()},da.prototype.cancel=function(t){null!==this.Us&&(this.clearTimeout(),this.Bs.reject(new Pr(Dr.CANCELLED,"Operation cancelled"+(t?": "+t:""))))},da.prototype.Qs=function(){var e=this;this.ks.Ws(function(){return null!==e.Us?(e.clearTimeout(),e.op().then(function(t){return e.Bs.resolve(t)})):Promise.resolve()})},da.prototype.clearTimeout=function(){null!==this.Us&&(this.$s(this),clearTimeout(this.Us),this.Us=null)},da);function da(t,e,n,r,i){this.ks=t,this.Ms=e,this.Ls=n,this.op=r,this.$s=i,this.Bs=new gi,this.then=this.Bs.promise.then.bind(this.Bs.promise),this.Bs.promise.catch(function(t){})}function ya(t,e){if(br("AsyncQueue",e+": "+t),la(t))return new Pr(Dr.UNAVAILABLE,e+": "+t);throw t}var va,ga,ma,wa=(ka.prototype.reset=function(){this.Js=0},ka.prototype.Zs=function(){this.Js=this.Hs},ka.prototype.ti=function(t){var e=this;this.cancel();var n=Math.floor(this.Js+this.ei()),r=Math.max(0,Date.now()-this.Xs),i=Math.max(0,n-r);0<i&&wr("ExponentialBackoff","Backing off for "+i+" ms (base delay: "+this.Js+" ms, delay with jitter: "+n+" ms, last attempt: "+r+" ms ago)"),this.Ys=this.js.ni(this.Ms,i,function(){return e.Xs=Date.now(),t()}),this.Js*=this.zs,this.Js<this.Gs&&(this.Js=this.Gs),this.Js>this.Hs&&(this.Js=this.Hs)},ka.prototype.si=function(){null!==this.Ys&&(this.Ys.Ks(),this.Ys=null)},ka.prototype.cancel=function(){null!==this.Ys&&(this.Ys.cancel(),this.Ys=null)},ka.prototype.ei=function(){return(Math.random()-.5)*this.Js},ka),o=(Ra.prototype.hi=function(){return 1===this.state||2===this.state||4===this.state},Ra.prototype.li=function(){return 2===this.state},Ra.prototype.start=function(){3!==this.state?this.auth():this._i()},Ra.prototype.stop=function(){return y(this,void 0,void 0,function(){return v(this,function(t){switch(t.label){case 0:return this.hi()?[4,this.close(0)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})},Ra.prototype.fi=function(){this.state=0,this.ui.reset()},Ra.prototype.di=function(){var t=this;this.li()&&null===this.ai&&(this.ai=this.js.ni(this.ii,6e4,function(){return t.wi()}))},Ra.prototype.Ei=function(t){this.Ti(),this.stream.send(t)},Ra.prototype.wi=function(){return y(this,void 0,void 0,function(){return v(this,function(t){return this.li()?[2,this.close(0)]:[2]})})},Ra.prototype.Ti=function(){this.ai&&(this.ai.cancel(),this.ai=null)},Ra.prototype.close=function(e,n){return y(this,void 0,void 0,function(){return v(this,function(t){switch(t.label){case 0:return this.Ti(),this.ui.cancel(),this.ci++,3!==e?this.ui.reset():n&&n.code===Dr.RESOURCE_EXHAUSTED?(br(n.toString()),br("Using maximum backoff delay to prevent overloading the backend."),this.ui.Zs()):n&&n.code===Dr.UNAUTHENTICATED&&this.oi.g(),null!==this.stream&&(this.Ii(),this.stream.close(),this.stream=null),this.state=e,[4,this.listener.Z(n)];case 1:return t.sent(),[2]}})})},Ra.prototype.Ii=function(){},Ra.prototype.auth=function(){var n=this;this.state=1;var t=this.mi(this.ci),e=this.ci;this.oi.getToken().then(function(t){n.ci===e&&n.Ai(t)},function(e){t(function(){var t=new Pr(Dr.UNKNOWN,"Fetching auth token failed: "+e.message);return n.Ri(t)})})},Ra.prototype.Ai=function(t){var e=this,n=this.mi(this.ci);this.stream=this.Pi(t),this.stream.Y(function(){n(function(){return e.state=2,e.listener.Y()})}),this.stream.Z(function(t){n(function(){return e.Ri(t)})}),this.stream.onMessage(function(t){n(function(){return e.onMessage(t)})})},Ra.prototype._i=function(){var t=this;this.state=4,this.ui.ti(function(){return y(t,void 0,void 0,function(){return v(this,function(t){return this.state=0,this.start(),[2]})})})},Ra.prototype.Ri=function(t){return wr("PersistentStream","close with error: "+t),this.stream=null,this.close(3,t)},Ra.prototype.mi=function(e){var n=this;return function(t){n.js.Ws(function(){return n.ci===e?t():(wr("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())})}},Ra),ba=(f(Sa,ma=o),Sa.prototype.Pi=function(t){return this.ri.ft("Listen",t)},Sa.prototype.onMessage=function(t){this.ui.reset();var e,n=function(t,e){if("targetChange"in e){e.targetChange;var n="NO_CHANGE"===(o=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===o?1:"REMOVE"===o?2:"CURRENT"===o?3:"RESET"===o?4:Ir(),r=e.targetChange.targetIds||[],i=(s=e.targetChange.resumeToken,t.he?(Tr(void 0===s||"string"==typeof s),Rr.fromBase64String(s||"")):(Tr(void 0===s||s instanceof Uint8Array),Rr.fromUint8Array(s||new Uint8Array))),o=(u=e.targetChange.cause)&&(a=void 0===(c=u).code?Dr.UNKNOWN:li(c.code),new Pr(a,c.message||"")),s=new ku(n,r,i,o||null)}else if("documentChange"in e){e.documentChange,(n=e.documentChange).document,n.document.name,n.document.updateTime,r=Ju(t,n.document.name),i=Yu(n.document.updateTime);var u=new ro({mapValue:{fields:n.document.fields}}),a=(o=new ho(r,i,u,{}),n.targetIds||[]),c=n.removedTargetIds||[],s=new Su(a,c,o.key,o)}else if("documentDelete"in e)e.documentDelete,(n=e.documentDelete).document,r=Ju(t,n.document),i=n.readTime?Yu(n.readTime):bi.min(),u=new fo(r,i),o=n.removedTargetIds||[],s=new Su([],o,u.key,u);else if("documentRemove"in e)e.documentRemove,(n=e.documentRemove).document,r=Ju(t,n.document),i=n.removedTargetIds||[],s=new Su([],i,r,null);else{if(!("filter"in e))return Ir();e.filter,(e=e.filter).targetId,r=new Zs(n=e.count||0),i=e.targetId,s=new Ru(i,r)}return s}(this.fe,t),t=!("targetChange"in(e=t))||(e=e.targetChange).targetIds&&e.targetIds.length||!e.readTime?bi.min():Yu(e.readTime);return this.listener.yi(n,t)},Sa.prototype.gi=function(t){var e,n,r,i,o,s,u,a,c={};c.database=Zu(this.fe),c.addTarget=(e=this.fe,(r=_o(r=(n=t).target)?{documents:{documents:[$u(e,r.path)]}}:{query:(i=e,s={structuredQuery:{}},u=(o=r).path,null!==o.collectionGroup?(s.parent=$u(i,u),s.structuredQuery.from=[{collectionId:o.collectionGroup,allDescendants:!0}]):(s.parent=$u(i,u.yt()),s.structuredQuery.from=[{collectionId:u.Vt()}]),(u=function(t){if(0!==t.length)return 1===(t=t.map(function(t){if("=="===t.op){if(eo(t.value))return{unaryFilter:{field:sa(t.field),op:"IS_NAN"}};if(to(t.value))return{unaryFilter:{field:sa(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(eo(t.value))return{unaryFilter:{field:sa(t.field),op:"IS_NOT_NAN"}};if(to(t.value))return{unaryFilter:{field:sa(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:sa(t.field),op:(e=t.op,Gu[e]),value:t.value}};var e})).length?t[0]:{compositeFilter:{op:"AND",filters:t}}}(o.filters))&&(s.structuredQuery.where=u),(u=function(t){if(0!==t.length)return t.map(function(t){return{field:sa(t.field),direction:(t=t.dir,Bu[t])}})}(o.orderBy))&&(s.structuredQuery.orderBy=u),u=o.limit,null!==(u=i.he||ui(u)?u:{value:u})&&(s.structuredQuery.limit=u),o.startAt&&(s.structuredQuery.startAt=ia(o.startAt)),o.endAt&&(s.structuredQuery.endAt=ia(o.endAt)),s)}).targetId=n.targetId,0<n.resumeToken.o()?r.resumeToken=Wu(e,n.resumeToken):0<n.oe.u(bi.min())&&(r.readTime=Hu(e,n.oe.Tt())),r),(t=(this.fe,a=t,null==(t=function(){switch(a.re){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Ir()}}())?null:{"goog-listen-tags":t}))&&(c.labels=t),this.Ei(c)},Sa.prototype.Vi=function(t){var e={};e.database=Zu(this.fe),e.removeTarget=t,this.Ei(e)},Sa),_a=(f(Oa,ga=o),Object.defineProperty(Oa.prototype,"bi",{get:function(){return this.pi},enumerable:!1,configurable:!0}),Oa.prototype.start=function(){this.pi=!1,this.lastStreamToken=void 0,ga.prototype.start.call(this)},Oa.prototype.Ii=function(){this.pi&&this.vi([])},Oa.prototype.Pi=function(t){return this.ri.ft("Write",t)},Oa.prototype.onMessage=function(t){if(Tr(!!t.streamToken),this.lastStreamToken=t.streamToken,this.pi){this.ui.reset();var e=(n=t.writeResults,r=t.commitTime,n&&0<n.length?(Tr(void 0!==r),n.map(function(t){return n=r,(t=(e=t).updateTime?Yu(e.updateTime):Yu(n)).isEqual(bi.min())&&(t=Yu(n)),n=null,e.transformResults&&0<e.transformResults.length&&(n=e.transformResults),new Vs(t,n);var e,n})):[]),n=Yu(t.commitTime);return this.listener.Si(n,e)}var r;return Tr(!t.writeResults||0===t.writeResults.length),this.pi=!0,this.listener.Di()},Oa.prototype.Ci=function(){var t={};t.database=Zu(this.fe),this.Ei(t)},Oa.prototype.vi=function(t){var e=this,t={streamToken:this.lastStreamToken,writes:t.map(function(t){return na(e.fe,t)})};this.Ei(t)},Oa),Ea=(f(Na,va=function(){}),Na.prototype.Ni=function(){if(this.xi)throw new Pr(Dr.FAILED_PRECONDITION,"The client has already been terminated.")},Na.prototype.at=function(e,n,r){var i=this;return this.Ni(),this.credentials.getToken().then(function(t){return i.ri.at(e,n,r,t)}).catch(function(t){throw t.code===Dr.UNAUTHENTICATED&&i.credentials.g(),t})},Na.prototype._t=function(e,n,r){var i=this;return this.Ni(),this.credentials.getToken().then(function(t){return i.ri._t(e,n,r,t)}).catch(function(t){throw t.code===Dr.UNAUTHENTICATED&&i.credentials.g(),t})},Na.prototype.terminate=function(){this.xi=!1},Na),me=(Aa.prototype.Oi=function(t){this.Fi.push(t)},Aa.prototype.ki=function(){this.Fi.forEach(function(t){return t()})},Aa),Ia=(Ta.prototype.Ji=function(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue},Ta.prototype.next=function(){var t=++this.previousValue;return this.Yi&&this.Yi(t),t},Ta);function Ta(t,e){var n=this;this.previousValue=t,e&&(e.Hi=function(t){return n.Ji(t)},this.Yi=function(t){return e.Xi(t)})}function Aa(){this.Fi=[]}function Na(t,e,n){var r=this;return(r=va.call(this)||this).credentials=t,r.ri=e,r.fe=n,r.xi=!1,r}function Oa(t,e,n,r,i){var o=this;return(o=ga.call(this,t,"write_stream_connection_backoff","write_stream_idle",e,n,i)||this).fe=r,o.pi=!1,o}function Sa(t,e,n,r,i){var o=this;return(o=ma.call(this,t,"listen_stream_connection_backoff","listen_stream_idle",e,n,i)||this).fe=r,o}function Ra(t,e,n,r,i,o){this.js=t,this.ii=n,this.ri=r,this.oi=i,this.listener=o,this.state=0,this.ci=0,this.ai=null,this.stream=null,this.ui=new wa(t,e)}function ka(t,e,n,r,i){void 0===n&&(n=1e3),void 0===r&&(r=1.5),void 0===i&&(i=6e4),this.js=t,this.Ms=e,this.Gs=n,this.zs=r,this.Hs=i,this.Js=0,this.Ys=null,this.Xs=Date.now(),this.reset()}function La(e){return y(this,void 0,void 0,function(){return v(this,function(t){if(e.code!==Dr.FAILED_PRECONDITION||"The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab."!==e.message)throw e;return wr("LocalStore","Unexpectedly lost primary lease"),[2]})})}function Da(t,e){this.progress=t,this.tr=e}Ia.Zi=-1;var Pa=(ja.prototype.nr=function(t,e,n){for(var r,i,o,s,u,a,c=n.sr,h=0;h<this.mutations.length;h++){var f=this.mutations[h];f.key.isEqual(t)&&(r=f,u=e,i=c[h],f=a=void 0,e=r instanceof Hs?(a=i,f=(o=r).value,a.transformResults&&(s=Xs(o.fieldTransforms,u,a.transformResults),f=$s(o.fieldTransforms,f,s)),new ho(o.key,a.version,f,{hasCommittedMutations:!0})):r instanceof Ws?(a=u,f=i,js((u=r).Ee,a)?(a=Ks(u,a,f.transformResults?Xs(u.fieldTransforms,a,f.transformResults):[]),new ho(u.key,f.version,a,{hasCommittedMutations:!0})):new lo(u.key,f.version)):new fo(r.key,i.version,{hasCommittedMutations:!0}))}return e},ja.prototype.ir=function(t,e){for(var n=0,r=this.baseMutations;n<r.length;n++){var i=r[n];i.key.isEqual(t)&&(e=qs(i,e,e,this.er))}for(var o=e,s=0,u=this.mutations;s<u.length;s++){var a=u[s];a.key.isEqual(t)&&(e=qs(a,e,o,this.er))}return e},ja.prototype.rr=function(n){var r=this,i=n;return this.mutations.forEach(function(t){var e=r.ir(t.key,n.get(t.key));e&&(i=i.Ie(t.key,e))}),i},ja.prototype.keys=function(){return this.mutations.reduce(function(t,e){return t.add(e.key)},_u())},ja.prototype.isEqual=function(t){return this.batchId===t.batchId&&Sr(this.mutations,t.mutations,Fs)&&Sr(this.baseMutations,t.baseMutations,Fs)},ja),Ca=(Ma.from=function(t,e,n){Tr(t.mutations.length===n.length);for(var r=wu,i=t.mutations,o=0;o<i.length;o++)r=r.Ie(i[o].key,n[o].version);return new Ma(t,e,n,r)},Ma),Ua=(xa.prototype.get=function(t){var e=this.ur(t);if(void 0!==(e=this.lr[e]))for(var n=0,r=e;n<r.length;n++){var i=(o=r[n])[0],o=o[1];if(this.hr(i,t))return o}},xa.prototype.has=function(t){return void 0!==this.get(t)},xa.prototype.set=function(t,e){var n=this.ur(t),r=this.lr[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(this.hr(r[i][0],t))return void(r[i]=[t,e]);r.push([t,e])}else this.lr[n]=[[t,e]]},xa.prototype.delete=function(t){var e=this.ur(t),n=this.lr[e];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.hr(n[r][0],t))return 1===n.length?delete this.lr[e]:n.splice(r,1),!0;return!1},xa.prototype.forEach=function(s){Ui(this.lr,function(t,e){for(var n=0,r=e;n<r.length;n++){var i=(o=r[n])[0],o=o[1];s(i,o)}})},xa.prototype.bt=function(){return Vi(this.lr)},xa),o=(Va.prototype.wr=function(t){return(t=this._r.get(t))?t.readTime:bi.min()},Va.prototype.Er=function(t,e){this.Tr(),this._r.set(t.key,{Ir:t,readTime:e})},Va.prototype.mr=function(t,e){void 0===e&&(e=null),this.Tr(),this._r.set(t,{Ir:null,readTime:e})},Va.prototype.Ar=function(t,e){this.Tr();var n=this._r.get(e);return void 0!==n?ha.resolve(n.Ir):this.Rr(t,e)},Va.prototype.getEntries=function(t,e){return this.Pr(t,e)},Va.prototype.apply=function(t){return this.Tr(),this.dr=!0,this.yr(t)},Va.prototype.Tr=function(){},Va);function Va(){this._r=new Ua(function(t){return t.toString()},function(t,e){return t.isEqual(e)}),this.dr=!1}function xa(t,e){this.ur=t,this.hr=e,this.lr={}}function Ma(t,e,n,r){this.batch=t,this.cr=e,this.sr=n,this.ar=r}function ja(t,e,n,r){this.batchId=t,this.er=e,this.baseMutations=n,this.mutations=r}function qa(t,e,n){if(!n)throw new Pr(Dr.INVALID_ARGUMENT,"Function "+t+"() cannot be called with an empty "+e+".")}function Fa(t,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Pr(Dr.INVALID_ARGUMENT,"Invalid options passed to function "+t+'(): You cannot specify both "merge" and "mergeFields".');return e}function Ba(t,e,n,r){if(!0===e&&!0===r)throw new Pr(Dr.INVALID_ARGUMENT,t+" and "+n+" cannot be used together.")}function Ga(t){if(!Ti.qt(t))throw new Pr(Dr.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t+" has "+t.length+".")}function za(t){if(Ti.qt(t))throw new Pr(Dr.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+t+" has "+t.length+".")}function Ha(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return 20<e.length&&(e=e.substring(0,20)+"..."),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"!=typeof e)return"function"==typeof e?"a function":Ir();if(e instanceof Array)return"an array";var t=function(){if(e.constructor){var t=/function\s+([^\s(]+)\s*\(/.exec(e.constructor.toString());if(t&&1<t.length)return t[1]}return null}();return t?"a custom "+t+" object":"an object"}function Wa(t,e){if("_delegate"in t&&(t=t._),t instanceof e)return t;if(e.name===t.constructor.name)throw new Pr(Dr.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");throw t=Ha(t),new Pr(Dr.INVALID_ARGUMENT,"Expected type '"+e.name+"', but it was: "+t)}function Ya(t,e){if(e<=0)throw new Pr(Dr.INVALID_ARGUMENT,"Function "+t+"() requires a positive number, but it was: "+e+".")}function Qa(t){this.co=t}var Ka=(Za.prototype.isEqual=function(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties},Za),Xa=new Map,Ja=(Object.defineProperty($a.prototype,"app",{get:function(){if(!this.Jr)throw new Pr(Dr.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.Jr},enumerable:!1,configurable:!0}),Object.defineProperty($a.prototype,"Yr",{get:function(){return this.Gr},enumerable:!1,configurable:!0}),Object.defineProperty($a.prototype,"Xr",{get:function(){return void 0!==this.Zr},enumerable:!1,configurable:!0}),$a.prototype.eo=function(t){if(this.Gr)throw new Pr(Dr.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this.jr=new Ka(t),void 0!==t.credentials&&(this.Hr=function(t){if(!t)return new Wr;switch(t.type){case"gapi":var e=t.client;return Tr(!("object"!=typeof e||null===e||!e.auth||!e.auth.getAuthHeaderValueForFirstParty)),new Kr(e,t.sessionIndex||"0");case"provider":return t.client;default:throw new Pr(Dr.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(t.credentials))},$a.prototype.no=function(){return this.jr},$a.prototype.so=function(){return this.Gr=!0,this.jr},$a.prototype._delete=function(){return this.Zr||(this.Zr=this.io()),this.Zr},$a.prototype.io=function(){return(t=Xa.get(this))&&(wr("ComponentProvider","Removing Datastore"),Xa.delete(this),t.terminate()),Promise.resolve();var t},$a);function $a(t,e){this.Wr="(lite)",this.jr=new Ka({}),this.Gr=!1,t instanceof Jr?(this.zr=t,this.Hr=new Wr):(this.Jr=t,this.zr=function(t){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new Pr(Dr.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Jr(t.options.projectId)}(t),this.Hr=new Yr(e))}function Za(t){var e;if(void 0===t.host){if(void 0!==t.ssl)throw new Pr(Dr.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(e=t.ssl)||void 0===e||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new Pr(Dr.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,Ba("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}function tc(t){var e=ra({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?us(e,e.limit,"L"):e}var ec=(dc.prototype.fo=function(t,e){return this._o.add(e),ha.resolve()},dc.prototype.wo=function(t,e){return ha.resolve(this._o.getEntries(e))},dc),nc=(pc.prototype.add=function(t){var e=t.Vt(),n=t.yt(),r=this.index[e]||new pu(_i.At),t=!r.has(n);return this.index[e]=r.add(n),t},pc.prototype.has=function(t){var e=t.Vt(),t=t.yt();return(e=this.index[e])&&e.has(t)},pc.prototype.getEntries=function(t){return(this.index[t]||new pu(_i.At)).Dt()},pc),rc=(lc.prototype.next=function(){return this.$o+=2,this.$o},lc.Bo=function(){return new lc(0)},lc.qo=function(){return new lc(-1)},lc),ic=(fc.prototype.Pa=function(e,n){var r=this;return this.Ra.So(e,n).next(function(t){return r.ya(e,n,t)})},fc.prototype.ya=function(t,r,i){return this.Kc.Ar(t,r).next(function(t){for(var e=0,n=i;e<n.length;e++)t=n[e].ir(r,t);return t})},fc.prototype.ga=function(t,e,i){var o=yu;return e.forEach(function(t,e){for(var n=0,r=i;n<r.length;n++)e=r[n].ir(t,e);o=o.Ie(t,e)}),o},fc.prototype.Va=function(e,t){var n=this;return this.Kc.getEntries(e,t).next(function(t){return n.pa(e,t)})},fc.prototype.pa=function(e,r){var i=this;return this.Ra.Do(e,r).next(function(t){var t=i.ga(e,r,t),n=yu;return t.forEach(function(t,e){e=e||new fo(t,bi.min()),n=n.Ie(t,e)}),n})},fc.prototype.Pc=function(t,e,n){return r=e,Ti.qt(r.path)&&null===r.collectionGroup&&0===r.filters.length?this.ba(t,e.path):is(e)?this.va(t,e,n):this.Sa(t,e,n);var r},fc.prototype.ba=function(t,e){return this.Pa(t,new Ti(e)).next(function(t){var e=mu;return t instanceof ho&&(e=e.Ie(t.key,t)),e})},fc.prototype.va=function(n,r,i){var o=this,s=r.collectionGroup,u=mu;return this.To.wo(n,s).next(function(t){return ha.forEach(t,function(t){var e=(e=r,t=t.child(s),new $o(t,null,e.ne.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt));return o.Sa(n,e,i).next(function(t){t.forEach(function(t,e){u=u.Ie(t,e)})})}).next(function(){return u})})},fc.prototype.Sa=function(e,n,t){var a,c,r=this;return this.Kc.Pc(e,n,t).next(function(t){return a=t,r.Ra.xo(e,n)}).next(function(t){return c=t,r.Da(e,c,a).next(function(t){a=t;for(var e=0,n=c;e<n.length;e++)for(var r=n[e],i=0,o=r.mutations;i<o.length;i++){var s=o[i],u=s.key,s=qs(s,s=a.get(u),s,r.er);a=s instanceof ho?a.Ie(u,s):a.remove(u)}})}).next(function(){return a.forEach(function(t,e){fs(n,e)||(a=a.remove(t))}),a})},fc.prototype.Da=function(t,e,n){for(var r=_u(),i=0,o=e;i<o.length;i++)for(var s=0,u=o[i].mutations;s<u.length;s++){var a=u[s];a instanceof Ws&&null===n.get(a.key)&&(r=r.add(a.key))}var c=n;return this.Kc.getEntries(t,r).next(function(t){return t.forEach(function(t,e){null!==e&&e instanceof ho&&(c=c.Ie(t,e))}),c})},fc),oc=(hc.Na=function(t,e){for(var n=_u(),r=_u(),i=0,o=e.docChanges;i<o.length;i++){var s=o[i];switch(s.type){case 0:n=n.add(s.doc.key);break;case 1:r=r.add(s.doc.key)}}return new hc(t,e.fromCache,n,r)},hc),sc=(cc.prototype.Fa=function(t){this.Oa=t},cc.prototype.Pc=function(e,r,i,o){var s=this;return 0===r.filters.length&&null===r.limit&&null==r.startAt&&null==r.endAt&&(0===r.ne.length||1===r.ne.length&&r.ne[0].field.Ot())||i.isEqual(bi.min())?this.ka(e,r):this.Oa.Va(e,o).next(function(t){var n=s.Ma(r,t);return(ts(r)||es(r))&&s.La(r.limitType,n,o,i)?s.ka(e,r):(mr()<=u.DEBUG&&wr("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),hs(r)),s.Oa.Pc(e,r,i).next(function(e){return n.forEach(function(t){e=e.Ie(t.key,t)}),e}))})},cc.prototype.Ma=function(n,t){var r=new pu(ls(n));return t.forEach(function(t,e){e instanceof ho&&fs(n,e)&&(r=r.add(e))}),r},cc.prototype.La=function(t,e,n,r){return n.size!==e.size||!!(e="F"===t?e.last():e.first())&&(e.hasPendingWrites||0<e.version.u(r))},cc.prototype.ka=function(t,e){return mr()<=u.DEBUG&&wr("QueryEngine","Using full collection scan to execute query:",hs(e)),this.Oa.Pc(t,e,bi.min())},cc),uc=(ac.prototype.Fr=function(e){var n=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",function(t){return e.Ur(t,n.Ba)})},ac);function ac(t,e,n,r){this.persistence=t,this.$a=e,this.fe=r,this.Ba=new iu(Or),this.qa=new Ua(wo,bo),this.Ua=bi.min(),this.Ra=t.Ta(n),this.Qa=t._c(),this.Qc=t.ac(),this.Ka=new ic(this.Qa,this.Ra,this.persistence.Ia()),this.Wc=t.ma(),this.$a.Fa(this.Ka)}function cc(){}function hc(t,e,n,r){this.targetId=t,this.fromCache=e,this.Ca=n,this.xa=r}function fc(t,e,n){this.Kc=t,this.Ra=e,this.To=n}function lc(t){this.$o=t}function pc(){this.index={}}function dc(){this._o=new nc}function yc(i,o){return y(this,void 0,void 0,function(){var e,n,m,r;return v(this,function(t){switch(t.label){case 0:return n=(e=i).Ra,m=e.Ka,[4,e.persistence.runTransaction("Handle user change","readonly",function(v){var g;return e.Ra.vo(v).next(function(t){return g=t,n=e.persistence.Ta(o),m=new ic(e.Qa,n,e.persistence.Ia()),n.vo(v)}).next(function(t){for(var e=[],n=[],r=_u(),i=0,o=g;i<o.length;i++){var s=o[i];e.push(s.batchId);for(var u=0,a=s.mutations;u<a.length;u++)var c=a[u],r=r.add(c.key)}for(var h=0,f=t;h<f.length;h++){var l=f[h];n.push(l.batchId);for(var p=0,d=l.mutations;p<d.length;p++){var y=d[p];r=r.add(y.key)}}return m.Va(v,r).next(function(t){return{Wa:t,ja:e,Ga:n}})})})];case 1:return r=t.sent(),[2,(e.Ra=n,e.Ka=m,e.$a.Fa(e.Ka),r)]}})})}function vc(t){var e=t;return e.persistence.runTransaction("Get last remote snapshot version","readonly",function(t){return e.Qc.Wo(t)})}function gc(t,s,e,u,a){var n=_u();return e.forEach(function(t){return n=n.add(t)}),s.getEntries(t,n).next(function(i){var o=yu;return e.forEach(function(t,e){var n=i.get(t),r=(null==a?void 0:a.get(t))||u;e instanceof fo&&e.version.isEqual(bi.min())?(s.mr(t,r),o=o.Ie(t,e)):null==n||0<e.version.u(n.version)||0===e.version.u(n.version)&&n.hasPendingWrites?(s.Er(e,r),o=o.Ie(t,e)):wr("LocalStore","Ignoring outdated watch update for ",t,". Current version:",n.version," Watch version:",e.version)}),o})}function mc(t,r){var i=t;return i.persistence.runTransaction("Allocate target","readwrite",function(e){var n;return i.Qc.ec(e,r).next(function(t){return t?(n=t,ha.resolve(n)):i.Qc.Uo(e).next(function(t){return n=new ps(r,t,0,e.oo),i.Qc.zo(e,n).next(function(){return n})})})}).then(function(t){var e=i.Ba.get(t.targetId);return(null===e||0<t.oe.u(e.oe))&&(i.Ba=i.Ba.Ie(t.targetId,t),i.qa.set(r,t.targetId)),t})}function wc(i,o,s){return y(this,void 0,void 0,function(){var e,n,r;return v(this,function(t){switch(t.label){case 0:n=(e=i).Ba.get(o),r=s?"readwrite":"readwrite-primary",t.label=1;case 1:return t.trys.push([1,4,,5]),s?[3,3]:[4,e.persistence.runTransaction("Release target",r,function(t){return e.persistence.Io.removeTarget(t,n)})];case 2:t.sent(),t.label=3;case 3:return[3,5];case 4:if(!la(r=t.sent()))throw r;return wr("LocalStore","Failed to update sequence numbers for target "+o+": "+r),[3,5];case 5:return e.Ba=e.Ba.remove(o),e.qa.delete(n.target),[2]}})})}function bc(t,o,s){var u=t,a=bi.min(),c=_u();return u.persistence.runTransaction("Execute query","readonly",function(e){return t=u,n=e,r=ss(o),(void 0!==(t=(i=t).qa.get(r))?ha.resolve(i.Ba.get(t)):i.Qc.ec(n,r)).next(function(t){if(t)return a=t.lastLimboFreeSnapshotVersion,u.Qc.oc(e,t.targetId).next(function(t){c=t})}).next(function(){return u.$a.Pc(e,o,s?a:bi.min(),s?c:_u())}).next(function(t){return{documents:t,za:c}});var t,n,r,i})}var _c,Ec,Ic=(Wc.prototype.ao=function(t,e){return ha.resolve(this.Xa.get(e))},Wc.prototype.uo=function(t,e){return this.Xa.set(e.id,{id:e.id,version:e.version,createTime:Yu(e.createTime)}),ha.resolve()},Wc.prototype.ho=function(t,e){return ha.resolve(this.Za.get(e))},Wc.prototype.lo=function(t,e){return this.Za.set(e.name,{name:e.name,query:tc(e.bundledQuery),readTime:Yu(e.readTime)}),ha.resolve()},Wc),Tc=(Hc.prototype.bt=function(){return this.tu.bt()},Hc.prototype.sc=function(t,e){e=new Ac(t,e),this.tu=this.tu.add(e),this.nu=this.nu.add(e)},Hc.prototype.iu=function(t,e){var n=this;t.forEach(function(t){return n.sc(t,e)})},Hc.prototype.rc=function(t,e){this.ru(new Ac(t,e))},Hc.prototype.ou=function(t,e){var n=this;t.forEach(function(t){return n.rc(t,e)})},Hc.prototype.cu=function(t){var e=this,n=new Ti(new _i([])),r=new Ac(n,t),t=new Ac(n,t+1),i=[];return this.nu.Qe([r,t],function(t){e.ru(t),i.push(t.key)}),i},Hc.prototype.au=function(){var e=this;this.tu.forEach(function(t){return e.ru(t)})},Hc.prototype.ru=function(t){this.tu=this.tu.delete(t),this.nu=this.nu.delete(t)},Hc.prototype.uu=function(t){var e=new Ti(new _i([])),n=new Ac(e,t),t=new Ac(e,t+1),r=_u();return this.nu.Qe([n,t],function(t){r=r.add(t.key)}),r},Hc.prototype.Mo=function(t){var e=new Ac(t,0);return null!==(e=this.tu.We(e))&&t.isEqual(e.key)},Hc),Ac=(zc.eu=function(t,e){return Ti.At(t.key,e.key)||Or(t.hu,e.hu)},zc.su=function(t,e){return Or(t.hu,e.hu)||Ti.At(t.key,e.key)},zc),Nc=(Gc.prototype.Ro=function(t){return ha.resolve(0===this.Ra.length)},Gc.prototype.Po=function(t,e,n,r){var i=this.lu;this.lu++,0<this.Ra.length&&this.Ra[this.Ra.length-1],n=new Pa(i,e,n,r),this.Ra.push(n);for(var o=0,s=r;o<s.length;o++){var u=s[o];this._u=this._u.add(new Ac(u.key,i)),this.To.fo(t,u.key.path.yt())}return ha.resolve(n)},Gc.prototype.yo=function(t,e){return ha.resolve(this.fu(e))},Gc.prototype.po=function(t,e){return e+=1,e=(e=this.du(e))<0?0:e,ha.resolve(this.Ra.length>e?this.Ra[e]:null)},Gc.prototype.bo=function(){return ha.resolve(0===this.Ra.length?-1:this.lu-1)},Gc.prototype.vo=function(t){return ha.resolve(this.Ra.slice())},Gc.prototype.So=function(t,e){var n=this,r=new Ac(e,0),e=new Ac(e,Number.POSITIVE_INFINITY),i=[];return this._u.Qe([r,e],function(t){t=n.fu(t.hu),i.push(t)}),ha.resolve(i)},Gc.prototype.Do=function(t,e){var n=this,r=new pu(Or);return e.forEach(function(t){var e=new Ac(t,0),t=new Ac(t,Number.POSITIVE_INFINITY);n._u.Qe([e,t],function(t){r=r.add(t.hu)})}),ha.resolve(this.wu(r))},Gc.prototype.xo=function(t,e){var n=e.path,r=n.length+1,e=n;Ti.qt(e)||(e=e.child(""));var e=new Ac(new Ti(e),0),i=new pu(Or);return this._u.Ke(function(t){var e=t.key.path;return!!n.vt(e)&&(e.length===r&&(i=i.add(t.hu)),!0)},e),ha.resolve(this.wu(i))},Gc.prototype.wu=function(t){var e=this,n=[];return t.forEach(function(t){null!==(t=e.fu(t))&&n.push(t)}),n},Gc.prototype.No=function(n,r){var i=this;Tr(0===this.Eu(r.batchId,"removed")),this.Ra.shift();var o=this._u;return ha.forEach(r.mutations,function(t){var e=new Ac(t.key,r.batchId);return o=o.delete(e),i.Io.Oo(n,t.key)}).next(function(){i._u=o})},Gc.prototype.Fo=function(t){},Gc.prototype.Mo=function(t,e){var n=new Ac(e,0),n=this._u.We(n);return ha.resolve(e.isEqual(n&&n.key))},Gc.prototype.ko=function(t){return this.Ra.length,ha.resolve()},Gc.prototype.Eu=function(t,e){return this.du(t)},Gc.prototype.du=function(t){return 0===this.Ra.length?0:t-this.Ra[0].batchId},Gc.prototype.fu=function(t){return(t=this.du(t))<0||t>=this.Ra.length?null:this.Ra[t]},Gc),Oc=(Bc.prototype.Er=function(t,e,n){var r=e.key,i=(o=this.docs.get(r))?o.size:0,o=this.Tu(e);return this.docs=this.docs.Ie(r,{Ir:e,size:o,readTime:n}),this.size+=o-i,this.To.fo(t,r.path.yt())},Bc.prototype.mr=function(t){var e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)},Bc.prototype.Ar=function(t,e){return e=this.docs.get(e),ha.resolve(e?e.Ir:null)},Bc.prototype.getEntries=function(t,e){var n=this,r=yu;return e.forEach(function(t){var e=n.docs.get(t);r=r.Ie(t,e?e.Ir:null)}),ha.resolve(r)},Bc.prototype.Pc=function(t,e,n){for(var r=mu,i=new Ti(e.path.child("")),o=this.docs.Ve(i);o.Ce();){var s=(u=o.De()).key,u=(a=u.value).Ir,a=a.readTime;if(!e.path.vt(s.path))break;a.u(n)<=0||u instanceof ho&&fs(e,u)&&(r=r.Ie(u.key,u))}return ha.resolve(r)},Bc.prototype.Iu=function(t,e){return ha.forEach(this.docs,function(t){return e(t)})},Bc.prototype.lc=function(t){return new Sc(this)},Bc.prototype.dc=function(t){return ha.resolve(this.size)},Bc),Sc=(f(Fc,Ec=o),Fc.prototype.yr=function(n){var r=this,i=[];return this._r.forEach(function(t,e){e&&e.Ir?i.push(r.gc.Er(n,e.Ir,r.wr(t))):r.gc.mr(t)}),ha.hs(i)},Fc.prototype.Rr=function(t,e){return this.gc.Ar(t,e)},Fc.prototype.Pr=function(t,e){return this.gc.getEntries(t,e)},Fc),Rc=(qc.prototype.Un=function(t,n){return this.mu.forEach(function(t,e){return n(e)}),ha.resolve()},qc.prototype.Wo=function(t){return ha.resolve(this.lastRemoteSnapshotVersion)},qc.prototype.jo=function(t){return ha.resolve(this.Au)},qc.prototype.Uo=function(t){return this.highestTargetId=this.Pu.next(),ha.resolve(this.highestTargetId)},qc.prototype.Go=function(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.Au&&(this.Au=e),ha.resolve()},qc.prototype.Ho=function(t){this.mu.set(t.target,t);var e=t.targetId;e>this.highestTargetId&&(this.Pu=new rc(e),this.highestTargetId=e),t.sequenceNumber>this.Au&&(this.Au=t.sequenceNumber)},qc.prototype.zo=function(t,e){return this.Ho(e),this.targetCount+=1,ha.resolve()},qc.prototype.Yo=function(t,e){return this.Ho(e),ha.resolve()},qc.prototype.Xo=function(t,e){return this.mu.delete(e.target),this.Ru.cu(e.targetId),--this.targetCount,ha.resolve()},qc.prototype.Br=function(n,r,i){var o=this,s=0,u=[];return this.mu.forEach(function(t,e){e.sequenceNumber<=r&&null===i.get(e.targetId)&&(o.mu.delete(t),u.push(o.Zo(n,e.targetId)),s++)}),ha.hs(u).next(function(){return s})},qc.prototype.tc=function(t){return ha.resolve(this.targetCount)},qc.prototype.ec=function(t,e){return e=this.mu.get(e)||null,ha.resolve(e)},qc.prototype.nc=function(t,e,n){return this.Ru.iu(e,n),ha.resolve()},qc.prototype.ic=function(e,t,n){this.Ru.ou(t,n);var r=this.persistence.Io,i=[];return r&&t.forEach(function(t){i.push(r.Oo(e,t))}),ha.hs(i)},qc.prototype.Zo=function(t,e){return this.Ru.cu(e),ha.resolve()},qc.prototype.oc=function(t,e){return e=this.Ru.uu(e),ha.resolve(e)},qc.prototype.Mo=function(t,e){return ha.resolve(this.Ru.Mo(e))},qc),kc=(jc.prototype.start=function(){return Promise.resolve()},jc.prototype.$=function(){return this.Oc=!1,Promise.resolve()},Object.defineProperty(jc.prototype,"Nr",{get:function(){return this.Oc},enumerable:!1,configurable:!0}),jc.prototype.Xc=function(){},jc.prototype.Zc=function(){},jc.prototype.Ia=function(){return this.To},jc.prototype.Ta=function(t){var e=this.yu[t.I()];return e||(e=new Nc(this.To,this.Io),this.yu[t.I()]=e),e},jc.prototype.ac=function(){return this.Qc},jc.prototype._c=function(){return this.Kc},jc.prototype.ma=function(){return this.Wc},jc.prototype.runTransaction=function(t,e,n){var r=this;wr("MemoryPersistence","Starting transaction:",t);var i=new Lc(this.Fc.next());return this.Io.Vu(),n(i).next(function(t){return r.Io.pu(i).next(function(){return t})}).cs().then(function(t){return i.ki(),t})},jc.prototype.bu=function(e,n){return ha.ls(Object.values(this.yu).map(function(t){return function(){return t.Mo(e,n)}}))},jc),Lc=(f(Mc,_c=me),Mc),Dc=(xc.Du=function(t){return new xc(t)},Object.defineProperty(xc.prototype,"Cu",{get:function(){if(this.Su)return this.Su;throw Ir()},enumerable:!1,configurable:!0}),xc.prototype.sc=function(t,e,n){return this.vu.sc(n,e),this.Cu.delete(n.toString()),ha.resolve()},xc.prototype.rc=function(t,e,n){return this.vu.rc(n,e),this.Cu.add(n.toString()),ha.resolve()},xc.prototype.Oo=function(t,e){return this.Cu.add(e.toString()),ha.resolve()},xc.prototype.removeTarget=function(t,e){var n=this;this.vu.cu(e.targetId).forEach(function(t){return n.Cu.add(t.toString())});var r=this.persistence.ac();return r.oc(t,e.targetId).next(function(t){t.forEach(function(t){return n.Cu.add(t.toString())})}).next(function(){return r.Xo(t,e)})},xc.prototype.Vu=function(){this.Su=new Set},xc.prototype.pu=function(n){var r=this,i=this.persistence._c().lc();return ha.forEach(this.Cu,function(t){var e=Ti.Lt(t);return r.xu(n,e).next(function(t){t||i.mr(e)})}).next(function(){return r.Su=null,i.apply(n)})},xc.prototype.fc=function(t,e){var n=this;return this.xu(t,e).next(function(t){t?n.Cu.delete(e.toString()):n.Cu.add(e.toString())})},xc.prototype.gu=function(t){return 0},xc.prototype.xu=function(t,e){var n=this;return ha.ls([function(){return ha.resolve(n.vu.Mo(e))},function(){return n.persistence.ac().Mo(t,e)},function(){return n.persistence.bu(t,e)}])},xc),Pc=(Vc.prototype.Ou=function(t){this.activeTargetIds=this.activeTargetIds.add(t)},Vc.prototype.ku=function(t){this.activeTargetIds=this.activeTargetIds.delete(t)},Vc.prototype.Fu=function(){var t={activeTargetIds:this.activeTargetIds.Dt(),updateTimeMs:Date.now()};return JSON.stringify(t)},Vc),Cc=(Uc.prototype.sh=function(t){},Uc.prototype.rh=function(t,e,n){},Uc.prototype.ah=function(t){return this.xh.Ou(t),this.Nh[t]||"not-current"},Uc.prototype.fh=function(t,e,n){this.Nh[t]=e},Uc.prototype.hh=function(t){this.xh.ku(t)},Uc.prototype.lh=function(t){return this.xh.activeTargetIds.has(t)},Uc.prototype._h=function(t){delete this.Nh[t]},Uc.prototype.th=function(){return this.xh.activeTargetIds},Uc.prototype.nh=function(t){return this.xh.activeTargetIds.has(t)},Uc.prototype.start=function(){return this.xh=new Pc,Promise.resolve()},Uc.prototype.wh=function(t,e,n){},Uc.prototype.Eh=function(t){},Uc.prototype.$=function(){},Uc.prototype.Xi=function(t){},Uc.prototype.Ih=function(){},Uc);function Uc(){this.xh=new Pc,this.Nh={},this.$u=null,this.Hi=null}function Vc(){this.activeTargetIds=Eu}function xc(t){this.persistence=t,this.vu=new Tc,this.Su=null}function Mc(t){var e=this;return(e=_c.call(this)||this).oo=t,e}function jc(t,e){var n=this;this.yu={},this.Fc=new Ia(0),this.Oc=!1,this.Oc=!0,this.Io=t(this),this.Qc=new Rc(this),this.To=new ec,this.Kc=(t=this.To,new Oc(t,function(t){return n.Io.gu(t)})),this.fe=new Qa(e),this.Wc=new Ic(this.fe)}function qc(t){this.persistence=t,this.mu=new Ua(wo,bo),this.lastRemoteSnapshotVersion=bi.min(),this.highestTargetId=0,this.Au=0,this.Ru=new Tc,this.targetCount=0,this.Pu=rc.Bo()}function Fc(t){var e=this;return(e=Ec.call(this)||this).gc=t,e}function Bc(t,e){this.To=t,this.Tu=e,this.docs=new iu(Ti.At),this.size=0}function Gc(t,e){this.To=t,this.Io=e,this.Ra=[],this.lu=1,this._u=new pu(Ac.eu)}function zc(t,e){this.key=t,this.hu=e}function Hc(){this.tu=new pu(Ac.eu),this.nu=new pu(Ac.su)}function Wc(t){this.fe=t,this.Xa=new Map,this.Za=new Map}function Yc(){return"undefined"!=typeof document?document:null}function Qc(t,e,n,r,i){var o=this;this.Uh=t,this.Qh=e,this.ks=n,this.Kh={},this.Wh=[],this.jh=new Map,this.Gh=new Set,this.zh=[],this.Hh=i,this.Hh.L(function(t){n.Ws(function(){return y(o,void 0,void 0,function(){return v(this,function(t){switch(t.label){case 0:return oh(this)?(wr("RemoteStore","Restarting streams for network reachability change."),[4,function(n){return y(this,void 0,void 0,function(){var e;return v(this,function(t){switch(t.label){case 0:return(e=n).Gh.add(4),[4,$c(e)];case 1:return t.sent(),e.Jh.set("Unknown"),e.Gh.delete(4),[4,Jc(e)];case 2:return t.sent(),[2]}})})}(this)]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})})}),this.Jh=new Kc(n,r)}var Kc=(Xc.prototype.Mh=function(){var t=this;0===this.Fh&&(this.Lh("Unknown"),this.Oh=this.ks.ni("online_state_timeout",1e4,function(){return t.Oh=null,t.$h("Backend didn't respond within 10 seconds."),t.Lh("Offline"),Promise.resolve()}))},Xc.prototype.Bh=function(t){"Online"===this.state?this.Lh("Unknown"):(this.Fh++,1<=this.Fh&&(this.qh(),this.$h("Connection failed 1 times. Most recent error: "+t.toString()),this.Lh("Offline")))},Xc.prototype.set=function(t){this.qh(),this.Fh=0,"Online"===t&&(this.kh=!1),this.Lh(t)},Xc.prototype.Lh=function(t){t!==this.state&&(this.state=t,this.$u(t))},Xc.prototype.$h=function(t){t="Could not reach Cloud Firestore backend. "+t+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.",this.kh?(br(t),this.kh=!1):wr("OnlineStateTracker",t)},Xc.prototype.qh=function(){null!==this.Oh&&(this.Oh.cancel(),this.Oh=null)},Xc);function Xc(t,e){this.ks=t,this.$u=e,this.state="Unknown",this.Fh=0,this.Oh=null,this.kh=!0}function Jc(r){return y(this,void 0,void 0,function(){var e,n;return v(this,function(t){switch(t.label){case 0:if(!oh(r))return[3,4];e=0,n=r.zh,t.label=1;case 1:return e<n.length?[4,(0,n[e])(!0)]:[3,4];case 2:t.sent(),t.label=3;case 3:return e++,[3,1];case 4:return[2]}})})}function $c(r){return y(this,void 0,void 0,function(){var e,n;return v(this,function(t){switch(t.label){case 0:e=0,n=r.zh,t.label=1;case 1:return e<n.length?[4,(0,n[e])(!1)]:[3,4];case 2:t.sent(),t.label=3;case 3:return e++,[3,1];case 4:return[2]}})})}function Zc(t,e){t.jh.has(e.targetId)||(t.jh.set(e.targetId,e),ih(t)?rh(t):lh(t).li()&&eh(t,e))}function th(t,e){var n=t,t=lh(n);n.jh.delete(e),t.li()&&nh(n,e),0===n.jh.size&&(t.li()?t.di():oh(n)&&n.Jh.set("Unknown"))}function eh(t,e){t.Yh.Dn(e.targetId),lh(t).gi(e)}function nh(t,e){t.Yh.Dn(e),lh(t).Vi(e)}function rh(e){e.Yh=new Du({Xn:function(t){return e.Kh.Xn(t)},Zn:function(t){return e.jh.get(t)||null}}),lh(e).start(),e.Jh.Mh()}function ih(t){return oh(t)&&!lh(t).hi()&&0<t.jh.size}function oh(t){return 0===t.Gh.size}function sh(t){t.Yh=void 0}function uh(n,r,i){return y(this,void 0,void 0,function(){var e=this;return v(this,function(t){switch(t.label){case 0:if(!la(r))throw r;return n.Gh.add(1),[4,$c(n)];case 1:return t.sent(),n.Jh.set("Offline"),i=i||function(){return vc(n.Uh)},n.ks.ea(function(){return y(e,void 0,void 0,function(){return v(this,function(t){switch(t.label){case 0:return wr("RemoteStore","Retrying IndexedDB access"),[4,i()];case 1:return t.sent(),n.Gh.delete(1),[4,Jc(n)];case 2:return t.sent(),[2]}})})}),[2]}})})}function ah(e,n){return n().catch(function(t){return uh(e,t,n)})}function ch(c){return y(this,void 0,void 0,function(){var o,s,u,a;return v(this,function(t){switch(t.label){case 0:s=ph(o=c),u=0<o.Wh.length?o.Wh[o.Wh.length-1].batchId:-1,t.label=1;case 1:if(!(oh(o)&&o.Wh.length<10))return[3,7];t.label=2;case 2:return t.trys.push([2,4,,6]),[4,(n=o.Uh,r=u,(i=n).persistence.runTransaction("Get next mutation batch","readonly",function(t){return void 0===r&&(r=-1),i.Ra.po(t,r)}))];case 3:return null===(a=t.sent())?(0===o.Wh.length&&s.di(),[3,7]):(u=a.batchId,e=a,(n=o).Wh.push(e),(n=ph(n)).li()&&n.bi&&n.vi(e.mutations),[3,6]);case 4:return a=t.sent(),[4,uh(o,a)];case 5:return t.sent(),[3,6];case 6:return[3,1];case 7:return hh(o)&&fh(o),[2]}var e,n,r,i})})}function hh(t){return oh(t)&&!ph(t).hi()&&0<t.Wh.length}function fh(t){ph(t).start()}function lh(n){var t,e,r,i=this;return n.nl||(n.nl=(t=n.Qh,e=n.ks,r={Y:function(n){return y(this,void 0,void 0,function(){return v(this,function(t){return n.jh.forEach(function(t,e){eh(n,t)}),[2]})})}.bind(null,n),Z:function(e,n){return y(this,void 0,void 0,function(){return v(this,function(t){return sh(e),ih(e)?(e.Jh.Bh(n),rh(e)):e.Jh.set("Unknown"),[2]})})}.bind(null,n),yi:function(s,u,a){return y(this,void 0,void 0,function(){var n,o;return v(this,function(t){switch(t.label){case 0:if(s.Jh.set("Online"),!(u instanceof ku&&2===u.state&&u.cause))return[3,6];t.label=1;case 1:return t.trys.push([1,3,,5]),[4,function(o,s){return y(this,void 0,void 0,function(){var e,n,r,i;return v(this,function(t){switch(t.label){case 0:e=s.cause,n=0,r=s.targetIds,t.label=1;case 1:return n<r.length?(i=r[n],o.jh.has(i)?[4,o.Kh.Xh(i,e)]:[3,3]):[3,5];case 2:t.sent(),o.jh.delete(i),o.Yh.removeTarget(i),t.label=3;case 3:t.label=4;case 4:return n++,[3,1];case 5:return[2]}})})}(s,u)];case 2:return t.sent(),[3,5];case 3:return n=t.sent(),wr("RemoteStore","Failed to remove targets %s: %s ",u.targetIds.join(","),n),[4,uh(s,n)];case 4:return t.sent(),[3,5];case 5:return[3,13];case 6:if(u instanceof Su?s.Yh.Ln(u):u instanceof Ru?s.Yh.jn(u):s.Yh.qn(u),a.isEqual(bi.min()))return[3,13];t.label=7;case 7:return t.trys.push([7,11,,13]),[4,vc(s.Uh)];case 8:return o=t.sent(),0<=a.u(o)?[4,(i=a,(e=(r=s).Yh.Hn(i)).rn.forEach(function(t,e){var n;0<t.resumeToken.o()&&(n=r.jh.get(e))&&r.jh.set(e,n.ae(t.resumeToken,i))}),e.on.forEach(function(t){var e=r.jh.get(t);e&&(r.jh.set(t,e.ae(Rr.h,e.oe)),nh(r,t),e=new ps(e.target,t,1,e.sequenceNumber),eh(r,e))}),r.Kh.Zh(e))]:[3,10];case 9:t.sent(),t.label=10;case 10:return[3,13];case 11:return wr("RemoteStore","Failed to raise snapshot:",o=t.sent()),[4,uh(s,o)];case 12:return t.sent(),[3,13];case 13:return[2]}var r,i,e})})}.bind(null,n)},t.Ni(),new ba(e,t.ri,t.credentials,t.fe,r)),n.zh.push(function(e){return y(i,void 0,void 0,function(){return v(this,function(t){switch(t.label){case 0:return e?(n.nl.fi(),ih(n)?rh(n):n.Jh.set("Unknown"),[3,3]):[3,1];case 1:return[4,n.nl.stop()];case 2:t.sent(),sh(n),t.label=3;case 3:return[2]}})})})),n.nl}function ph(n){var t,e,r,i=this;return n.sl||(n.sl=(t=n.Qh,e=n.ks,r={Y:function(e){return y(this,void 0,void 0,function(){return v(this,function(t){return ph(e).Ci(),[2]})})}.bind(null,n),Z:function(e,n){return y(this,void 0,void 0,function(){return v(this,function(t){switch(t.label){case 0:return n&&ph(e).bi?[4,function(r,i){return y(this,void 0,void 0,function(){var e,n;return v(this,function(t){switch(t.label){case 0:return fi(n=i.code)&&n!==Dr.ABORTED?(e=r.Wh.shift(),ph(r).fi(),[4,ah(r,function(){return r.Kh.el(e.batchId,i)})]):[3,3];case 1:return t.sent(),[4,ch(r)];case 2:t.sent(),t.label=3;case 3:return[2]}})})}(e,n)]:[3,2];case 1:t.sent(),t.label=2;case 2:return hh(e)&&fh(e),[2]}})})}.bind(null,n),Di:function(o){return y(this,void 0,void 0,function(){var e,n,r,i;return v(this,function(t){for(e=ph(o),n=0,r=o.Wh;n<r.length;n++)i=r[n],e.vi(i.mutations);return[2]})})}.bind(null,n),Si:function(r,i,o){return y(this,void 0,void 0,function(){var e,n;return v(this,function(t){switch(t.label){case 0:return e=r.Wh.shift(),n=Ca.from(e,i,o),[4,ah(r,function(){return r.Kh.tl(n)})];case 1:return t.sent(),[4,ch(r)];case 2:return t.sent(),[2]}})})}.bind(null,n)},t.Ni(),new _a(e,t.ri,t.credentials,t.fe,r)),n.zh.push(function(e){return y(i,void 0,void 0,function(){return v(this,function(t){switch(t.label){case 0:return e?(n.sl.fi(),[4,ch(n)]):[3,2];case 1:return t.sent(),[3,4];case 2:return[4,n.sl.stop()];case 3:t.sent(),0<n.Wh.length&&(wr("RemoteStore","Stopping write stream with "+n.Wh.length+" pending writes"),n.Wh=[]),t.label=4;case 4:return[2]}})})})),n.sl}function dh(){this.queries=new Ua(cs,as),this.onlineState="Unknown",this.rl=new Set}var yh=function(){this.il=void 0,this.listeners=[]};function vh(s,u){return y(this,void 0,void 0,function(){var e,n,r,i,o;return v(this,function(t){switch(t.label){case 0:if(e=s,n=u.query,r=!1,(i=e.queries.get(n))||(r=!0,i=new yh),!r)return[3,4];t.label=1;case 1:return t.trys.push([1,3,,4]),o=i,[4,e.ol(n)];case 2:return o.il=t.sent(),[3,4];case 3:return o=ya(o=t.sent(),"Initialization of query '"+hs(u.query)+"' failed"),[2,void u.onError(o)];case 4:return e.queries.set(n,i),i.listeners.push(u),u.cl(e.onlineState),i.il&&u.al(i.il)&&mh(e),[2]}})})}function gh(s,u){return y(this,void 0,void 0,function(){var e,n,r,i,o;return v(this,function(t){return e=s,n=u.query,r=!1,(i=e.queries.get(n))&&0<=(o=i.listeners.indexOf(u))&&(i.listeners.splice(o,1),r=0===i.listeners.length),r?[2,(e.queries.delete(n),e.ul(n))]:[2]})})}function mh(t){t.rl.forEach(function(t){t.next()})}var wh=(Nh.prototype.al=function(t){if(!this.options.includeMetadataChanges){for(var e=[],n=0,r=t.docChanges;n<r.length;n++){var i=r[n];3!==i.type&&e.push(i)}t=new Au(t.query,t.docs,t.Ze,e,t.tn,t.fromCache,t.en,!0)}var o=!1;return this.ll?this.fl(t)&&(this.hl.next(t),o=!0):this.dl(t,this.onlineState)&&(this.wl(t),o=!0),this._l=t,o},Nh.prototype.onError=function(t){this.hl.error(t)},Nh.prototype.cl=function(t){this.onlineState=t;var e=!1;return this._l&&!this.ll&&this.dl(this._l,t)&&(this.wl(this._l),e=!0),e},Nh.prototype.dl=function(t,e){if(!t.fromCache)return!0;var n="Offline"!==e;return!(this.options.El&&n||t.docs.bt()&&"Offline"!==e)},Nh.prototype.fl=function(t){if(0<t.docChanges.length)return!0;var e=this._l&&this._l.hasPendingWrites!==t.hasPendingWrites;return!(!t.en&&!e)&&!0===this.options.includeMetadataChanges},Nh.prototype.wl=function(t){t=Au.sn(t.query,t.docs,t.tn,t.fromCache),this.ll=!0,this.hl.next(t)},Nh),bh=(Ah.prototype.Tl=function(){return"metadata"in this.payload},Ah),_h=(Th.prototype.Ha=function(t){return Ju(this.fe,t)},Th.prototype.Ja=function(t){return t.metadata.exists?(r=Ju(this.fe,(n=t.document).name),e=Yu(n.updateTime),n=new ro({mapValue:{fields:n.fields}}),new ho(r,e,n,{hasCommittedMutations:!1})):new fo(this.Ha(t.metadata.name),this.Ya(t.metadata.readTime));var e,n,r},Th.prototype.Ya=Yu,Th),Eh=(Ih.prototype.ml=function(t){this.progress.bytesLoaded+=t.byteLength;var e=this.progress.documentsLoaded;return t.payload.namedQuery?this.queries.push(t.payload.namedQuery):t.payload.documentMetadata?(this.documents.push({metadata:t.payload.documentMetadata}),t.payload.documentMetadata.exists||++e):t.payload.document&&(this.documents[this.documents.length-1].document=t.payload.document,++e),e!==this.progress.documentsLoaded?(this.progress.documentsLoaded=e,Object.assign({},this.progress)):null},Ih.prototype.Al=function(t){for(var e=new Map,n=new _h(this.fe),r=0,i=t;r<i.length;r++){var o=i[r];if(o.metadata.queries)for(var s=n.Ha(o.metadata.name),u=0,a=o.metadata.queries;u<a.length;u++){var c=a[u],h=(e.get(c)||_u()).add(s);e.set(c,h)}}return e},Ih.prototype.complete=function(){return y(this,void 0,void 0,function(){var e,n,r,i;return v(this,function(t){switch(t.label){case 0:return[4,function(f,l,p,d){return y(this,void 0,void 0,function(){var n,r,i,o,e,s,u,a,c,h;return v(this,function(t){switch(t.label){case 0:for(n=f,r=_u(),i=yu,o=wu,e=0,s=p;e<s.length;e++)u=s[e],a=l.Ha(u.metadata.name),u.document&&(r=r.add(a)),i=i.Ie(a,l.Ja(u)),o=o.Ie(a,l.Ya(u.metadata.readTime));return c=n.Qa.lc({yc:!0}),[4,mc(n,ss(Zo(_i.xt("__bundle__/docs/"+d))))];case 1:return h=t.sent(),[2,n.persistence.runTransaction("Apply bundle documents","readwrite",function(e){return gc(e,c,i,bi.min(),o).next(function(t){return c.apply(e),t}).next(function(t){return n.Qc.Zo(e,h.targetId).next(function(){return n.Qc.nc(e,r,h.targetId)}).next(function(){return n.Ka.pa(e,t)})})})]}})})}(this.Uh,new _h(this.fe),this.documents,this.Il.id)];case 1:e=t.sent(),n=this.Al(this.documents),r=0,i=this.queries,t.label=2;case 2:return r<i.length?(i=i[r],[4,function(e,i,o){return void 0===o&&(o=_u()),y(this,void 0,void 0,function(){var n,r;return v(this,function(t){switch(t.label){case 0:return[4,mc(e,ss(tc(i.bundledQuery)))];case 1:return n=t.sent(),[2,(r=e).persistence.runTransaction("Save named query","readwrite",function(t){var e=Yu(i.readTime);return 0<=n.oe.u(e)?r.Wc.lo(t,i):(e=n.ae(Rr.h,e),r.Ba=r.Ba.Ie(e.targetId,e),r.Qc.Yo(t,e).next(function(){return r.Qc.Zo(t,n.targetId)}).next(function(){return r.Qc.nc(t,o,n.targetId)}).next(function(){return r.Wc.lo(t,i)}))})]}})})}(this.Uh,i,n.get(i.name))]):[3,5];case 3:t.sent(),t.label=4;case 4:return r++,[3,2];case 5:return[2,(this.progress.taskState="Success",new Da(Object.assign({},this.progress),e))]}})})},Ih);function Ih(t,e,n){this.Il=t,this.Uh=e,this.fe=n,this.queries=[],this.documents=[],this.progress=Oh(t)}function Th(t){this.fe=t}function Ah(t,e){this.payload=t,this.byteLength=e}function Nh(t,e,n){this.query=t,this.hl=e,this.ll=!1,this._l=null,this.onlineState="Unknown",this.options=n||{}}function Oh(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}var Sh=function(t){this.key=t},Rh=function(t){this.key=t},kh=(Object.defineProperty(Uh.prototype,"pl",{get:function(){return this.Rl},enumerable:!1,configurable:!0}),Uh.prototype.bl=function(t,e){var s=this,u=e?e.vl:new Tu,a=(e||this).Vl,c=(e||this).tn,h=a,f=!1,l=ts(this.query)&&a.size===this.query.limit?a.last():null,p=es(this.query)&&a.size===this.query.limit?a.first():null;if(t.Pe(function(t,e){var n=a.get(t),r=(r=e instanceof ho?e:null)&&(fs(s.query,r)?r:null),i=!!n&&s.tn.has(n.key),o=!!r&&(r.Jt||s.tn.has(r.key)&&r.hasCommittedMutations),e=!1;n&&r?n.data().isEqual(r.data())?i!==o&&(u.track({type:3,doc:r}),e=!0):s.Sl(n,r)||(u.track({type:2,doc:r}),e=!0,(l&&0<s.gl(r,l)||p&&s.gl(r,p)<0)&&(f=!0)):!n&&r?(u.track({type:0,doc:r}),e=!0):n&&!r&&(u.track({type:1,doc:n}),e=!0,(l||p)&&(f=!0)),e&&(c=r?(h=h.add(r),o?c.add(t):c.delete(t)):(h=h.delete(t),c.delete(t)))}),ts(this.query)||es(this.query))for(;h.size>this.query.limit;){var n=ts(this.query)?h.last():h.first(),h=h.delete(n.key),c=c.delete(n.key);u.track({type:1,doc:n})}return{Vl:h,vl:u,La:f,tn:c}},Uh.prototype.Sl=function(t,e){return t.Jt&&e.hasCommittedMutations&&!e.Jt},Uh.prototype.yr=function(t,e,n){var o=this,r=this.Vl;this.Vl=t.Vl,this.tn=t.tn;var i=t.vl.Xe();i.sort(function(t,e){return r=t.type,i=e.type,n(r)-n(i)||o.gl(t.doc,e.doc);function n(t){switch(t){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ir()}}var r,i}),this.Dl(n);var s=e?this.Cl():[],e=(n=0===this.yl.size&&this.ln?1:0)!==this.Pl;return this.Pl=n,0!==i.length||e?{snapshot:new Au(this.query,t.Vl,r,i,t.tn,0==n,e,!1),xl:s}:{xl:s}},Uh.prototype.cl=function(t){return this.ln&&"Offline"===t?(this.ln=!1,this.yr({Vl:this.Vl,vl:new Tu,tn:this.tn,La:!1},!1)):{xl:[]}},Uh.prototype.Nl=function(t){return!this.Rl.has(t)&&!!this.Vl.has(t)&&!this.Vl.get(t).Jt},Uh.prototype.Dl=function(t){var e=this;t&&(t._n.forEach(function(t){return e.Rl=e.Rl.add(t)}),t.fn.forEach(function(t){}),t.dn.forEach(function(t){return e.Rl=e.Rl.delete(t)}),this.ln=t.ln)},Uh.prototype.Cl=function(){var e=this;if(!this.ln)return[];var n=this.yl;this.yl=_u(),this.Vl.forEach(function(t){e.Nl(t.key)&&(e.yl=e.yl.add(t.key))});var r=[];return n.forEach(function(t){e.yl.has(t)||r.push(new Rh(t))}),this.yl.forEach(function(t){n.has(t)||r.push(new Sh(t))}),r},Uh.prototype.Fl=function(t){return this.Rl=t.za,this.yl=_u(),t=this.bl(t.documents),this.yr(t,!0)},Uh.prototype.Ol=function(){return Au.sn(this.query,this.Vl,this.tn,0===this.Pl)},Uh),Lh=function(t,e,n){this.query=t,this.targetId=e,this.view=n},Dh=function(t){this.key=t,this.kl=!1},Ph=(Object.defineProperty(Ch.prototype,"Xl",{get:function(){return!0===this.Yl},enumerable:!1,configurable:!0}),Ch);function Ch(t,e,n,r,i,o){this.Uh=t,this.Ml=e,this.Ll=n,this.$l=r,this.currentUser=i,this.Bl=o,this.ql={},this.Ul=new Ua(cs,as),this.Ql=new Map,this.Kl=[],this.Wl=new iu(Ti.At),this.jl=new Map,this.Gl=new Tc,this.zl={},this.Hl=new Map,this.Jl=rc.qo(),this.onlineState="Unknown",this.Yl=void 0}function Uh(t,e){this.query=t,this.Rl=e,this.Pl=null,this.ln=!1,this.yl=_u(),this.tn=_u(),this.gl=ls(t),this.Vl=new Iu(this.gl)}function Vh(l,p,d){return y(this,void 0,void 0,function(){var s,u;return v(this,function(t){switch(t.label){case 0:(o=l).Ml.Kh.tl=function(o,s){return y(this,void 0,void 0,function(){var n,r,i;return v(this,function(t){switch(t.label){case 0:n=o,r=s.batch.batchId,t.label=1;case 1:return t.trys.push([1,4,,6]),[4,(e=n.Uh,h=s,(f=e).persistence.runTransaction("Acknowledge batch","readwrite-primary",function(t){var r,e=h.batch.keys(),n=f.Qa.lc({yc:!0}),i=f,o=t,s=n,u=(r=h).batch,a=u.keys(),c=ha.resolve();return a.forEach(function(n){c=c.next(function(){return s.Ar(o,n)}).next(function(t){var e=t;Tr(null!==(t=r.ar.get(n))),(!e||e.version.u(t)<0)&&(e=u.nr(n,e,r))&&s.Er(e,r.cr)})}),c.next(function(){return i.Ra.No(o,u)}).next(function(){return n.apply(t)}).next(function(){return f.Ra.ko(t)}).next(function(){return f.Ka.Va(t,e)})}))];case 2:return i=t.sent(),Fh(n,r,null),qh(n,r),n.$l.rh(r,"acknowledged"),[4,Wh(n,i)];case 3:return t.sent(),[3,6];case 4:return[4,La(t.sent())];case 5:return t.sent(),[3,6];case 6:return[2]}var e,h,f})})}.bind(null,o),o.Ml.Kh.el=function(s,u,a){return y(this,void 0,void 0,function(){var n,o;return v(this,function(t){switch(t.label){case 0:n=s,t.label=1;case 1:return t.trys.push([1,4,,6]),[4,(e=n.Uh,r=u,(i=e).persistence.runTransaction("Reject batch","readwrite-primary",function(e){var n;return i.Ra.yo(e,r).next(function(t){return Tr(null!==t),n=t.keys(),i.Ra.No(e,t)}).next(function(){return i.Ra.ko(e)}).next(function(){return i.Ka.Va(e,n)})}))];case 2:return o=t.sent(),Fh(n,u,a),qh(n,u),n.$l.rh(u,"rejected",a),[4,Wh(n,o)];case 3:return t.sent(),[3,6];case 4:return[4,La(t.sent())];case 5:return t.sent(),[3,6];case 6:return[2]}var e,r,i})})}.bind(null,o),u=o,t.label=1;case 1:return t.trys.push([1,5,,6]),[4,(r=u.Uh,a=p,h=r,f=wi.now(),i=a.reduce(function(t,e){return t.add(e.key)},_u()),h.persistence.runTransaction("Locally write mutations","readwrite",function(u){return h.Ka.Va(u,i).next(function(t){c=t;for(var e,n=[],r=0,i=a;r<i.length;r++){var o=i[r],s=(e=o,s=c.get(o.key),void 0!==e.fieldTransforms?function(t,e){for(var n=null,r=0,i=t;r<i.length;r++){var o=i[r],s=e instanceof ho?e.field(o.field):void 0;null!=(s=ms(o.transform,s||null))&&(n=(null==n?new io:n).set(o.field,s))}return n?n.Gt():null}(e.fieldTransforms,s):null);null!=s&&n.push(new Ws(o.key,s,function s(t){var u=[];return Ui(t.fields||{},function(t,e){var n=new Ii([t]);if(no(e))if(0===(e=s(e.mapValue).fields).length)u.push(n);else for(var r=0,i=e;r<i.length;r++){var o=i[r];u.push(n.child(o))}else u.push(n)}),new xi(u)}(s.proto.mapValue),xs.exists(!0)))}return h.Ra.Po(u,f,n,a)})}).then(function(t){var e=t.rr(c);return{batchId:t.batchId,_r:e}}))];case 2:return s=t.sent(),u.$l.sh(s.batchId),e=u,n=s.batchId,o=d,r=(r=(r=e.zl[e.currentUser.I()])||new iu(Or)).Ie(n,o),e.zl[e.currentUser.I()]=r,[4,Wh(u,s._r)];case 3:return t.sent(),[4,ch(u.Ml)];case 4:return t.sent(),[3,6];case 5:return u=ya(u=t.sent(),"Failed to persist write"),d.reject(u),[3,6];case 6:return[2]}var e,n,r,a,c,h,f,i,o})})}function xh(o,s){return y(this,void 0,void 0,function(){var n,i;return v(this,function(t){switch(t.label){case 0:n=o,t.label=1;case 1:return t.trys.push([1,4,,6]),[4,(e=n.Uh,a=e,c=(r=s).oe,h=a.Ba,a.persistence.runTransaction("Apply remote event","readwrite-primary",function(s){var t=a.Qa.lc({yc:!0});h=a.Ba;var u=[];r.rn.forEach(function(t,e){var n,r,i,o=h.get(e);o&&(u.push(a.Qc.ic(s,t.dn,e).next(function(){return a.Qc.nc(s,t._n,e)})),0<(i=t.resumeToken).o()&&(n=o.ae(i,c).ce(s.oo),h=h.Ie(e,n),r=o,i=t,Tr(0<(o=n).resumeToken.o()),(0===r.resumeToken.o()||3e8<=o.oe.Et()-r.oe.Et()||0<i._n.size+i.fn.size+i.dn.size)&&u.push(a.Qc.Yo(s,n))))});var e,n=yu;return r.cn.forEach(function(t,e){r.an.has(t)&&u.push(a.persistence.Io.fc(s,t))}),u.push(gc(s,t,r.cn,c,void 0).next(function(t){n=t})),c.isEqual(bi.min())||(e=a.Qc.Wo(s).next(function(t){return a.Qc.Go(s,s.oo,c)}),u.push(e)),ha.hs(u).next(function(){return t.apply(s)}).next(function(){return a.Ka.pa(s,n)})}).then(function(t){return a.Ba=h,t}))];case 2:return i=t.sent(),s.rn.forEach(function(t,e){(e=n.jl.get(e))&&(Tr(t._n.size+t.fn.size+t.dn.size<=1),0<t._n.size?e.kl=!0:0<t.fn.size?Tr(e.kl):0<t.dn.size&&(Tr(e.kl),e.kl=!1))}),[4,Wh(n,i,s)];case 3:return t.sent(),[3,6];case 4:return[4,La(t.sent())];case 5:return t.sent(),[3,6];case 6:return[2]}var e,r,a,c,h})})}function Mh(t,n,e){var r;((t=t).Xl&&0===e||!t.Xl&&1===e)&&(r=[],t.Ul.forEach(function(t,e){(e=e.view.cl(n)).snapshot&&r.push(e.snapshot)}),function(t,i){t.onlineState=i;var o=!1;t.queries.forEach(function(t,e){for(var n=0,r=e.listeners;n<r.length;n++)r[n].cl(i)&&(o=!0)}),o&&mh(t)}(t.Ll,n),r.length&&t.ql.yi(r),t.onlineState=n,t.Xl&&t.$l.Eh(n))}function jh(o,s){return y(this,void 0,void 0,function(){var n,r,i;return v(this,function(t){switch(t.label){case 0:oh((n=o).Ml)||wr("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),t.label=1;case 1:return t.trys.push([1,3,,4]),[4,(e=n.Uh).persistence.runTransaction("Get highest unacknowledged batch id","readonly",function(t){return e.Ra.bo(t)})];case 2:return-1===(r=t.sent())?[2,void s.resolve()]:((i=n.Hl.get(r)||[]).push(s),n.Hl.set(r,i),[3,4]);case 3:return i=ya(i=t.sent(),"Initialization of waitForPendingWrites() operation failed"),s.reject(i),[3,4];case 4:return[2]}var e})})}function qh(t,e){(t.Hl.get(e)||[]).forEach(function(t){t.resolve()}),t.Hl.delete(e)}function Fh(t,e,n){var r=t,i=r.zl[r.currentUser.I()];i&&((t=i.get(e))&&(n?t.reject(n):t.resolve(),i=i.remove(e)),r.zl[r.currentUser.I()]=i)}function Bh(e,t,n){void 0===n&&(n=null),e.$l.hh(t);for(var r=0,i=e.Ql.get(t);r<i.length;r++){var o=i[r];e.Ul.delete(o),n&&e.ql.t_(o,n)}e.Ql.delete(t),e.Xl&&e.Gl.cu(t).forEach(function(t){e.Gl.Mo(t)||Gh(e,t)})}function Gh(t,e){var n=t.Wl.get(e);null!==n&&(th(t.Ml,n),t.Wl=t.Wl.remove(e),t.jl.delete(n),Hh(t))}function zh(t,e,n){for(var r,i,o=0,s=n;o<s.length;o++){var u=s[o];u instanceof Sh?(t.Gl.sc(u.key,e),r=t,i=(i=u).key,r.Wl.get(i)||(wr("SyncEngine","New document in limbo: "+i),r.Kl.push(i),Hh(r))):u instanceof Rh?(wr("SyncEngine","Document no longer in limbo: "+u.key),t.Gl.rc(u.key,e),t.Gl.Mo(u.key)||Gh(t,u.key)):Ir()}}function Hh(t){for(;0<t.Kl.length&&t.Wl.size<t.Bl;){var e=t.Kl.shift(),n=t.Jl.next();t.jl.set(n,new Dh(e)),t.Wl=t.Wl.Ie(e,n),Zc(t.Ml,new ps(ss(Zo(e.path)),n,2,Ia.Zi))}}function Wh(e,s,u){return y(this,void 0,void 0,function(){var n,r,i,o;return v(this,function(t){switch(t.label){case 0:return r=[],i=[],o=[],(n=e).Ul.bt()?[3,3]:(n.Ul.forEach(function(t,e){o.push(n.Zl(e,s,u).then(function(t){t&&(n.Xl&&n.$l.fh(e.targetId,t.fromCache?"not-current":"current"),r.push(t),t=oc.Na(e.targetId,t),i.push(t))}))}),[4,Promise.all(o)]);case 1:return t.sent(),n.ql.yi(r),[4,function(a,c){return y(this,void 0,void 0,function(){var r,e,n,i,o,s,u;return v(this,function(t){switch(t.label){case 0:r=a,t.label=1;case 1:return t.trys.push([1,3,,4]),[4,r.persistence.runTransaction("notifyLocalViewChanges","readwrite",function(n){return ha.forEach(c,function(e){return ha.forEach(e.Ca,function(t){return r.persistence.Io.sc(n,e.targetId,t)}).next(function(){return ha.forEach(e.xa,function(t){return r.persistence.Io.rc(n,e.targetId,t)})})})})];case 2:return t.sent(),[3,4];case 3:if(!la(e=t.sent()))throw e;return wr("LocalStore","Failed to update sequence numbers: "+e),[3,4];case 4:for(n=0,i=c;n<i.length;n++)u=i[n],o=u.targetId,u.fromCache||(s=r.Ba.get(o),u=s.oe,u=s.ue(u),r.Ba=r.Ba.Ie(o,u));return[2]}})})}(n.Uh,i)];case 2:t.sent(),t.label=3;case 3:return[2]}})})}function Yh(t,e,n){var r=t;(function(l,p,d){return y(this,void 0,void 0,function(){var u,a,c,h,f;return v(this,function(t){switch(t.label){case 0:return t.trys.push([0,14,,15]),[4,p.getMetadata()];case 1:return u=t.sent(),[4,(r=l.Uh,o=r,s=Yu((i=u).createTime),o.persistence.runTransaction("hasNewerBundle","readonly",function(t){return o.Wc.ao(t,i.id)}).then(function(t){return!!t&&0<=t.createTime.u(s)}))];case 2:return t.sent()?[4,p.close()]:[3,4];case 3:return[2,(t.sent(),void d.e_({taskState:"Success",documentsLoaded:u.totalDocuments,bytesLoaded:u.totalBytes,totalDocuments:u.totalDocuments,totalBytes:u.totalBytes}))];case 4:return d.n_(Oh(u)),a=new Eh(u,l.Uh,p.fe),[4,p.s_()];case 5:c=t.sent(),t.label=6;case 6:return c?[4,a.ml(c)]:[3,10];case 7:return(h=t.sent())&&d.n_(h),[4,p.s_()];case 8:c=t.sent(),t.label=9;case 9:return[3,6];case 10:return[4,a.complete()];case 11:return f=t.sent(),[4,Wh(l,f.tr,void 0)];case 12:return t.sent(),[4,(r=l.Uh,e=u,(n=r).persistence.runTransaction("Save bundle","readwrite",function(t){return n.Wc.uo(t,e)}))];case 13:return t.sent(),d.e_(f.progress),[3,15];case 14:return _r("SyncEngine","Loading bundle failed with "+(f=t.sent())),d.i_(f),[3,15];case 15:return[2]}var e,n,r,i,o,s})})})(r,e,n).then(function(){r.$l.Ih()})}var Qh=(Jh.prototype.initialize=function(e){return y(this,void 0,void 0,function(){return v(this,function(t){switch(t.label){case 0:return this.fe=ca(e.rt.O),this.$l=this.r_(e),this.persistence=this.o_(e),[4,this.persistence.start()];case 1:return t.sent(),this.c_=this.a_(e),this.Uh=this.u_(e),[2]}})})},Jh.prototype.a_=function(t){return null},Jh.prototype.u_=function(t){return e=this.persistence,n=new sc,r=t.h_,t=this.fe,new uc(e,n,r,t);var e,n,r},Jh.prototype.o_=function(t){return new kc(Dc.Du,this.fe)},Jh.prototype.r_=function(t){return new Cc},Jh.prototype.terminate=function(){return y(this,void 0,void 0,function(){return v(this,function(t){switch(t.label){case 0:return this.c_&&this.c_.stop(),[4,this.$l.$()];case 1:return t.sent(),[4,this.persistence.$()];case 2:return t.sent(),[2]}})})},Jh),Kh=(Xh.prototype.initialize=function(n,r){return y(this,void 0,void 0,function(){var e=this;return v(this,function(t){switch(t.label){case 0:return this.Uh?[3,2]:(this.Uh=n.Uh,this.$l=n.$l,this.Qh=this.__(r),this.Ml=this.f_(r),this.Ll=this.d_(r),this.Lu=this.w_(r,!n.synchronizeTabs),this.$l.$u=function(t){return Mh(e.Lu,t,1)},this.Ml.Kh.E_=function(i,o){return y(this,void 0,void 0,function(){var n,r;return v(this,function(t){switch(t.label){case 0:return(n=i).currentUser.isEqual(o)?[3,3]:(wr("SyncEngine","User change. New user:",o.I()),[4,yc(n.Uh,o)]);case 1:return r=t.sent(),n.currentUser=o,(e=n).Hl.forEach(function(t){t.forEach(function(t){t.reject(new Pr(Dr.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),e.Hl.clear(),n.$l.wh(o,r.ja,r.Ga),[4,Wh(n,r.Wa)];case 2:t.sent(),t.label=3;case 3:return[2]}var e})})}.bind(null,this.Lu),[4,function(n,r){return y(this,void 0,void 0,function(){var e;return v(this,function(t){switch(t.label){case 0:return e=n,r?(e.Gh.delete(2),[4,Jc(e)]):[3,2];case 1:return t.sent(),[3,5];case 2:return r?[3,4]:(e.Gh.add(2),[4,$c(e)]);case 3:t.sent(),e.Jh.set("Unknown"),t.label=4;case 4:t.label=5;case 5:return[2]}})})}(this.Ml,this.Lu.Xl)]);case 1:t.sent(),t.label=2;case 2:return[2]}})})},Xh.prototype.d_=function(t){return new dh},Xh.prototype.__=function(t){var e=ca(t.rt.O),n=(n=t.rt,new mi(n));return t=t.credentials,new Ea(t,n,e)},Xh.prototype.f_=function(t){var e=this;return new Qc(this.Uh,this.Qh,t.ks,function(t){return Mh(e.Lu,t,0)},t=new(Zr.G()?Zr:$r))},Xh.prototype.w_=function(t,e){return n=this.Uh,r=this.Ml,i=this.Ll,o=this.$l,s=t.h_,t=t.Bl,e=e,t=new Ph(n,r,i,o,s,t),e&&(t.Yl=!0),t;var n,r,i,o,s},Xh.prototype.terminate=function(){return function(n){return y(this,void 0,void 0,function(){var e;return v(this,function(t){switch(t.label){case 0:return e=n,wr("RemoteStore","RemoteStore shutting down."),e.Gh.add(5),[4,$c(e)];case 1:return t.sent(),e.Hh.$(),e.Jh.set("Unknown"),[2]}})})}(this.Ml)},Xh);function Xh(){}function Jh(){this.synchronizeTabs=!1}function $h(n,r){void 0===r&&(r=10240);var i=0;return{read:function(){return y(this,void 0,void 0,function(){var e;return v(this,function(t){return i<n.byteLength?(e={value:n.slice(i,i+r),done:!1},[2,(i+=r,e)]):[2,{done:!0}]})})},cancel:function(){return y(this,void 0,void 0,function(){return v(this,function(t){return[2]})})},releaseLock:function(){}}}var Zh,tf=(pf.prototype.next=function(t){this.observer.next&&this.T_(this.observer.next,t)},pf.prototype.error=function(t){this.observer.error?this.T_(this.observer.error,t):console.error("Uncaught Error in snapshot listener:",t)},pf.prototype.I_=function(){this.muted=!0},pf.prototype.T_=function(t,e){var n=this;this.muted||setTimeout(function(){n.muted||t(e)},0)},pf),ef=(lf.prototype.close=function(){return this.m_.cancel()},lf.prototype.getMetadata=function(){return y(this,void 0,void 0,function(){return v(this,function(t){return[2,this.metadata.promise]})})},lf.prototype.s_=function(){return y(this,void 0,void 0,function(){return v(this,function(t){switch(t.label){case 0:return[4,this.getMetadata()];case 1:return[2,(t.sent(),this.R_())]}})})},lf.prototype.R_=function(){return y(this,void 0,void 0,function(){var e,n,r;return v(this,function(t){switch(t.label){case 0:return[4,this.P_()];case 1:return null===(e=t.sent())?[2,null]:(r=this.A_.decode(e),n=Number(r),isNaN(n)&&this.y_("length string ("+r+") is not valid number"),[4,this.g_(n)]);case 2:return r=t.sent(),[2,new bh(JSON.parse(r),e.length+n)]}})})},lf.prototype.V_=function(){return this.buffer.findIndex(function(t){return t==="{".charCodeAt(0)})},lf.prototype.P_=function(){return y(this,void 0,void 0,function(){var e,n;return v(this,function(t){switch(t.label){case 0:return this.V_()<0?[4,this.p_()]:[3,3];case 1:if(t.sent())return[3,3];t.label=2;case 2:return[3,0];case 3:return 0===this.buffer.length?[2,null]:((e=this.V_())<0&&this.y_("Reached the end of bundle when a length string is expected."),n=this.buffer.slice(0,e),[2,(this.buffer=this.buffer.slice(e),n)])}})})},lf.prototype.g_=function(n){return y(this,void 0,void 0,function(){var e;return v(this,function(t){switch(t.label){case 0:return this.buffer.length<n?[4,this.p_()]:[3,3];case 1:t.sent()&&this.y_("Reached the end of bundle when more is expected."),t.label=2;case 2:return[3,0];case 3:return e=this.A_.decode(this.buffer.slice(0,n)),[2,(this.buffer=this.buffer.slice(n),e)]}})})},lf.prototype.y_=function(t){throw this.m_.cancel(),new Error("Invalid bundle format: "+t)},lf.prototype.p_=function(){return y(this,void 0,void 0,function(){var e,n;return v(this,function(t){switch(t.label){case 0:return[4,this.m_.read()];case 1:return(e=t.sent()).done||((n=new Uint8Array(this.buffer.length+e.value.length)).set(this.buffer),n.set(e.value,this.buffer.length),this.buffer=n),[2,e.done]}})})},lf),nf=(ff.prototype.isEqual=function(t){return this.b_.isEqual(t.b_)},ff),rf=function(t){this._methodName=t},of=(Object.defineProperty(hf.prototype,"D_",{get:function(){return this.S_.path},enumerable:!1,configurable:!0}),Object.defineProperty(hf.prototype,"id",{get:function(){return this.S_.path.Vt()},enumerable:!1,configurable:!0}),Object.defineProperty(hf.prototype,"path",{get:function(){return this.S_.path.Ct()},enumerable:!1,configurable:!0}),Object.defineProperty(hf.prototype,"parent",{get:function(){return new uf(this.firestore,this.v_,this.S_.path.yt())},enumerable:!1,configurable:!0}),hf.prototype.withConverter=function(t){return new hf(this.firestore,t,this.S_)},hf),sf=(cf.prototype.withConverter=function(t){return new cf(this.firestore,t,this.C_)},cf),uf=(f(af,Zh=sf),Object.defineProperty(af.prototype,"id",{get:function(){return this.C_.path.Vt()},enumerable:!1,configurable:!0}),Object.defineProperty(af.prototype,"path",{get:function(){return this.C_.path.Ct()},enumerable:!1,configurable:!0}),Object.defineProperty(af.prototype,"parent",{get:function(){var t=this.D_.yt();return t.bt()?null:new of(this.firestore,null,new Ti(t))},enumerable:!1,configurable:!0}),af.prototype.withConverter=function(t){return new af(this.firestore,t,this.D_)},af);function af(t,e,n){var r=this;return(r=Zh.call(this,t,e,Zo(n))||this).firestore=t,r.D_=n,r.type="collection",r}function cf(t,e,n){this.v_=e,this.C_=n,this.type="query",this.firestore=t}function hf(t,e,n){this.v_=e,this.S_=n,this.type="document",this.firestore=t}function ff(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=0;n<t.length;++n)if(0===t[n].length)throw new Pr(Dr.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this.b_=new Ii(t)}function lf(t,e){var n=this;this.m_=t,this.fe=e,this.metadata=new gi,this.buffer=new Uint8Array,this.A_=new TextDecoder("utf-8"),this.R_().then(function(t){t&&t.Tl()?n.metadata.resolve(t.payload.metadata):n.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             "+JSON.stringify(null==t?void 0:t.payload)))},function(t){return n.metadata.reject(t)})}function pf(t){this.observer=t,this.muted=!1}function df(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t instanceof Ur&&(t=t._),qa("collection","path",e),t instanceof Ja)return za(n=_i.xt.apply(_i,l([e],r))),new uf(t,null,n);if(!(t instanceof of||t instanceof uf))throw new Pr(Dr.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return za(n=_i.xt.apply(_i,l([t.path],r)).child(_i.xt(e))),new uf(t.firestore,null,n)}function yf(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t instanceof Ur&&(t=t._),1===arguments.length&&(e=Ar.t()),qa("doc","path",e),t instanceof Ja)return Ga(n=_i.xt.apply(_i,l([e],r))),new of(t,null,new Ti(n));if(!(t instanceof of||t instanceof uf))throw new Pr(Dr.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return Ga(n=t.D_.child(_i.xt.apply(_i,l([e],r)))),new of(t.firestore,t instanceof uf?t.v_:null,new Ti(n))}function vf(t,e){return t instanceof Ur&&(t=t._),e instanceof Ur&&(e=e._),(t instanceof of||t instanceof uf)&&(e instanceof of||e instanceof uf)&&t.firestore===e.firestore&&t.path===e.path&&t.v_===e.v_}function gf(t,e){return t instanceof Ur&&(t=t._),e instanceof Ur&&(e=e._),t instanceof sf&&e instanceof sf&&t.firestore===e.firestore&&as(t.C_,e.C_)&&t.v_===e.v_}var mf=(Object.defineProperty(Tf.prototype,"latitude",{get:function(){return this.x_},enumerable:!1,configurable:!0}),Object.defineProperty(Tf.prototype,"longitude",{get:function(){return this.N_},enumerable:!1,configurable:!0}),Tf.prototype.isEqual=function(t){return this.x_===t.x_&&this.N_===t.N_},Tf.prototype.toJSON=function(){return{latitude:this.x_,longitude:this.N_}},Tf.prototype.dt=function(t){return Or(this.x_,t.x_)||Or(this.N_,t.N_)},Tf),wf=/^__.*__$/,bf=(If.prototype.F_=function(t,e){return null!==this.Te?new Ws(t,this.data,this.Te,e,this.fieldTransforms):new Hs(t,this.data,e,this.fieldTransforms)},If),_f=(Ef.prototype.F_=function(t,e){return new Ws(t,this.data,this.Te,e,this.fieldTransforms)},Ef);function Ef(t,e,n){this.data=t,this.Te=e,this.fieldTransforms=n}function If(t,e,n){this.data=t,this.Te=e,this.fieldTransforms=n}function Tf(t,e){if(!isFinite(t)||t<-90||90<t)throw new Pr(Dr.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||180<e)throw new Pr(Dr.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this.x_=t,this.N_=e}function Af(t){switch(t){case 0:case 2:case 1:return 1;case 3:case 4:return;default:throw Ir()}}var Nf=(Object.defineProperty(Rf.prototype,"path",{get:function(){return this.settings.path},enumerable:!1,configurable:!0}),Object.defineProperty(Rf.prototype,"k_",{get:function(){return this.settings.k_},enumerable:!1,configurable:!0}),Rf.prototype.M_=function(t){return new Rf(Object.assign(Object.assign({},this.settings),t),this.O,this.fe,this.ignoreUndefinedProperties,this.fieldTransforms,this.Te)},Rf.prototype.L_=function(t){var e=null===(e=this.path)||void 0===e?void 0:e.child(t);return(e=this.M_({path:e,B_:!1})).q_(t),e},Rf.prototype.U_=function(t){var e,t=null===(e=this.path)||void 0===e?void 0:e.child(t);return(t=this.M_({path:t,B_:!1})).O_(),t},Rf.prototype.Q_=function(t){return this.M_({path:void 0,B_:!0})},Rf.prototype.K_=function(t){return il(t,this.settings.methodName,this.settings.W_||!1,this.path,this.settings.j_)},Rf.prototype.contains=function(e){return void 0!==this.Te.find(function(t){return e.vt(t)})||void 0!==this.fieldTransforms.find(function(t){return e.vt(t.field)})},Rf.prototype.O_=function(){if(this.path)for(var t=0;t<this.path.length;t++)this.q_(this.path.get(t))},Rf.prototype.q_=function(t){if(0===t.length)throw this.K_("Document fields must not be empty");if(Af(this.k_)&&wf.test(t))throw this.K_('Document fields cannot begin and end with "__"')},Rf),Of=(Sf.prototype.G_=function(t,e,n,r){return void 0===r&&(r=!1),new Nf({k_:t,methodName:e,j_:n,path:Ii.Nt(),B_:!1,W_:r},this.O,this.fe,this.ignoreUndefinedProperties)},Sf);function Sf(t,e,n){this.O=t,this.ignoreUndefinedProperties=e,this.fe=n||ca(t)}function Rf(t,e,n,r,i,o){this.settings=t,this.O=e,this.fe=n,this.ignoreUndefinedProperties=r,void 0===i&&this.O_(),this.fieldTransforms=i||[],this.Te=o||[]}function kf(t){var e=t.so(),n=ca(t.zr);return new Of(t.zr,!!e.ignoreUndefinedProperties,n)}function Lf(t,e,n,r,i,o){void 0===o&&(o={});var s=t.G_(o.merge||o.mergeFields?2:0,e,n,i);tl("Data must be an object, but it was:",s,r);var u,a,r=$f(r,s);if(o.merge)u=new xi(s.Te),a=s.fieldTransforms;else if(o.mergeFields){for(var c=[],h=0,f=o.mergeFields;h<f.length;h++){var l=el(e,f[h],n);if(!s.contains(l))throw new Pr(Dr.INVALID_ARGUMENT,"Field '"+l+"' is specified in your field mask but missing from your input data.");ol(c,l)||c.push(l)}u=new xi(c),a=s.fieldTransforms.filter(function(t){return u.Qt(t.field)})}else u=null,a=s.fieldTransforms;return new bf(new ro(r),u,a)}var Df,Pf=(f(Cf,Df=rf),Cf.prototype.z_=function(t){if(2!==t.k_)throw 1===t.k_?t.K_(this._methodName+"() can only appear at the top level of your update data"):t.K_(this._methodName+"() cannot be used with set() unless you pass {merge:true}");return t.Te.push(t.path),null},Cf.prototype.isEqual=function(t){return t instanceof Cf},Cf);function Cf(){return null!==Df&&Df.apply(this,arguments)||this}function Uf(t,e,n){return new Nf({k_:3,j_:e.settings.j_,methodName:t._methodName,B_:n},e.O,e.fe,e.ignoreUndefinedProperties)}var Vf,xf,Mf,jf,qf=(f(Yf,jf=rf),Yf.prototype.z_=function(t){return new Us(t.path,new _s)},Yf.prototype.isEqual=function(t){return t instanceof Yf},Yf),Ff=(f(Wf,Mf=rf),Wf.prototype.z_=function(t){var e=Uf(this,t,!0),n=this.H_.map(function(t){return Jf(t,e)}),n=new Es(n);return new Us(t.path,n)},Wf.prototype.isEqual=function(t){return this===t},Wf),Bf=(f(Hf,xf=rf),Hf.prototype.z_=function(t){var e=Uf(this,t,!0),n=this.H_.map(function(t){return Jf(t,e)}),n=new Os(n);return new Us(t.path,n)},Hf.prototype.isEqual=function(t){return this===t},Hf),Gf=(f(zf,Vf=rf),zf.prototype.z_=function(t){var e=new Ls(t.fe,gs(t.fe,this.J_));return new Us(t.path,e)},zf.prototype.isEqual=function(t){return this===t},zf);function zf(t,e){var n=this;return(n=Vf.call(this,t)||this).J_=e,n}function Hf(t,e){var n=this;return(n=xf.call(this,t)||this).H_=e,n}function Wf(t,e){var n=this;return(n=Mf.call(this,t)||this).H_=e,n}function Yf(){return null!==jf&&jf.apply(this,arguments)||this}function Qf(t,r,i,e){var o=t.G_(1,r,i);tl("Data must be an object, but it was:",o,e);var s=[],u=new io;return Ui(e,function(t,e){var n=rl(r,t,i);e instanceof Ur&&(e=e._),t=o.U_(n),e instanceof Pf?s.push(n):null!=(t=Jf(e,t))&&(s.push(n),u.set(n,t))}),e=new xi(s),new _f(u.Gt(),e,o.fieldTransforms)}function Kf(t,e,n,r,i,o){var s=t.G_(1,e,n),u=[el(e,r,n)],a=[i];if(o.length%2!=0)throw new Pr(Dr.INVALID_ARGUMENT,"Function "+e+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var c=0;c<o.length;c+=2)u.push(el(e,o[c])),a.push(o[c+1]);for(var h,f,l,p=[],d=new io,y=u.length-1;0<=y;--y)ol(p,u[y])||(h=u[y],(f=a[y])instanceof Ur&&(f=f._),l=s.U_(h),f instanceof Pf?p.push(h):null!=(l=Jf(f,l))&&(p.push(h),d.set(h,l)));return i=new xi(p),new _f(d.Gt(),i,s.fieldTransforms)}function Xf(t,e,n,r){return void 0===r&&(r=!1),Jf(n,t.G_(r?4:3,e))}function Jf(s,t){if(s instanceof Ur&&(s=s._),Zf(s))return tl("Unsupported field value:",t,s),$f(s,t);if(s instanceof rf)return function(t,e){if(!Af(e.k_))throw e.K_(t._methodName+"() can only be used with update() and set()");if(!e.path)throw e.K_(t._methodName+"() is not currently supported inside arrays");(t=t.z_(e))&&e.fieldTransforms.push(t)}(s,t),null;if(t.path&&t.Te.push(t.path),s instanceof Array){if(t.settings.B_&&4!==t.k_)throw t.K_("Nested arrays are not supported");return function(t){for(var e=[],n=0,r=0,i=s;r<i.length;r++){var o=Jf(i[r],t.Q_(n));null==o&&(o={nullValue:"NULL_VALUE"}),e.push(o),n++}return{arrayValue:{values:e}}}(t)}return function(t,e){if(t instanceof Ur&&(t=t._),null===t)return{nullValue:"NULL_VALUE"};if("number"==typeof t)return gs(e.fe,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){var n=wi.fromDate(t);return{timestampValue:Hu(e.fe,n)}}if(t instanceof wi)return n=new wi(t.seconds,1e3*Math.floor(t.nanoseconds/1e3)),{timestampValue:Hu(e.fe,n)};if(t instanceof mf)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Cr)return{bytesValue:Wu(e.fe,t.l)};if(t instanceof of){n=e.O;var r=t.firestore.zr;if(!r.isEqual(n))throw e.K_("Document reference is for database "+r.projectId+"/"+r.database+" but should be for database "+n.projectId+"/"+n.database);return{referenceValue:Qu(t.firestore.zr||e.O,t.S_.path)}}if(void 0===t&&e.ignoreUndefinedProperties)return null;throw e.K_("Unsupported field value: "+Ha(t))}(s,t)}function $f(t,n){var r={};return Vi(t)?n.path&&0<n.path.length&&n.Te.push(n.path):Ui(t,function(t,e){null!=(e=Jf(e,n.L_(t)))&&(r[t]=e)}),{mapValue:{fields:r}}}function Zf(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof wi||t instanceof mf||t instanceof Cr||t instanceof of||t instanceof rf)}function tl(t,e,n){if(!Zf(n)||"object"!=typeof(r=n)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r))throw"an object"===(n=Ha(n))?e.K_(t+" a custom object"):e.K_(t+" "+n);var r}function el(t,e,n){if(e instanceof Ur&&(e=e._),e instanceof nf)return e.b_;if("string"==typeof e)return rl(t,e);throw il("Field path arguments must be of type string or FieldPath.",t,!1,void 0,n)}var nl=new RegExp("[~\\*/\\[\\]]");function rl(e,n,r){if(0<=n.search(nl))throw il("Invalid field path ("+n+"). Paths must not contain '~', '*', '/', '[', or ']'",e,!1,void 0,r);try{return(new(nf.bind.apply(nf,l([void 0],n.split("."))))).b_}catch(t){throw il("Invalid field path ("+n+"). Paths must not be empty, begin with '.', end with '.', or contain '..'",e,!1,void 0,r)}}function il(t,e,n,r,i){var o=r&&!r.bt(),s=void 0!==i,e="Function "+e+"() called with invalid data";return n&&(e+=" (via `toFirestore()`)"),n="",(o||s)&&(n+=" (found",o&&(n+=" in field "+r),s&&(n+=" in document "+i),n+=")"),new Pr(Dr.INVALID_ARGUMENT,(e+=". ")+t+n)}function ol(t,e){return t.some(function(t){return t.isEqual(e)})}var sl=(fl.prototype.ef=function(r){return y(this,void 0,void 0,function(){var e,n=this;return v(this,function(t){switch(t.label){case 0:if(this.nf(),0<this.mutations.length)throw new Pr(Dr.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,function(s,u){return y(this,void 0,void 0,function(){var r,e,n,i,o;return v(this,function(t){switch(t.label){case 0:return e=Zu((r=s).fe)+"/documents",n={documents:u.map(function(t){return Xu(r.fe,t)})},[4,r._t("BatchGetDocuments",e,n)];case 1:return n=t.sent(),i=new Map,n.forEach(function(t){var e,n,t=(n=r.fe,"found"in t?function(t,e){Tr(!!e.found),e.found.name,e.found.updateTime;var n=Ju(t,e.found.name),t=Yu(e.found.updateTime),e=new ro({mapValue:{fields:e.found.fields}});return new ho(n,t,e,{})}(n,t):"missing"in t?(e=n,Tr(!!(n=t).missing),Tr(!!n.readTime),e=Ju(e,n.missing),n=Yu(n.readTime),new fo(e,n)):Ir());i.set(t.key.toString(),t)}),o=[],[2,(u.forEach(function(t){Tr(!!(t=i.get(t.toString()))),o.push(t)}),o)]}})})}(this.Qh,r)];case 1:return[2,((e=t.sent()).forEach(function(t){t instanceof fo||t instanceof ho?n.sf(t):Ir()}),e)]}})})},fl.prototype.set=function(t,e){this.write(e.F_(t,this.Ee(t))),this.tf.add(t.toString())},fl.prototype.update=function(t,e){try{this.write(e.F_(t,this.rf(t)))}catch(t){this.Z_=t}this.tf.add(t.toString())},fl.prototype.delete=function(t){this.write(new nu(t,this.Ee(t))),this.tf.add(t.toString())},fl.prototype.commit=function(){return y(this,void 0,void 0,function(){var e,n=this;return v(this,function(t){switch(t.label){case 0:if(this.nf(),this.Z_)throw this.Z_;return e=this.Y_,this.mutations.forEach(function(t){e.delete(t.key.toString())}),e.forEach(function(t,e){e=Ti.Lt(e),n.mutations.push(new ru(e,n.Ee(e)))}),[4,function(i,o){return y(this,void 0,void 0,function(){var e,n,r;return v(this,function(t){switch(t.label){case 0:return n=Zu((e=i).fe)+"/documents",r={writes:o.map(function(t){return na(e.fe,t)})},[4,e.at("Commit",n,r)];case 1:return t.sent(),[2]}})})}(this.Qh,this.mutations)];case 1:return t.sent(),this.X_=!0,[2]}})})},fl.prototype.sf=function(t){var e;if(t instanceof ho)e=t.version;else{if(!(t instanceof fo))throw Ir();e=bi.min()}var n=this.Y_.get(t.key.toString());if(n){if(!e.isEqual(n))throw new Pr(Dr.ABORTED,"Document version changed between two reads.")}else this.Y_.set(t.key.toString(),e)},fl.prototype.Ee=function(t){var e=this.Y_.get(t.toString());return!this.tf.has(t.toString())&&e?xs.updateTime(e):xs.de()},fl.prototype.rf=function(t){var e=this.Y_.get(t.toString());if(this.tf.has(t.toString())||!e)return xs.exists(!0);if(e.isEqual(bi.min()))throw new Pr(Dr.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return xs.updateTime(e)},fl.prototype.write=function(t){this.nf(),this.mutations.push(t)},fl.prototype.nf=function(){},fl),ul=(hl.prototype.run=function(){this.af()},hl.prototype.af=function(){var t=this;this.ui.ti(function(){return y(t,void 0,void 0,function(){var e,n,r=this;return v(this,function(t){return e=new sl(this.Qh),(n=this.uf(e))&&n.then(function(t){r.ks.Ws(function(){return e.commit().then(function(){r.Bs.resolve(t)}).catch(function(t){r.hf(t)})})}).catch(function(t){r.hf(t)}),[2]})})})},hl.prototype.uf=function(t){try{var e=this.updateFunction(t);return!ui(e)&&e.catch&&e.then?e:(this.Bs.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.Bs.reject(t),null}},hl.prototype.hf=function(t){var e=this;0<this.cf&&this.lf(t)?(--this.cf,this.ks.Ws(function(){return e.af(),Promise.resolve()})):this.Bs.reject(t)},hl.prototype.lf=function(t){return"FirebaseError"===t.name&&("aborted"===(t=t.code)||"failed-precondition"===t||!fi(t))},hl),al=(cl.prototype.getConfiguration=function(){return y(this,void 0,void 0,function(){return v(this,function(t){switch(t.label){case 0:return[4,this.S.promise];case 1:return[2,(t.sent(),{ks:this.ks,rt:this.rt,clientId:this.clientId,credentials:this.credentials,h_:this.user,Bl:100})]}})})},cl.prototype.ff=function(t){var e=this;this._f=t,this.S.promise.then(function(){return e._f(e.user)})},cl.prototype.df=function(){if(this.ks.wf)throw new Pr(Dr.FAILED_PRECONDITION,"The client has already been terminated.")},cl.prototype.terminate=function(){var t=this;this.ks.Ef();var n=new gi;return this.ks.Tf(function(){return y(t,void 0,void 0,function(){var e;return v(this,function(t){switch(t.label){case 0:return t.trys.push([0,5,,6]),this.If?[4,this.If.terminate()]:[3,2];case 1:t.sent(),t.label=2;case 2:return this.mf?[4,this.mf.terminate()]:[3,4];case 3:t.sent(),t.label=4;case 4:return this.credentials.p(),n.resolve(),[3,6];case 5:return e=ya(t.sent(),"Failed to shutdown persistence"),n.reject(e),[3,6];case 6:return[2]}})})}),n.promise},cl);function cl(t,e,n){var r=this;this.credentials=t,this.ks=e,this.rt=n,this.user=Br.UNAUTHENTICATED,this.clientId=Ar.t(),this._f=function(){},this.S=new gi,this.credentials.V(function(t){wr("FirestoreClient","Received user=",t.uid),r.user.isEqual(t)||(r.user=t,r._f(t)),r.S.resolve()})}function hl(t,e,n,r){this.ks=t,this.Qh=e,this.updateFunction=n,this.Bs=r,this.cf=5,this.ui=new wa(this.ks,"transaction_retry")}function fl(t){this.Qh=t,this.Y_=new Map,this.mutations=[],this.X_=!1,this.Z_=null,this.tf=new Set}function ll(e){return y(this,void 0,void 0,function(){return v(this,function(t){switch(t.label){case 0:return e.mf?[3,2]:(wr("FirestoreClient","Using default OfflineComponentProvider"),[4,function(r,i){return y(this,void 0,void 0,function(){var e,n=this;return v(this,function(t){switch(t.label){case 0:return r.ks.Af(),wr("FirestoreClient","Initializing OfflineComponentProvider"),[4,r.getConfiguration()];case 1:return e=t.sent(),[4,i.initialize(e)];case 2:return t.sent(),r.ff(function(e){return r.ks.ea(function(){return y(n,void 0,void 0,function(){return v(this,function(t){switch(t.label){case 0:return[4,yc(i.Uh,e)];case 1:return t.sent(),[2]}})})})}),i.persistence.Xc(function(){return r.terminate()}),r.mf=i,[2]}})})}(e,new Qh)]);case 1:t.sent(),t.label=2;case 2:return[2,e.mf]}})})}function pl(e){return y(this,void 0,void 0,function(){return v(this,function(t){switch(t.label){case 0:return e.If?[3,2]:(wr("FirestoreClient","Using default OnlineComponentProvider"),[4,function(r,i){return y(this,void 0,void 0,function(){var e,n;return v(this,function(t){switch(t.label){case 0:return r.ks.Af(),[4,ll(r)];case 1:return e=t.sent(),wr("FirestoreClient","Initializing OnlineComponentProvider"),[4,r.getConfiguration()];case 2:return n=t.sent(),[4,i.initialize(e,n)];case 3:return t.sent(),r.ff(function(t){return r.ks.ea(function(){return function(r,i){return y(this,void 0,void 0,function(){var e,n;return v(this,function(t){switch(t.label){case 0:return(e=r).ks.Af(),wr("RemoteStore","RemoteStore received new credentials"),n=oh(e),e.Gh.add(3),[4,$c(e)];case 1:return t.sent(),n&&e.Jh.set("Unknown"),[4,e.Kh.E_(i)];case 2:return t.sent(),e.Gh.delete(3),[4,Jc(e)];case 3:return t.sent(),[2]}})})}(i.Ml,t)})}),r.If=i,[2]}})})}(e,new Kh)]);case 1:t.sent(),t.label=2;case 2:return[2,e.If]}})})}function dl(t){return ll(t).then(function(t){return t.persistence})}function yl(t){return ll(t).then(function(t){return t.Uh})}function vl(t){return pl(t).then(function(t){return t.Ml})}function gl(t){return pl(t).then(function(t){return t.Lu})}function ml(r){return y(this,void 0,void 0,function(){var e,n;return v(this,function(t){switch(t.label){case 0:return[4,pl(r)];case 1:return e=t.sent(),[2,((n=e.Ll).ol=function(u,a){return y(this,void 0,void 0,function(){var n,r,i,o,s;return v(this,function(t){switch(t.label){case 0:return(e=u).Ml.Kh.Zh=xh.bind(null,e),e.Ml.Kh.Xn=function(t,e){var n=t;if((t=n.jl.get(e))&&t.kl)return _u().add(t.key);var r=_u();if(!(e=n.Ql.get(e)))return r;for(var i=0,o=e;i<o.length;i++)var s=o[i],s=n.Ul.get(s),r=r.je(s.view.pl);return r}.bind(null,e),e.Ml.Kh.Xh=function(o,s,u){return y(this,void 0,void 0,function(){var e,n,r,i;return v(this,function(t){switch(t.label){case 0:return(e=o).$l.fh(s,"rejected",u),i=e.jl.get(s),(n=i&&i.key)?(r=(r=new iu(Ti.At)).Ie(n,new fo(n,bi.min())),i=_u().add(n),i=new Nu(bi.min(),new Map,new pu(Or),r,i),[4,xh(e,i)]):[3,2];case 1:return t.sent(),e.Wl=e.Wl.remove(n),e.jl.delete(s),Hh(e),[3,4];case 2:return[4,wc(e.Uh,s,!1).then(function(){return Bh(e,s,u)}).catch(La)];case 3:t.sent(),t.label=4;case 4:return[2]}})})}.bind(null,e),e.ql.yi=function(t,e){for(var n=t,r=!1,i=0,o=e;i<o.length;i++){var s=o[i],u=s.query;if(u=n.queries.get(u)){for(var a=0,c=u.listeners;a<c.length;a++)c[a].al(s)&&(r=!0);u.il=s}}r&&mh(n)}.bind(null,e.Ll),e.ql.t_=function(t,e,n){var r=t;if(t=r.queries.get(e))for(var i=0,o=t.listeners;i<o.length;i++)o[i].onError(n);r.queries.delete(e)}.bind(null,e.Ll),(s=(n=e).Ul.get(a))?(r=s.targetId,n.$l.ah(r),i=s.view.Ol(),[3,4]):[3,1];case 1:return[4,mc(n.Uh,ss(a))];case 2:return o=t.sent(),s=n.$l.ah(o.targetId),r=o.targetId,[4,function(i,o,s,u){return y(this,void 0,void 0,function(){var e,n,r;return v(this,function(t){switch(t.label){case 0:return i.Zl=function(t,e,n){return function(r,i,o,s){return y(this,void 0,void 0,function(){var e,n;return v(this,function(t){switch(t.label){case 0:return(e=i.view.bl(o)).La?[4,bc(r.Uh,i.query,!1).then(function(t){return t=t.documents,i.view.bl(t,e)})]:[3,2];case 1:e=t.sent(),t.label=2;case 2:return n=s&&s.rn.get(i.targetId),n=i.view.yr(e,r.Xl,n),[2,(zh(r,i.targetId,n.xl),n.snapshot)]}})})}(i,t,e,n)},[4,bc(i.Uh,o,!0)];case 1:return n=t.sent(),r=new kh(o,n.za),e=r.bl(n.documents),n=Ou.hn(s,u&&"Offline"!==i.onlineState),n=r.yr(e,i.Xl,n),zh(i,s,n.xl),r=new Lh(o,s,r),[2,(i.Ul.set(o,r),i.Ql.has(s)?i.Ql.get(s).push(o):i.Ql.set(s,[o]),n.snapshot)]}})})}(n,a,r,"current"===s)];case 3:i=t.sent(),n.Xl&&Zc(n.Ml,o),t.label=4;case 4:return[2,i]}var e})})}.bind(null,e.Lu),n.ul=function(i,o){return y(this,void 0,void 0,function(){var e,n,r;return v(this,function(t){switch(t.label){case 0:return n=(e=i).Ul.get(o),1<(r=e.Ql.get(n.targetId)).length?[2,(e.Ql.set(n.targetId,r.filter(function(t){return!as(t,o)})),void e.Ul.delete(o))]:e.Xl?(e.$l.hh(n.targetId),e.$l.nh(n.targetId)?[3,2]:[4,wc(e.Uh,n.targetId,!1).then(function(){e.$l._h(n.targetId),th(e.Ml,n.targetId),Bh(e,n.targetId)}).catch(La)]):[3,3];case 1:t.sent(),t.label=2;case 2:return[3,5];case 3:return Bh(e,n.targetId),[4,wc(e.Uh,n.targetId,!0)];case 4:t.sent(),t.label=5;case 5:return[2]}})})}.bind(null,e.Lu),n)]}})})}function wl(n,r,i){var t=this;void 0===i&&(i={});var o=new gi;return n.ks.Ws(function(){return y(t,void 0,void 0,function(){var e;return v(this,function(t){switch(t.label){case 0:return e=function(n,r,i,o,s){var t=new tf({next:function(t){r.Ws(function(){return gh(n,u)});var e=t.docs.has(i);!e&&t.fromCache?s.reject(new Pr(Dr.UNAVAILABLE,"Failed to get document because the client is offline.")):e&&t.fromCache&&o&&"server"===o.source?s.reject(new Pr(Dr.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):s.resolve(t)},error:function(t){return s.reject(t)}}),u=new wh(Zo(i.path),t,{includeMetadataChanges:!0,El:!0});return vh(n,u)},[4,ml(n)];case 1:return[2,e.apply(void 0,[t.sent(),n.ks,r,i,o])]}})})}),o.promise}function bl(n,r,i){var t=this;void 0===i&&(i={});var o=new gi;return n.ks.Ws(function(){return y(t,void 0,void 0,function(){var e;return v(this,function(t){switch(t.label){case 0:return e=function(e,n,t,r,i){var o=new tf({next:function(t){n.Ws(function(){return gh(e,s)}),t.fromCache&&"server"===r.source?i.reject(new Pr(Dr.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(t)},error:function(t){return i.reject(t)}}),s=new wh(t,o,{includeMetadataChanges:!0,El:!0});return vh(e,s)},[4,ml(n)];case 1:return[2,e.apply(void 0,[t.sent(),n.ks,r,i,o])]}})})}),o.promise}var _l,El=(Object.defineProperty(Al.prototype,"wf",{get:function(){return this.yf},enumerable:!1,configurable:!0}),Al.prototype.Ws=function(t){this.enqueue(t)},Al.prototype.Tf=function(t){this.Sf(),this.Df(t)},Al.prototype.Ef=function(){var t;this.yf||(this.yf=!0,(t=Yc())&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.vf))},Al.prototype.enqueue=function(t){return this.Sf(),this.yf?new Promise(function(t){}):this.Df(t)},Al.prototype.ea=function(t){var e=this;this.Ws(function(){return e.Pf.push(t),e.Cf()})},Al.prototype.Cf=function(){return y(this,void 0,void 0,function(){var e,n=this;return v(this,function(t){switch(t.label){case 0:if(0===this.Pf.length)return[3,5];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,this.Pf[0]()];case 2:return t.sent(),this.Pf.shift(),this.ui.reset(),[3,4];case 3:if(!la(e=t.sent()))throw e;return wr("AsyncQueue","Operation failed with retryable error: "+e),[3,4];case 4:0<this.Pf.length&&this.ui.ti(function(){return n.Cf()}),t.label=5;case 5:return[2]}})})},Al.prototype.Df=function(t){var r=this,e=this.Rf.then(function(){return r.pf=!0,t().catch(function(t){throw r.Vf=t,r.pf=!1,br("INTERNAL UNHANDLED ERROR: ",(n=(e=t).message||"",e.stack&&(n=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),n)),t;var e,n}).then(function(t){return r.pf=!1,t})});return this.Rf=e},Al.prototype.ni=function(t,e,n){var r=this;return this.Sf(),-1<this.bf.indexOf(t)&&(e=0),n=pa.qs(this,t,e,n,function(t){return r.xf(t)}),this.gf.push(n),n},Al.prototype.Sf=function(){this.Vf&&Ir()},Al.prototype.Af=function(){},Al.prototype.Nf=function(){return y(this,void 0,void 0,function(){var e;return v(this,function(t){switch(t.label){case 0:return[4,e=this.Rf];case 1:t.sent(),t.label=2;case 2:if(e!==this.Rf)return[3,0];t.label=3;case 3:return[2]}})})},Al.prototype.Ff=function(t){for(var e=0,n=this.gf;e<n.length;e++)if(n[e].Ms===t)return!0;return!1},Al.prototype.Of=function(r){var i=this;return this.Nf().then(function(){i.gf.sort(function(t,e){return t.Ls-e.Ls});for(var t=0,e=i.gf;t<e.length;t++){var n=e[t];if(n.Ks(),"all"!==r&&n.Ms===r)break}return i.Nf()})},Al.prototype.kf=function(t){this.bf.push(t)},Al.prototype.xf=function(t){t=this.gf.indexOf(t),this.gf.splice(t,1)},Al),Il=(f(Tl,_l=Ja),Tl.prototype.io=function(){return this.Lf||Ol(this),this.Lf.terminate()},Tl);function Tl(t,e){var n=this;return(n=_l.call(this,t,e)||this).Mf=new El,n.Wr="name"in t?t.name:"[DEFAULT]",n}function Al(){var e=this;this.Rf=Promise.resolve(),this.Pf=[],this.yf=!1,this.gf=[],this.Vf=null,this.pf=!1,this.bf=[],this.ui=new wa(this,"async_queue_retry"),this.vf=function(){var t=Yc();t&&wr("AsyncQueue","Visibility state changed to "+t.visibilityState),e.ui.si()};var t=Yc();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this.vf)}function Nl(t){return t.Lf||Ol(t),t.Lf.df(),t.Lf}function Ol(t){var e,n,r=t.so(),r=(e=t.zr,n=t.Wr,new Xr(e,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling));t.Lf=new al(t.Hr,t.Mf,r)}var Sl,o=(Pl.prototype.$f=function(t,e){switch(void 0===e&&(e="none"),Hi(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Fi(t.integerValue||t.doubleValue);case 3:return this.Bf(t.timestampValue);case 4:return this.qf(t,e);case 5:return t.stringValue;case 6:return this.Uf(Bi(t.bytesValue));case 7:return this.Qf(t.referenceValue);case 8:return this.Kf(t.geoPointValue);case 9:return this.Wf(t.arrayValue,e);case 10:return this.jf(t.mapValue,e);default:throw Ir()}},Pl.prototype.jf=function(t,n){var r=this,i={};return Ui(t.fields||{},function(t,e){i[t]=r.$f(e,n)}),i},Pl.prototype.Kf=function(t){return new mf(Fi(t.latitude),Fi(t.longitude))},Pl.prototype.Wf=function(t,e){var n=this;return(t.values||[]).map(function(t){return n.$f(t,e)})},Pl.prototype.qf=function(t,e){switch(e){case"previous":var n=function t(e){return Gi(e=e.mapValue.fields.__previous_value__)?t(e):e}(t);return null==n?null:this.$f(n,e);case"estimate":return this.Bf(zi(t));default:return null}},Pl.prototype.Bf=function(t){return t=qi(t),new wi(t.seconds,t.nanos)},Pl.prototype.Gf=function(t,e){var n=_i.xt(t);return Tr(aa(n)),t=new Jr(n.get(1),n.get(3)),n=new Ti(n.Pt(5)),t.isEqual(e)||br("Document "+n+" contains a document reference within a different database ("+t.projectId+"/"+t.database+") which is not supported. It will be treated as a reference in the current database ("+e.projectId+"/"+e.database+") instead."),n},Pl),Rl=(Object.defineProperty(Dl.prototype,"id",{get:function(){return this.S_.path.Vt()},enumerable:!1,configurable:!0}),Object.defineProperty(Dl.prototype,"ref",{get:function(){return new of(this.zf,this.v_,this.S_)},enumerable:!1,configurable:!0}),Dl.prototype.exists=function(){return null!==this.Jf},Dl.prototype.data=function(){if(this.Jf){if(this.v_){var t=new kl(this.zf,this.Hf,this.S_,this.Jf,null);return this.v_.fromFirestore(t)}return this.Hf.$f(this.Jf.Yt())}},Dl.prototype.get=function(t){if(this.Jf&&null!==(t=this.Jf.data().field(Cl("DocumentSnapshot.get",t))))return this.Hf.$f(t)},Dl),kl=(f(Ll,Sl=Rl),Ll.prototype.data=function(){return Sl.prototype.data.call(this)},Ll);function Ll(){return null!==Sl&&Sl.apply(this,arguments)||this}function Dl(t,e,n,r,i){this.zf=t,this.Hf=e,this.S_=n,this.Jf=r,this.v_=i}function Pl(){}function Cl(t,e){return"string"==typeof e?rl(t,e):(e instanceof Ur?e._:e).b_}function Ul(t){if(es(t)&&0===t.ne.length)throw new Pr(Dr.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}function Vl(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=0,i=e;r<i.length;r++)t=i[r].Yf(t);return t}var xl,Ml,jl,ql,Fl,Bl=(f(Jl,Fl=me=function(){}),Jl.prototype.Yf=function(t){var e=kf(t.firestore),e=function(t,e,n,r,i,o){if(r.Ot()){if("array-contains"===i||"array-contains-any"===i)throw new Pr(Dr.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+i+"' queries on FieldPath.documentId().");if("in"===i||"not-in"===i){tp(o,i);for(var s=[],u=0,a=o;u<a.length;u++){var c=a[u];s.push(Zl(n,t,c))}h={arrayValue:{values:s}}}else h=Zl(n,t,o)}else"in"!==i&&"not-in"!==i&&"array-contains-any"!==i||tp(o,i),h=Xf(e,"where",o,"in"===i||"not-in"===i);var h=Io.create(r,i,h);return function(t,e){if(e.ee()){var n=rs(t);if(null!==n&&!n.isEqual(e.field))throw new Pr(Dr.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, >, or >=) must be on the same field. But you have inequality filters on '"+n.toString()+"' and '"+e.field.toString()+"'");null!==(n=ns(t))&&ep(0,e.field,n)}if(null!==(t=function(t,e){for(var n=0,r=t.filters;n<r.length;n++){var i=r[n];if(0<=e.indexOf(i.op))return i.op}return null}(t,function(){switch(e.op){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}())))throw t===e.op?new Pr(Dr.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '"+e.op.toString()+"' filter."):new Pr(Dr.INVALID_ARGUMENT,"Invalid query. You cannot use '"+e.op.toString()+"' filters with '"+t.toString()+"' filters.")}(t,h),h}(t.C_,e,t.firestore.zr,this.Xf,this.Zf,this.td);return new sf(t.firestore,t.v_,(e=(t=t.C_).filters.concat([e]),new $o(t.path,t.collectionGroup,t.ne.slice(),e,t.limit,t.limitType,t.startAt,t.endAt)))},Jl),Gl=(f(Xl,ql=me),Xl.prototype.Yf=function(t){var e=function(t,e,n){if(null!==t.startAt)throw new Pr(Dr.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==t.endAt)throw new Pr(Dr.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new Ko(e,n);return e=r,null!==ns(n=t)||null!==(t=rs(n))&&ep(0,t,e.field),r}(t.C_,this.Xf,this.ed);return new sf(t.firestore,t.v_,(e=(t=t.C_).ne.concat([e]),new $o(t.path,t.collectionGroup,e,t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)))},Xl),zl=(f(Kl,jl=me),Kl.prototype.Yf=function(t){return new sf(t.firestore,t.v_,us(t.C_,this.nd,this.sd))},Kl),Hl=(f(Ql,Ml=me),Ql.prototype.Yf=function(t){var e=$l(t,this.type,this.rd,this.od);return new sf(t.firestore,t.v_,(t=t.C_,new $o(t.path,t.collectionGroup,t.ne.slice(),t.filters.slice(),t.limit,t.limitType,e,t.endAt)))},Ql),Wl=(f(Yl,xl=me),Yl.prototype.Yf=function(t){var e=$l(t,this.type,this.rd,this.od);return new sf(t.firestore,t.v_,(t=t.C_,new $o(t.path,t.collectionGroup,t.ne.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,e)))},Yl);function Yl(t,e,n){var r=this;return(r=xl.call(this)||this).type=t,r.rd=e,r.od=n,r}function Ql(t,e,n){var r=this;return(r=Ml.call(this)||this).type=t,r.rd=e,r.od=n,r}function Kl(t,e,n){var r=this;return(r=jl.call(this)||this).type=t,r.nd=e,r.sd=n,r}function Xl(t,e){var n=this;return(n=ql.call(this)||this).Xf=t,n.ed=e,n.type="orderBy",n}function Jl(t,e,n){var r=this;return(r=Fl.call(this)||this).Xf=t,r.Zf=e,r.td=n,r.type="where",r}function $l(t,c,e,n){if(e[0]instanceof Ur&&(e[0]=e[0]._),e[0]instanceof Rl)return function(t,e,n,r){if(!n)throw new Pr(Dr.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+c+"().");for(var i=[],o=0,s=os(t);o<s.length;o++){var u=s[o];if(u.field.Ot())i.push(Ji(e,n.key));else{var a=n.field(u.field);if(Gi(a))throw new Pr(Dr.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+u.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===a)throw u=u.field.Ct(),new Pr(Dr.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+u+"' (used as the orderBy) does not exist.");i.push(a)}}return new Go(i,r)}(t.C_,t.firestore.zr,e[0].Jf,n);var r=kf(t.firestore);return function(t,e,n,r,i,o){var s=t.ne;if(i.length>s.length)throw new Pr(Dr.INVALID_ARGUMENT,"Too many arguments provided to "+r+"(). The number of arguments must be less than or equal to the number of orderBy() clauses");for(var u=[],a=0;a<i.length;a++){var c=i[a];if(s[a].field.Ot()){if("string"!=typeof c)throw new Pr(Dr.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+r+"(), but got a "+typeof c);if(!is(t)&&-1!==c.indexOf("/"))throw new Pr(Dr.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+r+"() must be a plain document ID, but '"+c+"' contains a slash.");var h=t.path.child(_i.xt(c));if(!Ti.qt(h))throw new Pr(Dr.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+r+"() must result in a valid document path, but '"+h+"' is not because it contains an odd number of segments.");h=new Ti(h),u.push(Ji(e,h))}else c=Xf(n,r,c),u.push(c)}return new Go(u,o)}(t.C_,t.firestore.zr,r,c,e,n)}function Zl(t,e,n){if(n instanceof Ur&&(n=n._),"string"==typeof n){if(""===n)throw new Pr(Dr.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!is(e)&&-1!==n.indexOf("/"))throw new Pr(Dr.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+n+"' contains a '/' character.");if(e=e.path.child(_i.xt(n)),!Ti.qt(e))throw new Pr(Dr.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+e+"' is not because it has an odd number of segments ("+e.length+").");return Ji(t,new Ti(e))}if(n instanceof of)return Ji(t,n.S_);throw new Pr(Dr.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+Ha(n)+".")}function tp(t,e){if(!Array.isArray(t)||0===t.length)throw new Pr(Dr.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+e.toString()+"' filters.");if(10<t.length)throw new Pr(Dr.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters support a maximum of 10 elements in the value array.")}function ep(t,e,n){if(!n.isEqual(e))throw new Pr(Dr.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, >, or >=) on field '"+e.toString()+"' and so you must also use '"+e.toString()+"' as your first argument to orderBy(), but your first orderBy() is on field '"+n.toString()+"' instead.")}function np(t,e,n){return t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e}var rp,ip=(f(op,rp=o),op.prototype.Uf=function(t){return new Cr(t)},op.prototype.Qf=function(t){return t=this.Gf(t,this.firestore.zr),new of(this.firestore,null,t)},op);function op(t){var e=this;return(e=rp.call(this)||this).firestore=t,e}function sp(i){return function(){if("object"==typeof i&&null!==i)for(var t=i,e=0,n=["next","error","complete"];e<n.length;e++){var r=n[e];if(r in t&&"function"==typeof t[r])return 1}}()}var up,ap,cp=(vp.prototype.isEqual=function(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache},vp),hp=(f(yp,ap=Rl),yp.prototype.exists=function(){return ap.prototype.exists.call(this)},yp.prototype.data=function(t){if(void 0===t&&(t={}),this.Jf){if(this.v_){var e=new fp(this.zf,this.Hf,this.S_,this.Jf,this.metadata,null);return this.v_.fromFirestore(e,t)}return this.Hf.$f(this.Jf.Yt(),t.serverTimestamps)}},yp.prototype.get=function(t,e){if(void 0===e&&(e={}),this.Jf&&null!==(t=this.Jf.data().field(Cl("DocumentSnapshot.get",t))))return this.Hf.$f(t,e.serverTimestamps)},yp),fp=(f(dp,up=hp),dp.prototype.data=function(t){return void 0===t&&(t={}),up.prototype.data.call(this,t)},dp),lp=(Object.defineProperty(pp.prototype,"docs",{get:function(){var e=[];return this.forEach(function(t){return e.push(t)}),e},enumerable:!1,configurable:!0}),Object.defineProperty(pp.prototype,"size",{get:function(){return this.ud.docs.size},enumerable:!1,configurable:!0}),Object.defineProperty(pp.prototype,"empty",{get:function(){return 0===this.size},enumerable:!1,configurable:!0}),pp.prototype.forEach=function(e,n){var r=this;this.ud.docs.forEach(function(t){e.call(n,new fp(r.zf,r.Hf,t.key,t,new cp(r.ud.tn.has(t.key),r.ud.fromCache),r.query.v_))})},pp.prototype.docChanges=function(t){if(void 0===t&&(t={}),(t=!!t.includeMetadataChanges)&&this.ud.nn)throw new Pr(Dr.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this.hd&&this.ld===t||(this.hd=function(i,e){if(i.ud.Ze.bt()){var n=0;return i.ud.docChanges.map(function(t){var e=new fp(i.zf,i.Hf,t.doc.key,t.doc,new cp(i.ud.tn.has(t.doc.key),i.ud.fromCache),i.query.v_);return t.doc,{type:"added",doc:e,oldIndex:-1,newIndex:n++}})}var o=i.ud.Ze;return i.ud.docChanges.filter(function(t){return e||3!==t.type}).map(function(t){var e=new fp(i.zf,i.Hf,t.doc.key,t.doc,new cp(i.ud.tn.has(t.doc.key),i.ud.fromCache),i.query.v_),n=-1,r=-1;return 0!==t.type&&(n=o.indexOf(t.doc.key),o=o.delete(t.doc.key)),1!==t.type&&(r=(o=o.add(t.doc)).indexOf(t.doc.key)),{type:function(){switch(t.type){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ir()}}(),doc:e,oldIndex:n,newIndex:r}})}(this,t),this.ld=t),this.hd},pp);function pp(t,e,n,r){this.zf=t,this.Hf=e,this.ud=r,this.metadata=new cp(r.hasPendingWrites,r.fromCache),this.query=n}function dp(){return null!==up&&up.apply(this,arguments)||this}function yp(t,e,n,r,i,o){var s=this;return(s=ap.call(this,t,e,n,r,o)||this).zf=t,s.ad=t,s.metadata=i,s}function vp(t,e){this.hasPendingWrites=t,this.fromCache=e}function gp(t,e){return t instanceof hp&&e instanceof hp?t.zf===e.zf&&t.S_.isEqual(e.S_)&&(null===t.Jf?null===e.Jf:t.Jf.isEqual(e.Jf))&&t.v_===e.v_:t instanceof lp&&e instanceof lp&&t.zf===e.zf&&gf(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t.ud.isEqual(e.ud)}var mp,wp=(f(bp,mp=o),bp.prototype.Uf=function(t){return new Cr(t)},bp.prototype.Qf=function(t){return t=this.Gf(t,this.firestore.zr),new of(this.firestore,null,t)},bp);function bp(t){var e=this;return(e=mp.call(this)||this).firestore=t,e}function _p(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];t=Wa(t,of);var o=Wa(t.firestore,Il),s=kf(o);return e instanceof Ur&&(e=e._),Ip(o,[("string"==typeof e||e instanceof nf?Kf(s,"updateDoc",t.S_,e,n,r):Qf(s,"updateDoc",t.S_,e)).F_(t.S_,xs.exists(!0))])}function Ep(e){for(var n=[],t=1;t<arguments.length;t++)n[t-1]=arguments[t];e instanceof Ur&&(e=e._);var r={includeMetadataChanges:!1},i=0;"object"!=typeof n[i]||sp(n[i])||(r=n[i],i++);var o,s,u,a,c,h,f={includeMetadataChanges:r.includeMetadataChanges};return sp(n[i])&&(o=n[i],n[i]=null===(r=o.next)||void 0===r?void 0:r.bind(o),n[i+1]=null===(r=o.error)||void 0===r?void 0:r.bind(o),n[i+2]=null===(r=o.complete)||void 0===r?void 0:r.bind(o)),e instanceof of?(u=Wa(e.firestore,Il),a=Zo(e.S_.path),h={next:function(t){n[i]&&n[i](Tp(u,e,t))},error:n[i+1],complete:n[i+2]}):(s=Wa(e,sf),u=Wa(s.firestore,Il),a=s.C_,c=new wp(u),h={next:function(t){n[i]&&n[i](new lp(u,c,s,t))},error:n[i+1],complete:n[i+2]},Ul(e.C_)),function(n,t,e){var r=this,i=new tf(h),o=new wh(t,i,e);return n.ks.Ws(function(){return y(r,void 0,void 0,function(){var e;return v(this,function(t){switch(t.label){case 0:return e=vh,[4,ml(n)];case 1:return[2,e.apply(void 0,[t.sent(),o])]}})})}),function(){i.I_(),n.ks.Ws(function(){return y(r,void 0,void 0,function(){var e;return v(this,function(t){switch(t.label){case 0:return e=gh,[4,ml(n)];case 1:return[2,e.apply(void 0,[t.sent(),o])]}})})})}}(Nl(u),a,f)}function Ip(t,e){return function(n,r){var t=this,i=new gi;return n.ks.Ws(function(){return y(t,void 0,void 0,function(){var e;return v(this,function(t){switch(t.label){case 0:return e=Vh,[4,gl(n)];case 1:return[2,e.apply(void 0,[t.sent(),r,i])]}})})}),i.promise}(Nl(t),e)}function Tp(t,e,n){var r=n.docs.get(e.S_),i=new wp(t);return new hp(t,i,e.S_,r,new cp(n.hasPendingWrites,n.fromCache),e.v_)}var Ap=(Np.prototype.set=function(t,e,n){return this.Ed(),e=np((t=Op(t,this.zf)).v_,e,n),n=Lf(this.wd,"WriteBatch.set",t.S_,e,null!==t.v_,n),this.fd.push(n.F_(t.S_,xs.de())),this},Np.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];return this.Ed(),t=Op(t,this.zf),e instanceof Ur&&(e=e._),e="string"==typeof e||e instanceof nf?Kf(this.wd,"WriteBatch.update",t.S_,e,n,r):Qf(this.wd,"WriteBatch.update",t.S_,e),this.fd.push(e.F_(t.S_,xs.exists(!0))),this},Np.prototype.delete=function(t){return this.Ed(),t=Op(t,this.zf),this.fd=this.fd.concat(new nu(t.S_,xs.de())),this},Np.prototype.commit=function(){return this.Ed(),this.dd=!0,0<this.fd.length?this._d(this.fd):Promise.resolve()},Np.prototype.Ed=function(){if(this.dd)throw new Pr(Dr.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},Np);function Np(t,e){this.zf=t,this._d=e,this.fd=[],this.dd=!1,this.wd=kf(t)}function Op(t,e){if(t instanceof Ur&&(t=t._),t.firestore!==e)throw new Pr(Dr.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}var Sp,Rp,kp,Lp=(qp.prototype.get=function(t){var e=this,n=Op(t,this.zf),r=new ip(this.zf);return this.Td.ef([n.S_]).then(function(t){if(!t||1!==t.length)return Ir();if((t=t[0])instanceof fo)return new Rl(e.zf,r,n.S_,null,n.v_);if(t instanceof ho)return new Rl(e.zf,r,t.key,t,n.v_);throw Ir()})},qp.prototype.set=function(t,e,n){return e=np((t=Op(t,this.zf)).v_,e,n),n=Lf(this.wd,"Transaction.set",t.S_,e,null!==t.v_,n),this.Td.set(t.S_,n),this},qp.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];return t=Op(t,this.zf),e instanceof Ur&&(e=e._),e="string"==typeof e||e instanceof nf?Kf(this.wd,"Transaction.update",t.S_,e,n,r):Qf(this.wd,"Transaction.update",t.S_,e),this.Td.update(t.S_,e),this},qp.prototype.delete=function(t){return t=Op(t,this.zf),this.Td.delete(t.S_),this},f(jp,kp=qp),jp.prototype.get=function(t){var e=this,n=Op(t,this.zf),r=new wp(this.zf);return kp.prototype.get.call(this,t).then(function(t){return new hp(e.zf,r,n.S_,t.Jf,new cp(!1,!1),n.v_)})},jp),Dp="You are using the memory-only build of Firestore. Persistence support is only available via the @firebase/firestore bundle or the firebase-firestore.js build.",Pp=(Mp.prototype.enableIndexedDbPersistence=function(t,e){throw new Pr(Dr.FAILED_PRECONDITION,Dp)},Mp.prototype.enableMultiTabIndexedDbPersistence=function(t){throw new Pr(Dr.FAILED_PRECONDITION,Dp)},Mp.prototype.clearIndexedDbPersistence=function(t){throw new Pr(Dr.FAILED_PRECONDITION,Dp)},Mp),Cp=(f(xp,Rp=Ur),Object.defineProperty(xp.prototype,"zr",{get:function(){return this._.zr},enumerable:!1,configurable:!0}),xp.prototype.settings=function(t){t.merge&&delete(t=Object.assign(Object.assign({},this._.no()),t)).merge,this._.eo(t)},xp.prototype.useEmulator=function(t,e){"firestore.googleapis.com"!==this._.no().host&&_r("Host has been set in both settings() and useEmulator(), emulator host will be used"),this.settings({host:t+":"+e,ssl:!1,merge:!0})},xp.prototype.enableNetwork=function(){return function(r){var t=this;return r.ks.enqueue(function(){return y(t,void 0,void 0,function(){var e,n;return v(this,function(t){switch(t.label){case 0:return[4,dl(r)];case 1:return e=t.sent(),[4,vl(r)];case 2:return n=t.sent(),[2,(e.Zc(!0),(t=n).Gh.delete(0),Jc(t))]}})})})}(Nl(Wa(this._,Il)))},xp.prototype.disableNetwork=function(){return function(r){var t=this;return r.ks.enqueue(function(){return y(t,void 0,void 0,function(){var e,n;return v(this,function(t){switch(t.label){case 0:return[4,dl(r)];case 1:return e=t.sent(),[4,vl(r)];case 2:return n=t.sent(),[2,(e.Zc(!1),function(n){return y(this,void 0,void 0,function(){var e;return v(this,function(t){switch(t.label){case 0:return(e=n).Gh.add(0),[4,$c(e)];case 1:return t.sent(),e.Jh.set("Offline"),[2]}})})}(n))]}})})})}(Nl(Wa(this._,Il)))},xp.prototype.enablePersistence=function(t){var e=!1,n=!1;return t&&Ba("synchronizeTabs",e=!!t.synchronizeTabs,"experimentalForceOwningTab",n=!!t.experimentalForceOwningTab),e?this.Id.enableMultiTabIndexedDbPersistence(this):this.Id.enableIndexedDbPersistence(this,n)},xp.prototype.clearPersistence=function(){return this.Id.clearIndexedDbPersistence(this)},xp.prototype.terminate=function(){return this.app._removeServiceInstance("firestore"),this.app._removeServiceInstance("firestore-exp"),this._._delete()},xp.prototype.waitForPendingWrites=function(){return function(n){var t=this,r=new gi;return n.ks.Ws(function(){return y(t,void 0,void 0,function(){var e;return v(this,function(t){switch(t.label){case 0:return e=jh,[4,gl(n)];case 1:return[2,e.apply(void 0,[t.sent(),r])]}})})}),r.promise}(Nl(Wa(this._,Il)))},xp.prototype.onSnapshotsInSync=function(t){return function(n,t){var e=this,r=new tf(t);return n.ks.Ws(function(){return y(e,void 0,void 0,function(){var e;return v(this,function(t){switch(t.label){case 0:return e=function(t,e){t.rl.add(e),e.next()},[4,ml(n)];case 1:return[2,e.apply(void 0,[t.sent(),r])]}})})}),function(){r.I_(),n.ks.Ws(function(){return y(e,void 0,void 0,function(){var e;return v(this,function(t){switch(t.label){case 0:return e=function(t,e){t.rl.delete(e)},[4,ml(n)];case 1:return[2,e.apply(void 0,[t.sent(),r])]}})})})}}(Nl(Wa(this._,Il)),sp(t)?t:{next:t})},Object.defineProperty(xp.prototype,"app",{get:function(){if(!this.md)throw new Pr(Dr.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.md},enumerable:!1,configurable:!0}),xp.prototype.collection=function(t){try{return new hd(this,df(this._,t))}catch(t){throw Xp(t,"collection()","Firestore.collection()")}},xp.prototype.doc=function(t){try{return new Wp(this,yf(this._,t))}catch(t){throw Xp(t,"doc()","Firestore.doc()")}},xp.prototype.collectionGroup=function(t){try{return new ud(this,function(t,e){if(t=Wa(t,Ja),qa("collectionGroup","collection id",e),0<=e.indexOf("/"))throw new Pr(Dr.INVALID_ARGUMENT,"Invalid collection ID '"+e+"' passed to function collectionGroup(). Collection IDs must not contain '/'.");return new sf(t,null,new $o(_i.Nt(),e))}(this._,t))}catch(t){throw Xp(t,"collectionGroup()","Firestore.collectionGroup()")}},xp.prototype.runTransaction=function(e){var n,r=this;return function(n,r){var t=this,i=new gi;return n.ks.Ws(function(){return y(t,void 0,void 0,function(){var e;return v(this,function(t){switch(t.label){case 0:return[4,pl(n).then(function(t){return t.Qh})];case 1:return e=t.sent(),new ul(n.ks,e,r,i).run(),[2]}})})}),i.promise}(Nl(n=this._),function(t){return t=new Lp(n,t),e(new zp(r,t))})},xp.prototype.batch=function(){var e=this;return Nl(this._),new Hp(new Ap(this._,function(t){return Ip(e._,t)}))},xp.prototype.loadBundle=function(t){throw new Pr(Dr.FAILED_PRECONDITION,'"loadBundle()" does not exist, have you imported "firebase/firestore/bundle"?')},xp.prototype.namedQuery=function(t){throw new Pr(Dr.FAILED_PRECONDITION,'"namedQuery()" does not exist, have you imported "firebase/firestore/bundle"?')},xp),Up=(f(Vp,Sp=o),Vp.prototype.Uf=function(t){return new Fr(new Cr(t))},Vp.prototype.Qf=function(t){return t=this.Gf(t,this.firestore.zr),Wp.Ad(t,this.firestore,null)},Vp);function Vp(t){var e=this;return(e=Sp.call(this)||this).firestore=t,e}function xp(t,e,n){var r=this;return(r=Rp.call(this,e)||this).Id=n,r.INTERNAL={delete:function(){return r.terminate()}},t instanceof Jr||(r.md=t),r}function Mp(){}function jp(t,e){var n=this;return(n=kp.call(this,t,e)||this).zf=t,n}function qp(t,e){this.zf=t,this.Td=e,this.wd=kf(t)}var Fp,Bp,Gp,zp=(f(Kp,Gp=Ur),Kp.prototype.get=function(t){var e=this,t=gd(t);return this._.get(t).then(function(t){return new od(e.zf,t)})},Kp.prototype.set=function(t,e,n){return t=gd(t),n?(Fa("Transaction.set",n),this._.set(t,e,n)):this._.set(t,e),this},Kp.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];var o=gd(t);return 2===arguments.length?this._.update(o,e):(t=this._).update.apply(t,l([o,e,n],r)),this},Kp.prototype.delete=function(t){return t=gd(t),this._.delete(t),this},Kp),Hp=(f(Qp,Bp=Ur),Qp.prototype.set=function(t,e,n){return t=gd(t),n?(Fa("WriteBatch.set",n),this._.set(t,e,n)):this._.set(t,e),this},Qp.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];var o=gd(t);return 2===arguments.length?this._.update(o,e):(t=this._).update.apply(t,l([o,e,n],r)),this},Qp.prototype.delete=function(t){return t=gd(t),this._.delete(t),this},Qp.prototype.commit=function(){return this._.commit()},Qp),Wp=(f(Yp,Fp=Ur),Yp.Rd=function(t,e,n){if(t.length%2!=0)throw new Pr(Dr.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t.Ct()+" has "+t.length);return new Yp(e,new of(e._,n,new Ti(t)))},Yp.Ad=function(t,e,n){return new Yp(e,new of(e._,n,t))},Object.defineProperty(Yp.prototype,"id",{get:function(){return this._.id},enumerable:!1,configurable:!0}),Object.defineProperty(Yp.prototype,"parent",{get:function(){return new hd(this.firestore,this._.parent)},enumerable:!1,configurable:!0}),Object.defineProperty(Yp.prototype,"path",{get:function(){return this._.path},enumerable:!1,configurable:!0}),Yp.prototype.collection=function(t){try{return new hd(this.firestore,df(this._,t))}catch(t){throw Xp(t,"collection()","DocumentReference.collection()")}},Yp.prototype.isEqual=function(t){return t instanceof Ur&&(t=t._),t instanceof of&&vf(this._,t)},Yp.prototype.set=function(t,e){e=Fa("DocumentReference.set",e);try{return function(t,e,n){t=Wa(t,of);var r=Wa(t.firestore,Il),e=np(t.v_,e,n);return Ip(r,[Lf(kf(r),"setDoc",t.S_,e,null!==t.v_,n).F_(t.S_,xs.de())])}(this._,t,e)}catch(t){throw Xp(t,"setDoc()","DocumentReference.set()")}},Yp.prototype.update=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];try{return 1===arguments.length?_p(this._,t):_p.apply(void 0,l([this._,t,e],n))}catch(t){throw Xp(t,"updateDoc()","DocumentReference.update()")}},Yp.prototype.delete=function(){return Ip(Wa((t=this._).firestore,Il),[new nu(t.S_,xs.de())]);var t},Yp.prototype.onSnapshot=function(){for(var e=this,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=Jp(t),i=$p(t,function(t){return new od(e.firestore,new hp(e.firestore._,e.Hf,t.S_,t.Jf,t.metadata,e._.v_))});return Ep(this._,r,i)},Yp.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(e){e=Wa(e,of);var n=Wa(e.firestore,Il),t=Nl(n),r=new wp(n);return function(n,r){var t=this,i=new gi;return n.ks.Ws(function(){return y(t,void 0,void 0,function(){var e;return v(this,function(t){switch(t.label){case 0:return e=function(o,s,u){return y(this,void 0,void 0,function(){var r,i;return v(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,(e=s,(n=o).persistence.runTransaction("read document","readonly",function(t){return n.Ka.Pa(t,e)}))];case 1:return(i=t.sent())instanceof ho?u.resolve(i):i instanceof fo?u.resolve(null):u.reject(new Pr(Dr.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),[3,3];case 2:return r=t.sent(),i=ya(r,"Failed to get document '"+s+" from cache"),u.reject(i),[3,3];case 3:return[2]}var e,n})})},[4,yl(n)];case 1:return[2,e.apply(void 0,[t.sent(),r,i])]}})})}),i.promise}(t,e.S_).then(function(t){return new hp(n,r,e.S_,t,new cp(t instanceof ho&&t.Jt,!0),e.v_)})}:"server"===(null==t?void 0:t.source)?function(e){e=Wa(e,of);var n=Wa(e.firestore,Il);return wl(Nl(n),e.S_,{source:"server"}).then(function(t){return Tp(n,e,t)})}:function(e){e=Wa(e,of);var n=Wa(e.firestore,Il);return wl(Nl(n),e.S_).then(function(t){return Tp(n,e,t)})})(this._).then(function(t){return new od(e.firestore,new hp(e.firestore._,e.Hf,t.S_,t.Jf,t.metadata,e._.v_))})},Yp.prototype.withConverter=function(t){return new Yp(this.firestore,this._.withConverter(t))},Yp);function Yp(t,e){var n=this;return(n=Fp.call(this,e)||this).firestore=t,n.Hf=new Up(t),n}function Qp(){return null!==Bp&&Bp.apply(this,arguments)||this}function Kp(t,e){var n=this;return(n=Gp.call(this,e)||this).zf=t,n}function Xp(t,e,n){return t.message=t.message.replace(e,n),t}function Jp(t){for(var e=0,n=t;e<n.length;e++){var r=n[e];if("object"==typeof r&&!sp(r))return r}return{}}function $p(t,e){var n;return{next:function(t){n.next&&n.next(e(t))},error:null===(t=(n=sp(t[0])?t[0]:sp(t[1])?t[1]:"function"==typeof t[0]?{next:t[0],error:t[1],complete:t[2]}:{next:t[1],error:t[2],complete:t[3]}).error)||void 0===t?void 0:t.bind(n),complete:null===(t=n.complete)||void 0===t?void 0:t.bind(n)}}var Zp,td,ed,nd,rd,id,od=(f(vd,id=Ur),Object.defineProperty(vd.prototype,"ref",{get:function(){return new Wp(this.zf,this._.ref)},enumerable:!1,configurable:!0}),Object.defineProperty(vd.prototype,"id",{get:function(){return this._.id},enumerable:!1,configurable:!0}),Object.defineProperty(vd.prototype,"metadata",{get:function(){return this._.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(vd.prototype,"exists",{get:function(){return this._.exists()},enumerable:!1,configurable:!0}),vd.prototype.data=function(t){return this._.data(t)},vd.prototype.get=function(t,e){return this._.get(t,e)},vd.prototype.isEqual=function(t){return gp(this._,t._)},vd),sd=(f(yd,rd=od),yd.prototype.data=function(t){return this._.data(t)},yd),ud=(f(dd,nd=Ur),dd.prototype.where=function(t,e,n){try{return new dd(this.firestore,Vl(this._,(r=n,i=e,o=Cl("where",t),new Bl(o,i,r))))}catch(t){throw Xp(t,/(orderBy|where)\(\)/,"Query.$1()")}var r,i,o},dd.prototype.orderBy=function(n,t){try{return new dd(this.firestore,Vl(this._,function(t){void 0===t&&(t="asc");var e=t,t=Cl("orderBy",n);return new Gl(t,e)}(t)))}catch(n){throw Xp(n,/(orderBy|where)\(\)/,"Query.$1()")}},dd.prototype.limit=function(t){try{return new dd(this.firestore,Vl(this._,(Ya("limit",e=t),new zl("limit",e,"F"))))}catch(t){throw Xp(t,"limit()","Query.limit()")}var e},dd.prototype.limitToLast=function(t){try{return new dd(this.firestore,Vl(this._,(Ya("limitToLast",e=t),new zl("limitToLast",e,"L"))))}catch(t){throw Xp(t,"limitToLast()","Query.limitToLast()")}var e},dd.prototype.startAt=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];try{return new dd(this.firestore,Vl(this._,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Hl("startAt",t,!0)}.apply(void 0,t)))}catch(t){throw Xp(t,"startAt()","Query.startAt()")}},dd.prototype.startAfter=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];try{return new dd(this.firestore,Vl(this._,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Hl("startAfter",t,!1)}.apply(void 0,t)))}catch(t){throw Xp(t,"startAfter()","Query.startAfter()")}},dd.prototype.endBefore=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];try{return new dd(this.firestore,Vl(this._,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Wl("endBefore",t,!0)}.apply(void 0,t)))}catch(t){throw Xp(t,"endBefore()","Query.endBefore()")}},dd.prototype.endAt=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];try{return new dd(this.firestore,Vl(this._,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Wl("endAt",t,!1)}.apply(void 0,t)))}catch(t){throw Xp(t,"endAt()","Query.endAt()")}},dd.prototype.isEqual=function(t){return gf(this._,t._)},dd.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(e){e=Wa(e,sf);var n=Wa(e.firestore,Il),t=Nl(n),r=new wp(n);return function(n,r){var t=this,i=new gi;return n.ks.Ws(function(){return y(t,void 0,void 0,function(){var e;return v(this,function(t){switch(t.label){case 0:return e=function(i,o,s){return y(this,void 0,void 0,function(){var e,n,r;return v(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,bc(i,o,!0)];case 1:return r=t.sent(),e=new kh(o,r.za),n=e.bl(r.documents),n=e.yr(n,!1),s.resolve(n.snapshot),[3,3];case 2:return n=t.sent(),r=ya(n,"Failed to execute query '"+o+" against cache"),s.reject(r),[3,3];case 3:return[2]}})})},[4,yl(n)];case 1:return[2,e.apply(void 0,[t.sent(),r,i])]}})})}),i.promise}(t,e.C_).then(function(t){return new lp(n,r,e,t)})}:"server"===(null==t?void 0:t.source)?function(e){e=Wa(e,sf);var n=Wa(e.firestore,Il),t=Nl(n),r=new wp(n);return bl(t,e.C_,{source:"server"}).then(function(t){return new lp(n,r,e,t)})}:function(e){e=Wa(e,sf);var n=Wa(e.firestore,Il),t=Nl(n),r=new wp(n);return Ul(e.C_),bl(t,e.C_).then(function(t){return new lp(n,r,e,t)})})(this._).then(function(t){return new cd(e.firestore,new lp(e.firestore._,e.Hf,e._,t.ud))})},dd.prototype.onSnapshot=function(){for(var e=this,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=Jp(t),i=$p(t,function(t){return new cd(e.firestore,new lp(e.firestore._,e.Hf,e._,t.ud))});return Ep(this._,r,i)},dd.prototype.withConverter=function(t){return new dd(this.firestore,this._.withConverter(t))},dd),ad=(f(pd,ed=Ur),Object.defineProperty(pd.prototype,"type",{get:function(){return this._.type},enumerable:!1,configurable:!0}),Object.defineProperty(pd.prototype,"doc",{get:function(){return new sd(this.zf,this._.doc)},enumerable:!1,configurable:!0}),Object.defineProperty(pd.prototype,"oldIndex",{get:function(){return this._.oldIndex},enumerable:!1,configurable:!0}),Object.defineProperty(pd.prototype,"newIndex",{get:function(){return this._.newIndex},enumerable:!1,configurable:!0}),pd),cd=(f(ld,td=Ur),Object.defineProperty(ld.prototype,"query",{get:function(){return new ud(this.zf,this._.query)},enumerable:!1,configurable:!0}),Object.defineProperty(ld.prototype,"metadata",{get:function(){return this._.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(ld.prototype,"size",{get:function(){return this._.size},enumerable:!1,configurable:!0}),Object.defineProperty(ld.prototype,"empty",{get:function(){return this._.empty},enumerable:!1,configurable:!0}),Object.defineProperty(ld.prototype,"docs",{get:function(){var e=this;return this._.docs.map(function(t){return new sd(e.zf,t)})},enumerable:!1,configurable:!0}),ld.prototype.docChanges=function(t){var e=this;return this._.docChanges(t).map(function(t){return new ad(e.zf,t)})},ld.prototype.forEach=function(e,n){var r=this;this._.forEach(function(t){e.call(n,new sd(r.zf,t))})},ld.prototype.isEqual=function(t){return gp(this._,t._)},ld),hd=(f(fd,Zp=ud),Object.defineProperty(fd.prototype,"id",{get:function(){return this._.id},enumerable:!1,configurable:!0}),Object.defineProperty(fd.prototype,"path",{get:function(){return this._.path},enumerable:!1,configurable:!0}),Object.defineProperty(fd.prototype,"parent",{get:function(){var t=this._.parent;return t?new Wp(this.firestore,t):null},enumerable:!1,configurable:!0}),fd.prototype.doc=function(t){try{return new Wp(this.firestore,void 0===t?yf(this._):yf(this._,t))}catch(t){throw Xp(t,"doc()","CollectionReference.doc()")}},fd.prototype.add=function(t){var e,n=this,r=this._,i=t;return t=Wa(r.firestore,Il),e=yf(r),i=np(r.v_,i),Ip(t,[Lf(kf(r.firestore),"addDoc",e.S_,i,null!==r.v_,{}).F_(e.S_,xs.exists(!1))]).then(function(){return e}).then(function(t){return new Wp(n.firestore,t)})},fd.prototype.isEqual=function(t){return vf(this._,t._)},fd.prototype.withConverter=function(t){return new fd(this.firestore,this._.withConverter(t))},fd);function fd(t,e){var n=this;return(n=Zp.call(this,t,e)||this).firestore=t,n._=e,n}function ld(t,e){var n=this;return(n=td.call(this,e)||this).zf=t,n}function pd(t,e){var n=this;return(n=ed.call(this,e)||this).zf=t,n}function dd(t,e){var n=this;return(n=nd.call(this,e)||this).firestore=t,n.Hf=new Up(t),n}function yd(){return null!==rd&&rd.apply(this,arguments)||this}function vd(t,e){var n=this;return(n=id.call(this,e)||this).zf=t,n}function gd(t){return t instanceof Ur&&(t=t._),Wa(t,of)}var md,wd,me=(f(Id,wd=Ur),Id.documentId=function(){return new Id(Ii.kt().Ct())},Id.prototype.isEqual=function(t){return t instanceof Ur&&(t=t._),t instanceof nf&&this._.b_.isEqual(t.b_)},Id),o=(f(Ed,md=Ur),Ed.serverTimestamp=function(){var t=new qf("serverTimestamp");return t._methodName="FieldValue.serverTimestamp",new Ed(t)},Ed.delete=function(){var t=new Pf("deleteField");return t._methodName="FieldValue.delete",new Ed(t)},Ed.arrayUnion=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Ff("arrayUnion",t)}.apply(void 0,t);return n._methodName="FieldValue.arrayUnion",new Ed(n)},Ed.arrayRemove=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Bf("arrayRemove",t)}.apply(void 0,t);return n._methodName="FieldValue.arrayRemove",new Ed(n)},Ed.increment=function(t){return(t=new Gf("increment",t))._methodName="FieldValue.increment",new Ed(t)},Ed.prototype.isEqual=function(t){return this._.isEqual(t._)},Ed),bd=(_d.prototype.onProgress=function(t,e,n){this.Pd={next:t,error:e,complete:n}},_d.prototype.catch=function(t){return this.yd.promise.catch(t)},_d.prototype.then=function(t,e){return this.yd.promise.then(t,e)},_d.prototype.e_=function(t){this.n_(t),this.Pd.complete&&this.Pd.complete(),this.yd.resolve(t)},_d.prototype.i_=function(t){this.gd.taskState="Error",this.Pd.next&&this.Pd.next(this.gd),this.Pd.error&&this.Pd.error(t),this.yd.reject(t)},_d.prototype.n_=function(t){this.gd=t,this.Pd.next&&this.Pd.next(t)},_d);function _d(){this.Pd={},this.yd=new gi,this.gd={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}function Ed(){return null!==md&&md.apply(this,arguments)||this}function Id(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return wd.call(this,new(nf.bind.apply(nf,l([void 0],t))))||this}Td.prototype.setInstantiationMode=function(t){return this.instantiationMode=t,this},Td.prototype.setMultipleInstances=function(t){return this.multipleInstances=t,this},Td.prototype.setServiceProps=function(t){return this.serviceProps=t,this},ge=Td;function Td(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY"}o={Firestore:Cp,GeoPoint:mf,Timestamp:wi,Blob:Fr,Transaction:zp,WriteBatch:Hp,DocumentReference:Wp,DocumentSnapshot:od,Query:ud,QueryDocumentSnapshot:sd,QuerySnapshot:cd,CollectionReference:hd,FieldPath:me,FieldValue:o,setLogLevel:function(t){gr.setLogLevel(t)},CACHE_SIZE_UNLIMITED:-1};(e=e.default).INTERNAL.registerComponent(new ge("firestore",function(t){var e=t.getProvider("app").getImmediate();return t=t.getProvider("auth-internal"),new Cp(e,new Il(e,t),new Pp)},"PUBLIC").setServiceProps(Object.assign({},o))),e.registerVersion("@firebase/firestore","2.1.0"),Cp.prototype.loadBundle=function(t){return e=this,s=t,t=new bd,function(n,t,r){var e,i=this,o=(e=s,t=ca(t),e=function(t){if(t instanceof Uint8Array)return $h(t,void 0);if(t instanceof ArrayBuffer)return $h(new Uint8Array(t),void 0);if(t instanceof ReadableStream)return t.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}("string"==typeof e?(new TextEncoder).encode(e):e),new ef(e,t));n.ks.Ws(function(){return y(i,void 0,void 0,function(){var e;return v(this,function(t){switch(t.label){case 0:return e=Yh,[4,gl(n)];case 1:return e.apply(void 0,[t.sent(),o,r]),[2]}})})})}(Nl(e._),e.zr,t),t;var e,s},Cp.prototype.namedQuery=function(t){return function(n,r){var t=this;return n.ks.enqueue(function(){return y(t,void 0,void 0,function(){var e;return v(this,function(t){switch(t.label){case 0:return e=function(t,e){var n=t;return n.persistence.runTransaction("Get named query","readonly",function(t){return n.Wc.ho(t,e)})},[4,yl(n)];case 1:return[2,e.apply(void 0,[t.sent(),r])]}})})})}(Nl((e=this)._),t).then(function(t){return t?new ud(e,new sf(e._,null,t.query)):null});var e}}).apply(this,arguments)}catch(t){throw console.error(t),new Error("Cannot instantiate firebase-firestore.memory.js - be sure to load firebase-app.js first.")}});