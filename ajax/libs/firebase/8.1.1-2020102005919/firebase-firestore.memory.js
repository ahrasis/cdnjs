!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(require("@firebase/app")):"function"==typeof define&&define.amd?define(["@firebase/app"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self).firebase)}(this,function(kd){"use strict";try{(function(){function t(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var u,e=t(kd),r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function n(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}function v(t,s,u,a){return new(u=u||Promise)(function(n,e){function r(t){try{o(a.next(t))}catch(t){e(t)}}function i(t){try{o(a.throw(t))}catch(t){e(t)}}function o(t){var e;t.done?n(t.value):((e=t.value)instanceof u?e:new u(function(t){t(e)})).then(r,i)}o((a=a.apply(t,s||[])).next())})}function y(n,r){var i,o,s,u={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},t={next:e(0),throw:e(1),return:e(2)};return"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(e){return function(t){return function(e){if(i)throw new TypeError("Generator is already executing.");for(;u;)try{if(i=1,o&&(s=2&e[0]?o.return:e[0]?o.throw||((s=o.return)&&s.call(o),0):o.next)&&!(s=s.call(o,e[1])).done)return s;switch(o=0,s&&(e=[2&e[0],s.value]),e[0]){case 0:case 1:s=e;break;case 4:return u.label++,{value:e[1],done:!1};case 5:u.label++,o=e[1],e=[0];continue;case 7:e=u.ops.pop(),u.trys.pop();continue;default:if(!(s=0<(s=u.trys).length&&s[s.length-1])&&(6===e[0]||2===e[0])){u=0;continue}if(3===e[0]&&(!s||e[1]>s[0]&&e[1]<s[3])){u.label=e[1];break}if(6===e[0]&&u.label<s[1]){u.label=s[1],s=e;break}if(s&&u.label<s[2]){u.label=s[2],u.ops.push(e);break}s[2]&&u.ops.pop(),u.trys.pop();continue}e=r.call(n,u)}catch(t){e=[6,t],o=0}finally{i=s=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}}function s(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),i=0,e=0;e<n;e++)for(var o=arguments[e],s=0,u=o.length;s<u;s++,i++)r[i]=o[s];return r}function a(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),i=0,e=0;e<n;e++)for(var o=arguments[e],s=0,u=o.length;s<u;s++,i++)r[i]=o[s];return r}(Te=u=u||{})[Te.DEBUG=0]="DEBUG",Te[Te.VERBOSE=1]="VERBOSE",Te[Te.INFO=2]="INFO",Te[Te.WARN=3]="WARN",Te[Te.ERROR=4]="ERROR",Te[Te.SILENT=5]="SILENT";function i(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(!(e<t.logLevel)){var i=(new Date).toISOString(),o=c[e];if(!o)throw new Error("Attempted to log a message with an invalid logType (value: "+e+")");console[o].apply(console,a(["["+i+"]  "+t.name+":"],n))}}var o={debug:u.DEBUG,verbose:u.VERBOSE,info:u.INFO,warn:u.WARN,error:u.ERROR,silent:u.SILENT},h=u.INFO,c=((Ie={})[u.DEBUG]="log",Ie[u.VERBOSE]="log",Ie[u.INFO]="info",Ie[u.WARN]="warn",Ie[u.ERROR]="error",Ie),l=(Object.defineProperty(f.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in u))throw new TypeError('Invalid value "'+t+'" assigned to `logLevel`');this._logLevel=t},enumerable:!1,configurable:!0}),f.prototype.setLogLevel=function(t){this._logLevel="string"==typeof t?o[t]:t},Object.defineProperty(f.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(t){this._userLogHandler=t},enumerable:!1,configurable:!0}),f.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,a([this,u.DEBUG],t)),this._logHandler.apply(this,a([this,u.DEBUG],t))},f.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,a([this,u.VERBOSE],t)),this._logHandler.apply(this,a([this,u.VERBOSE],t))},f.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,a([this,u.INFO],t)),this._logHandler.apply(this,a([this,u.INFO],t))},f.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,a([this,u.WARN],t)),this._logHandler.apply(this,a([this,u.WARN],t))},f.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,a([this,u.ERROR],t)),this._logHandler.apply(this,a([this,u.ERROR],t))},f);function f(t){this.name=t,this._logLevel=h,this._logHandler=i,this._userLogHandler=null}function p(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}var d,g="FirebaseError",m=(n(w,d=Error),w);function w(t,e,n){e=d.call(this,e)||this;return e.code=t,e.customData=n,e.name=g,Object.setPrototypeOf(e,w.prototype),Error.captureStackTrace&&Error.captureStackTrace(e,b.prototype.create),e}var b=(E.prototype.create=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r,i=e[0]||{},o=this.service+"/"+t,t=this.errors[t],t=t?(r=i,t.replace(T,function(t,e){var n=r[e];return null!=n?String(n):"<"+e+"?>"})):"Error",t=this.serviceName+": "+t+" ("+o+").";return new m(o,t,i)},E);function E(t,e,n){this.service=t,this.serviceName=e,this.errors=n}var T=/\{\$([^}]+)}/g,I=function(t,e){return(I=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function A(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}var N,O="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},R={},k=O||self;function D(){}function S(t){var e=typeof t;return"array"==(e="object"!=e?e:t?Array.isArray(t)?"array":e:"null")||"object"==e&&"number"==typeof t.length}function P(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var _="closure_uid_"+(1e9*Math.random()>>>0),L=0;function V(t,e,n){return t.call.apply(t.bind,arguments)}function C(e,n,t){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var t=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(t,r),e.apply(n,t)}}return function(){return e.apply(n,arguments)}}function U(t,e,n){return(U=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?V:C).apply(null,arguments)}function j(e){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function x(){return Date.now()}function M(t,o){function e(){}e.prototype=o.prototype,t.X=o.prototype,t.prototype=new e,(t.prototype.constructor=t).Kb=function(t,e,n){for(var r=Array(arguments.length-2),i=2;i<arguments.length;i++)r[i-2]=arguments[i];return o.prototype[e].apply(t,r)}}function q(){this.j=this.j,this.i=this.i}q.prototype.j=!1,q.prototype.ja=function(){var t;!this.j&&(this.j=!0,this.G(),0)&&(t=this,Object.prototype.hasOwnProperty.call(t,_)&&t[_]||(t[_]=++L))},q.prototype.G=function(){if(this.i)for(;this.i.length;)this.i.shift()()};var F=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},G=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"==typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)};function B(){return Array.prototype.concat.apply([],arguments)}function W(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}function z(t){return/^[\s\xa0]*$/.test(t)}var H,X=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function Y(t,e){return-1!=t.indexOf(e)}function K(t,e){return t<e?-1:e<t?1:0}t:{var $=k.navigator;if($){$=$.userAgent;if($){H=$;break t}}H=""}function Q(t,e,n){for(var r in t)e.call(n,t[r],r,t)}function J(t){var e,n={};for(e in t)n[e]=t[e];return n}var Z="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function tt(t){for(var e,n,r=1;r<arguments.length;r++){for(e in n=arguments[r])t[e]=n[e];for(var i=0;i<Z.length;i++)e=Z[i],Object.prototype.hasOwnProperty.call(n,e)&&(t[e]=n[e])}}function et(t){return et[" "](t),t}et[" "]=D;var nt,rt=Y(H,"Opera"),it=Y(H,"Trident")||Y(H,"MSIE"),ot=Y(H,"Edge"),st=ot||it,ut=Y(H,"Gecko")&&!(Y(H.toLowerCase(),"webkit")&&!Y(H,"Edge"))&&!(Y(H,"Trident")||Y(H,"MSIE"))&&!Y(H,"Edge"),at=Y(H.toLowerCase(),"webkit")&&!Y(H,"Edge");function ht(){var t=k.document;return t?t.documentMode:void 0}t:{var ct="",lt=(lt=H,ut?/rv:([^\);]+)(\)|;)/.exec(lt):ot?/Edge\/([\d\.]+)/.exec(lt):it?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(lt):at?/WebKit\/(\S+)/.exec(lt):rt?/(?:Version)[ \/]?(\S+)/.exec(lt):void 0);if(lt&&(ct=lt?lt[1]:""),it){lt=ht();if(null!=lt&&lt>parseFloat(ct)){nt=String(lt);break t}}nt=ct}var ft={};function pt(u){return t=u,e=function(){for(var t=0,e=X(String(nt)).split("."),n=X(String(u)).split("."),r=Math.max(e.length,n.length),i=0;0==t&&i<r;i++){var o=e[i]||"",s=n[i]||"";do{if(o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==o[0].length&&0==s[0].length)break;t=K(0==o[1].length?0:parseInt(o[1],10),0==s[1].length?0:parseInt(s[1],10))||K(0==o[2].length,0==s[2].length)||K(o[2],s[2]),o=o[3],s=s[3]}while(0==t)}return 0<=t},n=ft,Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t);var t,e,n}var dt=k.document&&it?ht()||(parseInt(nt,10)||void 0):void 0,vt=!it||9<=Number(dt),yt=it&&!pt("9"),gt=function(){if(!k.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{k.addEventListener("test",D,e),k.removeEventListener("test",D,e)}catch(t){}return t}();function mt(t,e){this.type=t,this.a=this.target=e,this.defaultPrevented=!1}function wt(t,e){if(mt.call(this,t?t.type:""),this.relatedTarget=this.a=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.c=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.a=e,e=t.relatedTarget){if(ut){t:{try{et(e.nodeName);var i=!0;break t}catch(t){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:bt[t.pointerType]||"",(this.c=t).defaultPrevented&&this.b()}}mt.prototype.b=function(){this.defaultPrevented=!0},M(wt,mt);var bt={2:"touch",3:"pen",4:"mouse"};wt.prototype.b=function(){wt.X.b.call(this);var t=this.c;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,yt)try{(t.ctrlKey||112<=t.keyCode&&t.keyCode<=123)&&(t.keyCode=-1)}catch(t){}};var Et="closure_listenable_"+(1e6*Math.random()|0),Tt=0;function It(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.ca=i,this.key=++Tt,this.Y=this.Z=!1}function At(t){t.Y=!0,t.listener=null,t.proxy=null,t.src=null,t.ca=null}function Nt(t){this.src=t,this.a={},this.b=0}function Ot(t,e){var n,r,i,o=e.type;o in t.a&&(n=t.a[o],(i=0<=(r=F(n,e)))&&Array.prototype.splice.call(n,r,1),i&&(At(e),0==t.a[o].length&&(delete t.a[o],t.b--)))}function Rt(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.Y&&o.listener==e&&o.capture==!!n&&o.ca==r)return i}return-1}Nt.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var s=Rt(t,e,r,i);return-1<s?(e=t[s],n||(e.Z=!1)):((e=new It(e,this.src,o,!!r,i)).Z=n,t.push(e)),e};var kt="closure_lm_"+(1e6*Math.random()|0),Dt={};function St(t,e,n,r,i){if(r&&r.once)return function t(e,n,r,i,o){if(Array.isArray(n)){for(var s=0;s<n.length;s++)t(e,n[s],r,i,o);return null}r=xt(r);return e&&e[Et]?e.wa(n,r,P(i)?!!i.capture:!!i,o):Pt(e,n,r,!0,i,o)}(t,e,n,r,i);if(Array.isArray(e)){for(var o=0;o<e.length;o++)St(t,e[o],n,r,i);return null}return n=xt(n),t&&t[Et]?t.va(e,n,P(r)?!!r.capture:!!r,i):Pt(t,e,n,!1,r,i)}function Pt(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var s=P(i)?!!i.capture:!!i;if(s&&!vt)return null;var u,a,h=Ut(t);if(h||(t[kt]=h=new Nt(t)),(n=h.add(e,n,r,s,o)).proxy)return n;if(u=Ct,r=a=vt?function(t){return u.call(a.src,a.listener,t)}:function(t){if(!(t=u.call(a.src,a.listener,t)))return t},(n.proxy=r).src=t,r.listener=n,t.addEventListener)gt||(i=s),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(Lt(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function _t(t){var e,n,r;"number"!=typeof t&&t&&!t.Y&&((e=t.src)&&e[Et]?Ot(e.c,t):(n=t.type,r=t.proxy,e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(Lt(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=Ut(e))?(Ot(n,t),0==n.b&&(n.src=null,e[kt]=null)):At(t)))}function Lt(t){return t in Dt?Dt[t]:Dt[t]="on"+t}function Vt(t,e){var n=t.listener,r=t.ca||t.src;return t.Z&&_t(t),n.call(r,e)}function Ct(t,e){if(t.Y)return!0;if(vt)return Vt(t,new wt(e,this));if(!e)t:{e=["window","event"];for(var n=k,r=0;r<e.length;r++)if(null==(n=n[e[r]])){e=null;break t}e=n}return Vt(t,e=new wt(e,this))}function Ut(t){return(t=t[kt])instanceof Nt?t:null}var jt="__closure_events_fn_"+(1e9*Math.random()>>>0);function xt(e){return"function"==typeof e?e:(e[jt]||(e[jt]=function(t){return e.handleEvent(t)}),e[jt])}function Mt(){q.call(this),this.c=new Nt(this),(this.J=this).C=null}function qt(t,e){var n,r=t.C;if(r)for(n=[];r;r=r.C)n.push(r);if(t=t.J,r=e.type||e,"string"==typeof e?e=new mt(e,t):e instanceof mt?e.target=e.target||t:(s=e,tt(e=new mt(r,t),s)),s=!0,n)for(var i=n.length-1;0<=i;i--)var o=e.a=n[i],s=Ft(o,r,!0,e)&&s;if(s=Ft(o=e.a=t,r,!0,e)&&s,s=Ft(o,r,!1,e)&&s,n)for(i=0;i<n.length;i++)s=Ft(o=e.a=n[i],r,!1,e)&&s}function Ft(t,e,n,r){if(!(e=t.c.a[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var s,u,a=e[o];a&&!a.Y&&a.capture==n&&(s=a.listener,u=a.ca||a.src,a.Z&&Ot(t.c,a),i=!1!==s.call(u,r)&&i)}return i&&!r.defaultPrevented}M(Mt,q),Mt.prototype[Et]=!0,(N=Mt.prototype).addEventListener=function(t,e,n,r){St(this,t,e,n,r)},N.removeEventListener=function(t,e,n,r){!function t(e,n,r,i,o){if(Array.isArray(n))for(var s=0;s<n.length;s++)t(e,n[s],r,i,o);else i=P(i)?!!i.capture:!!i,r=xt(r),e&&e[Et]?(e=e.c,(n=String(n).toString())in e.a&&-1<(r=Rt(s=e.a[n],r,i,o))&&(At(s[r]),Array.prototype.splice.call(s,r,1),0==s.length&&(delete e.a[n],e.b--))):(e=e&&Ut(e))&&(n=e.a[n.toString()],e=-1,n&&(e=Rt(n,r,i,o)),(r=-1<e?n[e]:null)&&_t(r))}(this,t,e,n,r)},N.G=function(){if(Mt.X.G.call(this),this.c){var t,e=this.c;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)At(n[r]);delete e.a[t],e.b--}}this.C=null},N.va=function(t,e,n,r){return this.c.add(String(t),e,!1,n,r)},N.wa=function(t,e,n,r){return this.c.add(String(t),e,!0,n,r)};var Gt=k.JSON.stringify;function Bt(){this.b=this.a=null}var Wt,zt=(Ht.prototype.get=function(){var t;return 0<this.b?(this.b--,t=this.a,this.a=t.next,t.next=null):t=this.c(),t},new Ht(function(){return new Xt},function(t){t.reset()}));function Ht(t,e){this.c=t,this.f=e,this.b=0,this.a=null}function Xt(){this.next=this.b=this.a=null}function Yt(t,e){var n;Wt||(n=k.Promise.resolve(void 0),Wt=function(){n.then(Qt)}),Kt||(Wt(),Kt=!0),$t.add(t,e)}Bt.prototype.add=function(t,e){var n=zt.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},Xt.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null};var Kt=!(Xt.prototype.reset=function(){this.next=this.b=this.a=null}),$t=new Bt;function Qt(){for(var t,e;n=e=void 0,n=null,(e=$t).a&&(n=e.a,e.a=e.a.next,e.a||(e.b=null),n.next=null),t=n;){try{t.a.call(t.b)}catch(t){!function(t){k.setTimeout(function(){throw t},0)}(t)}var n=zt;n.f(t),n.b<100&&(n.b++,t.next=n.a,n.a=t)}Kt=!1}function Jt(t,e){Mt.call(this),this.b=t||1,this.a=e||k,this.f=U(this.Za,this),this.g=x()}function Zt(t){t.aa=!1,t.M&&(t.a.clearTimeout(t.M),t.M=null)}function te(t,e,n){if("function"==typeof t)n&&(t=U(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=U(t.handleEvent,t)}return 2147483647<Number(e)?-1:k.setTimeout(t,e||0)}M(Jt,Mt),(N=Jt.prototype).aa=!1,N.M=null,N.Za=function(){var t;this.aa&&(0<(t=x()-this.g)&&t<.8*this.b?this.M=this.a.setTimeout(this.f,this.b-t):(this.M&&(this.a.clearTimeout(this.M),this.M=null),qt(this,"tick"),this.aa&&(Zt(this),this.start())))},N.start=function(){this.aa=!0,this.M||(this.M=this.a.setTimeout(this.f,this.b),this.g=x())},N.G=function(){Jt.X.G.call(this),Zt(this),delete this.a};var ee,ne,re,ie=(I(ne=se,re=ee=q),ne.prototype=null===re?Object.create(re):(oe.prototype=re.prototype,new oe),se.prototype.f=function(t){this.b=arguments,this.a?this.c=!0:function t(e){e.a=te(function(){e.a=null,e.c&&(e.c=!1,t(e))},e.h);var n=e.b;e.b=null,e.g.apply(null,n)}(this)},se.prototype.G=function(){ee.prototype.G.call(this),this.a&&(k.clearTimeout(this.a),this.a=null,this.c=!1,this.b=null)},se);function oe(){this.constructor=ne}function se(t,e){var n=ee.call(this)||this;return n.g=t,n.h=e,n.b=null,n.c=!1,n.a=null,n}function ue(t){q.call(this),this.b=t,this.a={}}M(ue,q);var ae=[];function he(t,e,n,r){Array.isArray(n)||(n&&(ae[0]=n.toString()),n=ae);for(var i=0;i<n.length;i++){var o=St(e,n[i],r||t.handleEvent,!1,t.b||t);if(!o)break;t.a[o.key]=o}}function ce(t){Q(t.a,function(t,e){this.a.hasOwnProperty(e)&&_t(t)},t),t.a={}}function le(){this.a=!0}function fe(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+function(t,e){if(!t.a)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(r.length<2)){var i=r[1];if(Array.isArray(i)&&!(i.length<1)){r=i[0];if("noop"!=r&&"stop"!=r&&"close"!=r)for(var o=1;o<i.length;o++)i[o]=""}}}return Gt(n)}catch(t){return e}}(t,n)+(r?" "+r:"")})}ue.prototype.G=function(){ue.X.G.call(this),ce(this)},ue.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},le.prototype.info=function(){};var pe={},de=null;function ve(){return de=de||new Mt}function ye(t){mt.call(this,pe.Fa,t)}function ge(t){var e=ve();qt(e,new ye(e))}function me(t,e){mt.call(this,pe.STAT_EVENT,t),this.stat=e}function we(t){var e=ve();qt(e,new me(e,t))}function be(t){mt.call(this,pe.Ga,t)}function Ee(t,e){if("function"!=typeof t)throw Error("Fn must not be null and must be a function");return k.setTimeout(function(){t()},e)}pe.Fa="serverreachability",M(ye,mt),pe.STAT_EVENT="statevent",M(me,mt),pe.Ga="timingevent",M(be,mt);var Te={NO_ERROR:0,$a:1,nb:2,mb:3,hb:4,lb:5,ob:6,Da:7,TIMEOUT:8,rb:9},Ie={fb:"complete",Bb:"success",Ea:"error",Da:"abort",tb:"ready",ub:"readystatechange",TIMEOUT:"timeout",pb:"incrementaldata",sb:"progress",ib:"downloadprogress",Jb:"uploadprogress"};function Ae(){}function Ne(t){var e;return(e=t.a)||(e=t.a={}),e}function Oe(){}Ae.prototype.a=null;var Re,O={OPEN:"a",eb:"b",Ea:"c",qb:"d"};function ke(){mt.call(this,"d")}function De(){mt.call(this,"c")}function Se(){}function Pe(t,e,n,r){this.g=t,this.c=e,this.f=n,this.S=r||1,this.J=new ue(this),this.P=_e,t=st?125:void 0,this.R=new Jt(t),this.B=null,this.b=!1,this.j=this.l=this.i=this.H=this.u=this.T=this.o=null,this.s=[],this.a=null,this.D=0,this.h=this.m=null,this.N=-1,this.A=!1,this.O=0,this.F=null,this.V=this.C=this.U=this.I=!1}M(ke,mt),M(De,mt),M(Se,Ae),Re=new Se;var _e=45e3,Le={},Ve={};function Ce(t,e,n){t.H=1,t.i=nn($e(e)),t.j=n,t.I=!0,Ue(t,null)}function Ue(t,e){t.u=x(),xe(t),t.l=$e(t.i);var s,u,a,h,c,l,n=t.l,r=t.S;Array.isArray(r)||(r=[String(r)]),yn(n.b,"t",r),t.D=0,t.a=hr(t.g,t.g.C?e:null),0<t.O&&(t.F=new ie(U(t.Ca,t,t.a),t.O)),he(t.J,t.a,"readystatechange",t.Xa),e=t.B?J(t.B):{},t.j?(t.m||(t.m="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.a.ba(t.l,t.m,t.j,e)):(t.m="GET",t.a.ba(t.l,t.m,null,e)),ge(1),s=t.c,u=t.m,a=t.l,h=t.f,c=t.S,l=t.j,s.info(function(){if(s.a)if(l)for(var t="",e=l.split("&"),n=0;n<e.length;n++){var r,i,o=e[n].split("=");1<o.length&&(r=o[0],o=o[1],t=2<=(i=r.split("_")).length&&"type"==i[1]?t+(r+"=")+o+"&":t+(r+"=redacted&"))}else t=null;else t=l;return"XMLHTTP REQ ("+h+") [attempt "+c+"]: "+u+"\n"+a+"\n"+t})}function je(t,e,n){for(var r,i,o,s=!0;!t.A&&t.D<n.length;){var u=(u=n,o=i=void 0,i=(r=t).D,-1==(o=u.indexOf("\n",i))?Ve:(i=Number(u.substring(i,o)),isNaN(i)?Le:(o+=1)+i>u.length?Ve:(u=u.substr(o,i),r.D=o+i,u)));if(u==Ve){4==e&&(t.h=4,we(14),s=!1),fe(t.c,t.f,null,"[Incomplete Response]");break}if(u==Le){t.h=4,we(15),fe(t.c,t.f,n,"[Invalid Chunk]"),s=!1;break}fe(t.c,t.f,u,null),Be(t,u)}4==e&&0==n.length&&(t.h=1,we(16),s=!1),t.b=t.b&&s,s?0<n.length&&!t.V&&(t.V=!0,(e=t.g).a==t&&e.U&&!e.F&&(e.c.info("Great, no buffering proxy detected. Bytes received: "+n.length),er(e),e.F=!0,we(11))):(fe(t.c,t.f,n,"[Invalid Chunked Response]"),Ge(t),Fe(t))}function xe(t){t.T=x()+t.P,Me(t,t.P)}function Me(t,e){if(null!=t.o)throw Error("WatchDog timer not null");t.o=Ee(U(t.Va,t),e)}function qe(t){t.o&&(k.clearTimeout(t.o),t.o=null)}function Fe(t){0==t.g.v||t.A||ir(t.g,t)}function Ge(t){qe(t);var e=t.F;e&&"function"==typeof e.ja&&e.ja(),t.F=null,Zt(t.R),ce(t.J),t.a&&(e=t.a,t.a=null,e.abort(),e.ja())}function Be(t,e){try{var n,r,i,o,s,u=t.g;if(0!=u.v&&(u.a==t||In(u.b,t)))if(u.I=t.N,!t.C&&In(u.b,t)&&3==u.v){try{var a=u.ka.a.parse(e)}catch(t){a=null}if(Array.isArray(a)&&3==a.length){var h=a;if(0==h[0]){t:if(!u.j){if(u.a){if(!(u.a.u+3e3<t.u))break t;rr(u),Hn(u)}tr(u),we(18)}}else u.oa=h[1],0<u.oa-u.P&&h[2]<37500&&u.H&&0==u.o&&!u.m&&(u.m=Ee(U(u.Sa,u),6e3));if(Tn(u.b)<=1&&u.ea){try{u.ea()}catch(t){}u.ea=void 0}}else sr(u,11)}else if(!t.C&&u.a!=t||rr(u),!z(e))for(e=a=u.ka.a.parse(e),a=0;a<e.length;a++){h=e[a],u.P=h[0],h=h[1],2==u.v?"c"==h[0]?(u.J=h[1],u.ga=h[2],null!=(r=h[3])&&(u.ha=r,u.c.info("VER="+u.ha)),null!=(o=h[4])&&(u.pa=o,u.c.info("SVER="+u.pa)),null!=(r=h[5])&&"number"==typeof r&&0<r&&(n=1.5*r,u.D=n,u.c.info("backChannelRequestTimeoutMs_="+n)),n=u,(o=t.a)&&(!(r=o.a?o.a.getResponseHeader("X-Client-Wire-Protocol"):null)||!(i=n.b).a&&(Y(r,"spdy")||Y(r,"quic")||Y(r,"h2"))&&(i.f=i.g,i.a=new Set,i.b&&(An(i,i.b),i.b=null)),!n.A||(s=o.a?o.a.getResponseHeader("X-HTTP-Session-Id"):null)&&(n.na=s,en(n.B,n.A,s))),u.v=3,u.f&&u.f.ta(),u.U&&(u.N=x()-t.u,u.c.info("Handshake RTT: "+u.N+"ms")),i=t,(n=u).la=ar(n,n.C?n.ga:null,n.fa),i.C?(Nn(n.b,i),o=i,(s=n.D)&&o.setTimeout(s),o.o&&(qe(o),xe(o)),n.a=i):Zn(n),0<u.g.length&&Kn(u)):"stop"!=h[0]&&"close"!=h[0]||sr(u,7):3==u.v&&("stop"==h[0]||"close"==h[0]?"stop"==h[0]?sr(u,7):zn(u):"noop"!=h[0]&&u.f&&u.f.sa(h),u.o=0)}ge(4)}catch(t){}}function We(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(S(t)||"string"==typeof t)G(t,e,void 0);else{if(t.L&&"function"==typeof t.L)var n=t.L();else if(t.K&&"function"==typeof t.K)n=void 0;else if(S(t)||"string"==typeof t){n=[];for(var r=t.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,t)n[r++]=i;i=(r=function(t){if(t.K&&"function"==typeof t.K)return t.K();if("string"==typeof t)return t.split("");if(S(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}(t)).length;for(var o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}}function ze(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof ze)for(n=t.L(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function He(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];Xe(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){for(var i={},n=e=0;e<t.a.length;)Xe(i,r=t.a[e])||(i[t.a[n++]=r]=1),e++;t.a.length=n}}function Xe(t,e){return Object.prototype.hasOwnProperty.call(t,e)}(N=Pe.prototype).setTimeout=function(t){this.P=t},N.Xa=function(t){t=t.target;var e=this.F;e&&3==Fn(t)?e.f():this.Ca(t)},N.Ca=function(t){try{if(t==this.a)t:{var e=Fn(this.a),n=this.a.ua(),r=this.a.W();if(!(e<3||3==e&&!st&&!this.a.$())){this.A||4!=e||7==n||ge(8==n||r<=0?3:2),qe(this);var i=this.a.W();this.N=i;n=this.a.$();if(this.b=200==i,r=this.c,u=this.m,a=this.l,h=this.f,c=this.S,l=e,f=i,r.info(function(){return"XMLHTTP RESP ("+h+") [ attempt "+c+"]: "+u+"\n"+a+"\n"+l+" "+f}),this.b){if(this.U&&!this.C){e:{if(this.a){var o=this.a;if((o=o.a?o.a.getResponseHeader("X-HTTP-Initial-Response"):null)&&!z(o)){var s=o;break e}}s=null}if(!s){this.b=!1,this.h=3,we(12),Ge(this),Fe(this);break t}fe(this.c,this.f,s,"Initial handshake response via X-HTTP-Initial-Response"),this.C=!0,Be(this,s)}this.I?(je(this,e,n),st&&this.b&&3==e&&(he(this.J,this.R,"tick",this.Wa),this.R.start())):(fe(this.c,this.f,n,null),Be(this,n)),4==e&&Ge(this),this.b&&!this.A&&(4==e?ir(this.g,this):(this.b=!1,xe(this)))}else 400==i&&0<n.indexOf("Unknown SID")?(this.h=3,we(12)):(this.h=0,we(13)),Ge(this),Fe(this)}}}catch(t){}var u,a,h,c,l,f},N.Wa=function(){var t,e;this.a&&(t=Fn(this.a),e=this.a.$(),this.D<e.length&&(qe(this),je(this,t,e),this.b&&4!=t&&xe(this)))},N.cancel=function(){this.A=!0,Ge(this)},N.Va=function(){this.o=null;var t,e,n=x();0<=n-this.T?(t=this.c,e=this.l,t.info(function(){return"TIMEOUT: "+e}),2!=this.H&&(ge(3),we(17)),Ge(this),this.h=2,Fe(this)):Me(this,this.T-n)},(N=ze.prototype).K=function(){He(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},N.L=function(){return He(this),this.a.concat()},N.get=function(t,e){return Xe(this.b,t)?this.b[t]:e},N.set=function(t,e){Xe(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},N.forEach=function(t,e){for(var n=this.L(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var Ye=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Ke(t,e){var n;this.c=this.j=this.f="",this.h=null,this.i=this.g="",this.a=!1,t instanceof Ke?(this.a=void 0!==e?e:t.a,Qe(this,t.f),this.j=t.j,Je(this,t.c),Ze(this,t.h),this.g=t.g,e=t.b,(n=new fn).c=e.c,e.a&&(n.a=new ze(e.a),n.b=e.b),tn(this,n),this.i=t.i):t&&(n=String(t).match(Ye))?(this.a=!!e,Qe(this,n[1]||"",!0),this.j=rn(n[2]||""),Je(this,n[3]||"",!0),Ze(this,n[4]),this.g=rn(n[5]||"",!0),tn(this,n[6]||"",!0),this.i=rn(n[7]||"")):(this.a=!!e,this.b=new fn(null,this.a))}function $e(t){return new Ke(t)}function Qe(t,e,n){t.f=n?rn(e,!0):e,t.f&&(t.f=t.f.replace(/:$/,""))}function Je(t,e,n){t.c=n?rn(e,!0):e}function Ze(t,e){if(e){if(e=Number(e),isNaN(e)||e<0)throw Error("Bad port number "+e);t.h=e}else t.h=null}function tn(t,e,n){var r,i;e instanceof fn?(t.b=e,r=t.b,(i=t.a)&&!r.f&&(pn(r),r.c=null,r.a.forEach(function(t,e){var n=e.toLowerCase();e!=n&&(dn(this,e),yn(this,n,t))},r)),r.f=i):(n||(e=on(e,cn)),t.b=new fn(e,t.a))}function en(t,e,n){t.b.set(e,n)}function nn(t){return en(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^x()).toString(36)),t}function rn(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function on(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,sn),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function sn(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}Ke.prototype.toString=function(){var t=[],e=this.f;e&&t.push(on(e,un,!0),":");var n=this.c;return!n&&"file"!=e||(t.push("//"),(e=this.j)&&t.push(on(e,un,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.h)&&t.push(":",String(n))),(n=this.g)&&(this.c&&"/"!=n.charAt(0)&&t.push("/"),t.push(on(n,"/"==n.charAt(0)?hn:an,!0))),(n=this.b.toString())&&t.push("?",n),(n=this.i)&&t.push("#",on(n,ln)),t.join("")};var un=/[#\/\?@]/g,an=/[#\?:]/g,hn=/[#\?]/g,cn=/[#\?@]/g,ln=/#/g;function fn(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function pn(n){n.a||(n.a=new ze,n.b=0,n.c&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r,i=t[n].indexOf("="),o=null;0<=i?(r=t[n].substring(0,i),o=t[n].substring(i+1)):r=t[n],e(r,o?decodeURIComponent(o.replace(/\+/g," ")):"")}}}(n.c,function(t,e){n.add(decodeURIComponent(t.replace(/\+/g," ")),e)}))}function dn(t,e){pn(t),e=gn(t,e),Xe(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,Xe((t=t.a).b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&He(t)))}function vn(t,e){return pn(t),e=gn(t,e),Xe(t.a.b,e)}function yn(t,e,n){dn(t,e),0<n.length&&(t.c=null,t.a.set(gn(t,e),W(n)),t.b+=n.length)}function gn(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}(N=fn.prototype).add=function(t,e){pn(this),this.c=null,t=gn(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},N.forEach=function(n,r){pn(this),this.a.forEach(function(t,e){G(t,function(t){n.call(r,t,e,this)},this)},this)},N.L=function(){pn(this);for(var t=this.a.K(),e=this.a.L(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},N.K=function(t){pn(this);var e=[];if("string"==typeof t)vn(this,t)&&(e=B(e,this.a.get(gn(this,t))));else{t=this.a.K();for(var n=0;n<t.length;n++)e=B(e,t[n])}return e},N.set=function(t,e){return pn(this),this.c=null,vn(this,t=gn(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},N.get=function(t,e){return t&&0<(t=this.K(t)).length?String(t[0]):e},N.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.L(),n=0;n<e.length;n++)for(var r=e[n],i=encodeURIComponent(String(r)),r=this.K(r),o=0;o<r.length;o++){var s=i;""!==r[o]&&(s+="="+encodeURIComponent(String(r[o]))),t.push(s)}return this.c=t.join("&")};var mn=function(t,e){this.b=t,this.a=e};function wn(t){this.g=t||bn,t=k.PerformanceNavigationTiming?0<(t=k.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):!!(k.ia&&k.ia.ya&&k.ia.ya()&&k.ia.ya().Lb),this.f=t?this.g:1,this.a=null,1<this.f&&(this.a=new Set),this.b=null,this.c=[]}var bn=10;function En(t){return t.b||t.a&&t.a.size>=t.f}function Tn(t){return t.b?1:t.a?t.a.size:0}function In(t,e){return t.b?t.b==e:t.a&&t.a.has(e)}function An(t,e){t.a?t.a.add(e):t.b=e}function Nn(t,e){t.b&&t.b==e?t.b=null:t.a&&t.a.has(e)&&t.a.delete(e)}function On(t){var e,n;if(null!=t.b)return t.c.concat(t.b.s);if(null==t.a||0===t.a.size)return W(t.c);var r=t.c;try{for(var i=A(t.a.values()),o=i.next();!o.done;o=i.next())var s=o.value,r=r.concat(s.s)}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}function Rn(){}function kn(){this.a=new Rn}function Dn(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(t){}}wn.prototype.cancel=function(){var e,t;if(this.c=On(this),this.b)this.b.cancel(),this.b=null;else if(this.a&&0!==this.a.size){try{for(var n=A(this.a.values()),r=n.next();!r.done;r=n.next()){r.value.cancel()}}catch(t){e={error:t}}finally{try{r&&!r.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}this.a.clear()}},Rn.prototype.stringify=function(t){return k.JSON.stringify(t,void 0)},Rn.prototype.parse=function(t){return k.JSON.parse(t,void 0)};var Sn=k.JSON.parse;function Pn(t){Mt.call(this),this.headers=new ze,this.H=t||null,this.b=!1,this.s=this.a=null,this.B="",this.h=0,this.f="",this.g=this.A=this.l=this.u=!1,this.o=0,this.m=null,this.I=_n,this.D=this.F=!1}M(Pn,Mt);var _n="",Ln=/^https?$/i,Vn=["POST","PUT"];function Cn(t){return"content-type"==t.toLowerCase()}function Un(t,e){t.b=!1,t.a&&(t.g=!0,t.a.abort(),t.g=!1),t.f=e,t.h=5,jn(t),Mn(t)}function jn(t){t.u||(t.u=!0,qt(t,"complete"),qt(t,"error"))}function xn(t){if(t.b&&void 0!==R&&(!t.s[1]||4!=Fn(t)||2!=t.W()))if(t.l&&4==Fn(t))te(t.za,0,t);else if(qt(t,"readystatechange"),4==Fn(t)){t.b=!1;try{var e,n,r,i,o=t.W();t:switch(o){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var s=!0;break t;default:s=!1}(e=s)||((n=0===o)&&(!(i=String(t.B).match(Ye)[1]||null)&&k.self&&k.self.location&&(i=(r=k.self.location.protocol).substr(0,r.length-1)),n=!Ln.test(i?i.toLowerCase():"")),e=n);if(e)qt(t,"complete"),qt(t,"success");else{t.h=6;try{var u=2<Fn(t)?t.a.statusText:""}catch(o){u=""}t.f=u+" ["+t.W()+"]",jn(t)}}finally{Mn(t)}}}function Mn(t,e){if(t.a){qn(t);var n=t.a,r=t.s[0]?D:null;t.a=null,t.s=null,e||qt(t,"ready");try{n.onreadystatechange=r}catch(t){}}}function qn(t){t.a&&t.D&&(t.a.ontimeout=null),t.m&&(k.clearTimeout(t.m),t.m=null)}function Fn(t){return t.a?t.a.readyState:0}function Gn(t,e,n){t:{for(r in n){var r=!1;break t}r=!0}var i;r||(i="",Q(n,function(t,e){i+=e,i+=":",i+=t,i+="\r\n"}),n=i,"string"==typeof t?null!=n&&encodeURIComponent(String(n)):en(t,e,n))}function Bn(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function Wn(t){this.pa=0,this.g=[],this.c=new le,this.ga=this.la=this.B=this.fa=this.a=this.na=this.A=this.V=this.i=this.O=this.l=null,this.Oa=this.R=0,this.La=Bn("failFast",!1,t),this.H=this.m=this.j=this.h=this.f=null,this.S=!0,this.I=this.oa=this.P=-1,this.T=this.o=this.u=0,this.Ha=Bn("baseRetryDelayMs",5e3,t),this.Ra=Bn("retryDelaySeedMs",1e4,t),this.Ma=Bn("forwardChannelMaxRetries",2,t),this.ma=Bn("forwardChannelRequestTimeoutMs",2e4,t),this.Na=t&&t.g||void 0,this.D=void 0,this.C=t&&t.supportsCrossDomainXhr||!1,this.J="",this.b=new wn(t&&t.concurrentRequestLimit),this.ka=new kn,this.da=t&&t.fastHandshake||!1,this.Ia=t&&t.b||!1,t&&t.f&&(this.c.a=!1),t&&t.forceLongPolling&&(this.S=!1),this.U=!this.da&&this.S&&t&&t.detectBufferingProxy||!1,this.ea=void 0,this.N=0,this.F=!1,this.s=null,(this.Ka=t&&t.c||!1)&&this.c.info("Opt-in to enable Chrome Origin Trials.")}function zn(t){var e,n;Xn(t),3==t.v&&(e=t.R++,en(n=$e(t.B),"SID",t.J),en(n,"RID",e),en(n,"TYPE","terminate"),Qn(t,n),(e=new Pe(t,t.c,e,void 0)).H=2,e.i=nn($e(n)),n=!1,k.navigator&&k.navigator.sendBeacon&&(n=k.navigator.sendBeacon(e.i.toString(),"")),!n&&k.Image&&((new Image).src=e.i,n=!0),n||(e.a=hr(e.g,null),e.a.ba(e.i)),e.u=x(),xe(e)),ur(t)}function Hn(t){t.a&&(er(t),t.a.cancel(),t.a=null)}function Xn(t){Hn(t),t.j&&(k.clearTimeout(t.j),t.j=null),rr(t),t.b.cancel(),t.h&&("number"==typeof t.h&&k.clearTimeout(t.h),t.h=null)}function Yn(t,e){t.g.push(new mn(t.Oa++,e)),3==t.v&&Kn(t)}function Kn(t){En(t.b)||t.h||(t.h=!0,Yt(t.Ba,t),t.u=0)}function $n(t,e){var n=e?e.f:t.R++,r=$e(t.B);en(r,"SID",t.J),en(r,"RID",n),en(r,"AID",t.P),Qn(t,r),t.i&&t.l&&Gn(r,t.i,t.l),n=new Pe(t,t.c,n,t.u+1),null===t.i&&(n.B=t.l),e&&(t.g=e.s.concat(t.g)),e=Jn(t,n,1e3),n.setTimeout(Math.round(.5*t.ma)+Math.round(.5*t.ma*Math.random())),An(t.b,n),Ce(n,r,e)}function Qn(t,n){t.f&&We({},function(t,e){en(n,e,t)})}function Jn(t,e,n){n=Math.min(t.g.length,n);var r=t.f?U(t.f.Ja,t.f,t):null;t:for(var i=t.g,o=-1;;){var s=["count="+n];-1==o?0<n?(o=i[0].b,s.push("ofs="+o)):o=0:s.push("ofs="+o);for(var u=!0,a=0;a<n;a++){var h=i[a].b,c=i[a].a;if((h-=o)<0)o=Math.max(0,i[a].b-100),u=!1;else try{!function(t,r,e){var i=e||"";try{We(t,function(t,e){var n=t;P(t)&&(n=Gt(t)),r.push(i+e+"="+encodeURIComponent(n))})}catch(t){throw r.push(i+"type="+encodeURIComponent("_badmap")),t}}(c,s,"req"+h+"_")}catch(t){r&&r(c)}}if(u){r=s.join("&");break t}}return t=t.g.splice(0,n),e.s=t,r}function Zn(t){t.a||t.j||(t.T=1,Yt(t.Aa,t),t.o=0)}function tr(t){return!(t.a||t.j||3<=t.o)&&(t.T++,t.j=Ee(U(t.Aa,t),or(t,t.o)),t.o++,1)}function er(t){null!=t.s&&(k.clearTimeout(t.s),t.s=null)}function nr(t){t.a=new Pe(t,t.c,"rpc",t.T),null===t.i&&(t.a.B=t.l),t.a.O=0;var e=$e(t.la);en(e,"RID","rpc"),en(e,"SID",t.J),en(e,"CI",t.H?"0":"1"),en(e,"AID",t.P),Qn(t,e),en(e,"TYPE","xmlhttp"),t.i&&t.l&&Gn(e,t.i,t.l),t.D&&t.a.setTimeout(t.D);var n=t.a;t=t.ga,n.H=1,n.i=nn($e(e)),n.j=null,n.I=!0,Ue(n,t)}function rr(t){null!=t.m&&(k.clearTimeout(t.m),t.m=null)}function ir(t,e){var n,r=null;if(t.a==e){rr(t),er(t),t.a=null;var i=2}else{if(!In(t.b,e))return;r=e.s,Nn(t.b,e),i=1}if(t.I=e.N,0!=t.v)if(e.b){1==i?(r=e.j?e.j.length:0,e=x()-e.u,n=t.u,qt(i=ve(),new be(i)),Kn(t)):Zn(t)}else if(3==(n=e.h)||0==n&&0<t.I||!(1==i&&function(t,e){if(!(Tn(t.b)>=t.b.f-(t.h?1:0))){if(t.h)return t.g=e.s.concat(t.g),1;if(!(1==t.v||2==t.v||t.u>=(t.La?0:t.Ma)))return t.h=Ee(U(t.Ba,t,e),or(t,t.u)),t.u++,1}}(t,e)||2==i&&tr(t)))switch(r&&0<r.length&&(e=t.b,e.c=e.c.concat(r)),n){case 1:sr(t,5);break;case 4:sr(t,10);break;case 3:sr(t,6);break;default:sr(t,2)}}function or(t,e){var n=t.Ha+Math.floor(Math.random()*t.Ra);return t.f||(n*=2),n*e}function sr(t,e){var n,r,i,o;t.c.info("Error code "+e),2==e?(r=null,t.f&&(r=null),o=U(t.Ya,t),r||(r=new Ke("//www.google.com/images/cleardot.gif"),k.location&&"http"==k.location.protocol||Qe(r,"https"),nn(r)),n=r.toString(),r=o,o=new le,k.Image?((i=new Image).onload=j(Dn,o,i,"TestLoadImage: loaded",!0,r),i.onerror=j(Dn,o,i,"TestLoadImage: error",!1,r),i.onabort=j(Dn,o,i,"TestLoadImage: abort",!1,r),i.ontimeout=j(Dn,o,i,"TestLoadImage: timeout",!1,r),k.setTimeout(function(){i.ontimeout&&i.ontimeout()},1e4),i.src=n):r(!1)):we(2),t.v=0,t.f&&t.f.ra(e),ur(t),Xn(t)}function ur(t){t.v=0,t.I=-1,t.f&&(0==On(t.b).length&&0==t.g.length||(t.b.c.length=0,W(t.g),t.g.length=0),t.f.qa())}function ar(t,e,n){var r,i,o,s,u,a=(s=n)instanceof Ke?$e(s):new Ke(s,void 0);return""!=a.c?(e&&Je(a,e+"."+a.c),Ze(a,a.h)):(u=k.location,r=u.protocol,i=e?e+"."+u.hostname:u.hostname,o=+u.port,s=n,u=new Ke(null,void 0),r&&Qe(u,r),i&&Je(u,i),o&&Ze(u,o),s&&(u.g=s),a=u),t.V&&Q(t.V,function(t,e){en(a,e,t)}),e=t.A,n=t.na,e&&n&&en(a,e,n),en(a,"VER",t.ha),Qn(t,a),a}function hr(t,e){if(e&&!t.C)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Pn(t.Na)).F=t.C,e}function cr(){}function lr(){if(it&&!(10<=Number(dt)))throw Error("Environmental error: no available transport.")}function fr(t,e){Mt.call(this),this.a=new Wn(e),this.o=t,this.b=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.a.l=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.a&&(t?t["X-WebChannel-Client-Profile"]=e.a:t={"X-WebChannel-Client-Profile":e.a}),this.a.O=t,(t=e&&e.httpHeadersOverwriteParam)&&!z(t)&&(this.a.i=t),this.m=e&&e.supportsCrossDomainXhr||!1,this.l=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!z(e)&&(this.a.A=e,null!==(t=this.b)&&e in t&&(e in(t=this.b)&&delete t[e])),this.f=new vr(this)}function pr(t){ke.call(this);var e=t.__sm__;if(e){t:{for(var n in e){t=n;break t}t=void 0}(this.c=t)?(t=this.c,this.data=null!==e&&t in e?e[t]:void 0):this.data=e}else this.data=t}function dr(){De.call(this),this.status=1}function vr(t){this.a=t}(N=Pn.prototype).ba=function(t,e,n,r){if(this.a)throw Error("[goog.net.XhrIo] Object is active with another request="+this.B+"; newUri="+t);e=e?e.toUpperCase():"GET",this.B=t,this.f="",this.h=0,this.u=!1,this.b=!0,this.a=new XMLHttpRequest,this.s=this.H?Ne(this.H):Ne(Re),this.a.onreadystatechange=U(this.za,this);try{this.A=!0,this.a.open(e,String(t),!0),this.A=!1}catch(t){return void Un(this,t)}t=n||"";var i,o=new ze(this.headers);r&&We(r,function(t,e){o.set(e,t)}),r=function(t){t:{for(var e=Cn,n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return e<0?null:"string"==typeof t?t.charAt(e):t[e]}(o.L()),n=k.FormData&&t instanceof k.FormData,0<=F(Vn,e)&&!r&&!n&&o.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),o.forEach(function(t,e){this.a.setRequestHeader(e,t)},this),this.I&&(this.a.responseType=this.I),"withCredentials"in this.a&&this.a.withCredentials!==this.F&&(this.a.withCredentials=this.F);try{qn(this),0<this.o&&((this.D=(i=this.a,it&&pt(9)&&"number"==typeof i.timeout&&void 0!==i.ontimeout))?(this.a.timeout=this.o,this.a.ontimeout=U(this.xa,this)):this.m=te(this.xa,this.o,this)),this.l=!0,this.a.send(t),this.l=!1}catch(t){Un(this,t)}},N.xa=function(){void 0!==R&&this.a&&(this.f="Timed out after "+this.o+"ms, aborting",this.h=8,qt(this,"timeout"),this.abort(8))},N.abort=function(t){this.a&&this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1,this.h=t||7,qt(this,"complete"),qt(this,"abort"),Mn(this))},N.G=function(){this.a&&(this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1),Mn(this,!0)),Pn.X.G.call(this)},N.za=function(){this.j||(this.A||this.l||this.g?xn(this):this.Ua())},N.Ua=function(){xn(this)},N.W=function(){try{return 2<Fn(this)?this.a.status:-1}catch(t){return-1}},N.$=function(){try{return this.a?this.a.responseText:""}catch(t){return""}},N.Pa=function(t){if(this.a){var e=this.a.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),Sn(e)}},N.ua=function(){return this.h},N.Qa=function(){return"string"==typeof this.f?this.f:String(this.f)},(N=Wn.prototype).ha=8,N.v=1,N.Ba=function(t){if(this.h)if(this.h=null,1==this.v){if(!t){this.R=Math.floor(1e5*Math.random()),t=this.R++;var e,n=new Pe(this,this.c,t,void 0),r=this.l;if(this.O&&(r?tt(r=J(r),this.O):r=this.O),null===this.i&&(n.B=r),this.da)t:{for(var i=e=0;i<this.g.length;i++){var o=this.g[i];if("__data__"in o.a&&"string"==typeof(o=o.a.__data__)?o=o.length:o=void 0,void 0===o)break;if(4096<(e+=o)){e=i;break t}if(4096===e||i===this.g.length-1){e=i+1;break t}}e=1e3}else e=1e3;e=Jn(this,n,e),en(i=$e(this.B),"RID",t),en(i,"CVER",22),this.A&&en(i,"X-HTTP-Session-Id",this.A),Qn(this,i),this.i&&r&&Gn(i,this.i,r),An(this.b,n),this.Ia&&en(i,"TYPE","init"),this.da?(en(i,"$req",e),en(i,"SID","null"),n.U=!0,Ce(n,i,null)):Ce(n,i,e),this.v=2}}else 3==this.v&&(t?$n(this,t):0==this.g.length||En(this.b)||$n(this))},N.Aa=function(){var t;this.j=null,nr(this),this.U&&!(this.F||null==this.a||this.N<=0)&&(t=2*this.N,this.c.info("BP detection timer enabled: "+t),this.s=Ee(U(this.Ta,this),t))},N.Ta=function(){this.s&&(this.s=null,this.c.info("BP detection timeout reached."),this.c.info("Buffering proxy detected and switch to long-polling!"),this.H=!1,this.F=!0,we(10),Hn(this),nr(this))},N.Sa=function(){null!=this.m&&(this.m=null,Hn(this),tr(this),we(19))},N.Ya=function(t){t?(this.c.info("Successfully pinged google.com"),we(2)):(this.c.info("Failed to ping google.com"),we(1))},(N=cr.prototype).ta=function(){},N.sa=function(){},N.ra=function(){},N.qa=function(){},N.Ja=function(){},lr.prototype.a=function(t,e){return new fr(t,e)},M(fr,Mt),fr.prototype.g=function(){this.a.f=this.f,this.m&&(this.a.C=!0);var t=this.a,e=this.o,n=this.b||void 0;we(0),t.fa=e,t.V=n||{},t.H=t.S,t.B=ar(t,null,t.fa),Kn(t)},fr.prototype.close=function(){zn(this.a)},fr.prototype.h=function(t){var e;"string"==typeof t?((e={}).__data__=t,Yn(this.a,e)):this.l?((e={}).__data__=Gt(t),Yn(this.a,e)):Yn(this.a,t)},fr.prototype.G=function(){this.a.f=null,delete this.f,zn(this.a),delete this.a,fr.X.G.call(this)},M(pr,ke),M(dr,De),M(vr,cr),vr.prototype.ta=function(){qt(this.a,"a")},vr.prototype.sa=function(t){qt(this.a,new pr(t))},vr.prototype.ra=function(t){qt(this.a,new dr)},vr.prototype.qa=function(){qt(this.a,"b")},lr.prototype.createWebChannel=lr.prototype.a,fr.prototype.send=fr.prototype.h,fr.prototype.open=fr.prototype.g,Te.NO_ERROR=0,Te.TIMEOUT=8,Te.HTTP_ERROR=6,Ie.COMPLETE="complete",(Oe.EventType=O).OPEN="a",O.CLOSE="b",O.ERROR="c",O.MESSAGE="d",Mt.prototype.listen=Mt.prototype.va,Pn.prototype.listenOnce=Pn.prototype.wa,Pn.prototype.getLastError=Pn.prototype.Qa,Pn.prototype.getLastErrorCode=Pn.prototype.ua,Pn.prototype.getStatus=Pn.prototype.W,Pn.prototype.getResponseJson=Pn.prototype.Pa,Pn.prototype.getResponseText=Pn.prototype.$,Pn.prototype.send=Pn.prototype.ba;var yr=ve,gr=Te,mr=Ie,wr=pe,br=10,Er=11,Tr=Oe,Ir=Pn,Ar=(Nr.prototype.setInstantiationMode=function(t){return this.instantiationMode=t,this},Nr.prototype.setMultipleInstances=function(t){return this.multipleInstances=t,this},Nr.prototype.setServiceProps=function(t){return this.serviceProps=t,this},Nr);function Nr(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY"}var Or=function(t,e,n,r,i,o){this.t=t,this.persistenceKey=e,this.host=n,this.ssl=r,this.forceLongPolling=i,this.i=o},Rr=(Object.defineProperty(Sr.prototype,"o",{get:function(){return"(default)"===this.database},enumerable:!1,configurable:!0}),Sr.prototype.isEqual=function(t){return t instanceof Sr&&t.projectId===this.projectId&&t.database===this.database},Sr),kr=(Dr.prototype.u=function(){return null!=this.uid},Dr.prototype.h=function(){return this.u()?"uid:"+this.uid:"anonymous-user"},Dr.prototype.isEqual=function(t){return t.uid===this.uid},Dr);function Dr(t){this.uid=t}function Sr(t,e){this.projectId=t,this.database=e||"(default)"}kr.UNAUTHENTICATED=new kr(null),kr.l=new kr("google-credentials-uid"),kr._=new kr("first-party-uid");var Pr="8.1.1-2020102005919",_r=new l("@firebase/firestore");function Lr(){return _r.logLevel}function Vr(t){for(var e,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];_r.logLevel<=u.DEBUG&&(e=n.map(jr),_r.debug.apply(_r,s(["Firestore ("+Pr+"): "+t],e)))}function Cr(t){for(var e,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];_r.logLevel<=u.ERROR&&(e=n.map(jr),_r.error.apply(_r,s(["Firestore ("+Pr+"): "+t],e)))}function Ur(t){for(var e,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];_r.logLevel<=u.WARN&&(e=n.map(jr),_r.warn.apply(_r,s(["Firestore ("+Pr+"): "+t],e)))}function jr(e){if("string"==typeof e)return e;try{return JSON.stringify(e)}catch(t){return e}}function xr(t){void 0===t&&(t="Unexpected state");t="FIRESTORE ("+Pr+") INTERNAL ASSERTION FAILED: "+t;throw Cr(t),new Error(t)}function Mr(t){t||xr()}function qr(t,e){this.user=e,this.type="OAuth",this.m={},this.m.Authorization="Bearer "+t}var Fr,Gr={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},Br=(n(Jr,Fr=Error),Jr),Wr=(Qr.prototype.getToken=function(){return Promise.resolve(null)},Qr.prototype.A=function(){},Qr.prototype.I=function(t){(this.T=t)(kr.UNAUTHENTICATED)},Qr.prototype.R=function(){this.T=null},Qr),zr=($r.prototype.getToken=function(){var e=this,n=this.p,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(function(t){return e.p!==n?(Vr("FirebaseCredentialsProvider","getToken aborted due to token change."),e.getToken()):t?(Mr("string"==typeof t.accessToken),new qr(t.accessToken,e.currentUser)):null}):Promise.resolve(null)},$r.prototype.A=function(){this.forceRefresh=!0},$r.prototype.I=function(t){this.T=t,this.V&&t(this.currentUser)},$r.prototype.R=function(){this.auth&&this.auth.removeAuthTokenListener(this.P),this.P=null,this.T=null},$r.prototype.g=function(){var t=this.auth&&this.auth.getUid();return Mr(null===t||"string"==typeof t),new kr(t)},$r),Hr=(Object.defineProperty(Kr.prototype,"m",{get:function(){var t={"X-Goog-AuthUser":this.C},e=this.v.auth.getAuthHeaderValueForFirstParty([]);return e&&(t.Authorization=e),t},enumerable:!1,configurable:!0}),Kr),Xr=(Yr.prototype.getToken=function(){return Promise.resolve(new Hr(this.v,this.C))},Yr.prototype.I=function(t){t(kr._)},Yr.prototype.R=function(){},Yr.prototype.A=function(){},Yr);function Yr(t,e){this.v=t,this.C=e}function Kr(t,e){this.v=t,this.C=e,this.type="FirstParty",this.user=kr._}function $r(t){var e=this;this.P=null,this.currentUser=kr.UNAUTHENTICATED,this.V=!1,this.p=0,this.T=null,this.forceRefresh=!1,this.P=function(){e.p++,e.currentUser=e.g(),e.V=!0,e.T&&e.T(e.currentUser)},this.p=0,this.auth=t.getImmediate({optional:!0}),this.auth?this.auth.addAuthTokenListener(this.P):(this.P(null),t.get().then(function(t){e.auth=t,e.P&&e.auth.addAuthTokenListener(e.P)},function(){}))}function Qr(){this.T=null}function Jr(t,e){var n=this;return(n=Fr.call(this,e)||this).code=t,n.message=e,n.name="FirebaseError",n.toString=function(){return n.name+": [code="+n.code+"]: "+n.message},n}var Zr=(ti.S=function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length,n="";n.length<20;)for(var r=function(t){var e="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(var r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}(40),i=0;i<r.length;++i)n.length<20&&r[i]<e&&(n+=t.charAt(r[i]%t.length));return n},ti);function ti(){}function ei(t,e){return t<e?-1:e<t?1:0}function ni(t,n,r){return t.length===n.length&&t.every(function(t,e){return r(t,n[e])})}var ri,ii,oi=(yi.now=function(){return yi.fromMillis(Date.now())},yi.fromDate=function(t){return yi.fromMillis(t.getTime())},yi.fromMillis=function(t){var e=Math.floor(t/1e3);return new yi(e,1e6*(t-1e3*e))},yi.prototype.toDate=function(){return new Date(this.toMillis())},yi.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},yi.prototype.D=function(t){return this.seconds===t.seconds?ei(this.nanoseconds,t.nanoseconds):ei(this.seconds,t.seconds)},yi.prototype.isEqual=function(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds},yi.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},yi.prototype.toJSON=function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}},yi.prototype.valueOf=function(){var t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")},yi),si=(vi.N=function(t){return new vi(t)},vi.min=function(){return new vi(new oi(0,0))},vi.prototype.F=function(t){return this.timestamp.D(t.timestamp)},vi.prototype.isEqual=function(t){return this.timestamp.isEqual(t.timestamp)},vi.prototype.O=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},vi.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},vi.prototype.$=function(){return this.timestamp},vi),Ie=(Object.defineProperty(di.prototype,"length",{get:function(){return this.L},enumerable:!1,configurable:!0}),di.prototype.isEqual=function(t){return 0===di.k(this,t)},di.prototype.child=function(t){var e=this.segments.slice(this.offset,this.limit());return t instanceof di?t.forEach(function(t){e.push(t)}):e.push(t),this.M(e)},di.prototype.limit=function(){return this.offset+this.length},di.prototype.U=function(t){return t=void 0===t?1:t,this.M(this.segments,this.offset+t,this.length-t)},di.prototype.q=function(){return this.M(this.segments,this.offset,this.length-1)},di.prototype.B=function(){return this.segments[this.offset]},di.prototype.j=function(){return this.get(this.length-1)},di.prototype.get=function(t){return this.segments[this.offset+t]},di.prototype.W=function(){return 0===this.length},di.prototype.G=function(t){if(t.length<this.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},di.prototype.K=function(t){if(this.length+1!==t.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},di.prototype.forEach=function(t){for(var e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])},di.prototype.H=function(){return this.segments.slice(this.offset,this.limit())},di.k=function(t,e){for(var n=Math.min(t.length,e.length),r=0;r<n;r++){var i=t.get(r),o=e.get(r);if(i<o)return-1;if(o<i)return 1}return t.length<e.length?-1:t.length>e.length?1:0},di),ui=(n(pi,ii=Ie),pi.prototype.M=function(t,e,n){return new pi(t,e,n)},pi.prototype.Y=function(){return this.H().join("/")},pi.prototype.toString=function(){return this.Y()},pi.J=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=[],r=0,i=t;r<i.length;r++){var o=i[r];if(0<=o.indexOf("//"))throw new Br(Gr.INVALID_ARGUMENT,"Invalid segment ("+o+"). Paths must not contain // in them.");n.push.apply(n,o.split("/").filter(function(t){return 0<t.length}))}return new pi(n)},pi.X=function(){return new pi([])},pi),ai=/^[_a-zA-Z][_a-zA-Z0-9]*$/,hi=(n(fi,ri=Ie),fi.prototype.M=function(t,e,n){return new fi(t,e,n)},fi.Z=function(t){return ai.test(t)},fi.prototype.Y=function(){return this.H().map(function(t){return t=t.replace("\\","\\\\").replace("`","\\`"),fi.Z(t)||(t="`"+t+"`"),t}).join(".")},fi.prototype.toString=function(){return this.Y()},fi.prototype.tt=function(){return 1===this.length&&"__name__"===this.get(0)},fi.nt=function(){return new fi(["__name__"])},fi.et=function(t){for(var e=[],n="",r=0,i=function(){if(0===n.length)throw new Br(Gr.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");e.push(n),n=""},o=!1;r<t.length;){var s=t[r];if("\\"===s){if(r+1===t.length)throw new Br(Gr.INVALID_ARGUMENT,"Path has trailing escape character: "+t);var u=t[r+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new Br(Gr.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);n+=u,r+=2}else"`"===s?o=!o:"."!==s||o?n+=s:i(),r++}if(i(),o)throw new Br(Gr.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new fi(e)},fi.X=function(){return new fi([])},fi),ci=(li.st=function(t){return new li(ui.J(t))},li.it=function(t){return new li(ui.J(t).U(5))},li.prototype.rt=function(t){return 2<=this.path.length&&this.path.get(this.path.length-2)===t},li.prototype.isEqual=function(t){return null!==t&&0===ui.k(this.path,t.path)},li.prototype.toString=function(){return this.path.toString()},li.k=function(t,e){return ui.k(t.path,e.path)},li.ot=function(t){return t.length%2==0},li.ut=function(t){return new li(new ui(t.slice()))},li);function li(t){this.path=t}function fi(){return null!==ri&&ri.apply(this,arguments)||this}function pi(){return null!==ii&&ii.apply(this,arguments)||this}function di(t,e,n){void 0===e?e=0:e>t.length&&xr(),void 0===n?n=t.length-e:n>t.length-e&&xr(),this.segments=t,this.offset=e,this.L=n}function vi(t){this.timestamp=t}function yi(t,e){if(this.seconds=t,(this.nanoseconds=e)<0)throw new Br(Gr.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(1e9<=e)throw new Br(Gr.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new Br(Gr.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(253402300800<=t)throw new Br(Gr.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}function gi(t){return null==t}function mi(t){return 0===t&&1/t==-1/0}var wi=function(t,e,n,r,i,o,s){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=s,this.ct=null};function bi(t,e,n,r,i,o,s){return void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),new wi(t,e,n,r,i,o,s)}function Ei(t){var e=t;return null===e.ct&&(t=e.path.Y(),null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(function(t){return(t=t).field.Y()+t.op.toString()+Oo(t.value)}).join(","),t+="|ob:",t+=e.orderBy.map(function(t){return(t=t).field.Y()+t.dir}).join(","),gi(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=Zu(e.startAt)),e.endAt&&(t+="|ub:",t+=Zu(e.endAt)),e.ct=t),e.ct}function Ti(t,e){if(t.limit!==e.limit)return!1;if(t.orderBy.length!==e.orderBy.length)return!1;for(var n,r,i=0;i<t.orderBy.length;i++)if(n=t.orderBy[i],r=e.orderBy[i],n.dir!==r.dir||!n.field.isEqual(r.field))return!1;if(t.filters.length!==e.filters.length)return!1;for(var o,s,u=0;u<t.filters.length;u++)if(o=t.filters[u],s=e.filters[u],o.op!==s.op||!o.field.isEqual(s.field)||!To(o.value,s.value))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!ea(t.startAt,e.startAt)&&ea(t.endAt,e.endAt)}function Ii(t){return ci.ot(t.path)&&null===t.collectionGroup&&0===t.filters.length}var Ai=(Ni.fromBase64String=function(t){return new Ni(atob(t))},Ni.fromUint8Array=function(t){return new Ni(function(t){for(var e="",n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}(t))},Ni.prototype.toBase64=function(){return t=this.at,btoa(t);var t},Ni.prototype.toUint8Array=function(){return function(t){for(var e=new Uint8Array(t.length),n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}(this.at)},Ni.prototype.ht=function(){return 2*this.at.length},Ni.prototype.F=function(t){return ei(this.at,t.at)},Ni.prototype.isEqual=function(t){return this.at===t.at},Ni);function Ni(t){this.at=t}Ai.lt=new Ai("");function Oi(t){this.count=t}var Ri,ki=(Di.prototype.dt=function(t){return new Di(this.target,this.targetId,this._t,t,this.ft,this.lastLimboFreeSnapshotVersion,this.resumeToken)},Di.prototype.wt=function(t,e){return new Di(this.target,this.targetId,this._t,this.sequenceNumber,e,this.lastLimboFreeSnapshotVersion,t)},Di.prototype.Et=function(t){return new Di(this.target,this.targetId,this._t,this.sequenceNumber,this.ft,t,this.resumeToken)},Di);function Di(t,e,n,r,i,o,s){void 0===i&&(i=si.min()),void 0===o&&(o=si.min()),void 0===s&&(s=Ai.lt),this.target=t,this.targetId=e,this._t=n,this.sequenceNumber=r,this.ft=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=s}function Si(t){switch(t){case Gr.OK:return xr(),0;case Gr.CANCELLED:case Gr.UNKNOWN:case Gr.DEADLINE_EXCEEDED:case Gr.RESOURCE_EXHAUSTED:case Gr.INTERNAL:case Gr.UNAVAILABLE:case Gr.UNAUTHENTICATED:return;case Gr.INVALID_ARGUMENT:case Gr.NOT_FOUND:case Gr.ALREADY_EXISTS:case Gr.PERMISSION_DENIED:case Gr.FAILED_PRECONDITION:case Gr.ABORTED:case Gr.OUT_OF_RANGE:case Gr.UNIMPLEMENTED:case Gr.DATA_LOSS:return 1;default:return xr(),0}}function Pi(t){if(void 0===t)return Cr("GRPC error has no .code"),Gr.UNKNOWN;switch(t){case Ri.OK:return Gr.OK;case Ri.CANCELLED:return Gr.CANCELLED;case Ri.UNKNOWN:return Gr.UNKNOWN;case Ri.DEADLINE_EXCEEDED:return Gr.DEADLINE_EXCEEDED;case Ri.RESOURCE_EXHAUSTED:return Gr.RESOURCE_EXHAUSTED;case Ri.INTERNAL:return Gr.INTERNAL;case Ri.UNAVAILABLE:return Gr.UNAVAILABLE;case Ri.UNAUTHENTICATED:return Gr.UNAUTHENTICATED;case Ri.INVALID_ARGUMENT:return Gr.INVALID_ARGUMENT;case Ri.NOT_FOUND:return Gr.NOT_FOUND;case Ri.ALREADY_EXISTS:return Gr.ALREADY_EXISTS;case Ri.PERMISSION_DENIED:return Gr.PERMISSION_DENIED;case Ri.FAILED_PRECONDITION:return Gr.FAILED_PRECONDITION;case Ri.ABORTED:return Gr.ABORTED;case Ri.OUT_OF_RANGE:return Gr.OUT_OF_RANGE;case Ri.UNIMPLEMENTED:return Gr.UNIMPLEMENTED;case Ri.DATA_LOSS:return Gr.DATA_LOSS;default:return xr()}}(l=Ri=Ri||{})[l.OK=0]="OK",l[l.CANCELLED=1]="CANCELLED",l[l.UNKNOWN=2]="UNKNOWN",l[l.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",l[l.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",l[l.NOT_FOUND=5]="NOT_FOUND",l[l.ALREADY_EXISTS=6]="ALREADY_EXISTS",l[l.PERMISSION_DENIED=7]="PERMISSION_DENIED",l[l.UNAUTHENTICATED=16]="UNAUTHENTICATED",l[l.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",l[l.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",l[l.ABORTED=10]="ABORTED",l[l.OUT_OF_RANGE=11]="OUT_OF_RANGE",l[l.UNIMPLEMENTED=12]="UNIMPLEMENTED",l[l.INTERNAL=13]="INTERNAL",l[l.UNAVAILABLE=14]="UNAVAILABLE",l[l.DATA_LOSS=15]="DATA_LOSS";var _i=(ji.prototype.Tt=function(t,e){return new ji(this.k,this.root.Tt(t,e,this.k).copy(null,null,Vi.At,null,null))},ji.prototype.remove=function(t){return new ji(this.k,this.root.remove(t,this.k).copy(null,null,Vi.At,null,null))},ji.prototype.get=function(t){for(var e=this.root;!e.W();){var n=this.k(t,e.key);if(0===n)return e.value;n<0?e=e.left:0<n&&(e=e.right)}return null},ji.prototype.indexOf=function(t){for(var e=0,n=this.root;!n.W();){var r=this.k(t,n.key);if(0===r)return e+n.left.size;n=r<0?n.left:(e+=n.left.size+1,n.right)}return-1},ji.prototype.W=function(){return this.root.W()},Object.defineProperty(ji.prototype,"size",{get:function(){return this.root.size},enumerable:!1,configurable:!0}),ji.prototype.It=function(){return this.root.It()},ji.prototype.Rt=function(){return this.root.Rt()},ji.prototype.Pt=function(t){return this.root.Pt(t)},ji.prototype.forEach=function(n){this.Pt(function(t,e){return n(t,e),!1})},ji.prototype.toString=function(){var n=[];return this.Pt(function(t,e){return n.push(t+":"+e),!1}),"{"+n.join(", ")+"}"},ji.prototype.yt=function(t){return this.root.yt(t)},ji.prototype.Vt=function(){return new Li(this.root,null,this.k,!1)},ji.prototype.gt=function(t){return new Li(this.root,t,this.k,!1)},ji.prototype.vt=function(){return new Li(this.root,null,this.k,!0)},ji.prototype.bt=function(t){return new Li(this.root,t,this.k,!0)},ji),Li=(Ui.prototype.Dt=function(){var t=this.St.pop(),e={key:t.key,value:t.value};if(this.Ct)for(t=t.left;!t.W();)this.St.push(t),t=t.right;else for(t=t.right;!t.W();)this.St.push(t),t=t.left;return e},Ui.prototype.Nt=function(){return 0<this.St.length},Ui.prototype.xt=function(){if(0===this.St.length)return null;var t=this.St[this.St.length-1];return{key:t.key,value:t.value}},Ui),Vi=(Ci.prototype.copy=function(t,e,n,r,i){return new Ci(null!=t?t:this.key,null!=e?e:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)},Ci.prototype.W=function(){return!1},Ci.prototype.Pt=function(t){return this.left.Pt(t)||t(this.key,this.value)||this.right.Pt(t)},Ci.prototype.yt=function(t){return this.right.yt(t)||t(this.key,this.value)||this.left.yt(t)},Ci.prototype.min=function(){return this.left.W()?this:this.left.min()},Ci.prototype.It=function(){return this.min().key},Ci.prototype.Rt=function(){return this.right.W()?this.key:this.right.Rt()},Ci.prototype.Tt=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.Tt(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.Tt(t,e,n))).Ft()},Ci.prototype.Ot=function(){if(this.left.W())return Ci.EMPTY;var t=this;return t.left.$t()||t.left.left.$t()||(t=t.Lt()),(t=t.copy(null,null,null,t.left.Ot(),null)).Ft()},Ci.prototype.remove=function(t,e){var n,r=this;if(e(t,r.key)<0)r.left.W()||r.left.$t()||r.left.left.$t()||(r=r.Lt()),r=r.copy(null,null,null,r.left.remove(t,e),null);else{if(r.left.$t()&&(r=r.kt()),r.right.W()||r.right.$t()||r.right.left.$t()||(r=r.Mt()),0===e(t,r.key)){if(r.right.W())return Ci.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.Ot())}r=r.copy(null,null,null,null,r.right.remove(t,e))}return r.Ft()},Ci.prototype.$t=function(){return this.color},Ci.prototype.Ft=function(){var t=this;return t.right.$t()&&!t.left.$t()&&(t=t.Ut()),t.left.$t()&&t.left.left.$t()&&(t=t.kt()),t.left.$t()&&t.right.$t()&&(t=t.qt()),t},Ci.prototype.Lt=function(){var t=this.qt();return t.right.left.$t()&&(t=(t=(t=t.copy(null,null,null,null,t.right.kt())).Ut()).qt()),t},Ci.prototype.Mt=function(){var t=this.qt();return t.left.left.$t()&&(t=(t=t.kt()).qt()),t},Ci.prototype.Ut=function(){var t=this.copy(null,null,Ci.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)},Ci.prototype.kt=function(){var t=this.copy(null,null,Ci.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)},Ci.prototype.qt=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},Ci.prototype.Bt=function(){var t=this.Qt();return Math.pow(2,t)<=this.size+1},Ci.prototype.Qt=function(){if(this.$t()&&this.left.$t())throw xr();if(this.right.$t())throw xr();var t=this.left.Qt();if(t!==this.right.Qt())throw xr();return t+(this.$t()?0:1)},Ci);function Ci(t,e,n,r,i){this.key=t,this.value=e,this.color=null!=n?n:Ci.RED,this.left=null!=r?r:Ci.EMPTY,this.right=null!=i?i:Ci.EMPTY,this.size=this.left.size+1+this.right.size}function Ui(t,e,n,r){this.Ct=r,this.St=[];for(var i=1;!t.W();)if(i=e?n(t.key,e):1,r&&(i*=-1),i<0)t=this.Ct?t.left:t.right;else{if(0===i){this.St.push(t);break}this.St.push(t),t=this.Ct?t.right:t.left}}function ji(t,e){this.k=t,this.root=e||Vi.EMPTY}function xi(){this.size=0}Vi.EMPTY=null,Vi.RED=!0,Vi.At=!1,Vi.EMPTY=(Object.defineProperty(xi.prototype,"key",{get:function(){throw xr()},enumerable:!1,configurable:!0}),Object.defineProperty(xi.prototype,"value",{get:function(){throw xr()},enumerable:!1,configurable:!0}),Object.defineProperty(xi.prototype,"color",{get:function(){throw xr()},enumerable:!1,configurable:!0}),Object.defineProperty(xi.prototype,"left",{get:function(){throw xr()},enumerable:!1,configurable:!0}),Object.defineProperty(xi.prototype,"right",{get:function(){throw xr()},enumerable:!1,configurable:!0}),xi.prototype.copy=function(t,e,n,r,i){return this},xi.prototype.Tt=function(t,e,n){return new Vi(t,e)},xi.prototype.remove=function(t,e){return this},xi.prototype.W=function(){return!0},xi.prototype.Pt=function(t){return!1},xi.prototype.yt=function(t){return!1},xi.prototype.It=function(){return null},xi.prototype.Rt=function(){return null},xi.prototype.$t=function(){return!1},xi.prototype.Bt=function(){return!0},xi.prototype.Qt=function(){return 0},new xi);var Mi=(Bi.prototype.has=function(t){return null!==this.data.get(t)},Bi.prototype.first=function(){return this.data.It()},Bi.prototype.last=function(){return this.data.Rt()},Object.defineProperty(Bi.prototype,"size",{get:function(){return this.data.size},enumerable:!1,configurable:!0}),Bi.prototype.indexOf=function(t){return this.data.indexOf(t)},Bi.prototype.forEach=function(n){this.data.Pt(function(t,e){return n(t),!1})},Bi.prototype.jt=function(t,e){for(var n=this.data.gt(t[0]);n.Nt();){var r=n.Dt();if(0<=this.k(r.key,t[1]))return;e(r.key)}},Bi.prototype.Wt=function(t,e){for(var n=void 0!==e?this.data.gt(e):this.data.Vt();n.Nt();)if(!t(n.Dt().key))return},Bi.prototype.Gt=function(t){t=this.data.gt(t);return t.Nt()?t.Dt().key:null},Bi.prototype.Vt=function(){return new qi(this.data.Vt())},Bi.prototype.gt=function(t){return new qi(this.data.gt(t))},Bi.prototype.add=function(t){return this.copy(this.data.remove(t).Tt(t,!0))},Bi.prototype.delete=function(t){return this.has(t)?this.copy(this.data.remove(t)):this},Bi.prototype.W=function(){return this.data.W()},Bi.prototype.Kt=function(t){var e=this;return e.size<t.size&&(e=t,t=this),t.forEach(function(t){e=e.add(t)}),e},Bi.prototype.isEqual=function(t){if(!(t instanceof Bi))return!1;if(this.size!==t.size)return!1;for(var e=this.data.Vt(),n=t.data.Vt();e.Nt();){var r=e.Dt().key,i=n.Dt().key;if(0!==this.k(r,i))return!1}return!0},Bi.prototype.H=function(){var e=[];return this.forEach(function(t){e.push(t)}),e},Bi.prototype.toString=function(){var e=[];return this.forEach(function(t){return e.push(t)}),"SortedSet("+e.toString()+")"},Bi.prototype.copy=function(t){var e=new Bi(this.k);return e.data=t,e},Bi),qi=(Gi.prototype.Dt=function(){return this.zt.Dt().key},Gi.prototype.Nt=function(){return this.zt.Nt()},Gi),Fi=new _i(ci.k);function Gi(t){this.zt=t}function Bi(t){this.k=t,this.data=new _i(this.k)}var Wi=new _i(ci.k);var zi=new _i(ci.k),Hi=new Mi(ci.k);function Xi(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=Hi,r=0,i=t;r<i.length;r++)var o=i[r],n=n.add(o);return n}var Yi=new Mi(ei);var Ki=(lo.Jt=function(t){return new lo(t.k)},lo.prototype.has=function(t){return null!=this.Ht.get(t)},lo.prototype.get=function(t){return this.Ht.get(t)},lo.prototype.first=function(){return this.Yt.It()},lo.prototype.last=function(){return this.Yt.Rt()},lo.prototype.W=function(){return this.Yt.W()},lo.prototype.indexOf=function(t){t=this.Ht.get(t);return t?this.Yt.indexOf(t):-1},Object.defineProperty(lo.prototype,"size",{get:function(){return this.Yt.size},enumerable:!1,configurable:!0}),lo.prototype.forEach=function(n){this.Yt.Pt(function(t,e){return n(t),!1})},lo.prototype.add=function(t){var e=this.delete(t.key);return e.copy(e.Ht.Tt(t.key,t),e.Yt.Tt(t,null))},lo.prototype.delete=function(t){var e=this.get(t);return e?this.copy(this.Ht.remove(t),this.Yt.remove(e)):this},lo.prototype.isEqual=function(t){if(!(t instanceof lo))return!1;if(this.size!==t.size)return!1;for(var e=this.Yt.Vt(),n=t.Yt.Vt();e.Nt();){var r=e.Dt().key,i=n.Dt().key;if(!r.isEqual(i))return!1}return!0},lo.prototype.toString=function(){var e=[];return this.forEach(function(t){e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"},lo.prototype.copy=function(t,e){var n=new lo;return n.k=this.k,n.Ht=t,n.Yt=e,n},lo),$i=(co.prototype.track=function(t){var e=t.doc.key,n=this.Xt.get(e);!n||0!==t.type&&3===n.type?this.Xt=this.Xt.Tt(e,t):3===t.type&&1!==n.type?this.Xt=this.Xt.Tt(e,{type:n.type,doc:t.doc}):2===t.type&&2===n.type?this.Xt=this.Xt.Tt(e,{type:2,doc:t.doc}):2===t.type&&0===n.type?this.Xt=this.Xt.Tt(e,{type:0,doc:t.doc}):1===t.type&&0===n.type?this.Xt=this.Xt.remove(e):1===t.type&&2===n.type?this.Xt=this.Xt.Tt(e,{type:1,doc:n.doc}):0===t.type&&1===n.type?this.Xt=this.Xt.Tt(e,{type:2,doc:t.doc}):xr()},co.prototype.Zt=function(){var n=[];return this.Xt.Pt(function(t,e){n.push(e)}),n},co),Qi=(ho.rn=function(t,e,n,r){var i=[];return e.forEach(function(t){i.push({type:0,doc:t})}),new ho(t,e,Ki.Jt(e),i,n,r,!0,!1)},Object.defineProperty(ho.prototype,"hasPendingWrites",{get:function(){return!this.nn.W()},enumerable:!1,configurable:!0}),ho.prototype.isEqual=function(t){if(!(this.fromCache===t.fromCache&&this.en===t.en&&this.nn.isEqual(t.nn)&&Tu(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.tn.isEqual(t.tn)))return!1;var e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(var r=0;r<e.length;r++)if(e[r].type!==n[r].type||!e[r].doc.isEqual(n[r].doc))return!1;return!0},ho),Ji=(ao.hn=function(t,e){var n=new Map;return n.set(t,Zi.ln(t,e)),new ao(si.min(),n,Yi,Fi,Xi())},ao),Zi=(uo.ln=function(t,e){return new uo(Ai.lt,e,Xi(),Xi(),Xi())},uo),to=function(t,e,n,r){this.En=t,this.removedTargetIds=e,this.key=n,this.mn=r},eo=function(t,e){this.targetId=t,this.Tn=e},no=function(t,e,n,r){void 0===n&&(n=Ai.lt),void 0===r&&(r=null),this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=r},ro=(Object.defineProperty(so.prototype,"_n",{get:function(){return this.Pn},enumerable:!1,configurable:!0}),Object.defineProperty(so.prototype,"resumeToken",{get:function(){return this.Rn},enumerable:!1,configurable:!0}),Object.defineProperty(so.prototype,"Vn",{get:function(){return 0!==this.An},enumerable:!1,configurable:!0}),Object.defineProperty(so.prototype,"pn",{get:function(){return this.yn},enumerable:!1,configurable:!0}),so.prototype.gn=function(t){0<t.ht()&&(this.yn=!0,this.Rn=t)},so.prototype.vn=function(){var n=Xi(),r=Xi(),i=Xi();return this.In.forEach(function(t,e){switch(e){case 0:n=n.add(t);break;case 2:r=r.add(t);break;case 1:i=i.add(t);break;default:xr()}}),new Zi(this.Rn,this.Pn,n,r,i)},so.prototype.bn=function(){this.yn=!1,this.In=po()},so.prototype.Cn=function(t,e){this.yn=!0,this.In=this.In.Tt(t,e)},so.prototype.Sn=function(t){this.yn=!0,this.In=this.In.remove(t)},so.prototype.Dn=function(){this.An+=1},so.prototype.Nn=function(){--this.An},so.prototype.xn=function(){this.yn=!0,this.Pn=!0},so),io=(oo.prototype.Mn=function(t){for(var e=0,n=t.En;e<n.length;e++){var r=n[e];t.mn instanceof su?this.Un(r,t.mn):t.mn instanceof uu&&this.qn(r,t.key,t.mn)}for(var i=0,o=t.removedTargetIds;i<o.length;i++){var s=o[i];this.qn(s,t.key,t.mn)}},oo.prototype.Bn=function(n){var r=this;this.Qn(n,function(t){var e=r.jn(t);switch(n.state){case 0:r.Wn(t)&&e.gn(n.resumeToken);break;case 1:e.Nn(),e.Vn||e.bn(),e.gn(n.resumeToken);break;case 2:e.Nn(),e.Vn||r.removeTarget(t);break;case 3:r.Wn(t)&&(e.xn(),e.gn(n.resumeToken));break;case 4:r.Wn(t)&&(r.Gn(t),e.gn(n.resumeToken));break;default:xr()}})},oo.prototype.Qn=function(t,n){var r=this;0<t.targetIds.length?t.targetIds.forEach(n):this.On.forEach(function(t,e){r.Wn(e)&&n(e)})},oo.prototype.Kn=function(t){var e=t.targetId,n=t.Tn.count,t=this.zn(e);t&&(Ii(t=t.target)?0===n?(t=new ci(t.path),this.qn(e,t,new uu(t,si.min()))):Mr(1===n):this.Hn(e)!==n&&(this.Gn(e),this.kn=this.kn.add(e)))},oo.prototype.Yn=function(r){var i=this,o=new Map;this.On.forEach(function(t,e){var n=i.zn(e);n&&(t._n&&Ii(n.target)&&(n=new ci(n.target.path),null!==i.$n.get(n)||i.Jn(e,n)||i.qn(e,n,new uu(n,r))),t.pn&&(o.set(e,t.vn()),t.bn()))});var s=Xi();this.Ln.forEach(function(t,e){var n=!0;e.Wt(function(t){t=i.zn(t);return!t||2===t._t||(n=!1)}),n&&(s=s.add(t))});var t=new Ji(r,o,this.kn,this.$n,s);return this.$n=Fi,this.Ln=fo(),this.kn=new Mi(ei),t},oo.prototype.Un=function(t,e){var n;this.Wn(t)&&(n=this.Jn(t,e.key)?2:0,this.jn(t).Cn(e.key,n),this.$n=this.$n.Tt(e.key,e),this.Ln=this.Ln.Tt(e.key,this.Xn(e.key).add(t)))},oo.prototype.qn=function(t,e,n){var r;this.Wn(t)&&(r=this.jn(t),this.Jn(t,e)?r.Cn(e,1):r.Sn(e),this.Ln=this.Ln.Tt(e,this.Xn(e).delete(t)),n&&(this.$n=this.$n.Tt(e,n)))},oo.prototype.removeTarget=function(t){this.On.delete(t)},oo.prototype.Hn=function(t){var e=this.jn(t).vn();return this.Fn.Zn(t).size+e.fn.size-e.wn.size},oo.prototype.Dn=function(t){this.jn(t).Dn()},oo.prototype.jn=function(t){var e=this.On.get(t);return e||(e=new ro,this.On.set(t,e)),e},oo.prototype.Xn=function(t){var e=this.Ln.get(t);return e||(e=new Mi(ei),this.Ln=this.Ln.Tt(t,e)),e},oo.prototype.Wn=function(t){var e=null!==this.zn(t);return e||Vr("WatchChangeAggregator","Detected inactive target",t),e},oo.prototype.zn=function(t){var e=this.On.get(t);return e&&e.Vn?null:this.Fn.te(t)},oo.prototype.Gn=function(e){var n=this;this.On.set(e,new ro),this.Fn.Zn(e).forEach(function(t){n.qn(e,t,null)})},oo.prototype.Jn=function(t,e){return this.Fn.Zn(t).has(e)},oo);function oo(t){this.Fn=t,this.On=new Map,this.$n=Fi,this.Ln=fo(),this.kn=new Mi(ei)}function so(){this.An=0,this.In=po(),this.Rn=Ai.lt,this.Pn=!1,this.yn=!0}function uo(t,e,n,r,i){this.resumeToken=t,this._n=e,this.fn=n,this.dn=r,this.wn=i}function ao(t,e,n,r,i){this.ft=t,this.on=e,this.un=n,this.cn=r,this.an=i}function ho(t,e,n,r,i,o,s,u){this.query=t,this.docs=e,this.tn=n,this.docChanges=r,this.nn=i,this.fromCache=o,this.en=s,this.sn=u}function co(){this.Xt=new _i(ci.k)}function lo(n){this.k=n?function(t,e){return n(t,e)||ci.k(t.key,e.key)}:function(t,e){return ci.k(t.key,e.key)},this.Ht=Wi,this.Yt=new _i(this.k)}function fo(){return new _i(ci.k)}function po(){return new _i(ci.k)}function vo(t){var e,n=0;for(e in t)Object.prototype.hasOwnProperty.call(t,e)&&n++;return n}function yo(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function go(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function mo(t){return"server_timestamp"===(null===(t=((null===(t=null==t?void 0:t.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function wo(t){t=Ro(t.mapValue.fields.__local_write_time__.timestampValue);return new oi(t.seconds,t.nanos)}var bo=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Eo(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?mo(t)?4:10:xr()}function To(r,i){var t,e=Eo(r);if(e!==Eo(i))return!1;switch(e){case 0:return!0;case 1:return r.booleanValue===i.booleanValue;case 4:return wo(r).isEqual(wo(i));case 3:return function(t){if("string"==typeof r.timestampValue&&"string"==typeof t.timestampValue&&r.timestampValue.length===t.timestampValue.length)return r.timestampValue===t.timestampValue;var e=Ro(r.timestampValue),t=Ro(t.timestampValue);return e.seconds===t.seconds&&e.nanos===t.nanos}(i);case 5:return r.stringValue===i.stringValue;case 6:return t=i,Do(r.bytesValue).isEqual(Do(t.bytesValue));case 7:return r.referenceValue===i.referenceValue;case 8:return e=i,ko((t=r).geoPointValue.latitude)===ko(e.geoPointValue.latitude)&&ko(t.geoPointValue.longitude)===ko(e.geoPointValue.longitude);case 2:return function(t,e){if("integerValue"in t&&"integerValue"in e)return ko(t.integerValue)===ko(e.integerValue);if("doubleValue"in t&&"doubleValue"in e){t=ko(t.doubleValue),e=ko(e.doubleValue);return t===e?mi(t)===mi(e):isNaN(t)&&isNaN(e)}return!1}(r,i);case 9:return ni(r.arrayValue.values||[],i.arrayValue.values||[],To);case 10:return function(){var t,e=r.mapValue.fields||{},n=i.mapValue.fields||{};if(vo(e)!==vo(n))return!1;for(t in e)if(e.hasOwnProperty(t)&&(void 0===n[t]||!To(e[t],n[t])))return!1;return!0}();default:return xr()}}function Io(t,e){return void 0!==(t.values||[]).find(function(t){return To(t,e)})}function Ao(t,e){var n,r,i=Eo(t),o=Eo(e);if(i!==o)return ei(i,o);switch(i){case 0:return 0;case 1:return ei(t.booleanValue,e.booleanValue);case 2:return n=e,r=ko(t.integerValue||t.doubleValue),n=ko(n.integerValue||n.doubleValue),r<n?-1:n<r?1:r===n?0:isNaN(r)?isNaN(n)?0:-1:1;case 3:return No(t.timestampValue,e.timestampValue);case 4:return No(wo(t),wo(e));case 5:return ei(t.stringValue,e.stringValue);case 6:return function(t,e){t=Do(t),e=Do(e);return t.F(e)}(t.bytesValue,e.bytesValue);case 7:return function(t,e){for(var n=t.split("/"),r=e.split("/"),i=0;i<n.length&&i<r.length;i++){var o=ei(n[i],r[i]);if(0!==o)return o}return ei(n.length,r.length)}(t.referenceValue,e.referenceValue);case 8:return i=t.geoPointValue,r=e.geoPointValue,0!==(n=ei(ko(i.latitude),ko(r.latitude)))?n:ei(ko(i.longitude),ko(r.longitude));case 9:return function(t,e){for(var n=t.values||[],r=e.values||[],i=0;i<n.length&&i<r.length;++i){var o=Ao(n[i],r[i]);if(o)return o}return ei(n.length,r.length)}(t.arrayValue,e.arrayValue);case 10:return function(t,e){var n=t.fields||{},r=Object.keys(n),i=e.fields||{},o=Object.keys(i);r.sort(),o.sort();for(var s=0;s<r.length&&s<o.length;++s){var u=ei(r[s],o[s]);if(0!==u)return u;u=Ao(n[r[s]],i[o[s]]);if(0!==u)return u}return ei(r.length,o.length)}(t.mapValue,e.mapValue);default:throw xr()}}function No(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return ei(t,e);var n=Ro(t),t=Ro(e),e=ei(n.seconds,t.seconds);return 0!==e?e:ei(n.nanos,t.nanos)}function Oo(t){return function s(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(t){var t=Ro(t);return"time("+t.seconds+","+t.nanos+")"}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?Do(t.bytesValue).toBase64():"referenceValue"in t?(e=t.referenceValue,ci.it(e).toString()):"geoPointValue"in t?"geo("+(e=t.geoPointValue).latitude+","+e.longitude+")":"arrayValue"in t?function(t){for(var e="[",n=!0,r=0,i=t.values||[];r<i.length;r++)n?n=!1:e+=",",e+=s(i[r]);return e+"]"}(t.arrayValue):"mapValue"in t?function(t){for(var e="{",n=!0,r=0,i=Object.keys(t.fields||{}).sort();r<i.length;r++){var o=i[r];n?n=!1:e+=",",e+=o+":"+s(t.fields[o])}return e+"}"}(t.mapValue):xr();var e}(t)}function Ro(t){if(Mr(!!t),"string"!=typeof t)return{seconds:ko(t.seconds),nanos:ko(t.nanos)};var e=0,n=bo.exec(t);Mr(!!n),n[1]&&(n=((n=n[1])+"000000000").substr(0,9),e=Number(n));t=new Date(t);return{seconds:Math.floor(t.getTime()/1e3),nanos:e}}function ko(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function Do(t){return"string"==typeof t?Ai.fromBase64String(t):Ai.fromUint8Array(t)}function So(t,e){return{referenceValue:"projects/"+t.projectId+"/databases/"+t.database+"/documents/"+e.path.Y()}}function Po(t){return t&&"integerValue"in t}function _o(t){return!!t&&"arrayValue"in t}function Lo(t){return t&&"nullValue"in t}function Vo(t){return t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Co(t){return t&&"mapValue"in t}var Uo={asc:"ASCENDING",desc:"DESCENDING"},jo={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},xo=function(t,e){this.t=t,this.ne=e};function Mo(t){return{integerValue:""+t}}function qo(t,e){if(t.ne){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:mi(e)?"-0":e}}function Fo(t,e){return"number"==typeof(n=e)&&Number.isInteger(n)&&!mi(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER?Mo(e):qo(t,e);var n}function Go(t,e){return t.ne?new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+e.nanoseconds).slice(-9)+"Z":{seconds:""+e.seconds,nanos:e.nanoseconds}}function Bo(t,e){return t.ne?e.toBase64():e.toUint8Array()}function Wo(t){return Mr(!!t),si.N((t=Ro(t),new oi(t.seconds,t.nanos)))}function zo(t,e){return new ui(["projects",t.projectId,"databases",t.database]).child("documents").child(e).Y()}function Ho(t){t=ui.J(t);return Mr(us(t)),t}function Xo(t,e){return zo(t.t,e.path)}function Yo(t,e){e=Ho(e);if(e.get(1)!==t.t.projectId)throw new Br(Gr.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+e.get(1)+" vs "+t.t.projectId);if(e.get(3)!==t.t.database)throw new Br(Gr.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+e.get(3)+" vs "+t.t.database);return new ci(Qo(e))}function Ko(t,e){return zo(t.t,e)}function $o(t){return new ui(["projects",t.t.projectId,"databases",t.t.database]).Y()}function Qo(t){return Mr(4<t.length&&"documents"===t.get(4)),t.U(5)}function Jo(t,e,n){return{name:Xo(t,e),fields:n.proto.mapValue.fields}}function Zo(t,e){var n,r,i;if(e instanceof xs)n={update:Jo(t,e.key,e.value)};else if(e instanceof Ks)n={delete:Xo(t,e.key)};else if(e instanceof Ms)n={update:Jo(t,e.key,e.data),updateMask:(i=e.ee,r=[],i.fields.forEach(function(t){return r.push(t.Y())}),{fieldPaths:r})};else if(e instanceof Ws)n={transform:{document:Xo(t,e.key),fieldTransforms:e.fieldTransforms.map(function(t){var e=t.transform;if(e instanceof ls)return{fieldPath:t.field.Y(),setToServerValue:"REQUEST_TIME"};if(e instanceof fs)return{fieldPath:t.field.Y(),appendMissingElements:{values:e.elements}};if(e instanceof gs)return{fieldPath:t.field.Y(),removeAllFromArray:{values:e.elements}};if(e instanceof Es)return{fieldPath:t.field.Y(),increment:e.se};throw xr()})}};else{if(!(e instanceof $s))return xr();n={verify:Xo(t,e.key)}}return e.re.ie||(n.currentDocument=void 0!==(i=e.re).updateTime?{updateTime:(e=t,t=i.updateTime,Go(e,t.$()))}:void 0!==i.exists?{exists:i.exists}:xr()),n}function ts(t,e){var n={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(n.parent=Ko(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=Ko(t,r.q()),n.structuredQuery.from=[{collectionId:r.j()}]);r=function(t){if(0!==t.length){t=t.map(function(t){if("=="===t.op){if(Vo(t.value))return{unaryFilter:{field:is(t.field),op:"IS_NAN"}};if(Lo(t.value))return{unaryFilter:{field:is(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(Vo(t.value))return{unaryFilter:{field:is(t.field),op:"IS_NOT_NAN"}};if(Lo(t.value))return{unaryFilter:{field:is(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:is(t.field),op:(e=t.op,jo[e]),value:t.value}};var e});return 1===t.length?t[0]:{compositeFilter:{op:"AND",filters:t}}}}(e.filters);r&&(n.structuredQuery.where=r);r=function(t){if(0!==t.length)return t.map(function(t){return{field:is((t=t).field),direction:(t=t.dir,Uo[t])}})}(e.orderBy);r&&(n.structuredQuery.orderBy=r);r=e.limit,r=t.ne||gi(r)?r:{value:r};return null!==r&&(n.structuredQuery.limit=r),e.startAt&&(n.structuredQuery.startAt=ns(e.startAt)),e.endAt&&(n.structuredQuery.endAt=ns(e.endAt)),n}function es(t){var e=4===(o=Ho(t.parent)).length?ui.X():Qo(o),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;0<r&&(Mr(1===r),(s=n.from[0]).allDescendants?i=s.collectionId:e=e.child(s.collectionId));var o=[];n.where&&(o=function e(t){return t?void 0!==t.unaryFilter?[ss(t)]:void 0!==t.fieldFilter?[(n=t,ku.create(os(n.fieldFilter.field),function(){switch(n.fieldFilter.op){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":default:return xr()}}(),n.fieldFilter.value))]:void 0!==t.compositeFilter?t.compositeFilter.filters.map(function(t){return e(t)}).reduce(function(t,e){return t.concat(e)}):xr():[];var n}(n.where));t=[];n.orderBy&&(t=n.orderBy.map(function(t){return new na(os((e=t).field),function(){switch(e.direction){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}());var e}));r=null;n.limit&&(r=gi(u="object"==typeof(u=n.limit)?u.value:u)?null:u);var s=null;n.startAt&&(s=rs(n.startAt));var u=null;return n.endAt&&(u=rs(n.endAt)),new hu(e,i,t,o,r,"F",s,u)}function ns(t){return{before:t.before,values:t.position}}function rs(t){var e=!!t.before,t=t.values||[];return new Yu(t,e)}function is(t){return{fieldPath:t.Y()}}function os(t){return hi.et(t.fieldPath)}function ss(t){switch(t.unaryFilter.op){case"IS_NAN":var e=os(t.unaryFilter.field);return ku.create(e,"==",{doubleValue:NaN});case"IS_NULL":var n=os(t.unaryFilter.field);return ku.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":n=os(t.unaryFilter.field);return ku.create(n,"!=",{doubleValue:NaN});case"IS_NOT_NULL":t=os(t.unaryFilter.field);return ku.create(t,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":default:return xr()}}function us(t){return 4<=t.length&&"projects"===t.get(0)&&"databases"===t.get(2)}Ie=function(){this.oe=void 0};function as(t,e){return t instanceof Es?Po(t=e)||t&&"doubleValue"in t?e:{integerValue:0}:null}var hs,cs,ls=(n(ds,cs=Ie),ds),fs=(n(ps,hs=Ie),ps);function ps(t){var e=this;return(e=hs.call(this)||this).elements=t,e}function ds(){return null!==cs&&cs.apply(this,arguments)||this}function vs(t,e){for(var n=As(e),r=0,i=t.elements;r<i.length;r++)!function(e){n.some(function(t){return To(t,e)})||n.push(e)}(i[r]);return{arrayValue:{values:n}}}var ys,gs=(n(ms,ys=Ie),ms);function ms(t){var e=this;return(e=ys.call(this)||this).elements=t,e}function ws(t,e){for(var n=As(e),r=0,i=t.elements;r<i.length;r++)!function(e){n=n.filter(function(t){return!To(t,e)})}(i[r]);return{arrayValue:{values:n}}}var bs,Es=(n(Ts,bs=Ie),Ts);function Ts(t,e){var n=this;return(n=bs.call(this)||this).serializer=t,n.se=e,n}function Is(t){return ko(t.integerValue||t.doubleValue)}function As(t){return _o(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function Ns(t,e){this.field=t,this.transform=e}var Os=(Rs.prototype.ue=function(t){for(var e=0,n=this.fields;e<n.length;e++)if(n[e].G(t))return!0;return!1},Rs.prototype.isEqual=function(t){return ni(this.fields,t.fields,function(t,e){return t.isEqual(e)})},Rs);function Rs(t){(this.fields=t).sort(hi.k)}function ks(t,e){this.version=t,this.transformResults=e}var Ds=(Ss.ce=function(){return new Ss},Ss.exists=function(t){return new Ss(void 0,t)},Ss.updateTime=function(t){return new Ss(t)},Object.defineProperty(Ss.prototype,"ie",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!1,configurable:!0}),Ss.prototype.isEqual=function(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)},Ss);function Ss(t,e){this.updateTime=t,this.exists=e}function Ps(t,e){return void 0!==t.updateTime?e instanceof su&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e instanceof su}l=function(){};function _s(t,e,n){return t instanceof xs?new su(t.key,n.version,t.value,{hasCommittedMutations:!0}):t instanceof Ms?function(t,e,n){if(!Ps(t.re,e))return new au(t.key,n.version);e=Gs(t,e);return new su(t.key,n.version,e,{hasCommittedMutations:!0})}(t,e,n):t instanceof Ws?function(t,e,n){if(Mr(null!=n.transformResults),!Ps(t.re,e))return new au(t.key,n.version);var r=e,e=function(t,e,n){var r=[];Mr(t.length===n.length);for(var i=0;i<n.length;i++){var o=t[i],s=o.transform,u=null;e instanceof su&&(u=e.field(o.field)),r.push((o=s,s=u,u=n[i],o instanceof fs?vs(o,s):o instanceof gs?ws(o,s):u))}return r}(t.fieldTransforms,e,n.transformResults),n=n.version,e=Hs(t,r.data(),e);return new su(t.key,n,e,{hasCommittedMutations:!0})}(t,e,n):new uu(t.key,n.version,{hasCommittedMutations:!0})}function Ls(t,e,n,r){return t instanceof xs?function(t,e){if(!Ps(t.re,e))return e;e=Cs(e);return new su(t.key,e,t.value,{ae:!0})}(t,e):t instanceof Ms?function(t,e){if(!Ps(t.re,e))return e;var n=Cs(e),e=Gs(t,e);return new su(t.key,n,e,{ae:!0})}(t,e):t instanceof Ws?function(t,e,n,r){if(!Ps(t.re,e))return e;var i=e,r=function(t,e,n,r){for(var i,o=[],s=0,u=t;s<u.length;s++){var a=u[s],h=a.transform,c=null;n instanceof su&&(c=n.field(a.field)),null===c&&r instanceof su&&(c=r.field(a.field)),o.push((i=c,a=e,c=void 0,(h=h)instanceof ls?(c={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}},i&&(c.fields.__previous_value__=i),{mapValue:c}):h instanceof fs?vs(h,i):h instanceof gs?ws(h,i):(h=as(c=h,i),i=Is(h)+Is(c.se),Po(h)&&Po(c.se)?Mo(i):qo(c.serializer,i))))}return o}(t.fieldTransforms,n,e,r),r=Hs(t,i.data(),r);return new su(t.key,i.version,r,{ae:!0})}(t,e,r,n):(e=e,Ps((t=t).re,e)?new uu(t.key,si.min()):e)}function Vs(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.re.isEqual(e.re)&&(0===t.type?t.value.isEqual(e.value):1===t.type?t.data.isEqual(e.data)&&t.ee.isEqual(e.ee):2!==t.type||ni(t.fieldTransforms,t.fieldTransforms,function(t,e){return e=e,(t=t).field.isEqual(e.field)&&(t=t.transform,e=e.transform,t instanceof fs&&e instanceof fs||t instanceof gs&&e instanceof gs?ni(t.elements,e.elements,To):t instanceof Es&&e instanceof Es?To(t.se,e.se):t instanceof ls&&e instanceof ls)}))}function Cs(t){return t instanceof su?t.version:si.min()}var Us,js,xs=(n(Fs,js=l),Fs),Ms=(n(qs,Us=l),qs);function qs(t,e,n,r){var i=this;return(i=Us.call(this)||this).key=t,i.data=e,i.ee=n,i.re=r,i.type=1,i}function Fs(t,e,n){var r=this;return(r=js.call(this)||this).key=t,r.value=e,r.re=n,r.type=0,r}function Gs(t,e){return n=t,e=e instanceof su?e.data():Qs.empty(),r=new Js(e),n.ee.fields.forEach(function(t){var e;t.W()||(null!==(e=n.data.field(t))?r.set(t,e):r.delete(t))}),r.he();var n,r}var Bs,Ws=(n(zs,Bs=l),zs);function zs(t,e){var n=this;return(n=Bs.call(this)||this).key=t,n.fieldTransforms=e,n.type=2,n.re=Ds.exists(!0),n}function Hs(t,e,n){for(var r=new Js(e),i=0;i<t.fieldTransforms.length;i++){var o=t.fieldTransforms[i];r.set(o.field,n[i])}return r.he()}var Xs,Ys,Ks=(n(nu,Ys=l),nu),$s=(n(eu,Xs=l),eu),Qs=(tu.empty=function(){return new tu({mapValue:{}})},tu.prototype.field=function(t){if(t.W())return this.proto;for(var e=this.proto,n=0;n<t.length-1;++n){if(!e.mapValue.fields)return null;if(!Co(e=e.mapValue.fields[t.get(n)]))return null}return(e=(e.mapValue.fields||{})[t.j()])||null},tu.prototype.isEqual=function(t){return To(this.proto,t.proto)},tu),Js=(Zs.prototype.set=function(t,e){return this.fe(t,e),this},Zs.prototype.delete=function(t){return this.fe(t,null),this},Zs.prototype.fe=function(t,e){for(var n=this._e,r=0;r<t.length-1;++r)var i=t.get(r),o=n.get(i),n=(o instanceof Map||(o=o&&10===Eo(o)?new Map(Object.entries(o.mapValue.fields||{})):new Map,n.set(i,o)),o);n.set(t.j(),e)},Zs.prototype.he=function(){var t=this.de(hi.X(),this._e);return null!=t?new Qs(t):this.le},Zs.prototype.de=function(r,t){var i=this,o=!1,e=this.le.field(r),s=Co(e)?Object.assign({},e.mapValue.fields):{};return t.forEach(function(t,e){var n;t instanceof Map?null!=(n=i.de(r.child(e),t))&&(s[e]=n,o=!0):null!==t?(s[e]=t,o=!0):s.hasOwnProperty(e)&&(delete s[e],o=!0)}),o?{mapValue:{fields:s}}:null},Zs);function Zs(t){void 0===t&&(t=Qs.empty()),this.le=t,this._e=new Map}function tu(t){this.proto=t}function eu(t,e){var n=this;return(n=Xs.call(this)||this).key=t,n.re=e,n.type=4,n}function nu(t,e){var n=this;return(n=Ys.call(this)||this).key=t,n.re=e,n.type=3,n}var ru,iu,ou,Ie=function(t,e){this.key=t,this.version=e},su=(n(fu,ou=Ie),fu.prototype.field=function(t){return this.we.field(t)},fu.prototype.data=function(){return this.we},fu.prototype.Ee=function(){return this.we.proto},fu.prototype.isEqual=function(t){return t instanceof fu&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.ae===t.ae&&this.hasCommittedMutations===t.hasCommittedMutations&&this.we.isEqual(t.we)},fu.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+this.we.toString()+", {hasLocalMutations: "+this.ae+"}), {hasCommittedMutations: "+this.hasCommittedMutations+"})"},Object.defineProperty(fu.prototype,"hasPendingWrites",{get:function(){return this.ae||this.hasCommittedMutations},enumerable:!1,configurable:!0}),fu),uu=(n(lu,iu=Ie),lu.prototype.toString=function(){return"NoDocument("+this.key+", "+this.version+")"},Object.defineProperty(lu.prototype,"hasPendingWrites",{get:function(){return this.hasCommittedMutations},enumerable:!1,configurable:!0}),lu.prototype.isEqual=function(t){return t instanceof lu&&t.hasCommittedMutations===this.hasCommittedMutations&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},lu),au=(n(cu,ru=Ie),cu.prototype.toString=function(){return"UnknownDocument("+this.key+", "+this.version+")"},Object.defineProperty(cu.prototype,"hasPendingWrites",{get:function(){return!0},enumerable:!1,configurable:!0}),cu.prototype.isEqual=function(t){return t instanceof cu&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},cu),hu=function(t,e,n,r,i,o,s,u){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o="F"),void 0===s&&(s=null),void 0===u&&(u=null),this.path=t,this.collectionGroup=e,this.me=n,this.filters=r,this.limit=i,this.limitType=o,this.startAt=s,this.endAt=u,this.Te=null,this.Ae=null,this.startAt,this.endAt};function cu(){return null!==ru&&ru.apply(this,arguments)||this}function lu(t,e,n){var r=this;return(r=iu.call(this,t,e)||this).hasCommittedMutations=!(!n||!n.hasCommittedMutations),r}function fu(t,e,n,r){var i=this;return(i=ou.call(this,t,e)||this).we=n,i.ae=!!r.ae,i.hasCommittedMutations=!!r.hasCommittedMutations,i}function pu(t){return new hu(t)}function du(t){return!gi(t.limit)&&"F"===t.limitType}function vu(t){return!gi(t.limit)&&"L"===t.limitType}function yu(t){return 0<t.me.length?t.me[0].field:null}function gu(t){for(var e=0,n=t.filters;e<n.length;e++){var r=n[e];if(r.Ie())return r.field}return null}function mu(t){return null!==t.collectionGroup}function wu(t){var e=t;if(null===e.Te){e.Te=[];var n=gu(e),t=yu(e);if(null!==n&&null===t)n.tt()||e.Te.push(new na(n)),e.Te.push(new na(hi.nt(),"asc"));else{for(var r=!1,i=0,o=e.me;i<o.length;i++){var s=o[i];e.Te.push(s),s.field.tt()&&(r=!0)}r||(n=0<e.me.length?e.me[e.me.length-1].dir:"asc",e.Te.push(new na(hi.nt(),n)))}}return e.Te}function bu(t){var e=t;if(!e.Ae)if("F"===e.limitType)e.Ae=bi(e.path,e.collectionGroup,wu(e),e.filters,e.limit,e.startAt,e.endAt);else{for(var n=[],r=0,i=wu(e);r<i.length;r++){var o=i[r],s="desc"===o.dir?"asc":"desc";n.push(new na(o.field,s))}var u=e.endAt?new Yu(e.endAt.position,!e.endAt.before):null,t=e.startAt?new Yu(e.startAt.position,!e.startAt.before):null;e.Ae=bi(e.path,e.collectionGroup,n,e.filters,e.limit,u,t)}return e.Ae}function Eu(t,e,n){return new hu(t.path,t.collectionGroup,t.me.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Tu(t,e){return Ti(bu(t),bu(e))&&t.limitType===e.limitType}function Iu(t){return Ei(bu(t))+"|lt:"+t.limitType}function Au(t){return"Query(target="+(e=bu(t),n=e.path.Y(),null!==e.collectionGroup&&(n+=" collectionGroup="+e.collectionGroup),0<e.filters.length&&(n+=", filters: ["+e.filters.map(function(t){return(t=t).field.Y()+" "+t.op+" "+Oo(t.value)}).join(", ")+"]"),gi(e.limit)||(n+=", limit: "+e.limit),0<e.orderBy.length&&(n+=", orderBy: ["+e.orderBy.map(function(t){return(t=t).field.Y()+" ("+t.dir+")"}).join(", ")+"]"),e.startAt&&(n+=", startAt: "+Zu(e.startAt)),e.endAt&&(n+=", endAt: "+Zu(e.endAt)),"Target("+n+")")+"; limitType="+t.limitType+")";var e,n}function Nu(i,t){return e=i,n=t.key.path,(null!==e.collectionGroup?t.key.rt(e.collectionGroup)&&e.path.G(n):ci.ot(e.path)?e.path.isEqual(n):e.path.K(n))&&function(t){for(var e=0,n=i.me;e<n.length;e++){var r=n[e];if(!r.field.tt()&&null===t.field(r.field))return}return 1}(t)&&function(t){for(var e=0,n=i.filters;e<n.length;e++)if(!n[e].matches(t))return;return 1}(t)&&(n=t,(!(t=i).startAt||ta(t.startAt,wu(t),n))&&(!t.endAt||!ta(t.endAt,wu(t),n)));var e,n}function Ou(u){return function(t,e){for(var n=!1,r=0,i=wu(u);r<i.length;r++){var o=i[r],s=function(t,r,e){e=t.field.tt()?ci.k(r.key,e.key):function(t,e){var n=r.field(t),t=e.field(t);return null!==n&&null!==t?Ao(n,t):xr()}(t.field,e);switch(t.dir){case"asc":return e;case"desc":return-1*e;default:return xr()}}(o,t,e);if(0!==s)return s;n=n||o.field.tt()}return 0}}var Ru,ku=(n(Du,Ru=function(){}),Du.create=function(t,e,n){return t.tt()?"in"===e||"not-in"===e?this.Re(t,e,n):new Lu(t,e,n):"array-contains"===e?new Wu(t,n):"in"===e?new zu(t,n):"not-in"===e?new Hu(t,n):"array-contains-any"===e?new Xu(t,n):new Du(t,e,n)},Du.Re=function(t,e,n){return new("in"===e?Vu:Cu)(t,n)},Du.prototype.matches=function(t){t=t.field(this.field);return"!="===this.op?null!==t&&this.Pe(Ao(t,this.value)):null!==t&&Eo(this.value)===Eo(t)&&this.Pe(Ao(t,this.value))},Du.prototype.Pe=function(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return 0<t;case">=":return 0<=t;default:return xr()}},Du.prototype.Ie=function(){return 0<=["<","<=",">",">=","!=","not-in"].indexOf(this.op)},Du);function Du(t,e,n){var r=this;return(r=Ru.call(this)||this).field=t,r.op=e,r.value=n,r}var Su,Pu,_u,Lu=(n(xu,_u=ku),xu.prototype.matches=function(t){t=ci.k(t.key,this.key);return this.Pe(t)},xu),Vu=(n(ju,Pu=ku),ju.prototype.matches=function(e){return this.keys.some(function(t){return t.isEqual(e.key)})},ju),Cu=(n(Uu,Su=ku),Uu.prototype.matches=function(e){return!this.keys.some(function(t){return t.isEqual(e.key)})},Uu);function Uu(t,e){var n=this;return(n=Su.call(this,t,"not-in",e)||this).keys=Mu(0,e),n}function ju(t,e){var n=this;return(n=Pu.call(this,t,"in",e)||this).keys=Mu(0,e),n}function xu(t,e,n){var r=this;return(r=_u.call(this,t,e,n)||this).key=ci.it(n.referenceValue),r}function Mu(t,e){return((null===(e=e.arrayValue)||void 0===e?void 0:e.values)||[]).map(function(t){return ci.it(t.referenceValue)})}var qu,Fu,Gu,Bu,Wu=(n(Ju,Bu=ku),Ju.prototype.matches=function(t){t=t.field(this.field);return _o(t)&&Io(t.arrayValue,this.value)},Ju),zu=(n(Qu,Gu=ku),Qu.prototype.matches=function(t){t=t.field(this.field);return null!==t&&Io(this.value.arrayValue,t)},Qu),Hu=(n($u,Fu=ku),$u.prototype.matches=function(t){if(Io(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;t=t.field(this.field);return null!==t&&!Io(this.value.arrayValue,t)},$u),Xu=(n(Ku,qu=ku),Ku.prototype.matches=function(t){var e=this,t=t.field(this.field);return!(!_o(t)||!t.arrayValue.values)&&t.arrayValue.values.some(function(t){return Io(e.value.arrayValue,t)})},Ku),Yu=function(t,e){this.position=t,this.before=e};function Ku(t,e){return qu.call(this,t,"array-contains-any",e)||this}function $u(t,e){return Fu.call(this,t,"not-in",e)||this}function Qu(t,e){return Gu.call(this,t,"in",e)||this}function Ju(t,e){return Bu.call(this,t,"array-contains",e)||this}function Zu(t){return(t.before?"b":"a")+":"+t.position.map(Oo).join(",")}function ta(t,e,n){for(var r=0,i=0;i<t.position.length;i++){var o=e[i],s=t.position[i],r=o.field.tt()?ci.k(ci.it(s.referenceValue),n.key):Ao(s,n.field(o.field));if("desc"===o.dir&&(r*=-1),0!==r)break}return t.before?r<=0:r<0}function ea(t,e){if(null===t)return null===e;if(null===e)return!1;if(t.before!==e.before||t.position.length!==e.position.length)return!1;for(var n=0;n<t.position.length;n++)if(!To(t.position[n],e.position[n]))return!1;return!0}var na=function(t,e){void 0===e&&(e="asc"),this.field=t,this.dir=e};var ra=(la.prototype.Ve=function(t,e,n){for(var r=n.pe,i=0;i<this.mutations.length;i++){var o=this.mutations[i];o.key.isEqual(t)&&(e=_s(o,e,r[i]))}return e},la.prototype.ge=function(t,e){for(var n=0,r=this.baseMutations;n<r.length;n++){var i=r[n];i.key.isEqual(t)&&(e=Ls(i,e,e,this.ye))}for(var o=e,s=0,u=this.mutations;s<u.length;s++){var a=u[s];a.key.isEqual(t)&&(e=Ls(a,e,o,this.ye))}return e},la.prototype.ve=function(n){var r=this,i=n;return this.mutations.forEach(function(t){var e=r.ge(t.key,n.get(t.key));e&&(i=i.Tt(t.key,e))}),i},la.prototype.keys=function(){return this.mutations.reduce(function(t,e){return t.add(e.key)},Xi())},la.prototype.isEqual=function(t){return this.batchId===t.batchId&&ni(this.mutations,t.mutations,Vs)&&ni(this.baseMutations,t.baseMutations,Vs)},la),ia=(ca.from=function(t,e,n){Mr(t.mutations.length===n.length);for(var r=zi,i=t.mutations,o=0;o<i.length;o++)r=r.Tt(i[o].key,n[o].version);return new ca(t,e,n,r)},ca),oa=(ha.prototype.get=function(t){var e=this.Se(t),e=this.Ne[e];if(void 0!==e)for(var n=0,r=e;n<r.length;n++){var i=r[n],o=i[0],i=i[1];if(this.De(o,t))return i}},ha.prototype.has=function(t){return void 0!==this.get(t)},ha.prototype.set=function(t,e){var n=this.Se(t),r=this.Ne[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(this.De(r[i][0],t))return void(r[i]=[t,e]);r.push([t,e])}else this.Ne[n]=[[t,e]]},ha.prototype.delete=function(t){var e=this.Se(t),n=this.Ne[e];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.De(n[r][0],t))return 1===n.length?delete this.Ne[e]:n.splice(r,1),!0;return!1},ha.prototype.forEach=function(s){yo(this.Ne,function(t,e){for(var n=0,r=e;n<r.length;n++){var i=r[n],o=i[0],i=i[1];s(o,i)}})},ha.prototype.W=function(){return go(this.Ne)},ha),sa=(aa.prototype.catch=function(t){return this.next(void 0,t)},aa.prototype.next=function(r,i){var o=this;return this.$e&&xr(),this.$e=!0,this.Oe?this.error?this.Le(i,this.error):this.ke(r,this.result):new aa(function(e,n){o.xe=function(t){o.ke(r,t).next(e,n)},o.Fe=function(t){o.Le(i,t).next(e,n)}})},aa.prototype.Me=function(){var n=this;return new Promise(function(t,e){n.next(t,e)})},aa.prototype.Ue=function(t){try{var e=t();return e instanceof aa?e:aa.resolve(e)}catch(t){return aa.reject(t)}},aa.prototype.ke=function(t,e){return t?this.Ue(function(){return t(e)}):aa.resolve(e)},aa.prototype.Le=function(t,e){return t?this.Ue(function(){return t(e)}):aa.reject(e)},aa.resolve=function(n){return new aa(function(t,e){t(n)})},aa.reject=function(n){return new aa(function(t,e){e(n)})},aa.qe=function(t){return new aa(function(e,n){var r=0,i=0,o=!1;t.forEach(function(t){++r,t.next(function(){++i,o&&i===r&&e()},function(t){return n(t)})}),o=!0,i===r&&e()})},aa.Be=function(t){for(var n=aa.resolve(!1),e=0,r=t;e<r.length;e++)!function(e){n=n.next(function(t){return t?aa.resolve(t):e()})}(r[e]);return n},aa.forEach=function(t,n){var r=this,i=[];return t.forEach(function(t,e){i.push(n.call(r,t,e))}),this.qe(i)},aa),ua=function(){var n=this;this.promise=new Promise(function(t,e){n.resolve=t,n.reject=e})};function aa(t){var e=this;this.xe=null,this.Fe=null,this.result=void 0,this.error=void 0,this.Oe=!1,this.$e=!1,t(function(t){e.Oe=!0,e.result=t,e.xe&&e.xe(t)},function(t){e.Oe=!0,e.error=t,e.Fe&&e.Fe(t)})}function ha(t,e){this.Se=t,this.De=e,this.Ne={}}function ca(t,e,n,r){this.batch=t,this.be=e,this.pe=n,this.Ce=r}function la(t,e,n,r){this.batchId=t,this.ye=e,this.baseMutations=n,this.mutations=r}function fa(t){return new xo(t,!0)}function pa(i){return function(){if("object"==typeof i&&null!==i)for(var t=i,e=0,n=["next","error","complete"];e<n.length;e++){var r=n[e];if(r in t&&"function"==typeof t[r])return 1}}()}var da=(wa.prototype.Ge=function(e,n){var r=this;return this.je.Ke(e,n).next(function(t){return r.ze(e,n,t)})},wa.prototype.ze=function(t,r,i){return this.Qe.He(t,r).next(function(t){for(var e=0,n=i;e<n.length;e++)t=n[e].ge(r,t);return t})},wa.prototype.Ye=function(t,e,i){var o=Fi;return e.forEach(function(t,e){for(var n=0,r=i;n<r.length;n++)e=r[n].ge(t,e);o=o.Tt(t,e)}),o},wa.prototype.Je=function(e,t){var n=this;return this.Qe.getEntries(e,t).next(function(t){return n.Xe(e,t)})},wa.prototype.Xe=function(e,r){var i=this;return this.je.Ze(e,r).next(function(t){var t=i.Ye(e,r,t),n=Fi;return t.forEach(function(t,e){e=e||new uu(t,si.min()),n=n.Tt(t,e)}),n})},wa.prototype.ts=function(t,e,n){return r=e,ci.ot(r.path)&&null===r.collectionGroup&&0===r.filters.length?this.ns(t,e.path):mu(e)?this.es(t,e,n):this.ss(t,e,n);var r},wa.prototype.ns=function(t,e){return this.Ge(t,new ci(e)).next(function(t){var e=Wi;return t instanceof su&&(e=e.Tt(t.key,t)),e})},wa.prototype.es=function(n,r,i){var o=this,s=r.collectionGroup,u=Wi;return this.We.rs(n,s).next(function(t){return sa.forEach(t,function(t){var e,e=(e=r,t=t.child(s),new hu(t,null,e.me.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt));return o.ss(n,e,i).next(function(t){t.forEach(function(t,e){u=u.Tt(t,e)})})}).next(function(){return u})})},wa.prototype.ss=function(e,n,t){var h,c,r=this;return this.Qe.ts(e,n,t).next(function(t){return h=t,r.je.os(e,n)}).next(function(t){return c=t,r.us(e,c,h).next(function(t){h=t;for(var e=0,n=c;e<n.length;e++)for(var r=n[e],i=0,o=r.mutations;i<o.length;i++){var s=o[i],u=s.key,a=h.get(u),a=Ls(s,a,a,r.ye);h=a instanceof su?h.Tt(u,a):h.remove(u)}})}).next(function(){return h.forEach(function(t,e){Nu(n,e)||(h=h.remove(t))}),h})},wa.prototype.us=function(t,e,n){for(var r=Xi(),i=0,o=e;i<o.length;i++)for(var s=0,u=o[i].mutations;s<u.length;s++){var a=u[s];a instanceof Ms&&null===n.get(a.key)&&(r=r.add(a.key))}var h=n;return this.Qe.getEntries(t,r).next(function(t){return t.forEach(function(t,e){null!==e&&e instanceof su&&(h=h.Tt(t,e))}),h})},wa),va=(ma.ls=function(t,e){for(var n=Xi(),r=Xi(),i=0,o=e.docChanges;i<o.length;i++){var s=o[i];switch(s.type){case 0:n=n.add(s.doc.key);break;case 1:r=r.add(s.doc.key)}}return new ma(t,e.fromCache,n,r)},ma),ya=(ga.prototype.fs=function(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue},ga.prototype.next=function(){var t=++this.previousValue;return this.ds&&this.ds(t),t},ga);function ga(t,e){var n=this;this.previousValue=t,e&&(e._s=function(t){return n.fs(t)},this.ds=function(t){return e.ws(t)})}function ma(t,e,n,r){this.targetId=t,this.fromCache=e,this.cs=n,this.hs=r}function wa(t,e,n){this.Qe=t,this.je=e,this.We=n}ya.Es=-1;var ba=(Ea.prototype.reset=function(){this.ys=0},Ea.prototype.gs=function(){this.ys=this.Ps},Ea.prototype.vs=function(t){var e=this;this.cancel();var n=Math.floor(this.ys+this.bs()),r=Math.max(0,Date.now()-this.ps),i=Math.max(0,n-r);0<i&&Vr("ExponentialBackoff","Backing off for "+i+" ms (base delay: "+this.ys+" ms, delay with jitter: "+n+" ms, last attempt: "+r+" ms ago)"),this.Vs=this.Ts.Cs(this.As,i,function(){return e.ps=Date.now(),t()}),this.ys*=this.Rs,this.ys<this.Is&&(this.ys=this.Is),this.ys>this.Ps&&(this.ys=this.Ps)},Ea.prototype.Ss=function(){null!==this.Vs&&(this.Vs.Ds(),this.Vs=null)},Ea.prototype.cancel=function(){null!==this.Vs&&(this.Vs.cancel(),this.Vs=null)},Ea.prototype.bs=function(){return(Math.random()-.5)*this.ys},Ea);function Ea(t,e,n,r,i){void 0===n&&(n=1e3),void 0===r&&(r=1.5),void 0===i&&(i=6e4),this.Ts=t,this.As=e,this.Is=n,this.Rs=r,this.Ps=i,this.ys=0,this.Vs=null,this.ps=Date.now(),this.reset()}function Ta(t){return"IndexedDbTransactionError"===t.name}function Ia(){return"undefined"!=typeof document?document:null}var Aa=(Ra.$s=function(t,e,n,r,i){i=new Ra(t,e,Date.now()+n,r,i);return i.start(n),i},Ra.prototype.start=function(t){var e=this;this.Ls=setTimeout(function(){return e.ks()},t)},Ra.prototype.Ds=function(){return this.ks()},Ra.prototype.cancel=function(t){null!==this.Ls&&(this.clearTimeout(),this.Os.reject(new Br(Gr.CANCELLED,"Operation cancelled"+(t?": "+t:""))))},Ra.prototype.ks=function(){var e=this;this.Ns.Ms(function(){return null!==e.Ls?(e.clearTimeout(),e.op().then(function(t){return e.Os.resolve(t)})):Promise.resolve()})},Ra.prototype.clearTimeout=function(){null!==this.Ls&&(this.Fs(this),clearTimeout(this.Ls),this.Ls=null)},Ra),Na=(Object.defineProperty(Oa.prototype,"Hs",{get:function(){return this.Bs},enumerable:!1,configurable:!0}),Oa.prototype.Ms=function(t){this.enqueue(t)},Oa.prototype.Ys=function(t){this.Js(),this.Xs(t)},Oa.prototype.Zs=function(){var t;this.Bs||(this.Bs=!0,(t=Ia())&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.zs))},Oa.prototype.enqueue=function(t){return this.Js(),this.Bs?new Promise(function(t){}):this.Xs(t)},Oa.prototype.ti=function(t){var e=this;this.Ms(function(){return e.qs.push(t),e.ni()})},Oa.prototype.ni=function(){return v(this,void 0,void 0,function(){var e,n=this;return y(this,function(t){switch(t.label){case 0:if(0===this.qs.length)return[3,5];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,this.qs[0]()];case 2:return t.sent(),this.qs.shift(),this.Ks.reset(),[3,4];case 3:if(!Ta(e=t.sent()))throw e;return Vr("AsyncQueue","Operation failed with retryable error: "+e),[3,4];case 4:0<this.qs.length&&this.Ks.vs(function(){return n.ni()}),t.label=5;case 5:return[2]}})})},Oa.prototype.Xs=function(t){var r=this,e=this.Us.then(function(){return r.Ws=!0,t().catch(function(t){throw r.js=t,r.Ws=!1,Cr("INTERNAL UNHANDLED ERROR: ",(n=(e=t).message||"",e.stack&&(n=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),n)),t;var e,n}).then(function(t){return r.Ws=!1,t})});return this.Us=e},Oa.prototype.Cs=function(t,e,n){var r=this;this.Js(),-1<this.Gs.indexOf(t)&&(e=0);n=Aa.$s(this,t,e,n,function(t){return r.ei(t)});return this.Qs.push(n),n},Oa.prototype.Js=function(){this.js&&xr()},Oa.prototype.si=function(){},Oa.prototype.ii=function(){return v(this,void 0,void 0,function(){var e;return y(this,function(t){switch(t.label){case 0:return[4,e=this.Us];case 1:t.sent(),t.label=2;case 2:if(e!==this.Us)return[3,0];t.label=3;case 3:return[2]}})})},Oa.prototype.ri=function(t){for(var e=0,n=this.Qs;e<n.length;e++)if(n[e].As===t)return!0;return!1},Oa.prototype.oi=function(r){var i=this;return this.ii().then(function(){i.Qs.sort(function(t,e){return t.xs-e.xs});for(var t=0,e=i.Qs;t<e.length;t++){var n=e[t];if(n.Ds(),"all"!==r&&n.As===r)break}return i.ii()})},Oa.prototype.ui=function(t){this.Gs.push(t)},Oa.prototype.ei=function(t){t=this.Qs.indexOf(t);this.Qs.splice(t,1)},Oa);function Oa(){var e=this;this.Us=Promise.resolve(),this.qs=[],this.Bs=!1,this.Qs=[],this.js=null,this.Ws=!1,this.Gs=[],this.Ks=new ba(this,"async_queue_retry"),this.zs=function(){var t=Ia();t&&Vr("AsyncQueue","Visibility state changed to "+t.visibilityState),e.Ks.Ss()};var t=Ia();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this.zs)}function Ra(t,e,n,r,i){this.Ns=t,this.As=e,this.xs=n,this.op=r,this.Fs=i,this.Os=new ua,this.then=this.Os.promise.then.bind(this.Os.promise),this.Os.promise.catch(function(t){})}function ka(t,e){if(Cr("AsyncQueue",e+": "+t),Ta(t))return new Br(Gr.UNAVAILABLE,e+": "+t);throw t}function Da(t){this.ci=t}var Sa=(ja.prototype.hi=function(t,e){return this.ai.add(e),sa.resolve()},ja.prototype.rs=function(t,e){return sa.resolve(this.ai.getEntries(e))},ja),Pa=(Ua.prototype.add=function(t){var e=t.j(),n=t.q(),r=this.index[e]||new Mi(ui.k),t=!r.has(n);return this.index[e]=r.add(n),t},Ua.prototype.has=function(t){var e=t.j(),t=t.q(),e=this.index[e];return e&&e.has(t)},Ua.prototype.getEntries=function(t){return(this.index[t]||new Mi(ui.k)).H()},Ua),_a=(Ca.prototype.next=function(){return this.li+=2,this.li},Ca._i=function(){return new Ca(0)},Ca.fi=function(){return new Ca(-1)},Ca),La=(Va.prototype.bi=function(e){var n=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",function(t){return e.Ci(t,n.wi)})},Va);function Va(t,e,n,r){this.persistence=t,this.di=e,this.serializer=r,this.wi=new _i(ei),this.Ei=new oa(Ei,Ti),this.mi=si.min(),this.je=t.Ti(n),this.Ai=t.Ii(),this.Ri=t.Pi(),this.yi=new da(this.Ai,this.je,this.persistence.Vi()),this.pi=t.gi(),this.di.vi(this.yi)}function Ca(t){this.li=t}function Ua(){this.index={}}function ja(){this.ai=new Pa}function xa(i,o){return v(this,void 0,void 0,function(){var e,n,m,r;return y(this,function(t){switch(t.label){case 0:return n=(e=i).je,m=e.yi,[4,e.persistence.runTransaction("Handle user change","readonly",function(y){var g;return e.je.Si(y).next(function(t){return g=t,n=e.persistence.Ti(o),m=new da(e.Ai,n,e.persistence.Vi()),n.Si(y)}).next(function(t){for(var e=[],n=[],r=Xi(),i=0,o=g;i<o.length;i++){var s=o[i];e.push(s.batchId);for(var u=0,a=s.mutations;u<a.length;u++)var h=a[u],r=r.add(h.key)}for(var c=0,l=t;c<l.length;c++){var f=l[c];n.push(f.batchId);for(var p=0,d=f.mutations;p<d.length;p++){var v=d[p];r=r.add(v.key)}}return m.Je(y,r).next(function(t){return{Di:t,Ni:e,xi:n}})})})];case 1:return r=t.sent(),[2,(e.je=n,e.yi=m,e.di.vi(e.yi),r)]}})})}function Ma(t,c){var l=t;return l.persistence.runTransaction("Acknowledge batch","readwrite-primary",function(t){var e,r,i,o,s,n,u,a=c.batch.keys(),h=l.Ai.Fi({Oi:!0});return e=l,r=t,o=h,s=(i=c).batch,n=s.keys(),u=sa.resolve(),n.forEach(function(n){u=u.next(function(){return o.He(r,n)}).next(function(t){var e=t,t=i.Ce.get(n);Mr(null!==t),(!e||e.version.F(t)<0)&&(e=s.Ve(n,e,i))&&o.$i(e,i.be)})}),u.next(function(){return e.je.Li(r,s)}).next(function(){return h.apply(t)}).next(function(){return l.je.ki(t)}).next(function(){return l.yi.Je(t,a)})})}function qa(t){var e=t;return e.persistence.runTransaction("Get last remote snapshot version","readonly",function(t){return e.Ri.Mi(t)})}function Fa(t,o){var c=t,l=o.ft,f=c.wi;return c.persistence.runTransaction("Apply remote event","readwrite-primary",function(s){var t=c.Ai.Fi({Oi:!0});f=c.wi;var u=[];o.on.forEach(function(t,e){var n,r,i,o=f.get(e);o&&(u.push(c.Ri.Ui(s,t.wn,e).next(function(){return c.Ri.qi(s,t.fn,e)})),0<(i=t.resumeToken).ht()&&(n=o.wt(i,l).dt(s.Bi),f=f.Tt(e,n),r=o,i=t,Mr(0<(o=n).resumeToken.ht()),(0===r.resumeToken.ht()||3e8<=o.ft.O()-r.ft.O()||0<i.fn.size+i.dn.size+i.wn.size)&&u.push(c.Ri.Qi(s,n))))});var e,a,n,h,r,i=Fi;return o.cn.forEach(function(t,e){o.an.has(t)&&u.push(c.persistence.Wi.ji(s,t))}),u.push((e=s,a=t,n=o.cn,h=l,r=Xi(),n.forEach(function(t){return r=r.add(t)}),a.getEntries(e,r).next(function(i){var o=Fi;return n.forEach(function(t,e){var n=i.get(t),r=h;e instanceof uu&&e.version.isEqual(si.min())?(a.Gi(t,r),o=o.Tt(t,e)):null==n||0<e.version.F(n.version)||0===e.version.F(n.version)&&n.hasPendingWrites?(a.$i(e,r),o=o.Tt(t,e)):Vr("LocalStore","Ignoring outdated watch update for ",t,". Current version:",n.version," Watch version:",e.version)}),o}).next(function(t){i=t}))),l.isEqual(si.min())||(e=c.Ri.Mi(s).next(function(t){return c.Ri.Ki(s,s.Bi,l)}),u.push(e)),sa.qe(u).next(function(){return t.apply(s)}).next(function(){return c.yi.Xe(s,i)})}).then(function(t){return c.wi=f,t})}function Ga(i,o,s){return v(this,void 0,void 0,function(){var e,n,r;return y(this,function(t){switch(t.label){case 0:n=(e=i).wi.get(o),r=s?"readwrite":"readwrite-primary",t.label=1;case 1:return t.trys.push([1,4,,5]),s?[3,3]:[4,e.persistence.runTransaction("Release target",r,function(t){return e.persistence.Wi.removeTarget(t,n)})];case 2:t.sent(),t.label=3;case 3:return[3,5];case 4:if(!Ta(r=t.sent()))throw r;return Vr("LocalStore","Failed to update sequence numbers for target "+o+": "+r),[3,5];case 5:return e.wi=e.wi.remove(o),e.Ei.delete(n.target),[2]}})})}function Ba(t,o,s){var u=t,a=si.min(),h=Xi();return u.persistence.runTransaction("Execute query","readonly",function(e){return t=u,n=e,r=bu(o),(void 0!==(t=(i=t).Ei.get(r))?sa.resolve(i.wi.get(t)):i.Ri.Hi(n,r)).next(function(t){if(t)return a=t.lastLimboFreeSnapshotVersion,u.Ri.Yi(e,t.targetId).next(function(t){h=t})}).next(function(){return u.di.ts(e,o,s?a:si.min(),s?h:Xi())}).next(function(t){return{documents:t,Ji:h}});var t,n,r,i})}function Wa(e){return v(this,void 0,void 0,function(){return y(this,function(t){if(e.code!==Gr.FAILED_PRECONDITION||"The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab."!==e.message)throw e;return Vr("LocalStore","Unexpectedly lost primary lease"),[2]})})}function za(t,e,n,r,i){var o=this;this.jr=t,this.Wr=e,this.Ns=n,this.Gr={},this.Kr=[],this.zr=new Map,this.Hr=new Set,this.Yr=[],this.Jr=i,this.Jr.Xr(function(t){n.Ms(function(){return v(o,void 0,void 0,function(){return y(this,function(t){switch(t.label){case 0:return fh(this)?(Vr("RemoteStore","Restarting streams for network reachability change."),[4,function(n){return v(this,void 0,void 0,function(){var e;return y(this,function(t){switch(t.label){case 0:return(e=n).Hr.add(4),[4,oh(e)];case 1:return t.sent(),e.Zr.set("Unknown"),e.Hr.delete(4),[4,ih(e)];case 2:return t.sent(),[2]}})})}(this)]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})})}),this.Zr=new Ja(n,r)}var Ha,Xa,Ya,l=(rh.prototype.sr=function(){return 1===this.state||2===this.state||4===this.state},rh.prototype.ir=function(){return 2===this.state},rh.prototype.start=function(){3!==this.state?this.auth():this.rr()},rh.prototype.stop=function(){return v(this,void 0,void 0,function(){return y(this,function(t){switch(t.label){case 0:return this.sr()?[4,this.close(0)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})},rh.prototype.ur=function(){this.state=0,this.Ks.reset()},rh.prototype.cr=function(){var t=this;this.ir()&&null===this.er&&(this.er=this.Ts.Cs(this.Xi,6e4,function(){return t.ar()}))},rh.prototype.hr=function(t){this.lr(),this.stream.send(t)},rh.prototype.ar=function(){return v(this,void 0,void 0,function(){return y(this,function(t){return this.ir()?[2,this.close(0)]:[2]})})},rh.prototype.lr=function(){this.er&&(this.er.cancel(),this.er=null)},rh.prototype.close=function(e,n){return v(this,void 0,void 0,function(){return y(this,function(t){switch(t.label){case 0:return this.lr(),this.Ks.cancel(),this.nr++,3!==e?this.Ks.reset():n&&n.code===Gr.RESOURCE_EXHAUSTED?(Cr(n.toString()),Cr("Using maximum backoff delay to prevent overloading the backend."),this.Ks.gs()):n&&n.code===Gr.UNAUTHENTICATED&&this.tr.A(),null!==this.stream&&(this._r(),this.stream.close(),this.stream=null),this.state=e,[4,this.listener.dr(n)];case 1:return t.sent(),[2]}})})},rh.prototype._r=function(){},rh.prototype.auth=function(){var n=this;this.state=1;var t=this.wr(this.nr),e=this.nr;this.tr.getToken().then(function(t){n.nr===e&&n.Er(t)},function(e){t(function(){var t=new Br(Gr.UNKNOWN,"Fetching auth token failed: "+e.message);return n.mr(t)})})},rh.prototype.Er=function(t){var e=this,n=this.wr(this.nr);this.stream=this.Tr(t),this.stream.Ar(function(){n(function(){return e.state=2,e.listener.Ar()})}),this.stream.dr(function(t){n(function(){return e.mr(t)})}),this.stream.onMessage(function(t){n(function(){return e.onMessage(t)})})},rh.prototype.rr=function(){var t=this;this.state=4,this.Ks.vs(function(){return v(t,void 0,void 0,function(){return y(this,function(t){return this.state=0,this.start(),[2]})})})},rh.prototype.mr=function(t){return Vr("PersistentStream","close with error: "+t),this.stream=null,this.close(3,t)},rh.prototype.wr=function(e){var n=this;return function(t){n.Ts.Ms(function(){return n.nr===e?t():(Vr("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())})}},rh),Ka=(n(nh,Ya=l),nh.prototype.Tr=function(t){return this.Zi.Ir("Listen",t)},nh.prototype.onMessage=function(t){this.Ks.reset();var e=function(t,e){if("targetChange"in e){e.targetChange;var n="NO_CHANGE"===(i=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===i?1:"REMOVE"===i?2:"CURRENT"===i?3:"RESET"===i?4:xr(),r=e.targetChange.targetIds||[],i=(o=e.targetChange.resumeToken,t.ne?(Mr(void 0===o||"string"==typeof o),Ai.fromBase64String(o||"")):(Mr(void 0===o||o instanceof Uint8Array),Ai.fromUint8Array(o||new Uint8Array))),o=e.targetChange.cause,s=o&&(o=void 0===(s=o).code?Gr.UNKNOWN:Pi(s.code),new Br(o,s.message||"")),r=new no(n,r,i,s||null)}else if("documentChange"in e){e.documentChange;var u=e.documentChange;u.document,u.document.name,u.document.updateTime;var i=Yo(t,u.document.name),a=Wo(u.document.updateTime),s=new Qs({mapValue:{fields:u.document.fields}}),a=new su(i,a,s,{}),s=u.targetIds||[],u=u.removedTargetIds||[];r=new to(s,u,a.key,a)}else if("documentDelete"in e){e.documentDelete;u=e.documentDelete;u.document;var a=Yo(t,u.document),h=u.readTime?Wo(u.readTime):si.min(),h=new uu(a,h),u=u.removedTargetIds||[];r=new to([],u,h.key,h)}else if("documentRemove"in e){e.documentRemove;h=e.documentRemove;h.document;var c=Yo(t,h.document),h=h.removedTargetIds||[];r=new to([],h,c,null)}else{if(!("filter"in e))return xr();e.filter;c=e.filter;c.targetId;e=c.count||0,e=new Oi(e),c=c.targetId;r=new eo(c,e)}return r}(this.serializer,t),t=function(t){if(!("targetChange"in t))return si.min();t=t.targetChange;return(!t.targetIds||!t.targetIds.length)&&t.readTime?Wo(t.readTime):si.min()}(t);return this.listener.Rr(e,t)},nh.prototype.Pr=function(t){var e,n,r,i={};i.database=$o(this.serializer),i.addTarget=(e=this.serializer,(r=Ii(r=(n=t).target)?{documents:{documents:[Ko(e,r.path)]}}:{query:ts(e,r)}).targetId=n.targetId,0<n.resumeToken.ht()?r.resumeToken=Bo(e,n.resumeToken):0<n.ft.F(si.min())&&(r.readTime=Go(e,n.ft.$())),r);var o,t=(this.serializer,o=t,null==(t=function(){switch(o._t){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return xr()}}())?null:{"goog-listen-tags":t});t&&(i.labels=t),this.hr(i)},nh.prototype.yr=function(t){var e={};e.database=$o(this.serializer),e.removeTarget=t,this.hr(e)},nh),$a=(n(eh,Xa=l),Object.defineProperty(eh.prototype,"pr",{get:function(){return this.Vr},enumerable:!1,configurable:!0}),eh.prototype.start=function(){this.Vr=!1,this.lastStreamToken=void 0,Xa.prototype.start.call(this)},eh.prototype._r=function(){this.Vr&&this.gr([])},eh.prototype.Tr=function(t){return this.Zi.Ir("Write",t)},eh.prototype.onMessage=function(t){if(Mr(!!t.streamToken),this.lastStreamToken=t.streamToken,this.Vr){this.Ks.reset();var e=(n=t.writeResults,r=t.commitTime,n&&0<n.length?(Mr(void 0!==r),n.map(function(t){return function(t,e){var n=t.updateTime?Wo(t.updateTime):Wo(e);n.isEqual(si.min())&&(n=Wo(e));e=null;return t.transformResults&&0<t.transformResults.length&&(e=t.transformResults),new ks(n,e)}(t,r)})):[]),n=Wo(t.commitTime);return this.listener.vr(n,e)}var n,r;return Mr(!t.writeResults||0===t.writeResults.length),this.Vr=!0,this.listener.br()},eh.prototype.Cr=function(){var t={};t.database=$o(this.serializer),this.hr(t)},eh.prototype.gr=function(t){var e=this,t={streamToken:this.lastStreamToken,writes:t.map(function(t){return Zo(e.serializer,t)})};this.hr(t)},eh),Qa=(n(th,Ha=function(){}),th.prototype.Dr=function(){if(this.Sr)throw new Br(Gr.FAILED_PRECONDITION,"The client has already been terminated.")},th.prototype.Nr=function(e,n,r){var i=this;return this.Dr(),this.credentials.getToken().then(function(t){return i.Zi.Nr(e,n,r,t)}).catch(function(t){throw t.code===Gr.UNAUTHENTICATED&&i.credentials.A(),t})},th.prototype.Fr=function(e,n,r){var i=this;return this.Dr(),this.credentials.getToken().then(function(t){return i.Zi.Fr(e,n,r,t)}).catch(function(t){throw t.code===Gr.UNAUTHENTICATED&&i.credentials.A(),t})},th.prototype.terminate=function(){this.Sr=!1},th),Ja=(Za.prototype.Mr=function(){var t=this;0===this.$r&&(this.Ur("Unknown"),this.Lr=this.Ns.Cs("online_state_timeout",1e4,function(){return t.Lr=null,t.qr("Backend didn't respond within 10 seconds."),t.Ur("Offline"),Promise.resolve()}))},Za.prototype.Br=function(t){"Online"===this.state?this.Ur("Unknown"):(this.$r++,1<=this.$r&&(this.Qr(),this.qr("Connection failed 1 times. Most recent error: "+t.toString()),this.Ur("Offline")))},Za.prototype.set=function(t){this.Qr(),this.$r=0,"Online"===t&&(this.kr=!1),this.Ur(t)},Za.prototype.Ur=function(t){t!==this.state&&(this.state=t,this.Or(t))},Za.prototype.qr=function(t){t="Could not reach Cloud Firestore backend. "+t+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.kr?(Cr(t),this.kr=!1):Vr("OnlineStateTracker",t)},Za.prototype.Qr=function(){null!==this.Lr&&(this.Lr.cancel(),this.Lr=null)},Za);function Za(t,e){this.Ns=t,this.Or=e,this.state="Unknown",this.$r=0,this.Lr=null,this.kr=!0}function th(t,e,n){var r=this;return(r=Ha.call(this)||this).credentials=t,r.Zi=e,r.serializer=n,r.Sr=!1,r}function eh(t,e,n,r,i){var o=this;return(o=Xa.call(this,t,"write_stream_connection_backoff","write_stream_idle",e,n,i)||this).serializer=r,o.Vr=!1,o}function nh(t,e,n,r,i){var o=this;return(o=Ya.call(this,t,"listen_stream_connection_backoff","listen_stream_idle",e,n,i)||this).serializer=r,o}function rh(t,e,n,r,i,o){this.Ts=t,this.Xi=n,this.Zi=r,this.tr=i,this.listener=o,this.state=0,this.nr=0,this.er=null,this.stream=null,this.Ks=new ba(t,e)}function ih(r){return v(this,void 0,void 0,function(){var e,n;return y(this,function(t){switch(t.label){case 0:if(!fh(r))return[3,4];e=0,n=r.Yr,t.label=1;case 1:return e<n.length?[4,(0,n[e])(!0)]:[3,4];case 2:t.sent(),t.label=3;case 3:return e++,[3,1];case 4:return[2]}})})}function oh(r){return v(this,void 0,void 0,function(){var e,n;return y(this,function(t){switch(t.label){case 0:e=0,n=r.Yr,t.label=1;case 1:return e<n.length?[4,(0,n[e])(!1)]:[3,4];case 2:t.sent(),t.label=3;case 3:return e++,[3,1];case 4:return[2]}})})}function sh(t,e){t.zr.has(e.targetId)||(t.zr.set(e.targetId,e),lh(t)?ch(t):bh(t).ir()&&ah(t,e))}function uh(t,e){var n=t,t=bh(n);n.zr.delete(e),t.ir()&&hh(n,e),0===n.zr.size&&(t.ir()?t.cr():fh(n)&&n.Zr.set("Unknown"))}function ah(t,e){t.no.Dn(e.targetId),bh(t).Pr(e)}function hh(t,e){t.no.Dn(e),bh(t).yr(e)}function ch(e){e.no=new io({Zn:function(t){return e.Gr.Zn(t)},te:function(t){return e.zr.get(t)||null}}),bh(e).start(),e.Zr.Mr()}function lh(t){return fh(t)&&!bh(t).sr()&&0<t.zr.size}function fh(t){return 0===t.Hr.size}function ph(t){t.no=void 0}function dh(s,u,a){return v(this,void 0,void 0,function(){var n,o;return y(this,function(t){switch(t.label){case 0:if(s.Zr.set("Online"),!(u instanceof no&&2===u.state&&u.cause))return[3,6];t.label=1;case 1:return t.trys.push([1,3,,5]),[4,function(o,s){return v(this,void 0,void 0,function(){var e,n,r,i;return y(this,function(t){switch(t.label){case 0:e=s.cause,n=0,r=s.targetIds,t.label=1;case 1:return n<r.length?(i=r[n],o.zr.has(i)?[4,o.Gr.eo(i,e)]:[3,3]):[3,5];case 2:t.sent(),o.zr.delete(i),o.no.removeTarget(i),t.label=3;case 3:t.label=4;case 4:return n++,[3,1];case 5:return[2]}})})}(s,u)];case 2:return t.sent(),[3,5];case 3:return n=t.sent(),Vr("RemoteStore","Failed to remove targets %s: %s ",u.targetIds.join(","),n),[4,vh(s,n)];case 4:return t.sent(),[3,5];case 5:return[3,13];case 6:if(u instanceof to?s.no.Mn(u):u instanceof eo?s.no.Kn(u):s.no.Bn(u),a.isEqual(si.min()))return[3,13];t.label=7;case 7:return t.trys.push([7,11,,13]),[4,qa(s.jr)];case 8:return o=t.sent(),0<=a.F(o)?[4,(i=a,(e=(r=s).no.Yn(i)).on.forEach(function(t,e){var n;0<t.resumeToken.ht()&&((n=r.zr.get(e))&&r.zr.set(e,n.wt(t.resumeToken,i)))}),e.un.forEach(function(t){var e=r.zr.get(t);e&&(r.zr.set(t,e.wt(Ai.lt,e.ft)),hh(r,t),e=new ki(e.target,t,1,e.sequenceNumber),ah(r,e))}),r.Gr.so(e))]:[3,10];case 9:t.sent(),t.label=10;case 10:return[3,13];case 11:return Vr("RemoteStore","Failed to raise snapshot:",o=t.sent()),[4,vh(s,o)];case 12:return t.sent(),[3,13];case 13:return[2]}var r,i,e})})}function vh(n,r,i){return v(this,void 0,void 0,function(){var e=this;return y(this,function(t){switch(t.label){case 0:if(!Ta(r))throw r;return n.Hr.add(1),[4,oh(n)];case 1:return t.sent(),n.Zr.set("Offline"),i=i||function(){return qa(n.jr)},n.Ns.ti(function(){return v(e,void 0,void 0,function(){return y(this,function(t){switch(t.label){case 0:return Vr("RemoteStore","Retrying IndexedDB access"),[4,i()];case 1:return t.sent(),n.Hr.delete(1),[4,ih(n)];case 2:return t.sent(),[2]}})})}),[2]}})})}function yh(e,n){return n().catch(function(t){return vh(e,t,n)})}function gh(a){return v(this,void 0,void 0,function(){var i,o,s,u;return y(this,function(t){switch(t.label){case 0:o=Eh(i=a),s=0<i.Kr.length?i.Kr[i.Kr.length-1].batchId:-1,t.label=1;case 1:if(!(fh(i)&&i.Kr.length<10))return[3,7];t.label=2;case 2:return t.trys.push([2,4,,6]),[4,(e=i.jr,n=s,(r=e).persistence.runTransaction("Get next mutation batch","readonly",function(t){return void 0===n&&(n=-1),r.je.zi(t,n)}))];case 3:return null===(u=t.sent())?(0===i.Kr.length&&o.cr(),[3,7]):(s=u.batchId,function(t,e){t.Kr.push(e);t=Eh(t);t.ir()&&t.pr&&t.gr(e.mutations)}(i,u),[3,6]);case 4:return u=t.sent(),[4,vh(i,u)];case 5:return t.sent(),[3,6];case 6:return[3,1];case 7:return mh(i)&&wh(i),[2]}var e,n,r})})}function mh(t){return fh(t)&&!Eh(t).sr()&&0<t.Kr.length}function wh(t){Eh(t).start()}function bh(n){var t,e,r,i=this;return n.oo||(n.oo=(t=n.Wr,e=n.Ns,r={Ar:function(n){return v(this,void 0,void 0,function(){return y(this,function(t){return n.zr.forEach(function(t,e){ah(n,t)}),[2]})})}.bind(null,n),dr:function(e,n){return v(this,void 0,void 0,function(){return y(this,function(t){return ph(e),lh(e)?(e.Zr.Br(n),ch(e)):e.Zr.set("Unknown"),[2]})})}.bind(null,n),Rr:dh.bind(null,n)},t.Dr(),new Ka(e,t.Zi,t.credentials,t.serializer,r)),n.Yr.push(function(e){return v(i,void 0,void 0,function(){return y(this,function(t){switch(t.label){case 0:return e?(n.oo.ur(),lh(n)?ch(n):n.Zr.set("Unknown"),[3,3]):[3,1];case 1:return[4,n.oo.stop()];case 2:t.sent(),ph(n),t.label=3;case 3:return[2]}})})})),n.oo}function Eh(n){var t,e,r,i=this;return n.uo||(n.uo=(t=n.Wr,e=n.Ns,r={Ar:function(e){return v(this,void 0,void 0,function(){return y(this,function(t){return Eh(e).Cr(),[2]})})}.bind(null,n),dr:function(e,n){return v(this,void 0,void 0,function(){return y(this,function(t){switch(t.label){case 0:return n&&Eh(e).pr?[4,function(r,i){return v(this,void 0,void 0,function(){var e,n;return y(this,function(t){switch(t.label){case 0:return Si(n=i.code)&&n!==Gr.ABORTED?(e=r.Kr.shift(),Eh(r).ur(),[4,yh(r,function(){return r.Gr.ro(e.batchId,i)})]):[3,3];case 1:return t.sent(),[4,gh(r)];case 2:t.sent(),t.label=3;case 3:return[2]}})})}(e,n)]:[3,2];case 1:t.sent(),t.label=2;case 2:return mh(e)&&wh(e),[2]}})})}.bind(null,n),br:function(o){return v(this,void 0,void 0,function(){var e,n,r,i;return y(this,function(t){for(e=Eh(o),n=0,r=o.Kr;n<r.length;n++)i=r[n],e.gr(i.mutations);return[2]})})}.bind(null,n),vr:function(r,i,o){return v(this,void 0,void 0,function(){var e,n;return y(this,function(t){switch(t.label){case 0:return e=r.Kr.shift(),n=ia.from(e,i,o),[4,yh(r,function(){return r.Gr.io(n)})];case 1:return t.sent(),[4,gh(r)];case 2:return t.sent(),[2]}})})}.bind(null,n)},t.Dr(),new $a(e,t.Zi,t.credentials,t.serializer,r)),n.Yr.push(function(e){return v(i,void 0,void 0,function(){return y(this,function(t){switch(t.label){case 0:return e?(n.uo.ur(),[4,gh(n)]):[3,2];case 1:return t.sent(),[3,4];case 2:return[4,n.uo.stop()];case 3:t.sent(),0<n.Kr.length&&(Vr("RemoteStore","Stopping write stream with "+n.Kr.length+" pending writes"),n.Kr=[]),t.label=4;case 4:return[2]}})})})),n.uo}function Th(){this.queries=new oa(Iu,Tu),this.onlineState="Unknown",this.ao=new Set}var Ih=function(){this.co=void 0,this.listeners=[]};function Ah(s,u){return v(this,void 0,void 0,function(){var e,n,r,i,o;return y(this,function(t){switch(t.label){case 0:if(e=s,n=u.query,r=!1,(i=e.queries.get(n))||(r=!0,i=new Ih),!r)return[3,4];t.label=1;case 1:return t.trys.push([1,3,,4]),o=i,[4,e.ho(n)];case 2:return o.co=t.sent(),[3,4];case 3:return o=t.sent(),o=ka(o,"Initialization of query '"+Au(u.query)+"' failed"),[2,void u.onError(o)];case 4:return e.queries.set(n,i),i.listeners.push(u),u.lo(e.onlineState),i.co&&u._o(i.co)&&Oh(e),[2]}})})}function Nh(s,u){return v(this,void 0,void 0,function(){var e,n,r,i,o;return y(this,function(t){return e=s,n=u.query,r=!1,(i=e.queries.get(n))&&0<=(o=i.listeners.indexOf(u))&&(i.listeners.splice(o,1),r=0===i.listeners.length),r?[2,(e.queries.delete(n),e.fo(n))]:[2]})})}function Oh(t){t.ao.forEach(function(t){t.next()})}var Rh=(Wh.prototype._o=function(t){if(!this.options.includeMetadataChanges){for(var e=[],n=0,r=t.docChanges;n<r.length;n++){var i=r[n];3!==i.type&&e.push(i)}t=new Qi(t.query,t.docs,t.tn,e,t.nn,t.fromCache,t.en,!0)}var o=!1;return this.Eo?this.To(t)&&(this.wo.next(t),o=!0):this.Ao(t,this.onlineState)&&(this.Io(t),o=!0),this.mo=t,o},Wh.prototype.onError=function(t){this.wo.error(t)},Wh.prototype.lo=function(t){this.onlineState=t;var e=!1;return this.mo&&!this.Eo&&this.Ao(this.mo,t)&&(this.Io(this.mo),e=!0),e},Wh.prototype.Ao=function(t,e){if(!t.fromCache)return!0;var n="Offline"!==e;return!(this.options.Ro&&n||t.docs.W()&&"Offline"!==e)},Wh.prototype.To=function(t){if(0<t.docChanges.length)return!0;var e=this.mo&&this.mo.hasPendingWrites!==t.hasPendingWrites;return!(!t.en&&!e)&&!0===this.options.includeMetadataChanges},Wh.prototype.Io=function(t){t=Qi.rn(t.query,t.docs,t.nn,t.fromCache),this.Eo=!0,this.wo.next(t)},Wh),kh=(Bh.prototype.W=function(){return this.Po.W()},Bh.prototype.vo=function(t,e){e=new Dh(t,e);this.Po=this.Po.add(e),this.Vo=this.Vo.add(e)},Bh.prototype.bo=function(t,e){var n=this;t.forEach(function(t){return n.vo(t,e)})},Bh.prototype.Co=function(t,e){this.So(new Dh(t,e))},Bh.prototype.Do=function(t,e){var n=this;t.forEach(function(t){return n.Co(t,e)})},Bh.prototype.No=function(t){var e=this,n=new ci(new ui([])),r=new Dh(n,t),t=new Dh(n,t+1),i=[];return this.Vo.jt([r,t],function(t){e.So(t),i.push(t.key)}),i},Bh.prototype.xo=function(){var e=this;this.Po.forEach(function(t){return e.So(t)})},Bh.prototype.So=function(t){this.Po=this.Po.delete(t),this.Vo=this.Vo.delete(t)},Bh.prototype.Fo=function(t){var e=new ci(new ui([])),n=new Dh(e,t),t=new Dh(e,t+1),r=Xi();return this.Vo.jt([n,t],function(t){r=r.add(t.key)}),r},Bh.prototype.Oo=function(t){var e=new Dh(t,0),e=this.Po.Gt(e);return null!==e&&t.isEqual(e.key)},Bh),Dh=(Gh.yo=function(t,e){return ci.k(t.key,e.key)||ei(t.$o,e.$o)},Gh.po=function(t,e){return ei(t.$o,e.$o)||ci.k(t.key,e.key)},Gh),Sh=(Fh.prototype.Lo=function(t){this.activeTargetIds=this.activeTargetIds.add(t)},Fh.prototype.ko=function(t){this.activeTargetIds=this.activeTargetIds.delete(t)},Fh.prototype.Mo=function(){var t={activeTargetIds:this.activeTargetIds.H(),updateTimeMs:Date.now()};return JSON.stringify(t)},Fh),Ph=(qh.prototype.Bo=function(t){},qh.prototype.Qo=function(t,e,n){},qh.prototype.jo=function(t){return this.Uo.Lo(t),this.qo[t]||"not-current"},qh.prototype.Wo=function(t,e,n){this.qo[t]=e},qh.prototype.Go=function(t){this.Uo.ko(t)},qh.prototype.Ko=function(t){return this.Uo.activeTargetIds.has(t)},qh.prototype.zo=function(t){delete this.qo[t]},qh.prototype.Ho=function(){return this.Uo.activeTargetIds},qh.prototype.Yo=function(t){return this.Uo.activeTargetIds.has(t)},qh.prototype.start=function(){return this.Uo=new Sh,Promise.resolve()},qh.prototype.Jo=function(t,e,n){},qh.prototype.Xo=function(t){},qh.prototype.Zo=function(){},qh.prototype.ws=function(t){},qh.prototype.tu=function(){},qh),_h=function(t){this.key=t},Lh=function(t){this.key=t},Vh=(Object.defineProperty(Mh.prototype,"ou",{get:function(){return this.nu},enumerable:!1,configurable:!0}),Mh.prototype.uu=function(t,e){var s=this,u=e?e.cu:new $i,a=(e||this).ru,h=(e||this).nn,c=a,l=!1,f=du(this.query)&&a.size===this.query.limit?a.last():null,p=vu(this.query)&&a.size===this.query.limit?a.first():null;if(t.Pt(function(t,e){var n=a.get(t),r=(r=e instanceof su?e:null)&&(Nu(s.query,r)?r:null),i=!!n&&s.nn.has(n.key),o=!!r&&(r.ae||s.nn.has(r.key)&&r.hasCommittedMutations),e=!1;n&&r?n.data().isEqual(r.data())?i!==o&&(u.track({type:3,doc:r}),e=!0):s.au(n,r)||(u.track({type:2,doc:r}),e=!0,(f&&0<s.iu(r,f)||p&&s.iu(r,p)<0)&&(l=!0)):!n&&r?(u.track({type:0,doc:r}),e=!0):n&&!r&&(u.track({type:1,doc:n}),e=!0,(f||p)&&(l=!0)),e&&(h=r?(c=c.add(r),o?h.add(t):h.delete(t)):(c=c.delete(t),h.delete(t)))}),du(this.query)||vu(this.query))for(;c.size>this.query.limit;){var n=du(this.query)?c.last():c.first(),c=c.delete(n.key),h=h.delete(n.key);u.track({type:1,doc:n})}return{ru:c,cu:u,hu:l,nn:h}},Mh.prototype.au=function(t,e){return t.ae&&e.hasCommittedMutations&&!e.ae},Mh.prototype.lu=function(t,e,n){var o=this,r=this.ru;this.ru=t.ru,this.nn=t.nn;var i=t.cu.Zt();i.sort(function(t,e){return r=t.type,i=e.type,n(r)-n(i)||o.iu(t.doc,e.doc);function n(t){switch(t){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return xr()}}var r,i}),this._u(n);var s=e?this.fu():[],n=0===this.su.size&&this._n?1:0,e=n!==this.eu;return this.eu=n,0!==i.length||e?{snapshot:new Qi(this.query,t.ru,r,i,t.nn,0==n,e,!1),du:s}:{du:s}},Mh.prototype.lo=function(t){return this._n&&"Offline"===t?(this._n=!1,this.lu({ru:this.ru,cu:new $i,nn:this.nn,hu:!1},!1)):{du:[]}},Mh.prototype.wu=function(t){return!this.nu.has(t)&&!!this.ru.has(t)&&!this.ru.get(t).ae},Mh.prototype._u=function(t){var e=this;t&&(t.fn.forEach(function(t){return e.nu=e.nu.add(t)}),t.dn.forEach(function(t){}),t.wn.forEach(function(t){return e.nu=e.nu.delete(t)}),this._n=t._n)},Mh.prototype.fu=function(){var e=this;if(!this._n)return[];var n=this.su;this.su=Xi(),this.ru.forEach(function(t){e.wu(t.key)&&(e.su=e.su.add(t.key))});var r=[];return n.forEach(function(t){e.su.has(t)||r.push(new Lh(t))}),this.su.forEach(function(t){n.has(t)||r.push(new _h(t))}),r},Mh.prototype.Eu=function(t){this.nu=t.Ji,this.su=Xi();t=this.uu(t.documents);return this.lu(t,!0)},Mh.prototype.mu=function(){return Qi.rn(this.query,this.ru,this.nn,0===this.eu)},Mh),Ch=function(t,e,n){this.query=t,this.targetId=e,this.view=n},Uh=function(t){this.key=t,this.Tu=!1},jh=(Object.defineProperty(xh.prototype,"Fu",{get:function(){return!0===this.xu},enumerable:!1,configurable:!0}),xh);function xh(t,e,n,r,i,o){this.jr=t,this.Au=e,this.Iu=n,this.Ru=r,this.currentUser=i,this.Pu=o,this.yu={},this.Vu=new oa(Iu,Tu),this.pu=new Map,this.gu=[],this.vu=new _i(ci.k),this.bu=new Map,this.Cu=new kh,this.Su={},this.Du=new Map,this.Nu=_a.fi(),this.onlineState="Unknown",this.xu=void 0}function Mh(t,e){this.query=t,this.nu=e,this.eu=null,this._n=!1,this.su=Xi(),this.nn=Xi(),this.iu=Ou(t),this.ru=new Ki(this.iu)}function qh(){this.Uo=new Sh,this.qo={},this.Or=null,this._s=null}function Fh(){this.activeTargetIds=Yi}function Gh(t,e){this.key=t,this.$o=e}function Bh(){this.Po=new Mi(Dh.yo),this.Vo=new Mi(Dh.po)}function Wh(t,e,n){this.query=t,this.wo=e,this.Eo=!1,this.mo=null,this.onlineState="Unknown",this.options=n||{}}function zh(h,c){return v(this,void 0,void 0,function(){var n,o,s,u,a;return y(this,function(t){switch(t.label){case 0:return(e=h).Au.Gr.so=Xh.bind(null,e),e.Au.Gr.Zn=function(t,e){var n=t,t=n.bu.get(e);if(t&&t.Tu)return Xi().add(t.key);var r=Xi(),e=n.pu.get(e);if(!e)return r;for(var i=0,o=e;i<o.length;i++){var s=o[i],s=n.Vu.get(s);r=r.Kt(s.view.ou)}return r}.bind(null,e),e.Au.Gr.eo=function(o,s,u){return v(this,void 0,void 0,function(){var e,n,r,i;return y(this,function(t){switch(t.label){case 0:return(e=o).Ru.Wo(s,"rejected",u),i=e.bu.get(s),(n=i&&i.key)?(r=(r=new _i(ci.k)).Tt(n,new uu(n,si.min())),i=Xi().add(n),i=new Ji(si.min(),new Map,new Mi(ei),r,i),[4,Xh(e,i)]):[3,2];case 1:return t.sent(),e.vu=e.vu.remove(n),e.bu.delete(s),ec(e),[3,4];case 2:return[4,Ga(e.jr,s,!1).then(function(){return Jh(e,s,u)}).catch(Wa)];case 3:t.sent(),t.label=4;case 4:return[2]}})})}.bind(null,e),e.yu.Rr=function(t,e){for(var n=t,r=!1,i=0,o=e;i<o.length;i++){var s=o[i],u=s.query,u=n.queries.get(u);if(u){for(var a=0,h=u.listeners;a<h.length;a++)h[a]._o(s)&&(r=!0);u.co=s}}r&&Oh(n)}.bind(null,e.Iu),e.yu.Ou=function(t,e,n){var r=t;if(t=r.queries.get(e))for(var i=0,o=t.listeners;i<o.length;i++)o[i].onError(n);r.queries.delete(e)}.bind(null,e.Iu),(a=(n=e).Vu.get(c))?(o=a.targetId,n.Ru.jo(o),s=a.view.mu(),[3,4]):[3,1];case 1:return[4,(e=n.jr,r=bu(c),(i=e).persistence.runTransaction("Allocate target","readwrite",function(e){var n;return i.Ri.Hi(e,r).next(function(t){return t?(n=t,sa.resolve(n)):i.Ri.$u(e).next(function(t){return n=new ki(r,t,0,e.Bi),i.Ri.Lu(e,n).next(function(){return n})})})}).then(function(t){var e=i.wi.get(t.targetId);return(null===e||0<t.ft.F(e.ft))&&(i.wi=i.wi.Tt(t.targetId,t),i.Ei.set(r,t.targetId)),t}))];case 2:return u=t.sent(),a=n.Ru.jo(u.targetId),o=u.targetId,[4,function(i,o,s,u){return v(this,void 0,void 0,function(){var e,n,r;return y(this,function(t){switch(t.label){case 0:return i.ku=function(t,e,n){return function(r,i,o,s){return v(this,void 0,void 0,function(){var e,n;return y(this,function(t){switch(t.label){case 0:return(e=i.view.uu(o)).hu?[4,Ba(r.jr,i.query,!1).then(function(t){t=t.documents;return i.view.uu(t,e)})]:[3,2];case 1:e=t.sent(),t.label=2;case 2:return n=s&&s.on.get(i.targetId),n=i.view.lu(e,r.Fu,n),[2,(tc(r,i.targetId,n.du),n.snapshot)]}})})}(i,t,e,n)},[4,Ba(i.jr,o,!0)];case 1:return n=t.sent(),r=new Vh(o,n.Ji),e=r.uu(n.documents),n=Zi.ln(s,u&&"Offline"!==i.onlineState),n=r.lu(e,i.Fu,n),tc(i,s,n.du),r=new Ch(o,s,r),i.Vu.set(o,r),i.pu.has(s)?i.pu.get(s).push(o):i.pu.set(s,[o]),[2,n.snapshot]}})})}(n,c,o,"current"===a)];case 3:s=t.sent(),n.Fu&&sh(n.Au,u),t.label=4;case 4:return[2,s]}var r,i,e})})}function Hh(f,p,d){return v(this,void 0,void 0,function(){var s,u;return y(this,function(t){switch(t.label){case 0:(o=f).Au.Gr.io=function(i,o){return v(this,void 0,void 0,function(){var e,n,r;return y(this,function(t){switch(t.label){case 0:e=i,n=o.batch.batchId,t.label=1;case 1:return t.trys.push([1,4,,6]),[4,Ma(e.jr,o)];case 2:return r=t.sent(),Qh(e,n,null),$h(e,n),e.Ru.Qo(n,"acknowledged"),[4,nc(e,r)];case 3:return t.sent(),[3,6];case 4:return[4,Wa(t.sent())];case 5:return t.sent(),[3,6];case 6:return[2]}})})}.bind(null,o),o.Au.Gr.ro=function(s,u,a){return v(this,void 0,void 0,function(){var n,o;return y(this,function(t){switch(t.label){case 0:n=s,t.label=1;case 1:return t.trys.push([1,4,,6]),[4,(e=n.jr,r=u,(i=e).persistence.runTransaction("Reject batch","readwrite-primary",function(e){var n;return i.je.qu(e,r).next(function(t){return Mr(null!==t),n=t.keys(),i.je.Li(e,t)}).next(function(){return i.je.ki(e)}).next(function(){return i.yi.Je(e,n)})}))];case 2:return o=t.sent(),Qh(n,u,a),$h(n,u),n.Ru.Qo(u,"rejected",a),[4,nc(n,o)];case 3:return t.sent(),[3,6];case 4:return[4,Wa(t.sent())];case 5:return t.sent(),[3,6];case 6:return[2]}var e,r,i})})}.bind(null,o),u=o,t.label=1;case 1:return t.trys.push([1,5,,6]),[4,(r=u.jr,a=p,c=r,l=oi.now(),i=a.reduce(function(t,e){return t.add(e.key)},Xi()),c.persistence.runTransaction("Locally write mutations","readwrite",function(u){return c.yi.Je(u,i).next(function(t){h=t;for(var s,e=[],n=0,r=a;n<r.length;n++){var i=r[n],o=(s=i,o=h.get(i.key),s instanceof Ws?function(t){for(var e=null,n=0,r=s.fieldTransforms;n<r.length;n++){var i=r[n],o=t instanceof su?t.field(i.field):void 0,o=as(i.transform,o||null);null!=o&&(e=(null==e?new Js:e).set(i.field,o))}return e?e.he():null}(o):null);null!=o&&e.push(new Ms(i.key,o,function s(t){var u=[];return yo(t.fields||{},function(t,e){var n=new hi([t]);if(Co(e))if(0===(e=s(e.mapValue).fields).length)u.push(n);else for(var r=0,i=e;r<i.length;r++){var o=i[r];u.push(n.child(o))}else u.push(n)}),new Os(u)}(o.proto.mapValue),Ds.exists(!0)))}return c.je.Mu(u,l,e,a)})}).then(function(t){var e=t.ve(h);return{batchId:t.batchId,Uu:e}}))];case 2:return s=t.sent(),u.Ru.Bo(s.batchId),e=u,n=s.batchId,o=d,r=(r=(r=e.Su[e.currentUser.h()])||new _i(ei)).Tt(n,o),e.Su[e.currentUser.h()]=r,[4,nc(u,s.Uu)];case 3:return t.sent(),[4,gh(u.Au)];case 4:return t.sent(),[3,6];case 5:return u=t.sent(),u=ka(u,"Failed to persist write"),d.reject(u),[3,6];case 6:return[2]}var e,n,r,a,h,c,l,i,o})})}function Xh(r,i){return v(this,void 0,void 0,function(){var n,e;return y(this,function(t){switch(t.label){case 0:n=r,t.label=1;case 1:return t.trys.push([1,4,,6]),[4,Fa(n.jr,i)];case 2:return e=t.sent(),i.on.forEach(function(t,e){e=n.bu.get(e);e&&(Mr(t.fn.size+t.dn.size+t.wn.size<=1),0<t.fn.size?e.Tu=!0:0<t.dn.size?Mr(e.Tu):0<t.wn.size&&(Mr(e.Tu),e.Tu=!1))}),[4,nc(n,e,i)];case 3:return t.sent(),[3,6];case 4:return[4,Wa(t.sent())];case 5:return t.sent(),[3,6];case 6:return[2]}})})}function Yh(t,n,e){var r,t=t;(t.Fu&&0===e||!t.Fu&&1===e)&&(r=[],t.Vu.forEach(function(t,e){e=e.view.lo(n);e.snapshot&&r.push(e.snapshot)}),function(t,i){t.onlineState=i;var o=!1;t.queries.forEach(function(t,e){for(var n=0,r=e.listeners;n<r.length;n++)r[n].lo(i)&&(o=!0)}),o&&Oh(t)}(t.Iu,n),r.length&&t.yu.Rr(r),t.onlineState=n,t.Fu&&t.Ru.Xo(n))}function Kh(o,s){return v(this,void 0,void 0,function(){var n,r,i;return y(this,function(t){switch(t.label){case 0:fh((n=o).Au)||Vr("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),t.label=1;case 1:return t.trys.push([1,3,,4]),[4,(e=n.jr).persistence.runTransaction("Get highest unacknowledged batch id","readonly",function(t){return e.je.Bu(t)})];case 2:return-1===(r=t.sent())?[2,void s.resolve()]:((i=n.Du.get(r)||[]).push(s),n.Du.set(r,i),[3,4]);case 3:return i=t.sent(),i=ka(i,"Initialization of waitForPendingWrites() operation failed"),s.reject(i),[3,4];case 4:return[2]}var e})})}function $h(t,e){(t.Du.get(e)||[]).forEach(function(t){t.resolve()}),t.Du.delete(e)}function Qh(t,e,n){var r=t,i=r.Su[r.currentUser.h()];i&&((t=i.get(e))&&(n?t.reject(n):t.resolve(),i=i.remove(e)),r.Su[r.currentUser.h()]=i)}function Jh(e,t,n){void 0===n&&(n=null),e.Ru.Go(t);for(var r=0,i=e.pu.get(t);r<i.length;r++){var o=i[r];e.Vu.delete(o),n&&e.yu.Ou(o,n)}e.pu.delete(t),e.Fu&&e.Cu.No(t).forEach(function(t){e.Cu.Oo(t)||Zh(e,t)})}function Zh(t,e){var n=t.vu.get(e);null!==n&&(uh(t.Au,n),t.vu=t.vu.remove(e),t.bu.delete(n),ec(t))}function tc(t,e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];o instanceof _h?(t.Cu.vo(o.key,e),function(t,e){e=e.key;t.vu.get(e)||(Vr("SyncEngine","New document in limbo: "+e),t.gu.push(e),ec(t))}(t,o)):o instanceof Lh?(Vr("SyncEngine","Document no longer in limbo: "+o.key),t.Cu.Co(o.key,e),t.Cu.Oo(o.key)||Zh(t,o.key)):xr()}}function ec(t){for(;0<t.gu.length&&t.vu.size<t.Pu;){var e=t.gu.shift(),n=t.Nu.next();t.bu.set(n,new Uh(e)),t.vu=t.vu.Tt(e,n),sh(t.Au,new ki(bu(pu(e.path)),n,2,ya.Es))}}function nc(e,s,u){return v(this,void 0,void 0,function(){var n,r,i,o;return y(this,function(t){switch(t.label){case 0:return r=[],i=[],o=[],(n=e).Vu.W()?[3,3]:(n.Vu.forEach(function(t,e){o.push(n.ku(e,s,u).then(function(t){t&&(n.Fu&&n.Ru.Wo(e.targetId,t.fromCache?"not-current":"current"),r.push(t),t=va.ls(e.targetId,t),i.push(t))}))}),[4,Promise.all(o)]);case 1:return t.sent(),n.yu.Rr(r),[4,function(a,h){return v(this,void 0,void 0,function(){var r,e,n,i,o,s,u;return y(this,function(t){switch(t.label){case 0:r=a,t.label=1;case 1:return t.trys.push([1,3,,4]),[4,r.persistence.runTransaction("notifyLocalViewChanges","readwrite",function(n){return sa.forEach(h,function(e){return sa.forEach(e.cs,function(t){return r.persistence.Wi.vo(n,e.targetId,t)}).next(function(){return sa.forEach(e.hs,function(t){return r.persistence.Wi.Co(n,e.targetId,t)})})})})];case 2:return t.sent(),[3,4];case 3:if(!Ta(e=t.sent()))throw e;return Vr("LocalStore","Failed to update sequence numbers: "+e),[3,4];case 4:for(n=0,i=h;n<i.length;n++)u=i[n],o=u.targetId,u.fromCache||(s=r.wi.get(o),u=s.ft,u=s.Et(u),r.wi=r.wi.Tt(o,u));return[2]}})})}(n.jr,i)];case 2:t.sent(),t.label=3;case 3:return[2]}})})}function rc(i,o){return v(this,void 0,void 0,function(){var n,r;return y(this,function(t){switch(t.label){case 0:return(n=i).currentUser.isEqual(o)?[3,3]:(Vr("SyncEngine","User change. New user:",o.h()),[4,xa(n.jr,o)]);case 1:return r=t.sent(),n.currentUser=o,(e=n).Du.forEach(function(t){t.forEach(function(t){t.reject(new Br(Gr.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),e.Du.clear(),n.Ru.Jo(o,r.Ni,r.xi),[4,nc(n,r.Di)];case 2:t.sent(),t.label=3;case 3:return[2]}var e})})}var ic,oc,sc,uc=(Bc.prototype.vi=function(t){this.Qu=t},Bc.prototype.ts=function(e,r,i,o){var s=this;return 0===r.filters.length&&null===r.limit&&null==r.startAt&&null==r.endAt&&(0===r.me.length||1===r.me.length&&r.me[0].field.tt())||i.isEqual(si.min())?this.ju(e,r):this.Qu.Je(e,o).next(function(t){var n=s.Wu(r,t);return(du(r)||vu(r))&&s.hu(r.limitType,n,o,i)?s.ju(e,r):(Lr()<=u.DEBUG&&Vr("IndexFreeQueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Au(r)),s.Qu.ts(e,r,i).next(function(e){return n.forEach(function(t){e=e.Tt(t.key,t)}),e}))})},Bc.prototype.Wu=function(n,t){var r=new Mi(Ou(n));return t.forEach(function(t,e){e instanceof su&&Nu(n,e)&&(r=r.add(e))}),r},Bc.prototype.hu=function(t,e,n,r){if(n.size!==e.size)return!0;e="F"===t?e.last():e.first();return!!e&&(e.hasPendingWrites||0<e.version.F(r))},Bc.prototype.ju=function(t,e){return Lr()<=u.DEBUG&&Vr("IndexFreeQueryEngine","Using full collection scan to execute query:",Au(e)),this.Qu.ts(t,e,si.min())},Bc),ac=(Gc.prototype.zu=function(t){return sa.resolve(0===this.je.length)},Gc.prototype.Mu=function(t,e,n,r){var i=this.Gu;this.Gu++,0<this.je.length&&this.je[this.je.length-1];n=new ra(i,e,n,r);this.je.push(n);for(var o=0,s=r;o<s.length;o++){var u=s[o];this.Ku=this.Ku.add(new Dh(u.key,i)),this.We.hi(t,u.key.path.q())}return sa.resolve(n)},Gc.prototype.qu=function(t,e){return sa.resolve(this.Hu(e))},Gc.prototype.zi=function(t,e){e+=1,e=this.Yu(e),e=e<0?0:e;return sa.resolve(this.je.length>e?this.je[e]:null)},Gc.prototype.Bu=function(){return sa.resolve(0===this.je.length?-1:this.Gu-1)},Gc.prototype.Si=function(t){return sa.resolve(this.je.slice())},Gc.prototype.Ke=function(t,e){var n=this,r=new Dh(e,0),e=new Dh(e,Number.POSITIVE_INFINITY),i=[];return this.Ku.jt([r,e],function(t){t=n.Hu(t.$o);i.push(t)}),sa.resolve(i)},Gc.prototype.Ze=function(t,e){var n=this,r=new Mi(ei);return e.forEach(function(t){var e=new Dh(t,0),t=new Dh(t,Number.POSITIVE_INFINITY);n.Ku.jt([e,t],function(t){r=r.add(t.$o)})}),sa.resolve(this.Ju(r))},Gc.prototype.os=function(t,e){var n=e.path,r=n.length+1,e=n;ci.ot(e)||(e=e.child(""));var e=new Dh(new ci(e),0),i=new Mi(ei);return this.Ku.Wt(function(t){var e=t.key.path;return!!n.G(e)&&(e.length===r&&(i=i.add(t.$o)),!0)},e),sa.resolve(this.Ju(i))},Gc.prototype.Ju=function(t){var e=this,n=[];return t.forEach(function(t){t=e.Hu(t);null!==t&&n.push(t)}),n},Gc.prototype.Li=function(n,r){var i=this;Mr(0===this.Xu(r.batchId,"removed")),this.je.shift();var o=this.Ku;return sa.forEach(r.mutations,function(t){var e=new Dh(t.key,r.batchId);return o=o.delete(e),i.Wi.Zu(n,t.key)}).next(function(){i.Ku=o})},Gc.prototype.tc=function(t){},Gc.prototype.Oo=function(t,e){var n=new Dh(e,0),n=this.Ku.Gt(n);return sa.resolve(e.isEqual(n&&n.key))},Gc.prototype.ki=function(t){return this.je.length,sa.resolve()},Gc.prototype.Xu=function(t,e){return this.Yu(t)},Gc.prototype.Yu=function(t){return 0===this.je.length?0:t-this.je[0].batchId},Gc.prototype.Hu=function(t){t=this.Yu(t);return t<0||t>=this.je.length?null:this.je[t]},Gc),hc=(Fc.prototype.$i=function(t,e,n){var r=e.key,i=this.docs.get(r),o=i?i.size:0,i=this.nc(e);return this.docs=this.docs.Tt(r,{ec:e,size:i,readTime:n}),this.size+=i-o,this.We.hi(t,r.path.q())},Fc.prototype.Gi=function(t){var e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)},Fc.prototype.He=function(t,e){e=this.docs.get(e);return sa.resolve(e?e.ec:null)},Fc.prototype.getEntries=function(t,e){var n=this,r=Fi;return e.forEach(function(t){var e=n.docs.get(t);r=r.Tt(t,e?e.ec:null)}),sa.resolve(r)},Fc.prototype.ts=function(t,e,n){for(var r=Wi,i=new ci(e.path.child("")),o=this.docs.gt(i);o.Nt();){var s=o.Dt(),u=s.key,a=s.value,s=a.ec,a=a.readTime;if(!e.path.G(u.path))break;a.F(n)<=0||s instanceof su&&Nu(e,s)&&(r=r.Tt(s.key,s))}return sa.resolve(r)},Fc.prototype.sc=function(t,e){return sa.forEach(this.docs,function(t){return e(t)})},Fc.prototype.Fi=function(t){return new cc(this)},Fc.prototype.ic=function(t){return sa.resolve(this.size)},Fc),cc=(qc.prototype.oc=function(t){t=this.Uu.get(t);return t?t.readTime:si.min()},qc.prototype.$i=function(t,e){this.uc(),this.Uu.set(t.key,{ec:t,readTime:e})},qc.prototype.Gi=function(t,e){void 0===e&&(e=null),this.uc(),this.Uu.set(t,{ec:null,readTime:e})},qc.prototype.He=function(t,e){this.uc();var n=this.Uu.get(e);return void 0!==n?sa.resolve(n.ec):this.cc(t,e)},qc.prototype.getEntries=function(t,e){return this.ac(t,e)},qc.prototype.apply=function(t){return this.uc(),this.rc=!0,this.lu(t)},qc.prototype.uc=function(){},n(Mc,sc=qc),Mc.prototype.lu=function(n){var r=this,i=[];return this.Uu.forEach(function(t,e){e&&e.ec?i.push(r.hc.$i(n,e.ec,r.oc(t))):r.hc.Gi(t)}),sa.qe(i)},Mc.prototype.cc=function(t,e){return this.hc.He(t,e)},Mc.prototype.ac=function(t,e){return this.hc.getEntries(t,e)},Mc),lc=(xc.prototype.Qn=function(t,n){return this.lc.forEach(function(t,e){return n(e)}),sa.resolve()},xc.prototype.Mi=function(t){return sa.resolve(this.lastRemoteSnapshotVersion)},xc.prototype.wc=function(t){return sa.resolve(this._c)},xc.prototype.$u=function(t){return this.highestTargetId=this.dc.next(),sa.resolve(this.highestTargetId)},xc.prototype.Ki=function(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this._c&&(this._c=e),sa.resolve()},xc.prototype.Ec=function(t){this.lc.set(t.target,t);var e=t.targetId;e>this.highestTargetId&&(this.dc=new _a(e),this.highestTargetId=e),t.sequenceNumber>this._c&&(this._c=t.sequenceNumber)},xc.prototype.Lu=function(t,e){return this.Ec(e),this.targetCount+=1,sa.resolve()},xc.prototype.Qi=function(t,e){return this.Ec(e),sa.resolve()},xc.prototype.mc=function(t,e){return this.lc.delete(e.target),this.fc.No(e.targetId),--this.targetCount,sa.resolve()},xc.prototype.Tc=function(n,r,i){var o=this,s=0,u=[];return this.lc.forEach(function(t,e){e.sequenceNumber<=r&&null===i.get(e.targetId)&&(o.lc.delete(t),u.push(o.Ac(n,e.targetId)),s++)}),sa.qe(u).next(function(){return s})},xc.prototype.Ic=function(t){return sa.resolve(this.targetCount)},xc.prototype.Hi=function(t,e){e=this.lc.get(e)||null;return sa.resolve(e)},xc.prototype.qi=function(t,e,n){return this.fc.bo(e,n),sa.resolve()},xc.prototype.Ui=function(e,t,n){this.fc.Do(t,n);var r=this.persistence.Wi,i=[];return r&&t.forEach(function(t){i.push(r.Zu(e,t))}),sa.qe(i)},xc.prototype.Ac=function(t,e){return this.fc.No(e),sa.resolve()},xc.prototype.Yi=function(t,e){e=this.fc.Fo(e);return sa.resolve(e)},xc.prototype.Oo=function(t,e){return sa.resolve(this.fc.Oo(e))},xc),fc=(jc.prototype.yc=function(t,e){return sa.resolve(this.Rc.get(e))},jc.prototype.Vc=function(t,e){return this.Rc.set(e.id,{id:e.id,version:e.version,createTime:Wo(e.createTime)}),sa.resolve()},jc.prototype.gc=function(t,e){return sa.resolve(this.Pc.get(e))},jc.prototype.vc=function(t,e){var n,r;return this.Pc.set(e.name,{name:(n=e).name,query:(r=n.bundledQuery,e=es({parent:r.parent,structuredQuery:r.structuredQuery}),"LAST"===r.limitType?Eu(e,e.limit,"L"):e),readTime:Wo(n.readTime)}),sa.resolve()},jc),pc=(Uc.prototype.start=function(){return Promise.resolve()},Uc.prototype.Zo=function(){return this.Sc=!1,Promise.resolve()},Object.defineProperty(Uc.prototype,"Nc",{get:function(){return this.Sc},enumerable:!1,configurable:!0}),Uc.prototype.xc=function(){},Uc.prototype.Fc=function(){},Uc.prototype.Vi=function(){return this.We},Uc.prototype.Ti=function(t){var e=this.bc[t.h()];return e||(e=new ac(this.We,this.Wi),this.bc[t.h()]=e),e},Uc.prototype.Pi=function(){return this.Ri},Uc.prototype.Ii=function(){return this.Qe},Uc.prototype.gi=function(){return this.pi},Uc.prototype.runTransaction=function(t,e,n){var r=this;Vr("MemoryPersistence","Starting transaction:",t);var i=new dc(this.Cc.next());return this.Wi.Oc(),n(i).next(function(t){return r.Wi.$c(i).next(function(){return t})}).Me().then(function(t){return i.Lc(),t})},Uc.prototype.kc=function(e,n){return sa.Be(Object.values(this.bc).map(function(t){return function(){return t.Oo(e,n)}}))},Uc),dc=(Cc.prototype.Uc=function(t){this.Mc.push(t)},Cc.prototype.Lc=function(){this.Mc.forEach(function(t){return t()})},n(Vc,oc=Cc),Vc),vc=(Lc.Qc=function(t){return new Lc(t)},Object.defineProperty(Lc.prototype,"jc",{get:function(){if(this.Bc)return this.Bc;throw xr()},enumerable:!1,configurable:!0}),Lc.prototype.vo=function(t,e,n){return this.qc.vo(n,e),this.jc.delete(n.toString()),sa.resolve()},Lc.prototype.Co=function(t,e,n){return this.qc.Co(n,e),this.jc.add(n.toString()),sa.resolve()},Lc.prototype.Zu=function(t,e){return this.jc.add(e.toString()),sa.resolve()},Lc.prototype.removeTarget=function(t,e){var n=this;this.qc.No(e.targetId).forEach(function(t){return n.jc.add(t.toString())});var r=this.persistence.Pi();return r.Yi(t,e.targetId).next(function(t){t.forEach(function(t){return n.jc.add(t.toString())})}).next(function(){return r.mc(t,e)})},Lc.prototype.Oc=function(){this.Bc=new Set},Lc.prototype.$c=function(n){var r=this,i=this.persistence.Ii().Fi();return sa.forEach(this.jc,function(t){var e=ci.st(t);return r.Wc(n,e).next(function(t){t||i.Gi(e)})}).next(function(){return r.Bc=null,i.apply(n)})},Lc.prototype.ji=function(t,e){var n=this;return this.Wc(t,e).next(function(t){t?n.jc.delete(e.toString()):n.jc.add(e.toString())})},Lc.prototype.Dc=function(t){return 0},Lc.prototype.Wc=function(t,e){var n=this;return sa.Be([function(){return sa.resolve(n.qc.Oo(e))},function(){return n.persistence.Pi().Oo(t,e)},function(){return n.persistence.kc(t,e)}])},Lc),yc=(_c.prototype.Ar=function(t){this.zc=t},_c.prototype.dr=function(t){this.Hc=t},_c.prototype.onMessage=function(t){this.Yc=t},_c.prototype.close=function(){this.Kc()},_c.prototype.send=function(t){this.Gc(t)},_c.prototype.Jc=function(){this.zc()},_c.prototype.Xc=function(t){this.Hc(t)},_c.prototype.Zc=function(t){this.Yc(t)},_c),gc={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},mc=(Pc.prototype.Nr=function(e,t,n,r){var i=this.sa(e,t);Vr("RestConnection","Sending: ",i,n);t={};return this.ia(t,r),this.ra(e,i,t,n).then(function(t){return Vr("RestConnection","Received: ",t),t},function(t){throw Ur("RestConnection",e+" failed with error: ",t,"url: ",i,"request:",n),t})},Pc.prototype.Fr=function(t,e,n,r){return this.Nr(t,e,n,r)},Pc.prototype.ia=function(t,e){if(t["X-Goog-Api-Client"]="gl-js/ fire/8.1.1-2020102005919",t["Content-Type"]="text/plain",e)for(var n in e.m)e.m.hasOwnProperty(n)&&(t[n]=e.m[n])},Pc.prototype.sa=function(t,e){t=gc[t];return this.na+"/v1/"+e+":"+t},n(Sc,ic=Pc),Sc.prototype.ra=function(o,e,s,u){return new Promise(function(n,r){var i=new Ir;i.listenOnce(mr.COMPLETE,function(){try{switch(i.getLastErrorCode()){case gr.NO_ERROR:var t=i.getResponseJson();Vr("Connection","XHR received:",JSON.stringify(t)),n(t);break;case gr.TIMEOUT:Vr("Connection",'RPC "'+o+'" timed out'),r(new Br(Gr.DEADLINE_EXCEEDED,"Request time out"));break;case gr.HTTP_ERROR:var e=i.getStatus();Vr("Connection",'RPC "'+o+'" failed with status:',e,"response text:",i.getResponseText()),0<e?(t=i.getResponseJson().error)&&t.status&&t.message?(e=t.status.toLowerCase().replace("_","-"),e=0<=Object.values(Gr).indexOf(e)?e:Gr.UNKNOWN,r(new Br(e,t.message))):r(new Br(Gr.UNKNOWN,"Server responded with status "+i.getStatus())):r(new Br(Gr.UNAVAILABLE,"Connection failed."));break;default:xr()}}finally{Vr("Connection",'RPC "'+o+'" completed.')}});var t=JSON.stringify(u);i.send(e,"POST",t,s,15)})},Sc.prototype.Ir=function(t,e){var n,r=[this.na,"/","google.firestore.v1.Firestore","/",t,"/channel"],i=new lr,o=yr(),t={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.t.projectId+"/databases/"+this.t.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.i};this.ia(t.initMessageHeaders,e),"undefined"!=typeof window&&(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(p())||"object"==typeof navigator&&"ReactNative"===navigator.product||0<=p().indexOf("Electron/")||(0<=(n=p()).indexOf("MSIE ")||0<=n.indexOf("Trident/"))||0<=p().indexOf("MSAppHost/")||"object"==typeof(n="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0)&&void 0!==n.id||(t.httpHeadersOverwriteParam="$httpHeaders");r=r.join("");Vr("Connection","Creating WebChannel: "+r,t);var s=i.createWebChannel(r,t),u=!1,a=!1,h=new yc({Gc:function(t){a?Vr("Connection","Not sending because WebChannel is closed:",t):(u||(Vr("Connection","Opening WebChannel transport."),s.open(),u=!0),Vr("Connection","WebChannel sending:",t),s.send(t))},Kc:function(){return s.close()}}),t=function(t,e,n){t.listen(e,function(t){try{n(t)}catch(t){setTimeout(function(){throw t},0)}})};return t(s,Tr.EventType.OPEN,function(){a||Vr("Connection","WebChannel transport opened.")}),t(s,Tr.EventType.CLOSE,function(){a||(a=!0,Vr("Connection","WebChannel transport closed"),h.Xc())}),t(s,Tr.EventType.ERROR,function(t){a||(a=!0,Ur("Connection","WebChannel transport errored:",t),h.Xc(new Br(Gr.UNAVAILABLE,"The operation could not be completed")))}),t(s,Tr.EventType.MESSAGE,function(t){var e,n,r,i;a||(Mr(!!(e=t.data[0])),(n=e.error||(null===(i=e[0])||void 0===i?void 0:i.error))?(Vr("Connection","WebChannel received error:",n),r=n.status,t=function(){var t=Ri[r];if(void 0!==t)return Pi(t)}(),i=n.message,void 0===t&&(t=Gr.INTERNAL,i="Unknown error status: "+r+" with message "+n.message),a=!0,h.Xc(new Br(t,i)),s.close()):(Vr("Connection","WebChannel received:",e),h.Zc(e)))}),t(o,wr.STAT_EVENT,function(t){t.stat===br?Vr("Connection","Detected buffering proxy"):t.stat===Er&&Vr("Connection","Detected no buffering proxy")}),setTimeout(function(){h.Jc()},0),h},Sc),wc=(Dc.prototype.Xr=function(t){this.ha.push(t)},Dc.prototype.Zo=function(){window.removeEventListener("online",this.oa),window.removeEventListener("offline",this.ca)},Dc.prototype.la=function(){window.addEventListener("online",this.oa),window.addEventListener("offline",this.ca)},Dc.prototype.ua=function(){Vr("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var t=0,e=this.ha;t<e.length;t++)(0,e[t])(0)},Dc.prototype.aa=function(){Vr("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var t=0,e=this.ha;t<e.length;t++)(0,e[t])(1)},Dc._a=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},Dc),bc=(kc.prototype.Xr=function(t){},kc.prototype.Zo=function(){},kc),Ec=(Rc.prototype.initialize=function(e){return v(this,void 0,void 0,function(){return y(this,function(t){switch(t.label){case 0:return this.serializer=fa(e.ta.t),this.Ru=this.fa(e),this.persistence=this.da(e),[4,this.persistence.start()];case 1:return t.sent(),this.wa=this.Ea(e),this.jr=this.ma(e),[2]}})})},Rc.prototype.Ea=function(t){return null},Rc.prototype.ma=function(t){return e=this.persistence,n=new uc,r=t.Ta,t=this.serializer,new La(e,n,r,t);var e,n,r},Rc.prototype.da=function(t){return new pc(vc.Qc,this.serializer)},Rc.prototype.fa=function(t){return new Ph},Rc.prototype.terminate=function(){return v(this,void 0,void 0,function(){return y(this,function(t){switch(t.label){case 0:return this.wa&&this.wa.stop(),[4,this.Ru.Zo()];case 1:return t.sent(),[4,this.persistence.Zo()];case 2:return t.sent(),[2]}})})},Rc),Tc=(Oc.prototype.initialize=function(n,r){return v(this,void 0,void 0,function(){var e=this;return y(this,function(t){switch(t.label){case 0:return this.jr?[3,2]:(this.jr=n.jr,this.Ru=n.Ru,this.Wr=this.Aa(r),this.Au=this.Ia(r),this.Iu=this.Ra(r),this.Pa=this.ya(r,!n.synchronizeTabs),this.Ru.Or=function(t){return Yh(e.Pa,t,1)},this.Au.Gr.Va=rc.bind(null,this.Pa),[4,function(n,r){return v(this,void 0,void 0,function(){var e;return y(this,function(t){switch(t.label){case 0:return e=n,r?(e.Hr.delete(2),[4,ih(e)]):[3,2];case 1:return t.sent(),[3,5];case 2:return r?[3,4]:(e.Hr.add(2),[4,oh(e)]);case 3:t.sent(),e.Zr.set("Unknown"),t.label=4;case 4:t.label=5;case 5:return[2]}})})}(this.Au,this.Pa.Fu)]);case 1:t.sent(),t.label=2;case 2:return[2]}})})},Oc.prototype.Ra=function(t){return new Th},Oc.prototype.Aa=function(t){var e=fa(t.ta.t),n=(n=t.ta,new mc(n));return t=t.credentials,new Qa(t,n,e)},Oc.prototype.Ia=function(t){var e=this,n=this.jr,r=this.Wr,i=t.Ns,o=function(t){return Yh(e.Pa,t,0)},t=new(wc._a()?wc:bc);return new za(n,r,i,o,t)},Oc.prototype.ya=function(t,e){return function(t,e,n,r,i,o,s){o=new jh(t,e,n,r,i,o);return s&&(o.xu=!0),o}(this.jr,this.Au,this.Iu,this.Ru,t.Ta,t.Pu,e)},Oc.prototype.terminate=function(){return function(n){return v(this,void 0,void 0,function(){var e;return y(this,function(t){switch(t.label){case 0:return e=n,Vr("RemoteStore","RemoteStore shutting down."),e.Hr.add(5),[4,oh(e)];case 1:return t.sent(),e.Jr.Zo(),e.Zr.set("Unknown"),[2]}})})}(this.Au)},Oc),Ic=(Nc.prototype.next=function(t){this.observer.next&&this.pa(this.observer.next,t)},Nc.prototype.error=function(t){this.observer.error?this.pa(this.observer.error,t):console.error("Uncaught Error in snapshot listener:",t)},Nc.prototype.ga=function(){this.muted=!0},Nc.prototype.pa=function(t,e){var n=this;this.muted||setTimeout(function(){n.muted||t(e)},0)},Nc),Ac=function(t){this.va=t};function Nc(t){this.observer=t,this.muted=!1}function Oc(){}function Rc(){this.synchronizeTabs=!1}function kc(){}function Dc(){var t=this;this.oa=function(){return t.ua()},this.ca=function(){return t.aa()},this.ha=[],this.la()}function Sc(t){var e=this;return(e=ic.call(this,t)||this).forceLongPolling=t.forceLongPolling,e.i=t.i,e}function Pc(t){this.ta=t,this.t=t.t;var e=t.ssl?"https":"http";this.na=e+"://"+t.host,this.ea="projects/"+this.t.projectId+"/databases/"+this.t.database+"/documents"}function _c(t){this.Gc=t.Gc,this.Kc=t.Kc}function Lc(t){this.persistence=t,this.qc=new kh,this.Bc=null}function Vc(t){var e=this;return(e=oc.call(this)||this).Bi=t,e}function Cc(){this.Mc=[]}function Uc(t,e){var n=this;this.bc={},this.Cc=new ya(0),this.Sc=!1,this.Sc=!0,this.Wi=t(this),this.Ri=new lc(this),this.We=new Sa,this.Qe=(t=this.We,new hc(t,function(t){return n.Wi.Dc(t)})),this.serializer=new Da(e),this.pi=new fc(this.serializer)}function jc(t){this.serializer=t,this.Rc=new Map,this.Pc=new Map}function xc(t){this.persistence=t,this.lc=new oa(Ei,Ti),this.lastRemoteSnapshotVersion=si.min(),this.highestTargetId=0,this._c=0,this.fc=new kh,this.targetCount=0,this.dc=_a._i()}function Mc(t){var e=this;return(e=sc.call(this)||this).hc=t,e}function qc(){this.Uu=new oa(function(t){return t.toString()},function(t,e){return t.isEqual(e)}),this.rc=!1}function Fc(t,e){this.We=t,this.nc=e,this.docs=new _i(ci.k),this.size=0}function Gc(t,e){this.We=t,this.Wi=e,this.je=[],this.Gu=1,this.Ku=new Mi(Dh.yo)}function Bc(){}function Wc(t,e,n){if(!n)throw new Br(Gr.INVALID_ARGUMENT,"Function "+t+"() cannot be called with an empty "+e+".")}function zc(t,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Br(Gr.INVALID_ARGUMENT,"Invalid options passed to function "+t+'(): You cannot specify both "merge" and "mergeFields".');return e}function Hc(t,e,n,r){if(!0===e&&!0===r)throw new Br(Gr.INVALID_ARGUMENT,t+" and "+n+" cannot be used together.")}function Xc(t){if(!ci.ot(t))throw new Br(Gr.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t+" has "+t.length+".")}function Yc(t){if(ci.ot(t))throw new Br(Gr.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+t+" has "+t.length+".")}function Kc(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return 20<e.length&&(e=e.substring(0,20)+"..."),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"!=typeof e)return"function"==typeof e?"a function":xr();if(e instanceof Array)return"an array";var t=function(){if(e.constructor){var t=/function\s+([^\s(]+)\s*\(/.exec(e.constructor.toString());if(t&&1<t.length)return t[1]}return null}();return t?"a custom "+t+" object":"an object"}function $c(t,e){if(t instanceof Ac&&(t=t.va),t instanceof e)return t;if(e.name===t.constructor.name)throw new Br(Gr.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");t=Kc(t);throw new Br(Gr.INVALID_ARGUMENT,"Expected type '"+e.name+"', but it was: "+t)}function Qc(t,e){if(e<=0)throw new Br(Gr.INVALID_ARGUMENT,"Function "+t+"() requires a positive number, but it was: "+e+".")}var Jc,Zc=function(t){this.ba=t},tl=(n(el,Jc=Zc),el.prototype.Ca=function(t){if(2!==t.Sa)throw 1===t.Sa?t.Da(this.ba+"() can only appear at the top level of your update data"):t.Da(this.ba+"() cannot be used with set() unless you pass {merge:true}");return t.ee.push(t.path),null},el.prototype.isEqual=function(t){return t instanceof el},el);function el(){return null!==Jc&&Jc.apply(this,arguments)||this}function nl(t,e,n){return new Kf({Sa:3,Na:e.settings.Na,methodName:t.ba,xa:n},e.t,e.serializer,e.ignoreUndefinedProperties)}var rl,il,ol,sl,ul=(n(Il,sl=Zc),Il.prototype.Ca=function(t){return new Ns(t.path,new ls)},Il.prototype.isEqual=function(t){return t instanceof Il},Il),al=(n(Tl,ol=Zc),Tl.prototype.Ca=function(t){var e=nl(this,t,!0),n=this.Fa.map(function(t){return rp(t,e)}),n=new fs(n);return new Ns(t.path,n)},Tl.prototype.isEqual=function(t){return this===t},Tl),hl=(n(El,il=Zc),El.prototype.Ca=function(t){var e=nl(this,t,!0),n=this.Fa.map(function(t){return rp(t,e)}),n=new gs(n);return new Ns(t.path,n)},El.prototype.isEqual=function(t){return this===t},El),cl=(n(bl,rl=Zc),bl.prototype.Ca=function(t){var e=new Es(t.serializer,Fo(t.serializer,this.Oa));return new Ns(t.path,e)},bl.prototype.isEqual=function(t){return this===t},bl),ll=(Object.defineProperty(wl.prototype,"latitude",{get:function(){return this.$a},enumerable:!1,configurable:!0}),Object.defineProperty(wl.prototype,"longitude",{get:function(){return this.La},enumerable:!1,configurable:!0}),wl.prototype.isEqual=function(t){return this.$a===t.$a&&this.La===t.La},wl.prototype.toJSON=function(){return{latitude:this.$a,longitude:this.La}},wl.prototype.D=function(t){return ei(this.$a,t.$a)||ei(this.La,t.La)},wl),fl=(ml.fromBase64String=function(t){try{return new ml(Ai.fromBase64String(t))}catch(t){throw new Br(Gr.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}},ml.fromUint8Array=function(t){return new ml(Ai.fromUint8Array(t))},ml.prototype.toBase64=function(){return this.ka.toBase64()},ml.prototype.toUint8Array=function(){return this.ka.toUint8Array()},ml.prototype.toString=function(){return"Bytes(base64: "+this.toBase64()+")"},ml.prototype.isEqual=function(t){return this.ka.isEqual(t.ka)},ml),pl=new Map,dl=(gl.prototype.isEqual=function(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties},gl),vl=(Object.defineProperty(yl.prototype,"app",{get:function(){if(!this.ja)throw new Br(Gr.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.ja},enumerable:!1,configurable:!0}),Object.defineProperty(yl.prototype,"Wa",{get:function(){return this.qa},enumerable:!1,configurable:!0}),Object.defineProperty(yl.prototype,"Ga",{get:function(){return void 0!==this.Ka},enumerable:!1,configurable:!0}),yl.prototype.za=function(t){if(this.qa)throw new Br(Gr.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this.Ua=new dl(t),void 0!==t.credentials&&(this.Qa=function(t){if(!t)return new Wr;switch(t.type){case"gapi":var e=t.client;return Mr(!("object"!=typeof e||null===e||!e.auth||!e.auth.getAuthHeaderValueForFirstParty)),new Xr(e,t.sessionIndex||"0");case"provider":return t.client;default:throw new Br(Gr.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(t.credentials))},yl.prototype.Ha=function(){return this.Ua},yl.prototype.Ya=function(){return this.qa=!0,this.Ua},yl.prototype._delete=function(){return this.Ka||(this.Ka=this.Ja()),this.Ka},yl.prototype.Ja=function(){return t=this,(e=pl.get(t))&&(Vr("ComponentProvider","Removing Datastore"),pl.delete(t),e.terminate()),Promise.resolve();var t,e},yl);function yl(t,e){this.Ma="(lite)",this.Ua=new dl({}),this.qa=!1,t instanceof Rr?(this.Ba=t,this.Qa=new Wr):(this.ja=t,this.Ba=function(t){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new Br(Gr.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Rr(t.options.projectId)}(t),this.Qa=new zr(e))}function gl(t){var e;if(void 0===t.host){if(void 0!==t.ssl)throw new Br(Gr.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(e=t.ssl)||void 0===e||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new Br(Gr.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,Hc("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}function ml(t){this.ka=t}function wl(t,e){if(!isFinite(t)||t<-90||90<t)throw new Br(Gr.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||180<e)throw new Br(Gr.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this.$a=t,this.La=e}function bl(t,e){var n=this;return(n=rl.call(this,t)||this).Oa=e,n}function El(t,e){var n=this;return(n=il.call(this,t)||this).Fa=e,n}function Tl(t,e){var n=this;return(n=ol.call(this,t)||this).Fa=e,n}function Il(){return null!==sl&&sl.apply(this,arguments)||this}function Al(){if("undefined"==typeof Uint8Array)throw new Br(Gr.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function Nl(){if("undefined"==typeof atob)throw new Br(Gr.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var Ol,Rl,kl,Dl=(n(jl,kl=Ac),jl.fromBase64String=function(t){return Nl(),new jl(fl.fromBase64String(t))},jl.fromUint8Array=function(t){return Al(),new jl(fl.fromUint8Array(t))},jl.prototype.toBase64=function(){return Nl(),this.va.toBase64()},jl.prototype.toUint8Array=function(){return Al(),this.va.toUint8Array()},jl.prototype.isEqual=function(t){return this.va.isEqual(t.va)},jl.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},jl),Ie=(Ul.prototype.Xa=function(t,e){switch(void 0===e&&(e="none"),Eo(t)){case 0:return null;case 1:return t.booleanValue;case 2:return ko(t.integerValue||t.doubleValue);case 3:return this.Za(t.timestampValue);case 4:return this.th(t,e);case 5:return t.stringValue;case 6:return this.nh(Do(t.bytesValue));case 7:return this.eh(t.referenceValue);case 8:return this.sh(t.geoPointValue);case 9:return this.ih(t.arrayValue,e);case 10:return this.rh(t.mapValue,e);default:throw xr()}},Ul.prototype.rh=function(t,n){var r=this,i={};return yo(t.fields||{},function(t,e){i[t]=r.Xa(e,n)}),i},Ul.prototype.sh=function(t){return new ll(ko(t.latitude),ko(t.longitude))},Ul.prototype.ih=function(t,e){var n=this;return(t.values||[]).map(function(t){return n.Xa(t,e)})},Ul.prototype.th=function(t,e){switch(e){case"previous":var n=function t(e){e=e.mapValue.fields.__previous_value__;return mo(e)?t(e):e}(t);return null==n?null:this.Xa(n,e);case"estimate":return this.Za(wo(t));default:return null}},Ul.prototype.Za=function(t){t=Ro(t);return new oi(t.seconds,t.nanos)},Ul.prototype.oh=function(t,e){var n=ui.J(t);Mr(us(n));t=new Rr(n.get(1),n.get(3)),n=new ci(n.U(5));return t.isEqual(e)||Cr("Document "+n+" contains a document reference within a different database ("+t.projectId+"/"+t.database+") which is not supported. It will be treated as a reference in the current database ("+e.projectId+"/"+e.database+") instead."),n},Ul),Sl=(n(Cl,Rl=Ie),Cl.prototype.nh=function(t){return new Dl(new fl(t))},Cl.prototype.eh=function(t){t=this.oh(t,this.firestore.Ba);return Xp.uh(t,this.firestore,null)},Cl),Pl=(Object.defineProperty(Vl.prototype,"id",{get:function(){return this.lh.path.j()},enumerable:!1,configurable:!0}),Object.defineProperty(Vl.prototype,"ref",{get:function(){return new uf(this.ah,this.fh,this.lh)},enumerable:!1,configurable:!0}),Vl.prototype.exists=function(){return null!==this._h},Vl.prototype.data=function(){if(this._h){if(this.fh){var t=new _l(this.ah,this.hh,this.lh,this._h,null);return this.fh.fromFirestore(t)}return this.hh.Xa(this._h.Ee())}},Vl.prototype.get=function(t){if(this._h){t=this._h.data().field(xl("DocumentSnapshot.get",t));if(null!==t)return this.hh.Xa(t)}},Vl),_l=(n(Ll,Ol=Pl),Ll.prototype.data=function(){return Ol.prototype.data.call(this)},Ll);function Ll(){return null!==Ol&&Ol.apply(this,arguments)||this}function Vl(t,e,n,r,i){this.ah=t,this.hh=e,this.lh=n,this._h=r,this.fh=i}function Cl(t){var e=this;return(e=Rl.call(this)||this).firestore=t,e}function Ul(){}function jl(){return null!==kl&&kl.apply(this,arguments)||this}function xl(t,e){return"string"==typeof e?hp(t,e):(e instanceof Ac?e.va:e).dh}var Ml,ql=(Bl.prototype.isEqual=function(t){return this.dh.isEqual(t.dh)},Bl),Fl=(n(Gl,Ml=vl),Gl.prototype.Ja=function(){return this.Eh||Fp(this),this.Eh.terminate()},Gl);function Gl(t,e){var n=this;return(n=Ml.call(this,t,e)||this).wh=new Na,n.Ma="name"in t?t.name:"[DEFAULT]",n}function Bl(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=0;n<t.length;++n)if(0===t[n].length)throw new Br(Gr.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this.dh=new hi(t)}var Wl,zl,Hl=(n(Ql,zl=Pl),Ql.prototype.exists=function(){return zl.prototype.exists.call(this)},Ql.prototype.data=function(t){if(void 0===t&&(t={}),this._h){if(this.fh){var e=new Xl(this.ah,this.hh,this.lh,this._h,this.metadata,null);return this.fh.fromFirestore(e,t)}return this.hh.Xa(this._h.Ee(),t.serverTimestamps)}},Ql.prototype.get=function(t,e){if(void 0===e&&(e={}),this._h){t=this._h.data().field(xl("DocumentSnapshot.get",t));if(null!==t)return this.hh.Xa(t,e.serverTimestamps)}},Ql),Xl=(n($l,Wl=Hl),$l.prototype.data=function(t){return void 0===t&&(t={}),Wl.prototype.data.call(this,t)},$l),Yl=(Object.defineProperty(Kl.prototype,"docs",{get:function(){var e=[];return this.forEach(function(t){return e.push(t)}),e},enumerable:!1,configurable:!0}),Object.defineProperty(Kl.prototype,"size",{get:function(){return this.Th.docs.size},enumerable:!1,configurable:!0}),Object.defineProperty(Kl.prototype,"empty",{get:function(){return 0===this.size},enumerable:!1,configurable:!0}),Kl.prototype.forEach=function(e,n){var r=this;this.Th.docs.forEach(function(t){e.call(n,new Xl(r.ah,r.hh,t.key,t,new sd(r.Th.nn.has(t.key),r.Th.fromCache),r.query.fh))})},Kl.prototype.docChanges=function(t){void 0===t&&(t={});t=!!t.includeMetadataChanges;if(t&&this.Th.sn)throw new Br(Gr.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this.Ah&&this.Ih===t||(this.Ah=function(i,e){if(i.Th.tn.W()){var n=0;return i.Th.docChanges.map(function(t){var e=new Xl(i.ah,i.hh,t.doc.key,t.doc,new sd(i.Th.nn.has(t.doc.key),i.Th.fromCache),i.query.fh);return t.doc,{type:"added",doc:e,oldIndex:-1,newIndex:n++}})}var o=i.Th.tn;return i.Th.docChanges.filter(function(t){return e||3!==t.type}).map(function(t){var e=new Xl(i.ah,i.hh,t.doc.key,t.doc,new sd(i.Th.nn.has(t.doc.key),i.Th.fromCache),i.query.fh),n=-1,r=-1;return 0!==t.type&&(n=o.indexOf(t.doc.key),o=o.delete(t.doc.key)),1!==t.type&&(r=(o=o.add(t.doc)).indexOf(t.doc.key)),{type:function(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return xr()}}(t.type),doc:e,oldIndex:n,newIndex:r}})}(this,t),this.Ih=t),this.Ah},Kl);function Kl(t,e,n,r){this.ah=t,this.hh=e,this.Th=r,this.metadata=new sd(r.hasPendingWrites,r.fromCache),this.query=n}function $l(){return null!==Wl&&Wl.apply(this,arguments)||this}function Ql(t,e,n,r,i,o){var s=this;return(s=zl.call(this,t,e,n,r,o)||this).ah=t,s.mh=t,s.metadata=i,s}function Jl(t,e){return t instanceof Hl&&e instanceof Hl?t.ah===e.ah&&t.lh.isEqual(e.lh)&&(null===t._h?null===e._h:t._h.isEqual(e._h))&&t.fh===e.fh:t instanceof Yl&&e instanceof Yl&&t.ah===e.ah&&Ff(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t.Th.isEqual(e.Th)}var Zl,tf=(n(ef,Zl=Ie),ef.prototype.nh=function(t){return new fl(t)},ef.prototype.eh=function(t){t=this.oh(t,this.firestore.Ba);return new uf(this.firestore,null,t)},ef);function ef(t){var e=this;return(e=Zl.call(this)||this).firestore=t,e}function nf(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];var o=$c(t.firestore,Fl),s=Gf(o);return e instanceof Ac&&(e=e.va),of(o,("string"==typeof e||e instanceof ql?ep(s,"updateDoc",t.lh,e,n,r):tp(s,"updateDoc",t.lh,e)).Ph(t.lh,Ds.exists(!0)))}function rf(e){for(var t=this,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];var i={includeMetadataChanges:!1},o=0;"object"!=typeof n[o]||pa(n[o])||(i=n[o],o++);var s,u,a,h,c,l={includeMetadataChanges:i.includeMetadataChanges};pa(n[o])&&(a=n[o],n[o]=null===(i=a.next)||void 0===i?void 0:i.bind(a),n[o+1]=null===(i=a.error)||void 0===i?void 0:i.bind(a),n[o+2]=null===(i=a.complete)||void 0===i?void 0:i.bind(a)),e instanceof uf?(s=$c(e.firestore,Fl),u=pu(e.lh.path),c={next:function(t){n[o]&&n[o](sf(s,e,t))},error:n[o+1],complete:n[o+2]}):(s=$c(e.firestore,Fl),u=e.Rh,h=new tf(s),c={next:function(t){n[o]&&n[o](new Yl(s,h,e,t))},error:n[o+1],complete:n[o+2]},Pf(e.Rh));var f=qp(s),p=new Ic(c),d=new Rh(u,p,l);return s.wh.Ms(function(){return v(t,void 0,void 0,function(){var e;return y(this,function(t){switch(t.label){case 0:return e=Ah,[4,Ap(f)];case 1:return[2,e.apply(void 0,[t.sent(),d])]}})})}),function(){p.ga(),s.wh.Ms(function(){return v(t,void 0,void 0,function(){var e;return y(this,function(t){switch(t.label){case 0:return e=Nh,[4,Ap(f)];case 1:return[2,e.apply(void 0,[t.sent(),d])]}})})})}}function of(t,e){return function(n,r){var t=this,i=new ua;return n.Ns.Ms(function(){return v(t,void 0,void 0,function(){var e;return y(this,function(t){switch(t.label){case 0:return e=Hh,[4,Ip(n)];case 1:return[2,e.apply(void 0,[t.sent(),r,i])]}})})}),i.promise}(qp(t),e)}function sf(t,e,n){var r=n.docs.get(e.lh),i=new tf(t);return new Hl(t,i,e.lh,r,new sd(n.hasPendingWrites,n.fromCache),e.fh)}var uf=(Object.defineProperty(cf.prototype,"yh",{get:function(){return this.lh.path},enumerable:!1,configurable:!0}),Object.defineProperty(cf.prototype,"id",{get:function(){return this.lh.path.j()},enumerable:!1,configurable:!0}),Object.defineProperty(cf.prototype,"path",{get:function(){return this.lh.path.Y()},enumerable:!1,configurable:!0}),Object.defineProperty(cf.prototype,"parent",{get:function(){return new Lf(this.firestore,this.fh,this.lh.path.q())},enumerable:!1,configurable:!0}),cf.prototype.withConverter=function(t){return new cf(this.firestore,t,this.lh)},cf),af=(hf.prototype.withConverter=function(t){return new hf(this.firestore,t,this.Rh)},hf),l=function(){};function hf(t,e,n){this.fh=e,this.Rh=n,this.type="query",this.firestore=t}function cf(t,e,n){this.fh=e,this.lh=n,this.type="document",this.firestore=t}function lf(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=0,i=e;r<i.length;r++){t=i[r].Vh(t)}return t}var ff,pf,df,vf,yf,gf=(n(Of,yf=l),Of.prototype.Vh=function(t){var e=Gf(t.firestore),e=function(t,e,n,r,i,o){if(r.tt()){if("array-contains"===i||"array-contains-any"===i)throw new Br(Gr.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+i+"' queries on FieldPath.documentId().");if("in"===i||"not-in"===i){Df(o,i);for(var s=[],u=0,a=o;u<a.length;u++){var h=a[u];s.push(kf(n,t,h))}c={arrayValue:{values:s}}}else c=kf(n,t,o)}else"in"!==i&&"not-in"!==i&&"array-contains-any"!==i||Df(o,i),c=np(e,"where",o,"in"===i||"not-in"===i);var c=ku.create(r,i,c);return function(t,e){if(e.Ie()){var n=gu(t);if(null!==n&&!n.isEqual(e.field))throw new Br(Gr.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, >, or >=) must be on the same field. But you have inequality filters on '"+n.toString()+"' and '"+e.field.toString()+"'");n=yu(t);null!==n&&Sf(0,e.field,n)}t=function(t,e){for(var n=0,r=t.filters;n<r.length;n++){var i=r[n];if(0<=e.indexOf(i.op))return i.op}return null}(t,function(){switch(e.op){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}());if(null!==t)throw t===e.op?new Br(Gr.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '"+e.op.toString()+"' filter."):new Br(Gr.INVALID_ARGUMENT,"Invalid query. You cannot use '"+e.op.toString()+"' filters with '"+t.toString()+"' filters.")}(t,c),c}(t.Rh,e,t.firestore.Ba,this.ph,this.gh,this.bh);return new af(t.firestore,t.fh,(t=t.Rh,e=t.filters.concat([e]),new hu(t.path,t.collectionGroup,t.me.slice(),e,t.limit,t.limitType,t.startAt,t.endAt)))},Of),mf=(n(Nf,vf=l),Nf.prototype.Vh=function(t){var e=function(t,e,n){if(null!==t.startAt)throw new Br(Gr.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==t.endAt)throw new Br(Gr.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new na(e,n);return e=r,null!==yu(n=t)||null!==(t=gu(n))&&Sf(0,t,e.field),r}(t.Rh,this.ph,this.Ch);return new af(t.firestore,t.fh,(t=t.Rh,e=t.me.concat([e]),new hu(t.path,t.collectionGroup,e,t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)))},Nf),wf=(n(Af,df=l),Af.prototype.Vh=function(t){return new af(t.firestore,t.fh,Eu(t.Rh,this.Sh,this.Dh))},Af),bf=(n(If,pf=l),If.prototype.Vh=function(t){var e=Rf(t,this.type,this.Nh,this.xh);return new af(t.firestore,t.fh,(t=t.Rh,e=e,new hu(t.path,t.collectionGroup,t.me.slice(),t.filters.slice(),t.limit,t.limitType,e,t.endAt)))},If),Ef=(n(Tf,ff=l),Tf.prototype.Vh=function(t){var e=Rf(t,this.type,this.Nh,this.xh);return new af(t.firestore,t.fh,(t=t.Rh,e=e,new hu(t.path,t.collectionGroup,t.me.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,e)))},Tf);function Tf(t,e,n){var r=this;return(r=ff.call(this)||this).type=t,r.Nh=e,r.xh=n,r}function If(t,e,n){var r=this;return(r=pf.call(this)||this).type=t,r.Nh=e,r.xh=n,r}function Af(t,e,n){var r=this;return(r=df.call(this)||this).type=t,r.Sh=e,r.Dh=n,r}function Nf(t,e){var n=this;return(n=vf.call(this)||this).ph=t,n.Ch=e,n.type="orderBy",n}function Of(t,e,n){var r=this;return(r=yf.call(this)||this).ph=t,r.gh=e,r.bh=n,r.type="where",r}function Rf(t,h,e,n){if(e[0]instanceof Ac&&(e[0]=e[0].va),e[0]instanceof Pl)return function(t,e,n,r){if(!n)throw new Br(Gr.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+h+"().");for(var i=[],o=0,s=wu(t);o<s.length;o++){var u=s[o];if(u.field.tt())i.push(So(e,n.key));else{var a=n.field(u.field);if(mo(a))throw new Br(Gr.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+u.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===a){u=u.field.Y();throw new Br(Gr.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+u+"' (used as the orderBy) does not exist.")}i.push(a)}}return new Yu(i,r)}(t.Rh,t.firestore.Ba,e[0]._h,n);var r=Gf(t.firestore);return function(t,e,n,r,i,o){var s=t.me;if(i.length>s.length)throw new Br(Gr.INVALID_ARGUMENT,"Too many arguments provided to "+r+"(). The number of arguments must be less than or equal to the number of orderBy() clauses");for(var u=[],a=0;a<i.length;a++){var h=i[a];if(s[a].field.tt()){if("string"!=typeof h)throw new Br(Gr.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+r+"(), but got a "+typeof h);if(!mu(t)&&-1!==h.indexOf("/"))throw new Br(Gr.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+r+"() must be a plain document ID, but '"+h+"' contains a slash.");var c=t.path.child(ui.J(h));if(!ci.ot(c))throw new Br(Gr.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+r+"() must result in a valid document path, but '"+c+"' is not because it contains an odd number of segments.");c=new ci(c);u.push(So(e,c))}else{h=np(n,r,h);u.push(h)}}return new Yu(u,o)}(t.Rh,t.firestore.Ba,r,h,e,n)}function kf(t,e,n){if(n instanceof Ac&&(n=n.va),"string"==typeof n){if(""===n)throw new Br(Gr.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!mu(e)&&-1!==n.indexOf("/"))throw new Br(Gr.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+n+"' contains a '/' character.");e=e.path.child(ui.J(n));if(!ci.ot(e))throw new Br(Gr.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+e+"' is not because it has an odd number of segments ("+e.length+").");return So(t,new ci(e))}if(n instanceof uf)return So(t,n.lh);throw new Br(Gr.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+Kc(n)+".")}function Df(t,e){if(!Array.isArray(t)||0===t.length)throw new Br(Gr.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+e.toString()+"' filters.");if(10<t.length)throw new Br(Gr.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters support a maximum of 10 elements in the value array.")}function Sf(t,e,n){if(!n.isEqual(e))throw new Br(Gr.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, >, or >=) on field '"+e.toString()+"' and so you must also use '"+e.toString()+"' as your first argument to orderBy(), but your first orderBy() is on field '"+n.toString()+"' instead.")}function Pf(t){if(vu(t)&&0===t.me.length)throw new Br(Gr.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var _f,Lf=(n(Vf,_f=af),Object.defineProperty(Vf.prototype,"id",{get:function(){return this.Rh.path.j()},enumerable:!1,configurable:!0}),Object.defineProperty(Vf.prototype,"path",{get:function(){return this.Rh.path.Y()},enumerable:!1,configurable:!0}),Object.defineProperty(Vf.prototype,"parent",{get:function(){var t=this.yh.q();return t.W()?null:new uf(this.firestore,null,new ci(t))},enumerable:!1,configurable:!0}),Vf.prototype.withConverter=function(t){return new Vf(this.firestore,t,this.yh)},Vf);function Vf(t,e,n){var r=this;return(r=_f.call(this,t,e,pu(n))||this).firestore=t,r.yh=n,r.type="collection",r}function Cf(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(Wc("collection","path",e),t instanceof vl){var i=ui.J.apply(ui,s([e],n));return Yc(i),new Lf(t,null,i)}if(!(t instanceof uf||t instanceof Lf))throw new Br(Gr.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");e=ui.J.apply(ui,s([t.path],n)).child(ui.J(e));return Yc(e),new Lf(t.firestore,null,e)}function Uf(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(1===arguments.length&&(e=Zr.S()),Wc("doc","path",e),t instanceof vl){var i=ui.J.apply(ui,s([e],n));return Xc(i),new uf(t,null,new ci(i))}if(!(t instanceof uf||t instanceof Lf))throw new Br(Gr.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");e=t.yh.child(ui.J.apply(ui,s([e],n)));return Xc(e),new uf(t.firestore,t instanceof Lf?t.fh:null,new ci(e))}var jf,xf=(n(Mf,jf=Ie),Mf.prototype.nh=function(t){return new fl(t)},Mf.prototype.eh=function(t){t=this.oh(t,this.firestore.Ba);return new uf(this.firestore,null,t)},Mf);function Mf(t){var e=this;return(e=jf.call(this)||this).firestore=t,e}function qf(t,e){return(t instanceof uf||t instanceof Lf)&&(e instanceof uf||e instanceof Lf)&&t.firestore===e.firestore&&t.path===e.path&&t.fh===e.fh}function Ff(t,e){return t instanceof af&&e instanceof af&&t.firestore===e.firestore&&Tu(t.Rh,e.Rh)&&t.fh===e.fh}function Gf(t){var e=t.Ya(),n=fa(t.Ba);return new $f(t.Ba,!!e.ignoreUndefinedProperties,n)}var Bf=/^__.*__$/,Wf=(Xf.prototype.Ph=function(t,e){var n=[];return null!==this.ee?n.push(new Ms(t,this.data,this.ee,e)):n.push(new xs(t,this.data,e)),0<this.fieldTransforms.length&&n.push(new Ws(t,this.fieldTransforms)),n},Xf),zf=(Hf.prototype.Ph=function(t,e){e=[new Ms(t,this.data,this.ee,e)];return 0<this.fieldTransforms.length&&e.push(new Ws(t,this.fieldTransforms)),e},Hf);function Hf(t,e,n){this.data=t,this.ee=e,this.fieldTransforms=n}function Xf(t,e,n){this.data=t,this.ee=e,this.fieldTransforms=n}function Yf(t){switch(t){case 0:case 2:case 1:return 1;case 3:case 4:return;default:throw xr()}}var Kf=(Object.defineProperty(Jf.prototype,"path",{get:function(){return this.settings.path},enumerable:!1,configurable:!0}),Object.defineProperty(Jf.prototype,"Sa",{get:function(){return this.settings.Sa},enumerable:!1,configurable:!0}),Jf.prototype.Oh=function(t){return new Jf(Object.assign(Object.assign({},this.settings),t),this.t,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.ee)},Jf.prototype.$h=function(t){var e=null===(e=this.path)||void 0===e?void 0:e.child(t),e=this.Oh({path:e,xa:!1});return e.Lh(t),e},Jf.prototype.kh=function(t){var e,t=null===(e=this.path)||void 0===e?void 0:e.child(t),t=this.Oh({path:t,xa:!1});return t.Fh(),t},Jf.prototype.Mh=function(t){return this.Oh({path:void 0,xa:!0})},Jf.prototype.Da=function(t){return cp(t,this.settings.methodName,this.settings.Uh||!1,this.path,this.settings.Na)},Jf.prototype.contains=function(e){return void 0!==this.ee.find(function(t){return e.G(t)})||void 0!==this.fieldTransforms.find(function(t){return e.G(t.field)})},Jf.prototype.Fh=function(){if(this.path)for(var t=0;t<this.path.length;t++)this.Lh(this.path.get(t))},Jf.prototype.Lh=function(t){if(0===t.length)throw this.Da("Document fields must not be empty");if(Yf(this.Sa)&&Bf.test(t))throw this.Da('Document fields cannot begin and end with "__"')},Jf),$f=(Qf.prototype.qh=function(t,e,n,r){return void 0===r&&(r=!1),new Kf({Sa:t,methodName:e,Na:n,path:hi.X(),xa:!1,Uh:r},this.t,this.serializer,this.ignoreUndefinedProperties)},Qf);function Qf(t,e,n){this.t=t,this.ignoreUndefinedProperties=e,this.serializer=n||fa(t)}function Jf(t,e,n,r,i,o){this.settings=t,this.t=e,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===i&&this.Fh(),this.fieldTransforms=i||[],this.ee=o||[]}function Zf(t,e,n,r,i,o){void 0===o&&(o={});var s=t.qh(o.merge||o.mergeFields?2:0,e,n,i);sp("Data must be an object, but it was:",s,r);var u,a,r=ip(r,s);if(o.merge)u=new Os(s.ee),a=s.fieldTransforms;else if(o.mergeFields){for(var h=[],c=0,l=o.mergeFields;c<l.length;c++){var f=up(e,l[c],n);if(!s.contains(f))throw new Br(Gr.INVALID_ARGUMENT,"Field '"+f+"' is specified in your field mask but missing from your input data.");lp(h,f)||h.push(f)}u=new Os(h),a=s.fieldTransforms.filter(function(t){return u.ue(t.field)})}else u=null,a=s.fieldTransforms;return new Wf(new Qs(r),u,a)}function tp(t,r,i,e){var o=t.qh(1,r,i);sp("Data must be an object, but it was:",o,e);var s=[],u=new Js;yo(e,function(t,e){var n=hp(r,t,i);e instanceof Ac&&(e=e.va);t=o.kh(n);e instanceof tl?s.push(n):null!=(t=rp(e,t))&&(s.push(n),u.set(n,t))});e=new Os(s);return new zf(u.he(),e,o.fieldTransforms)}function ep(t,e,n,r,i,o){var s=t.qh(1,e,n),u=[up(e,r,n)],a=[i];if(o.length%2!=0)throw new Br(Gr.INVALID_ARGUMENT,"Function "+e+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var h=0;h<o.length;h+=2)u.push(up(e,o[h])),a.push(o[h+1]);for(var c,l,f,p=[],d=new Js,v=u.length-1;0<=v;--v){lp(p,u[v])||(c=u[v],(l=a[v])instanceof Ac&&(l=l.va),f=s.kh(c),l instanceof tl?p.push(c):null!=(f=rp(l,f))&&(p.push(c),d.set(c,f)))}i=new Os(p);return new zf(d.he(),i,s.fieldTransforms)}function np(t,e,n,r){return void 0===r&&(r=!1),rp(n,t.qh(r?4:3,e))}function rp(s,t){if(s instanceof Ac&&(s=s.va),op(s))return sp("Unsupported field value:",t,s),ip(s,t);if(s instanceof Zc)return function(t,e){if(!Yf(e.Sa))throw e.Da(t.ba+"() can only be used with update() and set()");if(!e.path)throw e.Da(t.ba+"() is not currently supported inside arrays");t=t.Ca(e);t&&e.fieldTransforms.push(t)}(s,t),null;if(t.path&&t.ee.push(t.path),s instanceof Array){if(t.settings.xa&&4!==t.Sa)throw t.Da("Nested arrays are not supported");return function(t){for(var e=[],n=0,r=0,i=s;r<i.length;r++){var o=rp(i[r],t.Mh(n));null==o&&(o={nullValue:"NULL_VALUE"}),e.push(o),n++}return{arrayValue:{values:e}}}(t)}return function(t,e){if(t instanceof Ac&&(t=t.va),null===t)return{nullValue:"NULL_VALUE"};if("number"==typeof t)return Fo(e.serializer,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){var n=oi.fromDate(t);return{timestampValue:Go(e.serializer,n)}}if(t instanceof oi){var r=new oi(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:Go(e.serializer,r)}}if(t instanceof ll)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof fl)return{bytesValue:Bo(e.serializer,t.ka)};if(t instanceof uf){n=e.t,r=t.firestore.Ba;if(!r.isEqual(n))throw e.Da("Document reference is for database "+r.projectId+"/"+r.database+" but should be for database "+n.projectId+"/"+n.database);return{referenceValue:zo(t.firestore.Ba||e.t,t.lh.path)}}if(void 0===t&&e.ignoreUndefinedProperties)return null;throw e.Da("Unsupported field value: "+Kc(t))}(s,t)}function ip(t,n){var r={};return go(t)?n.path&&0<n.path.length&&n.ee.push(n.path):yo(t,function(t,e){e=rp(e,n.$h(t));null!=e&&(r[t]=e)}),{mapValue:{fields:r}}}function op(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof oi||t instanceof ll||t instanceof fl||t instanceof uf||t instanceof Zc)}function sp(t,e,n){if(!op(n)||("object"!=typeof(r=n)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r))){n=Kc(n);throw"an object"===n?e.Da(t+" a custom object"):e.Da(t+" "+n)}var r}function up(t,e,n){if(e instanceof Ac&&(e=e.va),e instanceof ql)return e.dh;if("string"==typeof e)return hp(t,e);throw cp("Field path arguments must be of type string or FieldPath.",t,!1,void 0,n)}var ap=new RegExp("[~\\*/\\[\\]]");function hp(e,n,r){if(0<=n.search(ap))throw cp("Invalid field path ("+n+"). Paths must not contain '~', '*', '/', '[', or ']'",e,!1,void 0,r);try{return(new(ql.bind.apply(ql,s([void 0],n.split("."))))).dh}catch(t){throw cp("Invalid field path ("+n+"). Paths must not be empty, begin with '.', end with '.', or contain '..'",e,!1,void 0,r)}}function cp(t,e,n,r,i){var o=r&&!r.W(),s=void 0!==i,e="Function "+e+"() called with invalid data";n&&(e+=" (via `toFirestore()`)");n="";return(o||s)&&(n+=" (found",o&&(n+=" in field "+r),s&&(n+=" in document "+i),n+=")"),new Br(Gr.INVALID_ARGUMENT,(e+=". ")+t+n)}function lp(t,e){return t.some(function(t){return t.isEqual(e)})}var fp=(gp.prototype.Gh=function(r){return v(this,void 0,void 0,function(){var e,n=this;return y(this,function(t){switch(t.label){case 0:if(this.Kh(),0<this.mutations.length)throw new Br(Gr.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,function(s,u){return v(this,void 0,void 0,function(){var n,e,r,i,o;return y(this,function(t){switch(t.label){case 0:return e=$o((n=s).serializer)+"/documents",r={documents:u.map(function(t){return Xo(n.serializer,t)})},[4,n.Fr("BatchGetDocuments",e,r)];case 1:return r=t.sent(),i=new Map,r.forEach(function(t){var e,t=(e=n.serializer,"found"in(t=t)?function(t,e){Mr(!!e.found),e.found.name,e.found.updateTime;var n=Yo(t,e.found.name),t=Wo(e.found.updateTime),e=new Qs({mapValue:{fields:e.found.fields}});return new su(n,t,e,{})}(e,t):"missing"in t?function(t,e){Mr(!!e.missing),Mr(!!e.readTime);t=Yo(t,e.missing),e=Wo(e.readTime);return new uu(t,e)}(e,t):xr());i.set(t.key.toString(),t)}),o=[],[2,(u.forEach(function(t){t=i.get(t.toString());Mr(!!t),o.push(t)}),o)]}})})}(this.Wr,r)];case 1:return[2,((e=t.sent()).forEach(function(t){t instanceof uu||t instanceof su?n.zh(t):xr()}),e)]}})})},gp.prototype.set=function(t,e){this.write(e.Ph(t,this.re(t))),this.Wh.add(t.toString())},gp.prototype.update=function(t,e){try{this.write(e.Ph(t,this.Hh(t)))}catch(t){this.jh=t}this.Wh.add(t.toString())},gp.prototype.delete=function(t){this.write([new Ks(t,this.re(t))]),this.Wh.add(t.toString())},gp.prototype.commit=function(){return v(this,void 0,void 0,function(){var e,n=this;return y(this,function(t){switch(t.label){case 0:if(this.Kh(),this.jh)throw this.jh;return e=this.Bh,this.mutations.forEach(function(t){e.delete(t.key.toString())}),e.forEach(function(t,e){e=ci.st(e);n.mutations.push(new $s(e,n.re(e)))}),[4,function(i,o){return v(this,void 0,void 0,function(){var e,n,r;return y(this,function(t){switch(t.label){case 0:return n=$o((e=i).serializer)+"/documents",r={writes:o.map(function(t){return Zo(e.serializer,t)})},[4,e.Nr("Commit",n,r)];case 1:return t.sent(),[2]}})})}(this.Wr,this.mutations)];case 1:return t.sent(),this.Qh=!0,[2]}})})},gp.prototype.zh=function(t){var e;if(t instanceof su)e=t.version;else{if(!(t instanceof uu))throw xr();e=si.min()}var n=this.Bh.get(t.key.toString());if(n){if(!e.isEqual(n))throw new Br(Gr.ABORTED,"Document version changed between two reads.")}else this.Bh.set(t.key.toString(),e)},gp.prototype.re=function(t){var e=this.Bh.get(t.toString());return!this.Wh.has(t.toString())&&e?Ds.updateTime(e):Ds.ce()},gp.prototype.Hh=function(t){var e=this.Bh.get(t.toString());if(this.Wh.has(t.toString())||!e)return Ds.exists(!0);if(e.isEqual(si.min()))throw new Br(Gr.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Ds.updateTime(e)},gp.prototype.write=function(t){this.Kh(),this.mutations=this.mutations.concat(t)},gp.prototype.Kh=function(){},gp),pp=(yp.prototype.run=function(){this.Jh()},yp.prototype.Jh=function(){var t=this;this.Ks.vs(function(){return v(t,void 0,void 0,function(){var e,n,r=this;return y(this,function(t){return e=new fp(this.Wr),(n=this.Xh(e))&&n.then(function(t){r.Ns.Ms(function(){return e.commit().then(function(){r.Os.resolve(t)}).catch(function(t){r.Zh(t)})})}).catch(function(t){r.Zh(t)}),[2]})})})},yp.prototype.Xh=function(t){try{var e=this.updateFunction(t);return!gi(e)&&e.catch&&e.then?e:(this.Os.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.Os.reject(t),null}},yp.prototype.Zh=function(t){var e=this;0<this.Yh&&this.tl(t)?(--this.Yh,this.Ns.Ms(function(){return e.Jh(),Promise.resolve()})):this.Os.reject(t)},yp.prototype.tl=function(t){if("FirebaseError"!==t.name)return!1;t=t.code;return"aborted"===t||"failed-precondition"===t||!Si(t)},yp),dp=(vp.prototype.getConfiguration=function(){return v(this,void 0,void 0,function(){return y(this,function(t){switch(t.label){case 0:return[4,this.V.promise];case 1:return[2,(t.sent(),{Ns:this.Ns,ta:this.ta,clientId:this.clientId,credentials:this.credentials,Ta:this.user,Pu:100})]}})})},vp.prototype.el=function(t){var e=this;this.nl=t,this.V.promise.then(function(){return e.nl(e.user)})},vp.prototype.sl=function(){if(this.Ns.Hs)throw new Br(Gr.FAILED_PRECONDITION,"The client has already been terminated.")},vp.prototype.terminate=function(){var t=this;this.Ns.Zs();var n=new ua;return this.Ns.Ys(function(){return v(t,void 0,void 0,function(){var e;return y(this,function(t){switch(t.label){case 0:return t.trys.push([0,5,,6]),this.il?[4,this.il.terminate()]:[3,2];case 1:t.sent(),t.label=2;case 2:return this.rl?[4,this.rl.terminate()]:[3,4];case 3:t.sent(),t.label=4;case 4:return this.credentials.R(),n.resolve(),[3,6];case 5:return e=t.sent(),e=ka(e,"Failed to shutdown persistence"),n.reject(e),[3,6];case 6:return[2]}})})}),n.promise},vp);function vp(t,e,n){var r=this;this.credentials=t,this.Ns=e,this.ta=n,this.user=kr.UNAUTHENTICATED,this.clientId=Zr.S(),this.nl=function(){},this.V=new ua,this.credentials.I(function(t){Vr("FirestoreClient","Received user=",t.uid),r.user.isEqual(t)||(r.user=t,r.nl(t)),r.V.resolve()})}function yp(t,e,n,r){this.Ns=t,this.Wr=e,this.updateFunction=n,this.Os=r,this.Yh=5,this.Ks=new ba(this.Ns,"transaction_retry")}function gp(t){this.Wr=t,this.Bh=new Map,this.mutations=[],this.Qh=!1,this.jh=null,this.Wh=new Set}function mp(e){return v(this,void 0,void 0,function(){return y(this,function(t){switch(t.label){case 0:return e.rl?[3,2]:(Vr("FirestoreClient","Using default OfflineComponentProvider"),[4,function(r,i){return v(this,void 0,void 0,function(){var e,n=this;return y(this,function(t){switch(t.label){case 0:return r.Ns.si(),Vr("FirestoreClient","Initializing OfflineComponentProvider"),[4,r.getConfiguration()];case 1:return e=t.sent(),[4,i.initialize(e)];case 2:return t.sent(),r.el(function(e){return r.Ns.ti(function(){return v(n,void 0,void 0,function(){return y(this,function(t){switch(t.label){case 0:return[4,xa(i.jr,e)];case 1:return t.sent(),[2]}})})})}),i.persistence.xc(function(){return r.terminate()}),r.rl=i,[2]}})})}(e,new Ec)]);case 1:t.sent(),t.label=2;case 2:return[2,e.rl]}})})}function wp(e){return v(this,void 0,void 0,function(){return y(this,function(t){switch(t.label){case 0:return e.il?[3,2]:(Vr("FirestoreClient","Using default OnlineComponentProvider"),[4,function(r,i){return v(this,void 0,void 0,function(){var e,n;return y(this,function(t){switch(t.label){case 0:return r.Ns.si(),[4,mp(r)];case 1:return e=t.sent(),Vr("FirestoreClient","Initializing OnlineComponentProvider"),[4,r.getConfiguration()];case 2:return n=t.sent(),[4,i.initialize(e,n)];case 3:return t.sent(),r.el(function(t){return r.Ns.ti(function(){return function(r,i){return v(this,void 0,void 0,function(){var e,n;return y(this,function(t){switch(t.label){case 0:return(e=r).Ns.si(),Vr("RemoteStore","RemoteStore received new credentials"),n=fh(e),e.Hr.add(3),[4,oh(e)];case 1:return t.sent(),n&&e.Zr.set("Unknown"),[4,e.Gr.Va(i)];case 2:return t.sent(),e.Hr.delete(3),[4,ih(e)];case 3:return t.sent(),[2]}})})}(i.Au,t)})}),r.il=i,[2]}})})}(e,new Tc)]);case 1:t.sent(),t.label=2;case 2:return[2,e.il]}})})}function bp(t){return mp(t).then(function(t){return t.persistence})}function Ep(t){return mp(t).then(function(t){return t.jr})}function Tp(t){return wp(t).then(function(t){return t.Au})}function Ip(t){return wp(t).then(function(t){return t.Pa})}function Ap(r){return v(this,void 0,void 0,function(){var e,n;return y(this,function(t){switch(t.label){case 0:return[4,wp(r)];case 1:return e=t.sent(),[2,((n=e.Iu).ho=zh.bind(null,e.Pa),n.fo=function(i,o){return v(this,void 0,void 0,function(){var e,n,r;return y(this,function(t){switch(t.label){case 0:return n=(e=i).Vu.get(o),1<(r=e.pu.get(n.targetId)).length?[2,(e.pu.set(n.targetId,r.filter(function(t){return!Tu(t,o)})),void e.Vu.delete(o))]:e.Fu?(e.Ru.Go(n.targetId),e.Ru.Yo(n.targetId)?[3,2]:[4,Ga(e.jr,n.targetId,!1).then(function(){e.Ru.zo(n.targetId),uh(e.Au,n.targetId),Jh(e,n.targetId)}).catch(Wa)]):[3,3];case 1:t.sent(),t.label=2;case 2:return[3,5];case 3:return Jh(e,n.targetId),[4,Ga(e.jr,n.targetId,!0)];case 4:t.sent(),t.label=5;case 5:return[2]}})})}.bind(null,e.Pa),n)]}})})}function Np(n,r,i,o,s){var t=new Ic({next:function(t){r.Ms(function(){return Nh(n,u)});var e=t.docs.has(i);!e&&t.fromCache?s.reject(new Br(Gr.UNAVAILABLE,"Failed to get document because the client is offline.")):e&&t.fromCache&&o&&"server"===o.source?s.reject(new Br(Gr.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):s.resolve(t)},error:function(t){return s.reject(t)}}),u=new Rh(pu(i.path),t,{includeMetadataChanges:!0,Ro:!0});return Ah(n,u)}function Op(e,n,t,r,i){var o=new Ic({next:function(t){n.Ms(function(){return Nh(e,s)}),t.fromCache&&"server"===r.source?i.reject(new Br(Gr.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(t)},error:function(t){return i.reject(t)}}),s=new Rh(t,o,{includeMetadataChanges:!0,Ro:!0});return Ah(e,s)}var Rp=(kp.prototype.set=function(t,e,n){this.hl();t=Dp(t,this.ah),e=Ed(t.fh,e,n),n=Zf(this.al,"WriteBatch.set",t.lh,e,null!==t.fh,n);return this.ul=this.ul.concat(n.Ph(t.lh,Ds.ce())),this},kp.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];this.hl();t=Dp(t,this.ah);return e instanceof Ac&&(e=e.va),e="string"==typeof e||e instanceof ql?ep(this.al,"WriteBatch.update",t.lh,e,n,r):tp(this.al,"WriteBatch.update",t.lh,e),this.ul=this.ul.concat(e.Ph(t.lh,Ds.exists(!0))),this},kp.prototype.delete=function(t){this.hl();t=Dp(t,this.ah);return this.ul=this.ul.concat(new Ks(t.lh,Ds.ce())),this},kp.prototype.commit=function(){return this.hl(),this.cl=!0,0<this.ul.length?this.ol(this.ul):Promise.resolve()},kp.prototype.hl=function(){if(this.cl)throw new Br(Gr.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},kp);function kp(t,e){this.ah=t,this.ol=e,this.ul=[],this.cl=!1,this.al=Gf(t)}function Dp(t,e){if(t instanceof Ac&&(t=t.va),t.firestore!==e)throw new Br(Gr.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}var Sp,Pp,_p=(Mp.prototype.get=function(t){var e=this,n=Dp(t,this.ah),r=new xf(this.ah);return this.ll.Gh([n.lh]).then(function(t){if(!t||1!==t.length)return xr();t=t[0];if(t instanceof uu)return new Pl(e.ah,r,n.lh,null,n.fh);if(t instanceof su)return new Pl(e.ah,r,t.key,t,n.fh);throw xr()})},Mp.prototype.set=function(t,e,n){t=Dp(t,this.ah),e=Ed(t.fh,e,n),n=Zf(this.al,"Transaction.set",t.lh,e,null!==t.fh,n);return this.ll.set(t.lh,n),this},Mp.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];t=Dp(t,this.ah);return e instanceof Ac&&(e=e.va),e="string"==typeof e||e instanceof ql?ep(this.al,"Transaction.update",t.lh,e,n,r):tp(this.al,"Transaction.update",t.lh,e),this.ll.update(t.lh,e),this},Mp.prototype.delete=function(t){t=Dp(t,this.ah);return this.ll.delete(t.lh),this},n(xp,Pp=Mp),xp.prototype.get=function(t){var e=this,n=Dp(t,this.ah),r=new tf(this.ah);return Pp.prototype.get.call(this,t).then(function(t){return new Hl(e.ah,r,n.lh,t._h,new sd(!1,!1),n.fh)})},xp),Lp="You are using the memory-only build of Firestore. Persistence support is only available via the @firebase/firestore bundle or the firebase-firestore.js build.",Vp=(jp.prototype.enableIndexedDbPersistence=function(t,e){throw new Br(Gr.FAILED_PRECONDITION,Lp)},jp.prototype.enableMultiTabIndexedDbPersistence=function(t){throw new Br(Gr.FAILED_PRECONDITION,Lp)},jp.prototype.clearIndexedDbPersistence=function(t){throw new Br(Gr.FAILED_PRECONDITION,Lp)},jp),Cp=(n(Up,Sp=Ac),Object.defineProperty(Up.prototype,"Ba",{get:function(){return this.va.Ba},enumerable:!1,configurable:!0}),Up.prototype.settings=function(t){t.merge&&delete(t=Object.assign(Object.assign({},this.va.Ha()),t)).merge,this.va.za(t)},Up.prototype.useEmulator=function(t,e){"firestore.googleapis.com"!==this.va.Ha().host&&Ur("Host has been set in both settings() and useEmulator(), emulator host will be used"),this.settings({host:t+":"+e,ssl:!1,merge:!0})},Up.prototype.enableNetwork=function(){return function(r){var t=this;return r.Ns.enqueue(function(){return v(t,void 0,void 0,function(){var e,n;return y(this,function(t){switch(t.label){case 0:return[4,bp(r)];case 1:return e=t.sent(),[4,Tp(r)];case 2:return n=t.sent(),[2,(e.Fc(!0),(t=n).Hr.delete(0),ih(t))]}})})})}(qp(this.va))},Up.prototype.disableNetwork=function(){return function(r){var t=this;return r.Ns.enqueue(function(){return v(t,void 0,void 0,function(){var e,n;return y(this,function(t){switch(t.label){case 0:return[4,bp(r)];case 1:return e=t.sent(),[4,Tp(r)];case 2:return n=t.sent(),[2,(e.Fc(!1),function(n){return v(this,void 0,void 0,function(){var e;return y(this,function(t){switch(t.label){case 0:return(e=n).Hr.add(0),[4,oh(e)];case 1:return t.sent(),e.Zr.set("Offline"),[2]}})})}(n))]}})})})}(qp(this.va))},Up.prototype.enablePersistence=function(t){var e=!1,n=!1;return t&&Hc("synchronizeTabs",e=!!t.synchronizeTabs,"experimentalForceOwningTab",n=!!t.experimentalForceOwningTab),e?this._l.enableMultiTabIndexedDbPersistence(this):this._l.enableIndexedDbPersistence(this,n)},Up.prototype.clearPersistence=function(){return this._l.clearIndexedDbPersistence(this)},Up.prototype.terminate=function(){return this.app._removeServiceInstance("firestore"),this.app._removeServiceInstance("firestore-exp"),this.va._delete()},Up.prototype.waitForPendingWrites=function(){return function(n){var t=this,r=new ua;return n.Ns.Ms(function(){return v(t,void 0,void 0,function(){var e;return y(this,function(t){switch(t.label){case 0:return e=Kh,[4,Ip(n)];case 1:return[2,e.apply(void 0,[t.sent(),r])]}})})}),r.promise}(qp(this.va))},Up.prototype.onSnapshotsInSync=function(t){return function(t,e){var n=this,r=qp(t),e=pa(e)?e:{next:e},i=new Ic(e);return t.wh.Ms(function(){return v(n,void 0,void 0,function(){var e;return y(this,function(t){switch(t.label){case 0:return e=function(t,e){t.ao.add(e),e.next()},[4,Ap(r)];case 1:return e.apply(void 0,[t.sent(),i]),[2]}})})}),function(){i.ga(),t.wh.Ms(function(){return v(n,void 0,void 0,function(){var e;return y(this,function(t){switch(t.label){case 0:return e=function(t,e){t.ao.delete(e)},[4,Ap(r)];case 1:return e.apply(void 0,[t.sent(),i]),[2]}})})})}}(this.va,t)},Object.defineProperty(Up.prototype,"app",{get:function(){if(!this.fl)throw new Br(Gr.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.fl},enumerable:!1,configurable:!0}),Up.prototype.collection=function(t){try{return new fd(this,Cf(this.va,t))}catch(t){throw Qp(t,"collection()","Firestore.collection()")}},Up.prototype.doc=function(t){try{return new Xp(this,Uf(this.va,t))}catch(t){throw Qp(t,"doc()","Firestore.doc()")}},Up.prototype.collectionGroup=function(t){try{return new hd(this,function(t,e){if(Wc("collectionGroup","collection id",e),0<=e.indexOf("/"))throw new Br(Gr.INVALID_ARGUMENT,"Invalid collection ID '"+e+"' passed to function collectionGroup(). Collection IDs must not contain '/'.");return new af(t,null,(e=e,new hu(ui.X(),e)))}(this.va,t))}catch(t){throw Qp(t,"collectionGroup()","Firestore.collectionGroup()")}},Up.prototype.runTransaction=function(e){var n,r=this;return function(n,r){var t=this,i=new ua;return n.Ns.Ms(function(){return v(t,void 0,void 0,function(){var e;return y(this,function(t){switch(t.label){case 0:return[4,wp(n).then(function(t){return t.Wr})];case 1:return e=t.sent(),new pp(n.Ns,e,r,i).run(),[2]}})})}),i.promise}(qp(n=this.va),function(t){return t=new _p(n,t),e(new zp(r,t))})},Up.prototype.batch=function(){var e=this;return qp(this.va),new Hp(new Rp(this.va,function(t){return of(e.va,t)}))},Up);function Up(t,e,n){var r=this;return(r=Sp.call(this,e)||this)._l=n,r.INTERNAL={delete:function(){return r.terminate()}},t instanceof Rr||(r.fl=t),r}function jp(){}function xp(t,e){var n=this;return(n=Pp.call(this,t,e)||this).ah=t,n}function Mp(t,e){this.ah=t,this.ll=e,this.al=Gf(t)}function qp(t){return t.Eh||Fp(t),t.Eh.sl(),t.Eh}function Fp(t){var e,n,r=t.Ya(),r=(e=t.Ba,n=t.Ma,new Or(e,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling));t.Eh=new dp(t.Qa,t.wh,r)}var Gp,Bp,Wp,zp=(n($p,Wp=Ac),$p.prototype.get=function(t){var e=this,t=bd(t);return this.va.get(t).then(function(t){return new ud(e.ah,t)})},$p.prototype.set=function(t,e,n){t=bd(t);return n?(zc("Transaction.set",n),this.va.set(t,e,n)):this.va.set(t,e),this},$p.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];var o=bd(t);return 2===arguments.length?this.va.update(o,e):(t=this.va).update.apply(t,s([o,e,n],r)),this},$p.prototype.delete=function(t){t=bd(t);return this.va.delete(t),this},$p),Hp=(n(Kp,Bp=Ac),Kp.prototype.set=function(t,e,n){t=bd(t);return n?(zc("WriteBatch.set",n),this.va.set(t,e,n)):this.va.set(t,e),this},Kp.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];var o=bd(t);return 2===arguments.length?this.va.update(o,e):(t=this.va).update.apply(t,s([o,e,n],r)),this},Kp.prototype.delete=function(t){t=bd(t);return this.va.delete(t),this},Kp.prototype.commit=function(){return this.va.commit()},Kp),Xp=(n(Yp,Gp=Ac),Yp.dl=function(t,e,n){if(t.length%2!=0)throw new Br(Gr.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t.Y()+" has "+t.length);return new Yp(e,new uf(e.va,n,new ci(t)))},Yp.uh=function(t,e,n){return new Yp(e,new uf(e.va,n,t))},Object.defineProperty(Yp.prototype,"id",{get:function(){return this.va.id},enumerable:!1,configurable:!0}),Object.defineProperty(Yp.prototype,"parent",{get:function(){return new fd(this.firestore,this.va.parent)},enumerable:!1,configurable:!0}),Object.defineProperty(Yp.prototype,"path",{get:function(){return this.va.path},enumerable:!1,configurable:!0}),Yp.prototype.collection=function(t){try{return new fd(this.firestore,Cf(this.va,t))}catch(t){throw Qp(t,"collection()","DocumentReference.collection()")}},Yp.prototype.isEqual=function(t){return t instanceof Ac&&(t=t.va),t instanceof uf&&qf(this.va,t)},Yp.prototype.set=function(t,e){e=zc("DocumentReference.set",e);try{return n=this.va,r=t,i=e,o=$c(n.firestore,Fl),r=Ed(n.fh,r,i),of(o,Zf(Gf(o),"setDoc",n.lh,r,null!==n.fh,i).Ph(n.lh,Ds.ce()))}catch(t){throw Qp(t,"setDoc()","DocumentReference.set()")}var n,r,i,o},Yp.prototype.update=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];try{return 1===arguments.length?nf(this.va,t):nf.apply(void 0,s([this.va,t,e],n))}catch(t){throw Qp(t,"updateDoc()","DocumentReference.update()")}},Yp.prototype.delete=function(){return of($c((t=this.va).firestore,Fl),[new Ks(t.lh,Ds.ce())]);var t},Yp.prototype.onSnapshot=function(){for(var e=this,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=Jp(t),i=Zp(t,function(t){return new ud(e.firestore,new Hl(e.firestore.va,e.hh,t.lh,t._h,t.metadata,e.va.fh))});return rf(this.va,r,i)},Yp.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(e){var t=this,n=$c(e.firestore,Fl),r=qp(n),i=new tf(n),o=new ua;return n.wh.Ms(function(){return v(t,void 0,void 0,function(){return y(this,function(t){switch(t.label){case 0:return[4,Ep(r)];case 1:return[4,function(i,o,s){return v(this,void 0,void 0,function(){var r;return y(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,(e=o,(n=i).persistence.runTransaction("read document","readonly",function(t){return n.yi.Ge(t,e)}))];case 1:return(r=t.sent())instanceof su?s.resolve(r):r instanceof uu?s.resolve(null):s.reject(new Br(Gr.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),[3,3];case 2:return r=t.sent(),r=ka(r,"Failed to get document '"+o+" from cache"),s.reject(r),[3,3];case 3:return[2]}var e,n})})}(t.sent(),e.lh,o)];case 2:return t.sent(),[2]}})})}),o.promise.then(function(t){return new Hl(n,i,e.lh,t,new sd(t instanceof su&&t.ae,!0),e.fh)})}:"server"===(null==t?void 0:t.source)?function(e){var t=this,n=$c(e.firestore,Fl),r=qp(n),i=new ua;return n.wh.Ms(function(){return v(t,void 0,void 0,function(){return y(this,function(t){switch(t.label){case 0:return[4,Ap(r)];case 1:return[4,Np(t.sent(),n.wh,e.lh,{source:"server"},i)];case 2:return t.sent(),[2]}})})}),i.promise.then(function(t){return sf(n,e,t)})}:function(e){var t=this,n=$c(e.firestore,Fl),r=qp(n),i=new ua;return n.wh.Ms(function(){return v(t,void 0,void 0,function(){return y(this,function(t){switch(t.label){case 0:return[4,Ap(r)];case 1:return[4,Np(t.sent(),n.wh,e.lh,{source:"default"},i)];case 2:return t.sent(),[2]}})})}),i.promise.then(function(t){return sf(n,e,t)})})(this.va).then(function(t){return new ud(e.firestore,new Hl(e.firestore.va,e.hh,t.lh,t._h,t.metadata,e.va.fh))})},Yp.prototype.withConverter=function(t){return new Yp(this.firestore,this.va.withConverter(t))},Yp);function Yp(t,e){var n=this;return(n=Gp.call(this,e)||this).firestore=t,n.hh=new Sl(t),n}function Kp(){return null!==Bp&&Bp.apply(this,arguments)||this}function $p(t,e){var n=this;return(n=Wp.call(this,e)||this).ah=t,n}function Qp(t,e,n){return t.message=t.message.replace(e,n),t}function Jp(t){for(var e=0,n=t;e<n.length;e++){var r=n[e];if("object"==typeof r&&!pa(r))return r}return{}}function Zp(t,e){var n;return{next:function(t){n.next&&n.next(e(t))},error:null===(t=(n=pa(t[0])?t[0]:pa(t[1])?t[1]:"function"==typeof t[0]?{next:t[0],error:t[1],complete:t[2]}:{next:t[1],error:t[2],complete:t[3]}).error)||void 0===t?void 0:t.bind(n),complete:null===(t=n.complete)||void 0===t?void 0:t.bind(n)}}var td,ed,nd,rd,id,od,sd=(wd.prototype.isEqual=function(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache},wd),ud=(n(md,od=Ac),Object.defineProperty(md.prototype,"ref",{get:function(){return new Xp(this.ah,this.va.ref)},enumerable:!1,configurable:!0}),Object.defineProperty(md.prototype,"id",{get:function(){return this.va.id},enumerable:!1,configurable:!0}),Object.defineProperty(md.prototype,"metadata",{get:function(){return this.va.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(md.prototype,"exists",{get:function(){return this.va.exists()},enumerable:!1,configurable:!0}),md.prototype.data=function(t){return this.va.data(t)},md.prototype.get=function(t,e){return this.va.get(t,e)},md.prototype.isEqual=function(t){return Jl(this.va,t.va)},md),ad=(n(gd,id=ud),gd.prototype.data=function(t){return this.va.data(t)},gd),hd=(n(yd,rd=Ac),yd.prototype.where=function(t,e,n){try{return new yd(this.firestore,lf(this.va,(r=n,i=e,o=xl("where",t),new gf(o,i,r))))}catch(t){throw Qp(t,/(orderBy|where)\(\)/,"Query.$1()")}var r,i,o},yd.prototype.orderBy=function(n,t){try{return new yd(this.firestore,lf(this.va,function(t){void 0===t&&(t="asc");var e=t,t=xl("orderBy",n);return new mf(t,e)}(t)))}catch(n){throw Qp(n,/(orderBy|where)\(\)/,"Query.$1()")}},yd.prototype.limit=function(t){try{return new yd(this.firestore,lf(this.va,(Qc("limit",e=t),new wf("limit",e,"F"))))}catch(t){throw Qp(t,"limit()","Query.limit()")}var e},yd.prototype.limitToLast=function(t){try{return new yd(this.firestore,lf(this.va,(Qc("limitToLast",e=t),new wf("limitToLast",e,"L"))))}catch(t){throw Qp(t,"limitToLast()","Query.limitToLast()")}var e},yd.prototype.startAt=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];try{return new yd(this.firestore,lf(this.va,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new bf("startAt",t,!0)}.apply(void 0,t)))}catch(t){throw Qp(t,"startAt()","Query.startAt()")}},yd.prototype.startAfter=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];try{return new yd(this.firestore,lf(this.va,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new bf("startAfter",t,!1)}.apply(void 0,t)))}catch(t){throw Qp(t,"startAfter()","Query.startAfter()")}},yd.prototype.endBefore=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];try{return new yd(this.firestore,lf(this.va,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Ef("endBefore",t,!0)}.apply(void 0,t)))}catch(t){throw Qp(t,"endBefore()","Query.endBefore()")}},yd.prototype.endAt=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];try{return new yd(this.firestore,lf(this.va,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Ef("endAt",t,!1)}.apply(void 0,t)))}catch(t){throw Qp(t,"endAt()","Query.endAt()")}},yd.prototype.isEqual=function(t){return Ff(this.va,t.va)},yd.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(e){var t=this,n=$c(e.firestore,Fl),r=qp(n),i=new tf(n),o=new ua;return n.wh.Ms(function(){return v(t,void 0,void 0,function(){return y(this,function(t){switch(t.label){case 0:return[4,Ep(r)];case 1:return[4,function(r,i,o){return v(this,void 0,void 0,function(){var e,n;return y(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,Ba(r,i,!0)];case 1:return n=t.sent(),e=new Vh(i,n.Ji),n=e.uu(n.documents),n=e.lu(n,!1),o.resolve(n.snapshot),[3,3];case 2:return n=t.sent(),n=ka(n,"Failed to execute query '"+i+" against cache"),o.reject(n),[3,3];case 3:return[2]}})})}(t.sent(),e.Rh,o)];case 2:return t.sent(),[2]}})})}),o.promise.then(function(t){return new Yl(n,i,e,t)})}:"server"===(null==t?void 0:t.source)?function(e){var t=this,n=$c(e.firestore,Fl),r=qp(n),i=new tf(n),o=new ua;return n.wh.Ms(function(){return v(t,void 0,void 0,function(){return y(this,function(t){switch(t.label){case 0:return[4,Ap(r)];case 1:return[4,Op(t.sent(),n.wh,e.Rh,{source:"server"},o)];case 2:return t.sent(),[2]}})})}),o.promise.then(function(t){return new Yl(n,i,e,t)})}:function(e){var t=this,n=$c(e.firestore,Fl),r=qp(n),i=new tf(n);Pf(e.Rh);var o=new ua;return n.wh.Ms(function(){return v(t,void 0,void 0,function(){return y(this,function(t){switch(t.label){case 0:return[4,Ap(r)];case 1:return[4,Op(t.sent(),n.wh,e.Rh,{source:"default"},o)];case 2:return t.sent(),[2]}})})}),o.promise.then(function(t){return new Yl(n,i,e,t)})})(this.va).then(function(t){return new ld(e.firestore,t)})},yd.prototype.onSnapshot=function(){for(var e=this,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=Jp(t),i=Zp(t,function(t){return new ld(e.firestore,t)});return rf(this.va,r,i)},yd.prototype.withConverter=function(t){return new yd(this.firestore,this.va.withConverter(t))},yd),cd=(n(vd,nd=Ac),Object.defineProperty(vd.prototype,"type",{get:function(){return this.va.type},enumerable:!1,configurable:!0}),Object.defineProperty(vd.prototype,"doc",{get:function(){return new ad(this.ah,this.va.doc)},enumerable:!1,configurable:!0}),Object.defineProperty(vd.prototype,"oldIndex",{get:function(){return this.va.oldIndex},enumerable:!1,configurable:!0}),Object.defineProperty(vd.prototype,"newIndex",{get:function(){return this.va.newIndex},enumerable:!1,configurable:!0}),vd),ld=(n(dd,ed=Ac),Object.defineProperty(dd.prototype,"query",{get:function(){return new hd(this.ah,this.va.query)},enumerable:!1,configurable:!0}),Object.defineProperty(dd.prototype,"metadata",{get:function(){return this.va.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(dd.prototype,"size",{get:function(){return this.va.size},enumerable:!1,configurable:!0}),Object.defineProperty(dd.prototype,"empty",{get:function(){return this.va.empty},enumerable:!1,configurable:!0}),Object.defineProperty(dd.prototype,"docs",{get:function(){var e=this;return this.va.docs.map(function(t){return new ad(e.ah,t)})},enumerable:!1,configurable:!0}),dd.prototype.docChanges=function(t){var e=this;return this.va.docChanges(t).map(function(t){return new cd(e.ah,t)})},dd.prototype.forEach=function(e,n){var r=this;this.va.forEach(function(t){e.call(n,new ad(r.ah,t))})},dd.prototype.isEqual=function(t){return Jl(this.va,t.va)},dd),fd=(n(pd,td=hd),Object.defineProperty(pd.prototype,"id",{get:function(){return this.va.id},enumerable:!1,configurable:!0}),Object.defineProperty(pd.prototype,"path",{get:function(){return this.va.path},enumerable:!1,configurable:!0}),Object.defineProperty(pd.prototype,"parent",{get:function(){var t=this.va.parent;return t?new Xp(this.firestore,t):null},enumerable:!1,configurable:!0}),pd.prototype.doc=function(t){try{return new Xp(this.firestore,void 0===t?Uf(this.va):Uf(this.va,t))}catch(t){throw Qp(t,"doc()","CollectionReference.doc()")}},pd.prototype.add=function(t){var e,n,r,i=this;return e=this.va,n=t,t=$c(e.firestore,Fl),r=Uf(e),n=Ed(e.fh,n),of(t,Zf(Gf(e.firestore),"addDoc",r.lh,n,null!==e.fh,{}).Ph(r.lh,Ds.exists(!1))).then(function(){return r}).then(function(t){return new Xp(i.firestore,t)})},pd.prototype.isEqual=function(t){return qf(this.va,t.va)},pd.prototype.withConverter=function(t){return new pd(this.firestore,this.va.withConverter(t))},pd);function pd(t,e){var n=this;return(n=td.call(this,t,e)||this).firestore=t,n.va=e,n}function dd(t,e){var n=this;return(n=ed.call(this,e)||this).ah=t,n}function vd(t,e){var n=this;return(n=nd.call(this,e)||this).ah=t,n}function yd(t,e){var n=this;return(n=rd.call(this,e)||this).firestore=t,n}function gd(){return null!==id&&id.apply(this,arguments)||this}function md(t,e){var n=this;return(n=od.call(this,e)||this).ah=t,n}function wd(t,e){this.hasPendingWrites=t,this.fromCache=e}function bd(t){return t instanceof Ac&&(t=t.va),$c(t,uf)}function Ed(t,e,n){return t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e}var Td,Id,Ad,l=(n(Rd,Id=Ac),Rd.documentId=function(){return new Rd(hi.nt().Y())},Rd.prototype.isEqual=function(t){return t instanceof Ac&&(t=t.va),t instanceof ql&&this.va.dh.isEqual(t.dh)},Rd),Ie=(n(Od,Td=Ac),Od.serverTimestamp=function(){var t=new ul("serverTimestamp");return t.ba="FieldValue.serverTimestamp",new Od(t)},Od.delete=function(){var t=new tl("deleteField");return t.ba="FieldValue.delete",new Od(t)},Od.arrayUnion=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new al("arrayUnion",t)}.apply(void 0,t);return n.ba="FieldValue.arrayUnion",new Od(n)},Od.arrayRemove=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new hl("arrayRemove",t)}.apply(void 0,t);return n.ba="FieldValue.arrayRemove",new Od(n)},Od.increment=function(t){t=new cl("increment",t);return t.ba="FieldValue.increment",new Od(t)},Od.prototype.isEqual=function(t){return this.va.isEqual(t.va)},Od),Nd={Firestore:Cp,GeoPoint:ll,Timestamp:oi,Blob:Dl,Transaction:zp,WriteBatch:Hp,DocumentReference:Xp,DocumentSnapshot:ud,Query:hd,QueryDocumentSnapshot:ad,QuerySnapshot:ld,CollectionReference:fd,FieldPath:l,FieldValue:Ie,setLogLevel:function(t){_r.setLogLevel(t)},CACHE_SIZE_UNLIMITED:-1};function Od(){return null!==Td&&Td.apply(this,arguments)||this}function Rd(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Id.call(this,new(ql.bind.apply(ql,s([void 0],t))))||this}(Ad=e.default).INTERNAL.registerComponent(new Ar("firestore",function(t){return e=t.getProvider("app").getImmediate(),t=t.getProvider("auth-internal"),new Cp(e,new Fl(e,t),new Vp);var e},"PUBLIC").setServiceProps(Object.assign({},Nd))),Ad.registerVersion("@firebase/firestore","2.0.4-2020102005919")}).apply(this,arguments)}catch(t){throw console.error(t),new Error("Cannot instantiate firebase-firestore.memory.js - be sure to load firebase-app.js first.")}});
//# sourceMappingURL=firebase-firestore.memory.js.map
