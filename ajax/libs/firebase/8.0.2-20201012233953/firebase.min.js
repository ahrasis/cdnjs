!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t="undefined"!=typeof globalThis?globalThis:t||self).firebase=e()}(this,function(){"use strict";function r(t){if("string"!=typeof t&&(t=String(t)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(t))throw new TypeError("Invalid character in header field name");return t.toLowerCase()}function i(t){return"string"!=typeof t&&(t=String(t)),t}function t(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return p&&(t[Symbol.iterator]=function(){return t}),t}function s(e){this.map={},e instanceof s?e.forEach(function(t,e){this.append(e,t)},this):Array.isArray(e)?e.forEach(function(t){this.append(t[0],t[1])},this):e&&Object.getOwnPropertyNames(e).forEach(function(t){this.append(t,e[t])},this)}function o(t){if(t.bodyUsed)return Promise.reject(new TypeError("Already read"));t.bodyUsed=!0}function a(n){return new Promise(function(t,e){n.onload=function(){t(n.result)},n.onerror=function(){e(n.error)}})}function e(t){var e=new FileReader,n=a(e);return e.readAsArrayBuffer(t),n}function n(t){if(t.slice)return t.slice(0);var e=new Uint8Array(t.byteLength);return e.set(new Uint8Array(t)),e.buffer}function u(){return this.bodyUsed=!1,this._initBody=function(t){if(this._bodyInit=t)if("string"==typeof t)this._bodyText=t;else if(d&&Blob.prototype.isPrototypeOf(t))this._bodyBlob=t;else if(v&&FormData.prototype.isPrototypeOf(t))this._bodyFormData=t;else if(f&&URLSearchParams.prototype.isPrototypeOf(t))this._bodyText=t.toString();else if(y&&d&&m(t))this._bodyArrayBuffer=n(t.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer]);else{if(!y||!ArrayBuffer.prototype.isPrototypeOf(t)&&!_(t))throw new Error("unsupported BodyInit type");this._bodyArrayBuffer=n(t)}else this._bodyText="";this.headers.get("content-type")||("string"==typeof t?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):f&&URLSearchParams.prototype.isPrototypeOf(t)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},d&&(this.blob=function(){var t=o(this);if(t)return t;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?o(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(e)}),this.text=function(){var t,e,n=o(this);if(n)return n;if(this._bodyBlob)return t=this._bodyBlob,n=a(e=new FileReader),e.readAsText(t),n;if(this._bodyArrayBuffer)return Promise.resolve(function(t){for(var e=new Uint8Array(t),n=new Array(e.length),r=0;r<e.length;r++)n[r]=String.fromCharCode(e[r]);return n.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},v&&(this.formData=function(){return this.text().then(h)}),this.json=function(){return this.text().then(JSON.parse)},this}function c(t,e){var n,r=(e=e||{}).body;if(t instanceof c){if(t.bodyUsed)throw new TypeError("Already read");this.url=t.url,this.credentials=t.credentials,e.headers||(this.headers=new s(t.headers)),this.method=t.method,this.mode=t.mode,r||null==t._bodyInit||(r=t._bodyInit,t.bodyUsed=!0)}else this.url=String(t);if(this.credentials=e.credentials||this.credentials||"omit",!e.headers&&this.headers||(this.headers=new s(e.headers)),this.method=(t=(n=e.method||this.method||"GET").toUpperCase(),-1<b.indexOf(t)?t:n),this.mode=e.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&r)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(r)}function h(t){var n=new FormData;return t.trim().split("&").forEach(function(t){var e;t&&(t=(e=t.split("=")).shift().replace(/\+/g," "),e=e.join("=").replace(/\+/g," "),n.append(decodeURIComponent(t),decodeURIComponent(e)))}),n}function l(t,e){e=e||{},this.type="default",this.status=void 0===e.status?200:e.status,this.ok=200<=this.status&&this.status<300,this.statusText="statusText"in e?e.statusText:"OK",this.headers=new s(e.headers),this.url=e.url||"",this._initBody(t)}var f,p,d,v,y,g,m,_,b,w;(ht="undefined"!=typeof self?self:void 0).fetch||(f="URLSearchParams"in ht,p="Symbol"in ht&&"iterator"in Symbol,d="FileReader"in ht&&"Blob"in ht&&function(){try{return new Blob,!0}catch(t){return!1}}(),v="FormData"in ht,(y="ArrayBuffer"in ht)&&(g=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],m=function(t){return t&&DataView.prototype.isPrototypeOf(t)},_=ArrayBuffer.isView||function(t){return t&&-1<g.indexOf(Object.prototype.toString.call(t))}),s.prototype.append=function(t,e){t=r(t),e=i(e);var n=this.map[t];this.map[t]=n?n+","+e:e},s.prototype.delete=function(t){delete this.map[r(t)]},s.prototype.get=function(t){return t=r(t),this.has(t)?this.map[t]:null},s.prototype.has=function(t){return this.map.hasOwnProperty(r(t))},s.prototype.set=function(t,e){this.map[r(t)]=i(e)},s.prototype.forEach=function(t,e){for(var n in this.map)this.map.hasOwnProperty(n)&&t.call(e,this.map[n],n,this)},s.prototype.keys=function(){var n=[];return this.forEach(function(t,e){n.push(e)}),t(n)},s.prototype.values=function(){var e=[];return this.forEach(function(t){e.push(t)}),t(e)},s.prototype.entries=function(){var n=[];return this.forEach(function(t,e){n.push([e,t])}),t(n)},p&&(s.prototype[Symbol.iterator]=s.prototype.entries),b=["DELETE","GET","HEAD","OPTIONS","POST","PUT"],c.prototype.clone=function(){return new c(this,{body:this._bodyInit})},u.call(c.prototype),u.call(l.prototype),l.prototype.clone=function(){return new l(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new s(this.headers),url:this.url})},l.error=function(){var t=new l(null,{status:0,statusText:""});return t.type="error",t},w=[301,302,303,307,308],l.redirect=function(t,e){if(-1===w.indexOf(e))throw new RangeError("Invalid status code");return new l(null,{status:e,headers:{location:t}})},ht.Headers=s,ht.Request=c,ht.Response=l,ht.fetch=function(n,o){return new Promise(function(r,t){var e=new c(n,o),i=new XMLHttpRequest;i.onload=function(){var n,t={status:i.status,statusText:i.statusText,headers:(e=i.getAllResponseHeaders()||"",n=new s,e.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach(function(t){var e=t.split(":");(t=e.shift().trim())&&(e=e.join(":").trim(),n.append(t,e))}),n)};t.url="responseURL"in i?i.responseURL:t.headers.get("X-Request-URL");var e="response"in i?i.response:i.responseText;r(new l(e,t))},i.onerror=function(){t(new TypeError("Network request failed"))},i.ontimeout=function(){t(new TypeError("Network request failed"))},i.open(e.method,e.url,!0),"include"===e.credentials?i.withCredentials=!0:"omit"===e.credentials&&(i.withCredentials=!1),"responseType"in i&&d&&(i.responseType="blob"),e.headers.forEach(function(t,e){i.setRequestHeader(e,t)}),i.send(void 0===e._bodyInit?null:e._bodyInit)})},ht.fetch.polyfill=!0);var E="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function I(t,e,n){return t(n={path:e,exports:{},require:function(t,e){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(null==e&&n.path)}},n.exports),n.exports}function T(t){try{return!!t()}catch(t){return!0}}function S(t){return"object"==typeof t?null!==t:"function"==typeof t}function C(t){return U?F.createElement(t):{}}function N(t){if(!S(t))throw TypeError(String(t)+" is not an object");return t}function A(t,e){if(!S(t))return t;var n,r;if(e&&"function"==typeof(n=t.toString)&&!S(r=n.call(t)))return r;if("function"==typeof(n=t.valueOf)&&!S(r=n.call(t)))return r;if(!e&&"function"==typeof(n=t.toString)&&!S(r=n.call(t)))return r;throw TypeError("Can't convert object to primitive value")}function k(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}function O(e,n){try{B(x,e,n)}catch(t){x[e]=n}return n}function P(t,e){return H.call(t,e)}function R(t){return"Symbol("+String(void 0===t?"":t)+")_"+(++G+z).toString(36)}function D(t){return P(X,t)||(Q&&P(J,t)?X[t]=J[t]:X[t]=$("Symbol."+t)),X[t]}var x=(ft=function(t){return t&&t.Math==Math&&t})("object"==typeof globalThis&&globalThis)||ft("object"==typeof window&&window)||ft("object"==typeof self&&self)||ft("object"==typeof E&&E)||Function("return this")(),L=!1,M=!T(function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}),F=x.document,U=S(F)&&S(F.createElement),j=!M&&!T(function(){return 7!=Object.defineProperty(C("div"),"a",{get:function(){return 7}}).a}),V=Object.defineProperty,q={f:M?V:function(t,e,n){if(N(t),e=A(e,!0),N(n),j)try{return V(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported");return"value"in n&&(t[e]=n.value),t}},B=M?function(t,e,n){return q.f(t,e,k(1,n))}:function(t,e,n){return t[e]=n,t},W=x[wt="__core-js_shared__"]||O(wt,{}),K=I(function(t){(t.exports=function(t,e){return W[t]||(W[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.6.5",mode:"global",copyright:"Â© 2020 Denis Pushkarev (zloirock.ru)"})}),H={}.hasOwnProperty,G=0,z=Math.random(),Q=!!Object.getOwnPropertySymbols&&!T(function(){return!String(Symbol())}),Y=Q&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,X=K("wks"),J=x.Symbol,$=Y?J:J&&J.withoutSetter||R;(ae={})[D("toStringTag")]="z";var Z="[object z]"===String(ae),tt=Function.toString;"function"!=typeof W.inspectSource&&(W.inspectSource=function(t){return tt.call(t)});var et,nt,rt,it,ot,st,at,ut,ct=W.inspectSource,ht="function"==typeof(xt=x.WeakMap)&&/native code/.test(ct(xt)),lt=K("keys"),ft=function(t){return lt[t]||(lt[t]=R(t))},pt={},E=x.WeakMap;function dt(t){return gt.call(t).slice(8,-1)}at=ht?(et=new E,nt=et.get,rt=et.has,it=et.set,ot=function(t,e){return it.call(et,t,e),e},st=function(t){return nt.call(et,t)||{}},function(t){return rt.call(et,t)}):(ut=ft("state"),pt[ut]=!0,ot=function(t,e){return B(t,ut,e),e},st=function(t){return P(t,ut)?t[ut]:{}},function(t){return P(t,ut)});var vt={set:ot,get:st,has:at,enforce:function(t){return at(t)?st(t):ot(t,{})},getterFor:function(n){return function(t){var e;if(!S(t)||(e=st(t)).type!==n)throw TypeError("Incompatible receiver, "+n+" required");return e}}},yt=I(function(t){var e=vt.get,s=vt.enforce,a=String(String).split("String");(t.exports=function(t,e,n,r){var i=!!r&&!!r.unsafe,o=!!r&&!!r.enumerable,r=!!r&&!!r.noTargetGet;"function"==typeof n&&("string"!=typeof e||P(n,"name")||B(n,"name",e),s(n).source=a.join("string"==typeof e?e:"")),t!==x?(i?!r&&t[e]&&(o=!0):delete t[e],o?t[e]=n:B(t,e,n)):o?t[e]=n:O(e,n)})(Function.prototype,"toString",function(){return"function"==typeof this&&e(this).source||ct(this)})}),gt={}.toString,mt=D("toStringTag"),_t="Arguments"==dt(function(){return arguments}()),bt=Z?dt:function(t){var e;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(t=function(t,e){try{return t[e]}catch(t){}}(e=Object(t),mt))?t:_t?dt(e):"Object"==(t=dt(e))&&"function"==typeof e.callee?"Arguments":t},wt=Z?{}.toString:function(){return"[object "+bt(this)+"]"};function Et(t){return isNaN(t=+t)?0:(0<t?Dt:Rt)(t)}function It(t){if(null==t)throw TypeError("Can't call method on "+t);return t}function Tt(t){return Ut(It(t))}function St(t){return"function"==typeof t?t:void 0}function Ct(t,e){return arguments.length<2?St(qt[t])||St(x[t]):qt[t]&&qt[t][e]||x[t]&&x[t][e]}function Nt(t){return 0<t?Bt(Et(t),9007199254740991):0}function At(t,e){var n,r=Tt(t),i=0,o=[];for(n in r)!P(pt,n)&&P(r,n)&&o.push(n);for(;e.length>i;)P(r,n=e[i++])&&(~Ht(o,n)||o.push(n));return o}function kt(t,e){for(var n=Xt(e),r=q.f,i=Vt.f,o=0;o<n.length;o++){var s=n[o];P(t,s)||r(t,s,i(e,s))}}function Ot(t,e){var n,r,i,o=t.target,s=t.global,a=t.stat,u=s?x:a?x[o]||O(o,{}):(x[o]||{}).prototype;if(u)for(n in e){if(r=e[n],i=t.noTargetGet?(i=re(u,n))&&i.value:u[n],!ne(s?n:o+(a?".":"#")+n,t.forced)&&void 0!==i){if(typeof r==typeof i)continue;kt(r,i)}(t.sham||i&&i.sham)&&B(r,"sham",!0),yt(u,n,r,t)}}function Pt(t){return Object(It(t))}Z||yt(Object.prototype,"toString",wt,{unsafe:!0});var Rt=Math.ceil,Dt=Math.floor,xt={codeAt:(ae=function(o){return function(t,e){var n,r=String(It(t)),i=Et(e),t=r.length;return i<0||t<=i?o?"":void 0:(e=r.charCodeAt(i))<55296||56319<e||i+1===t||(n=r.charCodeAt(i+1))<56320||57343<n?o?r.charAt(i):e:o?r.slice(i,i+2):n-56320+(e-55296<<10)+65536}})(!1),charAt:ae(!0)},ht={}.propertyIsEnumerable,Lt=Object.getOwnPropertyDescriptor,Mt={f:Lt&&!ht.call({1:2},1)?function(t){return!!(t=Lt(this,t))&&t.enumerable}:ht},Ft="".split,Ut=T(function(){return!Object("z").propertyIsEnumerable(0)})?function(t){return"String"==dt(t)?Ft.call(t,""):Object(t)}:Object,jt=Object.getOwnPropertyDescriptor,Vt={f:M?jt:function(t,e){if(t=Tt(t),e=A(e,!0),j)try{return jt(t,e)}catch(t){}if(P(t,e))return k(!Mt.f.call(t,e),t[e])}},qt=x,Bt=Math.min,Wt=Math.max,Kt=Math.min,Ht=((E=function(a){return function(t,e,n){var r,i=Tt(t),o=Nt(i.length),s=(t=o,(n=Et(n=n))<0?Wt(n+t,0):Kt(n,t));if(a&&e!=e){for(;s<o;)if((r=i[s++])!=r)return!0}else for(;s<o;s++)if((a||s in i)&&i[s]===e)return a||s||0;return!a&&-1}})(!0),E(!1)),Gt=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],zt=Gt.concat("length","prototype"),Qt={f:Object.getOwnPropertyNames||function(t){return At(t,zt)}},Yt={f:Object.getOwnPropertySymbols},Xt=Ct("Reflect","ownKeys")||function(t){var e=Qt.f(N(t)),n=Yt.f;return n?e.concat(n(t)):e},Jt=/#|\.prototype\./,$t=(Z=function(t,e){return(t=Zt[$t(t)])==ee||t!=te&&("function"==typeof e?T(e):!!e)}).normalize=function(t){return String(t).replace(Jt,".").toLowerCase()},Zt=Z.data={},te=Z.NATIVE="N",ee=Z.POLYFILL="P",ne=Z,re=Vt.f,wt=!T(function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype}),ie=ft("IE_PROTO"),oe=Object.prototype,se=wt?Object.getPrototypeOf:function(t){return P(t=Pt(t),ie)?t[ie]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?oe:null},ae=D("iterator"),ht=!1;function ue(){}function ce(t){return"<script>"+t+"<\/script>"}[].keys&&("next"in(wn=[].keys())?(In=se(se(wn)))!==Object.prototype&&(Sn=In):ht=!0),null==Sn&&(Sn={}),P(Sn,ae)||B(Sn,ae,function(){return this});var he,E={IteratorPrototype:Sn,BUGGY_SAFARI_ITERATORS:ht},le=Object.keys||function(t){return At(t,Gt)},fe=M?Object.defineProperties:function(t,e){N(t);for(var n,r=le(e),i=r.length,o=0;o<i;)q.f(t,n=r[o++],e[n]);return t},pe=Ct("document","documentElement"),de="prototype",ve=ft("IE_PROTO"),ye=function(){try{he=document.domain&&new ActiveXObject("htmlfile")}catch(t){}var t;ye=he?function(t){t.write(ce("")),t.close();var e=t.parentWindow.Object;return t=null,e}(he):((t=C("iframe")).style.display="none",pe.appendChild(t),t.src=String("javascript:"),(t=t.contentWindow.document).open(),t.write(ce("document.F=Object")),t.close(),t.F);for(var e=Gt.length;e--;)delete ye[de][Gt[e]];return ye()};function ge(t,e,n){t&&!P(t=n?t:t.prototype,Ie)&&Ee(t,Ie,{configurable:!0,value:e})}function me(){return this}function _e(){return this}function be(t,e,n,r,i,o,s){function a(t){if(t===i&&v)return v;if(!Ae&&t in p)return p[t];switch(t){case"keys":case Oe:case Pe:return function(){return new n(this,t)}}return function(){return new n(this)}}var u;l=e,l+=" Iterator",(u=n).prototype=we(Se,{next:k(1,r)}),ge(u,l,!1),Te[l]=me;var c,h,l=e+" Iterator",f=!1,p=t.prototype,d=p[ke]||p["@@iterator"]||i&&p[i],v=!Ae&&d||a(i);if((r="Array"==e&&p.entries||d)&&(t=se(r.call(new t)),Ne!==Object.prototype&&t.next&&(se(t)!==Ne&&(Ce?Ce(t,Ne):"function"!=typeof t[ke]&&B(t,ke,_e)),ge(t,l,!0))),i==Oe&&d&&d.name!==Oe&&(f=!0,v=function(){return d.call(this)}),p[ke]!==v&&B(p,ke,v),Te[e]=v,i)if(c={values:a(Oe),keys:o?v:a("keys"),entries:a(Pe)},s)for(h in c)!Ae&&!f&&h in p||yt(p,h,c[h]);else Ot({target:e,proto:!0,forced:Ae||f},c);return c}pt[ve]=!0;var we=Object.create||function(t,e){var n;return null!==t?(ue[de]=N(t),n=new ue,ue[de]=null,n[ve]=t):n=ye(),void 0===e?n:fe(n,e)},Ee=q.f,Ie=D("toStringTag"),Te={},Se=E.IteratorPrototype,Ce=Object.setPrototypeOf||("__proto__"in{}?function(){var n,r=!1,t={};try{(n=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(t,[]),r=t instanceof Array}catch(t){}return function(t,e){return N(t),function(){if(!S(e)&&null!==e)throw TypeError("Can't set "+String(e)+" as a prototype")}(),r?n.call(t,e):t.__proto__=e,t}}():void 0),Ne=E.IteratorPrototype,Ae=E.BUGGY_SAFARI_ITERATORS,ke=D("iterator"),Oe="values",Pe="entries",Re=xt.charAt,De="String Iterator",xe=vt.set,Le=vt.getterFor(De);be(String,"String",function(t){xe(this,{type:De,string:String(t),index:0})},function(){var t=Le(this),e=t.string,n=t.index;return n>=e.length?{value:void 0,done:!0}:(n=Re(e,n),t.index+=n.length,{value:n,done:!1})});var Me={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0},Fe=D("unscopables"),Ue=Array.prototype;null==Ue[Fe]&&q.f(Ue,Fe,{configurable:!0,value:we(null)});var Z=function(t){Ue[Fe][t]=!0},je="Array Iterator",Ve=vt.set,qe=vt.getterFor(je),Be=be(Array,"Array",function(t,e){Ve(this,{type:je,target:Tt(t),index:0,kind:e})},function(){var t=qe(this),e=t.target,n=t.kind,r=t.index++;return!e||r>=e.length?{value:t.target=void 0,done:!0}:"keys"==n?{value:r,done:!1}:"values"==n?{value:e[r],done:!1}:{value:[r,e[r]],done:!1}},"values");Te.Arguments=Te.Array,Z("keys"),Z("values"),Z("entries");var We,Ke=D("iterator"),He=D("toStringTag"),Ge=Be.values;for(We in Me){var ze=x[We],Qe=ze&&ze.prototype;if(Qe){if(Qe[Ke]!==Ge)try{B(Qe,Ke,Ge)}catch(Gs){Qe[Ke]=Ge}if(Qe[He]||B(Qe,He,We),Me[We])for(var Ye in Be)if(Qe[Ye]!==Be[Ye])try{B(Qe,Ye,Be[Ye])}catch(Gs){Qe[Ye]=Be[Ye]}}}function Xe(t,e,n){for(var r in e)yt(t,r,e[r],n);return t}function Je(t){var e=Ct(t),t=q.f;M&&e&&!e[sn]&&t(e,sn,{configurable:!0,get:function(){return this}})}function $e(t){if("function"!=typeof t)throw TypeError(String(t)+" is not a function");return t}function Ze(t,e,n){if(!(t instanceof e))throw TypeError("Incorrect "+(n?n+" ":"")+"invocation");return t}function tn(t){return void 0!==t&&(Te.Array===t||un[an]===t)}function en(r,i,t){if($e(r),void 0===i)return r;switch(t){case 0:return function(){return r.call(i)};case 1:return function(t){return r.call(i,t)};case 2:return function(t,e){return r.call(i,t,e)};case 3:return function(t,e,n){return r.call(i,t,e,n)}}return function(){return r.apply(i,arguments)}}function nn(t){if(null!=t)return t[cn]||t["@@iterator"]||Te[bt(t)]}function rn(t,e,n,r){try{return r?e(N(n)[0],n[1]):e(n)}catch(e){var i=t.return;throw void 0!==i&&N(i.call(t)),e}}var on=x.Promise,sn=D("species"),an=D("iterator"),un=Array.prototype,cn=D("iterator"),hn=I(function(t){function f(t,e){this.stopped=t,this.result=e}(t.exports=function(t,e,n,r,i){var o,s,a,u,c,h,l=en(e,n,r?2:1);if(i)o=t;else{if("function"!=typeof(i=nn(t)))throw TypeError("Target is not iterable");if(tn(i)){for(s=0,a=Nt(t.length);s<a;s++)if((u=r?l(N(h=t[s])[0],h[1]):l(t[s]))&&u instanceof f)return u;return new f(!1)}o=i.call(t)}for(c=o.next;!(h=c.call(o)).done;)if("object"==typeof(u=rn(o,l,h.value,r))&&u&&u instanceof f)return u;return new f(!1)}).stop=function(t){return new f(!0,t)}}),ln=D("iterator"),fn=!1;try{var pn=0,dn={next:function(){return{done:!!pn++}},return:function(){fn=!0}};dn[ln]=function(){return this},Array.from(dn,function(){throw 2})}catch(Gs){}function vn(t,e){if(!e&&!fn)return!1;var n=!1;try{var r={};r[ln]=function(){return{next:function(){return{done:n=!0}}}},t(r)}catch(t){}return n}function yn(t,e){var n;return void 0===(t=N(t).constructor)||null==(n=N(t)[bn])?e:$e(n)}function gn(t){var e;An.hasOwnProperty(t)&&(e=An[t],delete An[t],e())}function mn(t){return function(){gn(t)}}var _n,bn=D("species"),wt=Ct("navigator","userAgent")||"",wn=/(iphone|ipod|ipad).*applewebkit/i.test(wt),En=x.location,In=x.setImmediate,ae=x.clearImmediate,Tn=x.process,Sn=x.MessageChannel,Cn=x.Dispatch,Nn=0,An={},kn="onreadystatechange",ht=function(t){gn(t.data)},E=function(t){x.postMessage(t+"",En.protocol+"//"+En.host)};In&&ae||(In=function(t){for(var e=[],n=1;n<arguments.length;)e.push(arguments[n++]);return An[++Nn]=function(){("function"==typeof t?t:Function(t)).apply(void 0,e)},_n(Nn),Nn},ae=function(t){delete An[t]},"process"==dt(Tn)?_n=function(t){Tn.nextTick(mn(t))}:Cn&&Cn.now?_n=function(t){Cn.now(mn(t))}:Sn&&!wn?(Sn=(xt=new Sn).port2,xt.port1.onmessage=ht,_n=en(Sn.postMessage,Sn,1)):!x.addEventListener||"function"!=typeof postMessage||x.importScripts||T(E)||"file:"===En.protocol?_n=kn in C("script")?function(t){pe.appendChild(C("script"))[kn]=function(){pe.removeChild(this),gn(t)}}:function(t){setTimeout(mn(t),0)}:(_n=E,x.addEventListener("message",ht,!1)));var On,Pn,Rn,Dn,xn,Ln,Mn,Fn,E={set:In,clear:ae},ht=Vt.f,Un=E.set,In=x.MutationObserver||x.WebKitMutationObserver,jn=x.process,ae=x.Promise,Vn="process"==dt(jn);function qn(t){var n,r;this.promise=new t(function(t,e){if(void 0!==n||void 0!==r)throw TypeError("Bad Promise constructor");n=t,r=e}),this.resolve=$e(n),this.reject=$e(r)}function Bn(t,e){return N(t),S(e)&&e.constructor===t?e:((0,(t=Hn.f(t)).resolve)(e),t.promise)}function Wn(t){try{return{error:!1,value:t()}}catch(t){return{error:!0,value:t}}}(ht=(ht=ht(x,"queueMicrotask"))&&ht.value)||(On=function(){var t,e;for(Vn&&(t=jn.domain)&&t.exit();Pn;){e=Pn.fn,Pn=Pn.next;try{e()}catch(t){throw Pn?Dn():Rn=void 0,t}}Rn=void 0,t&&t.enter()},Dn=Vn?function(){jn.nextTick(On)}:In&&!wn?(xn=!0,Ln=document.createTextNode(""),new In(On).observe(Ln,{characterData:!0}),function(){Ln.data=xn=!xn}):ae&&ae.resolve?(Mn=ae.resolve(void 0),Fn=Mn.then,function(){Fn.call(Mn,On)}):function(){Un.call(x,On)});var Kn=ht||function(t){t={fn:t,next:void 0},Rn&&(Rn.next=t),Pn||(Pn=t,Dn()),Rn=t},Hn={f:function(t){return new qn(t)}};function Gn(t){var e;return!(!S(t)||"function"!=typeof(e=t.then))&&e}function zn(l,f,p){var d;f.notified||(f.notified=!0,d=f.reactions,Kn(function(){for(var t=f.value,e=1==f.state,n=0;d.length>n;){var r,i,o,s=d[n++],a=e?s.ok:s.fail,u=s.resolve,c=s.reject,h=s.domain;try{a?(e||(2===f.rejection&&br(l,f),f.rejection=1),!0===a?r=t:(h&&h.enter(),r=a(t),h&&(h.exit(),o=!0)),r===s.promise?c(cr("Promise-chain cycle")):(i=Gn(r))?i.call(r,u,c):u(r)):c(t)}catch(t){h&&!o&&h.exit(),c(t)}}f.reactions=[],f.notified=!1,p&&!f.rejection&&mr(l,f)}))}function Qn(t,e,n){var r;yr?((r=hr.createEvent("Event")).promise=e,r.reason=n,r.initEvent(t,!1,!0),x.dispatchEvent(r)):r={promise:e,reason:n},(e=x["on"+t])?e(r):t===gr&&function(t,e){var n=x.console;n&&n.error&&(1===arguments.length?n.error(t):n.error(t,e))}("Unhandled promise rejection",n)}function Yn(e,n,r,i){return function(t){e(n,r,t,i)}}function Xn(t,e,n,r){e.done||(e.done=!0,r&&(e=r),e.value=n,e.state=2,zn(t,e,!0))}(ae=(ht=(ae=x.process)&&ae.versions)&&ht.v8)?Pr=(Wr=ae.split("."))[0]+Wr[1]:wt&&(!(Wr=wt.match(/Edge\/(\d+)/))||74<=Wr[1])&&(Wr=wt.match(/Chrome\/(\d+)/))&&(Pr=Wr[1]);var Jn,$n,Zn,tr,er=Pr&&+Pr,nr=E.set,rr=D("species"),ir="Promise",or=vt.get,sr=vt.set,ar=vt.getterFor(ir),ur=on,cr=x.TypeError,hr=x.document,lr=x.process,fr=Ct("fetch"),pr=Hn.f,dr=pr,vr="process"==dt(lr),yr=!!(hr&&hr.createEvent&&x.dispatchEvent),gr="unhandledrejection",ae=(ht=ne(ir,function(){if(ct(ur)===String(ur)){if(66===er)return!0;if(!vr&&"function"!=typeof PromiseRejectionEvent)return!0}if(51<=er&&/native code/.test(ur))return!1;function t(t){t(function(){},function(){})}var e=ur.resolve(1);return(e.constructor={})[rr]=t,!(e.then(function(){})instanceof t)}))||!vn(function(t){ur.all(t).catch(function(){})}),mr=function(n,r){nr.call(x,function(){var t,e=r.value;if(_r(r)&&(t=Wn(function(){vr?lr.emit("unhandledRejection",e,n):Qn(gr,n,e)}),r.rejection=vr||_r(r)?2:1,t.error))throw t.value})},_r=function(t){return 1!==t.rejection&&!t.parent},br=function(t,e){nr.call(x,function(){vr?lr.emit("rejectionHandled",t):Qn("rejectionhandled",t,e.value)})},wr=function(n,r,t,e){if(!r.done){r.done=!0,e&&(r=e);try{if(n===t)throw cr("Promise can't be resolved itself");var i=Gn(t);i?Kn(function(){var e={done:!1};try{i.call(t,Yn(wr,n,e,r),Yn(Xn,n,e,r))}catch(t){Xn(n,e,t,r)}}):(r.value=t,r.state=1,zn(n,r,!1))}catch(t){Xn(n,{done:!1},t,r)}}};ht&&(ur=function(t){Ze(this,ur,ir),$e(t),Jn.call(this);var e=or(this);try{t(Yn(wr,this,e),Yn(Xn,this,e))}catch(t){Xn(this,e,t)}},(Jn=function(){sr(this,{type:ir,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:0,value:void 0})}).prototype=Xe(ur.prototype,{then:function(t,e){var n=ar(this),r=pr(yn(this,ur));return r.ok="function"!=typeof t||t,r.fail="function"==typeof e&&e,r.domain=vr?lr.domain:void 0,n.parent=!0,n.reactions.push(r),0!=n.state&&zn(this,n,!1),r.promise},catch:function(t){return this.then(void 0,t)}}),$n=function(){var t=new Jn,e=or(t);this.promise=t,this.resolve=Yn(wr,t,e),this.reject=Yn(Xn,t,e)},Hn.f=pr=function(t){return t===ur||t===Zn?new $n:dr(t)},"function"==typeof on&&(tr=on.prototype.then,yt(on.prototype,"then",function(t,e){var n=this;return new ur(function(t,e){tr.call(n,t,e)}).then(t,e)},{unsafe:!0}),"function"==typeof fr&&Ot({global:!0,enumerable:!0,forced:!0},{fetch:function(){return Bn(ur,fr.apply(x,arguments))}}))),Ot({global:!0,wrap:!0,forced:ht},{Promise:ur}),ge(ur,ir,!1),Je(ir),Zn=Ct(ir),Ot({target:ir,stat:!0,forced:ht},{reject:function(t){var e=pr(this);return e.reject.call(void 0,t),e.promise}}),Ot({target:ir,stat:!0,forced:ht},{resolve:function(t){return Bn(this,t)}}),Ot({target:ir,stat:!0,forced:ae},{all:function(t){var a=this,e=pr(a),u=e.resolve,c=e.reject,n=Wn(function(){var r=$e(a.resolve),i=[],o=0,s=1;hn(t,function(t){var e=o++,n=!1;i.push(void 0),s++,r.call(a,t).then(function(t){n||(n=!0,i[e]=t,--s||u(i))},c)}),--s||u(i)});return n.error&&c(n.value),e.promise},race:function(t){var n=this,r=pr(n),i=r.reject,e=Wn(function(){var e=$e(n.resolve);hn(t,function(t){e.call(n,t).then(r.resolve,i)})});return e.error&&i(e.value),r.promise}}),Ot({target:"Promise",stat:!0},{allSettled:function(t){var a=this,e=Hn.f(a),u=e.resolve,n=e.reject,r=Wn(function(){var r=$e(a.resolve),i=[],o=0,s=1;hn(t,function(t){var e=o++,n=!1;i.push(void 0),s++,r.call(a,t).then(function(t){n||(n=!0,i[e]={status:"fulfilled",value:t},--s||u(i))},function(t){n||(n=!0,i[e]={status:"rejected",reason:t},--s||u(i))})}),--s||u(i)});return r.error&&n(r.value),e.promise}}),Ot({target:"Promise",proto:!0,real:!0,forced:wt=!!on&&T(function(){on.prototype.finally.call({then:function(){}},function(){})})},{finally:function(e){var n=yn(this,Ct("Promise")),t="function"==typeof e;return this.then(t?function(t){return Bn(n,e()).then(function(){return t})}:e,t?function(t){return Bn(n,e()).then(function(){throw t})}:e)}}),"function"!=typeof on||on.prototype.finally||yt(on.prototype,"finally",Ct("Promise").prototype.finally),qt.Promise;var Er=vt.set,Ir=vt.getterFor("AggregateError"),Tr=function(t,e){var n=this;if(!(n instanceof Tr))return new Tr(t,e);Ce&&(n=Ce(new Error(e),se(n)));var r=[];return hn(t,r.push,r),M?Er(n,{errors:r,type:"AggregateError"}):n.errors=r,void 0!==e&&B(n,"message",String(e)),n};Tr.prototype=we(Error.prototype,{constructor:k(5,Tr),message:k(5,""),name:k(5,"AggregateError")}),M&&q.f(Tr.prototype,"errors",{get:function(){return Ir(this).errors},configurable:!0}),Ot({global:!0},{AggregateError:Tr}),Ot({target:"Promise",stat:!0},{try:function(t){var e=Hn.f(this);return((t=Wn(t)).error?e.reject:e.resolve)(t.value),e.promise}});var Sr="No one promise resolved";function Cr(t,e){var n;return Ar(t)&&("function"==typeof(n=t.constructor)&&(n===Array||Ar(n.prototype))||S(n)&&null===(n=n[kr]))&&(n=void 0),new(void 0===n?Array:n)(0===e?0:e)}function Nr(t){throw t}Ot({target:"Promise",stat:!0},{any:function(t){var u=this,e=Hn.f(u),c=e.resolve,h=e.reject,n=Wn(function(){var r=$e(u.resolve),i=[],o=0,s=1,a=!1;hn(t,function(t){var e=o++,n=!1;i.push(void 0),s++,r.call(u,t).then(function(t){n||a||(a=!0,c(t))},function(t){n||a||(n=!0,i[e]=t,--s||h(new(Ct("AggregateError"))(i,Sr)))})}),--s||h(new(Ct("AggregateError"))(i,Sr))});return n.error&&h(n.value),e.promise}});var Ar=Array.isArray||function(t){return"Array"==dt(t)},kr=D("species"),Or=[].push,Pr={forEach:(Wr=function(f){var p=1==f,d=2==f,v=3==f,y=4==f,g=6==f,m=5==f||g;return function(t,e,n,r){for(var i,o,s=Pt(t),a=Ut(s),u=en(e,n,3),c=Nt(a.length),h=0,r=r||Cr,l=p?r(t,c):d?r(t,0):void 0;h<c;h++)if((m||h in a)&&(o=u(i=a[h],h,s),f))if(p)l[h]=o;else if(o)switch(f){case 3:return!0;case 5:return i;case 6:return h;case 2:Or.call(l,i)}else if(y)return!1;return g?-1:v||y?y:l}})(0),map:Wr(1),filter:Wr(2),some:Wr(3),every:Wr(4),find:Wr(5),findIndex:Wr(6)},Rr=Object.defineProperty,Dr={},E=function(t,e){if(P(Dr,t))return Dr[t];var n=[][t],r=!!P(e=e||{},"ACCESSORS")&&e.ACCESSORS,i=P(e,0)?e[0]:Nr,o=P(e,1)?e[1]:void 0;return Dr[t]=!!n&&!T(function(){if(r&&!M)return 1;var t={length:-1};r?Rr(t,1,{enumerable:!0,get:Nr}):t[1]=1,n.call(t,i,o)})},xr=Pr.find,Lr=!0,ae=E(ht="find");ht in[]&&Array(1)[ht](function(){Lr=!1}),Ot({target:"Array",proto:!0,forced:Lr||!ae},{find:function(t,e){return xr(this,t,1<arguments.length?e:void 0)}}),Z(ht);var Mr=Function.call,Fr=((wt=function(t,e,n){return en(Mr,x[t].prototype[e],n)})("Array","find"),Pr.findIndex),Ur=!0,ae=E(Wr="findIndex");function jr(t,e,n){(e=A(e))in t?q.f(t,e,k(0,n)):t[e]=n}Wr in[]&&Array(1)[Wr](function(){Ur=!1}),Ot({target:"Array",proto:!0,forced:Ur||!ae},{findIndex:function(t,e){return Fr(this,t,1<arguments.length?e:void 0)}}),Z(Wr),wt("Array","findIndex"),Ot({target:"Array",stat:!0,forced:ht=!vn(function(t){Array.from(t)})},{from:function(t,e,n){var r,i,o,s,a,u=Pt(t),c="function"==typeof this?this:Array,h=1<(t=arguments.length)?e:void 0,l=void 0!==h,e=nn(u),f=0;if(l&&(h=en(h,2<t?n:void 0,2)),null==e||c==Array&&tn(e))for(i=new c(r=Nt(u.length));f<r;f++)jr(i,f,l?h(u[f],f):u[f]);else for(a=(s=e.call(u)).next,i=new c;!(o=a.call(s)).done;f++)jr(i,f,l?rn(s,h,[o.value,f],!0):o.value);return i.length=f,i}}),qt.Array.from;var Vr,qr=Pr.some,ae=!!(Vr=[].some)&&T(function(){Vr.call(null,function(){throw 1},1)}),Z=E("some");Ot({target:"Array",proto:!0,forced:!ae||!Z},{some:function(t,e){return qr(this,t,1<arguments.length?e:void 0)}}),wt("Array","some");var Br,Wr="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView,ht=q.f,In=x.Int8Array,Kr=In&&In.prototype,ae=(E=x.Uint8ClampedArray)&&E.prototype,Hr=In&&se(In),Gr=Kr&&se(Kr),E=((Z=Object.prototype).isPrototypeOf,D("toStringTag")),zr=R("TYPED_ARRAY_TAG"),Qr=Wr&&!!Ce&&"Opera"!==bt(x.opera),Wr=!1,Yr={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8};for(Br in Yr)x[Br]||(Qr=!1);if((!Qr||"function"!=typeof Hr||Hr===Function.prototype)&&(Hr=function(){throw TypeError("Incorrect invocation")},Qr))for(Br in Yr)x[Br]&&Ce(x[Br],Hr);if((!Qr||!Gr||Gr===Z)&&(Gr=Hr.prototype,Qr))for(Br in Yr)x[Br]&&Ce(x[Br].prototype,Gr);if(Qr&&se(ae)!==Gr&&Ce(ae,Gr),M&&!P(Gr,E))for(Br in Wr=!0,ht(Gr,E,{get:function(){return S(this)?this[zr]:void 0}}),Yr)x[Br]&&B(x[Br],zr,Br);var ae=function(t){if(S(e=t)&&P(Yr,bt(e)))return t;var e;throw TypeError("Target is not a typed array")},ht=function(t,e,n){if(M){if(n)for(var r in Yr){var i=x[r];i&&P(i.prototype,t)&&delete i.prototype[t]}Gr[t]&&!n||yt(Gr,t,!n&&Qr&&Kr[t]||e)}},E=D("iterator"),Wr=x.Uint8Array,Xr=Be.values,Jr=Be.keys,$r=Be.entries,Zr=ae,ae=ht,Wr=!!(ht=Wr&&Wr.prototype[E])&&("values"==ht.name||null==ht.name),ht=function(){return Xr.call(Zr(this))};ae("entries",function(){return $r.call(Zr(this))}),ae("keys",function(){return Jr.call(Zr(this))}),ae("values",ht,!Wr),ae(E,ht,!Wr);var ti=Object.assign,ei=Object.defineProperty,ht=!ti||T(function(){if(M&&1!==ti({b:1},ti(ei({},"a",{enumerable:!0,get:function(){ei(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return 1;var t={},e={},n=Symbol(),r="abcdefghijklmnopqrst";return t[n]=7,r.split("").forEach(function(t){e[t]=t}),7!=ti({},t)[n]||le(ti({},e)).join("")!=r})?function(t){for(var e=Pt(t),n=arguments.length,r=1,i=Yt.f,o=Mt.f;r<n;)for(var s,a=Ut(arguments[r++]),u=i?le(a).concat(i(a)):le(a),c=u.length,h=0;h<c;)s=u[h++],M&&!o.call(a,s)||(e[s]=a[s]);return e}:ti;Ot({target:"Object",stat:!0,forced:Object.assign!==ht},{assign:ht}),qt.Object.assign;var ni=Mt.f,ri=(ht={entries:(Wr=function(a){return function(t){for(var e,n=Tt(t),r=le(n),i=r.length,o=0,s=[];o<i;)e=r[o++],M&&!ni.call(n,e)||s.push(a?[e,n[e]]:n[e]);return s}})(!0),values:Wr(!1)}).entries;Ot({target:"Object",stat:!0},{entries:function(t){return ri(t)}}),qt.Object.entries;var ii=ht.values;function oi(t){if(S(e=t)&&(void 0!==(n=e[si])?n:"RegExp"==dt(e)))throw TypeError("The method doesn't accept regular expressions");var e,n;return t}Ot({target:"Object",stat:!0},{values:function(t){return ii(t)}}),qt.Object.values;var si=D("match"),ai=D("match");Ot({target:"String",proto:!0,forced:!(Wr=function(e){var n=/./;try{"/./"[e](n)}catch(t){try{return n[ai]=!1,"/./"[e](n)}catch(t){}}return!1})("includes")},{includes:function(t,e){return!!~String(It(this)).indexOf(oi(t),1<arguments.length?e:void 0)}}),wt("String","includes");var ht=Vt.f,ui="".startsWith,ci=Math.min,hi=!((Wr=Wr("startsWith"))||!(hi=ht(String.prototype,"startsWith"))||hi.writable);Ot({target:"String",proto:!0,forced:!hi&&!Wr},{startsWith:function(t,e){var n=String(It(this));return oi(t),e=Nt(ci(1<arguments.length?e:void 0,n.length)),t=String(t),ui?ui.call(n,t,e):n.slice(e,e+t.length)===t}}),wt("String","startsWith"),Ot({target:"String",proto:!0},{repeat:"".repeat||function(t){var e=String(It(this)),n="",r=Et(t);if(r<0||r==1/0)throw RangeError("Wrong number of repetitions");for(;0<r;(r>>>=1)&&(e+=e))1&r&&(n+=e);return n}}),wt("String","repeat");var li=D("species"),fi=D("isConcatSpreadable"),pi=9007199254740991,di="Maximum allowed index exceeded",Wr=51<=er||!T(function(){var t=[];return t[fi]=!1,t.concat()[0]!==t}),wt=51<=er||!T(function(){var t=[];return(t.constructor={})[li]=function(){return{foo:1}},1!==t.concat(Boolean).foo});function vi(t){var e=qt.Symbol||(qt.Symbol={});P(e,t)||Ti(e,t,{value:Ii.f(t)})}function yi(t,e){var n=Ui[t]=we(Ri[Ai]);return ki(n,{type:Ni,tag:t,description:e}),M||(n.description=e),n}function gi(e,t){N(e);var n=Tt(t),t=le(n).concat(_i(n));return Si(t,function(t){M&&!mi.call(n,t)||Hi(e,t,n[t])}),e}Ot({target:"Array",proto:!0,forced:!Wr||!wt},{concat:function(){for(var t,e,n,r=Pt(this),i=Cr(r,0),o=0,s=-1,a=arguments.length;s<a;s++)if(function(t){if(S(t)){var e=t[fi];return void 0!==e?e:Ar(t)}}(n=-1===s?r:arguments[s])){if(e=Nt(n.length),pi<o+e)throw TypeError(di);for(t=0;t<e;t++,o++)t in n&&jr(i,o,n[t])}else{if(pi<=o)throw TypeError(di);jr(i,o++,n)}return i.length=o,i}});function mi(t){var e=A(t,!0),t=Fi.call(this,e);return!(this===Pi&&P(Ui,e)&&!P(ji,e))&&(!(t||!P(this,e)||!P(Ui,e)||P(this,Ci)&&this[Ci][e])||t)}function _i(t){var e=t===Pi,t=Mi(e?ji:Tt(t)),n=[];return Si(t,function(t){!P(Ui,t)||e&&!P(Pi,t)||n.push(Ui[t])}),n}var bi=Qt.f,wi={}.toString,Ei="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],wt={f:function(t){return Ei&&"[object Window]"==wi.call(t)?function(t){try{return bi(t)}catch(t){return Ei.slice()}}(t):bi(Tt(t))}},Ii={f:D},Ti=q.f,Si=Pr.forEach,Ci=ft("hidden"),Ni="Symbol",Ai="prototype",Pr=D("toPrimitive"),ki=vt.set,Oi=vt.getterFor(Ni),Pi=Object[Ai],Ri=x.Symbol,Di=Ct("JSON","stringify"),xi=Vt.f,Li=q.f,Mi=wt.f,Fi=Mt.f,Ui=K("symbols"),ji=K("op-symbols"),Vi=K("string-to-symbol-registry"),qi=K("symbol-to-string-registry"),ft=K("wks"),Bi=!(K=x.QObject)||!K[Ai]||!K[Ai].findChild,Wi=M&&T(function(){return 7!=we(Li({},"a",{get:function(){return Li(this,"a",{value:7}).a}})).a})?function(t,e,n){var r=xi(Pi,e);r&&delete Pi[e],Li(t,e,n),r&&t!==Pi&&Li(Pi,e,r)}:Li,Ki=Y?function(t){return"symbol"==typeof t}:function(t){return Object(t)instanceof Ri},Hi=function(t,e,n){return t===Pi&&Hi(ji,e,n),N(t),e=A(e,!0),N(n),P(Ui,e)?(n.enumerable?(P(t,Ci)&&t[Ci][e]&&(t[Ci][e]=!1),n=we(n,{enumerable:k(0,!1)})):(P(t,Ci)||Li(t,Ci,k(1,{})),t[Ci][e]=!0),Wi(t,e,n)):Li(t,e,n)},K=function(t,e){var n=Tt(t),t=A(e,!0);if(n!==Pi||!P(Ui,t)||P(ji,t))return!(e=xi(n,t))||!P(Ui,t)||P(n,Ci)&&n[Ci][t]||(e.enumerable=!0),e},Y=function(t){var t=Mi(Tt(t)),e=[];return Si(t,function(t){P(Ui,t)||P(pt,t)||e.push(t)}),e};Q||(yt((Ri=function(t){if(this instanceof Ri)throw TypeError("Symbol is not a constructor");var e=R(t=arguments.length&&void 0!==t?String(t):void 0),n=function(t){this===Pi&&n.call(ji,t),P(this,Ci)&&P(this[Ci],e)&&(this[Ci][e]=!1),Wi(this,e,k(1,t))};return M&&Bi&&Wi(Pi,e,{configurable:!0,set:n}),yi(e,t)})[Ai],"toString",function(){return Oi(this).tag}),yt(Ri,"withoutSetter",function(t){return yi(R(t),t)}),Mt.f=mi,q.f=Hi,Vt.f=K,Qt.f=wt.f=Y,Yt.f=_i,Ii.f=function(t){return yi(D(t),t)},M&&(Li(Ri[Ai],"description",{configurable:!0,get:function(){return Oi(this).description}}),yt(Pi,"propertyIsEnumerable",mi,{unsafe:!0}))),Ot({global:!0,wrap:!0,forced:!Q,sham:!Q},{Symbol:Ri}),Si(le(ft),function(t){vi(t)}),Ot({target:Ni,stat:!0,forced:!Q},{for:function(t){var e=String(t);return P(Vi,e)?Vi[e]:(t=Ri(e),Vi[e]=t,qi[t]=e,t)},keyFor:function(t){if(!Ki(t))throw TypeError(t+" is not a symbol");if(P(qi,t))return qi[t]},useSetter:function(){Bi=!0},useSimple:function(){Bi=!1}}),Ot({target:"Object",stat:!0,forced:!Q,sham:!M},{create:function(t,e){return void 0===e?we(t):gi(we(t),e)},defineProperty:Hi,defineProperties:gi,getOwnPropertyDescriptor:K}),Ot({target:"Object",stat:!0,forced:!Q},{getOwnPropertyNames:Y,getOwnPropertySymbols:_i}),Ot({target:"Object",stat:!0,forced:T(function(){Yt.f(1)})},{getOwnPropertySymbols:function(t){return Yt.f(Pt(t))}}),Di&&Ot({target:"JSON",stat:!0,forced:io=!Q||T(function(){var t=Ri();return"[null]"!=Di([t])||"{}"!=Di({a:t})||"{}"!=Di(Object(t))})},{stringify:function(t,e){for(var n,r=[t],i=1;i<arguments.length;)r.push(arguments[i++]);if((S(n=e)||void 0!==t)&&!Ki(t))return Ar(e)||(e=function(t,e){if("function"==typeof n&&(e=n.call(this,t,e)),!Ki(e))return e}),r[1]=e,Di.apply(null,r)}}),Ri[Ai][Pr]||B(Ri[Ai],Pr,Ri[Ai].valueOf),ge(Ri,Ni),pt[Ci]=!0,vi("asyncIterator");var Gi,zi,Qi,Yi,Xi,K=q.f,Ji=x.Symbol;!M||"function"!=typeof Ji||"description"in Ji.prototype&&void 0===Ji().description||(Gi={},kt(zi=function(t){var e=arguments.length<1||void 0===t?void 0:String(t),t=this instanceof zi?new Ji(e):void 0===e?Ji():Ji(e);return""===e&&(Gi[t]=!0),t},Ji),(ao=zi.prototype=Ji.prototype).constructor=zi,Qi=ao.toString,Yi="Symbol(test)"==String(Ji("test")),Xi=/^Symbol\((.*)\)[^)]+$/,K(ao,"description",{configurable:!0,get:function(){var t=S(this)?this.valueOf():this,e=Qi.call(t);return P(Gi,t)?"":""===(e=Yi?e.slice(7,-1):e.replace(Xi,"$1"))?void 0:e}}),Ot({global:!0,forced:!0},{Symbol:zi})),vi("hasInstance"),vi("isConcatSpreadable"),vi("iterator"),vi("match"),vi("matchAll"),vi("replace"),vi("search"),vi("species"),vi("split"),vi("toPrimitive"),vi("toStringTag"),vi("unscopables"),ge(Math,"Math",!0),ge(x.JSON,"JSON",!0),qt.Symbol,vi("asyncDispose"),vi("dispose"),vi("observable"),vi("patternMatch"),vi("replaceAll"),Ii.f("iterator");var $i=!T(function(){return Object.isExtensible(Object.preventExtensions({}))}),Zi=I(function(t){function n(t){e(t,r,{value:{objectID:"O"+ ++i,weakData:{}}})}var e=q.f,r=R("meta"),i=0,o=Object.isExtensible||function(){return!0},s=t.exports={REQUIRED:!1,fastKey:function(t,e){if(!S(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!P(t,r)){if(!o(t))return"F";if(!e)return"E";n(t)}return t[r].objectID},getWeakData:function(t,e){if(!P(t,r)){if(!o(t))return!0;if(!e)return!1;n(t)}return t[r].weakData},onFreeze:function(t){return $i&&s.REQUIRED&&o(t)&&!P(t,r)&&n(t),t}};pt[r]=!0}),Y=function(s,t,e){function n(t){var n=p[t];yt(p,t,"add"==t?function(t){return n.call(this,0===t?0:t),this}:"delete"==t?function(t){return!(h&&!S(t))&&n.call(this,0===t?0:t)}:"get"==t?function(t){return h&&!S(t)?void 0:n.call(this,0===t?0:t)}:"has"==t?function(t){return!(h&&!S(t))&&n.call(this,0===t?0:t)}:function(t,e){return n.call(this,0===t?0:t,e),this})}var r,i,o,a,u,c=-1!==s.indexOf("Map"),h=-1!==s.indexOf("Weak"),l=c?"set":"add",f=x[s],p=f&&f.prototype,d=f,v={};return ne(s,"function"!=typeof f||!(h||p.forEach&&!T(function(){(new f).entries().next()})))?(d=e.getConstructor(t,s,c,l),Zi.REQUIRED=!0):ne(s,!0)&&(i=(r=new d)[l](h?{}:-0,1)!=r,o=T(function(){r.has(1)}),a=vn(function(t){new f(t)}),u=!h&&T(function(){for(var t=new f,e=5;e--;)t[l](e,e);return!t.has(-0)}),a||(((d=t(function(t,e){Ze(t,d,s);var n,r,i,o=(o=new f,n=t,t=d,Ce&&"function"==typeof(r=n.constructor)&&r!==t&&S(i=r.prototype)&&i!==t.prototype&&Ce(o,i),o);return null!=e&&hn(e,o[l],o,c),o})).prototype=p).constructor=d),(o||u)&&(n("delete"),n("has"),c&&n("get")),(u||i)&&n(l),h&&p.clear&&delete p.clear),Ot({global:!0,forced:(v[s]=d)!=f},v),ge(d,s),h||e.setStrong(d,s,c),d},to=q.f,eo=Zi.fastKey,no=vt.set,ro=vt.getterFor,io={getConstructor:function(t,n,r,i){function o(t,e,n){var r,i=u(t),o=s(t,e);return o?o.value=n:(i.last=o={index:r=eo(e,!0),key:e,value:n,previous:n=i.last,next:void 0,removed:!1},i.first||(i.first=o),n&&(n.next=o),M?i.size++:t.size++,"F"!==r&&(i.index[r]=o)),t}function s(t,e){var n,r=u(t);if("F"!==(t=eo(e)))return r.index[t];for(n=r.first;n;n=n.next)if(n.key==e)return n}var a=t(function(t,e){Ze(t,a,n),no(t,{type:n,index:we(null),first:void 0,last:void 0,size:0}),M||(t.size=0),null!=e&&hn(e,t[i],t,r)}),u=ro(n);return Xe(a.prototype,{clear:function(){for(var t=u(this),e=t.index,n=t.first;n;)n.removed=!0,n.previous&&(n.previous=n.previous.next=void 0),delete e[n.index],n=n.next;t.first=t.last=void 0,M?t.size=0:this.size=0},delete:function(t){var e,n=u(this),r=s(this,t);return r&&(e=r.next,t=r.previous,delete n.index[r.index],r.removed=!0,t&&(t.next=e),e&&(e.previous=t),n.first==r&&(n.first=e),n.last==r&&(n.last=t),M?n.size--:this.size--),!!r},forEach:function(t,e){for(var n,r=u(this),i=en(t,1<arguments.length?e:void 0,3);n=n?n.next:r.first;)for(i(n.value,n.key,this);n&&n.removed;)n=n.previous},has:function(t){return!!s(this,t)}}),Xe(a.prototype,r?{get:function(t){return(t=s(this,t))&&t.value},set:function(t,e){return o(this,0===t?0:t,e)}}:{add:function(t){return o(this,t=0===t?0:t,t)}}),M&&to(a.prototype,"size",{get:function(){return u(this).size}}),a},setStrong:function(t,e,n){var r=e+" Iterator",i=ro(e),o=ro(r);be(t,e,function(t,e){no(this,{type:r,target:t,state:i(t),kind:e,last:void 0})},function(){for(var t=o(this),e=t.kind,n=t.last;n&&n.removed;)n=n.previous;return t.target&&(t.last=n=n?n.next:t.state.first)?"keys"==e?{value:n.key,done:!1}:"values"==e?{value:n.value,done:!1}:{value:[n.key,n.value],done:!1}:{value:t.target=void 0,done:!0}},n?"entries":"values",!n,!0),Je(e)}};function oo(){for(var t,e=N(this),n=$e(e.delete),r=!0,i=0,o=arguments.length;i<o;i++)t=n.call(e,arguments[i]),r=r&&t;return!!r}function so(t){return Map.prototype.entries.call(t)}Ot({target:"Map",stat:!0},{from:Pr=(Y("Map",function(e){return function(t){return e(this,arguments.length?t:void 0)}},io),qt.Map,function(t,e,n){var r,i,o,s=arguments.length,a=1<s?e:void 0;return $e(this),(e=void 0!==a)&&$e(a),null==t?new this:(r=[],e?(i=0,o=en(a,2<s?n:void 0,2),hn(t,function(t){r.push(o(t,i++))})):hn(t,r.push,r),new this(r))})}),Ot({target:"Map",stat:!0},{of:K=function(){for(var t=arguments.length,e=new Array(t);t--;)e[t]=arguments[t];return new this(e)}}),Ot({target:"Map",proto:!0,real:!0,forced:L},{deleteAll:function(){return oo.apply(this,arguments)}}),Ot({target:"Map",proto:!0,real:!0,forced:L},{every:function(t,e){var n=N(this),r=so(n),i=en(t,1<arguments.length?e:void 0,3);return!hn(r,function(t,e){if(!i(e,t,n))return hn.stop()},void 0,!0,!0).stopped}}),Ot({target:"Map",proto:!0,real:!0,forced:L},{filter:function(t,e){var n=N(this),r=so(n),i=en(t,1<arguments.length?e:void 0,3),o=new(yn(n,Ct("Map"))),s=$e(o.set);return hn(r,function(t,e){i(e,t,n)&&s.call(o,t,e)},void 0,!0,!0),o}}),Ot({target:"Map",proto:!0,real:!0,forced:L},{find:function(t,e){var n=N(this),r=so(n),i=en(t,1<arguments.length?e:void 0,3);return hn(r,function(t,e){if(i(e,t,n))return hn.stop(e)},void 0,!0,!0).result}}),Ot({target:"Map",proto:!0,real:!0,forced:L},{findKey:function(t,e){var n=N(this),r=so(n),i=en(t,1<arguments.length?e:void 0,3);return hn(r,function(t,e){if(i(e,t,n))return hn.stop(t)},void 0,!0,!0).result}}),Ot({target:"Map",stat:!0},{groupBy:function(t,n){var r=new this;$e(n);var i=$e(r.has),o=$e(r.get),s=$e(r.set);return hn(t,function(t){var e=n(t);i.call(r,e)?o.call(r,e).push(t):s.call(r,e,[t])}),r}}),Ot({target:"Map",proto:!0,real:!0,forced:L},{includes:function(r){return hn(so(N(this)),function(t,e){if((n=e)===(e=r)||n!=n&&e!=e)return hn.stop();var n},void 0,!0,!0).stopped}}),Ot({target:"Map",stat:!0},{keyBy:function(t,e){var n=new this;$e(e);var r=$e(n.set);return hn(t,function(t){r.call(n,e(t),t)}),n}}),Ot({target:"Map",proto:!0,real:!0,forced:L},{keyOf:function(n){return hn(so(N(this)),function(t,e){if(e===n)return hn.stop(t)},void 0,!0,!0).result}}),Ot({target:"Map",proto:!0,real:!0,forced:L},{mapKeys:function(t,e){var n=N(this),r=so(n),i=en(t,1<arguments.length?e:void 0,3),o=new(yn(n,Ct("Map"))),s=$e(o.set);return hn(r,function(t,e){s.call(o,i(e,t,n),e)},void 0,!0,!0),o}}),Ot({target:"Map",proto:!0,real:!0,forced:L},{mapValues:function(t,e){var n=N(this),r=so(n),i=en(t,1<arguments.length?e:void 0,3),o=new(yn(n,Ct("Map"))),s=$e(o.set);return hn(r,function(t,e){s.call(o,t,i(e,t,n))},void 0,!0,!0),o}}),Ot({target:"Map",proto:!0,real:!0,forced:L},{merge:function(){for(var t=N(this),e=$e(t.set),n=0;n<arguments.length;)hn(arguments[n++],e,t,!0);return t}}),Ot({target:"Map",proto:!0,real:!0,forced:L},{reduce:function(n,t){var r=N(this),e=so(r),i=arguments.length<2,o=i?void 0:t;if($e(n),hn(e,function(t,e){o=i?(i=!1,e):n(o,e,t,r)},void 0,!0,!0),i)throw TypeError("Reduce of empty map with no initial value");return o}}),Ot({target:"Map",proto:!0,real:!0,forced:L},{some:function(t,e){var n=N(this),r=so(n),i=en(t,1<arguments.length?e:void 0,3);return hn(r,function(t,e){if(i(e,t,n))return hn.stop()},void 0,!0,!0).stopped}}),Ot({target:"Map",proto:!0,real:!0,forced:L},{update:function(t,e,n){var r=N(this),i=arguments.length;$e(e);var o=r.has(t);if(!o&&i<3)throw TypeError("Updating absent value");return n=o?r.get(t):$e(2<i?n:void 0)(t,r),r.set(t,e(n,t,r)),r}});var ao=function(t,e,n){var r,i=N(this),n=2<arguments.length?n:void 0;if("function"!=typeof e&&"function"!=typeof n)throw TypeError("At least one callback required");return i.has(t)?(r=i.get(t),"function"==typeof e&&(r=e(r),i.set(t,r))):"function"==typeof n&&(r=n(),i.set(t,r)),r};function uo(t){return Set.prototype.values.call(t)}Ot({target:"Map",proto:!0,real:!0,forced:L},{upsert:ao}),Ot({target:"Map",proto:!0,real:!0,forced:L},{updateOrInsert:ao}),Y("Set",function(e){return function(t){return e(this,arguments.length?t:void 0)}},io),qt.Set,Ot({target:"Set",stat:!0},{from:Pr}),Ot({target:"Set",stat:!0},{of:K}),Ot({target:"Set",proto:!0,real:!0,forced:L},{addAll:function(){return function(){for(var t=N(this),e=$e(t.add),n=0,r=arguments.length;n<r;n++)e.call(t,arguments[n]);return t}.apply(this,arguments)}}),Ot({target:"Set",proto:!0,real:!0,forced:L},{deleteAll:function(){return oo.apply(this,arguments)}}),Ot({target:"Set",proto:!0,real:!0,forced:L},{every:function(t,e){var n=N(this),r=uo(n),i=en(t,1<arguments.length?e:void 0,3);return!hn(r,function(t){if(!i(t,t,n))return hn.stop()},void 0,!1,!0).stopped}}),Ot({target:"Set",proto:!0,real:!0,forced:L},{difference:function(t){var e=N(this),n=new(yn(e,Ct("Set")))(e),r=$e(n.delete);return hn(t,function(t){r.call(n,t)}),n}}),Ot({target:"Set",proto:!0,real:!0,forced:L},{filter:function(t,e){var n=N(this),r=uo(n),i=en(t,1<arguments.length?e:void 0,3),o=new(yn(n,Ct("Set"))),s=$e(o.add);return hn(r,function(t){i(t,t,n)&&s.call(o,t)},void 0,!1,!0),o}}),Ot({target:"Set",proto:!0,real:!0,forced:L},{find:function(t,e){var n=N(this),r=uo(n),i=en(t,1<arguments.length?e:void 0,3);return hn(r,function(t){if(i(t,t,n))return hn.stop(t)},void 0,!1,!0).result}}),Ot({target:"Set",proto:!0,real:!0,forced:L},{intersection:function(t){var e=N(this),n=new(yn(e,Ct("Set"))),r=$e(e.has),i=$e(n.add);return hn(t,function(t){r.call(e,t)&&i.call(n,t)}),n}}),Ot({target:"Set",proto:!0,real:!0,forced:L},{isDisjointFrom:function(t){var e=N(this),n=$e(e.has);return!hn(t,function(t){if(!0===n.call(e,t))return hn.stop()}).stopped}}),Ot({target:"Set",proto:!0,real:!0,forced:L},{isSubsetOf:function(t){var e=function(t){var e=nn(t);if("function"!=typeof e)throw TypeError(String(t)+" is not iterable");return N(e.call(t))}(this),n=N(t),r=n.has;return"function"!=typeof r&&(n=new(Ct("Set"))(t),r=$e(n.has)),!hn(e,function(t){if(!1===r.call(n,t))return hn.stop()},void 0,!1,!0).stopped}}),Ot({target:"Set",proto:!0,real:!0,forced:L},{isSupersetOf:function(t){var e=N(this),n=$e(e.has);return!hn(t,function(t){if(!1===n.call(e,t))return hn.stop()}).stopped}}),Ot({target:"Set",proto:!0,real:!0,forced:L},{join:function(t){var e=uo(n=N(this)),n=void 0===t?",":String(t);return hn(e,(t=[]).push,t,!1,!0),t.join(n)}}),Ot({target:"Set",proto:!0,real:!0,forced:L},{map:function(t,e){var n=N(this),r=uo(n),i=en(t,1<arguments.length?e:void 0,3),o=new(yn(n,Ct("Set"))),s=$e(o.add);return hn(r,function(t){s.call(o,i(t,t,n))},void 0,!1,!0),o}}),Ot({target:"Set",proto:!0,real:!0,forced:L},{reduce:function(e,t){var n=N(this),r=uo(n),i=arguments.length<2,o=i?void 0:t;if($e(e),hn(r,function(t){o=i?(i=!1,t):e(o,t,t,n)},void 0,!1,!0),i)throw TypeError("Reduce of empty set with no initial value");return o}}),Ot({target:"Set",proto:!0,real:!0,forced:L},{some:function(t,e){var n=N(this),r=uo(n),i=en(t,1<arguments.length?e:void 0,3);return hn(r,function(t){if(i(t,t,n))return hn.stop()},void 0,!1,!0).stopped}}),Ot({target:"Set",proto:!0,real:!0,forced:L},{symmetricDifference:function(t){var e=N(this),n=new(yn(e,Ct("Set")))(e),r=$e(n.delete),i=$e(n.add);return hn(t,function(t){r.call(n,t)||i.call(n,t)}),n}}),Ot({target:"Set",proto:!0,real:!0,forced:L},{union:function(t){var e=new(yn(e=N(this),Ct("Set")))(e);return hn(t,$e(e.add),e),e}});var co=Math.floor;Ot({target:"Number",stat:!0},{isInteger:function(t){return!S(t)&&isFinite(t)&&co(t)===t}}),qt.Number.isInteger,Ot({target:"Number",stat:!0},{isNaN:function(t){return t!=t}}),qt.Number.isNaN;var ho=function(t,e){return(ho=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function lo(t,e){function n(){this.constructor=t}ho(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var fo=function(){return(fo=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function po(t,s,a,u){return new(a=a||Promise)(function(n,e){function r(t){try{o(u.next(t))}catch(t){e(t)}}function i(t){try{o(u.throw(t))}catch(t){e(t)}}function o(t){var e;t.done?n(t.value):((e=t.value)instanceof a?e:new a(function(t){t(e)})).then(r,i)}o((u=u.apply(t,s||[])).next())})}function vo(n,r){var i,o,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},t={next:e(0),throw:e(1),return:e(2)};return"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(e){return function(t){return function(e){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,o&&(s=2&e[0]?o.return:e[0]?o.throw||((s=o.return)&&s.call(o),0):o.next)&&!(s=s.call(o,e[1])).done)return s;switch(o=0,s&&(e=[2&e[0],s.value]),e[0]){case 0:case 1:s=e;break;case 4:return a.label++,{value:e[1],done:!1};case 5:a.label++,o=e[1],e=[0];continue;case 7:e=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===e[0]||2===e[0])){a=0;continue}if(3===e[0]&&(!s||e[1]>s[0]&&e[1]<s[3])){a.label=e[1];break}if(6===e[0]&&a.label<s[1]){a.label=s[1],s=e;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(e);break}s[2]&&a.ops.pop(),a.trys.pop();continue}e=r.call(n,a)}catch(t){e=[6,t],o=0}finally{i=s=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}}function yo(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function go(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),s=[];try{for(;(void 0===e||0<e--)&&!(r=o.next()).done;)s.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}function mo(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(go(arguments[e]));return t}function _o(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),i=0,e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}function bo(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);i<128?e[n++]=i:(i<2048?e[n++]=i>>6|192:(55296==(64512&i)&&r+1<t.length&&56320==(64512&t.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&t.charCodeAt(++r)),e[n++]=i>>18|240,e[n++]=i>>12&63|128):e[n++]=i>>12|224,e[n++]=i>>6&63|128),e[n++]=63&i|128)}return e}function wo(t){try{return So.decodeString(t,!0)}catch(t){console.error("base64Decode failed: ",t)}return null}var Eo={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},Io=function(t,e){if(!t)throw To(e)},To=function(t){return new Error("Firebase Database ("+Eo.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)},So={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<t.length;i+=3){var o=t[i],s=i+1<t.length,a=s?t[i+1]:0,u=i+2<t.length,c=o>>2,o=(3&o)<<4|a>>4,a=(15&a)<<2|(h=u?t[i+2]:0)>>6,h=63&h;u||(h=64,s||(a=64)),r.push(n[c],n[o],n[a],n[h])}return r.join("")},encodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(bo(t),e)},decodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){for(var e=[],n=0,r=0;n<t.length;){var i,o,s,a=t[n++];a<128?e[r++]=String.fromCharCode(a):191<a&&a<224?(o=t[n++],e[r++]=String.fromCharCode((31&a)<<6|63&o)):239<a&&a<365?(i=((7&a)<<18|(63&(o=t[n++]))<<12|(63&(s=t[n++]))<<6|63&t[n++])-65536,e[r++]=String.fromCharCode(55296+(i>>10)),e[r++]=String.fromCharCode(56320+(1023&i))):(o=t[n++],s=t[n++],e[r++]=String.fromCharCode((15&a)<<12|(63&o)<<6|63&s))}return e.join("")}(this.decodeStringToByteArray(t,e))},decodeStringToByteArray:function(t,e){this.init_();for(var n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<t.length;){var o=n[t.charAt(i++)],s=i<t.length?n[t.charAt(i)]:0,a=++i<t.length?n[t.charAt(i)]:64,u=++i<t.length?n[t.charAt(i)]:64;if(++i,null==o||null==s||null==a||null==u)throw Error();o=o<<2|s>>4,r.push(o),64!==a&&(s=s<<4&240|a>>2,r.push(s),64!==u&&(u|=a<<6&192,r.push(u)))}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),(this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t)>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};function Co(t){return No(void 0,t)}function No(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:return new Date(e.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return e}for(var n in e)e.hasOwnProperty(n)&&"__proto__"!==n&&(t[n]=No(t[n],e[n]));return t}var Ao=(ko.prototype.wrapCallback=function(n){var r=this;return function(t,e){t?r.reject(t):r.resolve(e),"function"==typeof n&&(r.promise.catch(function(){}),1===n.length?n(t):n(t,e))}},ko);function ko(){var n=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise(function(t,e){n.resolve=t,n.reject=e})}function Oo(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Po(){return"undefined"!=typeof window&&(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Oo())}function Ro(){var t="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof t&&void 0!==t.id}function Do(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function xo(){return!0===Eo.NODE_ADMIN}function Lo(){return"indexedDB"in self&&null!=indexedDB}function Mo(){return new Promise(function(t,e){try{var n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=window.indexedDB.open(r);i.onsuccess=function(){i.result.close(),n||window.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=function(){n=!1},i.onerror=function(){var t;e((null===(t=i.error)||void 0===t?void 0:t.message)||"")}}catch(t){e(t)}})}function Fo(){return navigator&&navigator.cookieEnabled}var Uo,jo="FirebaseError",Vo=(lo(qo,Uo=Error),qo);function qo(t,e,n){return(e=Uo.call(this,e)||this).code=t,e.customData=n,e.name=jo,Object.setPrototypeOf(e,qo.prototype),Error.captureStackTrace&&Error.captureStackTrace(e,Bo.prototype.create),e}var Bo=(Wo.prototype.create=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r,i=e[0]||{},o=this.service+"/"+t,t=(t=this.errors[t])?(r=i,t.replace(Ko,function(t,e){var n=r[e];return null!=n?String(n):"<"+e+"?>"})):"Error",t=this.serviceName+": "+t+" ("+o+").";return new Vo(o,t,i)},Wo);function Wo(t,e,n){this.service=t,this.serviceName=e,this.errors=n}var Ko=/\{\$([^}]+)}/g;function Ho(t){return JSON.parse(t)}function Go(t){return JSON.stringify(t)}function zo(t){var e={},n={},r={},i="";try{var o=t.split("."),e=Ho(wo(o[0])||""),n=Ho(wo(o[1])||""),i=o[2],r=n.d||{};delete n.d}catch(t){}return{header:e,claims:n,data:r,signature:i}}function Qo(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function Yo(t,e){return Object.prototype.hasOwnProperty.call(t,e)?t[e]:void 0}function Xo(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Jo(t,e,n){var r,i={};for(r in t)Object.prototype.hasOwnProperty.call(t,r)&&(i[r]=e.call(n,t[r],r,t));return i}var $o=(Zo.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},Zo.prototype.compress_=function(t,e){e=e||0;var n=this.W_;if("string"==typeof t)for(var r=0;r<16;r++)n[r]=t.charCodeAt(e)<<24|t.charCodeAt(e+1)<<16|t.charCodeAt(e+2)<<8|t.charCodeAt(e+3),e+=4;else for(r=0;r<16;r++)n[r]=t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3],e+=4;for(r=16;r<80;r++){var i=n[r-3]^n[r-8]^n[r-14]^n[r-16];n[r]=4294967295&(i<<1|i>>>31)}for(var o,s,a=this.chain_[0],u=this.chain_[1],c=this.chain_[2],h=this.chain_[3],l=this.chain_[4],r=0;r<80;r++)s=r<40?r<20?(o=h^u&(c^h),1518500249):(o=u^c^h,1859775393):r<60?(o=u&c|h&(u|c),2400959708):(o=u^c^h,3395469782),i=(a<<5|a>>>27)+o+l+s+n[r]&4294967295,l=h,h=c,c=4294967295&(u<<30|u>>>2),u=a,a=i;this.chain_[0]=this.chain_[0]+a&4294967295,this.chain_[1]=this.chain_[1]+u&4294967295,this.chain_[2]=this.chain_[2]+c&4294967295,this.chain_[3]=this.chain_[3]+h&4294967295,this.chain_[4]=this.chain_[4]+l&4294967295},Zo.prototype.update=function(t,e){if(null!=t){void 0===e&&(e=t.length);for(var n=e-this.blockSize,r=0,i=this.buf_,o=this.inbuf_;r<e;){if(0===o)for(;r<=n;)this.compress_(t,r),r+=this.blockSize;if("string"==typeof t){for(;r<e;)if(i[o]=t.charCodeAt(r),++r,++o===this.blockSize){this.compress_(i),o=0;break}}else for(;r<e;)if(i[o]=t[r],++r,++o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=e}},Zo.prototype.digest=function(){var t=[],e=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;56<=n;n--)this.buf_[n]=255&e,e/=256;this.compress_(this.buf_);for(var r=0,n=0;n<5;n++)for(var i=24;0<=i;i-=8)t[r]=this.chain_[n]>>i&255,++r;return t},Zo);function Zo(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}function ts(t,e){return(e=new es(t,e)).subscribe.bind(e)}var es=(ns.prototype.next=function(e){this.forEachObserver(function(t){t.next(e)})},ns.prototype.error=function(e){this.forEachObserver(function(t){t.error(e)}),this.close(e)},ns.prototype.complete=function(){this.forEachObserver(function(t){t.complete()}),this.close()},ns.prototype.subscribe=function(t,e,n){var r,i=this;if(void 0===t&&void 0===e&&void 0===n)throw new Error("Missing Observer.");return void 0===(r=function(t){if("object"==typeof t&&null!==t)for(var e=0,n=["next","error","complete"];e<n.length;e++){var r=n[e];if(r in t&&"function"==typeof t[r])return 1}}(t)?t:{next:t,error:e,complete:n}).next&&(r.next=rs),void 0===r.error&&(r.error=rs),void 0===r.complete&&(r.complete=rs),n=this.unsubscribeOne.bind(this,this.observers.length),this.finalized&&this.task.then(function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(t){}}),this.observers.push(r),n},ns.prototype.unsubscribeOne=function(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],--this.observerCount,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},ns.prototype.forEachObserver=function(t){if(!this.finalized)for(var e=0;e<this.observers.length;e++)this.sendOne(e,t)},ns.prototype.sendOne=function(t,e){var n=this;this.task.then(function(){if(void 0!==n.observers&&void 0!==n.observers[t])try{e(n.observers[t])}catch(t){"undefined"!=typeof console&&console.error&&console.error(t)}})},ns.prototype.close=function(t){var e=this;this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then(function(){e.observers=void 0,e.onNoObservers=void 0}))},ns);function ns(t,e){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then(function(){t(n)}).catch(function(t){n.error(t)})}function rs(){}function is(t,e,n,r){var i;if(r<e?i="at least "+e:n<r&&(i=0===n?"none":"no more than "+n),i)throw new Error(t+" failed: Was called with "+r+(1===r?" argument.":" arguments.")+" Expects "+i+".")}function os(t,e,n){var r="";switch(e){case 1:r=n?"first":"First";break;case 2:r=n?"second":"Second";break;case 3:r=n?"third":"Third";break;case 4:r=n?"fourth":"Fourth";break;default:throw new Error("errorPrefix called with argumentNumber > 4.  Need to update it?")}return(t+=" failed: ")+(r+" argument ")}function ss(t,e,n,r){if((!r||n)&&"function"!=typeof n)throw new Error(os(t,e,r)+"must be a valid function.")}function as(t,e,n,r){if((!r||n)&&("object"!=typeof n||null===n))throw new Error(os(t,e,r)+"must be a valid context object.")}function us(t){for(var e=0,n=0;n<t.length;n++){var r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:55296<=r&&r<=56319?(e+=4,n++):e+=3}return e}var cs=1e3,hs=2,ls=144e5,fs=.5;function ps(t,e,n){return void 0===e&&(e=cs),void 0===n&&(n=hs),n=e*Math.pow(n,t),t=Math.round(fs*n*(Math.random()-.5)*2),Math.min(ls,n+t)}var ds=(vs.prototype.setInstantiationMode=function(t){return this.instantiationMode=t,this},vs.prototype.setMultipleInstances=function(t){return this.multipleInstances=t,this},vs.prototype.setServiceProps=function(t){return this.serviceProps=t,this},vs);function vs(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY"}var ys="[DEFAULT]",gs=(ms.prototype.get=function(t){void 0===t&&(t=ys);var e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){var n=new Ao;this.instancesDeferred.set(e,n);try{var r=this.getOrInitializeService(e);r&&n.resolve(r)}catch(t){}}return this.instancesDeferred.get(e).promise},ms.prototype.getImmediate=function(t){var e=fo({identifier:ys,optional:!1},t),t=e.identifier,n=e.optional,r=this.normalizeInstanceIdentifier(t);try{var i=this.getOrInitializeService(r);if(i)return i;if(n)return null;throw Error("Service "+this.name+" is not available")}catch(t){if(n)return null;throw t}},ms.prototype.getComponent=function(){return this.component},ms.prototype.setComponent=function(t){var e,n;if(t.name!==this.name)throw Error("Mismatching Component "+t.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if("EAGER"===(this.component=t).instantiationMode)try{this.getOrInitializeService(ys)}catch(t){}try{for(var r=yo(this.instancesDeferred.entries()),i=r.next();!i.done;i=r.next()){var o=go(i.value,2),s=o[0],a=o[1],u=this.normalizeInstanceIdentifier(s);try{var c=this.getOrInitializeService(u);a.resolve(c)}catch(t){}}}catch(t){e={error:t}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}},ms.prototype.clearInstance=function(t){void 0===t&&(t=ys),this.instancesDeferred.delete(t),this.instances.delete(t)},ms.prototype.delete=function(){return po(this,void 0,void 0,function(){var e;return vo(this,function(t){switch(t.label){case 0:return e=Array.from(this.instances.values()),[4,Promise.all(mo(e.filter(function(t){return"INTERNAL"in t}).map(function(t){return t.INTERNAL.delete()}),e.filter(function(t){return"_delete"in t}).map(function(t){return t._delete()})))];case 1:return t.sent(),[2]}})})},ms.prototype.isComponentSet=function(){return null!=this.component},ms.prototype.getOrInitializeService=function(t){var e=this.instances.get(t);return!e&&this.component&&(e=this.component.instanceFactory(this.container,t===ys?void 0:t),this.instances.set(t,e)),e||null},ms.prototype.normalizeInstanceIdentifier=function(t){return!this.component||this.component.multipleInstances?t:ys},ms);function ms(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map}var _s=(bs.prototype.addComponent=function(t){var e=this.getProvider(t.name);if(e.isComponentSet())throw new Error("Component "+t.name+" has already been registered with "+this.name);e.setComponent(t)},bs.prototype.addOrOverwriteComponent=function(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)},bs.prototype.getProvider=function(t){if(this.providers.has(t))return this.providers.get(t);var e=new gs(t,this);return this.providers.set(t,e),e},bs.prototype.getProviders=function(){return Array.from(this.providers.values())},bs);function bs(t){this.name=t,this.providers=new Map}function ws(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),i=0,e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}var Es,Is=[];function Ts(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(!(e<t.logLevel)){var i=(new Date).toISOString(),o=Ns[e];if(!o)throw new Error("Attempted to log a message with an invalid logType (value: "+e+")");console[o].apply(console,ws(["["+i+"]  "+t.name+":"],n))}}(Pr=Es=Es||{})[Pr.DEBUG=0]="DEBUG",Pr[Pr.VERBOSE=1]="VERBOSE",Pr[Pr.INFO=2]="INFO",Pr[Pr.WARN=3]="WARN",Pr[Pr.ERROR=4]="ERROR",Pr[Pr.SILENT=5]="SILENT";var Ss={debug:Es.DEBUG,verbose:Es.VERBOSE,info:Es.INFO,warn:Es.WARN,error:Es.ERROR,silent:Es.SILENT},Cs=Es.INFO,Ns=((K={})[Es.DEBUG]="log",K[Es.VERBOSE]="log",K[Es.INFO]="info",K[Es.WARN]="warn",K[Es.ERROR]="error",K),As=(Object.defineProperty(ks.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in Es))throw new TypeError('Invalid value "'+t+'" assigned to `logLevel`');this._logLevel=t},enumerable:!1,configurable:!0}),ks.prototype.setLogLevel=function(t){this._logLevel="string"==typeof t?Ss[t]:t},Object.defineProperty(ks.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!1,configurable:!0}),Object.defineProperty(ks.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(t){this._userLogHandler=t},enumerable:!1,configurable:!0}),ks.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,ws([this,Es.DEBUG],t)),this._logHandler.apply(this,ws([this,Es.DEBUG],t))},ks.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,ws([this,Es.VERBOSE],t)),this._logHandler.apply(this,ws([this,Es.VERBOSE],t))},ks.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,ws([this,Es.INFO],t)),this._logHandler.apply(this,ws([this,Es.INFO],t))},ks.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,ws([this,Es.WARN],t)),this._logHandler.apply(this,ws([this,Es.WARN],t))},ks.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,ws([this,Es.ERROR],t)),this._logHandler.apply(this,ws([this,Es.ERROR],t))},ks);function ks(t){this.name=t,this._logLevel=Cs,this._logHandler=Ts,this._userLogHandler=null,Is.push(this)}function Os(e){Is.forEach(function(t){t.setLogLevel(e)})}var Pr=((L={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",L["bad-app-name"]="Illegal App name: '{$appName}",L["duplicate-app"]="Firebase App named '{$appName}' already exists",L["app-deleted"]="Firebase App named '{$appName}' already deleted",L["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",L["invalid-log-argument"]="First argument to `onLog` must be null or a function.",L),Ps=new Bo("app","Firebase",Pr),wt="@firebase/app",Rs="[DEFAULT]",Ds=((K={})[wt]="fire-core",K["@firebase/analytics"]="fire-analytics",K["@firebase/auth"]="fire-auth",K["@firebase/database"]="fire-rtdb",K["@firebase/functions"]="fire-fn",K["@firebase/installations"]="fire-iid",K["@firebase/messaging"]="fire-fcm",K["@firebase/performance"]="fire-perf",K["@firebase/remote-config"]="fire-rc",K["@firebase/storage"]="fire-gcs",K["@firebase/firestore"]="fire-fst",K["fire-js"]="fire-js",K["firebase-wrapper"]="fire-js-all",K),xs=new As("@firebase/app"),Ls=(Object.defineProperty(Ms.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(t){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=t},enumerable:!1,configurable:!0}),Object.defineProperty(Ms.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!1,configurable:!0}),Object.defineProperty(Ms.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!1,configurable:!0}),Ms.prototype.delete=function(){var e=this;return new Promise(function(t){e.checkDestroyed_(),t()}).then(function(){return e.firebase_.INTERNAL.removeApp(e.name_),Promise.all(e.container.getProviders().map(function(t){return t.delete()}))}).then(function(){e.isDeleted_=!0})},Ms.prototype._getService=function(t,e){return void 0===e&&(e=Rs),this.checkDestroyed_(),this.container.getProvider(t).getImmediate({identifier:e})},Ms.prototype._removeServiceInstance=function(t,e){void 0===e&&(e=Rs),this.container.getProvider(t).clearInstance(e)},Ms.prototype._addComponent=function(e){try{this.container.addComponent(e)}catch(t){xs.debug("Component "+e.name+" failed to register with FirebaseApp "+this.name,t)}},Ms.prototype._addOrOverwriteComponent=function(t){this.container.addOrOverwriteComponent(t)},Ms.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw Ps.create("app-deleted",{appName:this.name_})},Ms);function Ms(t,e,n){var r,i,o=this;this.firebase_=n,this.isDeleted_=!1,this.name_=e.name,this.automaticDataCollectionEnabled_=e.automaticDataCollectionEnabled||!1,this.options_=Co(t),this.container=new _s(e.name),this._addComponent(new ds("app",function(){return o},"PUBLIC"));try{for(var s=yo(this.firebase_.INTERNAL.components.values()),a=s.next();!a.done;a=s.next()){var u=a.value;this._addComponent(u)}}catch(t){r={error:t}}finally{try{a&&!a.done&&(i=s.return)&&i.call(s)}finally{if(r)throw r.error}}}Ls.prototype.name&&Ls.prototype.options||Ls.prototype.delete||console.log("dc");var L=function t(){var u,c,h,l,e=(u=Ls,c={},h=new Map,(l={__esModule:!0,initializeApp:function(t,e){void 0===e&&(e={}),"object"==typeof e&&null!==e||(e={name:e});var n=e;if(void 0===n.name&&(n.name=Rs),"string"!=typeof(e=n.name)||!e)throw Ps.create("bad-app-name",{appName:String(e)});if(Qo(c,e))throw Ps.create("duplicate-app",{appName:e});return n=new u(t,n,l),c[e]=n},app:f,registerVersion:function(t,e,n){var r=null!==(i=Ds[t])&&void 0!==i?i:t;n&&(r+="-"+n);var i=r.match(/\s|\//),t=e.match(/\s|\//);if(i||t)return n=['Unable to register library "'+r+'" with version "'+e+'":'],i&&n.push('library name "'+r+'" contains illegal characters (whitespace or "/")'),i&&t&&n.push("and"),t&&n.push('version name "'+e+'" contains illegal characters (whitespace or "/")'),void xs.warn(n.join(" "));o(new ds(r+"-version",function(){return{library:r,version:e}},"VERSION"))},setLogLevel:Os,onLog:function(t,e){if(null!==t&&"function"!=typeof t)throw Ps.create("invalid-log-argument",{appName:name});!function(s,e){for(var t=0,n=Is;t<n.length;t++)!function(t){var o=null;e&&e.level&&(o=Ss[e.level]),t.userLogHandler=null===s?null:function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var i=n.map(function(t){if(null==t)return null;if("string"==typeof t)return t;if("number"==typeof t||"boolean"==typeof t)return t.toString();if(t instanceof Error)return t.message;try{return JSON.stringify(t)}catch(t){return null}}).filter(function(t){return t}).join(" ");e>=(null!=o?o:t.logLevel)&&s({level:Es[e].toLowerCase(),message:i,args:n,type:t.name})}}(n[t])}(t,e)},apps:null,SDK_VERSION:"8.0.2-20201012233953",INTERNAL:{registerComponent:o,removeApp:function(t){delete c[t]},components:h,useAsService:function(t,e){return"serverAuth"===e?null:e}}}).default=l,Object.defineProperty(l,"apps",{get:function(){return Object.keys(c).map(function(t){return c[t]})}}),f.App=u,l);function f(t){if(!Qo(c,t=t||Rs))throw Ps.create("no-app",{appName:t});return c[t]}function o(n){var t,e,r,i=n.name;if(h.has(i))return xs.debug("There were multiple attempts to register component "+i+"."),"PUBLIC"===n.type?l[i]:null;h.set(i,n),"PUBLIC"===n.type&&(r=function(t){if(void 0===t&&(t=f()),"function"!=typeof t[i])throw Ps.create("invalid-app-argument",{appName:i});return t[i]()},void 0!==n.serviceProps&&No(r,n.serviceProps),l[i]=r,u.prototype[i]=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this._getService.bind(this,i).apply(this,n.multipleInstances?t:[])});try{for(var o=yo(Object.keys(c)),s=o.next();!s.done;s=o.next()){var a=s.value;c[a]._addComponent(n)}}catch(e){t={error:e}}finally{try{s&&!s.done&&(e=o.return)&&e.call(o)}finally{if(t)throw t.error}}return"PUBLIC"===n.type?l[i]:null}return e.INTERNAL=fo(fo({},e.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(t){No(e,t)},createSubscribe:ts,ErrorFactory:Bo,deepExtend:No}),e}(),Fs=(Us.prototype.getPlatformInfoString=function(){return this.container.getProviders().map(function(t){return"VERSION"===(null==(e=(e=t).getComponent())?void 0:e.type)?(t=t.getImmediate()).library+"/"+t.version:null;var e}).filter(function(t){return t}).join(" ")},Us);function Us(t){this.container=t}"object"==typeof self&&self.self===self&&void 0!==self.firebase&&(xs.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  "),(ru=self.firebase.SDK_VERSION)&&0<=ru.indexOf("LITE")&&xs.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    "));var js=L.initializeApp;L.initializeApp=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return function(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(t){return}}()&&xs.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the @rollup/plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/@rollup/plugin-node-resolve\n      '),js.apply(void 0,t)};var Vl=L;(ft=Vl).INTERNAL.registerComponent(new ds("platform-logger",function(t){return new Fs(t)},"PRIVATE")),ft.registerVersion(wt,"0.6.13",void 0),ft.registerVersion("fire-js",""),Vl.registerVersion("firebase","8.0.2-20201012233953","app"),function(){var t,o="function"==typeof Object.defineProperties?Object.defineProperty:function(t,e,n){t!=Array.prototype&&t!=Object.prototype&&(t[e]=n.value)},u=function(t){t=["object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global,t];for(var e=0;e<t.length;++e){var n=t[e];if(n&&n.Math==Math)return n}return globalThis}(this);function c(t){var e,n,r="undefined"!=typeof Symbol&&Symbol.iterator&&t[Symbol.iterator];return r?r.call(t):{next:(e=t,n=0,function(){return n<e.length?{done:!1,value:e[n++]}:{done:!0}})}}!function(t,e){var n=u;t=t.split(".");for(var r=0;r<t.length-1;r++){var i=t[r];i in n||(n[i]={}),n=n[i]}(e=e(r=n[t=t[t.length-1]]))!=r&&null!=e&&o(n,t,{configurable:!0,writable:!0,value:e})}("Promise",function(t){function s(t){this.b=0,this.c=void 0,this.a=[];var e=this.f();try{t(e.resolve,e.reject)}catch(t){e.reject(t)}}function e(){this.a=null}function a(e){return e instanceof s?e:new s(function(t){t(e)})}if(t)return t;e.prototype.b=function(t){var e;null==this.a&&(this.a=[],(e=this).c(function(){e.g()})),this.a.push(t)};var n=u.setTimeout;e.prototype.c=function(t){n(t,0)},e.prototype.g=function(){for(;this.a&&this.a.length;){var t=this.a;this.a=[];for(var e=0;e<t.length;++e){var n=t[e];t[e]=null;try{n()}catch(t){this.f(t)}}}this.a=null},e.prototype.f=function(t){this.c(function(){throw t})},s.prototype.f=function(){function t(e){return function(t){r||(r=!0,e.call(n,t))}}var n=this,r=!1;return{resolve:t(this.v),reject:t(this.g)}},s.prototype.v=function(t){if(t===this)this.g(new TypeError("A Promise cannot resolve to itself"));else if(t instanceof s)this.o(t);else{t:switch(typeof t){case"object":var e=null!=t;break t;case"function":e=!0;break t;default:e=!1}e?this.m(t):this.h(t)}},s.prototype.m=function(t){var e=void 0;try{e=t.then}catch(t){return void this.g(t)}"function"==typeof e?this.u(e,t):this.h(t)},s.prototype.g=function(t){this.i(2,t)},s.prototype.h=function(t){this.i(1,t)},s.prototype.i=function(t,e){if(0!=this.b)throw Error("Cannot settle("+t+", "+e+"): Promise already settled in state"+this.b);this.b=t,this.c=e,this.l()},s.prototype.l=function(){if(null!=this.a){for(var t=0;t<this.a.length;++t)i.b(this.a[t]);this.a=null}};var i=new e;return s.prototype.o=function(t){var e=this.f();t.Pa(e.resolve,e.reject)},s.prototype.u=function(t,e){var n=this.f();try{t.call(e,n.resolve,n.reject)}catch(t){n.reject(t)}},s.prototype.then=function(t,e){function n(e,t){return"function"==typeof e?function(t){try{r(e(t))}catch(t){i(t)}}:t}var r,i,o=new s(function(t,e){r=t,i=e});return this.Pa(n(t,r),n(e,i)),o},s.prototype.catch=function(t){return this.then(void 0,t)},s.prototype.Pa=function(t,e){function n(){switch(r.b){case 1:t(r.c);break;case 2:e(r.c);break;default:throw Error("Unexpected state: "+r.b)}}var r=this;null==this.a?i.b(n):this.a.push(n)},s.resolve=a,s.reject=function(n){return new s(function(t,e){e(n)})},s.race=function(i){return new s(function(t,e){for(var n=c(i),r=n.next();!r.done;r=n.next())a(r.value).Pa(t,e)})},s.all=function(t){var e=c(t),o=e.next();return o.done?a([]):new s(function(n,t){for(var r=[],i=0;r.push(void 0),i++,a(o.value).Pa(function(e){return function(t){r[e]=t,0==--i&&n(r)}}(r.length-1),t),!(o=e.next()).done;);})},s});var h=h||{},l=this||self,e=/^[\w+/_-]+[=]{0,2}$/,a=null;function f(t){return(t=t.querySelector&&t.querySelector("script[nonce]"))&&(t=t.nonce||t.getAttribute("nonce"))&&e.test(t)?t:""}function s(){}function p(t){var e=typeof t;return"object"!=e?e:t?Array.isArray(t)?"array":e:"null"}function d(t){var e=p(t);return"array"==e||"object"==e&&"number"==typeof t.length}function v(t){return"function"==p(t)}function y(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var n="closure_uid_"+(1e9*Math.random()>>>0),r=0;function i(t,e,n){return t.call.apply(t.bind,arguments)}function g(e,n,t){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var t=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(t,r),e.apply(n,t)}}return function(){return e.apply(n,arguments)}}function m(t,e,n){return(m=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?i:g).apply(null,arguments)}function _(e){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}var b=Date.now;function w(t,e){function n(){}n.prototype=e.prototype,t.$a=e.prototype,t.prototype=new n,t.prototype.constructor=t}function E(t){return t}function I(t,e,n){this.code=C+t,this.message=e||N[t]||"",this.a=n||null}function T(t){var e=t&&t.code;return e?new I(e.substring(C.length),t.message,t.serverResponse):null}w(I,Error),I.prototype.w=function(){var t={code:this.code,message:this.message};return this.a&&(t.serverResponse=this.a),t},I.prototype.toJSON=function(){return this.w()};var S,C="auth/",N={"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","expired-action-code":"The action code has expired. ","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal error has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal error has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal error has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network error (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal error has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled."},A={kd:{Sa:"https://staging-identitytoolkit.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",Ya:"https://staging-securetoken.sandbox.googleapis.com/v1/token",Va:"https://staging-identitytoolkit.sandbox.googleapis.com/v2/",id:"b"},rd:{Sa:"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",Ya:"https://securetoken.googleapis.com/v1/token",Va:"https://identitytoolkit.googleapis.com/v2/",id:"p"},td:{Sa:"https://staging-www.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",Ya:"https://staging-securetoken.sandbox.googleapis.com/v1/token",Va:"https://staging-identitytoolkit.sandbox.googleapis.com/v2/",id:"s"},ud:{Sa:"https://www-googleapis-test.sandbox.google.com/identitytoolkit/v3/relyingparty/",Ya:"https://test-securetoken.sandbox.googleapis.com/v1/token",Va:"https://test-identitytoolkit.sandbox.googleapis.com/v2/",id:"t"}};function k(t){for(var e in A)if(A[e].id===t)return t=A[e],{firebaseEndpoint:t.Sa,secureTokenEndpoint:t.Ya,identityPlatformEndpoint:t.Va};return null}function O(t){if(t)try{return t.$goog_Thenable}catch(t){return}}function P(t){var e;Error.captureStackTrace?Error.captureStackTrace(this,P):(e=Error().stack)&&(this.stack=e),t&&(this.message=String(t))}function R(t,e){for(var n="",r=(t=t.split("%s")).length-1,i=0;i<r;i++)n+=t[i]+(i<e.length?e[i]:"%s");P.call(this,n+t[r])}function D(t){throw new R("Failure"+(t?": "+t:""),Array.prototype.slice.call(arguments,1))}function x(t,e){this.c=t,this.f=e,this.b=0,this.a=null}function L(t,e){t.f(e),t.b<100&&(t.b++,e.next=t.a,t.a=e)}function M(){this.b=this.a=null}S=k("__EID__")?"__EID__":void 0,w(P,Error),P.prototype.name="CustomError",w(R,P),R.prototype.name="AssertionError",x.prototype.get=function(){var t;return 0<this.b?(this.b--,t=this.a,this.a=t.next,t.next=null):t=this.c(),t};var F=new x(function(){return new U},function(t){t.reset()});function U(){this.next=this.b=this.a=null}M.prototype.add=function(t,e){var n=F.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},U.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null},U.prototype.reset=function(){this.next=this.b=this.a=null};var j=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},V=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"==typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)},q=Array.prototype.filter?function(t,e){return Array.prototype.filter.call(t,e,void 0)}:function(t,e){for(var n,r=t.length,i=[],o=0,s="string"==typeof t?t.split(""):t,a=0;a<r;a++)a in s&&(n=s[a],e.call(void 0,n,a,t)&&(i[o++]=n));return i},B=Array.prototype.map?function(t,e){return Array.prototype.map.call(t,e,void 0)}:function(t,e){for(var n=t.length,r=Array(n),i="string"==typeof t?t.split(""):t,o=0;o<n;o++)o in i&&(r[o]=e.call(void 0,i[o],o,t));return r},W=Array.prototype.some?function(t,e){return Array.prototype.some.call(t,e,void 0)}:function(t,e){for(var n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t))return!0;return!1};function K(t,e){return 0<=j(t,e)}function H(t,e){var n;return(n=0<=(e=j(t,e)))&&Array.prototype.splice.call(t,e,1),n}function G(n,r){!function(t,e){for(var n="string"==typeof t?t.split(""):t,r=t.length-1;0<=r;--r)r in n&&e.call(void 0,n[r],r,t)}(n,function(t,e){r.call(void 0,t,e,n)&&Array.prototype.splice.call(n,e,1).length})}function z(){return Array.prototype.concat.apply([],arguments)}function Q(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}var Y,X=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]},J=/&/g,$=/</g,Z=/>/g,tt=/"/g,et=/'/g,nt=/\x00/g,rt=/[\x00&<>"']/;function it(t,e){return-1!=t.indexOf(e)}function ot(t,e){return t<e?-1:e<t?1:0}var st=l.navigator;function at(t){return it(Y,t)}function ut(t,e){for(var n in t)e.call(void 0,t[n],n,t)}function ct(t){for(var e in t)return;return 1}function ht(t){var e,n={};for(e in t)n[e]=t[e];return n}Y=(st=st&&st.userAgent)?st:"";var lt="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ft(t){for(var e,n,r=1;r<arguments.length;r++){for(e in n=arguments[r])t[e]=n[e];for(var i=0;i<lt.length;i++)e=lt[i],Object.prototype.hasOwnProperty.call(n,e)&&(t[e]=n[e])}}function pt(t,e){t:{try{var n=t&&t.ownerDocument;if((n=(n=n&&(n.defaultView||n.parentWindow))||l).Element&&n.Location){var r=n;break t}}catch(t){}r=null}if(r&&void 0!==r[e]&&(!t||!(t instanceof r[e])&&(t instanceof r.Location||t instanceof r.Element))){if(y(t))try{var i=t.constructor.displayName||t.constructor.name||Object.prototype.toString.call(t)}catch(t){i="<object could not be stringified>"}else i=void 0===t?"undefined":null===t?"null":typeof t;D("Argument is not a %s (or a non-Element, non-Location mock); got: %s",e,i)}}function dt(t,e){this.a=t===mt&&e||"",this.b=gt}function vt(t){return t instanceof dt&&t.constructor===dt&&t.b===gt?t.a:(D("expected object of type Const, got '"+t+"'"),"type_error:Const")}dt.prototype.sa=!0,dt.prototype.ra=function(){return this.a},dt.prototype.toString=function(){return"Const{"+this.a+"}"};var yt,gt={},mt={};function _t(){if(void 0===yt){var t=null,e=l.trustedTypes;if(e&&e.createPolicy){try{t=e.createPolicy("goog#html",{createHTML:E,createScript:E,createScriptURL:E})}catch(t){l.console&&l.console.error(t.message)}yt=t}else yt=t}return yt}function bt(t,e){this.a=e===St?t:""}function wt(t){return t instanceof bt&&t.constructor===bt?t.a:(D("expected object of type TrustedResourceUrl, got '"+t+"' of type "+p(t)),"type_error:TrustedResourceUrl")}function Et(t,n){var e,r=vt(t);if(!Tt.test(r))throw Error("Invalid TrustedResourceUrl format: "+r);return e=t=r.replace(It,function(t,e){if(!Object.prototype.hasOwnProperty.call(n,e))throw Error('Found marker, "'+e+'", in format string, "'+r+'", but no valid label mapping found in args: '+JSON.stringify(n));return(t=n[e])instanceof dt?vt(t):encodeURIComponent(String(t))}),new bt(e=(t=_t())?t.createScriptURL(e):e,St)}bt.prototype.sa=!0,bt.prototype.ra=function(){return this.a.toString()},bt.prototype.toString=function(){return"TrustedResourceUrl{"+this.a+"}"};var It=/%{(\w+)}/g,Tt=/^((https:)?\/\/[0-9a-z.:[\]-]+\/|\/[^/\\]|[^:/\\%]+\/|[^:/\\%]*[?#]|about:blank#)/i,St={};function Ct(t,e){this.a=e===Dt?t:""}function Nt(t){return t instanceof Ct&&t.constructor===Ct?t.a:(D("expected object of type SafeUrl, got '"+t+"' of type "+p(t)),"type_error:SafeUrl")}Ct.prototype.sa=!0,Ct.prototype.ra=function(){return this.a.toString()},Ct.prototype.toString=function(){return"SafeUrl{"+this.a+"}"};var At=/^(?:audio\/(?:3gpp2|3gpp|aac|L16|midi|mp3|mp4|mpeg|oga|ogg|opus|x-m4a|x-matroska|x-wav|wav|webm)|font\/\w+|image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp|x-icon)|text\/csv|video\/(?:mpeg|mp4|ogg|webm|quicktime|x-matroska))(?:;\w+=(?:\w+|"[\w;,= ]+"))*$/i,kt=/^data:(.*);base64,[a-z0-9+\/]+=*$/i,Ot=/^(?:(?:https?|mailto|ftp):|[^:/?#]*(?:[/?#]|$))/i;function Pt(t){return t instanceof Ct?t:(t="object"==typeof t&&t.sa?t.ra():String(t),t=Ot.test(t)||(e=(t=(t=String(t)).replace(/(%0A|%0D)/g,"")).match(kt))&&At.test(e[1])?new Ct(t,Dt):null);var e}function Rt(t){return t instanceof Ct?t:(t="object"==typeof t&&t.sa?t.ra():String(t),Ot.test(t)||(t="about:invalid#zClosurez"),new Ct(t,Dt))}var Dt={},xt=new Ct("about:invalid#zClosurez",Dt);function Lt(t,e,n){this.a=n===Mt?t:""}Lt.prototype.sa=!0,Lt.prototype.ra=function(){return this.a.toString()},Lt.prototype.toString=function(){return"SafeHtml{"+this.a+"}"};var Mt={};function Ft(t,e,n,r){return t=t instanceof Ct?t:Rt(t),e=e||l,n=n instanceof dt?vt(n):n||"",e.open(Nt(t),n,r,void 0)}function Ut(t){for(var e=t.split("%s"),n="",r=Array.prototype.slice.call(arguments,1);r.length&&1<e.length;)n+=e.shift()+r.shift();return n+e.join("%s")}function jt(t){return rt.test(t)&&(-1!=t.indexOf("&")&&(t=t.replace(J,"&amp;")),-1!=t.indexOf("<")&&(t=t.replace($,"&lt;")),-1!=t.indexOf(">")&&(t=t.replace(Z,"&gt;")),-1!=t.indexOf('"')&&(t=t.replace(tt,"&quot;")),-1!=t.indexOf("'")&&(t=t.replace(et,"&#39;")),-1!=t.indexOf("\0")&&(t=t.replace(nt,"&#0;"))),t}function Vt(t){return Vt[" "](t),t}Vt[" "]=s;var qt,Bt=at("Opera"),Wt=at("Trident")||at("MSIE"),Kt=at("Edge"),Ht=Kt||Wt,Gt=at("Gecko")&&!(it(Y.toLowerCase(),"webkit")&&!at("Edge"))&&!(at("Trident")||at("MSIE"))&&!at("Edge"),zt=it(Y.toLowerCase(),"webkit")&&!at("Edge");function Qt(){var t=l.document;return t?t.documentMode:void 0}var Yt="",st=(st=Y,Gt?/rv:([^\);]+)(\)|;)/.exec(st):Kt?/Edge\/([\d\.]+)/.exec(st):Wt?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(st):zt?/WebKit\/(\S+)/.exec(st):Bt?/(?:Version)[ \/]?(\S+)/.exec(st):void 0);st&&(Yt=st?st[1]:""),qt=Wt&&null!=(st=Qt())&&st>parseFloat(Yt)?String(st):Yt;var Xt={};function Jt(a){return t=a,e=function(){for(var t=0,e=X(String(qt)).split("."),n=X(String(a)).split("."),r=Math.max(e.length,n.length),i=0;0==t&&i<r;i++)for(var o=e[i]||"",s=n[i]||"";o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],(0!=o[0].length||0!=s[0].length)&&(t=ot(0==o[1].length?0:parseInt(o[1],10),0==s[1].length?0:parseInt(s[1],10))||ot(0==o[2].length,0==s[2].length)||ot(o[2],s[2]),o=o[3],s=s[3],0==t););return 0<=t},n=Xt,Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e();var t,e,n}var $t=l.document&&Wt&&(Qt()||parseInt(qt,10))||void 0;try{new self.OffscreenCanvas(0,0).getContext("2d")}catch(t){}var Zt=!Wt||9<=Number($t);function te(t){var e=document;return"string"==typeof t?e.getElementById(t):t}function ee(n,t){ut(t,function(t,e){t&&"object"==typeof t&&t.sa&&(t=t.ra()),"style"==e?n.style.cssText=t:"class"==e?n.className=t:"for"==e?n.htmlFor=t:ie.hasOwnProperty(e)?n.setAttribute(ie[e],t):0==e.lastIndexOf("aria-",0)||0==e.lastIndexOf("data-",0)?n.setAttribute(e,t):n[e]=t})}var ne,re,ie={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",nonce:"nonce",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};function oe(t,e){return e=String(e),"application/xhtml+xml"===t.contentType&&(e=e.toLowerCase()),t.createElement(e)}function se(t){l.setTimeout(function(){throw t},0)}function ae(t,e){var n;re=re||(l.Promise&&l.Promise.resolve?(n=l.Promise.resolve(void 0),function(){n.then(he)}):function(){var t=he;!v(l.setImmediate)||l.Window&&l.Window.prototype&&!at("Edge")&&l.Window.prototype.setImmediate==l.setImmediate?(ne=ne||function(){var t=l.MessageChannel;if(void 0===t&&"undefined"!=typeof window&&window.postMessage&&window.addEventListener&&!at("Presto")&&(t=function(){(r=oe(document,"IFRAME")).style.display="none",document.documentElement.appendChild(r);var t=r.contentWindow;(r=t.document).open(),r.close();var e="callImmediate"+Math.random(),n="file:"==t.location.protocol?"*":t.location.protocol+"//"+t.location.host,r=m(function(t){"*"!=n&&t.origin!=n||t.data!=e||this.port1.onmessage()},this);t.addEventListener("message",r,!1),this.port1={},this.port2={postMessage:function(){t.postMessage(e,n)}}}),void 0===t||at("Trident")||at("MSIE"))return function(t){l.setTimeout(t,0)};var e=new t,n={},r=n;return e.port1.onmessage=function(){var t;void 0!==n.next&&(t=(n=n.next).Fb,n.Fb=null,t())},function(t){r.next={Fb:t},r=r.next,e.port2.postMessage(0)}}())(t):l.setImmediate(t)}),ue||(re(),ue=!0),ce.add(t,e)}var ue=!1,ce=new M;function he(){for(var t,e,n;n=e=void 0,n=null,(e=ce).a&&(n=e.a,e.a=e.a.next,e.a||(e.b=null),n.next=null),t=n;){try{t.a.call(t.b)}catch(t){se(t)}L(F,t)}ue=!1}function le(t,e){if(this.a=fe,this.i=void 0,this.f=this.b=this.c=null,this.g=this.h=!1,t!=s)try{var n=this;t.call(e,function(t){Te(n,pe,t)},function(t){if(!(t instanceof Pe))try{if(t instanceof Error)throw t;throw Error("Promise rejected.")}catch(t){}Te(n,de,t)})}catch(t){Te(this,de,t)}}var fe=0,pe=2,de=3;function ve(){this.next=this.f=this.b=this.g=this.a=null,this.c=!1}ve.prototype.reset=function(){this.f=this.b=this.g=this.a=null,this.c=!1};var ye=new x(function(){return new ve},function(t){t.reset()});function ge(t,e,n){var r=ye.get();return r.g=t,r.b=e,r.f=n,r}function me(t){if(t instanceof le)return t;var e=new le(s);return Te(e,pe,t),e}function _e(n){return new le(function(t,e){e(n)})}function be(t,e,n){Se(t,e,n,null)||ae(_(e,t))}function we(n){return new le(function(r){var i=n.length,o=[];if(i)for(var t=function(t,e,n){i--,o[t]=e?{Ob:!0,value:n}:{Ob:!1,reason:n},0==i&&r(o)},e=0;e<n.length;e++)be(n[e],_(t,e,!0),_(t,e,!1));else r(o)})}function Ee(t,e){t.b||t.a!=pe&&t.a!=de||Ce(t),t.f?t.f.next=e:t.b=e,t.f=e}function Ie(t,i,o,s){var e=ge(null,null,null);return e.a=new le(function(n,r){e.g=i?function(t){try{var e=i.call(s,t);n(e)}catch(t){r(t)}}:n,e.b=o?function(t){try{var e=o.call(s,t);void 0===e&&t instanceof Pe?r(t):n(e)}catch(t){r(t)}}:r}),Ee(e.a.c=t,e),e.a}function Te(t,e,n){var r,i;t.a==fe&&(t===n&&(e=de,n=new TypeError("Promise cannot resolve to itself")),t.a=1,Se(n,t.Zc,t.$c,t)||(t.i=n,t.a=e,t.c=null,Ce(t),e!=de||n instanceof Pe||(i=n,(r=t).g=!0,ae(function(){r.g&&Oe.call(null,i)}))))}function Se(t,e,n,r){if(t instanceof le)return Ee(t,ge(e||s,n||null,r)),1;if(O(t))return t.then(e,n,r),1;if(y(t))try{var i=t.then;return v(i)?(function(t,e,n,r,i){function o(t){s||(s=!0,r.call(i,t))}var s=!1;try{e.call(t,function(t){s||(s=!0,n.call(i,t))},o)}catch(t){o(t)}}(t,i,e,n,r),1):void 0}catch(t){return n.call(r,t),1}}function Ce(t){t.h||(t.h=!0,ae(t.fc,t))}function Ne(t){var e=null;return t.b&&(e=t.b,t.b=e.next,e.next=null),t.b||(t.f=null),e}function Ae(t,e,n,r){if(n==de&&e.b&&!e.c)for(;t&&t.g;t=t.c)t.g=!1;if(e.a)e.a.c=null,ke(e,n,r);else try{e.c?e.g.call(e.f):ke(e,n,r)}catch(t){Oe.call(null,t)}L(ye,e)}function ke(t,e,n){e==pe?t.g.call(t.f,n):t.b&&t.b.call(t.f,n)}le.prototype.then=function(t,e,n){return Ie(this,v(t)?t:null,v(e)?e:null,n)},le.prototype.$goog_Thenable=!0,(t=le.prototype).na=function(t,e){return(t=ge(t,t,e)).c=!0,Ee(this,t),this},t.s=function(t,e){return Ie(this,null,t,e)},t.cancel=function(t){var e;this.a==fe&&(e=new Pe(t),ae(function(){!function t(e,n){if(e.a==fe)if(e.c){var r=e.c;if(r.b){for(var i=0,o=null,s=null,a=r.b;a&&(a.c||(i++,a.a==e&&(o=a),!(o&&1<i)));a=a.next)o||(s=a);o&&(r.a==fe&&1==i?t(r,n):(s?((i=s).next==r.f&&(r.f=i),i.next=i.next.next):Ne(r),Ae(r,o,de,n)))}e.c=null}else Te(e,de,n)}(this,e)},this))},t.Zc=function(t){this.a=fe,Te(this,pe,t)},t.$c=function(t){this.a=fe,Te(this,de,t)},t.fc=function(){for(var t;t=Ne(this);)Ae(this,t,this.a,this.i);this.h=!1};var Oe=se;function Pe(t){P.call(this,t)}function Re(){this.xa=this.xa,this.oa=this.oa}w(Pe,P);var De=0;function xe(t){t.xa||(t.xa=!0,t.Da(),0==De)||Object.prototype.hasOwnProperty.call(t,n)&&t[n]||(t[n]=++r)}Re.prototype.xa=!(Pe.prototype.name="cancel"),Re.prototype.Da=function(){if(this.oa)for(;this.oa.length;)this.oa.shift()()};var Yt=Object.freeze||function(t){return t},Le=!Wt||9<=Number($t),Me=Wt&&!Jt("9"),Fe=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{l.addEventListener("test",s,e),l.removeEventListener("test",s,e)}catch(t){}return t}();function Ue(t,e){this.type=t,this.b=this.target=e,this.defaultPrevented=!1}function je(t,e){if(Ue.call(this,t?t.type:""),this.relatedTarget=this.b=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.a=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.b=e,e=t.relatedTarget){if(Gt){t:{try{Vt(e.nodeName);var i=!0;break t}catch(t){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:Ve[t.pointerType]||"",(this.a=t).defaultPrevented&&this.preventDefault()}}Ue.prototype.preventDefault=function(){this.defaultPrevented=!0},w(je,Ue);var Ve=Yt({2:"touch",3:"pen",4:"mouse"});je.prototype.preventDefault=function(){je.$a.preventDefault.call(this);var t=this.a;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,Me)try{(t.ctrlKey||112<=t.keyCode&&t.keyCode<=123)&&(t.keyCode=-1)}catch(t){}},je.prototype.g=function(){return this.a};var qe="closure_listenable_"+(1e6*Math.random()|0),Be=0;function We(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.Ua=i,this.key=++Be,this.va=this.Oa=!1}function Ke(t){t.va=!0,t.listener=null,t.proxy=null,t.src=null,t.Ua=null}function He(t){this.src=t,this.a={},this.b=0}function Ge(t,e){var n=e.type;n in t.a&&H(t.a[n],e)&&(Ke(e),0==t.a[n].length&&(delete t.a[n],t.b--))}function ze(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.va&&o.listener==e&&o.capture==!!n&&o.Ua==r)return i}return-1}He.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var s=ze(t,e,r,i);return-1<s?(e=t[s],n||(e.Oa=!1)):((e=new We(e,this.src,o,!!r,i)).Oa=n,t.push(e)),e};var Qe="closure_lm_"+(1e6*Math.random()|0),Ye={};function Xe(t,e,n,r,i){if(r&&r.once)$e(t,e,n,r,i);else if(Array.isArray(e))for(var o=0;o<e.length;o++)Xe(t,e[o],n,r,i);else n=un(n),t&&t[qe]?hn(t,e,n,y(r)?!!r.capture:!!r,i):Je(t,e,n,!1,r,i)}function Je(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var s,a,u=y(i)?!!i.capture:!!i,c=sn(t);if(c||(t[Qe]=c=new He(t)),!(n=c.add(e,n,r,u,o)).proxy)if(s=on,r=a=Le?function(t){return s.call(a.src,a.listener,t)}:function(t){if(!(t=s.call(a.src,a.listener,t)))return t},(n.proxy=r).src=t,r.listener=n,t.addEventListener)Fe||(i=u),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(en(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}}function $e(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)$e(t,e[o],n,r,i);else n=un(n),t&&t[qe]?ln(t,e,n,y(r)?!!r.capture:!!r,i):Je(t,e,n,!0,r,i)}function Ze(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)Ze(t,e[o],n,r,i);else r=y(r)?!!r.capture:!!r,n=un(n),t&&t[qe]?(t=t.v,(e=String(e).toString())in t.a&&-1<(n=ze(o=t.a[e],n,r,i))&&(Ke(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete t.a[e],t.b--))):(t=t&&sn(t))&&(e=t.a[e.toString()],t=-1,e&&(t=ze(e,n,r,i)),(n=-1<t?e[t]:null)&&tn(n))}function tn(t){var e,n,r;"number"!=typeof t&&t&&!t.va&&((e=t.src)&&e[qe]?Ge(e.v,t):(n=t.type,r=t.proxy,e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(en(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=sn(e))?(Ge(n,t),0==n.b&&(n.src=null,e[Qe]=null)):Ke(t)))}function en(t){return t in Ye?Ye[t]:Ye[t]="on"+t}function nn(t,e,n,r){var i=!0;if((t=sn(t))&&(e=t.a[e.toString()]))for(e=e.concat(),t=0;t<e.length;t++){var o=e[t];o&&o.capture==n&&!o.va&&(o=rn(o,r),i=i&&!1!==o)}return i}function rn(t,e){var n=t.listener,r=t.Ua||t.src;return t.Oa&&tn(t),n.call(r,e)}function on(t,e){if(t.va)return!0;if(Le)return rn(t,new je(e,this));if(!e)t:{e=["window","event"];for(var n=l,r=0;r<e.length;r++)if(null==(n=n[e[r]])){e=null;break t}e=n}if(e=new je(r=e,this),n=!0,!(r.keyCode<0||null!=r.returnValue)){t:{var i=!1;if(0==r.keyCode)try{r.keyCode=-1;break t}catch(t){i=!0}!i&&null!=r.returnValue||(r.returnValue=!0)}for(r=[],i=e.b;i;i=i.parentNode)r.push(i);for(t=t.type,i=r.length-1;0<=i;i--){e.b=r[i];var o=nn(r[i],t,!0,e),n=n&&o}for(i=0;i<r.length;i++)e.b=r[i],o=nn(r[i],t,!1,e),n=n&&o}return n}function sn(t){return(t=t[Qe])instanceof He?t:null}var an="__closure_events_fn_"+(1e9*Math.random()>>>0);function un(e){return v(e)?e:(e[an]||(e[an]=function(t){return e.handleEvent(t)}),e[an])}function cn(){Re.call(this),this.v=new He(this),(this.$b=this).fb=null}function hn(t,e,n,r,i){t.v.add(String(e),n,!1,r,i)}function ln(t,e,n,r,i){t.v.add(String(e),n,!0,r,i)}function fn(t,e,n,r){if(!(e=t.v.a[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var s,a,u=e[o];u&&!u.va&&u.capture==n&&(s=u.listener,a=u.Ua||u.src,u.Oa&&Ge(t.v,u),i=!1!==s.call(a,r)&&i)}return i&&!r.defaultPrevented}function pn(t,e,n){if(v(t))n&&(t=m(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=m(t.handleEvent,t)}return 2147483647<Number(e)?-1:l.setTimeout(t,e||0)}function dn(n){var r=null;return new le(function(t,e){-1==(r=pn(function(){t(void 0)},n))&&e(Error("Failed to schedule timer."))}).s(function(t){throw l.clearTimeout(r),t})}function vn(t){if(t.V&&"function"==typeof t.V)return t.V();if("string"==typeof t)return t.split("");if(d(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}function yn(t){if(t.Y&&"function"==typeof t.Y)return t.Y();if(!t.V||"function"!=typeof t.V){if(d(t)||"string"==typeof t){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}for(var r in e=[],n=0,t)e[n++]=r;return e}}function gn(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof gn)for(n=t.Y(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function mn(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];_n(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){for(var i={},n=e=0;e<t.a.length;)_n(i,r=t.a[e])||(i[t.a[n++]=r]=1),e++;t.a.length=n}}function _n(t,e){return Object.prototype.hasOwnProperty.call(t,e)}w(cn,Re),cn.prototype[qe]=!0,cn.prototype.addEventListener=function(t,e,n,r){Xe(this,t,e,n,r)},cn.prototype.removeEventListener=function(t,e,n,r){Ze(this,t,e,n,r)},cn.prototype.dispatchEvent=function(t){var e,n=this.fb;if(n)for(e=[];n;n=n.fb)e.push(n);n=this.$b;var r=t.type||t;if("string"==typeof t?t=new Ue(t,n):t instanceof Ue?t.target=t.target||n:(s=t,ft(t=new Ue(r,n),s)),s=!0,e)for(var i=e.length-1;0<=i;i--)var o=t.b=e[i],s=fn(o,r,!0,t)&&s;if(s=fn(o=t.b=n,r,!0,t)&&s,s=fn(o,r,!1,t)&&s,e)for(i=0;i<e.length;i++)s=fn(o=t.b=e[i],r,!1,t)&&s;return s},cn.prototype.Da=function(){if(cn.$a.Da.call(this),this.v){var t,e=this.v;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)Ke(n[r]);delete e.a[t],e.b--}}this.fb=null},(t=gn.prototype).V=function(){mn(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},t.Y=function(){return mn(this),this.a.concat()},t.clear=function(){this.b={},this.c=this.a.length=0},t.get=function(t,e){return _n(this.b,t)?this.b[t]:e},t.set=function(t,e){_n(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},t.forEach=function(t,e){for(var n=this.Y(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var bn=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function wn(t,e){var n;this.a=this.l=this.f="",this.g=null,this.h=this.c="",this.i=!1,t instanceof wn?(this.i=void 0!==e?e:t.i,En(this,t.f),this.l=t.l,this.a=t.a,In(this,t.g),this.c=t.c,Tn(this,Wn(t.b)),this.h=t.h):t&&(n=String(t).match(bn))?(this.i=!!e,En(this,n[1]||"",!0),this.l=kn(n[2]||""),this.a=kn(n[3]||"",!0),In(this,n[4]),this.c=kn(n[5]||"",!0),Tn(this,n[6]||"",!0),this.h=kn(n[7]||"")):(this.i=!!e,this.b=new Fn(null,this.i))}function En(t,e,n){t.f=n?kn(e,!0):e,t.f&&(t.f=t.f.replace(/:$/,""))}function In(t,e){if(e){if(e=Number(e),isNaN(e)||e<0)throw Error("Bad port number "+e);t.g=e}else t.g=null}function Tn(t,e,n){var r,i;e instanceof Fn?(t.b=e,r=t.b,(i=t.i)&&!r.f&&(Un(r),r.c=null,r.a.forEach(function(t,e){var n=e.toLowerCase();e!=n&&(Vn(this,e),Bn(this,n,t))},r)),r.f=i):(n||(e=On(e,Ln)),t.b=new Fn(e,t.i))}function Sn(t,e,n){t.b.set(e,n)}function Cn(t,e){return t.b.get(e)}function Nn(t){return t instanceof wn?new wn(t):new wn(t,void 0)}function An(t,e,n,r){var i=new wn(null,void 0);return t&&En(i,t),e&&(i.a=e),n&&In(i,n),r&&(i.c=r),i}function kn(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function On(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,Pn),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function Pn(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}wn.prototype.toString=function(){var t=[],e=this.f;e&&t.push(On(e,Rn,!0),":");var n=this.a;return!n&&"file"!=e||(t.push("//"),(e=this.l)&&t.push(On(e,Rn,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.g)&&t.push(":",String(n))),(n=this.c)&&(this.a&&"/"!=n.charAt(0)&&t.push("/"),t.push(On(n,"/"==n.charAt(0)?xn:Dn,!0))),(n=this.b.toString())&&t.push("?",n),(n=this.h)&&t.push("#",On(n,Mn)),t.join("")},wn.prototype.resolve=function(t){var e=new wn(this),n=!!t.f;n?En(e,t.f):n=!!t.l,n?e.l=t.l:n=!!t.a,n?e.a=t.a:n=null!=t.g;var r,i=t.c;if(n)In(e,t.g);else if(n=!!t.c)if("/"!=i.charAt(0)&&(this.a&&!this.c?i="/"+i:-1!=(r=e.c.lastIndexOf("/"))&&(i=e.c.substr(0,r+1)+i)),".."==(r=i)||"."==r)i="";else if(it(r,"./")||it(r,"/.")){i=0==r.lastIndexOf("/",0),r=r.split("/");for(var o=[],s=0;s<r.length;){var a=r[s++];"."==a?i&&s==r.length&&o.push(""):".."==a?((1<o.length||1==o.length&&""!=o[0])&&o.pop(),i&&s==r.length&&o.push("")):(o.push(a),i=!0)}i=o.join("/")}else i=r;return n?e.c=i:n=""!==t.b.toString(),n?Tn(e,Wn(t.b)):n=!!t.h,n&&(e.h=t.h),e};var Rn=/[#\/\?@]/g,Dn=/[#\?:]/g,xn=/[#\?]/g,Ln=/[#\?@]/g,Mn=/#/g;function Fn(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function Un(o){o.a||(o.a=new gn,o.b=0,o.c&&function(t){if(t){t=t.split("&");for(var e=0;e<t.length;e++){var n,r=t[e].indexOf("="),i=null;0<=r?(n=t[e].substring(0,r),i=t[e].substring(r+1)):n=t[e],r=n,i=i?decodeURIComponent(i.replace(/\+/g," ")):"",o.add(decodeURIComponent(r.replace(/\+/g," ")),i)}}}(o.c))}function jn(t){var e=yn(t);if(void 0===e)throw Error("Keys are undefined");var n=new Fn(null,void 0);t=vn(t);for(var r=0;r<e.length;r++){var i=e[r],o=t[r];Array.isArray(o)?Bn(n,i,o):n.add(i,o)}return n}function Vn(t,e){Un(t),e=Kn(t,e),_n(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,_n((t=t.a).b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&mn(t)))}function qn(t,e){return Un(t),e=Kn(t,e),_n(t.a.b,e)}function Bn(t,e,n){Vn(t,e),0<n.length&&(t.c=null,t.a.set(Kn(t,e),Q(n)),t.b+=n.length)}function Wn(t){var e=new Fn;return e.c=t.c,t.a&&(e.a=new gn(t.a),e.b=t.b),e}function Kn(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}function Hn(t){var e=[];return function t(e,n,r){if(null==n)r.push("null");else{if("object"==typeof n){if(Array.isArray(n)){var i=n;n=i.length,r.push("[");for(var o="",s=0;s<n;s++)r.push(o),t(e,i[s],r),o=",";return r.push("]"),0}if(!(n instanceof String||n instanceof Number||n instanceof Boolean)){for(i in r.push("{"),o="",n)Object.prototype.hasOwnProperty.call(n,i)&&(s=n[i],"function"!=typeof s&&(r.push(o),Yn(i,r),r.push(":"),t(e,s,r),o=","));return r.push("}"),0}n=n.valueOf()}switch(typeof n){case"string":Yn(n,r);break;case"number":r.push(isFinite(n)&&!isNaN(n)?String(n):"null");break;case"boolean":r.push(String(n));break;case"function":r.push("null");break;default:throw Error("Unknown type: "+typeof n)}}}(new Gn,t,e),e.join("")}function Gn(){}(t=Fn.prototype).add=function(t,e){Un(this),this.c=null,t=Kn(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},t.clear=function(){this.a=this.c=null,this.b=0},t.forEach=function(n,r){Un(this),this.a.forEach(function(t,e){V(t,function(t){n.call(r,t,e,this)},this)},this)},t.Y=function(){Un(this);for(var t=this.a.V(),e=this.a.Y(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},t.V=function(t){Un(this);var e=[];if("string"==typeof t)qn(this,t)&&(e=z(e,this.a.get(Kn(this,t))));else{t=this.a.V();for(var n=0;n<t.length;n++)e=z(e,t[n])}return e},t.set=function(t,e){return Un(this),this.c=null,qn(this,t=Kn(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},t.get=function(t,e){return t&&0<(t=this.V(t)).length?String(t[0]):e},t.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.Y(),n=0;n<e.length;n++)for(var r=e[n],i=encodeURIComponent(String(r)),r=this.V(r),o=0;o<r.length;o++){var s=i;""!==r[o]&&(s+="="+encodeURIComponent(String(r[o]))),t.push(s)}return this.c=t.join("&")};var zn={'"':'\\"',"\\":"\\\\","/":"\\/","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\v":"\\u000b"},Qn=/\uffff/.test("ï¿¿")?/[\\"\x00-\x1f\x7f-\uffff]/g:/[\\"\x00-\x1f\x7f-\xff]/g;function Yn(t,e){e.push('"',t.replace(Qn,function(t){var e=zn[t];return e||(e="\\u"+(65536|t.charCodeAt(0)).toString(16).substr(1),zn[t]=e),e}),'"')}function Xn(){var t=vr();return Wt&&$t&&11==$t||/Edge\/\d+/.test(t)}function Jn(){return l.window&&l.window.location.href||self&&self.location&&self.location.href||""}function $n(t,e){e=e||l.window;var n="about:blank";t&&(n=Nt(Pt(t)||xt)),e.location.href=n}function Zn(t){return!!((t=(t||vr()).toLowerCase()).match(/android/)||t.match(/webos/)||t.match(/iphone|ipad|ipod/)||t.match(/blackberry/)||t.match(/windows phone/)||t.match(/iemobile/))}function tr(t){t=t||l.window;try{t.close()}catch(t){}}function er(t,e,n){var r=Math.floor(1e9*Math.random()).toString();e=e||500,n=n||600;var i=(window.screen.availHeight-n)/2,o=(window.screen.availWidth-e)/2;for(s in e={width:e,height:n,top:0<i?i:0,left:0<o?o:0,location:!0,resizable:!0,statusbar:!0,toolbar:!1},n=vr().toLowerCase(),r&&(e.target=r,it(n,"crios/")&&(e.target="_blank")),fr(vr())==hr&&(t=t||"http://localhost",e.scrollbars=!0),n=t||"",(t=e)||(t={}),r=window,e=n instanceof Ct?n:Pt(void 0!==n.href?n.href:String(n))||xt,n=t.target||n.target,i=[],t)switch(s){case"width":case"height":case"top":case"left":i.push(s+"="+t[s]);break;case"target":case"noopener":case"noreferrer":break;default:i.push(s+"="+(t[s]?1:0))}var s=i.join(",");if((at("iPhone")&&!at("iPod")&&!at("iPad")||at("iPad")||at("iPod"))&&r.navigator&&r.navigator.standalone&&n&&"_self"!=n?(pt(s=oe(document,"A"),"HTMLAnchorElement"),e=e instanceof Ct?e:Rt(e),s.href=Nt(e),s.setAttribute("target",n),t.noreferrer&&s.setAttribute("rel","noreferrer"),(t=document.createEvent("MouseEvent")).initMouseEvent("click",!0,!0,r,1),s.dispatchEvent(t),s={}):t.noreferrer?(s=Ft("",r,n,s),t=Nt(e),s&&(Ht&&it(t,";")&&(t="'"+t.replace(/'/g,"%27")+"'"),s.opener=null,t='<meta name="referrer" content="no-referrer"><meta http-equiv="refresh" content="0; url='+jt(t)+'">',t=new Lt(t=(r=_t())?r.createHTML(t):t,0,Mt),r=s.document)&&(r.write((o=t)instanceof Lt&&o.constructor===Lt?o.a:(D("expected object of type SafeHtml, got '"+o+"' of type "+p(o)),"type_error:SafeHtml")),r.close())):(s=Ft(e,r,n,s))&&t.noopener&&(s.opener=null),s)try{s.focus()}catch(t){}return s}var nr=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,rr=/^[^@]+@[^@]+$/;function ir(){var e=null;return new le(function(t){"complete"==l.document.readyState?t():(e=function(){t()},$e(window,"load",e))}).s(function(t){throw Ze(window,"load",e),t})}function or(t){return t=t||vr(),!("file:"!==br()&&"ionic:"!==br()||!t.toLowerCase().match(/iphone|ipad|ipod|android/))}function sr(){var t=l.window;try{return t&&t!=t.top}catch(t){return}}function ar(){return void 0!==l.WorkerGlobalScope&&"function"==typeof l.importScripts}function ur(){return Vl.INTERNAL.hasOwnProperty("reactNative")?"ReactNative":Vl.INTERNAL.hasOwnProperty("node")?"Node":ar()?"Worker":"Browser"}function cr(){var t=ur();return"ReactNative"===t||"Node"===t}var hr="Firefox",lr="Chrome";function fr(t){var e=t.toLowerCase();return it(e,"opera/")||it(e,"opr/")||it(e,"opios/")?"Opera":it(e,"iemobile")?"IEMobile":it(e,"msie")||it(e,"trident/")?"IE":it(e,"edge/")?"Edge":it(e,"firefox/")?hr:it(e,"silk/")?"Silk":it(e,"blackberry")?"Blackberry":it(e,"webos")?"Webos":!it(e,"safari/")||it(e,"chrome/")||it(e,"crios/")||it(e,"android")?!it(e,"chrome/")&&!it(e,"crios/")||it(e,"edge/")?it(e,"android")?"Android":(t=t.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/))&&2==t.length?t[1]:"Other":lr:"Safari"}var pr={ld:"FirebaseCore-web",nd:"FirebaseUI-web"};function dr(t,e){e=e||[];var n,r=[],i={};for(n in pr)i[pr[n]]=!0;for(n=0;n<e.length;n++)void 0!==i[e[n]]&&(delete i[e[n]],r.push(e[n]));return r.sort(),(e=r).length||(e=["FirebaseCore-web"]),"Browser"===(r=ur())?r=fr(i=vr()):"Worker"===r&&(r=fr(i=vr())+"-"+r),r+"/JsCore/"+t+"/"+e.join(",")}function vr(){return l.navigator&&l.navigator.userAgent||""}function yr(t,e){t=t.split("."),e=e||l;for(var n=0;n<t.length&&"object"==typeof e&&null!=e;n++)e=e[t[n]];return n!=t.length&&(e=void 0),e}function gr(){try{var t=l.localStorage,e=Sr();if(t)return t.setItem(e,"1"),t.removeItem(e),!Xn()||!!l.indexedDB}catch(t){return ar()&&!!l.indexedDB}return!1}function mr(){return(_r()||"chrome-extension:"===br()||or())&&!cr()&&gr()&&!ar()}function _r(){return"http:"===br()||"https:"===br()}function br(){return l.location&&l.location.protocol||null}function wr(t){return!Zn(t=t||vr())&&fr(t)!=hr}function Er(t){return void 0===t?null:Hn(t)}function Ir(t){var e,n={};for(e in t)t.hasOwnProperty(e)&&null!==t[e]&&void 0!==t[e]&&(n[e]=t[e]);return n}function Tr(t){if(null!==t)return JSON.parse(t)}function Sr(t){return t||Math.floor(1e9*Math.random()).toString()}function Cr(t){return"Safari"!=fr(t=t||vr())&&!t.toLowerCase().match(/iphone|ipad|ipod/)}function Nr(){var t=l.___jsl;if(t&&t.H)for(var e in t.H)if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=t.H[e].L.concat(),t.CP)for(var n=0;n<t.CP.length;n++)t.CP[n]=null}function Ar(t,e){if(e<t)throw Error("Short delay should be less than long delay!");this.a=t,this.c=e,t=vr(),e=ur(),this.b=Zn(t)||"ReactNative"===e}function kr(){var t=l.document;return!t||void 0===t.visibilityState||"visible"==t.visibilityState}function Or(t){"undefined"!=typeof console&&"function"==typeof console.warn&&console.warn(t)}function Pr(t){try{var e=new Date(parseInt(t,10));if(!isNaN(e.getTime())&&!/[^0-9]/.test(t))return e.toUTCString()}catch(t){}return null}function Rr(){return yr("fireauth.oauthhelper",l)||yr("fireauth.iframe",l)}Ar.prototype.get=function(){var t=l.navigator;return!t||"boolean"!=typeof t.onLine||!_r()&&"chrome-extension:"!==br()&&void 0===t.connection||t.onLine?this.b?this.c:this.a:Math.min(5e3,this.a)};var Dr,xr={};function Lr(t){xr[t]||(xr[t]=!0,Or(t))}try{var Mr={};Object.defineProperty(Mr,"abcd",{configurable:!0,enumerable:!0,value:1}),Object.defineProperty(Mr,"abcd",{configurable:!0,enumerable:!0,value:2}),Dr=2==Mr.abcd}catch(t){Dr=!1}function Fr(t,e,n){Dr?Object.defineProperty(t,e,{configurable:!0,enumerable:!0,value:n}):t[e]=n}function Ur(t,e){if(e)for(var n in e)e.hasOwnProperty(n)&&Fr(t,n,e[n])}function jr(t){var e={};return Ur(e,t),e}function Vr(t){var e=t;if("object"==typeof t&&null!=t)for(var n in e="length"in t?[]:{},t)Fr(e,n,Vr(t[n]));return e}function qr(t){var e=t&&(t[Gr]?"phone":null);if(!(e&&t&&t[Hr]))throw new I("internal-error","Internal assert: invalid MultiFactorInfo object");Fr(this,"uid",t[Hr]),Fr(this,"displayName",t[Wr]||null);var n=null;t[Kr]&&(n=new Date(t[Kr]).toUTCString()),Fr(this,"enrollmentTime",n),Fr(this,"factorId",e)}function Br(t){try{var e=new zr(t)}catch(t){e=null}return e}qr.prototype.w=function(){return{uid:this.uid,displayName:this.displayName,factorId:this.factorId,enrollmentTime:this.enrollmentTime}};var Wr="displayName",Kr="enrolledAt",Hr="mfaEnrollmentId",Gr="phoneInfo";function zr(t){qr.call(this,t),Fr(this,"phoneNumber",t[Gr])}function Qr(t){var e={},n=t[$r],r=t[ti],i=t[ei];if(t=Br(t[Zr]),!i||i!=Xr&&i!=Jr&&!n||i==Jr&&!r||i==Yr&&!t)throw Error("Invalid checkActionCode response!");i==Jr?(e[ri]=n||null,e[oi]=n||null,e[ni]=r):(e[ri]=r||null,e[oi]=r||null,e[ni]=n||null),e[ii]=t||null,Fr(this,ai,i),Fr(this,si,Vr(e))}w(zr,qr),zr.prototype.w=function(){var t=zr.$a.w.call(this);return t.phoneNumber=this.phoneNumber,t};var Yr="REVERT_SECOND_FACTOR_ADDITION",Xr="EMAIL_SIGNIN",Jr="VERIFY_AND_CHANGE_EMAIL",$r="email",Zr="mfaInfo",ti="newEmail",ei="requestType",ni="email",ri="fromEmail",ii="multiFactorInfo",oi="previousEmail",si="data",ai="operation";function ui(t){var e=Cn(t=Nn(t),ci)||null,n=Cn(t,hi)||null,r=(r=Cn(t,pi)||null)&&vi[r]||null;if(!e||!n||!r)throw new I("argument-error",ci+", "+hi+"and "+pi+" are required in a valid action code URL.");Ur(this,{apiKey:e,operation:r,code:n,continueUrl:Cn(t,li)||null,languageCode:Cn(t,fi)||null,tenantId:Cn(t,di)||null})}var ci="apiKey",hi="oobCode",li="continueUrl",fi="languageCode",pi="mode",di="tenantId",vi={recoverEmail:"RECOVER_EMAIL",resetPassword:"PASSWORD_RESET",revertSecondFactorAddition:Yr,signIn:Xr,verifyAndChangeEmail:Jr,verifyEmail:"VERIFY_EMAIL"};function yi(t){try{return new ui(t)}catch(t){return null}}function gi(t){var e=t[Ei];if(void 0===e)throw new I("missing-continue-uri");if("string"!=typeof e||"string"==typeof e&&!e.length)throw new I("invalid-continue-uri");if(this.h=e,this.b=this.a=null,this.g=!1,(r=t[mi])&&"object"==typeof r){e=r[Si];var n=r[Ii],r=r[Ti];if("string"==typeof e&&e.length){if(this.a=e,void 0!==n&&"boolean"!=typeof n)throw new I("argument-error",Ii+" property must be a boolean when specified.");if(this.g=!!n,void 0!==r&&("string"!=typeof r||"string"==typeof r&&!r.length))throw new I("argument-error",Ti+" property must be a non empty string when specified.");this.b=r||null}else{if(void 0!==e)throw new I("argument-error",Si+" property must be a non empty string when specified.");if(void 0!==n||void 0!==r)throw new I("missing-android-pkg-name")}}else if(void 0!==r)throw new I("argument-error",mi+" property must be a non null object when specified.");if(this.f=null,(e=t[wi])&&"object"==typeof e){if("string"==typeof(e=e[Ci])&&e.length)this.f=e;else if(void 0!==e)throw new I("argument-error",Ci+" property must be a non empty string when specified.")}else if(void 0!==e)throw new I("argument-error",wi+" property must be a non null object when specified.");if(void 0!==(e=t[bi])&&"boolean"!=typeof e)throw new I("argument-error",bi+" property must be a boolean when specified.");if(this.c=!!e,void 0!==(t=t[_i])&&("string"!=typeof t||"string"==typeof t&&!t.length))throw new I("argument-error",_i+" property must be a non empty string when specified.");this.i=t||null}var mi="android",_i="dynamicLinkDomain",bi="handleCodeInApp",wi="iOS",Ei="url",Ii="installApp",Ti="minimumVersion",Si="packageName",Ci="bundleId";function Ni(t){var e,n={};for(e in n.continueUrl=t.h,n.canHandleCodeInApp=t.c,(n.androidPackageName=t.a)&&(n.androidMinimumVersion=t.b,n.androidInstallApp=t.g),n.iOSBundleId=t.f,n.dynamicLinkDomain=t.i,n)null===n[e]&&delete n[e];return n}var Ai=null;function ki(t){var e=Pi(t);if(!(e&&e.sub&&e.iss&&e.aud&&e.exp))throw Error("Invalid JWT");this.g=t,this.c=e.exp,this.h=e.sub,this.a=e.provider_id||e.firebase&&e.firebase.sign_in_provider||null,this.f=e.firebase&&e.firebase.tenant||null,this.b=!!e.is_anonymous||"anonymous"==this.a}function Oi(t){try{return new ki(t)}catch(t){return null}}function Pi(t){if(!t)return null;if(3!=(t=t.split(".")).length)return null;for(var e,n=(4-(t=t[1]).length%4)%4,r=0;r<n;r++)t+=".";try{return JSON.parse((e="",function(r,t){function e(t){for(;i<r.length;){var e=r.charAt(i++),n=Ai[e];if(null!=n)return n;if(!/^[\s\xa0]*$/.test(e))throw Error("Unknown base64 encoding at char: "+e)}return t}!function(){if(!Ai){Ai={};for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),e=["+/=","+/","-_=","-_.","-_"],n=0;n<5;n++)for(var r=t.concat(e[n].split("")),i=0;i<r.length;i++){var o=r[i];void 0===Ai[o]&&(Ai[o]=i)}}}();for(var i=0;;){var n=e(-1),o=e(0),s=e(64),a=e(64);if(64===a&&-1===n)break;t(n<<2|o>>4),64!=s&&(t(o<<4&240|s>>2),64!=a&&t(s<<6&192|a))}}(t,function(t){e+=String.fromCharCode(t)}),e))}catch(t){}return null}ki.prototype.S=function(){return this.f},ki.prototype.i=function(){return this.b},ki.prototype.toString=function(){return this.g};var Ri="oauth_consumer_key oauth_nonce oauth_signature oauth_signature_method oauth_timestamp oauth_token oauth_version".split(" "),Di=["client_id","response_type","scope","redirect_uri","state"],xi={md:{Ja:"locale",ua:700,ta:600,fa:"facebook.com",Wa:Di},od:{Ja:null,ua:500,ta:750,fa:"github.com",Wa:Di},pd:{Ja:"hl",ua:515,ta:680,fa:"google.com",Wa:Di},vd:{Ja:"lang",ua:485,ta:705,fa:"twitter.com",Wa:Ri},jd:{Ja:"locale",ua:640,ta:600,fa:"apple.com",Wa:[]}};function Li(t){for(var e in xi)if(xi[e].fa==t)return xi[e];return null}function Mi(t){var e={};e["facebook.com"]=qi,e["google.com"]=Wi,e["github.com"]=Bi,e["twitter.com"]=Ki;var n=t&&t[Ui];try{if(n)return new(e[n]||Vi)(t);if(void 0!==t[Fi])return new ji(t)}catch(t){}return null}var Fi="idToken",Ui="providerId";function ji(t){var e,n=t[Ui];if(n||!t[Fi]||(e=Oi(t[Fi]))&&e.a&&(n=e.a),!n)throw Error("Invalid additional user info!");"anonymous"!=n&&"custom"!=n||(n=null),e=!1,void 0!==t.isNewUser?e=!!t.isNewUser:"identitytoolkit#SignupNewUserResponse"===t.kind&&(e=!0),Fr(this,"providerId",n),Fr(this,"isNewUser",e)}function Vi(t){ji.call(this,t),Fr(this,"profile",Vr((t=Tr(t.rawUserInfo||"{}"))||{}))}function qi(t){if(Vi.call(this,t),"facebook.com"!=this.providerId)throw Error("Invalid provider ID!")}function Bi(t){if(Vi.call(this,t),"github.com"!=this.providerId)throw Error("Invalid provider ID!");Fr(this,"username",this.profile&&this.profile.login||null)}function Wi(t){if(Vi.call(this,t),"google.com"!=this.providerId)throw Error("Invalid provider ID!")}function Ki(t){if(Vi.call(this,t),"twitter.com"!=this.providerId)throw Error("Invalid provider ID!");Fr(this,"username",t.screenName||null)}function Hi(t){var e=Cn(r=Nn(t),"link"),n=Cn(Nn(e),"link"),r=Cn(r,"deep_link_id");return Cn(Nn(r),"link")||r||n||e||t}function Gi(t,e){if(!t&&!e)throw new I("internal-error","Internal assert: no raw session string available");if(t&&e)throw new I("internal-error","Internal assert: unable to determine the session type");this.a=t||null,this.b=e||null,this.type=this.a?zi:Qi}w(Vi,ji),w(qi,Vi),w(Bi,Vi),w(Wi,Vi),w(Ki,Vi);var zi="enroll",Qi="signin";function Yi(){}function Xi(t,n){return t.then(function(t){if(t[Us]){var e=Oi(t[Us]);if(!e||n!=e.h)throw new I("user-mismatch");return t}throw new I("user-mismatch")}).s(function(t){throw t&&t.code&&t.code==C+"user-not-found"?new I("user-mismatch"):t})}function Ji(t,e){if(!e)throw new I("internal-error","failed to construct a credential");this.a=e,Fr(this,"providerId",t),Fr(this,"signInMethod",t)}function $i(t){return{pendingToken:t.a,requestUri:"http://localhost"}}function Zi(t){if(t&&t.providerId&&t.signInMethod&&0==t.providerId.indexOf("saml.")&&t.pendingToken)try{return new Ji(t.providerId,t.pendingToken)}catch(t){}return null}function to(t,e,n){if(this.a=null,e.idToken||e.accessToken)e.idToken&&Fr(this,"idToken",e.idToken),e.accessToken&&Fr(this,"accessToken",e.accessToken),e.nonce&&!e.pendingToken&&Fr(this,"nonce",e.nonce),e.pendingToken&&(this.a=e.pendingToken);else{if(!e.oauthToken||!e.oauthTokenSecret)throw new I("internal-error","failed to construct a credential");Fr(this,"accessToken",e.oauthToken),Fr(this,"secret",e.oauthTokenSecret)}Fr(this,"providerId",t),Fr(this,"signInMethod",n)}function eo(t){var e={};return t.idToken&&(e.id_token=t.idToken),t.accessToken&&(e.access_token=t.accessToken),t.secret&&(e.oauth_token_secret=t.secret),e.providerId=t.providerId,t.nonce&&!t.a&&(e.nonce=t.nonce),e={postBody:jn(e).toString(),requestUri:"http://localhost"},t.a&&(delete e.postBody,e.pendingToken=t.a),e}function no(t){if(t&&t.providerId&&t.signInMethod){var e={idToken:t.oauthIdToken,accessToken:t.oauthTokenSecret?null:t.oauthAccessToken,oauthTokenSecret:t.oauthTokenSecret,oauthToken:t.oauthTokenSecret&&t.oauthAccessToken,nonce:t.nonce,pendingToken:t.pendingToken};try{return new to(t.providerId,e,t.signInMethod)}catch(t){}}return null}function ro(t,e){this.Pc=e||[],Ur(this,{providerId:t,isOAuthProvider:!0}),this.Hb={},this.ob=(Li(t)||{}).Ja||null,this.nb=null}function io(t){if("string"!=typeof t||0!=t.indexOf("saml."))throw new I("argument-error",'SAML provider IDs must be prefixed with "saml."');ro.call(this,t,[])}function oo(t){ro.call(this,t,Di),this.a=[]}function so(){oo.call(this,"facebook.com")}function ao(t){if(!t)throw new I("argument-error","credential failed: expected 1 argument (the OAuth access token).");var e=t;return y(t)&&(e=t.accessToken),(new so).credential({accessToken:e})}function uo(){oo.call(this,"github.com")}function co(t){if(!t)throw new I("argument-error","credential failed: expected 1 argument (the OAuth access token).");var e=t;return y(t)&&(e=t.accessToken),(new uo).credential({accessToken:e})}function ho(){oo.call(this,"google.com"),this.Ca("profile")}function lo(t,e){var n=t;return y(t)&&(n=t.idToken,e=t.accessToken),(new ho).credential({idToken:n,accessToken:e})}function fo(){ro.call(this,"twitter.com",Ri)}function po(t,e){var n=t;if(y(n)||(n={oauthToken:t,oauthTokenSecret:e}),!n.oauthToken||!n.oauthTokenSecret)throw new I("argument-error","credential failed: expected 2 arguments (the OAuth access token and secret).");return new to("twitter.com",n,"twitter.com")}function vo(t,e,n){this.a=t,this.f=e,Fr(this,"providerId","password"),Fr(this,"signInMethod",n===go.EMAIL_LINK_SIGN_IN_METHOD?go.EMAIL_LINK_SIGN_IN_METHOD:go.EMAIL_PASSWORD_SIGN_IN_METHOD)}function yo(t){return t&&t.email&&t.password?new vo(t.email,t.password,t.signInMethod):null}function go(){Ur(this,{providerId:"password",isOAuthProvider:!1})}function mo(t,e){if(!(e=_o(e)))throw new I("argument-error","Invalid email link!");return new vo(t,e.code,go.EMAIL_LINK_SIGN_IN_METHOD)}function _o(t){return(t=yi(t=Hi(t)))&&t.operation===Xr?t:null}function bo(t){if(!(t.cb&&t.bb||t.La&&t.ea))throw new I("internal-error");this.a=t,Fr(this,"providerId","phone"),this.fa="phone",Fr(this,"signInMethod","phone")}function wo(e){if(e&&"phone"===e.providerId&&(e.verificationId&&e.verificationCode||e.temporaryProof&&e.phoneNumber)){var n={};return V(["verificationId","verificationCode","temporaryProof","phoneNumber"],function(t){e[t]&&(n[t]=e[t])}),new bo(n)}return null}function Eo(t){return t.a.La&&t.a.ea?{temporaryProof:t.a.La,phoneNumber:t.a.ea}:{sessionInfo:t.a.cb,code:t.a.bb}}function Io(t){try{this.a=t||Vl.auth()}catch(t){throw new I("argument-error","Either an instance of firebase.auth.Auth must be passed as an argument to the firebase.auth.PhoneAuthProvider constructor, or the default firebase App instance must be initialized via firebase.initializeApp().")}Ur(this,{providerId:"phone",isOAuthProvider:!1})}function To(t,e){if(!t)throw new I("missing-verification-id");if(!e)throw new I("missing-verification-code");return new bo({cb:t,bb:e})}function So(t){if(t.temporaryProof&&t.phoneNumber)return new bo({La:t.temporaryProof,ea:t.phoneNumber});var e=t&&t.providerId;if(!e||"password"===e)return null;var n=t&&t.oauthAccessToken,r=t&&t.oauthTokenSecret,i=t&&t.nonce,o=t&&t.oauthIdToken,s=t&&t.pendingToken;try{switch(e){case"google.com":return lo(o,n);case"facebook.com":return ao(n);case"github.com":return co(n);case"twitter.com":return po(n,r);default:return n||r||o||s?s?0==e.indexOf("saml.")?new Ji(e,s):new to(e,{pendingToken:s,idToken:t.oauthIdToken,accessToken:t.oauthAccessToken},e):new oo(e).credential({idToken:o,accessToken:n,rawNonce:i}):null}}catch(t){return null}}function Co(t){if(!t.isOAuthProvider)throw new I("invalid-oauth-provider")}function No(t,e,n,r,i,o,s){if(this.c=t,this.b=e||null,this.g=n||null,this.f=r||null,this.i=o||null,this.h=s||null,this.a=i||null,!this.g&&!this.a)throw new I("invalid-auth-event");if(this.g&&this.a)throw new I("invalid-auth-event");if(this.g&&!this.f)throw new I("invalid-auth-event")}function Ao(t){return(t=t||{}).type?new No(t.type,t.eventId,t.urlResponse,t.sessionId,t.error&&T(t.error),t.postBody,t.tenantId):null}function ko(){this.b=null,this.a=[]}Gi.prototype.Ha=function(){return this.a?me(this.a):me(this.b)},Gi.prototype.w=function(){return this.type==zi?{multiFactorSession:{idToken:this.a}}:{multiFactorSession:{pendingCredential:this.b}}},Yi.prototype.ja=function(){},Yi.prototype.b=function(){},Yi.prototype.c=function(){},Yi.prototype.w=function(){},Ji.prototype.ja=function(t){return oa(t,$i(this))},Ji.prototype.b=function(t,e){var n=$i(this);return n.idToken=e,sa(t,n)},Ji.prototype.c=function(t,e){return Xi(aa(t,$i(this)),e)},Ji.prototype.w=function(){return{providerId:this.providerId,signInMethod:this.signInMethod,pendingToken:this.a}},to.prototype.ja=function(t){return oa(t,eo(this))},to.prototype.b=function(t,e){var n=eo(this);return n.idToken=e,sa(t,n)},to.prototype.c=function(t,e){return Xi(aa(t,eo(this)),e)},to.prototype.w=function(){var t={providerId:this.providerId,signInMethod:this.signInMethod};return this.idToken&&(t.oauthIdToken=this.idToken),this.accessToken&&(t.oauthAccessToken=this.accessToken),this.secret&&(t.oauthTokenSecret=this.secret),this.nonce&&(t.nonce=this.nonce),this.a&&(t.pendingToken=this.a),t},ro.prototype.Ka=function(t){return this.Hb=ht(t),this},w(io,ro),w(oo,ro),oo.prototype.Ca=function(t){return K(this.a,t)||this.a.push(t),this},oo.prototype.Pb=function(){return Q(this.a)},oo.prototype.credential=function(t,e){if(!(e=y(t)?{idToken:t.idToken||null,accessToken:t.accessToken||null,nonce:t.rawNonce||null}:{idToken:t||null,accessToken:e||null}).idToken&&!e.accessToken)throw new I("argument-error","credential failed: must provide the ID token and/or the access token.");return new to(this.providerId,e,this.providerId)},w(so,oo),Fr(so,"PROVIDER_ID","facebook.com"),Fr(so,"FACEBOOK_SIGN_IN_METHOD","facebook.com"),w(uo,oo),Fr(uo,"PROVIDER_ID","github.com"),Fr(uo,"GITHUB_SIGN_IN_METHOD","github.com"),w(ho,oo),Fr(ho,"PROVIDER_ID","google.com"),Fr(ho,"GOOGLE_SIGN_IN_METHOD","google.com"),w(fo,ro),Fr(fo,"PROVIDER_ID","twitter.com"),Fr(fo,"TWITTER_SIGN_IN_METHOD","twitter.com"),vo.prototype.ja=function(t){return this.signInMethod==go.EMAIL_LINK_SIGN_IN_METHOD?Ba(t,va,{email:this.a,oobCode:this.f}):Ba(t,Fa,{email:this.a,password:this.f})},vo.prototype.b=function(t,e){return this.signInMethod==go.EMAIL_LINK_SIGN_IN_METHOD?Ba(t,ya,{idToken:e,email:this.a,oobCode:this.f}):Ba(t,ka,{idToken:e,email:this.a,password:this.f})},vo.prototype.c=function(t,e){return Xi(this.ja(t),e)},vo.prototype.w=function(){return{email:this.a,password:this.f,signInMethod:this.signInMethod}},Ur(go,{PROVIDER_ID:"password"}),Ur(go,{EMAIL_LINK_SIGN_IN_METHOD:"emailLink"}),Ur(go,{EMAIL_PASSWORD_SIGN_IN_METHOD:"password"}),bo.prototype.ja=function(t){return t.eb(Eo(this))},bo.prototype.b=function(t,e){var n=Eo(this);return n.idToken=e,Ba(t,ja,n)},bo.prototype.c=function(t,e){var n=Eo(this);return n.operation="REAUTH",Xi(t=Ba(t,Va,n),e)},bo.prototype.w=function(){var t={providerId:"phone"};return this.a.cb&&(t.verificationId=this.a.cb),this.a.bb&&(t.verificationCode=this.a.bb),this.a.La&&(t.temporaryProof=this.a.La),this.a.ea&&(t.phoneNumber=this.a.ea),t},Io.prototype.eb=function(r,i){var o=this.a.a;return me(i.verify()).then(function(e){if("string"!=typeof e)throw new I("argument-error","An implementation of firebase.auth.ApplicationVerifier.prototype.verify() must return a firebase.Promise that resolves with a string.");if("recaptcha"!==i.type)throw new I("argument-error",'Only firebase.auth.ApplicationVerifiers with type="recaptcha" are currently supported.');var t=y(r)?r.session:null,n=y(r)?r.phoneNumber:r;return(t=t&&t.type==zi?t.Ha().then(function(t){return Ba(o,Pa,{idToken:t,phoneEnrollmentInfo:{phoneNumber:n,recaptchaToken:e}}).then(function(t){return t.phoneSessionInfo.sessionInfo})}):t&&t.type==Qi?t.Ha().then(function(t){return t={mfaPendingCredential:t,mfaEnrollmentId:r.multiFactorHint&&r.multiFactorHint.uid||r.multiFactorUid,phoneSignInInfo:{recaptchaToken:e}},Ba(o,Ra,t).then(function(t){return t.phoneResponseInfo.sessionInfo})}):Ba(o,Na,{phoneNumber:n,recaptchaToken:e})).then(function(t){return"function"==typeof i.reset&&i.reset(),t},function(t){throw"function"==typeof i.reset&&i.reset(),t})})},Ur(Io,{PROVIDER_ID:"phone"}),Ur(Io,{PHONE_SIGN_IN_METHOD:"phone"}),No.prototype.getUid=function(){var t=[];return t.push(this.c),this.b&&t.push(this.b),this.f&&t.push(this.f),this.h&&t.push(this.h),t.join("-")},No.prototype.S=function(){return this.h},No.prototype.w=function(){return{type:this.c,eventId:this.b,urlResponse:this.g,sessionId:this.f,postBody:this.i,tenantId:this.h,error:this.a&&this.a.w()}};var Oo,Po=null;function Ro(t){var e="unauthorized-domain",n=void 0,r=Nn(t);t=r.a,"chrome-extension"==(r=r.f)?n=Ut("This chrome extension ID (chrome-extension://%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",t):"http"==r||"https"==r?n=Ut("This domain (%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",t):e="operation-not-supported-in-this-environment",I.call(this,e,n)}function Do(t,e,n){I.call(this,t,n),(t=e||{}).Ib&&Fr(this,"email",t.Ib),t.ea&&Fr(this,"phoneNumber",t.ea),t.credential&&Fr(this,"credential",t.credential),t.Yb&&Fr(this,"tenantId",t.Yb)}function xo(t){if(t.code){var e=t.code||"";0==e.indexOf(C)&&(e=e.substring(C.length));var n={credential:So(t),Yb:t.tenantId};if(t.email)n.Ib=t.email;else if(t.phoneNumber)n.ea=t.phoneNumber;else if(!n.credential)return new I(e,t.message||void 0);return new Do(e,n,t.message)}return null}function Lo(){}function Mo(t){return t.c||(t.c=t.b())}function Fo(){}function Uo(t){if(t.f||"undefined"!=typeof XMLHttpRequest||"undefined"==typeof ActiveXObject)return t.f;for(var e=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],n=0;n<e.length;n++){var r=e[n];try{return new ActiveXObject(r),t.f=r}catch(t){}}throw Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed")}function jo(){}function Vo(){this.a=new XDomainRequest,this.readyState=0,this.onreadystatechange=null,this.responseType=this.responseText=this.response="",this.status=-1,this.statusText="",this.a.onload=m(this.pc,this),this.a.onerror=m(this.Rb,this),this.a.onprogress=m(this.qc,this),this.a.ontimeout=m(this.uc,this)}function qo(t,e){t.readyState=e,t.onreadystatechange&&t.onreadystatechange()}function Bo(t,e,n){this.reset(t,e,n,void 0,void 0)}function Wo(t){this.f=t,this.b=this.c=this.a=null}function Ko(t,e){this.name=t,this.value=e}w(Ro,I),w(Do,I),Do.prototype.w=function(){var t={code:this.code,message:this.message};this.email&&(t.email=this.email),this.phoneNumber&&(t.phoneNumber=this.phoneNumber),this.tenantId&&(t.tenantId=this.tenantId);var e=this.credential&&this.credential.w();return e&&ft(t,e),t},Do.prototype.toJSON=function(){return this.w()},Lo.prototype.c=null,w(Fo,Lo),Fo.prototype.a=function(){var t=Uo(this);return t?new ActiveXObject(t):new XMLHttpRequest},Fo.prototype.b=function(){var t={};return Uo(this)&&(t[0]=!0,t[1]=!0),t},Oo=new Fo,w(jo,Lo),jo.prototype.a=function(){var t=new XMLHttpRequest;if("withCredentials"in t)return t;if("undefined"!=typeof XDomainRequest)return new Vo;throw Error("Unsupported browser")},jo.prototype.b=function(){return{}},(t=Vo.prototype).open=function(t,e,n){if(null!=n&&!n)throw Error("Only async requests are supported.");this.a.open(t,e)},t.send=function(t){if(t){if("string"!=typeof t)throw Error("Only string data is supported");this.a.send(t)}else this.a.send()},t.abort=function(){this.a.abort()},t.setRequestHeader=function(){},t.getResponseHeader=function(t){return"content-type"==t.toLowerCase()?this.a.contentType:""},t.pc=function(){this.status=200,this.response=this.responseText=this.a.responseText,qo(this,4)},t.Rb=function(){this.status=500,this.response=this.responseText="",qo(this,4)},t.uc=function(){this.Rb()},t.qc=function(){this.status=200,qo(this,1)},t.getAllResponseHeaders=function(){return"content-type: "+this.a.contentType},Bo.prototype.a=null,Bo.prototype.reset=function(t,e,n,r,i){delete this.a},Ko.prototype.toString=function(){return this.name};var Ho=new Ko("SEVERE",1e3),Go=new Ko("WARNING",900),zo=new Ko("CONFIG",700),Qo=new Ko("FINE",500);Wo.prototype.log=function(t,e,n){if(t.value>=function t(e){return e.c||(e.a?t(e.a):(D("Root logger has no level set."),null))}(this).value)for(v(e)&&(e=e()),t=new Bo(t,String(e),this.f),n&&(t.a=n),n=this;n;)n=n.a};var Yo,Xo={},Jo=null;function $o(t){var e,n,r;return Jo||(Jo=new Wo(""),(Xo[""]=Jo).c=zo),(e=Xo[t])||(e=new Wo(t),r=t.lastIndexOf("."),n=t.substr(r+1),(r=$o(t.substr(0,r))).b||(r.b={}),(r.b[n]=e).a=r,Xo[t]=e),e}function Zo(t,e){t&&t.log(Qo,e,void 0)}function ts(t){this.f=t}function es(t){cn.call(this),this.u=t,this.h=void 0,this.readyState=ns,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.l=new Headers,this.b=null,this.o="GET",this.f="",this.a=!1,this.i=$o("goog.net.FetchXmlHttp"),this.m=this.c=this.g=null}w(ts,Lo),ts.prototype.a=function(){return new es(this.f)},ts.prototype.b=(Yo={},function(){return Yo}),w(es,cn);var ns=0;function rs(t){t.c.read().then(t.oc.bind(t)).catch(t.Ta.bind(t))}function is(t){t.readyState=4,t.g=null,t.c=null,t.m=null,os(t)}function os(t){t.onreadystatechange&&t.onreadystatechange.call(t)}function ss(t){cn.call(this),this.headers=new gn,this.O=t||null,this.c=!1,this.A=this.a=null,this.h=this.P=this.l="",this.f=this.N=this.i=this.G=!1,this.g=0,this.o=null,this.m=as,this.u=this.R=!1}(t=es.prototype).open=function(t,e){if(this.readyState!=ns)throw this.abort(),Error("Error reopening a connection");this.o=t,this.f=e,this.readyState=1,os(this)},t.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.a=!0;var e={headers:this.l,method:this.o,credentials:this.h,cache:void 0};t&&(e.body=t),this.u.fetch(new Request(this.f,e)).then(this.tc.bind(this),this.Ta.bind(this))},t.abort=function(){this.response=this.responseText="",this.l=new Headers,this.status=0,this.c&&this.c.cancel("Request was aborted."),1<=this.readyState&&this.a&&4!=this.readyState&&(this.a=!1,is(this)),this.readyState=ns},t.tc=function(t){this.a&&(this.g=t,this.b||(this.status=this.g.status,this.statusText=this.g.statusText,this.b=t.headers,this.readyState=2,os(this)),this.a&&(this.readyState=3,os(this),this.a&&("arraybuffer"===this.responseType?t.arrayBuffer().then(this.rc.bind(this),this.Ta.bind(this)):void 0!==l.ReadableStream&&"body"in t?(this.response=this.responseText="",this.c=t.body.getReader(),this.m=new TextDecoder,rs(this)):t.text().then(this.sc.bind(this),this.Ta.bind(this)))))},t.oc=function(t){var e;this.a&&((e=this.m.decode(t.value||new Uint8Array(0),{stream:!t.done}))&&(this.response=this.responseText+=e),(t.done?is:os)(this),3==this.readyState&&rs(this))},t.sc=function(t){this.a&&(this.response=this.responseText=t,is(this))},t.rc=function(t){this.a&&(this.response=t,is(this))},t.Ta=function(t){var e=this.i;e&&e.log(Go,"Failed to fetch url "+this.f,t instanceof Error?t:Error(t)),this.a&&is(this)},t.setRequestHeader=function(t,e){this.l.append(t,e)},t.getResponseHeader=function(t){return this.b?this.b.get(t.toLowerCase())||"":((t=this.i)&&t.log(Go,"Attempting to get response header but no headers have been received for url: "+this.f,void 0),"")},t.getAllResponseHeaders=function(){if(!this.b){var t=this.i;return t&&t.log(Go,"Attempting to get all response headers but no headers have been received for url: "+this.f,void 0),""}t=[];for(var e=this.b.entries(),n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join("\r\n")},Object.defineProperty(es.prototype,"withCredentials",{get:function(){return"include"===this.h},set:function(t){this.h=t?"include":"same-origin"}}),w(ss,cn);var as="";ss.prototype.b=$o("goog.net.XhrIo");var us=/^https?$/i,cs=["POST","PUT"];function hs(t){return"content-type"==t.toLowerCase()}function ls(t,e){t.c=!1,t.a&&(t.f=!0,t.a.abort(),t.f=!1),t.h=e,fs(t),ds(t)}function fs(t){t.G||(t.G=!0,t.dispatchEvent("complete"),t.dispatchEvent("error"))}function ps(t){if(t.c&&void 0!==h)if(t.A[1]&&4==ys(t)&&2==gs(t))Zo(t.b,ms(t,"Local request error detected and ignored"));else if(t.i&&4==ys(t))pn(t.Ub,0,t);else if(t.dispatchEvent("readystatechange"),4==ys(t)){Zo(t.b,ms(t,"Request complete")),t.c=!1;try{var e,n,r,i,o=gs(t);t:switch(o){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var s=!0;break t;default:s=!1}if((e=s)||((n=0===o)&&(!(i=String(t.l).match(bn)[1]||null)&&l.self&&l.self.location&&(i=(r=l.self.location.protocol).substr(0,r.length-1)),n=!us.test(i?i.toLowerCase():"")),e=n),e)t.dispatchEvent("complete"),t.dispatchEvent("success");else{try{var a=2<ys(t)?t.a.statusText:""}catch(e){Zo(t.b,"Can not get status: "+e.message),a=""}t.h=a+" ["+gs(t)+"]",fs(t)}}finally{ds(t)}}}function ds(t,e){if(t.a){vs(t);var n=t.a,r=t.A[0]?s:null;t.a=null,t.A=null,e||t.dispatchEvent("ready");try{n.onreadystatechange=r}catch(e){(t=t.b)&&t.log(Ho,"Problem encountered resetting onreadystatechange: "+e.message,void 0)}}}function vs(t){t.a&&t.u&&(t.a.ontimeout=null),t.o&&(l.clearTimeout(t.o),t.o=null)}function ys(t){return t.a?t.a.readyState:0}function gs(t){try{return 2<ys(t)?t.a.status:-1}catch(t){return-1}}function ms(t,e){return e+" ["+t.P+" "+t.l+" "+gs(t)+"]"}function _s(t){var e=Os;this.g=[],this.u=e,this.o=t||null,this.f=this.a=!1,this.c=void 0,this.m=this.A=this.i=!1,this.h=0,this.b=null,this.l=0}function bs(t,e,n){t.a=!0,t.c=n,t.f=!e,Ts(t)}function ws(t){if(t.a){if(!t.m)throw new Ss;t.m=!1}}function Es(t,e,n,r){t.g.push([e,n,r]),t.a&&Ts(t)}function Is(t){return W(t.g,function(t){return v(t[1])})}function Ts(t){var e,n;t.h&&t.a&&Is(t)&&(e=t.h,(n=As[e])&&(l.clearTimeout(n.a),delete As[e]),t.h=0),t.b&&(t.b.l--,delete t.b),e=t.c;for(var r=n=!1;t.g.length&&!t.i;){var i=(s=t.g.shift())[0],o=s[1],s=s[2];if(i=t.f?o:i)try{var a=i.call(s||t.o,e);void 0!==a&&(t.f=t.f&&(a==e||a instanceof Error),t.c=e=a),(O(e)||"function"==typeof l.Promise&&e instanceof l.Promise)&&(r=!0,t.i=!0)}catch(r){e=r,t.f=!0,Is(t)||(n=!0)}}t.c=e,r&&(a=m(t.v,t,!0),r=m(t.v,t,!1),e instanceof _s?(Es(e,a,r),e.A=!0):e.then(a,r)),n&&(e=new Ns(e),As[e.a]=e,t.h=e.a)}function Ss(){P.call(this)}function Cs(){P.call(this)}function Ns(t){this.a=l.setTimeout(m(this.c,this),0),this.b=t}(t=ss.prototype).Ma=function(){void 0!==h&&this.a&&(this.h="Timed out after "+this.g+"ms, aborting",Zo(this.b,ms(this,this.h)),this.dispatchEvent("timeout"),this.abort(8))},t.abort=function(){this.a&&this.c&&(Zo(this.b,ms(this,"Aborting")),this.c=!1,this.f=!0,this.a.abort(),this.f=!1,this.dispatchEvent("complete"),this.dispatchEvent("abort"),ds(this))},t.Da=function(){this.a&&(this.c&&(this.c=!1,this.f=!0,this.a.abort(),this.f=!1),ds(this,!0)),ss.$a.Da.call(this)},t.Ub=function(){this.xa||(this.N||this.i||this.f?ps(this):this.Ic())},t.Ic=function(){ps(this)},t.getResponse=function(){try{if(!this.a)return null;if("response"in this.a)return this.a.response;switch(this.m){case as:case"text":return this.a.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in this.a)return this.a.mozResponseArrayBuffer}var t=this.b;return t&&t.log(Ho,"Response type "+this.m+" is not supported on this browser",void 0),null}catch(t){return Zo(this.b,"Can not get response: "+t.message),null}},_s.prototype.cancel=function(t){var e;this.a?this.c instanceof _s&&this.c.cancel():(this.b&&(e=this.b,delete this.b,t?e.cancel(t):(e.l--,e.l<=0&&e.cancel())),this.u?this.u.call(this.o,this):this.m=!0,this.a||(t=new Cs,ws(this),bs(this,!1,t)))},_s.prototype.v=function(t,e){this.i=!1,bs(this,t,e)},_s.prototype.then=function(t,e,n){var r,i,o=new le(function(t,e){r=t,i=e});return Es(this,r,function(t){t instanceof Cs?o.cancel():i(t)}),o.then(t,e,n)},_s.prototype.$goog_Thenable=!0,w(Ss,P),Ss.prototype.message="Deferred has already fired",Ss.prototype.name="AlreadyCalledError",w(Cs,P),Cs.prototype.message="Deferred was canceled",Cs.prototype.name="CanceledError",Ns.prototype.c=function(){throw delete As[this.a],this.b};var As={};function ks(t){var e=document,n=wt(t).toString(),r=oe(document,"SCRIPT"),i={Vb:r,Ma:void 0},o=new _s(i),s=window.setTimeout(function(){Ps(r,!0);var t=new xs(Ds,"Timeout reached for loading script "+n);ws(o),bs(o,!1,t)},5e3);return i.Ma=s,r.onload=r.onreadystatechange=function(){r.readyState&&"loaded"!=r.readyState&&"complete"!=r.readyState||(Ps(r,!1,s),ws(o),bs(o,!0,null))},r.onerror=function(){Ps(r,!0,s);var t=new xs(Rs,"Error while loading script "+n);ws(o),bs(o,!1,t)},ft(i={},{type:"text/javascript",charset:"UTF-8"}),ee(r,i),i=t,pt(t=r,"HTMLScriptElement"),t.src=wt(i),(i=(i=t.ownerDocument&&t.ownerDocument.defaultView)&&i!=l?f(i.document):(null===a&&(a=f(l.document)),a))&&t.setAttribute("nonce",i),((e=((i=e)||document).getElementsByTagName("HEAD"))&&0!=e.length?e[0]:i.documentElement).appendChild(r),o}function Os(){var t;this&&this.Vb&&(t=this.Vb)&&"SCRIPT"==t.tagName&&Ps(t,!0,this.Ma)}function Ps(t,e,n){null!=n&&l.clearTimeout(n),t.onload=s,t.onerror=s,t.onreadystatechange=s,e&&window.setTimeout(function(){t&&t.parentNode&&t.parentNode.removeChild(t)},0)}var Rs=0,Ds=1;function xs(t,e){var n="Jsloader error (code #"+t+")";e&&(n+=": "+e),P.call(this,n),this.code=t}function Ls(t){this.f=t}function Ms(t,e,n){if(this.c=t,t=e||{},this.l=t.secureTokenEndpoint||"https://securetoken.googleapis.com/v1/token",this.v=t.secureTokenTimeout||js,this.g=ht(t.secureTokenHeaders||Vs),this.h=t.firebaseEndpoint||"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",this.i=t.identityPlatformEndpoint||"https://identitytoolkit.googleapis.com/v2/",this.m=t.firebaseTimeout||qs,this.a=ht(t.firebaseHeaders||Bs),n&&(this.a["X-Client-Version"]=n,this.g["X-Client-Version"]=n),n="Node"==ur(),!(n=l.XMLHttpRequest||n&&Vl.INTERNAL.node&&Vl.INTERNAL.node.XMLHttpRequest)&&!ar())throw new I("internal-error","The XMLHttpRequest compatibility library was not found.");this.f=void 0,ar()?this.f=new ts(self):cr()?this.f=new Ls(n):this.f=new jo,this.b=null}w(xs,P),w(Ls,Lo),Ls.prototype.a=function(){return new this.f},Ls.prototype.b=function(){return{}};var Fs,Us="idToken",js=new Ar(3e4,6e4),Vs={"Content-Type":"application/x-www-form-urlencoded"},qs=new Ar(3e4,6e4),Bs={"Content-Type":"application/json"};function Ws(t,e){e?t.a["X-Firebase-Locale"]=e:delete t.a["X-Firebase-Locale"]}function Ks(t,e){e&&(t.l=Hs("https://securetoken.googleapis.com/v1/token",e),t.h=Hs("https://www.googleapis.com/identitytoolkit/v3/relyingparty/",e),t.i=Hs("https://identitytoolkit.googleapis.com/v2/",e))}function Hs(t,e){return t=Nn(t),e=Nn(e.url),t.c=t.a+t.c,En(t,e.f),t.a=e.a,In(t,e.g),t.toString()}function Gs(t,e){e?(t.a["X-Client-Version"]=e,t.g["X-Client-Version"]=e):(delete t.a["X-Client-Version"],delete t.g["X-Client-Version"])}function zs(t,e,n,r,i,o,s){var a;(t=((a=fr(a=vr())==lr&&(a=a.match(/\sChrome\/(\d+)/i))&&2==a.length?parseInt(a[1],10):null)&&a<30||Wt&&$t&&!(9<$t))&&!ar()?(Fs=Fs||new le(function(t,e){var n,r;n=t,r=e,((window.gapi||{}).client||{}).request?n():(l[Ys]=function(){((window.gapi||{}).client||{}).request?n():r(Error("CORS_UNSUPPORTED"))},Es(ks(Et(Qs,{onload:Ys})),null,function(){r(Error("CORS_UNSUPPORTED"))},void 0))}),m(t.o,t)):m(t.u,t))(e,n,r,i,o,s)}Ms.prototype.S=function(){return this.b},Ms.prototype.u=function(t,n,e,r,i,o){if(ar()&&(void 0===l.fetch||void 0===l.Headers||void 0===l.Request))throw new I("operation-not-supported-in-this-environment","fetch, Headers and Request native APIs or equivalent Polyfills must be available to support HTTP requests from a Worker environment.");var s,a=new ss(this.f);o&&(a.g=Math.max(0,o),s=setTimeout(function(){a.dispatchEvent("timeout")},o)),hn(a,"complete",function(){s&&clearTimeout(s);var e=null;try{e=JSON.parse(function(e){try{return e.a?e.a.responseText:""}catch(t){return Zo(e.b,"Can not get responseText: "+t.message),""}}(this))||null}catch(t){e=null}n&&n(e)}),ln(a,"ready",function(){s&&clearTimeout(s),xe(this)}),ln(a,"timeout",function(){s&&clearTimeout(s),xe(this),n&&n(null)}),function(t,e,n,r,i){if(t.a)throw Error("[goog.net.XhrIo] Object is active with another request="+t.l+"; newUri="+e);n=n?n.toUpperCase():"GET",t.l=e,t.h="",t.P=n,t.G=!1,t.c=!0,t.a=(t.O||Oo).a(),t.A=t.O?Mo(t.O):Mo(Oo),t.a.onreadystatechange=m(t.Ub,t);try{Zo(t.b,ms(t,"Opening Xhr")),t.N=!0,t.a.open(n,String(e),!0),t.N=!1}catch(e){return Zo(t.b,ms(t,"Error opening Xhr: "+e.message)),ls(t,e)}e=r||"";var o,s=new gn(t.headers);i&&function(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(d(t)||"string"==typeof t)V(t,e,void 0);else for(var n=yn(t),r=vn(t),i=r.length,o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}(i,function(t,e){s.set(e,t)}),i=function(t){t:{for(var e=hs,n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return e<0?null:"string"==typeof t?t.charAt(e):t[e]}(s.Y()),r=l.FormData&&e instanceof l.FormData,!K(cs,n)||i||r||s.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),s.forEach(function(t,e){this.a.setRequestHeader(e,t)},t),t.m&&(t.a.responseType=t.m),"withCredentials"in t.a&&t.a.withCredentials!==t.R&&(t.a.withCredentials=t.R);try{vs(t),0<t.g&&(t.u=(o=t.a,Wt&&Jt(9)&&"number"==typeof o.timeout&&void 0!==o.ontimeout),Zo(t.b,ms(t,"Will abort after "+t.g+"ms if incomplete, xhr2 "+t.u)),t.u?(t.a.timeout=t.g,t.a.ontimeout=m(t.Ma,t)):t.o=pn(t.Ma,t.g,t)),Zo(t.b,ms(t,"Sending request")),t.i=!0,t.a.send(e),t.i=!1}catch(e){Zo(t.b,ms(t,"Send error: "+e.message)),ls(t,e)}}(a,t,e,r,i)};var Qs=new dt(mt,"https://apis.google.com/js/client.js?onload=%{onload}"),Ys="__fcb"+Math.floor(1e6*Math.random()).toString();function Xs(t){if("string"!=typeof(t=t.email)||!rr.test(t))throw new I("invalid-email")}function Js(t){"email"in t&&Xs(t)}function $s(t){if(!t[Us]){if(t.mfaPendingCredential)throw new I("multi-factor-auth-required",null,ht(t));throw new I("internal-error")}}function Zs(t){if(t.phoneNumber||t.temporaryProof){if(!t.phoneNumber||!t.temporaryProof)throw new I("internal-error")}else{if(!t.sessionInfo)throw new I("missing-verification-id");if(!t.code)throw new I("missing-verification-code")}}Ms.prototype.o=function(t,n,r,i,o){var s=this;Fs.then(function(){window.gapi.client.setApiKey(s.c);var e=window.gapi.auth.getToken();window.gapi.auth.setToken(null),window.gapi.client.request({path:t,method:r,body:i,headers:o,authType:"none",callback:function(t){window.gapi.auth.setToken(e),n&&n(t)}})}).s(function(t){n&&n({error:{message:t&&t.message||"CORS_UNSUPPORTED"}})})},Ms.prototype.yb=function(){return Ba(this,Oa,{})},Ms.prototype.Ab=function(t,e){return Ba(this,Aa,{idToken:t,email:e})},Ms.prototype.Bb=function(t,e){return Ba(this,ka,{idToken:t,password:e})};var ta={displayName:"DISPLAY_NAME",photoUrl:"PHOTO_URL"};function ea(t){if(!t.phoneVerificationInfo)throw new I("internal-error");if(!t.phoneVerificationInfo.sessionInfo)throw new I("missing-verification-id");if(!t.phoneVerificationInfo.code)throw new I("missing-verification-code")}function na(t){if(!t.requestUri||!t.sessionId&&!t.postBody&&!t.pendingToken)throw new I("internal-error")}function ra(t,e){return e.oauthIdToken&&e.providerId&&0==e.providerId.indexOf("oidc.")&&!e.pendingToken&&(t.sessionId?e.nonce=t.sessionId:t.postBody&&qn(t=new Fn(t.postBody),"nonce")&&(e.nonce=t.get("nonce"))),e}function ia(t){var e=null;if(t.needConfirmation?(t.code="account-exists-with-different-credential",e=xo(t)):"FEDERATED_USER_ID_ALREADY_LINKED"==t.errorMessage?(t.code="credential-already-in-use",e=xo(t)):"EMAIL_EXISTS"==t.errorMessage?(t.code="email-already-in-use",e=xo(t)):t.errorMessage&&(e=Wa(t.errorMessage)),e)throw e;$s(t)}function oa(t,e){return e.returnIdpCredential=!0,Ba(t,Da,e)}function sa(t,e){return e.returnIdpCredential=!0,Ba(t,La,e)}function aa(t,e){return e.returnIdpCredential=!0,e.autoCreate=!1,Ba(t,xa,e)}function ua(t){if(!t.oobCode)throw new I("invalid-action-code")}(t=Ms.prototype).Cb=function(t,r){var i={idToken:t},o=[];return ut(ta,function(t,e){var n=r[e];null===n?o.push(t):e in r&&(i[e]=n)}),o.length&&(i.deleteAttribute=o),Ba(this,Aa,i)},t.ub=function(t,e){return ft(t={requestType:"PASSWORD_RESET",email:t},e),Ba(this,Ia,t)},t.vb=function(t,e){return ft(t={requestType:"EMAIL_SIGNIN",email:t},e),Ba(this,ba,t)},t.tb=function(t,e){return ft(t={requestType:"VERIFY_EMAIL",idToken:t},e),Ba(this,wa,t)},t.Db=function(t,e,n){return ft(t={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:t,newEmail:e},n),Ba(this,Ea,t)},t.eb=function(t){return Ba(this,Ua,t)},t.mb=function(t,e){return Ba(this,Ca,{oobCode:t,newPassword:e})},t.Qa=function(t){return Ba(this,ha,{oobCode:t})},t.ib=function(t){return Ba(this,ca,{oobCode:t})};var ca={endpoint:"setAccountInfo",B:ua,Z:"email",C:!0},ha={endpoint:"resetPassword",B:ua,F:function(t){var e=t.requestType;if(!e||!t.email&&"EMAIL_SIGNIN"!=e&&"VERIFY_AND_CHANGE_EMAIL"!=e)throw new I("internal-error")},C:!0},la={endpoint:"signupNewUser",B:function(t){if(Xs(t),!t.password)throw new I("weak-password")},F:$s,U:!0,C:!0},fa={endpoint:"createAuthUri",C:!0},pa={endpoint:"deleteAccount",M:["idToken"]},da={endpoint:"setAccountInfo",M:["idToken","deleteProvider"],B:function(t){if(!Array.isArray(t.deleteProvider))throw new I("internal-error")}},va={endpoint:"emailLinkSignin",M:["email","oobCode"],B:Xs,F:$s,U:!0,C:!0},ya={endpoint:"emailLinkSignin",M:["idToken","email","oobCode"],B:Xs,F:$s,U:!0},ga={endpoint:"accounts/mfaEnrollment:finalize",M:["idToken","phoneVerificationInfo"],B:ea,F:$s,C:!0,Na:!0},ma={endpoint:"accounts/mfaSignIn:finalize",M:["mfaPendingCredential","phoneVerificationInfo"],B:ea,F:$s,C:!0,Na:!0},_a={endpoint:"getAccountInfo"},ba={endpoint:"getOobConfirmationCode",M:["requestType"],B:function(t){if("EMAIL_SIGNIN"!=t.requestType)throw new I("internal-error");Xs(t)},Z:"email",C:!0},wa={endpoint:"getOobConfirmationCode",M:["idToken","requestType"],B:function(t){if("VERIFY_EMAIL"!=t.requestType)throw new I("internal-error")},Z:"email",C:!0},Ea={endpoint:"getOobConfirmationCode",M:["idToken","newEmail","requestType"],B:function(t){if("VERIFY_AND_CHANGE_EMAIL"!=t.requestType)throw new I("internal-error")},Z:"email",C:!0},Ia={endpoint:"getOobConfirmationCode",M:["requestType"],B:function(t){if("PASSWORD_RESET"!=t.requestType)throw new I("internal-error");Xs(t)},Z:"email",C:!0},Ta={kb:!0,endpoint:"getProjectConfig",Tb:"GET"},Sa={kb:!0,endpoint:"getRecaptchaParam",Tb:"GET",F:function(t){if(!t.recaptchaSiteKey)throw new I("internal-error")}},Ca={endpoint:"resetPassword",B:ua,Z:"email",C:!0},Na={endpoint:"sendVerificationCode",M:["phoneNumber","recaptchaToken"],Z:"sessionInfo",C:!0},Aa={endpoint:"setAccountInfo",M:["idToken"],B:Js,U:!0},ka={endpoint:"setAccountInfo",M:["idToken"],B:function(t){if(Js(t),!t.password)throw new I("weak-password")},F:$s,U:!0},Oa={endpoint:"signupNewUser",F:$s,U:!0,C:!0},Pa={endpoint:"accounts/mfaEnrollment:start",M:["idToken","phoneEnrollmentInfo"],B:function(t){if(!t.phoneEnrollmentInfo)throw new I("internal-error");if(!t.phoneEnrollmentInfo.phoneNumber)throw new I("missing-phone-number");if(!t.phoneEnrollmentInfo.recaptchaToken)throw new I("missing-app-credential")},F:function(t){if(!t.phoneSessionInfo||!t.phoneSessionInfo.sessionInfo)throw new I("internal-error")},C:!0,Na:!0},Ra={endpoint:"accounts/mfaSignIn:start",M:["mfaPendingCredential","mfaEnrollmentId","phoneSignInInfo"],B:function(t){if(!t.phoneSignInInfo||!t.phoneSignInInfo.recaptchaToken)throw new I("missing-app-credential")},F:function(t){if(!t.phoneResponseInfo||!t.phoneResponseInfo.sessionInfo)throw new I("internal-error")},C:!0,Na:!0},Da={endpoint:"verifyAssertion",B:na,Xa:ra,F:ia,U:!0,C:!0},xa={endpoint:"verifyAssertion",B:na,Xa:ra,F:function(t){if(t.errorMessage&&"USER_NOT_FOUND"==t.errorMessage)throw new I("user-not-found");if(t.errorMessage)throw Wa(t.errorMessage);$s(t)},U:!0,C:!0},La={endpoint:"verifyAssertion",B:function(t){if(na(t),!t.idToken)throw new I("internal-error")},Xa:ra,F:ia,U:!0},Ma={endpoint:"verifyCustomToken",B:function(t){if(!t.token)throw new I("invalid-custom-token")},F:$s,U:!0,C:!0},Fa={endpoint:"verifyPassword",B:function(t){if(Xs(t),!t.password)throw new I("wrong-password")},F:$s,U:!0,C:!0},Ua={endpoint:"verifyPhoneNumber",B:Zs,F:$s,C:!0},ja={endpoint:"verifyPhoneNumber",B:function(t){if(!t.idToken)throw new I("internal-error");Zs(t)},F:function(t){if(t.temporaryProof)throw t.code="credential-already-in-use",xo(t);$s(t)}},Va={Gb:{USER_NOT_FOUND:"user-not-found"},endpoint:"verifyPhoneNumber",B:Zs,F:$s,C:!0},qa={endpoint:"accounts/mfaEnrollment:withdraw",M:["idToken","mfaEnrollmentId"],F:function(t){if(!!t[Us]^!!t.refreshToken)throw new I("internal-error")},C:!0,Na:!0};function Ba(t,e,n){if(!function(t,e){if(!e||!e.length)return 1;if(t){for(var n=0;n<e.length;n++){var r=t[e[n]];if(null==r||""===r)return}return 1}}(n,e.M))return _e(new I("internal-error"));var r,i=!!e.Na,o=e.Tb||"POST";return me(n).then(e.B).then(function(){return e.U&&(n.returnSecureToken=!0),e.C&&t.b&&void 0===n.tenantId&&(n.tenantId=t.b),function(t,e,n,r,i,o,s){var a=Nn(e+n);Sn(a,"key",t.c),s&&Sn(a,"cb",b().toString());var u="GET"==r;if(u)for(var c in i)i.hasOwnProperty(c)&&Sn(a,c,i[c]);return new le(function(e,n){zs(t,a.toString(),function(t){t?t.error?n(Ka(t,o||{})):e(t):n(new I("network-request-failed"))},r,u?void 0:Hn(Ir(i)),t.a,t.m.get())})}(t,i?t.i:t.h,e.endpoint,o,n,e.Gb,e.kb||!1)}).then(function(t){return r=t,e.Xa?e.Xa(n,r):r}).then(e.F).then(function(){if(!e.Z)return r;if(!(e.Z in r))throw new I("internal-error");return r[e.Z]})}function Wa(t){return Ka({error:{errors:[{message:t}],code:400,message:t}})}function Ka(t,e){var n,r=(t.error&&t.error.errors&&t.error.errors[0]||{}).reason||"",i={keyInvalid:"invalid-api-key",ipRefererBlocked:"app-not-authorized"};if(r=i[r]?new I(i[r]):null)return r;for(n in r=t.error&&t.error.message||"",ft(i={INVALID_CUSTOM_TOKEN:"invalid-custom-token",CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_EMAIL:"invalid-email",INVALID_PASSWORD:"wrong-password",USER_DISABLED:"user-disabled",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_OR_INVALID_NONCE:"missing-or-invalid-nonce",INVALID_MESSAGE_PAYLOAD:"invalid-message-payload",INVALID_RECIPIENT_EMAIL:"invalid-recipient-email",INVALID_SENDER:"invalid-sender",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",INVALID_PROVIDER_ID:"invalid-provider-id",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",CORS_UNSUPPORTED:"cors-unsupported",DYNAMIC_LINK_NOT_ACTIVATED:"dynamic-link-not-activated",INVALID_APP_ID:"invalid-app-id",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",WEAK_PASSWORD:"weak-password",OPERATION_NOT_ALLOWED:"operation-not-allowed",USER_CANCELLED:"user-cancelled",CAPTCHA_CHECK_FAILED:"captcha-check-failed",INVALID_APP_CREDENTIAL:"invalid-app-credential",INVALID_CODE:"invalid-verification-code",INVALID_PHONE_NUMBER:"invalid-phone-number",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_APP_CREDENTIAL:"missing-app-credential",MISSING_CODE:"missing-verification-code",MISSING_PHONE_NUMBER:"missing-phone-number",MISSING_SESSION_INFO:"missing-verification-id",QUOTA_EXCEEDED:"quota-exceeded",SESSION_EXPIRED:"code-expired",REJECTED_CREDENTIAL:"rejected-credential",INVALID_CONTINUE_URI:"invalid-continue-uri",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",MISSING_IOS_BUNDLE_ID:"missing-ios-bundle-id",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_DYNAMIC_LINK_DOMAIN:"invalid-dynamic-link-domain",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",INVALID_CERT_HASH:"invalid-cert-hash",UNSUPPORTED_TENANT_OPERATION:"unsupported-tenant-operation",INVALID_TENANT_ID:"invalid-tenant-id",TENANT_ID_MISMATCH:"tenant-id-mismatch",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",EMAIL_CHANGE_NEEDS_VERIFICATION:"email-change-needs-verification",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",UNSUPPORTED_FIRST_FACTOR:"unsupported-first-factor",UNVERIFIED_EMAIL:"unverified-email"},e||{}),e=(e=r.match(/^[^\s]+\s*:\s*([\s\S]*)$/))&&1<e.length?e[1]:void 0,i)if(0===r.indexOf(n))return new I(i[n],e);return!e&&t&&(e=Er(t)),new I("internal-error",e)}function Ha(t){var o;this.b=t,this.a=null,this.qb=(o=this,(Ya=Ya||new le(function(t,e){function n(){Nr(),yr("gapi.load")("gapi.iframes",{callback:t,ontimeout:function(){Nr(),e(Error("Network Error"))},timeout:za.get()})}var r;yr("gapi.iframes.Iframe")?t():yr("gapi.load")?n():(r="__iframefcb"+Math.floor(1e6*Math.random()).toString(),l[r]=function(){yr("gapi.load")?n():e(Error("Network Error"))},me(ks(Et(Ga,{onload:r}))).s(function(){e(Error("Network Error"))}))}).s(function(t){throw Ya=null,t})).then(function(){return new le(function(r,i){yr("gapi.iframes.getContext")().open({where:document.body,url:o.b,messageHandlersFilter:yr("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"),attributes:{style:{position:"absolute",top:"-100px",width:"1px",height:"1px"}},dontclear:!0},function(t){function e(){clearTimeout(n),r()}o.a=t,o.a.restyle({setHideOnLeave:!1});var n=setTimeout(function(){i(Error("Network Error"))},Qa.get());t.ping(e).then(e,function(){i(Error("Network Error"))})})})}))}var Ga=new dt(mt,"https://apis.google.com/js/api.js?onload=%{onload}"),za=new Ar(3e4,6e4),Qa=new Ar(5e3,15e3),Ya=null;function Xa(t,e,n,r){this.l=t,this.h=e,this.i=n,this.g=r,this.f=null,t=this.g?An((t=Nn(this.g.url)).f,t.a,t.g,"/emulator/auth/iframe"):An("https",this.l,null,"/__/auth/iframe"),this.a=t,Sn(this.a,"apiKey",this.h),Sn(this.a,"appName",this.i),this.b=null,this.c=[]}function Ja(t,e,n,r,i,o){this.u=t,this.o=e,this.c=n,this.v=r,this.m=o,this.i=this.g=this.l=null,this.a=i,this.h=this.f=null}function $a(t){try{return Vl.app(t).auth().Ga()}catch(t){return[]}}function Za(t,e,n,r,i,o){this.o=t,this.g=e,this.b=n,this.f=o,this.c=r||null,this.i=i||null,this.l=this.u=this.A=null,this.h=[],this.v=this.a=null}function tu(t){var a=Jn();return Ba(t,Ta,{}).then(function(t){return t.authorizedDomains||[]}).then(function(t){t:{for(var e=(n=Nn(a)).f,n=n.a,r=0;r<t.length;r++){var i=t[r],o=n,s=e;if(o=0==i.indexOf("chrome-extension://")?Nn(i).a==o&&"chrome-extension"==s:("http"==s||"https"==s)&&(nr.test(i)?o==i:(i=i.split(".").join("\\."),new RegExp("^(.+\\."+i+"|"+i+")$","i").test(o)))){t=!0;break t}}t=!1}if(!t)throw new Ro(Jn())})}function eu(i){return i.v||(i.v=ir().then(function(){var t,e,n,r;i.u||(t=i.c,e=i.i,n=$a(i.b),(r=new Xa(i.o,i.g,i.b,i.f)).f=t,r.b=e,r.c=Q(n||[]),i.u=r.toString()),i.m=new Ha(i.u),function(r){if(!r.m)throw Error("IfcHandler must be initialized!");var t,e;t=r.m,e=function(t){var e={};if(t&&t.authEvent){var n=!1;for(t=Ao(t.authEvent),e=0;e<r.h.length;e++)n=r.h[e](t)||n;return(e={}).status=n?"ACK":"ERROR",me(e)}return e.status="ERROR",me(e)},t.qb.then(function(){t.a.register("authEvent",e,yr("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))})}(i)})),i.v}function nu(t){return t.l||(t.A=t.c?dr(t.c,$a(t.b)):null,t.l=new Ms(t.g,k(t.i),t.A),t.f&&Ks(t.l,t.f)),t.l}function ru(t,e,n,r,i,o,s,a,u,c,h,l){return(t=new Ja(t,e,n,r,i,l)).l=o,t.g=s,t.i=a,t.b=ht(u||null),t.f=c,t.xb(h).toString()}function iu(t){if(this.a=t||Vl.INTERNAL.reactNative&&Vl.INTERNAL.reactNative.AsyncStorage,!this.a)throw new I("internal-error","The React Native compatibility library was not found.");this.type="asyncStorage"}function ou(t){this.b=t,this.a={},this.f=m(this.c,this)}Xa.prototype.toString=function(){return this.f?Sn(this.a,"v",this.f):Vn(this.a.b,"v"),this.b?Sn(this.a,"eid",this.b):Vn(this.a.b,"eid"),this.c.length?Sn(this.a,"fw",this.c.join(",")):Vn(this.a.b,"fw"),this.a.toString()},Ja.prototype.xb=function(t){return this.h=t,this},Ja.prototype.toString=function(){var t;if(Sn(t=this.m?An((t=Nn(this.m.url)).f,t.a,t.g,"/emulator/auth/handler"):An("https",this.u,null,"/__/auth/handler"),"apiKey",this.o),Sn(t,"appName",this.c),Sn(t,"authType",this.v),this.a.isOAuthProvider){var e,n=this.a;try{var r=Vl.app(this.c).auth().ka()}catch(t){r=null}for(e in n.nb=r,Sn(t,"providerId",this.a.providerId),n=Ir((r=this.a).Hb))n[e]=n[e].toString();e=r.Pc,n=ht(n);for(var i=0;i<e.length;i++){var o=e[i];o in n&&delete n[o]}r.ob&&r.nb&&!n[r.ob]&&(n[r.ob]=r.nb),ct(n)||Sn(t,"customParameters",Er(n))}if("function"==typeof this.a.Pb&&(r=this.a.Pb()).length&&Sn(t,"scopes",r.join(",")),this.l?Sn(t,"redirectUrl",this.l):Vn(t.b,"redirectUrl"),this.g?Sn(t,"eventId",this.g):Vn(t.b,"eventId"),this.i?Sn(t,"v",this.i):Vn(t.b,"v"),this.b)for(var s in this.b)this.b.hasOwnProperty(s)&&!Cn(t,s)&&Sn(t,s,this.b[s]);return this.h?Sn(t,"tid",this.h):Vn(t.b,"tid"),this.f?Sn(t,"eid",this.f):Vn(t.b,"eid"),(s=$a(this.c)).length&&Sn(t,"fw",s.join(",")),t.toString()},(t=Za.prototype).Nb=function(e,n,t){var r=new I("popup-closed-by-user"),i=new I("web-storage-unsupported"),o=this,s=!1;return this.la().then(function(){var t,r={type:"webStorageSupport"};eu(t=o).then(function(){return e=t.m,n=r,e.qb.then(function(){return new le(function(t){e.a.send(n.type,n,t,yr("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))})});var e,n}).then(function(t){if(t&&t.length&&void 0!==t[0].webStorageSupport)return t[0].webStorageSupport;throw Error()}).then(function(t){t||(e&&tr(e),n(i),s=!0)})}).s(function(){}).then(function(){if(!s)return n=e,new le(function(e){return function t(){dn(2e3).then(function(){return n&&!n.closed?t():void e()})}()});var n}).then(function(){if(!s)return dn(t).then(function(){n(r)})})},t.Wb=function(){var t=vr();return!wr(t)&&!Cr(t)},t.Sb=function(){return!1},t.Lb=function(e,t,n,r,i,o,s,a){if(!e)return _e(new I("popup-blocked"));if(s&&!wr())return this.la().s(function(t){tr(e),i(t)}),r(),me();this.a||(this.a=tu(nu(this)));var u=this;return this.a.then(function(){var t=u.la().s(function(t){throw tr(e),i(t),t});return r(),t}).then(function(){Co(n),s||$n(ru(u.o,u.g,u.b,t,n,null,o,u.c,void 0,u.i,a,u.f),e)}).s(function(t){throw"auth/network-request-failed"==t.code&&(u.a=null),t})},t.Mb=function(t,e,n,r){this.a||(this.a=tu(nu(this)));var i=this;return this.a.then(function(){Co(e),$n(ru(i.o,i.g,i.b,t,e,Jn(),n,i.c,void 0,i.i,r,i.f))}).s(function(t){throw"auth/network-request-failed"==t.code&&(i.a=null),t})},t.la=function(){var t=this;return eu(this).then(function(){return t.m.qb}).s(function(){throw t.a=null,new I("network-request-failed")})},t.Zb=function(){return!0},t.Ea=function(t){this.h.push(t)},t.Ra=function(e){G(this.h,function(t){return t==e})},(t=iu.prototype).get=function(t){return me(this.a.getItem(t)).then(function(t){return t&&Tr(t)})},t.set=function(t,e){return me(this.a.setItem(t,Er(e)))},t.T=function(t){return me(this.a.removeItem(t))},t.ca=function(){},t.ia=function(){};var su,au=[];function uu(t,e,n){ct(t.a)&&t.b.addEventListener("message",t.f),void 0===t.a[e]&&(t.a[e]=[]),t.a[e].push(n)}function cu(t){this.a=t}function hu(t){this.c=t,this.b=!1,this.a=[]}function lu(r,t,e,n){var i,o,s,a,u=e||{},c=null;if(r.b)return _e(Error("connection_unavailable"));var h=n?800:50,l="undefined"!=typeof MessageChannel?new MessageChannel:null;return new le(function(e,n){l?(i=Math.floor(Math.random()*Math.pow(10,20)).toString(),l.port1.start(),s=setTimeout(function(){n(Error("unsupported_event"))},h),c={messageChannel:l,onMessage:o=function(t){t.data.eventId===i&&("ack"===t.data.status?(clearTimeout(s),a=setTimeout(function(){n(Error("timeout"))},3e3)):"done"===t.data.status?(clearTimeout(a),void 0!==t.data.response?e(t.data.response):n(Error("unknown_error"))):(clearTimeout(s),clearTimeout(a),n(Error("invalid_response"))))}},r.a.push(c),l.port1.addEventListener("message",o),r.c.postMessage({eventType:t,eventId:i,data:u},[l.port2])):n(Error("connection_unavailable"))}).then(function(t){return fu(r,c),t}).s(function(t){throw fu(r,c),t})}function fu(t,e){var n,r;e&&(n=e.messageChannel,r=e.onMessage,n&&(n.port1.removeEventListener("message",r),n.port1.close()),G(t.a,function(t){return t==e}))}function pu(){if(!yu())throw new I("web-storage-unsupported");this.c={},this.a=[],this.b=0,this.v=l.indexedDB,this.type="indexedDB",this.g=this.m=this.f=this.l=null,this.o=!1,this.h=null;var t,e,n,r=this;ar()&&self?(this.m=(n=ar()?self:null,V(au,function(t){t.b==n&&(e=t)}),e||(e=new ou(n),au.push(e)),e),uu(this.m,"keyChanged",function(t,n){return wu(r).then(function(e){return 0<e.length&&V(r.a,function(t){t(e)}),{keyProcessed:K(e,n.key)}})}),uu(this.m,"ping",function(){return me(["keyChanged"])})):((t=l.navigator)&&t.serviceWorker?me().then(function(){return t.serviceWorker.ready}).then(function(t){return t.active||null}).s(function(){return null}):me(null)).then(function(t){(r.h=t)&&(r.g=new hu(new cu(t)),lu(r.g,"ping",null,!0).then(function(t){t[0].fulfilled&&K(t[0].value,"keyChanged")&&(r.o=!0)}).s(function(){}))})}function du(t){return t.i||(t.i=function i(o){return new le(function(e,n){var t=o.v.open("firebaseLocalStorageDb",1);t.onerror=function(t){try{t.preventDefault()}catch(t){}n(Error(t.target.error))},t.onupgradeneeded=function(t){t=t.target.result;try{t.createObjectStore("firebaseLocalStorage",{keyPath:"fbase_key"})}catch(t){n(t)}},t.onsuccess=function(t){var r;(t=t.target.result).objectStoreNames.contains("firebaseLocalStorage")?e(t):(r=o,new le(function(t,e){var n=r.v.deleteDatabase("firebaseLocalStorageDb");n.onsuccess=function(){t()},n.onerror=function(t){e(Error(t.target.error))}}).then(function(){return i(o)}).then(function(t){e(t)}).s(function(t){n(t)}))}})}(t)),t.i}function vu(i,t){var o=0;return new le(function e(n,r){du(i).then(t).then(n).s(function(t){return 3<++o?void r(t):du(i).then(function(t){return t.close(),i.i=void 0,e(n,r)})})})}function yu(){try{return l.indexedDB}catch(t){return}}function gu(t){return t.objectStore("firebaseLocalStorage")}function mu(t,e){return t.transaction(["firebaseLocalStorage"],e?"readwrite":"readonly")}function _u(t){return new le(function(e,n){t.onsuccess=function(t){t&&t.target?e(t.target.result):e()},t.onerror=function(t){n(t.target.error)}})}function bu(t,e){return t.g&&t.h&&((n=l.navigator)&&n.serviceWorker&&n.serviceWorker.controller||null)===t.h?lu(t.g,"keyChanged",{key:e},t.o).then(function(){}).s(function(){}):me();var n}function wu(r){return du(r).then(function(t){var i=gu(mu(t,!1));return i.getAll?_u(i.getAll()):new le(function(e,n){var r=[],t=i.openCursor();t.onsuccess=function(t){(t=t.target.result)?(r.push(t.value),t.continue()):e(r)},t.onerror=function(t){n(t.target.error)}})}).then(function(t){var e={},n=[];if(0==r.b){for(n=0;n<t.length;n++)e[t[n].fbase_key]=t[n].value;n=function t(e,n){var r,i=[];for(r in e)r in n&&typeof e[r]==typeof n[r]?"object"==typeof e[r]&&null!=e[r]&&null!=n[r]?0<t(e[r],n[r]).length&&i.push(r):e[r]!==n[r]&&i.push(r):i.push(r);for(r in n)r in e||i.push(r);return i}(r.c,e),r.c=e}return n})}function Eu(t){t.l&&t.l.cancel("STOP_EVENT"),t.f&&(clearTimeout(t.f),t.f=null)}function Iu(t){var r=this,i=null;this.a=[],this.type="indexedDB",this.c=t,this.b=me().then(function(){if(yu()){var e=Sr(),n="__sak"+e;return su=su||new pu,(i=su).set(n,e).then(function(){return i.get(n)}).then(function(t){if(t!==e)throw Error("indexedDB not supported!");return i.T(n)}).then(function(){return i}).s(function(){return r.c})}return r.c}).then(function(t){return r.type=t.type,t.ca(function(e){V(r.a,function(t){t(e)})}),t})}function Tu(){this.a={},this.type="inMemory"}function Su(){if(!function(){var t="Node"==ur();if(t=Cu()||t&&Vl.INTERNAL.node&&Vl.INTERNAL.node.localStorage)try{return t.setItem("__sak","1"),t.removeItem("__sak"),1}catch(t){return}}()){if("Node"==ur())throw new I("internal-error","The LocalStorage compatibility library was not found.");throw new I("web-storage-unsupported")}this.a=Cu()||Vl.INTERNAL.node.localStorage,this.type="localStorage"}function Cu(){try{var t=l.localStorage,e=Sr();return t&&(t.setItem(e,"1"),t.removeItem(e)),t}catch(t){return null}}function Nu(){this.type="nullStorage"}function Au(){if(!function(){var t="Node"==ur();if(t=ku()||t&&Vl.INTERNAL.node&&Vl.INTERNAL.node.sessionStorage)try{return t.setItem("__sak","1"),t.removeItem("__sak"),1}catch(t){return}}()){if("Node"==ur())throw new I("internal-error","The SessionStorage compatibility library was not found.");throw new I("web-storage-unsupported")}this.a=ku()||Vl.INTERNAL.node.sessionStorage,this.type="sessionStorage"}function ku(){try{var t=l.sessionStorage,e=Sr();return t&&(t.setItem(e,"1"),t.removeItem(e)),t}catch(t){return null}}function Ou(){var t={};t.Browser=Du,t.Node=xu,t.ReactNative=Lu,t.Worker=Mu,this.a=t[ur()]}ou.prototype.c=function(n){var e,r=n.data.eventType,i=n.data.eventId,t=this.a[r];t&&0<t.length&&(n.ports[0].postMessage({status:"ack",eventId:i,eventType:r,response:null}),e=[],V(t,function(t){e.push(me().then(function(){return t(n.origin,n.data.data)}))}),we(e).then(function(t){var e=[];V(t,function(t){e.push({fulfilled:t.Ob,value:t.value,reason:t.reason?t.reason.message:void 0})}),V(e,function(t){for(var e in t)void 0===t[e]&&delete t[e]}),n.ports[0].postMessage({status:"done",eventId:i,eventType:r,response:e})}))},cu.prototype.postMessage=function(t,e){this.a.postMessage(t,e)},hu.prototype.close=function(){for(;0<this.a.length;)fu(this,this.a[0]);this.b=!0},(t=pu.prototype).set=function(r,i){var o=this,s=!1;return vu(this,function(t){return _u((t=gu(mu(t,!0))).get(r))}).then(function(n){return vu(o,function(t){if(t=gu(mu(t,!0)),n)return n.value=i,_u(t.put(n));o.b++,s=!0;var e={};return e.fbase_key=r,e.value=i,_u(t.add(e))})}).then(function(){return o.c[r]=i,bu(o,r)}).na(function(){s&&o.b--})},t.get=function(e){return vu(this,function(t){return _u(gu(mu(t,!1)).get(e))}).then(function(t){return t&&t.value})},t.T=function(e){var n=this,r=!1;return vu(this,function(t){return r=!0,n.b++,_u(gu(mu(t,!0)).delete(e))}).then(function(){return delete n.c[e],bu(n,e)}).na(function(){r&&n.b--})},t.ca=function(t){var n;0==this.a.length&&(Eu(n=this),function e(){n.f=setTimeout(function(){n.l=wu(n).then(function(e){0<e.length&&V(n.a,function(t){t(e)})}).then(function(){e()}).s(function(t){"STOP_EVENT"!=t.message&&e()})},800)}()),this.a.push(t)},t.ia=function(e){G(this.a,function(t){return t==e}),0==this.a.length&&Eu(this)},(t=Iu.prototype).get=function(e){return this.b.then(function(t){return t.get(e)})},t.set=function(e,n){return this.b.then(function(t){return t.set(e,n)})},t.T=function(e){return this.b.then(function(t){return t.T(e)})},t.ca=function(t){this.a.push(t)},t.ia=function(e){G(this.a,function(t){return t==e})},(t=Tu.prototype).get=function(t){return me(this.a[t])},t.set=function(t,e){return this.a[t]=e,me()},t.T=function(t){return delete this.a[t],me()},t.ca=function(){},t.ia=function(){},(t=Su.prototype).get=function(t){var e=this;return me().then(function(){return Tr(e.a.getItem(t))})},t.set=function(e,n){var r=this;return me().then(function(){var t=Er(n);null===t?r.T(e):r.a.setItem(e,t)})},t.T=function(t){var e=this;return me().then(function(){e.a.removeItem(t)})},t.ca=function(t){l.window&&Xe(l.window,"storage",t)},t.ia=function(t){l.window&&Ze(l.window,"storage",t)},(t=Nu.prototype).get=function(){return me(null)},t.set=function(){return me()},t.T=function(){return me()},t.ca=function(){},t.ia=function(){},(t=Au.prototype).get=function(t){var e=this;return me().then(function(){return Tr(e.a.getItem(t))})},t.set=function(e,n){var r=this;return me().then(function(){var t=Er(n);null===t?r.T(e):r.a.setItem(e,t)})},t.T=function(t){var e=this;return me().then(function(){e.a.removeItem(t)})},t.ca=function(){},t.ia=function(){};var Pu,Ru,Du={D:Su,ab:Au},xu={D:Su,ab:Au},Lu={D:iu,ab:Nu},Mu={D:Su,ab:Nu},Fu={qd:"local",NONE:"none",sd:"session"};function Uu(){var t=!(Cr(vr())||!sr()),e=wr(),n=gr();this.v=t,this.h=e,this.l=n,this.a={},t=Pu=Pu||new Ou;try{this.g=!Xn()&&Rr()||!l.indexedDB?new t.a.D:new Iu(new(ar()?Tu:t.a.D))}catch(t){this.g=new Tu,this.h=!0}try{this.i=new t.a.ab}catch(t){this.i=new Tu}this.m=new Tu,this.f=m(this.Xb,this),this.b={}}function ju(){return Ru=Ru||new Uu}function Vu(t,e){switch(e){case"session":return t.i;case"none":return t.m;default:return t.g}}function qu(t,e){return"firebase:"+t.name+(e?":"+e:"")}function Bu(t,e,n){return n=qu(e,n),"local"==e.D&&(t.b[n]=null),Vu(t,e.D).T(n)}function Wu(t){t.c&&(clearInterval(t.c),t.c=null)}function Ku(t){this.a=t,this.b=ju()}(t=Uu.prototype).get=function(t,e){return Vu(this,t.D).get(qu(t,e))},t.set=function(e,t,n){var r=qu(e,n),i=this,o=Vu(this,e.D);return o.set(r,t).then(function(){return o.get(r)}).then(function(t){"local"==e.D&&(i.b[r]=t)})},t.addListener=function(t,e,n){var r;t=qu(t,e),this.l&&(this.b[t]=l.localStorage.getItem(t)),ct(this.a)&&(Vu(this,"local").ca(this.f),this.h||(Xn()||!Rr())&&l.indexedDB||!this.l||(Wu(r=this),r.c=setInterval(function(){for(var t in r.a){var e=l.localStorage.getItem(t),n=r.b[t];e!=n&&(r.b[t]=e,e=new je({type:"storage",key:t,target:window,oldValue:n,newValue:e,a:!0}),r.Xb(e))}},1e3))),this.a[t]||(this.a[t]=[]),this.a[t].push(n)},t.removeListener=function(t,e,n){t=qu(t,e),this.a[t]&&(G(this.a[t],function(t){return t==n}),0==this.a[t].length&&delete this.a[t]),ct(this.a)&&(Vu(this,"local").ia(this.f),Wu(this))},t.Xb=function(t){if(t&&t.g){var e=t.a.key;if(null==e)for(var n in this.a){var r=this.b[n];void 0===r&&(r=null);var i=l.localStorage.getItem(n);i!==r&&(this.b[n]=i,this.lb(n))}else if(0==e.indexOf("firebase:")&&this.a[e]){if(void 0!==t.a.a?Vu(this,"local").ia(this.f):Wu(this),this.v)if(n=l.localStorage.getItem(e),(r=t.a.newValue)!==n)null!==r?l.localStorage.setItem(e,r):l.localStorage.removeItem(e);else if(this.b[e]===r&&void 0===t.a.a)return;var o=this,n=function(){void 0===t.a.a&&o.b[e]===l.localStorage.getItem(e)||(o.b[e]=l.localStorage.getItem(e),o.lb(e))};Wt&&$t&&10==$t&&l.localStorage.getItem(e)!==t.a.newValue&&t.a.newValue!==t.a.oldValue?setTimeout(n,10):n()}}else V(t,m(this.lb,this))},t.lb=function(t){this.a[t]&&V(this.a[t],function(t){t()})};var Hu,Gu={name:"authEvent",D:"local"};function zu(){this.a=ju()}function Qu(t,e){this.b=Yu,this.f=l.Uint8Array?new Uint8Array(this.b):Array(this.b),this.g=this.c=0,this.a=[],this.i=t,this.h=e,this.l=l.Int32Array?new Int32Array(64):Array(64),void 0===Hu&&(Hu=l.Int32Array?new Int32Array(nc):nc),this.reset()}w(Qu,function(){this.b=-1});for(var Yu=64,Xu=Yu-1,Ju=[],$u=0;$u<Xu;$u++)Ju[$u]=0;var Zu=z(128,Ju);function tc(t){for(var e=t.f,n=t.l,r=0,i=0;i<e.length;)n[r++]=e[i]<<24|e[i+1]<<16|e[i+2]<<8|e[i+3],i=4*r;for(e=16;e<64;e++){i=0|n[e-15],r=0|n[e-2];var o=(0|n[e-16])+((i>>>7|i<<25)^(i>>>18|i<<14)^i>>>3)|0,s=(0|n[e-7])+((r>>>17|r<<15)^(r>>>19|r<<13)^r>>>10)|0;n[e]=o+s|0}r=0|t.a[0],i=0|t.a[1];var a=0|t.a[2],u=0|t.a[3],c=0|t.a[4],h=0|t.a[5],l=0|t.a[6];for(o=0|t.a[7],e=0;e<64;e++)var f=((r>>>2|r<<30)^(r>>>13|r<<19)^(r>>>22|r<<10))+(r&i^r&a^i&a)|0,s=(o=o+((c>>>6|c<<26)^(c>>>11|c<<21)^(c>>>25|c<<7))|0)+((s=(s=c&h^~c&l)+(0|Hu[e])|0)+(0|n[e])|0)|0,o=l,l=h,h=c,c=u+s|0,u=a,a=i,i=r,r=s+f|0;t.a[0]=t.a[0]+r|0,t.a[1]=t.a[1]+i|0,t.a[2]=t.a[2]+a|0,t.a[3]=t.a[3]+u|0,t.a[4]=t.a[4]+c|0,t.a[5]=t.a[5]+h|0,t.a[6]=t.a[6]+l|0,t.a[7]=t.a[7]+o|0}function ec(t,e,n){void 0===n&&(n=e.length);var r=0,i=t.c;if("string"==typeof e)for(;r<n;)t.f[i++]=e.charCodeAt(r++),i==t.b&&(tc(t),i=0);else{if(!d(e))throw Error("message must be string or array");for(;r<n;){var o=e[r++];if(!("number"==typeof o&&0<=o&&o<=255&&o==(0|o)))throw Error("message must be a byte array");t.f[i++]=o,i==t.b&&(tc(t),i=0)}}t.c=i,t.g+=n}Qu.prototype.reset=function(){this.g=this.c=0,this.a=l.Int32Array?new Int32Array(this.h):Q(this.h)};var nc=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function rc(){Qu.call(this,8,ic)}w(rc,Qu);var ic=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225];function oc(t,e,n,r,i,o){this.m=t,this.i=e,this.l=n,this.v=r||null,this.u=i||null,this.o=o,this.h=e+":"+n,this.A=new zu,this.g=new Ku(this.h),this.f=null,this.b=[],this.a=this.c=null}function sc(t){return new I("invalid-cordova-configuration",t)}function ac(t,e){for(var n=0;n<t.b.length;n++)try{t.b[n](e)}catch(t){}}function uc(c){return c.f||(c.f=c.la().then(function(){return new le(function(n){function e(r){t=!0,s&&s.cancel(),cc(i).then(function(t){var e,n=o;t&&r&&r.url&&(e=null,-1!=(n=Hi(r.url)).indexOf("/__/auth/callback")&&(e=(e="object"==typeof(e=Tr(Cn(e=Nn(n),"firebaseError")||null))?T(e):null)?new No(t.c,t.b,null,null,e,null,t.S()):new No(t.c,t.b,n,t.f,null,null,t.S())),n=e||o),ac(i,n)})}var i,o,t,s,r,a,u;c.Ea(function t(e){return n(e),c.Ra(t),!1}),i=c,o=new No("unknown",null,null,null,new I("no-auth-event")),t=!1,s=dn(500).then(function(){return cc(i).then(function(){t||ac(i,o)})}),r=l.handleOpenURL,l.handleOpenURL=function(t){if(0==t.toLowerCase().indexOf(yr("BuildInfo.packageName",l).toLowerCase()+"://")&&e({url:t}),"function"==typeof r)try{r(t)}catch(t){console.error(t)}},Po=Po||new ko,a=e,(u=Po).a.push(a),u.b||(u.b=function(t){for(var e=0;e<u.a.length;e++)u.a[e](t)},"function"==typeof(a=yr("universalLinks.subscribe",l))&&a(null,u.b))})})),c.f}function cc(e){var t,n=null;return(t=e.g).b.get(Gu,t.a).then(Ao).then(function(t){return n=t,Bu((t=e.g).b,Gu,t.a)}).then(function(){return n})}function hc(t){this.a=t,this.b=ju()}(t=oc.prototype).la=function(){return this.Ia||(this.Ia=(or(void 0)?ir().then(function(){return new le(function(t,e){var n=l.document,r=setTimeout(function(){e(Error("Cordova framework is not ready."))},1e3);n.addEventListener("deviceready",function(){clearTimeout(r),t()},!1)})}):_e(Error("Cordova must run in an Android or iOS file scheme."))).then(function(){if("function"!=typeof yr("universalLinks.subscribe",l))throw sc("cordova-universal-links-plugin-fix is not installed");if(void 0===yr("BuildInfo.packageName",l))throw sc("cordova-plugin-buildinfo is not installed");if("function"!=typeof yr("cordova.plugins.browsertab.openUrl",l))throw sc("cordova-plugin-browsertab is not installed");if("function"!=typeof yr("cordova.InAppBrowser.open",l))throw sc("cordova-plugin-inappbrowser is not installed")},function(){throw new I("cordova-not-ready")}))},t.Nb=function(t,e){return e(new I("operation-not-supported-in-this-environment")),me()},t.Lb=function(){return _e(new I("operation-not-supported-in-this-environment"))},t.Zb=function(){return!1},t.Wb=function(){return!0},t.Sb=function(){return!0},t.Mb=function(t,e,n,r){if(this.c)return _e(new I("redirect-operation-pending"));var i=this,o=l.document,s=null,a=null,u=null,c=null;return this.c=me().then(function(){return Co(e),uc(i)}).then(function(){return function(n,t,e,r,i){var o=function(){for(var t=20,e=[];0<t;)e.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),t--;return e.join("")}(),s=new No(t,r,null,o,new I("no-auth-event"),null,i),a=yr("BuildInfo.packageName",l);if("string"!=typeof a)throw new I("invalid-cordova-configuration");var u=yr("BuildInfo.displayName",l),c={};if(vr().toLowerCase().match(/iphone|ipad|ipod/))c.ibi=a;else{if(!vr().toLowerCase().match(/android/))return _e(new I("operation-not-supported-in-this-environment"));c.apn=a}u&&(c.appDisplayName=u),o=function(t){var e=new rc;ec(e,t),t=[];var n=8*e.g;e.c<56?ec(e,Zu,56-e.c):ec(e,Zu,e.b-(e.c-56));for(var r=63;56<=r;r--)e.f[r]=255&n,n/=256;for(tc(e),r=n=0;r<e.i;r++)for(var i=24;0<=i;i-=8)t[n++]=e.a[r]>>i&255;return B(t,function(t){return 1<(t=t.toString(16)).length?t:"0"+t}).join("")}(o),c.sessionId=o;var h=ru(n.m,n.i,n.l,t,e,null,r,n.v,c,n.u,i,n.o);return n.la().then(function(){var t=n.h;return n.A.a.set(Gu,s.w(),t)}).then(function(){var t=yr("cordova.plugins.browsertab.isAvailable",l);if("function"!=typeof t)throw new I("invalid-cordova-configuration");var e=null;t(function(t){if(t){if("function"!=typeof(e=yr("cordova.plugins.browsertab.openUrl",l)))throw new I("invalid-cordova-configuration");e(h)}else{if("function"!=typeof(e=yr("cordova.InAppBrowser.open",l)))throw new I("invalid-cordova-configuration");t=vr(),n.a=e(h,t.match(/(iPad|iPhone|iPod).*OS 7_\d/i)||t.match(/(iPad|iPhone|iPod).*OS 8_\d/i)?"_blank":"_system","location=yes")}})})}(i,t,e,n,r)}).then(function(){return new le(function(e,t){a=function(){var t=yr("cordova.plugins.browsertab.close",l);return e(),"function"==typeof t&&t(),i.a&&"function"==typeof i.a.close&&(i.a.close(),i.a=null),!1},i.Ea(a),u=function(){s=s||dn(2e3).then(function(){t(new I("redirect-cancelled-by-user"))})},c=function(){kr()&&u()},o.addEventListener("resume",u,!1),vr().toLowerCase().match(/android/)||o.addEventListener("visibilitychange",c,!1)}).s(function(t){return cc(i).then(function(){throw t})})}).na(function(){u&&o.removeEventListener("resume",u,!1),c&&o.removeEventListener("visibilitychange",c,!1),s&&s.cancel(),a&&i.Ra(a),i.c=null})},t.Ea=function(e){this.b.push(e),uc(this).s(function(t){"auth/invalid-cordova-configuration"===t.code&&(t=new No("unknown",null,null,null,new I("no-auth-event")),e(t))})},t.Ra=function(e){G(this.b,function(t){return t==e})};var lc={name:"pendingRedirect",D:"session"};function fc(t){return Bu(t.b,lc,t.a)}function pc(t,e,n,r){this.i={},this.u=0,this.O=t,this.m=e,this.v=n,this.G=r,this.h=[],this.f=!1,this.l=m(this.o,this),this.b=new Ac,this.A=new Dc,this.g=new hc(Cc(this.m,this.v)),this.c={},this.c.unknown=this.b,this.c.signInViaRedirect=this.b,this.c.linkViaRedirect=this.b,this.c.reauthViaRedirect=this.b,this.c.signInViaPopup=this.A,this.c.linkViaPopup=this.A,this.c.reauthViaPopup=this.A,this.a=dc(this.O,this.m,this.v,S,this.G)}function dc(t,e,n,r,i){var o=Vl.SDK_VERSION||null;return new(or()?oc:Za)(t,e,n,o,r,i)}function vc(e){e.f||(e.f=!0,e.a.Ea(e.l));var n=e.a;return e.a.la().s(function(t){throw e.a==n&&e.reset(),t})}function yc(n){n.a.Wb()&&vc(n).s(function(t){var e=new No("unknown",null,null,null,new I("operation-not-supported-in-this-environment"));Ec(t)&&n.o(e)}),n.a.Sb()||kc(n.b)}function gc(n,t){K(n.h,t)||n.h.push(t),n.f||(t=n.g).b.get(lc,t.a).then(function(t){return"pending"==t}).then(function(t){t?fc(n.g).then(function(){vc(n).s(function(t){var e=new No("unknown",null,null,null,new I("operation-not-supported-in-this-environment"));Ec(t)&&n.o(e)})}):yc(n)}).s(function(){yc(n)})}function mc(t,e){G(t.h,function(t){return t==e})}pc.prototype.reset=function(){this.f=!1,this.a.Ra(this.l),this.a=dc(this.O,this.m,this.v,null,this.G),this.i={}},pc.prototype.o=function(t){if(!t)throw new I("invalid-auth-event");if(6e5<=b()-this.u&&(this.i={},this.u=0),t&&t.getUid()&&this.i.hasOwnProperty(t.getUid()))return!1;for(var e=!1,n=0;n<this.h.length;n++){var r=this.h[n];if(r.Eb(t.c,t.b)){(e=this.c[t.c])&&(e.h(t,r),t&&(t.f||t.b)&&(this.i[t.getUid()]=!0,this.u=b())),e=!0;break}}return kc(this.b),e};var _c=new Ar(2e3,1e4),bc=new Ar(3e4,6e4);function wc(t,e,n,r,i,o,s){return t.a.Lb(e,n,r,function(){t.f||(t.f=!0,t.a.Ea(t.l))},function(){t.reset()},i,o,s)}function Ec(t){return t&&"auth/cordova-not-ready"==t.code}function Ic(e,t,n,r,i){var o,s;return(s=e.g).b.set(lc,"pending",s.a).then(function(){return e.a.Mb(t,n,r,i).s(function(t){if(Ec(t))throw new I("operation-not-supported-in-this-environment");return o=t,fc(e.g).then(function(){throw o})}).then(function(){return e.a.Zb()?new le(function(){}):fc(e.g).then(function(){return e.qa()}).then(function(){}).s(function(){})})})}function Tc(t,e,n,r,i){return t.a.Nb(r,function(t){e.ma(n,null,t,i)},_c.get())}pc.prototype.qa=function(){return this.b.qa()};var Sc={};function Cc(t,e,n){return t=t+":"+e,n&&(t=t+":"+n.url),t}function Nc(t,e,n,r){var i=Cc(e,n,r);return Sc[i]||(Sc[i]=new pc(t,e,n,r)),Sc[i]}function Ac(){this.b=null,this.f=[],this.c=[],this.a=null,this.i=this.g=!1}function kc(t){t.g||(t.g=!0,Rc(t,!1,null,null))}function Oc(t){t.g&&!t.i&&Rc(t,!1,null,null)}function Pc(t,e){if(t.b=function(){return me(e)},t.f.length)for(var n=0;n<t.f.length;n++)t.f[n](e)}function Rc(t,e,n,r){e?r?function(t,e){if(t.b=function(){return _e(e)},t.c.length)for(var n=0;n<t.c.length;n++)t.c[n](e)}(t,r):Pc(t,n):Pc(t,{user:null}),t.f=[],t.c=[]}function Dc(){}function xc(){this.hb=!1,Object.defineProperty(this,"appVerificationDisabled",{get:function(){return this.hb},set:function(t){this.hb=t},enumerable:!1})}function Lc(t,e){this.a=e,Fr(this,"verificationId",t)}function Mc(t,e,n,r){return new Io(t).eb(e,n).then(function(t){return new Lc(t,r)})}function Fc(t){var e=Pi(t);if(!(e&&e.exp&&e.auth_time&&e.iat))throw new I("internal-error","An internal error occurred. The token obtained by Firebase appears to be malformed. Please retry the operation.");Ur(this,{token:t,expirationTime:Pr(1e3*e.exp),authTime:Pr(1e3*e.auth_time),issuedAtTime:Pr(1e3*e.iat),signInProvider:e.firebase&&e.firebase.sign_in_provider?e.firebase.sign_in_provider:null,signInSecondFactor:e.firebase&&e.firebase.sign_in_second_factor?e.firebase.sign_in_second_factor:null,claims:e})}function Uc(t,e,n){var r=e&&e[Vc];if(!r)throw new I("argument-error","Internal assert: Invalid MultiFactorResolver");this.a=t,this.f=ht(e),this.g=n,this.c=new Gi(null,r),this.b=[];var i=this;V(e[jc]||[],function(t){(t=Br(t))&&i.b.push(t)}),Fr(this,"auth",this.a),Fr(this,"session",this.c),Fr(this,"hints",this.b)}Ac.prototype.reset=function(){this.b=null,this.a&&(this.a.cancel(),this.a=null)},Ac.prototype.h=function(t,e){var n,r,i,o;t?(this.reset(),this.g=!0,n=t.c,r=t.b,i=t.a&&"auth/web-storage-unsupported"==t.a.code,o=t.a&&"auth/operation-not-supported-in-this-environment"==t.a.code,this.i=!(!i&&!o),"unknown"!=n||i||o?t.a?(Rc(this,!0,null,t.a),me()):e.Fa(n,r)?function(e,t,n){n=n.Fa(t.c,t.b);var r=t.g,i=t.f,o=t.i,s=t.S(),a=!!t.c.match(/Redirect$/);n(r,i,s,o).then(function(t){Rc(e,a,t,null)}).s(function(t){Rc(e,a,null,t)})}(this,t,e):_e(new I("invalid-auth-event")):(Rc(this,!1,null,null),me())):_e(new I("invalid-auth-event"))},Ac.prototype.qa=function(){var i=this;return new le(function(t,e){var n,r;i.b?i.b().then(t,e):(i.f.push(t),i.c.push(e),n=i,r=new I("timeout"),n.a&&n.a.cancel(),n.a=dn(bc.get()).then(function(){n.b||(n.g=!0,Rc(n,!0,null,r))}))})},Dc.prototype.h=function(t,e){var n,r,i,o,s;t?(n=t.c,r=t.b,t.a?(e.ma(t.c,null,t.a,t.b),me()):e.Fa(n,r)?(i=e,o=t.b,s=t.c,i.Fa(s,o)(t.g,t.f,t.S(),t.i).then(function(t){i.ma(s,t,null,o)}).s(function(t){i.ma(s,null,t,o)})):_e(new I("invalid-auth-event"))):_e(new I("invalid-auth-event"))},Lc.prototype.confirm=function(t){return t=To(this.verificationId,t),this.a(t)};var jc="mfaInfo",Vc="mfaPendingCredential";function qc(t,e,n,r){I.call(this,"multi-factor-auth-required",r,e),this.b=new Uc(t,e,n),Fr(this,"resolver",this.b)}function Bc(t,e,n){if(t&&y(t.serverResponse)&&"auth/multi-factor-auth-required"===t.code)try{return new qc(e,t.serverResponse,n,t.message)}catch(t){}return null}function Wc(){}function Kc(t){Fr(this,"factorId",t.fa),this.a=t}function Hc(t){if(Kc.call(this,t),this.a.fa!=Io.PROVIDER_ID)throw new I("argument-error","firebase.auth.PhoneMultiFactorAssertion requires a valid firebase.auth.PhoneAuthCredential")}function Gc(t,e){for(var n in Ue.call(this,t),e)this[n]=e[n]}function zc(t,e){this.a=t,this.b=[],this.c=m(this.xc,this),Xe(this.a,"userReloaded",this.c);var r=[];e&&e.multiFactor&&e.multiFactor.enrolledFactors&&V(e.multiFactor.enrolledFactors,function(t){var e=null,n={};if(t){t.uid&&(n[Hr]=t.uid),t.displayName&&(n[Wr]=t.displayName),t.enrollmentTime&&(n[Kr]=new Date(t.enrollmentTime).toISOString()),t.phoneNumber&&(n[Gr]=t.phoneNumber);try{e=new zr(n)}catch(t){}t=e}else t=null;t&&r.push(t)}),Qc(this,r)}function Qc(t,e){t.b=e,Fr(t,"enrolledFactors",e)}function Yc(t,e,n){if(this.h=t,this.i=e,this.g=n,this.c=3e4,this.f=96e4,this.b=null,this.a=this.c,this.f<this.c)throw Error("Proactive refresh lower bound greater than upper bound!")}function Xc(t){this.c=t,this.b=this.a=null}function Jc(t){return t.b&&1e3*t.b.c||0}function $c(t,e){var n=e.refreshToken;t.b=Oi(e[Us]||""),t.a=n}function Zc(t,e){this.a=t||null,this.b=e||null,Ur(this,{lastSignInTime:Pr(e||null),creationTime:Pr(t||null)})}function th(t,e,n,r,i,o){Ur(this,{uid:t,displayName:r||null,photoURL:i||null,email:n||null,phoneNumber:o||null,providerId:e})}function eh(t,e,n){this.G=[],this.l=t.apiKey,this.m=t.appName,this.o=t.authDomain||null;var r,i=Vl.SDK_VERSION?dr(Vl.SDK_VERSION):null;this.a=new Ms(this.l,k(S),i),t.emulatorConfig&&Ks(this.a,t.emulatorConfig),this.b=new Xc(this.a),ch(this,e[Us]),$c(this.b,e),Fr(this,"refreshToken",this.b.a),fh(this,n||{}),cn.call(this),this.P=!1,this.o&&mr()&&(this.i=Nc(this.o,this.l,this.m)),this.R=[],this.f=null,this.u=(r=this,new Yc(function(){return r.I(!0)},function(t){return!(!t||"auth/network-request-failed"!=t.code)},function(){var t=Jc(r.b)-b()-3e5;return 0<t?t:0})),this.$=m(this.gb,this);var o=this;this.pa=null,this.Ba=function(t){o.wa(t.h)},this.ba=null,this.za=function(t){Ks(o.a,t.c)},this.W=null,this.X=[],this.Aa=function(t){ih(o,t.f)},this.aa=null,this.N=new zc(this,n),Fr(this,"multiFactor",this.N)}function nh(t,e){t.ba&&Ze(t.ba,"languageCodeChanged",t.Ba),(t.ba=e)&&Xe(e,"languageCodeChanged",t.Ba)}function rh(t,e){t.W&&Ze(t.W,"emulatorConfigChanged",t.za),(t.W=e)&&Xe(e,"emulatorConfigChanged",t.za)}function ih(t,e){t.X=e,Gs(t.a,Vl.SDK_VERSION?dr(Vl.SDK_VERSION,t.X):null)}function oh(t,e){t.aa&&Ze(t.aa,"frameworkChanged",t.Aa),(t.aa=e)&&Xe(e,"frameworkChanged",t.Aa)}function sh(e){try{return Vl.app(e.m).auth()}catch(t){throw new I("internal-error","No firebase.auth.Auth instance is available for the Firebase App '"+e.m+"'!")}}function ah(t){t.A||t.u.b||(t.u.start(),Ze(t,"tokenChanged",t.$),Xe(t,"tokenChanged",t.$))}function uh(t){Ze(t,"tokenChanged",t.$),t.u.stop()}function ch(t,e){t.ya=e,Fr(t,"_lat",e)}function hh(t){for(var e=[],n=0;n<t.R.length;n++)e.push(t.R[n](t));return we(e).then(function(){return t})}function lh(t){t.i&&!t.P&&(t.P=!0,gc(t.i,t))}function fh(t,e){Ur(t,{uid:e.uid,displayName:e.displayName||null,photoURL:e.photoURL||null,email:e.email||null,emailVerified:e.emailVerified||!1,phoneNumber:e.phoneNumber||null,isAnonymous:e.isAnonymous||!1,tenantId:e.tenantId||null,metadata:new Zc(e.createdAt,e.lastLoginAt),providerData:[]}),t.a.b=t.tenantId}function ph(){}function dh(t){return me().then(function(){if(t.A)throw new I("app-deleted")})}function vh(t){return B(t.providerData,function(t){return t.providerId})}function yh(t,e){e&&(gh(t,e.providerId),t.providerData.push(e))}function gh(t,e){G(t.providerData,function(t){return t.providerId==e})}function mh(t,e,n){("uid"!=e||n)&&t.hasOwnProperty(e)&&Fr(t,e,n)}function _h(e,t){var n,r;e!=t&&(Ur(e,{uid:t.uid,displayName:t.displayName,photoURL:t.photoURL,email:t.email,emailVerified:t.emailVerified,phoneNumber:t.phoneNumber,isAnonymous:t.isAnonymous,tenantId:t.tenantId,providerData:[]}),t.metadata?Fr(e,"metadata",new Zc((r=t.metadata).a,r.b)):Fr(e,"metadata",new Zc),V(t.providerData,function(t){yh(e,t)}),n=e.b,r=t.b,n.b=r.b,n.a=r.a,Fr(e,"refreshToken",e.b.a),Qc(e.N,t.N.b))}function bh(r){return r.I().then(function(t){var e,n=r.isAnonymous;return Ba((e=r).a,_a,{idToken:t}).then(m(e.Jc,e)).then(function(){return n||mh(r,"isAnonymous",!1),t})})}function wh(t,e){e[Us]&&t.ya!=e[Us]&&($c(t.b,e),t.dispatchEvent(new Gc("tokenChanged")),ch(t,e[Us]),mh(t,"refreshToken",t.b.a))}function Eh(t,e){return bh(t).then(function(){if(K(vh(t),e))return hh(t).then(function(){throw new I("provider-already-linked")})})}function Ih(t,e,n){return jr({user:t,credential:So(e),additionalUserInfo:e=Mi(e),operationType:n})}function Th(t,e){return wh(t,e),t.reload().then(function(){return t})}function Sh(n,r,t,e,i){if(!mr())return _e(new I("operation-not-supported-in-this-environment"));if(n.f&&!i)return _e(n.f);var o=Li(t.providerId),s=Sr(n.uid+":::"),a=null;(!wr()||sr())&&n.o&&t.isOAuthProvider&&(a=ru(n.o,n.l,n.m,r,t,null,s,Vl.SDK_VERSION||null,null,null,n.tenantId));var u=er(a,o&&o.ua,o&&o.ta);return e=e().then(function(){if(Nh(n),!i)return n.I().then(function(){})}).then(function(){return wc(n.i,u,r,t,s,!!a,n.tenantId)}).then(function(){return new le(function(t,e){n.ma(r,null,new I("cancelled-popup-request"),n.h||null),n.g=t,n.O=e,n.h=s,n.c=Tc(n.i,n,r,u,s)})}).then(function(t){return u&&tr(u),t?jr(t):null}).s(function(t){throw u&&tr(u),t}),Ah(n,e,i)}function Ch(e,t,n,r,i){if(!mr())return _e(new I("operation-not-supported-in-this-environment"));if(e.f&&!i)return _e(e.f);var o=null,s=Sr(e.uid+":::");return r=r().then(function(){if(Nh(e),!i)return e.I().then(function(){})}).then(function(){return e.ga=s,hh(e)}).then(function(t){return e.ha&&(t=(t=e.ha).b.set(Ph,e.w(),t.a)),t}).then(function(){return Ic(e.i,t,n,s,e.tenantId)}).s(function(t){if(o=t,e.ha)return Rh(e.ha);throw o}).then(function(){if(o)throw o}),Ah(e,r,i)}function Nh(t){if(!t.i||!t.P){if(t.i&&!t.P)throw new I("internal-error");throw new I("auth-domain-config-required")}}function Ah(n,t,e){var r,i=(r=n).f&&!e?(t.cancel(),_e(r.f)):t.s(function(t){throw!t||"auth/user-disabled"!=t.code&&"auth/user-token-expired"!=t.code||(r.f||r.dispatchEvent(new Gc("userInvalidated")),r.f=t),t});return n.G.push(i),i.na(function(){H(n.G,i)}),i.s(function(t){var e=null;throw t&&"auth/multi-factor-auth-required"===t.code&&(e=Bc(t.w(),sh(n),m(n.ic,n))),e||t})}function kh(t){if(!t.apiKey)return null;var e={apiKey:t.apiKey,authDomain:t.authDomain,appName:t.appName,emulatorConfig:t.emulatorConfig},n={};if(!t.stsTokenManager||!t.stsTokenManager.accessToken)return null;n[Us]=t.stsTokenManager.accessToken,n.refreshToken=t.stsTokenManager.refreshToken||null;var r=new eh(e,n,t);return t.providerData&&V(t.providerData,function(t){t&&yh(r,jr(t))}),t.redirectEventId&&(r.ga=t.redirectEventId),r}function Oh(t){this.a=t,this.b=ju()}Uc.prototype.Qc=function(t){var n=this;return t.rb(this.a.a,this.c).then(function(t){var e=ht(n.f);return delete e[jc],delete e[Vc],ft(e,t),n.g(e)})},w(qc,I),Wc.prototype.rb=function(t,e,n){return e.type==zi?(o=this,s=t,a=n,e.Ha().then(function(t){return t={idToken:t},void 0!==a&&(t.displayName=a),ft(t,{phoneVerificationInfo:Eo(o.a)}),Ba(s,ga,t)})):(r=this,i=t,e.Ha().then(function(t){return ft(t={mfaPendingCredential:t},{phoneVerificationInfo:Eo(r.a)}),Ba(i,ma,t)}));var r,i,o,s,a},w(Kc,Wc),w(Hc,Kc),w(Gc,Ue),(t=zc.prototype).xc=function(t){var e;Qc(this,(t=t.gd,e=[],V(t.mfaInfo||[],function(t){(t=Br(t))&&e.push(t)}),e))},t.Qb=function(){return this.a.I().then(function(t){return new Gi(t,null)})},t.ec=function(e,n){var r=this,i=this.a.a;return this.Qb().then(function(t){return e.rb(i,t,n)}).then(function(t){return wh(r.a,t),r.a.reload()})},t.ad=function(t){var n=this,r="string"==typeof t?t:t.uid,e=this.a.a;return this.a.I().then(function(t){return Ba(e,qa,{idToken:t,mfaEnrollmentId:r})}).then(function(t){var e=q(n.b,function(t){return t.uid!=r});return Qc(n,e),wh(n.a,t),n.a.reload().s(function(t){if("auth/user-token-expired"!=t.code)throw t})})},t.w=function(){return{multiFactor:{enrolledFactors:B(this.b,function(t){return t.w()})}}},Yc.prototype.start=function(){this.a=this.c,function e(n,t){var r;n.stop(),n.b=dn((r=n,(t=t)?(r.a=r.c,r.g()):(t=r.a,r.a*=2,r.a>r.f&&(r.a=r.f),t))).then(function(){return e=l.document,n=null,kr()||!e?me():new le(function(t){n=function(){kr()&&(e.removeEventListener("visibilitychange",n,!1),t())},e.addEventListener("visibilitychange",n,!1)}).s(function(t){throw e.removeEventListener("visibilitychange",n,!1),t});var e,n}).then(function(){return n.h()}).then(function(){e(n,!0)}).s(function(t){n.i(t)&&e(n,!1)})}(this,!0)},Yc.prototype.stop=function(){this.b&&(this.b.cancel(),this.b=null)},Xc.prototype.w=function(){return{apiKey:this.c.c,refreshToken:this.a,accessToken:this.b&&this.b.toString(),expirationTime:Jc(this)}},Xc.prototype.getToken=function(t){return t=!!t,this.b&&!this.a?_e(new I("user-token-expired")):t||!this.b||b()>Jc(this)-3e4?this.a?(t={grant_type:"refresh_token",refresh_token:(e=this).a},r=e.c,i=t,new le(function(e,n){"refresh_token"==i.grant_type&&i.refresh_token||"authorization_code"==i.grant_type&&i.code?zs(r,r.l+"?key="+encodeURIComponent(r.c),function(t){t?t.error?n(Ka(t)):t.access_token&&t.refresh_token?e(t):n(new I("internal-error")):n(new I("network-request-failed"))},"POST",jn(i).toString(),r.g,r.v.get()):n(new I("internal-error"))}).then(function(t){return e.b=Oi(t.access_token),e.a=t.refresh_token,{accessToken:e.b.toString(),refreshToken:e.a}}).s(function(t){throw"auth/user-token-expired"==t.code&&(e.a=null),t})):me(null):me({accessToken:this.b.toString(),refreshToken:this.a});var e,r,i},Zc.prototype.w=function(){return{lastLoginAt:this.b,createdAt:this.a}},w(eh,cn),eh.prototype.wa=function(t){this.pa=t,Ws(this.a,t)},eh.prototype.ka=function(){return this.pa},eh.prototype.Ga=function(){return Q(this.X)},eh.prototype.gb=function(){this.u.b&&(this.u.stop(),this.u.start())},Fr(eh.prototype,"providerId","firebase"),(t=eh.prototype).reload=function(){var t=this;return Ah(this,dh(this).then(function(){return bh(t).then(function(){return hh(t)}).then(ph)}))},t.nc=function(t){return this.I(t).then(function(t){return new Fc(t)})},t.I=function(t){var e=this;return Ah(this,dh(this).then(function(){return e.b.getToken(t)}).then(function(t){if(!t)throw new I("internal-error");return t.accessToken!=e.ya&&(ch(e,t.accessToken),e.dispatchEvent(new Gc("tokenChanged"))),mh(e,"refreshToken",t.refreshToken),t.accessToken}))},t.Jc=function(t){if(!(t=t.users)||!t.length)throw new I("internal-error");fh(this,{uid:(t=t[0]).localId,displayName:t.displayName,photoURL:t.photoUrl,email:t.email,emailVerified:!!t.emailVerified,phoneNumber:t.phoneNumber,lastLoginAt:t.lastLoginAt,createdAt:t.createdAt,tenantId:t.tenantId});for(var e,n=(e=t.providerUserInfo)&&e.length?B(e,function(t){return new th(t.rawId,t.providerId,t.email,t.displayName,t.photoUrl,t.phoneNumber)}):[],r=0;r<n.length;r++)yh(this,n[r]);mh(this,"isAnonymous",!(this.email&&t.passwordHash||this.providerData&&this.providerData.length)),this.dispatchEvent(new Gc("userReloaded",{gd:t}))},t.Kc=function(t){return Lr("firebase.User.prototype.reauthenticateAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.reauthenticateWithCredential instead."),this.sb(t)},t.sb=function(t){var e=this,n=null;return Ah(this,t.c(this.a,this.uid).then(function(t){return wh(e,t),n=Ih(e,t,"reauthenticate"),e.f=null,e.reload()}).then(function(){return n}),!0)},t.Bc=function(t){return Lr("firebase.User.prototype.linkAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.linkWithCredential instead."),this.pb(t)},t.pb=function(e){var n=this,r=null;return Ah(this,Eh(this,e.providerId).then(function(){return n.I()}).then(function(t){return e.b(n.a,t)}).then(function(t){return r=Ih(n,t,"link"),Th(n,t)}).then(function(){return r}))},t.Cc=function(t,e){var n=this;return Ah(this,Eh(this,"phone").then(function(){return Mc(sh(n),t,e,m(n.pb,n))}))},t.Lc=function(t,e){var n=this;return Ah(this,me().then(function(){return Mc(sh(n),t,e,m(n.sb,n))}),!0)},t.Ab=function(e){var n=this;return Ah(this,this.I().then(function(t){return n.a.Ab(t,e)}).then(function(t){return wh(n,t),n.reload()}))},t.dd=function(e){var n=this;return Ah(this,this.I().then(function(t){return e.b(n.a,t)}).then(function(t){return wh(n,t),n.reload()}))},t.Bb=function(e){var n=this;return Ah(this,this.I().then(function(t){return n.a.Bb(t,e)}).then(function(t){return wh(n,t),n.reload()}))},t.Cb=function(e){if(void 0===e.displayName&&void 0===e.photoURL)return dh(this);var n=this;return Ah(this,this.I().then(function(t){return n.a.Cb(t,{displayName:e.displayName,photoUrl:e.photoURL})}).then(function(t){return wh(n,t),mh(n,"displayName",t.displayName||null),mh(n,"photoURL",t.photoUrl||null),V(n.providerData,function(t){"password"===t.providerId&&(Fr(t,"displayName",n.displayName),Fr(t,"photoURL",n.photoURL))}),hh(n)}).then(ph))},t.bd=function(e){var n=this;return Ah(this,bh(this).then(function(t){return K(vh(n),e)?Ba(n.a,da,{idToken:t,deleteProvider:[e]}).then(function(t){var e={};return V(t.providerUserInfo||[],function(t){e[t.providerId]=!0}),V(vh(n),function(t){e[t]||gh(n,t)}),e[Io.PROVIDER_ID]||Fr(n,"phoneNumber",null),hh(n)}):hh(n).then(function(){throw new I("no-such-provider")})}))},t.delete=function(){var e=this;return Ah(this,this.I().then(function(t){return Ba(e.a,pa,{idToken:t})}).then(function(){e.dispatchEvent(new Gc("userDeleted"))})).then(function(){for(var t=0;t<e.G.length;t++)e.G[t].cancel("app-deleted");nh(e,null),rh(e,null),oh(e,null),e.G=[],e.A=!0,uh(e),Fr(e,"refreshToken",null),e.i&&mc(e.i,e)})},t.Eb=function(t,e){return!!("linkViaPopup"==t&&(this.h||null)==e&&this.g||"reauthViaPopup"==t&&(this.h||null)==e&&this.g||"linkViaRedirect"==t&&(this.ga||null)==e||"reauthViaRedirect"==t&&(this.ga||null)==e)},t.ma=function(t,e,n,r){"linkViaPopup"!=t&&"reauthViaPopup"!=t||r!=(this.h||null)||(n&&this.O?this.O(n):e&&!n&&this.g&&this.g(e),this.c&&(this.c.cancel(),this.c=null),delete this.g,delete this.O)},t.Fa=function(t,e){return"linkViaPopup"==t&&e==(this.h||null)?m(this.Jb,this):"reauthViaPopup"==t&&e==(this.h||null)?m(this.Kb,this):"linkViaRedirect"==t&&(this.ga||null)==e?m(this.Jb,this):"reauthViaRedirect"==t&&(this.ga||null)==e?m(this.Kb,this):null},t.Dc=function(t){var e=this;return Sh(this,"linkViaPopup",t,function(){return Eh(e,t.providerId).then(function(){return hh(e)})},!1)},t.Mc=function(t){return Sh(this,"reauthViaPopup",t,function(){return me()},!0)},t.Ec=function(t){var e=this;return Ch(this,"linkViaRedirect",t,function(){return Eh(e,t.providerId)},!1)},t.Nc=function(t){return Ch(this,"reauthViaRedirect",t,function(){return me()},!0)},t.Jb=function(e,n,t,r){var i=this;this.c&&(this.c.cancel(),this.c=null);var o=null;return t=this.I().then(function(t){return sa(i.a,{requestUri:e,postBody:r,sessionId:n,idToken:t})}).then(function(t){return o=Ih(i,t,"link"),Th(i,t)}).then(function(){return o}),Ah(this,t)},t.Kb=function(t,e,n,r){var i=this;this.c&&(this.c.cancel(),this.c=null);var o=null;return Ah(this,me().then(function(){return Xi(aa(i.a,{requestUri:t,sessionId:e,postBody:r,tenantId:n}),i.uid)}).then(function(t){return o=Ih(i,t,"reauthenticate"),wh(i,t),i.f=null,i.reload()}).then(function(){return o}),!0)},t.tb=function(e){var n=this,r=null;return Ah(this,this.I().then(function(t){return r=t,void 0===e||ct(e)?{}:Ni(new gi(e))}).then(function(t){return n.a.tb(r,t)}).then(function(t){if(n.email!=t)return n.reload()}).then(function(){}))},t.Db=function(e,n){var r=this,i=null;return Ah(this,this.I().then(function(t){return i=t,void 0===n||ct(n)?{}:Ni(new gi(n))}).then(function(t){return r.a.Db(i,e,t)}).then(function(t){if(r.email!=t)return r.reload()}).then(function(){}))},t.ic=function(t){var e=null,n=this;return Ah(this,t=Xi(me(t),n.uid).then(function(t){return e=Ih(n,t,"reauthenticate"),wh(n,t),n.f=null,n.reload()}).then(function(){return e}),!0)},t.toJSON=function(){return this.w()},t.w=function(){var e={uid:this.uid,displayName:this.displayName,photoURL:this.photoURL,email:this.email,emailVerified:this.emailVerified,phoneNumber:this.phoneNumber,isAnonymous:this.isAnonymous,tenantId:this.tenantId,providerData:[],apiKey:this.l,appName:this.m,authDomain:this.o,stsTokenManager:this.b.w(),redirectEventId:this.ga||null};return this.metadata&&ft(e,this.metadata.w()),V(this.providerData,function(t){e.providerData.push(function(t){var e,n={};for(e in t)t.hasOwnProperty(e)&&(n[e]=t[e]);return n}(t))}),ft(e,this.N.w()),e};var Ph={name:"redirectUser",D:"session"};function Rh(t){return Bu(t.b,Ph,t.a)}function Dh(t){var e,n,r,i,o,s,a,u,c;this.a=t,this.b=ju(),this.c=null,this.f=(n=Mh("local"),r=Mh("session"),i=Mh("none"),o=(e=this).b,s=n,a=e.a,u=qu(s,a),c=Vu(o,s.D),o.get(s,a).then(function(t){var e=null;try{e=Tr(l.localStorage.getItem(u))}catch(t){}if(e&&!t)return l.localStorage.removeItem(u),o.set(s,e,a);e&&t&&"localStorage"!=c.type&&l.localStorage.removeItem(u)}).then(function(){return e.b.get(r,e.a)}).then(function(t){return t?r:e.b.get(i,e.a).then(function(t){return t?i:e.b.get(n,e.a).then(function(t){return t?n:e.b.get(Lh,e.a).then(function(t){return t?Mh(t):n})})})}).then(function(t){return e.c=t,xh(e,t.D)}).s(function(){e.c||(e.c=n)})),this.b.addListener(Mh("local"),this.a,m(this.g,this))}function xh(t,e){var n,a,r=[];for(n in Fu)Fu[n]!==e&&r.push(Bu(t.b,Mh(Fu[n]),t.a));return r.push(Bu(t.b,Lh,t.a)),a=r,new le(function(n,e){var r=a.length,i=[];if(r)for(var t=function(t,e){r--,i[t]=e,0==r&&n(i)},o=function(t){e(t)},s=0;s<a.length;s++)be(a[s],_(t,s),o);else n(i)})}Dh.prototype.g=function(){var e=this,n=Mh("local");Vh(this,function(){return me().then(function(){return e.c&&"local"!=e.c.D?e.b.get(n,e.a):null}).then(function(t){if(t)return xh(e,"local").then(function(){e.c=n})})})};var Lh={name:"persistence",D:"session"};function Mh(t){return{name:"authUser",D:t}}function Fh(t,e){return Vh(t,function(){return t.b.set(t.c,e.w(),t.a)})}function Uh(t){return Vh(t,function(){return Bu(t.b,t.c,t.a)})}function jh(t,e,n){return Vh(t,function(){return t.b.get(t.c,t.a).then(function(t){return t&&e&&(t.authDomain=e),t&&n&&(t.emulatorConfig=n),kh(t||{})})})}function Vh(t,e){return t.f=t.f.then(e,e),t.f}function qh(t){if(this.m=!1,Fr(this,"settings",new xc),Fr(this,"app",t),!this.app.options||!this.app.options.apiKey)throw new I("invalid-api-key");var n,e,r,i,o,s,a,u,c;t=Vl.SDK_VERSION?dr(Vl.SDK_VERSION):null,this.a=new Ms(this.app.options&&this.app.options.apiKey,k(S),t),this.R=[],this.u=[],this.P=[],this.ac=Vl.INTERNAL.createSubscribe(m(this.yc,this)),this.X=void 0,this.bc=Vl.INTERNAL.createSubscribe(m(this.zc,this)),zh(this,null),this.l=new Dh(this.app.options.apiKey+":"+this.app.name),this.G=new Oh(this.app.options.apiKey+":"+this.app.name),this.$=$h(this,(e=(n=this).app.options.authDomain,u=(a=n).G,c=a.app.options.authDomain,u=u.b.get(Ph,u.a).then(function(t){return t&&c&&(t.authDomain=c),kh(t||{})}).then(function(t){return(a.o=t)&&(t.ha=a.G),Rh(a.G)}),t=$h(a,u).then(function(){return jh(n.l,e,n.f)}).then(function(e){return e?(e.ha=n.G,n.o&&(n.o.ga||null)==(e.ga||null)?e:e.reload().then(function(){return Fh(n.l,e).then(function(){return e})}).s(function(t){return"auth/network-request-failed"==t.code?e:Uh(n.l)})):null}).then(function(t){zh(n,t||null)}),$h(n,t))),this.i=$h(this,(r=this).$.then(function(){return Gh(r)}).s(function(){}).then(function(){if(!r.m)return r.pa()}).s(function(){}).then(function(){var t;r.m||(r.ba=!0,(t=r.l).b.addListener(Mh("local"),t.a,r.pa))})),this.ba=!1,this.pa=m(this.Yc,this),this.Ba=m(this.da,this),this.ya=m(this.kc,this),this.za=m(this.vc,this),this.Aa=m(this.wc,this),this.b=null,o=(i=this).app.options.authDomain,s=i.app.options.apiKey,o&&mr()&&(i.gb=i.$.then(function(){var t;if(!i.m)return i.b=Nc(o,s,i.app.name,i.f),gc(i.b,i),Yh(i)&&lh(Yh(i)),i.o&&(lh(i.o),(t=i.o).wa(i.ka()),nh(t,i),ih(t=i.o,i.N),oh(t,i),Ks((t=i.o).a,i.f),rh(t,i),i.o=null),i.b})),this.INTERNAL={},this.INTERNAL.delete=m(this.delete,this),this.INTERNAL.logFramework=m(this.Fc,this),this.A=0,cn.call(this),t=this,Object.defineProperty(t,"lc",{get:function(){return this.ka()},set:function(t){this.wa(t)},enumerable:!1}),t.aa=null,Object.defineProperty(t,"ti",{get:function(){return this.S()},set:function(t){this.xb(t)},enumerable:!1}),t.W=null,this.N=[],this.f=null}function Bh(t){Ue.call(this,"languageCodeChanged"),this.h=t}function Wh(t){Ue.call(this,"emulatorConfigChanged"),this.c=t}function Kh(t){Ue.call(this,"frameworkChanged"),this.f=t}function Hh(t){return t.gb||_e(new I("auth-domain-config-required"))}function Gh(t){if(!mr())return _e(new I("operation-not-supported-in-this-environment"));var e=Hh(t).then(function(){return t.b.qa()}).then(function(t){return t?jr(t):null});return $h(t,e)}function zh(t,e){var n,r;Yh(t)&&(n=Yh(t),r=t.Ba,G(n.R,function(t){return t==r}),Ze(Yh(t),"tokenChanged",t.ya),Ze(Yh(t),"userDeleted",t.za),Ze(Yh(t),"userInvalidated",t.Aa),uh(Yh(t))),e&&(e.R.push(t.Ba),Xe(e,"tokenChanged",t.ya),Xe(e,"userDeleted",t.za),Xe(e,"userInvalidated",t.Aa),0<t.A&&ah(e)),Fr(t,"currentUser",e),e&&(e.wa(t.ka()),nh(e,t),ih(e,t.N),oh(e,t),Ks(e.a,t.f),rh(e,t))}function Qh(n,t){var e=null,r=null;return $h(n,t.then(function(t){return e=So(t),r=Mi(t),s=t,(a={}).apiKey=(o=n).app.options.apiKey,a.authDomain=o.app.options.authDomain,a.appName=o.app.name,o.f&&(a.emulatorConfig=o.f),o.$.then(function(){return t=a,e=s,n=o.G,r=o.Ga(),i=new eh(t,e),n&&(i.ha=n),r&&ih(i,r),i.reload().then(function(){return i});var t,e,n,r,i}).then(function(t){return Yh(o)&&t.uid==Yh(o).uid?_h(Yh(o),t):(zh(o,t),lh(t)),o.da(t)}).then(function(){Jh(o)});var o,s,a},function(t){var e=null;throw t&&"auth/multi-factor-auth-required"===t.code&&(e=Bc(t.w(),n,m(n.jc,n))),e||t}).then(function(){return jr({user:Yh(n),credential:e,additionalUserInfo:r,operationType:"signIn"})}))}function Yh(t){return t.currentUser}function Xh(t){return Yh(t)&&Yh(t)._lat||null}function Jh(t){if(t.ba){for(var e=0;e<t.u.length;e++)t.u[e]&&t.u[e](Xh(t));if(t.X!==t.getUid()&&t.P.length)for(t.X=t.getUid(),e=0;e<t.P.length;e++)t.P[e]&&t.P[e](Xh(t))}}function $h(t,e){return t.R.push(e),e.na(function(){H(t.R,e)}),e}function Zh(){}function tl(){this.a={},this.b=1e12}Dh.prototype.wb=function(e){var n=null,r=this;return function(t){var e=new I("invalid-persistence-type"),n=new I("unsupported-persistence-type");t:{for(r in Fu)if(Fu[r]==t){var r=!0;break t}r=!1}if(!r||"string"!=typeof t)throw e;switch(ur()){case"ReactNative":if("session"===t)throw n;break;case"Node":if("none"!==t)throw n;break;case"Worker":if("session"===t||!yu()&&"none"!==t)throw n;break;default:if(!gr()&&"none"!==t)throw n}}(e),Vh(this,function(){return e!=r.c.D?r.b.get(r.c,r.a).then(function(t){return n=t,xh(r,e)}).then(function(){if(r.c=Mh(e),n)return r.b.set(r.c,n,r.a)}):me()})},w(qh,cn),w(Bh,Ue),w(Wh,Ue),w(Kh,Ue),(t=qh.prototype).wb=function(t){return t=this.l.wb(t),$h(this,t)},t.wa=function(t){this.aa===t||this.m||(this.aa=t,Ws(this.a,this.aa),this.dispatchEvent(new Bh(this.ka())))},t.ka=function(){return this.aa},t.ed=function(){var t=l.navigator;this.wa(t&&(t.languages&&t.languages[0]||t.language||t.userLanguage)||null)},t.fd=function(t){if(!this.f){if(!/^https?:\/\//.test(t))throw new I("argument-error","Emulator URL must start with a valid scheme (http:// or https://).");Or("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),l.document&&ir().then(function(){var t=l.document.createElement("div");t.innerText="Running in emulator mode. Do not use with production credentials.",t.style.position="fixed",t.style.width="100%",t.style.backgroundColor="#ffffff",t.style.border=".1em solid #000000",t.style.color="#ff0000",t.style.bottom="0px",t.style.left="0px",t.style.margin="0px",t.style.zIndex=1e4,t.style.textAlign="center",t.classList.add("firebase-emulator-warning"),l.document.body.appendChild(t)}),this.f={url:t},this.settings.hb=!0,Ks(this.a,this.f),this.dispatchEvent(new Wh(this.f))}},t.Fc=function(t){this.N.push(t),Gs(this.a,Vl.SDK_VERSION?dr(Vl.SDK_VERSION,this.N):null),this.dispatchEvent(new Kh(this.N))},t.Ga=function(){return Q(this.N)},t.xb=function(t){this.W===t||this.m||(this.W=t,this.a.b=this.W)},t.S=function(){return this.W},t.toJSON=function(){return{apiKey:this.app.options.apiKey,authDomain:this.app.options.authDomain,appName:this.app.name,currentUser:Yh(this)&&Yh(this).w()}},t.Eb=function(t,e){switch(t){case"unknown":case"signInViaRedirect":return!0;case"signInViaPopup":return this.h==e&&!!this.g;default:return!1}},t.ma=function(t,e,n,r){"signInViaPopup"==t&&this.h==r&&(n&&this.O?this.O(n):e&&!n&&this.g&&this.g(e),this.c&&(this.c.cancel(),this.c=null),delete this.g,delete this.O)},t.Fa=function(t,e){return"signInViaRedirect"==t||"signInViaPopup"==t&&this.h==e&&this.g?m(this.hc,this):null},t.hc=function(t,e,n,r){var i=this,o={requestUri:t,postBody:r,sessionId:e,tenantId:n};return this.c&&(this.c.cancel(),this.c=null),i.$.then(function(){return Qh(i,oa(i.a,o))})},t.Wc=function(e){if(!mr())return _e(new I("operation-not-supported-in-this-environment"));var n=this,t=Li(e.providerId),r=Sr(),i=null;(!wr()||sr())&&this.app.options.authDomain&&e.isOAuthProvider&&(i=ru(this.app.options.authDomain,this.app.options.apiKey,this.app.name,"signInViaPopup",e,null,r,Vl.SDK_VERSION||null,null,null,this.S(),this.f));var o=er(i,t&&t.ua,t&&t.ta);return $h(this,t=Hh(this).then(function(t){return wc(t,o,"signInViaPopup",e,r,!!i,n.S())}).then(function(){return new le(function(t,e){n.ma("signInViaPopup",null,new I("cancelled-popup-request"),n.h),n.g=t,n.O=e,n.h=r,n.c=Tc(n.b,n,"signInViaPopup",o,r)})}).then(function(t){return o&&tr(o),t?jr(t):null}).s(function(t){throw o&&tr(o),t}))},t.Xc=function(t){if(!mr())return _e(new I("operation-not-supported-in-this-environment"));var e=this;return $h(this,Hh(this).then(function(){return Vh(t=e.l,function(){return t.b.set(Lh,t.c.D,t.a)});var t}).then(function(){return Ic(e.b,"signInViaRedirect",t,void 0,e.S())}))},t.qa=function(){var e=this;return Gh(this).then(function(t){return e.b&&Oc(e.b.b),t}).s(function(t){throw e.b&&Oc(e.b.b),t})},t.cd=function(t){if(!t)return _e(new I("null-user"));if(this.W!=t.tenantId)return _e(new I("tenant-id-mismatch"));var e=this,n={};n.apiKey=this.app.options.apiKey,n.authDomain=this.app.options.authDomain,n.appName=this.app.name;var r,i,o,s,a,u=(r=t,i=n,o=e.G,s=e.Ga(),a=r.b,(n={})[Us]=a.b&&a.b.toString(),n.refreshToken=a.a,i=new eh(i||{apiKey:r.l,authDomain:r.o,appName:r.m},n),o&&(i.ha=o),s&&ih(i,s),_h(i,r),i);return $h(this,this.i.then(function(){if(e.app.options.apiKey!=t.l)return u.reload()}).then(function(){return Yh(e)&&t.uid==Yh(e).uid?(_h(Yh(e),t),e.da(t)):(zh(e,u),lh(u),e.da(u))}).then(function(){Jh(e)}))},t.zb=function(){var t=this,e=this.i.then(function(){return t.b&&Oc(t.b.b),Yh(t)?(zh(t,null),Uh(t.l).then(function(){Jh(t)})):me()});return $h(this,e)},t.Yc=function(){var r=this;return jh(this.l,this.app.options.authDomain).then(function(t){if(!r.m){var e,n;if((n=Yh(r)&&t)&&(n=Yh(r).uid,e=t.uid,n=null!=n&&""!==n&&null!=e&&""!==e&&n==e),n)return _h(Yh(r),t),Yh(r).I();(Yh(r)||t)&&(zh(r,t),t&&(lh(t),t.ha=r.G),r.b&&gc(r.b,r),Jh(r))}})},t.da=function(t){return Fh(this.l,t)},t.kc=function(){Jh(this),this.da(Yh(this))},t.vc=function(){this.zb()},t.wc=function(){this.zb()},t.jc=function(t){var e=this;return this.i.then(function(){return Qh(e,me(t))})},t.yc=function(t){var e=this;this.addAuthTokenListener(function(){t.next(Yh(e))})},t.zc=function(t){var e,n=this,r=function(){t.next(Yh(n))};(e=this).P.push(r),$h(e,e.i.then(function(){!e.m&&K(e.P,r)&&e.X!==e.getUid()&&(e.X=e.getUid(),r(Xh(e)))}))},t.Hc=function(t,e,n){var r=this;return this.ba&&Promise.resolve().then(function(){"function"==typeof t?t(Yh(r)):"function"==typeof t.next&&t.next(Yh(r))}),this.ac(t,e,n)},t.Gc=function(t,e,n){var r=this;return this.ba&&Promise.resolve().then(function(){r.X=r.getUid(),"function"==typeof t?t(Yh(r)):"function"==typeof t.next&&t.next(Yh(r))}),this.bc(t,e,n)},t.mc=function(t){var e=this,n=this.i.then(function(){return Yh(e)?Yh(e).I(t).then(function(t){return{accessToken:t}}):null});return $h(this,n)},t.Sc=function(t){var n=this;return this.i.then(function(){return Qh(n,Ba(n.a,Ma,{token:t}))}).then(function(t){var e=t.user;return mh(e,"isAnonymous",!1),n.da(e),t})},t.Tc=function(t,e){var n=this;return this.i.then(function(){return Qh(n,Ba(n.a,Fa,{email:t,password:e}))})},t.dc=function(t,e){var n=this;return this.i.then(function(){return Qh(n,Ba(n.a,la,{email:t,password:e}))})},t.Za=function(t){var e=this;return this.i.then(function(){return Qh(e,t.ja(e.a))})},t.Rc=function(t){return Lr("firebase.auth.Auth.prototype.signInAndRetrieveDataWithCredential is deprecated. Please use firebase.auth.Auth.prototype.signInWithCredential instead."),this.Za(t)},t.yb=function(){var n=this;return this.i.then(function(){var t=Yh(n);if(t&&t.isAnonymous){var e=jr({providerId:null,isNewUser:!1});return jr({user:t,credential:null,additionalUserInfo:e,operationType:"signIn"})}return Qh(n,n.a.yb()).then(function(t){var e=t.user;return mh(e,"isAnonymous",!0),n.da(e),t})})},t.getUid=function(){return Yh(this)&&Yh(this).uid||null},t.cc=function(t){this.addAuthTokenListener(t),this.A++,0<this.A&&Yh(this)&&ah(Yh(this))},t.Oc=function(e){var n=this;V(this.u,function(t){t==e&&n.A--}),this.A<0&&(this.A=0),0==this.A&&Yh(this)&&uh(Yh(this)),this.removeAuthTokenListener(e)},t.addAuthTokenListener=function(t){var e=this;this.u.push(t),$h(this,this.i.then(function(){e.m||K(e.u,t)&&t(Xh(e))}))},t.removeAuthTokenListener=function(e){G(this.u,function(t){return t==e})},t.delete=function(){this.m=!0;for(var t=0;t<this.R.length;t++)this.R[t].cancel("app-deleted");return this.R=[],this.l&&(t=this.l).b.removeListener(Mh("local"),t.a,this.pa),this.b&&(mc(this.b,this),Oc(this.b.b)),Promise.resolve()},t.gc=function(t){return $h(this,Ba(this.a,fa,{identifier:t,continueUri:_r()?Jn():"http://localhost"}).then(function(t){return t.signinMethods||[]}))},t.Ac=function(t){return!!_o(t)},t.vb=function(e,n){var r=this;return $h(this,me().then(function(){var t=new gi(n);if(!t.c)throw new I("argument-error",bi+" must be true when sending sign in link to email");return Ni(t)}).then(function(t){return r.a.vb(e,t)}).then(function(){}))},t.hd=function(t){return this.Qa(t).then(function(t){return t.data.email})},t.mb=function(t,e){return $h(this,this.a.mb(t,e).then(function(){}))},t.Qa=function(t){return $h(this,this.a.Qa(t).then(function(t){return new Qr(t)}))},t.ib=function(t){return $h(this,this.a.ib(t).then(function(){}))},t.ub=function(e,t){var n=this;return $h(this,me().then(function(){return void 0===t||ct(t)?{}:Ni(new gi(t))}).then(function(t){return n.a.ub(e,t)}).then(function(){}))},t.Vc=function(t,e){return $h(this,Mc(this,t,e,m(this.Za,this)))},t.Uc=function(n,r){var i=this;return $h(this,me().then(function(){var t=r||Jn(),e=mo(n,t);if(!(t=_o(t)))throw new I("argument-error","Invalid email link!");if(t.tenantId!==i.S())throw new I("tenant-id-mismatch");return i.Za(e)}))},Zh.prototype.render=function(){},Zh.prototype.reset=function(){},Zh.prototype.getResponse=function(){},Zh.prototype.execute=function(){};var el=null;function nl(t,e){return(e=rl(e))&&t.a[e]||null}function rl(t){return(t=void 0===t?1e12:t)?t.toString():null}function il(t,e){this.g=!1,this.c=e,this.a=this.b=null,this.h="invisible"!==this.c.size,this.f=te(t);var n=this;this.i=function(){n.execute()},this.h?this.execute():Xe(this.f,"click",this.i)}function ol(t){if(t.g)throw Error("reCAPTCHA mock was already deleted!")}function sl(){}function al(){}tl.prototype.render=function(t,e){return this.a[this.b.toString()]=new il(t,e),this.b++},tl.prototype.reset=function(t){var e=nl(this,t);t=rl(t),e&&t&&(e.delete(),delete this.a[t])},tl.prototype.getResponse=function(t){return(t=nl(this,t))?t.getResponse():null},tl.prototype.execute=function(t){(t=nl(this,t))&&t.execute()},il.prototype.getResponse=function(){return ol(this),this.b},il.prototype.execute=function(){ol(this);var n=this;this.a||(this.a=setTimeout(function(){n.b=function(){for(var t=50,e=[];0<t;)e.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),t--;return e.join("")}();var t=n.c.callback,e=n.c["expired-callback"];if(t)try{t(n.b)}catch(t){}n.a=setTimeout(function(){if(n.a=null,n.b=null,e)try{e()}catch(t){}n.h&&n.execute()},6e4)},500))},il.prototype.delete=function(){ol(this),this.g=!0,clearTimeout(this.a),this.a=null,Ze(this.f,"click",this.i)},Fr(sl,"FACTOR_ID","phone"),al.prototype.g=function(){return me(el=el||new tl)},al.prototype.c=function(){};var ul=null;function cl(){this.b=l.grecaptcha?1/0:0,this.f=null,this.a="__rcb"+Math.floor(1e6*Math.random()).toString()}var hl=new dt(mt,"https://www.google.com/recaptcha/api.js?onload=%{onload}&render=explicit&hl=%{hl}"),ll=new Ar(3e4,6e4);cl.prototype.g=function(i){var o=this;return new le(function(t,e){var r=setTimeout(function(){e(new I("network-request-failed"))},ll.get());!l.grecaptcha||i!==o.f&&!o.b?(l[o.a]=function(){var n;l.grecaptcha?(o.f=i,n=l.grecaptcha.render,l.grecaptcha.render=function(t,e){return t=n(t,e),o.b++,t},clearTimeout(r),t(l.grecaptcha)):(clearTimeout(r),e(new I("internal-error"))),delete l[o.a]},me(ks(Et(hl,{onload:o.a,hl:i||""}))).s(function(){clearTimeout(r),e(new I("internal-error","Unable to load external reCAPTCHA dependencies!"))})):(clearTimeout(r),t(l.grecaptcha))})},cl.prototype.c=function(){this.b--};var fl=null;function pl(t,e,n,r,i,o,s){if(Fr(this,"type","recaptcha"),this.c=this.f=null,this.A=!1,this.m=e,this.g=null,s=s?ul=ul||new al:fl=fl||new cl,this.v=s,this.a=n||{theme:"light",type:"image"},this.h=[],this.a[yl])throw new I("argument-error","sitekey should not be provided for reCAPTCHA as one is automatically provisioned for the current project.");if(this.i="invisible"===this.a[gl],!l.document)throw new I("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment with DOM support.");if(!te(e)||!this.i&&te(e).hasChildNodes())throw new I("argument-error","reCAPTCHA container is either not found or already contains inner elements!");this.o=new Ms(t,o||null,i||null),this.u=r||function(){return null};var a=this;this.l=[];var u=this.a[dl];this.a[dl]=function(t){var e;ml(a,t),"function"==typeof u?u(t):"string"!=typeof u||"function"==typeof(e=yr(u,l))&&e(t)};var c=this.a[vl];this.a[vl]=function(){var t;ml(a,null),"function"==typeof c?c():"string"!=typeof c||"function"==typeof(t=yr(c,l))&&t()}}var dl="callback",vl="expired-callback",yl="sitekey",gl="size";function ml(t,e){for(var n=0;n<t.l.length;n++)try{t.l[n](e)}catch(t){}}function _l(t,e){return t.h.push(e),e.na(function(){H(t.h,e)}),e}function bl(t){if(t.A)throw new I("internal-error","RecaptchaVerifier instance has been destroyed.")}function wl(t,e,n){var r=!1;try{this.b=n||Vl.app()}catch(t){throw new I("argument-error","No firebase.app.App instance is currently initialized.")}if(!this.b.options||!this.b.options.apiKey)throw new I("invalid-api-key");n=this.b.options.apiKey;var i=this,o=null;try{o=this.b.auth().Ga()}catch(t){}try{r=this.b.auth().settings.appVerificationDisabledForTesting}catch(t){}o=Vl.SDK_VERSION?dr(Vl.SDK_VERSION,o):null,pl.call(this,n,t,e,function(){try{var e=i.b.auth().ka()}catch(t){e=null}return e},o,k(S),r)}function El(t,e,n,r){t:{n=Array.prototype.slice.call(n);for(var i=0,o=!1,s=0;s<e.length;s++)if(e[s].optional)o=!0;else{if(o)throw new I("internal-error","Argument validator encountered a required argument after an optional argument.");i++}if(o=e.length,n.length<i||o<n.length)r="Expected "+(i==o?1==i?"1 argument":i+" arguments":i+"-"+o+" arguments")+" but got "+n.length+".";else{for(i=0;i<n.length;i++)if(o=e[i].optional&&void 0===n[i],!e[i].K(n[i])&&!o){if(e=e[i],i<0||i>=Il.length)throw new I("internal-error","Argument validator received an unsupported number of arguments.");n=Il[i],r=(r?"":n+" argument ")+(e.name?'"'+e.name+'" ':"")+"must be "+e.J+".";break t}r=null}}if(r)throw new I("argument-error",t+" failed: "+r)}(t=pl.prototype).Ia=function(){var e=this;return this.f||(this.f=_l(this,me().then(function(){if(_r()&&!ar())return ir();throw new I("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment.")}).then(function(){return e.v.g(e.u())}).then(function(t){return e.g=t,Ba(e.o,Sa,{})}).then(function(t){e.a[yl]=t.recaptchaSiteKey}).s(function(t){throw e.f=null,t})))},t.render=function(){bl(this);var n=this;return _l(this,this.Ia().then(function(){var t,e;return null===n.c&&(e=n.m,n.i||(t=te(e),e=function(){var t,e=arguments,n=document,r=String(e[0]),i=e[1];return!Zt&&i&&(i.name||i.type)&&(r=["<",r],i.name&&r.push(' name="',jt(i.name),'"'),i.type&&(r.push(' type="',jt(i.type),'"'),ft(t={},i),delete t.type,i=t),r.push(">"),r=r.join("")),r=oe(n,r),i&&("string"==typeof i?r.className=i:Array.isArray(i)?r.className=i.join(" "):ee(r,i)),2<e.length&&function(e,n,t){function r(t){t&&n.appendChild("string"==typeof t?e.createTextNode(t):t)}for(var i=2;i<t.length;i++){var o=t[i];if(!d(o)||y(o)&&0<o.nodeType)r(o);else{t:{if(o&&"number"==typeof o.length){if(y(o)){var s="function"==typeof o.item||"string"==typeof o.item;break t}if(v(o)){s="function"==typeof o.item;break t}}s=!1}V(s?Q(o):o,r)}}}(n,r,e),r}("DIV"),t.appendChild(e)),n.c=n.g.render(e,n.a)),n.c}))},t.verify=function(){bl(this);var i=this;return _l(this,this.render().then(function(e){return new le(function(n){var r,t=i.g.getResponse(e);t?n(t):(r=function(t){var e;t&&(e=r,G(i.l,function(t){return t==e}),n(t))},i.l.push(r),i.i&&i.g.execute(i.c))})}))},t.reset=function(){bl(this),null!==this.c&&this.g.reset(this.c)},t.clear=function(){bl(this),this.A=!0,this.v.c();for(var t,e=0;e<this.h.length;e++)this.h[e].cancel("RecaptchaVerifier instance has been destroyed.");if(!this.i)for(e=te(this.m);t=e.firstChild;)e.removeChild(t)},w(wl,pl);var Il="First Second Third Fourth Fifth Sixth Seventh Eighth Ninth".split(" ");function Tl(t,e){return{name:t||"",J:"a valid string",optional:!!e,K:function(t){return"string"==typeof t}}}function Sl(t,e){return{name:t||"",J:"a boolean",optional:!!e,K:function(t){return"boolean"==typeof t}}}function Cl(t,e){return{name:t||"",J:"a valid object",optional:!!e,K:y}}function Nl(t,e){return{name:t||"",J:"a function",optional:!!e,K:function(t){return"function"==typeof t}}}function Al(t,e){return{name:t||"",J:"null",optional:!!e,K:function(t){return null===t}}}function kl(n){return{name:n?n+"Credential":"credential",J:n?"a valid "+n+" credential":"a valid credential",optional:!1,K:function(t){if(!t)return!1;var e=!n||t.providerId===n;return!(!t.ja||!e)}}}function Ol(){return{name:"multiFactorAssertion",J:"a valid multiFactorAssertion",optional:!1,K:function(t){return!!t&&!!t.rb}}}function Pl(){return{name:"authProvider",J:"a valid Auth provider",optional:!1,K:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}}function Rl(t,e){return y(t)&&"string"==typeof t.type&&t.type===e&&"function"==typeof t.Ha}function Dl(t){return y(t)&&"string"==typeof t.uid}function xl(){return{name:"applicationVerifier",J:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,K:function(t){return!(!t||"string"!=typeof t.type||"function"!=typeof t.verify)}}}function Ll(e,n,t,r){return{name:t||"",J:e.J+" or "+n.J,optional:!!r,K:function(t){return e.K(t)||n.K(t)}}}function Ml(t,e){for(var n in e){var r=e[n].name;t[r]=jl(r,t[n],e[n].j)}}function Fl(t,e){for(var n in e){var r=e[n].name;r!==n&&Object.defineProperty(t,r,{get:_(function(t){return this[t]},n),set:_(function(t,e,n,r){El(t,[n],[r],!0),this[e]=r},r,n,e[n].jb),enumerable:!0})}}function Ul(t,e,n,r){t[e]=jl(e,n,r)}function jl(t,e,n){function r(){var t=Array.prototype.slice.call(arguments);return El(o,n,t),e.apply(this,t)}if(!n)return e;var i,o=(t=t.split("."))[t.length-1];for(i in e)r[i]=e[i];for(i in e.prototype)r.prototype[i]=e.prototype[i];return r}Ml(qh.prototype,{ib:{name:"applyActionCode",j:[Tl("code")]},Qa:{name:"checkActionCode",j:[Tl("code")]},mb:{name:"confirmPasswordReset",j:[Tl("code"),Tl("newPassword")]},dc:{name:"createUserWithEmailAndPassword",j:[Tl("email"),Tl("password")]},gc:{name:"fetchSignInMethodsForEmail",j:[Tl("email")]},qa:{name:"getRedirectResult",j:[]},Ac:{name:"isSignInWithEmailLink",j:[Tl("emailLink")]},Gc:{name:"onAuthStateChanged",j:[Ll(Cl(),Nl(),"nextOrObserver"),Nl("opt_error",!0),Nl("opt_completed",!0)]},Hc:{name:"onIdTokenChanged",j:[Ll(Cl(),Nl(),"nextOrObserver"),Nl("opt_error",!0),Nl("opt_completed",!0)]},ub:{name:"sendPasswordResetEmail",j:[Tl("email"),Ll(Cl("opt_actionCodeSettings",!0),Al(null,!0),"opt_actionCodeSettings",!0)]},vb:{name:"sendSignInLinkToEmail",j:[Tl("email"),Cl("actionCodeSettings")]},wb:{name:"setPersistence",j:[Tl("persistence")]},Rc:{name:"signInAndRetrieveDataWithCredential",j:[kl()]},yb:{name:"signInAnonymously",j:[]},Za:{name:"signInWithCredential",j:[kl()]},Sc:{name:"signInWithCustomToken",j:[Tl("token")]},Tc:{name:"signInWithEmailAndPassword",j:[Tl("email"),Tl("password")]},Uc:{name:"signInWithEmailLink",j:[Tl("email"),Tl("emailLink",!0)]},Vc:{name:"signInWithPhoneNumber",j:[Tl("phoneNumber"),xl()]},Wc:{name:"signInWithPopup",j:[Pl()]},Xc:{name:"signInWithRedirect",j:[Pl()]},cd:{name:"updateCurrentUser",j:[Ll({name:"user",J:"an instance of Firebase User",optional:!1,K:function(t){return!!(t&&t instanceof eh)}},Al(),"user")]},zb:{name:"signOut",j:[]},toJSON:{name:"toJSON",j:[Tl(null,!0)]},ed:{name:"useDeviceLanguage",j:[]},fd:{name:"useEmulator",j:[Tl("url")]},hd:{name:"verifyPasswordResetCode",j:[Tl("code")]}}),Fl(qh.prototype,{lc:{name:"languageCode",jb:Ll(Tl(),Al(),"languageCode")},ti:{name:"tenantId",jb:Ll(Tl(),Al(),"tenantId")}}),(qh.Persistence=Fu).LOCAL="local",qh.Persistence.SESSION="session",qh.Persistence.NONE="none",Ml(eh.prototype,{delete:{name:"delete",j:[]},nc:{name:"getIdTokenResult",j:[Sl("opt_forceRefresh",!0)]},I:{name:"getIdToken",j:[Sl("opt_forceRefresh",!0)]},Bc:{name:"linkAndRetrieveDataWithCredential",j:[kl()]},pb:{name:"linkWithCredential",j:[kl()]},Cc:{name:"linkWithPhoneNumber",j:[Tl("phoneNumber"),xl()]},Dc:{name:"linkWithPopup",j:[Pl()]},Ec:{name:"linkWithRedirect",j:[Pl()]},Kc:{name:"reauthenticateAndRetrieveDataWithCredential",j:[kl()]},sb:{name:"reauthenticateWithCredential",j:[kl()]},Lc:{name:"reauthenticateWithPhoneNumber",j:[Tl("phoneNumber"),xl()]},Mc:{name:"reauthenticateWithPopup",j:[Pl()]},Nc:{name:"reauthenticateWithRedirect",j:[Pl()]},reload:{name:"reload",j:[]},tb:{name:"sendEmailVerification",j:[Ll(Cl("opt_actionCodeSettings",!0),Al(null,!0),"opt_actionCodeSettings",!0)]},toJSON:{name:"toJSON",j:[Tl(null,!0)]},bd:{name:"unlink",j:[Tl("provider")]},Ab:{name:"updateEmail",j:[Tl("email")]},Bb:{name:"updatePassword",j:[Tl("password")]},dd:{name:"updatePhoneNumber",j:[kl("phone")]},Cb:{name:"updateProfile",j:[Cl("profile")]},Db:{name:"verifyBeforeUpdateEmail",j:[Tl("email"),Ll(Cl("opt_actionCodeSettings",!0),Al(null,!0),"opt_actionCodeSettings",!0)]}}),Ml(tl.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),Ml(Zh.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),Ml(le.prototype,{na:{name:"finally"},s:{name:"catch"},then:{name:"then"}}),Fl(xc.prototype,{appVerificationDisabled:{name:"appVerificationDisabledForTesting",jb:Sl("appVerificationDisabledForTesting")}}),Ml(Lc.prototype,{confirm:{name:"confirm",j:[Tl("verificationCode")]}}),Ul(Yi,"fromJSON",function(t){t="string"==typeof t?JSON.parse(t):t;for(var e,n=[no,yo,wo,Zi],r=0;r<n.length;r++)if(e=n[r](t))return e;return null},[Ll(Tl(),Cl(),"json")]),Ul(go,"credential",function(t,e){return new vo(t,e)},[Tl("email"),Tl("password")]),Ml(vo.prototype,{w:{name:"toJSON",j:[Tl(null,!0)]}}),Ml(so.prototype,{Ca:{name:"addScope",j:[Tl("scope")]},Ka:{name:"setCustomParameters",j:[Cl("customOAuthParameters")]}}),Ul(so,"credential",ao,[Ll(Tl(),Cl(),"token")]),Ul(go,"credentialWithLink",mo,[Tl("email"),Tl("emailLink")]),Ml(uo.prototype,{Ca:{name:"addScope",j:[Tl("scope")]},Ka:{name:"setCustomParameters",j:[Cl("customOAuthParameters")]}}),Ul(uo,"credential",co,[Ll(Tl(),Cl(),"token")]),Ml(ho.prototype,{Ca:{name:"addScope",j:[Tl("scope")]},Ka:{name:"setCustomParameters",j:[Cl("customOAuthParameters")]}}),Ul(ho,"credential",lo,[Ll(Tl(),Ll(Cl(),Al()),"idToken"),Ll(Tl(),Al(),"accessToken",!0)]),Ml(fo.prototype,{Ka:{name:"setCustomParameters",j:[Cl("customOAuthParameters")]}}),Ul(fo,"credential",po,[Ll(Tl(),Cl(),"token"),Tl("secret",!0)]),Ml(oo.prototype,{Ca:{name:"addScope",j:[Tl("scope")]},credential:{name:"credential",j:[Ll(Tl(),Ll(Cl(),Al()),"optionsOrIdToken"),Ll(Tl(),Al(),"accessToken",!0)]},Ka:{name:"setCustomParameters",j:[Cl("customOAuthParameters")]}}),Ml(to.prototype,{w:{name:"toJSON",j:[Tl(null,!0)]}}),Ml(Ji.prototype,{w:{name:"toJSON",j:[Tl(null,!0)]}}),Ul(Io,"credential",To,[Tl("verificationId"),Tl("verificationCode")]),Ml(Io.prototype,{eb:{name:"verifyPhoneNumber",j:[Ll(Tl(),{name:"phoneInfoOptions",J:"valid phone info options",optional:!1,K:function(t){return!!t&&(t.session&&t.phoneNumber?Rl(t.session,zi)&&"string"==typeof t.phoneNumber:t.session&&t.multiFactorHint?Rl(t.session,Qi)&&Dl(t.multiFactorHint):t.session&&t.multiFactorUid?Rl(t.session,Qi)&&"string"==typeof t.multiFactorUid:!!t.phoneNumber&&"string"==typeof t.phoneNumber)}},"phoneInfoOptions"),xl()]}}),Ml(bo.prototype,{w:{name:"toJSON",j:[Tl(null,!0)]}}),Ml(I.prototype,{toJSON:{name:"toJSON",j:[Tl(null,!0)]}}),Ml(Do.prototype,{toJSON:{name:"toJSON",j:[Tl(null,!0)]}}),Ml(Ro.prototype,{toJSON:{name:"toJSON",j:[Tl(null,!0)]}}),Ml(qc.prototype,{toJSON:{name:"toJSON",j:[Tl(null,!0)]}}),Ml(Uc.prototype,{Qc:{name:"resolveSignIn",j:[Ol()]}}),Ml(zc.prototype,{Qb:{name:"getSession",j:[]},ec:{name:"enroll",j:[Ol(),Tl("displayName",!0)]},ad:{name:"unenroll",j:[Ll({name:"multiFactorInfo",J:"a valid multiFactorInfo",optional:!1,K:Dl},Tl(),"multiFactorInfoIdentifier")]}}),Ml(wl.prototype,{clear:{name:"clear",j:[]},render:{name:"render",j:[]},verify:{name:"verify",j:[]}}),Ul(ui,"parseLink",yi,[Tl("link")]),Ul(sl,"assertion",function(t){return new Hc(t)},[kl("phone")]),function(){if(void 0===Vl||!Vl.INTERNAL||!Vl.INTERNAL.registerComponent)throw Error("Cannot find the firebase namespace; be sure to include firebase-app.js before this library.");var t={ActionCodeInfo:{Operation:{EMAIL_SIGNIN:Xr,PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:Yr,VERIFY_AND_CHANGE_EMAIL:Jr,VERIFY_EMAIL:"VERIFY_EMAIL"}},Auth:qh,AuthCredential:Yi,Error:I};Ul(t,"EmailAuthProvider",go,[]),Ul(t,"FacebookAuthProvider",so,[]),Ul(t,"GithubAuthProvider",uo,[]),Ul(t,"GoogleAuthProvider",ho,[]),Ul(t,"TwitterAuthProvider",fo,[]),Ul(t,"OAuthProvider",oo,[Tl("providerId")]),Ul(t,"SAMLAuthProvider",io,[Tl("providerId")]),Ul(t,"PhoneAuthProvider",Io,[{name:"auth",J:"an instance of Firebase Auth",optional:!0,K:function(t){return!!(t&&t instanceof qh)}}]),Ul(t,"RecaptchaVerifier",wl,[Ll(Tl(),{name:"",J:"an HTML element",optional:!1,K:function(t){return!!(t&&t instanceof Element)}},"recaptchaContainer"),Cl("recaptchaParameters",!0),{name:"app",J:"an instance of Firebase App",optional:!0,K:function(t){return!!(t&&t instanceof Vl.app.App)}}]),Ul(t,"ActionCodeURL",ui,[]),Ul(t,"PhoneMultiFactorGenerator",sl,[]),Vl.INTERNAL.registerComponent({name:"auth",instanceFactory:function(t){return new qh(t=t.getProvider("app").getImmediate())},multipleInstances:!1,serviceProps:t,instantiationMode:"LAZY",type:"PUBLIC"}),Vl.INTERNAL.registerComponent({name:"auth-internal",instanceFactory:function(t){return{getUid:m((t=t.getProvider("auth").getImmediate()).getUid,t),getToken:m(t.mc,t),addAuthTokenListener:m(t.cc,t),removeAuthTokenListener:m(t.Oc,t)}},multipleInstances:!1,instantiationMode:"LAZY",type:"PRIVATE"}),Vl.registerVersion("@firebase/auth","0.15.2-20201012233953"),Vl.INTERNAL.extendNamespace({User:eh})}()}.apply("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});var Vs=(qs.prototype.set=function(t,e){null==e?this.domStorage_.removeItem(this.prefixedName_(t)):this.domStorage_.setItem(this.prefixedName_(t),Go(e))},qs.prototype.get=function(t){return null==(t=this.domStorage_.getItem(this.prefixedName_(t)))?null:Ho(t)},qs.prototype.remove=function(t){this.domStorage_.removeItem(this.prefixedName_(t))},qs.prototype.prefixedName_=function(t){return this.prefix_+t},qs.prototype.toString=function(){return this.domStorage_.toString()},qs);function qs(t){this.domStorage_=t,this.prefix_="firebase:"}var Bs=(Ws.prototype.set=function(t,e){null==e?delete this.cache_[t]:this.cache_[t]=e},Ws.prototype.get=function(t){return Qo(this.cache_,t)?this.cache_[t]:null},Ws.prototype.remove=function(t){delete this.cache_[t]},Ws);function Ws(){this.cache_={},this.isInMemoryStorage=!0}function Ks(t){var e=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i,o=t.charCodeAt(r);55296<=o&&o<=56319&&(i=o-55296,Io(++r<t.length,"Surrogate pair missing trail surrogate."),o=65536+(i<<10)+(t.charCodeAt(r)-56320)),o<128?e[n++]=o:(o<2048?e[n++]=o>>6|192:(o<65536?e[n++]=o>>12|224:(e[n++]=o>>18|240,e[n++]=o>>12&63|128),e[n++]=o>>6&63|128),e[n++]=63&o|128)}return e}(t);return(t=new $o).update(e),t=t.digest(),So.encodeByteArray(t)}function Hs(t,e){Io(!e||!0===t||!1===t,"Can't turn on custom loggers persistently."),!0===t?(na.logLevel=Es.VERBOSE,oa=na.log.bind(na),e&&ea.set("logging_enabled",!0)):"function"==typeof t?oa=t:(oa=null,ea.remove("logging_enabled"))}function Gs(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE INTERNAL ERROR: "+ia.apply(void 0,mo(t));na.error(n)}function zs(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE FATAL ERROR: "+ia.apply(void 0,mo(t));throw na.error(n),new Error(n)}function Qs(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE WARNING: "+ia.apply(void 0,mo(t));na.warn(n)}function Ys(t){return"number"==typeof t&&(t!=t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)}function Xs(t,e){return t===e?0:t<e?-1:1}function Js(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+Go(e))}function $s(t,e){var n=t.length;if(n<=e)return[t];for(var r=[],i=0;i<n;i+=e)n<i+e?r.push(t.substring(i,n)):r.push(t.substring(i,i+e));return r}var Zs,ta=(Pr=function(t){try{if("undefined"!=typeof window&&void 0!==window[t]){var e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new Vs(e)}}catch(t){}return new Bs})("localStorage"),ea=Pr("sessionStorage"),na=new As("@firebase/database"),ra=(Zs=1,function(){return Zs++}),ia=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n="",r=0;r<t.length;r++){var i=t[r];Array.isArray(i)||i&&"object"==typeof i&&"number"==typeof i.length?n+=ia.apply(null,i):n+="object"==typeof i?Go(i):i,n+=" "}return n},oa=null,sa=!0,aa=function(){for(var t,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];!0===sa&&(sa=!1,null===oa&&!0===ea.get("logging_enabled")&&Hs(!0)),oa&&(t=ia.apply(null,e),oa(t))},ua=function(n){return function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];aa.apply(void 0,mo([n],t))}},ca="[MIN_NAME]",ha="[MAX_NAME]",la=function(t,e){if(t===e)return 0;if(t===ca||e===ha)return-1;if(e===ca||t===ha)return 1;var n=ma(t),r=ma(e);return null!==n?null!==r?n-r==0?t.length-e.length:n-r:-1:null===r&&t<e?-1:1},fa=function(t){if("object"!=typeof t||null===t)return Go(t);var e,n=[];for(e in t)n.push(e);n.sort();for(var r="{",i=0;i<n.length;i++)0!==i&&(r+=","),r+=Go(n[i]),r+=":",r+=fa(t[n[i]]);return r+"}"};function pa(t,e){for(var n in t)t.hasOwnProperty(n)&&e(n,t[n])}function da(t){var e,n,r,i;Io(!Ys(t),"Invalid JSON number"),0===t?e=1/t==-1/(r=n=0)?1:0:(e=t<0,r=(t=Math.abs(t))>=Math.pow(2,-1022)?(n=(i=Math.min(Math.floor(Math.log(t)/Math.LN2),1023))+1023,Math.round(t*Math.pow(2,52-i)-Math.pow(2,52))):(n=0,Math.round(t/Math.pow(2,-1074))));for(var o=[],s=52;s;--s)o.push(r%2?1:0),r=Math.floor(r/2);for(s=11;s;--s)o.push(n%2?1:0),n=Math.floor(n/2);o.push(e?1:0),o.reverse();for(var a=o.join(""),u="",s=0;s<64;s+=8){var c=parseInt(a.substr(s,8),2).toString(16);1===c.length&&(c="0"+c),u+=c}return u.toLowerCase()}function va(t){try{t()}catch(t){setTimeout(function(){throw Qs("Exception was thrown by user callback.",t.stack||""),t},Math.floor(0))}}function ya(t,e){return"object"==typeof(e=setTimeout(t,e))&&e.unref&&e.unref(),e}var ga=new RegExp("^-?(0*)\\d{1,10}$"),ma=function(t){return ga.test(t)&&-2147483648<=(t=Number(t))&&t<=2147483647?t:null},_a=(Object.defineProperty(ba,"Empty",{get:function(){return new ba("")},enumerable:!1,configurable:!0}),ba.prototype.getFront=function(){return this.pieceNum_>=this.pieces_.length?null:this.pieces_[this.pieceNum_]},ba.prototype.getLength=function(){return this.pieces_.length-this.pieceNum_},ba.prototype.popFront=function(){var t=this.pieceNum_;return t<this.pieces_.length&&t++,new ba(this.pieces_,t)},ba.prototype.getBack=function(){return this.pieceNum_<this.pieces_.length?this.pieces_[this.pieces_.length-1]:null},ba.prototype.toString=function(){for(var t="",e=this.pieceNum_;e<this.pieces_.length;e++)""!==this.pieces_[e]&&(t+="/"+this.pieces_[e]);return t||"/"},ba.prototype.toUrlEncodedString=function(){for(var t="",e=this.pieceNum_;e<this.pieces_.length;e++)""!==this.pieces_[e]&&(t+="/"+encodeURIComponent(String(this.pieces_[e])));return t||"/"},ba.prototype.slice=function(t){return void 0===t&&(t=0),this.pieces_.slice(this.pieceNum_+t)},ba.prototype.parent=function(){if(this.pieceNum_>=this.pieces_.length)return null;for(var t=[],e=this.pieceNum_;e<this.pieces_.length-1;e++)t.push(this.pieces_[e]);return new ba(t,0)},ba.prototype.child=function(t){for(var e=[],n=this.pieceNum_;n<this.pieces_.length;n++)e.push(this.pieces_[n]);if(t instanceof ba)for(n=t.pieceNum_;n<t.pieces_.length;n++)e.push(t.pieces_[n]);else for(var r=t.split("/"),n=0;n<r.length;n++)0<r[n].length&&e.push(r[n]);return new ba(e,0)},ba.prototype.isEmpty=function(){return this.pieceNum_>=this.pieces_.length},ba.relativePath=function(t,e){var n=t.getFront(),r=e.getFront();if(null===n)return e;if(n===r)return ba.relativePath(t.popFront(),e.popFront());throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")},ba.comparePaths=function(t,e){for(var n=t.slice(),r=e.slice(),i=0;i<n.length&&i<r.length;i++){var o=la(n[i],r[i]);if(0!==o)return o}return n.length===r.length?0:n.length<r.length?-1:1},ba.prototype.equals=function(t){if(this.getLength()!==t.getLength())return!1;for(var e=this.pieceNum_,n=t.pieceNum_;e<=this.pieces_.length;e++,n++)if(this.pieces_[e]!==t.pieces_[n])return!1;return!0},ba.prototype.contains=function(t){var e=this.pieceNum_,n=t.pieceNum_;if(this.getLength()>t.getLength())return!1;for(;e<this.pieces_.length;){if(this.pieces_[e]!==t.pieces_[n])return!1;++e,++n}return!0},ba);function ba(t,e){if(void 0===e){this.pieces_=t.split("/");for(var n=0,r=0;r<this.pieces_.length;r++)0<this.pieces_[r].length&&(this.pieces_[n]=this.pieces_[r],n++);this.pieces_.length=n,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=e}var wa=(Object.defineProperty(Ea,"MAX_PATH_DEPTH",{get:function(){return 32},enumerable:!1,configurable:!0}),Object.defineProperty(Ea,"MAX_PATH_LENGTH_BYTES",{get:function(){return 768},enumerable:!1,configurable:!0}),Ea.prototype.push=function(t){0<this.parts_.length&&(this.byteLength_+=1),this.parts_.push(t),this.byteLength_+=us(t),this.checkValid_()},Ea.prototype.pop=function(){var t=this.parts_.pop();this.byteLength_-=us(t),0<this.parts_.length&&--this.byteLength_},Ea.prototype.checkValid_=function(){if(this.byteLength_>Ea.MAX_PATH_LENGTH_BYTES)throw new Error(this.errorPrefix_+"has a key path longer than "+Ea.MAX_PATH_LENGTH_BYTES+" bytes ("+this.byteLength_+").");if(this.parts_.length>Ea.MAX_PATH_DEPTH)throw new Error(this.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+Ea.MAX_PATH_DEPTH+") or object contains a cycle "+this.toErrorString())},Ea.prototype.toErrorString=function(){return 0===this.parts_.length?"":"in property '"+this.parts_.join(".")+"'"},Ea);function Ea(t,e){this.errorPrefix_=e,this.parts_=t.slice(),this.byteLength_=Math.max(1,this.parts_.length);for(var n=0;n<this.parts_.length;n++)this.byteLength_+=us(this.parts_[n]);this.checkValid_()}var Ia="firebaseio.com",Ta="websocket",Sa="long_polling",Ca=(Na.prototype.needsQueryParam=function(){return this.host!==this.internalHost||this.isCustomHost()||this.includeNamespaceInQueryParams},Na.prototype.isCacheableHost=function(){return"s-"===this.internalHost.substr(0,2)},Na.prototype.isDemoHost=function(){return"firebaseio-demo.com"===this.domain},Na.prototype.isCustomHost=function(){return"firebaseio.com"!==this.domain&&"firebaseio-demo.com"!==this.domain},Na.prototype.updateHost=function(t){t!==this.internalHost&&(this.internalHost=t,this.isCacheableHost()&&ta.set("host:"+this.host,this.internalHost))},Na.prototype.connectionURL=function(t,e){var n;if(Io("string"==typeof t,"typeof type must == string"),Io("object"==typeof e,"typeof params must == object"),t===Ta)n=(this.secure?"wss://":"ws://")+this.internalHost+"/.ws?";else{if(t!==Sa)throw new Error("Unknown connection type: "+t);n=(this.secure?"https://":"http://")+this.internalHost+"/.lp?"}this.needsQueryParam()&&(e.ns=this.namespace);var r=[];return pa(e,function(t,e){r.push(t+"="+e)}),n+r.join("&")},Na.prototype.toString=function(){var t=this.toURLString();return this.persistenceKey&&(t+="<"+this.persistenceKey+">"),t},Na.prototype.toURLString=function(){return(this.secure?"https://":"http://")+this.host},Na);function Na(t,e,n,r,i,o,s){void 0===i&&(i=!1),void 0===o&&(o=""),void 0===s&&(s=!1),this.secure=e,this.namespace=n,this.webSocketOnly=r,this.nodeAdmin=i,this.persistenceKey=o,this.includeNamespaceInQueryParams=s,this.host=t.toLowerCase(),this.domain=this.host.substr(this.host.indexOf(".")+1),this.internalHost=ta.get("host:"+t)||this.host}function Aa(t,e){var i,o,s,n,r,a,u,c,h,l,f,p,c=(l=!(h=c=u=a=r=""),f="https",p=443,"string"==typeof(i=t)&&(0<=(n=i.indexOf("//"))&&(f=i.substring(0,n-1),i=i.substring(n+2)),-1===(o=i.indexOf("/"))&&(o=i.length),-1===(s=i.indexOf("?"))&&(s=i.length),r=i.substring(0,Math.min(o,s)),o<s&&(c=function(){for(var t="",e=i.substring(o,s).split("/"),n=0;n<e.length;n++)if(0<e[n].length){var r=e[n];try{r=decodeURIComponent(r.replace(/\+/g," "))}catch(t){}t+="/"+r}return t}()),s=function(t){var e,n,r={};"?"===t.charAt(0)&&(t=t.substring(1));try{for(var i=yo(t.split("&")),o=i.next();!o.done;o=i.next()){var s,a=o.value;0!==a.length&&(2===(s=a.split("=")).length?r[decodeURIComponent(s[0])]=decodeURIComponent(s[1]):Qs("Invalid query segment '"+a+"' in query '"+t+"'"))}}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}(i.substring(Math.min(i.length,s))),0<=(n=r.indexOf(":"))?(l="https"===f||"wss"===f,p=parseInt(r.substring(n+1),10)):n=r.length,"localhost"===(n=r.slice(0,n)).toLowerCase()?a="localhost":n.split(".").length<=2?a=n:(n=r.indexOf("."),u=r.substring(0,n).toLowerCase(),a=r.substring(n+1),h=u),"ns"in s&&(h=s.ns)),{host:r,port:p,domain:a,subdomain:u,secure:l,scheme:f,pathString:c,namespace:h}),h=c.namespace;return"firebase.com"===c.domain&&zs(c.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),h&&"undefined"!==h||"localhost"===c.domain||zs("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),c.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&Qs("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new Ca(c.host,c.secure,h,e,t="ws"===c.scheme||"wss"===c.scheme,"",h!==c.subdomain),path:new _a(c.pathString)}}function ka(t){return"string"==typeof t&&0!==t.length&&!Va.test(t)}function Oa(t){return"string"==typeof t&&0!==t.length&&!qa.test(t)}function Pa(t){return null===t||"string"==typeof t||"number"==typeof t&&!Ys(t)||t&&"object"==typeof t&&Qo(t,".sv")}function Ra(t,e,n,r,i){i&&void 0===n||Wa(os(t,e,i),n,r)}function Da(t,e,n,r,i){if(!i||void 0!==n){var o=os(t,e,i);if(!n||"object"!=typeof n||Array.isArray(n))throw new Error(o+" must be an object containing the children to replace.");var s=[];pa(n,function(t,e){if(t=new _a(t),Wa(o,e,r.child(t)),".priority"===t.getBack()&&!Pa(e))throw new Error(o+"contains an invalid value for '"+t.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");s.push(t)}),function(t,e){for(var n,r=0;r<e.length;r++)for(var i=(n=e[r]).slice(),o=0;o<i.length;o++)if((".priority"!==i[o]||o!==i.length-1)&&!ka(i[o]))throw new Error(t+"contains an invalid key ("+i[o]+") in path "+n.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');e.sort(_a.comparePaths);for(var s=null,r=0;r<e.length;r++){if(n=e[r],null!==s&&s.contains(n))throw new Error(t+"contains a path "+s.toString()+" that is ancestor of another path "+n.toString());s=n}}(o,s)}}function xa(t,e,n,r){if(!r||void 0!==n){if(Ys(n))throw new Error(os(t,e,r)+"is "+n.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!Pa(n))throw new Error(os(t,e,r)+"must be a valid Firebase priority (a string, finite number, server value, or null).")}}function La(t,e,n,r){if(!r||void 0!==n)switch(n){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error(os(t,e,r)+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}function Ma(t,e,n,r){if(!(r&&void 0===n||ka(n)))throw new Error(os(t,e,r)+'was an invalid key = "'+n+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')}function Fa(t,e,n,r){if(!(r&&void 0===n||Oa(n)))throw new Error(os(t,e,r)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')}function Ua(t,e){if(".info"===e.getFront())throw new Error(t+" failed = Can't modify data under /.info/")}function ja(t,e,n){var r=n.path.toString();if("string"!=typeof n.repoInfo.host||0===n.repoInfo.host.length||!ka(n.repoInfo.namespace)&&"localhost"!==n.repoInfo.host.split(":")[0]||0!==r.length&&!Oa(r=r&&r.replace(/^\/*\.info(\/|$)/,"/")))throw new Error(os(t,e,!1)+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')}var Va=/[\[\].#$\/\u0000-\u001F\u007F]/,qa=/[\[\].#$\u0000-\u001F\u007F]/,Ba=10485760,Wa=function(n,t,e){var r=e instanceof _a?new wa(e,n):e;if(void 0===t)throw new Error(n+"contains undefined "+r.toErrorString());if("function"==typeof t)throw new Error(n+"contains a function "+r.toErrorString()+" with contents = "+t.toString());if(Ys(t))throw new Error(n+"contains "+t.toString()+" "+r.toErrorString());if("string"==typeof t&&t.length>Ba/3&&us(t)>Ba)throw new Error(n+"contains a string greater than "+Ba+" utf8 bytes "+r.toErrorString()+" ('"+t.substring(0,50)+"...')");if(t&&"object"==typeof t){var i=!1,o=!1;if(pa(t,function(t,e){if(".value"===t)i=!0;else if(".priority"!==t&&".sv"!==t&&(o=!0,!ka(t)))throw new Error(n+" contains an invalid key ("+t+") "+r.toErrorString()+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');r.push(t),Wa(n,e,r),r.pop()}),i&&o)throw new Error(n+' contains ".value" child '+r.toErrorString()+" in addition to actual children.")}},Ka=(Ha.prototype.cancel=function(t){is("OnDisconnect.cancel",0,1,arguments.length),ss("OnDisconnect.cancel",1,t,!0);var e=new Ao;return this.repo_.onDisconnectCancel(this.path_,e.wrapCallback(t)),e.promise},Ha.prototype.remove=function(t){is("OnDisconnect.remove",0,1,arguments.length),Ua("OnDisconnect.remove",this.path_),ss("OnDisconnect.remove",1,t,!0);var e=new Ao;return this.repo_.onDisconnectSet(this.path_,null,e.wrapCallback(t)),e.promise},Ha.prototype.set=function(t,e){is("OnDisconnect.set",1,2,arguments.length),Ua("OnDisconnect.set",this.path_),Ra("OnDisconnect.set",1,t,this.path_,!1),ss("OnDisconnect.set",2,e,!0);var n=new Ao;return this.repo_.onDisconnectSet(this.path_,t,n.wrapCallback(e)),n.promise},Ha.prototype.setWithPriority=function(t,e,n){is("OnDisconnect.setWithPriority",2,3,arguments.length),Ua("OnDisconnect.setWithPriority",this.path_),Ra("OnDisconnect.setWithPriority",1,t,this.path_,!1),xa("OnDisconnect.setWithPriority",2,e,!1),ss("OnDisconnect.setWithPriority",3,n,!0);var r=new Ao;return this.repo_.onDisconnectSetWithPriority(this.path_,t,e,r.wrapCallback(n)),r.promise},Ha.prototype.update=function(t,e){if(is("OnDisconnect.update",1,2,arguments.length),Ua("OnDisconnect.update",this.path_),Array.isArray(t)){for(var n={},r=0;r<t.length;++r)n[""+r]=t[r];t=n,Qs("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Da("OnDisconnect.update",1,t,this.path_,!1),ss("OnDisconnect.update",2,e,!0);var i=new Ao;return this.repo_.onDisconnectUpdate(this.path_,t,i.wrapCallback(e)),i.promise},Ha);function Ha(t,e){this.repo_=t,this.path_=e}var Ga=(za.prototype.toJSON=function(){return is("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}},za);function za(t,e){this.committed=t,this.snapshot=e}var Qa,Ya,Xa,Ja=(Qa="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",Ya=0,Xa=[],function(t){var e=t===Ya;Ya=t;for(var n=new Array(8),r=7;0<=r;r--)n[r]=Qa.charAt(t%64),t=Math.floor(t/64);Io(0===t,"Cannot push at time == 0");var i=n.join("");if(e){for(r=11;0<=r&&63===Xa[r];r--)Xa[r]=0;Xa[r]++}else for(r=0;r<12;r++)Xa[r]=Math.floor(64*Math.random());for(r=0;r<12;r++)i+=Qa.charAt(Xa[r]);return Io(20===i.length,"nextPushId: Length should be 20."),i}),$a=(Za.Wrap=function(t,e){return new Za(t,e)},Za);function Za(t,e){this.name=t,this.node=e}var tu,K=(eu.prototype.getCompare=function(){return this.compare.bind(this)},eu.prototype.indexedValueChanged=function(t,e){return t=new $a(ca,t),e=new $a(ca,e),0!==this.compare(t,e)},eu.prototype.minPost=function(){return $a.MIN},eu);function eu(){}var nu,ru=(lo(iu,nu=K),Object.defineProperty(iu,"__EMPTY_NODE",{get:function(){return tu},set:function(t){tu=t},enumerable:!1,configurable:!0}),iu.prototype.compare=function(t,e){return la(t.name,e.name)},iu.prototype.isDefinedOn=function(t){throw To("KeyIndex.isDefinedOn not expected to be called.")},iu.prototype.indexedValueChanged=function(t,e){return!1},iu.prototype.minPost=function(){return $a.MIN},iu.prototype.maxPost=function(){return new $a(ha,tu)},iu.prototype.makePost=function(t,e){return Io("string"==typeof t,"KeyIndex indexValue must always be a string."),new $a(t,tu)},iu.prototype.toString=function(){return".key"},iu);function iu(){return null!==nu&&nu.apply(this,arguments)||this}var ou,su=new ru;function au(t){return"number"==typeof t?"number:"+da(t):"string:"+t}var uu,cu,hu,lu,fu=function(t){var e;t.isLeafNode()?(e=t.val(),Io("string"==typeof e||"number"==typeof e||"object"==typeof e&&Qo(e,".sv"),"Priority must be a string or number.")):Io(t===ou||t.isEmpty(),"priority of unexpected type."),Io(t===ou||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")},pu=(Object.defineProperty(du,"__childrenNodeConstructor",{get:function(){return uu},set:function(t){uu=t},enumerable:!1,configurable:!0}),du.prototype.isLeafNode=function(){return!0},du.prototype.getPriority=function(){return this.priorityNode_},du.prototype.updatePriority=function(t){return new du(this.value_,t)},du.prototype.getImmediateChild=function(t){return".priority"===t?this.priorityNode_:du.__childrenNodeConstructor.EMPTY_NODE},du.prototype.getChild=function(t){return t.isEmpty()?this:".priority"===t.getFront()?this.priorityNode_:du.__childrenNodeConstructor.EMPTY_NODE},du.prototype.hasChild=function(){return!1},du.prototype.getPredecessorChildName=function(t,e){return null},du.prototype.updateImmediateChild=function(t,e){return".priority"===t?this.updatePriority(e):e.isEmpty()&&".priority"!==t?this:du.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,e).updatePriority(this.priorityNode_)},du.prototype.updateChild=function(t,e){var n=t.getFront();return null===n?e:e.isEmpty()&&".priority"!==n?this:(Io(".priority"!==n||1===t.getLength(),".priority must be the last token in a path"),this.updateImmediateChild(n,du.__childrenNodeConstructor.EMPTY_NODE.updateChild(t.popFront(),e)))},du.prototype.isEmpty=function(){return!1},du.prototype.numChildren=function(){return 0},du.prototype.forEachChild=function(t,e){return!1},du.prototype.val=function(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()},du.prototype.hash=function(){var t,e;return null===this.lazyHash_&&(t="",this.priorityNode_.isEmpty()||(t+="priority:"+au(this.priorityNode_.val())+":"),t+=(e=typeof this.value_)+":",t+="number"==e?da(this.value_):this.value_,this.lazyHash_=Ks(t)),this.lazyHash_},du.prototype.getValue=function(){return this.value_},du.prototype.compareTo=function(t){return t===du.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof du.__childrenNodeConstructor?-1:(Io(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))},du.prototype.compareToLeafNode_=function(t){var e=typeof t.value_,n=typeof this.value_,r=du.VALUE_TYPE_ORDER.indexOf(e),i=du.VALUE_TYPE_ORDER.indexOf(n);return Io(0<=r,"Unknown leaf type: "+e),Io(0<=i,"Unknown leaf type: "+n),r===i?"object"==n?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:i-r},du.prototype.withIndex=function(){return this},du.prototype.isIndexed=function(){return!0},du.prototype.equals=function(t){return t===this||!!t.isLeafNode()&&this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)},du.VALUE_TYPE_ORDER=["object","boolean","number","string"],du);function du(t,e){void 0===e&&(e=du.__childrenNodeConstructor.EMPTY_NODE),this.value_=t,this.priorityNode_=e,this.lazyHash_=null,Io(void 0!==this.value_&&null!==this.value_,"LeafNode shouldn't be created with null/undefined value."),fu(this.priorityNode_)}function vu(){return null!==lu&&lu.apply(this,arguments)||this}var yu=(lo(vu,lu=K),vu.prototype.compare=function(t,e){var n=t.node.getPriority(),r=e.node.getPriority();return 0===(r=n.compareTo(r))?la(t.name,e.name):r},vu.prototype.isDefinedOn=function(t){return!t.getPriority().isEmpty()},vu.prototype.indexedValueChanged=function(t,e){return!t.getPriority().equals(e.getPriority())},vu.prototype.minPost=function(){return $a.MIN},vu.prototype.maxPost=function(){return new $a(ha,new pu("[PRIORITY-POST]",hu))},vu.prototype.makePost=function(t,e){return t=cu(t),new $a(e,new pu("[PRIORITY-POST]",t))},vu.prototype.toString=function(){return".priority"},new vu),gu=(mu.prototype.getNext=function(){if(0===this.nodeStack_.length)return null;var t=this.nodeStack_.pop(),e=this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value};if(this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return e},mu.prototype.hasNext=function(){return 0<this.nodeStack_.length},mu.prototype.peek=function(){if(0===this.nodeStack_.length)return null;var t=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value}},mu);function mu(t,e,n,r,i){void 0===i&&(i=null),this.isReverse_=r,this.resultGenerator_=i,this.nodeStack_=[];for(var o=1;!t.isEmpty();)if(o=e?n(t.key,e):1,r&&(o*=-1),o<0)t=this.isReverse_?t.left:t.right;else{if(0===o){this.nodeStack_.push(t);break}this.nodeStack_.push(t),t=this.isReverse_?t.right:t.left}}var _u=(bu.prototype.copy=function(t,e,n,r,i){return new bu(null!=t?t:this.key,null!=e?e:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)},bu.prototype.count=function(){return this.left.count()+1+this.right.count()},bu.prototype.isEmpty=function(){return!1},bu.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)},bu.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},bu.prototype.min_=function(){return this.left.isEmpty()?this:this.left.min_()},bu.prototype.minKey=function(){return this.min_().key},bu.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},bu.prototype.insert=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n))).fixUp_()},bu.prototype.removeMin_=function(){if(this.left.isEmpty())return Eu.EMPTY_NODE;var t=this;return t.left.isRed_()||t.left.left.isRed_()||(t=t.moveRedLeft_()),(t=t.copy(null,null,null,t.left.removeMin_(),null)).fixUp_()},bu.prototype.remove=function(t,e){var n,r=this;if(e(t,r.key)<0)r.left.isEmpty()||r.left.isRed_()||r.left.left.isRed_()||(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.remove(t,e),null);else{if(r.left.isRed_()&&(r=r.rotateRight_()),r.right.isEmpty()||r.right.isRed_()||r.right.left.isRed_()||(r=r.moveRedRight_()),0===e(t,r.key)){if(r.right.isEmpty())return Eu.EMPTY_NODE;n=r.right.min_(),r=r.copy(n.key,n.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(t,e))}return r.fixUp_()},bu.prototype.isRed_=function(){return this.color},bu.prototype.fixUp_=function(){var t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t},bu.prototype.moveRedLeft_=function(){var t=this.colorFlip_();return t.right.left.isRed_()&&(t=(t=(t=t.copy(null,null,null,null,t.right.rotateRight_())).rotateLeft_()).colorFlip_()),t},bu.prototype.moveRedRight_=function(){var t=this.colorFlip_();return t.left.left.isRed_()&&(t=(t=t.rotateRight_()).colorFlip_()),t},bu.prototype.rotateLeft_=function(){var t=this.copy(null,null,bu.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)},bu.prototype.rotateRight_=function(){var t=this.copy(null,null,bu.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)},bu.prototype.colorFlip_=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},bu.prototype.checkMaxDepth_=function(){var t=this.check_();return Math.pow(2,t)<=this.count()+1},bu.prototype.check_=function(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");var t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)},bu.RED=!0,bu.BLACK=!1,bu);function bu(t,e,n,r,i){this.key=t,this.value=e,this.color=null!=n?n:bu.RED,this.left=null!=r?r:Eu.EMPTY_NODE,this.right=null!=i?i:Eu.EMPTY_NODE}function wu(){}wu.prototype.copy=function(t,e,n,r,i){return this},wu.prototype.insert=function(t,e,n){return new _u(t,e,null)},wu.prototype.remove=function(t,e){return this},wu.prototype.count=function(){return 0},wu.prototype.isEmpty=function(){return!0},wu.prototype.inorderTraversal=function(t){return!1},wu.prototype.reverseTraversal=function(t){return!1},wu.prototype.minKey=function(){return null},wu.prototype.maxKey=function(){return null},wu.prototype.check_=function(){return 0},wu.prototype.isRed_=function(){return!1},L=wu;var Eu=(Iu.prototype.insert=function(t,e){return new Iu(this.comparator_,this.root_.insert(t,e,this.comparator_).copy(null,null,_u.BLACK,null,null))},Iu.prototype.remove=function(t){return new Iu(this.comparator_,this.root_.remove(t,this.comparator_).copy(null,null,_u.BLACK,null,null))},Iu.prototype.get=function(t){for(var e,n=this.root_;!n.isEmpty();){if(0===(e=this.comparator_(t,n.key)))return n.value;e<0?n=n.left:0<e&&(n=n.right)}return null},Iu.prototype.getPredecessorKey=function(t){for(var e,n=this.root_,r=null;!n.isEmpty();){if(0===(e=this.comparator_(t,n.key))){if(n.left.isEmpty())return r?r.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}e<0?n=n.left:0<e&&(n=(r=n).right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")},Iu.prototype.isEmpty=function(){return this.root_.isEmpty()},Iu.prototype.count=function(){return this.root_.count()},Iu.prototype.minKey=function(){return this.root_.minKey()},Iu.prototype.maxKey=function(){return this.root_.maxKey()},Iu.prototype.inorderTraversal=function(t){return this.root_.inorderTraversal(t)},Iu.prototype.reverseTraversal=function(t){return this.root_.reverseTraversal(t)},Iu.prototype.getIterator=function(t){return new gu(this.root_,null,this.comparator_,!1,t)},Iu.prototype.getIteratorFrom=function(t,e){return new gu(this.root_,t,this.comparator_,!1,e)},Iu.prototype.getReverseIteratorFrom=function(t,e){return new gu(this.root_,t,this.comparator_,!0,e)},Iu.prototype.getReverseIterator=function(t){return new gu(this.root_,null,this.comparator_,!0,t)},Iu.EMPTY_NODE=new L,Iu);function Iu(t,e){void 0===e&&(e=Iu.EMPTY_NODE),this.comparator_=t,this.root_=e}var Tu=Math.log(2),Su=(Cu.prototype.nextBitIsOne=function(){var t=!(this.bits_&1<<this.current_);return this.current_--,t},Cu);function Cu(t){this.count=(e=t+1,parseInt(Math.log(e)/Tu,10)),this.current_=this.count-1;var e=(e=this.count,parseInt(Array(e+1).join("1"),2));this.bits_=t+1&e}var Nu,Au,ku=function(c,t,h,e){c.sort(t);var l=function(t,e){if(0==(n=e-t))return null;if(1==n)return r=c[t],i=h?h(r):r,new _u(i,r.node,_u.BLACK,null,null);var n=parseInt(n/2,10)+t,t=l(t,n),e=l(n+1,e),r=c[n],i=h?h(r):r;return new _u(i,r.node,_u.BLACK,t,e)},n=function(t){for(var e=null,n=null,i=c.length,r=function(t,e){var n=i-t,r=i;i-=t,t=l(1+n,r),r=c[n],n=h?h(r):r,o(new _u(n,r.node,e,null,t))},o=function(t){e=e?e.left=t:n=t},s=0;s<t.count;++s){var a=t.nextBitIsOne(),u=Math.pow(2,t.count-(s+1));a?r(u,_u.BLACK):(r(u,_u.BLACK),r(u,_u.RED))}return n}(new Su(c.length));return new Eu(e||t,n)},Ou={},Pu=(Object.defineProperty(Ru,"Default",{get:function(){return Io(yu,"ChildrenNode.ts has not been loaded"),Nu=Nu||new Ru({".priority":Ou},{".priority":yu})},enumerable:!1,configurable:!0}),Ru.prototype.get=function(t){var e=Yo(this.indexes_,t);if(!e)throw new Error("No index defined for "+t);return e instanceof Eu?e:null},Ru.prototype.hasIndex=function(t){return Qo(this.indexSet_,t.toString())},Ru.prototype.addIndex=function(t,e){Io(t!==su,"KeyIndex always exists and isn't meant to be added to the IndexMap.");for(var n,r=[],i=!1,o=e.getIterator($a.Wrap),s=o.getNext();s;)i=i||t.isDefinedOn(s.node),r.push(s),s=o.getNext();n=i?ku(r,t.getCompare()):Ou;var a=t.toString(),u=fo({},this.indexSet_);return u[a]=t,(e=fo({},this.indexes_))[a]=n,new Ru(e,u)},Ru.prototype.addToIndexes=function(s,a){var u=this;return new Ru(Jo(this.indexes_,function(t,e){var n=Yo(u.indexSet_,e);if(Io(n,"Missing index implementation for "+e),t!==Ou)return(n=a.get(s.name))&&(t=t.remove(new $a(s.name,n))),t.insert(s,s.node);if(n.isDefinedOn(s.node)){for(var r=[],i=a.getIterator($a.Wrap),o=i.getNext();o;)o.name!==s.name&&r.push(o),o=i.getNext();return r.push(s),ku(r,n.getCompare())}return Ou}),this.indexSet_)},Ru.prototype.removeFromIndexes=function(n,r){return new Ru(Jo(this.indexes_,function(t){if(t===Ou)return t;var e=r.get(n.name);return e?t.remove(new $a(n.name,e)):t}),this.indexSet_)},Ru);function Ru(t,e){this.indexes_=t,this.indexSet_=e}function Du(t,e){return la(t.name,e.name)}function xu(t,e){return la(t,e)}var Lu,Mu=(Object.defineProperty(Fu,"EMPTY_NODE",{get:function(){return Au=Au||new Fu(new Eu(xu),null,Pu.Default)},enumerable:!1,configurable:!0}),Fu.prototype.isLeafNode=function(){return!1},Fu.prototype.getPriority=function(){return this.priorityNode_||Au},Fu.prototype.updatePriority=function(t){return this.children_.isEmpty()?this:new Fu(this.children_,t,this.indexMap_)},Fu.prototype.getImmediateChild=function(t){return".priority"===t?this.getPriority():null===(t=this.children_.get(t))?Au:t},Fu.prototype.getChild=function(t){var e=t.getFront();return null===e?this:this.getImmediateChild(e).getChild(t.popFront())},Fu.prototype.hasChild=function(t){return null!==this.children_.get(t)},Fu.prototype.updateImmediateChild=function(t,e){if(Io(e,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(e);var n=new $a(t,e),r=void 0,i=e.isEmpty()?(r=this.children_.remove(t),this.indexMap_.removeFromIndexes(n,this.children_)):(r=this.children_.insert(t,e),this.indexMap_.addToIndexes(n,this.children_)),n=r.isEmpty()?Au:this.priorityNode_;return new Fu(r,n,i)},Fu.prototype.updateChild=function(t,e){var n=t.getFront();return null===n?e:(Io(".priority"!==t.getFront()||1===t.getLength(),".priority must be the last token in a path"),e=this.getImmediateChild(n).updateChild(t.popFront(),e),this.updateImmediateChild(n,e))},Fu.prototype.isEmpty=function(){return this.children_.isEmpty()},Fu.prototype.numChildren=function(){return this.children_.count()},Fu.prototype.val=function(n){if(this.isEmpty())return null;var r={},i=0,o=0,s=!0;if(this.forEachChild(yu,function(t,e){r[t]=e.val(n),i++,s&&Fu.INTEGER_REGEXP_.test(t)?o=Math.max(o,Number(t)):s=!1}),!n&&s&&o<2*i){var t,e=[];for(t in r)e[t]=r[t];return e}return n&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r},Fu.prototype.hash=function(){var n;return null===this.lazyHash_&&(n="",this.getPriority().isEmpty()||(n+="priority:"+au(this.getPriority().val())+":"),this.forEachChild(yu,function(t,e){""!==(e=e.hash())&&(n+=":"+t+":"+e)}),this.lazyHash_=""===n?"":Ks(n)),this.lazyHash_},Fu.prototype.getPredecessorChildName=function(t,e,n){return(n=this.resolveIndex_(n))?(e=n.getPredecessorKey(new $a(t,e)))?e.name:null:this.children_.getPredecessorKey(t)},Fu.prototype.getFirstChildName=function(t){return(t=this.resolveIndex_(t))?(t=t.minKey())&&t.name:this.children_.minKey()},Fu.prototype.getFirstChild=function(t){return(t=this.getFirstChildName(t))?new $a(t,this.children_.get(t)):null},Fu.prototype.getLastChildName=function(t){return(t=this.resolveIndex_(t))?(t=t.maxKey())&&t.name:this.children_.maxKey()},Fu.prototype.getLastChild=function(t){return(t=this.getLastChildName(t))?new $a(t,this.children_.get(t)):null},Fu.prototype.forEachChild=function(t,e){return(t=this.resolveIndex_(t))?t.inorderTraversal(function(t){return e(t.name,t.node)}):this.children_.inorderTraversal(e)},Fu.prototype.getIterator=function(t){return this.getIteratorFrom(t.minPost(),t)},Fu.prototype.getIteratorFrom=function(t,e){var n=this.resolveIndex_(e);if(n)return n.getIteratorFrom(t,function(t){return t});for(var r=this.children_.getIteratorFrom(t.name,$a.Wrap),i=r.peek();null!=i&&e.compare(i,t)<0;)r.getNext(),i=r.peek();return r},Fu.prototype.getReverseIterator=function(t){return this.getReverseIteratorFrom(t.maxPost(),t)},Fu.prototype.getReverseIteratorFrom=function(t,e){var n=this.resolveIndex_(e);if(n)return n.getReverseIteratorFrom(t,function(t){return t});for(var r=this.children_.getReverseIteratorFrom(t.name,$a.Wrap),i=r.peek();null!=i&&0<e.compare(i,t);)r.getNext(),i=r.peek();return r},Fu.prototype.compareTo=function(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===ju?-1:0},Fu.prototype.withIndex=function(t){return t===su||this.indexMap_.hasIndex(t)?this:(t=this.indexMap_.addIndex(t,this.children_),new Fu(this.children_,this.priorityNode_,t))},Fu.prototype.isIndexed=function(t){return t===su||this.indexMap_.hasIndex(t)},Fu.prototype.equals=function(t){if(t===this)return!0;if(t.isLeafNode())return!1;if(this.getPriority().equals(t.getPriority())){if(this.children_.count()!==t.children_.count())return!1;for(var e=this.getIterator(yu),n=t.getIterator(yu),r=e.getNext(),i=n.getNext();r&&i;){if(r.name!==i.name||!r.node.equals(i.node))return!1;r=e.getNext(),i=n.getNext()}return null===r&&null===i}return!1},Fu.prototype.resolveIndex_=function(t){return t===su?null:this.indexMap_.get(t.toString())},Fu.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,Fu);function Fu(t,e,n){this.children_=t,this.priorityNode_=e,this.indexMap_=n,this.lazyHash_=null,this.priorityNode_&&fu(this.priorityNode_),this.children_.isEmpty()&&Io(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}function Uu(){return Lu.call(this,new Eu(xu),Mu.EMPTY_NODE,Pu.Default)||this}var ju=(lo(Uu,Lu=Mu),Uu.prototype.compareTo=function(t){return t===this?0:1},Uu.prototype.equals=function(t){return t===this},Uu.prototype.getPriority=function(){return this},Uu.prototype.getImmediateChild=function(t){return Mu.EMPTY_NODE},Uu.prototype.isEmpty=function(){return!1},new Uu);Object.defineProperties($a,{MIN:{value:new $a(ca,Mu.EMPTY_NODE)},MAX:{value:new $a(ha,ju)}}),ru.__EMPTY_NODE=Mu.EMPTY_NODE,pu.__childrenNodeConstructor=Mu,hu=ou=ju;var Vu,qu=!0;function Bu(n,t){if(void 0===t&&(t=null),null===n)return Mu.EMPTY_NODE;if("object"==typeof n&&".priority"in n&&(t=n[".priority"]),Io(null===t||"string"==typeof t||"number"==typeof t||"object"==typeof t&&".sv"in t,"Invalid priority type found: "+typeof t),"object"==typeof n&&".value"in n&&null!==n[".value"]&&(n=n[".value"]),"object"!=typeof n||".sv"in n)return new pu(n,Bu(t));if(n instanceof Array||!qu){var r=Mu.EMPTY_NODE;return pa(n,function(t,e){Qo(n,t)&&"."!==t.substring(0,1)&&(!(e=Bu(e)).isLeafNode()&&e.isEmpty()||(r=r.updateImmediateChild(t,e)))}),r.updatePriority(Bu(t))}var i=[],o=!1;if(pa(n,function(t,e){"."!==t.substring(0,1)&&((e=Bu(e)).isEmpty()||(o=o||!e.getPriority().isEmpty(),i.push(new $a(t,e))))}),0===i.length)return Mu.EMPTY_NODE;var e=ku(i,Du,function(t){return t.name},xu);if(o){var s=ku(i,yu.getCompare());return new Mu(e,Bu(t),new Pu({".priority":s},{".priority":yu}))}return new Mu(e,Bu(t),Pu.Default)}function Wu(){return null!==Vu&&Vu.apply(this,arguments)||this}cu=Bu;var Ku,Hu=(lo(Wu,Vu=K),Wu.prototype.compare=function(t,e){var n=t.node.compareTo(e.node);return 0===n?la(t.name,e.name):n},Wu.prototype.isDefinedOn=function(t){return!0},Wu.prototype.indexedValueChanged=function(t,e){return!t.equals(e)},Wu.prototype.minPost=function(){return $a.MIN},Wu.prototype.maxPost=function(){return $a.MAX},Wu.prototype.makePost=function(t,e){return t=Bu(t),new $a(e,t)},Wu.prototype.toString=function(){return".value"},new Wu),Gu=(lo(zu,Ku=K),zu.prototype.extractChild=function(t){return t.getChild(this.indexPath_)},zu.prototype.isDefinedOn=function(t){return!t.getChild(this.indexPath_).isEmpty()},zu.prototype.compare=function(t,e){var n=this.extractChild(t.node),r=this.extractChild(e.node);return 0===(r=n.compareTo(r))?la(t.name,e.name):r},zu.prototype.makePost=function(t,e){return t=Bu(t),t=Mu.EMPTY_NODE.updateChild(this.indexPath_,t),new $a(e,t)},zu.prototype.maxPost=function(){var t=Mu.EMPTY_NODE.updateChild(this.indexPath_,ju);return new $a(ha,t)},zu.prototype.toString=function(){return this.indexPath_.slice().join("/")},zu);function zu(t){var e=Ku.call(this)||this;return e.indexPath_=t,Io(!t.isEmpty()&&".priority"!==t.getFront(),"Can't create PathIndex with empty path or .priority key"),e}var Qu=(Yu.prototype.val=function(){return is("DataSnapshot.val",0,0,arguments.length),this.node_.val()},Yu.prototype.exportVal=function(){return is("DataSnapshot.exportVal",0,0,arguments.length),this.node_.val(!0)},Yu.prototype.toJSON=function(){return is("DataSnapshot.toJSON",0,1,arguments.length),this.exportVal()},Yu.prototype.exists=function(){return is("DataSnapshot.exists",0,0,arguments.length),!this.node_.isEmpty()},Yu.prototype.child=function(t){is("DataSnapshot.child",0,1,arguments.length),Fa("DataSnapshot.child",1,t=String(t),!1);var e=new _a(t),t=this.ref_.child(e);return new Yu(this.node_.getChild(e),t,yu)},Yu.prototype.hasChild=function(t){return is("DataSnapshot.hasChild",1,1,arguments.length),Fa("DataSnapshot.hasChild",1,t,!1),t=new _a(t),!this.node_.getChild(t).isEmpty()},Yu.prototype.getPriority=function(){return is("DataSnapshot.getPriority",0,0,arguments.length),this.node_.getPriority().val()},Yu.prototype.forEach=function(n){var r=this;return is("DataSnapshot.forEach",1,1,arguments.length),ss("DataSnapshot.forEach",1,n,!1),!this.node_.isLeafNode()&&!!this.node_.forEachChild(this.index_,function(t,e){return n(new Yu(e,r.ref_.child(t),yu))})},Yu.prototype.hasChildren=function(){return is("DataSnapshot.hasChildren",0,0,arguments.length),!this.node_.isLeafNode()&&!this.node_.isEmpty()},Object.defineProperty(Yu.prototype,"key",{get:function(){return this.ref_.getKey()},enumerable:!1,configurable:!0}),Yu.prototype.numChildren=function(){return is("DataSnapshot.numChildren",0,0,arguments.length),this.node_.numChildren()},Yu.prototype.getRef=function(){return is("DataSnapshot.ref",0,0,arguments.length),this.ref_},Object.defineProperty(Yu.prototype,"ref",{get:function(){return this.getRef()},enumerable:!1,configurable:!0}),Yu);function Yu(t,e,n){this.node_=t,this.ref_=e,this.index_=n}var Xu=(Ju.prototype.getPath=function(){var t=this.snapshot.getRef();return("value"===this.eventType?t:t.getParent()).path},Ju.prototype.getEventType=function(){return this.eventType},Ju.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},Ju.prototype.toString=function(){return this.getPath().toString()+":"+this.eventType+":"+Go(this.snapshot.exportVal())},Ju);function Ju(t,e,n,r){this.eventType=t,this.eventRegistration=e,this.snapshot=n,this.prevName=r}var $u=(Zu.prototype.getPath=function(){return this.path},Zu.prototype.getEventType=function(){return"cancel"},Zu.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},Zu.prototype.toString=function(){return this.path.toString()+":cancel"},Zu);function Zu(t,e,n){this.eventRegistration=t,this.error=e,this.path=n}var tc=(ec.prototype.respondsTo=function(t){return"value"===t},ec.prototype.createEvent=function(t,e){var n=e.getQueryParams().getIndex();return new Xu("value",this,new Qu(t.snapshotNode,e.getRef(),n))},ec.prototype.getEventRunner=function(t){var e=this.context_;if("cancel"===t.getEventType()){Io(this.cancelCallback_,"Raising a cancel event on a listener with no cancel callback");var n=this.cancelCallback_;return function(){n.call(e,t.error)}}var r=this.callback_;return function(){r.call(e,t.snapshot)}},ec.prototype.createCancelEvent=function(t,e){return this.cancelCallback_?new $u(this,t,e):null},ec.prototype.matches=function(t){return t instanceof ec&&(!t.callback_||!this.callback_||t.callback_===this.callback_&&t.context_===this.context_)},ec.prototype.hasAnyCallback=function(){return null!==this.callback_},ec);function ec(t,e,n){this.callback_=t,this.cancelCallback_=e,this.context_=n}var nc,rc=(ic.prototype.respondsTo=function(t){return t="children_removed"===(t="children_added"===t?"child_added":t)?"child_removed":t,Qo(this.callbacks_,t)},ic.prototype.createCancelEvent=function(t,e){return this.cancelCallback_?new $u(this,t,e):null},ic.prototype.createEvent=function(t,e){Io(null!=t.childName,"Child events should have a childName.");var n=e.getRef().child(t.childName),e=e.getQueryParams().getIndex();return new Xu(t.type,this,new Qu(t.snapshotNode,n,e),t.prevName)},ic.prototype.getEventRunner=function(t){var e=this.context_;if("cancel"===t.getEventType()){Io(this.cancelCallback_,"Raising a cancel event on a listener with no cancel callback");var n=this.cancelCallback_;return function(){n.call(e,t.error)}}var r=this.callbacks_[t.eventType];return function(){r.call(e,t.snapshot,t.prevName)}},ic.prototype.matches=function(e){var n=this;if(e instanceof ic){if(!this.callbacks_||!e.callbacks_)return!0;if(this.context_===e.context_){var t=Object.keys(e.callbacks_),r=Object.keys(this.callbacks_),i=t.length;if(i===r.length)return 1!==i?r.every(function(t){return e.callbacks_[t]===n.callbacks_[t]}):(t=t[0],!((r=r[0])!==t||e.callbacks_[t]&&this.callbacks_[r]&&e.callbacks_[t]!==this.callbacks_[r]))}}return!1},ic.prototype.hasAnyCallback=function(){return null!==this.callbacks_},ic);function ic(t,e,n){this.callbacks_=t,this.cancelCallback_=e,this.context_=n}Object.defineProperty(oc,"__referenceConstructor",{get:function(){return Io(nc,"Reference.ts has not been loaded"),nc},set:function(t){nc=t},enumerable:!1,configurable:!0}),oc.validateQueryEndpoints_=function(t){var e=null,n=null;if(t.hasStart()&&(e=t.getIndexStartValue()),t.hasEnd()&&(n=t.getIndexEndValue()),t.getIndex()===su){var r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), endAt(),or equalTo() must be a string.";if(t.hasStart()){if(t.getIndexStartName()!==ca)throw new Error(r);if("string"!=typeof e)throw new Error(i)}if(t.hasEnd()){if(t.getIndexEndName()!==ha)throw new Error(r);if("string"!=typeof n)throw new Error(i)}}else if(t.getIndex()===yu){if(null!=e&&!Pa(e)||null!=n&&!Pa(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), endAt(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(Io(t.getIndex()instanceof Gu||t.getIndex()===Hu,"unknown index type."),null!=e&&"object"==typeof e||null!=n&&"object"==typeof n)throw new Error("Query: First argument passed to startAt(), endAt(), or equalTo() cannot be an object.")},oc.validateLimit_=function(t){if(t.hasStart()&&t.hasEnd()&&t.hasLimit()&&!t.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), endAt(), and limit(). Use limitToFirst() or limitToLast() instead.")},oc.prototype.validateNoPreviousOrderByCall_=function(t){if(!0===this.orderByCalled_)throw new Error(t+": You can't combine multiple orderBy calls.")},oc.prototype.getQueryParams=function(){return this.queryParams_},oc.prototype.getRef=function(){return is("Query.ref",0,0,arguments.length),new oc.__referenceConstructor(this.repo,this.path)},oc.prototype.on=function(t,e,n,r){return is("Query.on",2,4,arguments.length),La("Query.on",1,t,!1),ss("Query.on",2,e,!1),n=oc.getCancelAndContextArgs_("Query.on",n,r),"value"===t?this.onValueEvent(e,n.cancel,n.context):((r={})[t]=e,this.onChildEvent(r,n.cancel,n.context)),e},oc.prototype.onValueEvent=function(t,e,n){n=new tc(t,e||null,n||null),this.repo.addEventCallbackForQuery(this,n)},oc.prototype.onChildEvent=function(t,e,n){n=new rc(t,e,n),this.repo.addEventCallbackForQuery(this,n)},oc.prototype.off=function(t,e,n){is("Query.off",0,3,arguments.length),La("Query.off",1,t,!0),ss("Query.off",2,e,!0),as("Query.off",3,n,!0);var r=null,i=null;"value"===t?r=new tc(e||null,null,n||null):t&&(e&&((i={})[t]=e),r=new rc(i,null,n||null)),this.repo.removeEventCallbackForQuery(this,r)},oc.prototype.once=function(e,n,t,r){var i=this;is("Query.once",1,4,arguments.length),La("Query.once",1,e,!1),ss("Query.once",2,n,!0);var o=oc.getCancelAndContextArgs_("Query.once",t,r),s=!0,a=new Ao;a.promise.catch(function(){});var u=function(t){s&&(s=!1,i.off(e,u),n&&n.bind(o.context)(t),a.resolve(t))};return this.on(e,u,function(t){i.off(e,u),o.cancel&&o.cancel.bind(o.context)(t),a.reject(t)}),a.promise},oc.prototype.limitToFirst=function(t){if(is("Query.limitToFirst",1,1,arguments.length),"number"!=typeof t||Math.floor(t)!==t||t<=0)throw new Error("Query.limitToFirst: First argument must be a positive integer.");if(this.queryParams_.hasLimit())throw new Error("Query.limitToFirst: Limit was already set (by another call to limit, limitToFirst, or limitToLast).");return new oc(this.repo,this.path,this.queryParams_.limitToFirst(t),this.orderByCalled_)},oc.prototype.limitToLast=function(t){if(is("Query.limitToLast",1,1,arguments.length),"number"!=typeof t||Math.floor(t)!==t||t<=0)throw new Error("Query.limitToLast: First argument must be a positive integer.");if(this.queryParams_.hasLimit())throw new Error("Query.limitToLast: Limit was already set (by another call to limit, limitToFirst, or limitToLast).");return new oc(this.repo,this.path,this.queryParams_.limitToLast(t),this.orderByCalled_)},oc.prototype.orderByChild=function(t){if(is("Query.orderByChild",1,1,arguments.length),"$key"===t)throw new Error('Query.orderByChild: "$key" is invalid.  Use Query.orderByKey() instead.');if("$priority"===t)throw new Error('Query.orderByChild: "$priority" is invalid.  Use Query.orderByPriority() instead.');if("$value"===t)throw new Error('Query.orderByChild: "$value" is invalid.  Use Query.orderByValue() instead.');if(Fa("Query.orderByChild",1,t,!1),this.validateNoPreviousOrderByCall_("Query.orderByChild"),(t=new _a(t)).isEmpty())throw new Error("Query.orderByChild: cannot pass in empty path.  Use Query.orderByValue() instead.");return t=new Gu(t),t=this.queryParams_.orderBy(t),oc.validateQueryEndpoints_(t),new oc(this.repo,this.path,t,!0)},oc.prototype.orderByKey=function(){is("Query.orderByKey",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByKey");var t=this.queryParams_.orderBy(su);return oc.validateQueryEndpoints_(t),new oc(this.repo,this.path,t,!0)},oc.prototype.orderByPriority=function(){is("Query.orderByPriority",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByPriority");var t=this.queryParams_.orderBy(yu);return oc.validateQueryEndpoints_(t),new oc(this.repo,this.path,t,!0)},oc.prototype.orderByValue=function(){is("Query.orderByValue",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByValue");var t=this.queryParams_.orderBy(Hu);return oc.validateQueryEndpoints_(t),new oc(this.repo,this.path,t,!0)},oc.prototype.startAt=function(t,e){void 0===t&&(t=null),is("Query.startAt",0,2,arguments.length),Ra("Query.startAt",1,t,this.path,!0),Ma("Query.startAt",2,e,!0);var n=this.queryParams_.startAt(t,e);if(oc.validateLimit_(n),oc.validateQueryEndpoints_(n),this.queryParams_.hasStart())throw new Error("Query.startAt: Starting point was already set (by another call to startAt or equalTo).");return void 0===t&&(e=t=null),new oc(this.repo,this.path,n,this.orderByCalled_)},oc.prototype.endAt=function(t,e){if(void 0===t&&(t=null),is("Query.endAt",0,2,arguments.length),Ra("Query.endAt",1,t,this.path,!0),Ma("Query.endAt",2,e,!0),e=this.queryParams_.endAt(t,e),oc.validateLimit_(e),oc.validateQueryEndpoints_(e),this.queryParams_.hasEnd())throw new Error("Query.endAt: Ending point was already set (by another call to endAt or equalTo).");return new oc(this.repo,this.path,e,this.orderByCalled_)},oc.prototype.equalTo=function(t,e){if(is("Query.equalTo",1,2,arguments.length),Ra("Query.equalTo",1,t,this.path,!1),Ma("Query.equalTo",2,e,!0),this.queryParams_.hasStart())throw new Error("Query.equalTo: Starting point was already set (by another call to startAt or equalTo).");if(this.queryParams_.hasEnd())throw new Error("Query.equalTo: Ending point was already set (by another call to endAt or equalTo).");return this.startAt(t,e).endAt(t,e)},oc.prototype.toString=function(){return is("Query.toString",0,0,arguments.length),this.repo.toString()+this.path.toUrlEncodedString()},oc.prototype.toJSON=function(){return is("Query.toJSON",0,1,arguments.length),this.toString()},oc.prototype.queryObject=function(){return this.queryParams_.getQueryObject()},oc.prototype.queryIdentifier=function(){var t=this.queryObject();return"{}"===(t=fa(t))?"default":t},oc.prototype.isEqual=function(t){if(is("Query.isEqual",1,1,arguments.length),!(t instanceof oc))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");var e=this.repo===t.repo,n=this.path.equals(t.path),t=this.queryIdentifier()===t.queryIdentifier();return e&&n&&t},oc.getCancelAndContextArgs_=function(t,e,n){var r={cancel:null,context:null};if(e&&n)r.cancel=e,ss(t,3,r.cancel,!0),r.context=n,as(t,4,r.context,!0);else if(e)if("object"==typeof e&&null!==e)r.context=e;else{if("function"!=typeof e)throw new Error(os(t,3,!0)+" must either be a cancel callback or a context object.");r.cancel=e}return r},Object.defineProperty(oc.prototype,"ref",{get:function(){return this.getRef()},enumerable:!1,configurable:!0}),ao=oc;function oc(t,e,n,r){this.repo=t,this.path=e,this.queryParams_=n,this.orderByCalled_=r}var sc=(ac.prototype.getImmediateChild=function(t){return new ac(this.node_.getImmediateChild(t))},ac.prototype.node=function(){return this.node_},ac);function ac(t){this.node_=t}var uc=(cc.prototype.getImmediateChild=function(t){return t=this.path_.child(t),new cc(this.syncTree_,t)},cc.prototype.node=function(){return this.syncTree_.calcCompleteEventCache(this.path_)},cc);function cc(t,e){this.syncTree_=t,this.path_=e}function hc(t,e,n,r){return vc(e,new uc(n,t),r)}function lc(t,e,n){return vc(t,new sc(e),n)}var fc=function(t,e,n){return t&&"object"==typeof t?(Io(".sv"in t,"Unexpected leaf node or priority contents"),"string"==typeof t[".sv"]?pc(t[".sv"],e,n):"object"==typeof t[".sv"]?dc(t[".sv"],e):void Io(!1,"Unexpected server value: "+JSON.stringify(t,null,2))):t},pc=function(t,e,n){if("timestamp"===t)return n.timestamp;Io(!1,"Unexpected server value: "+t)},dc=function(t,e,n){return t.hasOwnProperty("increment")||Io(!1,"Unexpected server value: "+JSON.stringify(t,null,2)),"number"!=typeof(t=t.increment)&&Io(!1,"Unexpected increment value: "+t),e=e.node(),Io(null!=e,"Expected ChildrenNode.EMPTY_NODE for nulls"),!e.isLeafNode()||"number"!=typeof(e=e.getValue())?t:e+t};function vc(t,r,i){var e=t.getPriority().val(),n=fc(e,r.getImmediateChild(".priority"),i);if(t.isLeafNode()){var o=t;return(e=fc(o.getValue(),r,i))!==o.getValue()||n!==o.getPriority().val()?new pu(e,Bu(n)):t}var s=t=t;return n!==t.getPriority().val()&&(s=s.updatePriority(new pu(n))),t.forEachChild(yu,function(t,e){var n=vc(e,r.getImmediateChild(t),i);n!==e&&(s=s.updateImmediateChild(t,n))}),s}var yc,gc=(mc.prototype.find=function(t){if(null!=this.value)return this.value.getChild(t);if(!t.isEmpty()&&0<this.children.size){var e=t.getFront();return t=t.popFront(),this.children.has(e)?this.children.get(e).find(t):null}return null},mc.prototype.remember=function(t,e){var n;t.isEmpty()?(this.value=e,this.children.clear()):null!==this.value?this.value=this.value.updateChild(t,e):(n=t.getFront(),this.children.has(n)||this.children.set(n,new mc),n=this.children.get(n),t=t.popFront(),n.remember(t,e))},mc.prototype.forget=function(t){if(t.isEmpty())return this.value=null,this.children.clear(),!0;if(null===this.value)return!(0<this.children.size)||(e=t.getFront(),t=t.popFront(),this.children.has(e)&&this.children.get(e).forget(t)&&this.children.delete(e),0===this.children.size);if(this.value.isLeafNode())return!1;var e=this.value;this.value=null;var n=this;return e.forEachChild(yu,function(t,e){n.remember(new _a(t),e)}),this.forget(t)},mc.prototype.forEachTree=function(n,r){null!==this.value?r(n,this.value):this.forEachChild(function(t,e){t=new _a(n.toString()+"/"+t),e.forEachTree(t,r)})},mc.prototype.forEachChild=function(n){this.children.forEach(function(t,e){n(e,t)})},mc);function mc(){this.value=null,this.children=new Map}(Pr=yc={})[Pr.OVERWRITE=0]="OVERWRITE",Pr[Pr.MERGE=1]="MERGE",Pr[Pr.ACK_USER_WRITE=2]="ACK_USER_WRITE",Pr[Pr.LISTEN_COMPLETE=3]="LISTEN_COMPLETE";var _c=(bc.User=new bc(!0,!1,null,!1),bc.Server=new bc(!1,!0,null,!1),bc.forServerTaggedQuery=function(t){return new bc(!1,!0,t,!0)},bc);function bc(t,e,n,r){this.fromUser=t,this.fromServer=e,this.queryId=n,this.tagged=r,Io(!r||e,"Tagged queries must be from server.")}var wc,Ec=(Ic.prototype.operationForChild=function(t){if(this.path.isEmpty()){if(null!=this.affectedTree.value)return Io(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;var e=this.affectedTree.subtree(new _a(t));return new Ic(_a.Empty,e,this.revert)}return Io(this.path.getFront()===t,"operationForChild called for unrelated child."),new Ic(this.path.popFront(),this.affectedTree,this.revert)},Ic);function Ic(t,e,n){this.path=t,this.affectedTree=e,this.revert=n,this.type=yc.ACK_USER_WRITE,this.source=_c.User}var Tc=(Sc.fromObject=function(t){var n=Sc.Empty;return pa(t,function(t,e){n=n.set(new _a(t),e)}),n},Sc.prototype.isEmpty=function(){return null===this.value&&this.children.isEmpty()},Sc.prototype.findRootMostMatchingPathAndValue=function(t,e){if(null!=this.value&&e(this.value))return{path:_a.Empty,value:this.value};if(t.isEmpty())return null;var n=t.getFront(),r=this.children.get(n);return null===r||null==(e=r.findRootMostMatchingPathAndValue(t.popFront(),e))?null:{path:new _a(n).child(e.path),value:e.value}},Sc.prototype.findRootMostValueAndPath=function(t){return this.findRootMostMatchingPathAndValue(t,function(){return!0})},Sc.prototype.subtree=function(t){if(t.isEmpty())return this;var e=t.getFront();return null!==(e=this.children.get(e))?e.subtree(t.popFront()):Sc.Empty},Sc.prototype.set=function(t,e){if(t.isEmpty())return new Sc(e,this.children);var n=t.getFront(),e=(this.children.get(n)||Sc.Empty).set(t.popFront(),e),e=this.children.insert(n,e);return new Sc(this.value,e)},Sc.prototype.remove=function(t){if(t.isEmpty())return this.children.isEmpty()?Sc.Empty:new Sc(null,this.children);var e=t.getFront(),n=this.children.get(e);return n?(n=n.remove(t.popFront()),t=void 0,t=n.isEmpty()?this.children.remove(e):this.children.insert(e,n),null===this.value&&t.isEmpty()?Sc.Empty:new Sc(this.value,t)):this},Sc.prototype.get=function(t){if(t.isEmpty())return this.value;var e=t.getFront();return(e=this.children.get(e))?e.get(t.popFront()):null},Sc.prototype.setTree=function(t,e){if(t.isEmpty())return e;var n=t.getFront(),t=(this.children.get(n)||Sc.Empty).setTree(t.popFront(),e),e=void 0,e=t.isEmpty()?this.children.remove(n):this.children.insert(n,t);return new Sc(this.value,e)},Sc.prototype.fold=function(t){return this.fold_(_a.Empty,t)},Sc.prototype.fold_=function(n,r){var i={};return this.children.inorderTraversal(function(t,e){i[t]=e.fold_(n.child(t),r)}),r(n,this.value,i)},Sc.prototype.findOnPath=function(t,e){return this.findOnPath_(t,_a.Empty,e)},Sc.prototype.findOnPath_=function(t,e,n){var r=!!this.value&&n(e,this.value);if(r)return r;if(t.isEmpty())return null;var i=t.getFront();return(r=this.children.get(i))?r.findOnPath_(t.popFront(),e.child(i),n):null},Sc.prototype.foreachOnPath=function(t,e){return this.foreachOnPath_(t,_a.Empty,e)},Sc.prototype.foreachOnPath_=function(t,e,n){if(t.isEmpty())return this;this.value&&n(e,this.value);var r=t.getFront(),i=this.children.get(r);return i?i.foreachOnPath_(t.popFront(),e.child(r),n):Sc.Empty},Sc.prototype.foreach=function(t){this.foreach_(_a.Empty,t)},Sc.prototype.foreach_=function(n,r){this.children.inorderTraversal(function(t,e){e.foreach_(n.child(t),r)}),this.value&&r(n,this.value)},Sc.prototype.foreachChild=function(n){this.children.inorderTraversal(function(t,e){e.value&&n(t,e.value)})},Sc.Empty=new Sc(null),Sc);function Sc(t,e){void 0===e&&(e=wc=wc||new Eu(Xs)),this.value=t,this.children=e}var Cc=(Nc.prototype.operationForChild=function(t){return this.path.isEmpty()?new Nc(this.source,_a.Empty):new Nc(this.source,this.path.popFront())},Nc);function Nc(t,e){this.source=t,this.path=e,this.type=yc.LISTEN_COMPLETE}var Ac=(kc.prototype.operationForChild=function(t){return this.path.isEmpty()?new kc(this.source,_a.Empty,this.snap.getImmediateChild(t)):new kc(this.source,this.path.popFront(),this.snap)},kc);function kc(t,e,n){this.source=t,this.path=e,this.snap=n,this.type=yc.OVERWRITE}var Oc=(Pc.prototype.operationForChild=function(t){if(this.path.isEmpty()){var e=this.children.subtree(new _a(t));return e.isEmpty()?null:e.value?new Ac(this.source,_a.Empty,e.value):new Pc(this.source,_a.Empty,e)}return Io(this.path.getFront()===t,"Can't get a merge for a child not on the path of the operation"),new Pc(this.source,this.path.popFront(),this.children)},Pc.prototype.toString=function(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"},Pc);function Pc(t,e,n){this.source=t,this.path=e,this.children=n,this.type=yc.MERGE}var Rc=(Dc.prototype.isFullyInitialized=function(){return this.fullyInitialized_},Dc.prototype.isFiltered=function(){return this.filtered_},Dc.prototype.isCompleteForPath=function(t){return t.isEmpty()?this.isFullyInitialized()&&!this.filtered_:(t=t.getFront(),this.isCompleteForChild(t))},Dc.prototype.isCompleteForChild=function(t){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(t)},Dc.prototype.getNode=function(){return this.node_},Dc);function Dc(t,e,n){this.node_=t,this.fullyInitialized_=e,this.filtered_=n}var xc=(Lc.prototype.updateEventSnap=function(t,e,n){return new Lc(new Rc(t,e,n),this.serverCache_)},Lc.prototype.updateServerSnap=function(t,e,n){return new Lc(this.eventCache_,new Rc(t,e,n))},Lc.prototype.getEventCache=function(){return this.eventCache_},Lc.prototype.getCompleteEventSnap=function(){return this.eventCache_.isFullyInitialized()?this.eventCache_.getNode():null},Lc.prototype.getServerCache=function(){return this.serverCache_},Lc.prototype.getCompleteServerSnap=function(){return this.serverCache_.isFullyInitialized()?this.serverCache_.getNode():null},Lc.Empty=new Lc(new Rc(Mu.EMPTY_NODE,!1,!1),new Rc(Mu.EMPTY_NODE,!1,!1)),Lc);function Lc(t,e){this.eventCache_=t,this.serverCache_=e}var Mc=(Fc.valueChange=function(t){return new Fc(Fc.VALUE,t)},Fc.childAddedChange=function(t,e){return new Fc(Fc.CHILD_ADDED,e,t)},Fc.childRemovedChange=function(t,e){return new Fc(Fc.CHILD_REMOVED,e,t)},Fc.childChangedChange=function(t,e,n){return new Fc(Fc.CHILD_CHANGED,e,t,n)},Fc.childMovedChange=function(t,e){return new Fc(Fc.CHILD_MOVED,e,t)},Fc.CHILD_ADDED="child_added",Fc.CHILD_REMOVED="child_removed",Fc.CHILD_CHANGED="child_changed",Fc.CHILD_MOVED="child_moved",Fc.VALUE="value",Fc);function Fc(t,e,n,r,i){this.type=t,this.snapshotNode=e,this.childName=n,this.oldSnap=r,this.prevName=i}var Uc=(jc.prototype.updateChild=function(t,e,n,r,i,o){Io(t.isIndexed(this.index_),"A node must be indexed if only a child is updated");var s=t.getImmediateChild(e);return s.getChild(r).equals(n.getChild(r))&&s.isEmpty()===n.isEmpty()?t:(null!=o&&(n.isEmpty()?t.hasChild(e)?o.trackChildChange(Mc.childRemovedChange(e,s)):Io(t.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):s.isEmpty()?o.trackChildChange(Mc.childAddedChange(e,n)):o.trackChildChange(Mc.childChangedChange(e,n,s))),t.isLeafNode()&&n.isEmpty()?t:t.updateImmediateChild(e,n).withIndex(this.index_))},jc.prototype.updateFullNode=function(r,n,i){return null!=i&&(r.isLeafNode()||r.forEachChild(yu,function(t,e){n.hasChild(t)||i.trackChildChange(Mc.childRemovedChange(t,e))}),n.isLeafNode()||n.forEachChild(yu,function(t,e){var n;r.hasChild(t)?(n=r.getImmediateChild(t)).equals(e)||i.trackChildChange(Mc.childChangedChange(t,e,n)):i.trackChildChange(Mc.childAddedChange(t,e))})),n.withIndex(this.index_)},jc.prototype.updatePriority=function(t,e){return t.isEmpty()?Mu.EMPTY_NODE:t.updatePriority(e)},jc.prototype.filtersNodes=function(){return!1},jc.prototype.getIndexedFilter=function(){return this},jc.prototype.getIndex=function(){return this.index_},jc);function jc(t){this.index_=t}var Vc=(qc.prototype.trackChildChange=function(t){var e=t.type,n=t.childName;Io(e===Mc.CHILD_ADDED||e===Mc.CHILD_CHANGED||e===Mc.CHILD_REMOVED,"Only child changes supported for tracking"),Io(".priority"!==n,"Only non-priority child changes can be tracked.");var r=this.changeMap.get(n);if(r){var i=r.type;if(e===Mc.CHILD_ADDED&&i===Mc.CHILD_REMOVED)this.changeMap.set(n,Mc.childChangedChange(n,t.snapshotNode,r.snapshotNode));else if(e===Mc.CHILD_REMOVED&&i===Mc.CHILD_ADDED)this.changeMap.delete(n);else if(e===Mc.CHILD_REMOVED&&i===Mc.CHILD_CHANGED)this.changeMap.set(n,Mc.childRemovedChange(n,r.oldSnap));else if(e===Mc.CHILD_CHANGED&&i===Mc.CHILD_ADDED)this.changeMap.set(n,Mc.childAddedChange(n,t.snapshotNode));else{if(e!==Mc.CHILD_CHANGED||i!==Mc.CHILD_CHANGED)throw To("Illegal combination of changes: "+t+" occurred after "+r);this.changeMap.set(n,Mc.childChangedChange(n,t.snapshotNode,r.oldSnap))}}else this.changeMap.set(n,t)},qc.prototype.getChanges=function(){return Array.from(this.changeMap.values())},qc);function qc(){this.changeMap=new Map}function Bc(){}var Wc=(Bc.prototype.getCompleteChild=function(t){return null},Bc.prototype.getChildAfterChild=function(t,e,n){return null},new Bc),Kc=(Hc.prototype.getCompleteChild=function(t){var e=this.viewCache_.getEventCache();return e.isCompleteForChild(t)?e.getNode().getImmediateChild(t):(e=null!=this.optCompleteServerCache_?new Rc(this.optCompleteServerCache_,!0,!1):this.viewCache_.getServerCache(),this.writes_.calcCompleteChild(t,e))},Hc.prototype.getChildAfterChild=function(t,e,n){var r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:this.viewCache_.getCompleteServerSnap();return 0===(t=this.writes_.calcIndexedSlice(r,e,1,n,t)).length?null:t[0]},Hc);function Hc(t,e,n){void 0===n&&(n=null),this.writes_=t,this.viewCache_=e,this.optCompleteServerCache_=n}function Gc(t,e){this.viewCache=t,this.changes=e}var zc=(Qc.prototype.assertIndexed=function(t){Io(t.getEventCache().getNode().isIndexed(this.filter_.getIndex()),"Event snap not indexed"),Io(t.getServerCache().getNode().isIndexed(this.filter_.getIndex()),"Server snap not indexed")},Qc.prototype.applyOperation=function(t,e,n,r){var i=new Vc;if(e.type===yc.OVERWRITE)var o=e,s=o.source.fromUser?this.applyUserOverwrite_(t,o.path,o.snap,n,r,i):(Io(o.source.fromServer,"Unknown source."),a=o.source.tagged||t.getServerCache().isFiltered()&&!o.path.isEmpty(),this.applyServerOverwrite_(t,o.path,o.snap,n,r,a,i));else if(e.type===yc.MERGE)s=(o=e).source.fromUser?this.applyUserMerge_(t,o.path,o.children,n,r,i):(Io(o.source.fromServer,"Unknown source."),a=o.source.tagged||t.getServerCache().isFiltered(),this.applyServerMerge_(t,o.path,o.children,n,r,a,i));else if(e.type===yc.ACK_USER_WRITE)var a=e,s=a.revert?this.revertUserWrite_(t,a.path,n,r,i):this.ackUserWrite_(t,a.path,a.affectedTree,n,r,i);else{if(e.type!==yc.LISTEN_COMPLETE)throw To("Unknown operation type: "+e.type);s=this.listenComplete_(t,e.path,n,i)}return i=i.getChanges(),Qc.maybeAddValueEvent_(t,s,i),new Gc(s,i)},Qc.maybeAddValueEvent_=function(t,e,n){var r,i,o=e.getEventCache();o.isFullyInitialized()&&(r=o.getNode().isLeafNode()||o.getNode().isEmpty(),i=t.getCompleteEventSnap(),(0<n.length||!t.getEventCache().isFullyInitialized()||r&&!o.getNode().equals(i)||!o.getNode().getPriority().equals(i.getPriority()))&&n.push(Mc.valueChange(e.getCompleteEventSnap())))},Qc.prototype.generateEventCacheAfterServerEvent_=function(t,e,n,r,i){var o=t.getEventCache();if(null!=n.shadowingWrite(e))return t;var s,a,u,c,h=void 0,l=e.isEmpty()?(Io(t.getServerCache().isFullyInitialized(),"If change path is empty, we must have complete server data"),t.getServerCache().isFiltered()?(s=(s=t.getCompleteServerSnap())instanceof Mu?s:Mu.EMPTY_NODE,s=n.calcCompleteEventChildren(s),this.filter_.updateFullNode(t.getEventCache().getNode(),s,i)):(a=n.calcCompleteEventCache(t.getCompleteServerSnap()),this.filter_.updateFullNode(t.getEventCache().getNode(),a,i))):".priority"===(a=e.getFront())?(Io(1===e.getLength(),"Can't have a priority with additional path components"),u=o.getNode(),h=t.getServerCache().getNode(),null!=(c=n.calcEventCacheAfterServerOverwrite(e,u,h))?this.filter_.updatePriority(u,c):o.getNode()):(u=e.popFront(),c=void 0,null!=(c=o.isCompleteForChild(a)?(h=t.getServerCache().getNode(),null!=(h=n.calcEventCacheAfterServerOverwrite(e,o.getNode(),h))?o.getNode().getImmediateChild(a).updateChild(u,h):o.getNode().getImmediateChild(a)):n.calcCompleteChild(a,t.getServerCache()))?this.filter_.updateChild(o.getNode(),a,c,u,r,i):o.getNode());return t.updateEventSnap(l,o.isFullyInitialized()||e.isEmpty(),this.filter_.filtersNodes())},Qc.prototype.applyServerOverwrite_=function(t,e,n,r,i,o,s){var a=t.getServerCache(),u=o?this.filter_:this.filter_.getIndexedFilter();if(e.isEmpty())h=u.updateFullNode(a.getNode(),n,null);else if(u.filtersNodes()&&!a.isFiltered())var c=a.getNode().updateChild(e,n),h=u.updateFullNode(a.getNode(),c,null);else{if(o=e.getFront(),!a.isCompleteForPath(e)&&1<e.getLength())return t;c=e.popFront(),n=a.getNode().getImmediateChild(o).updateChild(c,n),h=".priority"===o?u.updatePriority(a.getNode(),n):u.updateChild(a.getNode(),o,n,c,Wc,null)}return u=t.updateServerSnap(h,a.isFullyInitialized()||e.isEmpty(),u.filtersNodes()),i=new Kc(r,u,i),this.generateEventCacheAfterServerEvent_(u,e,r,i,s)},Qc.prototype.applyUserOverwrite_=function(t,e,n,r,i,o){var s,a,u=t.getEventCache(),c=new Kc(r,t,i);return e.isEmpty()?(a=this.filter_.updateFullNode(t.getEventCache().getNode(),n,o),t.updateEventSnap(a,!0,this.filter_.filtersNodes())):".priority"===(s=e.getFront())?(a=this.filter_.updatePriority(t.getEventCache().getNode(),n),t.updateEventSnap(a,u.isFullyInitialized(),u.isFiltered())):(r=e.popFront(),i=u.getNode().getImmediateChild(s),a=void 0,a=r.isEmpty()?n:null!=(e=c.getCompleteChild(s))?".priority"===r.getBack()&&e.getChild(r.parent()).isEmpty()?e:e.updateChild(r,n):Mu.EMPTY_NODE,i.equals(a)?t:(o=this.filter_.updateChild(u.getNode(),s,a,r,c,o),t.updateEventSnap(o,u.isFullyInitialized(),this.filter_.filtersNodes())))},Qc.cacheHasChild_=function(t,e){return t.getEventCache().isCompleteForChild(e)},Qc.prototype.applyUserMerge_=function(n,r,t,i,o,s){var a=this,u=n;return t.foreach(function(t,e){t=r.child(t),Qc.cacheHasChild_(n,t.getFront())&&(u=a.applyUserOverwrite_(u,t,e,i,o,s))}),t.foreach(function(t,e){t=r.child(t),Qc.cacheHasChild_(n,t.getFront())||(u=a.applyUserOverwrite_(u,t,e,i,o,s))}),u},Qc.prototype.applyMerge_=function(n,t){return t.foreach(function(t,e){n=n.updateChild(t,e)}),n},Qc.prototype.applyServerMerge_=function(r,t,e,i,o,s,a){var u=this;if(r.getServerCache().getNode().isEmpty()&&!r.getServerCache().isFullyInitialized())return r;var c=r,e=t.isEmpty()?e:Tc.Empty.setTree(t,e),h=r.getServerCache().getNode();return e.children.inorderTraversal(function(t,e){var n;h.hasChild(t)&&(n=r.getServerCache().getNode().getImmediateChild(t),e=u.applyMerge_(n,e),c=u.applyServerOverwrite_(c,new _a(t),e,i,o,s,a))}),e.children.inorderTraversal(function(t,e){var n=!r.getServerCache().isCompleteForChild(t)&&null==e.value;h.hasChild(t)||n||(n=r.getServerCache().getNode().getImmediateChild(t),e=u.applyMerge_(n,e),c=u.applyServerOverwrite_(c,new _a(t),e,i,o,s,a))}),c},Qc.prototype.ackUserWrite_=function(t,r,e,n,i,o){if(null!=n.shadowingWrite(r))return t;var s=t.getServerCache().isFiltered(),a=t.getServerCache();if(null!=e.value){if(r.isEmpty()&&a.isFullyInitialized()||a.isCompleteForPath(r))return this.applyServerOverwrite_(t,r,a.getNode().getChild(r),n,i,s,o);if(r.isEmpty()){var u=Tc.Empty;return a.getNode().forEachChild(su,function(t,e){u=u.set(new _a(t),e)}),this.applyServerMerge_(t,r,u,n,i,s,o)}return t}var c=Tc.Empty;return e.foreach(function(t,e){var n=r.child(t);a.isCompleteForPath(n)&&(c=c.set(t,a.getNode().getChild(n)))}),this.applyServerMerge_(t,r,c,n,i,s,o)},Qc.prototype.listenComplete_=function(t,e,n,r){var i=t.getServerCache(),i=t.updateServerSnap(i.getNode(),i.isFullyInitialized()||e.isEmpty(),i.isFiltered());return this.generateEventCacheAfterServerEvent_(i,e,n,Wc,r)},Qc.prototype.revertUserWrite_=function(t,e,n,r,i){var o;if(null!=n.shadowingWrite(e))return t;var s,a,u=new Kc(n,t,r),c=t.getEventCache().getNode(),r=void 0;return e.isEmpty()||".priority"===e.getFront()?(a=void 0,a=t.getServerCache().isFullyInitialized()?n.calcCompleteEventCache(t.getCompleteServerSnap()):(s=t.getServerCache().getNode(),Io(s instanceof Mu,"serverChildren would be complete if leaf node"),n.calcCompleteEventChildren(s)),r=this.filter_.updateFullNode(c,a,i)):(s=e.getFront(),null==(a=n.calcCompleteChild(s,t.getServerCache()))&&t.getServerCache().isCompleteForChild(s)&&(a=c.getImmediateChild(s)),(r=null!=a?this.filter_.updateChild(c,s,a,e.popFront(),u,i):t.getEventCache().getNode().hasChild(s)?this.filter_.updateChild(c,s,Mu.EMPTY_NODE,e.popFront(),u,i):c).isEmpty()&&t.getServerCache().isFullyInitialized()&&(o=n.calcCompleteEventCache(t.getCompleteServerSnap())).isLeafNode()&&(r=this.filter_.updateFullNode(r,o,i))),o=t.getServerCache().isFullyInitialized()||null!=n.shadowingWrite(_a.Empty),t.updateEventSnap(r,o,this.filter_.filtersNodes())},Qc);function Qc(t){this.filter_=t}var Yc=(Xc.prototype.generateEventsForChanges=function(t,e,n){var r=this,i=[],o=[];return t.forEach(function(t){t.type===Mc.CHILD_CHANGED&&r.index_.indexedValueChanged(t.oldSnap,t.snapshotNode)&&o.push(Mc.childMovedChange(t.childName,t.snapshotNode))}),this.generateEventsForType_(i,Mc.CHILD_REMOVED,t,n,e),this.generateEventsForType_(i,Mc.CHILD_ADDED,t,n,e),this.generateEventsForType_(i,Mc.CHILD_MOVED,o,n,e),this.generateEventsForType_(i,Mc.CHILD_CHANGED,t,n,e),this.generateEventsForType_(i,Mc.VALUE,t,n,e),i},Xc.prototype.generateEventsForType_=function(r,e,t,i,o){var s=this;(t=t.filter(function(t){return t.type===e})).sort(this.compareChanges_.bind(this)),t.forEach(function(e){var n=s.materializeSingleChange_(e,o);i.forEach(function(t){t.respondsTo(e.type)&&r.push(t.createEvent(n,s.query_))})})},Xc.prototype.materializeSingleChange_=function(t,e){return"value"===t.type||"child_removed"===t.type||(t.prevName=e.getPredecessorChildName(t.childName,t.snapshotNode,this.index_)),t},Xc.prototype.compareChanges_=function(t,e){if(null==t.childName||null==e.childName)throw To("Should only compare child_ events.");return t=new $a(t.childName,t.snapshotNode),e=new $a(e.childName,e.snapshotNode),this.index_.compare(t,e)},Xc);function Xc(t){this.query_=t,this.index_=this.query_.getQueryParams().getIndex()}var Jc,$c=(Zc.prototype.getQuery=function(){return this.query_},Zc.prototype.getServerCache=function(){return this.viewCache_.getServerCache().getNode()},Zc.prototype.getCompleteServerCache=function(t){var e=this.viewCache_.getCompleteServerSnap();return e&&(this.query_.getQueryParams().loadsAllData()||!t.isEmpty()&&!e.getImmediateChild(t.getFront()).isEmpty())?e.getChild(t):null},Zc.prototype.isEmpty=function(){return 0===this.eventRegistrations_.length},Zc.prototype.addEventRegistration=function(t){this.eventRegistrations_.push(t)},Zc.prototype.removeEventRegistration=function(t,e){var n,r=[];if(e&&(Io(null==t,"A cancel should cancel all event registrations."),n=this.query_.path,this.eventRegistrations_.forEach(function(t){(t=t.createCancelEvent(e,n))&&r.push(t)})),t){for(var i=[],o=0;o<this.eventRegistrations_.length;++o){var s=this.eventRegistrations_[o];if(s.matches(t)){if(t.hasAnyCallback()){i=i.concat(this.eventRegistrations_.slice(o+1));break}}else i.push(s)}this.eventRegistrations_=i}else this.eventRegistrations_=[];return r},Zc.prototype.applyOperation=function(t,e,n){t.type===yc.MERGE&&null!==t.source.queryId&&(Io(this.viewCache_.getCompleteServerSnap(),"We should always have a full cache before handling merges"),Io(this.viewCache_.getCompleteEventSnap(),"Missing event cache, even though we have a server cache"));var r=this.viewCache_,n=this.processor_.applyOperation(r,t,e,n);return this.processor_.assertIndexed(n.viewCache),Io(n.viewCache.getServerCache().isFullyInitialized()||!r.getServerCache().isFullyInitialized(),"Once a server snap is complete, it should never go back"),this.viewCache_=n.viewCache,this.generateEventsForChanges_(n.changes,n.viewCache.getEventCache().getNode(),null)},Zc.prototype.getInitialEvents=function(t){var e=this.viewCache_.getEventCache(),n=[];return e.getNode().isLeafNode()||e.getNode().forEachChild(yu,function(t,e){n.push(Mc.childAddedChange(t,e))}),e.isFullyInitialized()&&n.push(Mc.valueChange(e.getNode())),this.generateEventsForChanges_(n,e.getNode(),t)},Zc.prototype.generateEventsForChanges_=function(t,e,n){return n=n?[n]:this.eventRegistrations_,this.eventGenerator_.generateEventsForChanges(t,e,n)},Zc);function Zc(t,e){this.query_=t,this.eventRegistrations_=[];var n=this.query_.getQueryParams(),r=new Uc(n.getIndex()),i=n.getNodeFilter();this.processor_=new zc(i);var o=e.getServerCache(),t=e.getEventCache(),n=r.updateFullNode(Mu.EMPTY_NODE,o.getNode(),null),e=i.updateFullNode(Mu.EMPTY_NODE,t.getNode(),null),r=new Rc(n,o.isFullyInitialized(),r.filtersNodes()),i=new Rc(e,t.isFullyInitialized(),i.filtersNodes());this.viewCache_=new xc(i,r),this.eventGenerator_=new Yc(this.query_)}var th=(Object.defineProperty(eh,"__referenceConstructor",{get:function(){return Io(Jc,"Reference.ts has not been loaded"),Jc},set:function(t){Io(!Jc,"__referenceConstructor has already been defined"),Jc=t},enumerable:!1,configurable:!0}),eh.prototype.isEmpty=function(){return 0===this.views.size},eh.prototype.applyOperation=function(t,e,n){var r,i,o=t.source.queryId;if(null!==o){var s=this.views.get(o);return Io(null!=s,"SyncTree gave us an op for an invalid query."),s.applyOperation(t,e,n)}var a=[];try{for(var u=yo(this.views.values()),c=u.next();!c.done;c=u.next())s=c.value,a=a.concat(s.applyOperation(t,e,n))}catch(t){r={error:t}}finally{try{c&&!c.done&&(i=u.return)&&i.call(u)}finally{if(r)throw r.error}}return a},eh.prototype.addEventRegistration=function(t,e,n,r,i){var o,s,a=t.queryIdentifier(),u=this.views.get(a);return u||(s=!!(o=n.calcCompleteEventCache(i?r:null))||(o=r instanceof Mu?n.calcCompleteEventChildren(r):Mu.EMPTY_NODE,!1),i=new xc(new Rc(o,s,!1),new Rc(r,i,!1)),u=new $c(t,i),this.views.set(a,u)),u.addEventRegistration(e),u.getInitialEvents(e)},eh.prototype.removeEventRegistration=function(t,e,n){var r,i,o=t.queryIdentifier(),s=[],a=[],u=this.hasCompleteView();if("default"===o)try{for(var c=yo(this.views.entries()),h=c.next();!h.done;h=c.next()){var l=go(h.value,2),f=l[0],p=l[1],a=a.concat(p.removeEventRegistration(e,n));p.isEmpty()&&(this.views.delete(f),p.getQuery().getQueryParams().loadsAllData()||s.push(p.getQuery()))}}catch(t){r={error:t}}finally{try{h&&!h.done&&(i=c.return)&&i.call(c)}finally{if(r)throw r.error}}else(p=this.views.get(o))&&(a=a.concat(p.removeEventRegistration(e,n)),p.isEmpty()&&(this.views.delete(o),p.getQuery().getQueryParams().loadsAllData()||s.push(p.getQuery())));return u&&!this.hasCompleteView()&&s.push(new eh.__referenceConstructor(t.repo,t.path)),{removed:s,events:a}},eh.prototype.getQueryViews=function(){var t,e,n=[];try{for(var r=yo(this.views.values()),i=r.next();!i.done;i=r.next()){var o=i.value;o.getQuery().getQueryParams().loadsAllData()||n.push(o)}}catch(e){t={error:e}}finally{try{i&&!i.done&&(e=r.return)&&e.call(r)}finally{if(t)throw t.error}}return n},eh.prototype.getCompleteServerCache=function(t){var e,n,r=null;try{for(var i=yo(this.views.values()),o=i.next();!o.done;o=i.next())var s=o.value,r=r||s.getCompleteServerCache(t)}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r},eh.prototype.viewForQuery=function(t){return t.getQueryParams().loadsAllData()?this.getCompleteView():(t=t.queryIdentifier(),this.views.get(t))},eh.prototype.viewExistsForQuery=function(t){return null!=this.viewForQuery(t)},eh.prototype.hasCompleteView=function(){return null!=this.getCompleteView()},eh.prototype.getCompleteView=function(){var t,e;try{for(var n=yo(this.views.values()),r=n.next();!r.done;r=n.next()){var i=r.value;if(i.getQuery().getQueryParams().loadsAllData())return i}}catch(e){t={error:e}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}return null},eh);function eh(){this.views=new Map}var nh=(rh.prototype.addWrite=function(t,e){if(t.isEmpty())return new rh(new Tc(e));if(null==(i=this.writeTree_.findRootMostValueAndPath(t)))return e=new Tc(e),new rh(this.writeTree_.setTree(t,e));var n=i.path,r=i.value,i=_a.relativePath(n,t),r=r.updateChild(i,e);return new rh(this.writeTree_.set(n,r))},rh.prototype.addWrites=function(n,t){var r=this;return pa(t,function(t,e){r=r.addWrite(n.child(t),e)}),r},rh.prototype.removeWrite=function(t){return t.isEmpty()?rh.Empty:new rh(this.writeTree_.setTree(t,Tc.Empty))},rh.prototype.hasCompleteWrite=function(t){return null!=this.getCompleteNode(t)},rh.prototype.getCompleteNode=function(t){var e=this.writeTree_.findRootMostValueAndPath(t);return null!=e?this.writeTree_.get(e.path).getChild(_a.relativePath(e.path,t)):null},rh.prototype.getCompleteChildren=function(){var n=[],t=this.writeTree_.value;return null!=t?t.isLeafNode()||t.forEachChild(yu,function(t,e){n.push(new $a(t,e))}):this.writeTree_.children.inorderTraversal(function(t,e){null!=e.value&&n.push(new $a(t,e.value))}),n},rh.prototype.childCompoundWrite=function(t){if(t.isEmpty())return this;var e=this.getCompleteNode(t);return new rh(null!=e?new Tc(e):this.writeTree_.subtree(t))},rh.prototype.isEmpty=function(){return this.writeTree_.isEmpty()},rh.prototype.apply=function(t){return function n(r,t,i){if(null!=t.value)return i.updateChild(r,t.value);var o=null;return t.children.inorderTraversal(function(t,e){".priority"===t?(Io(null!==e.value,"Priority writes must always be leaf nodes"),o=e.value):i=n(r.child(t),e,i)}),i.getChild(r).isEmpty()||null===o||(i=i.updateChild(r.child(".priority"),o)),i}(_a.Empty,this.writeTree_,t)},rh.Empty=new rh(new Tc(null)),rh);function rh(t){this.writeTree_=t}var ih=(oh.prototype.childWrites=function(t){return new sh(t,this)},oh.prototype.addOverwrite=function(t,e,n,r){Io(n>this.lastWriteId_,"Stacking an older write on top of newer ones"),void 0===r&&(r=!0),this.allWrites_.push({path:t,snap:e,writeId:n,visible:r}),r&&(this.visibleWrites_=this.visibleWrites_.addWrite(t,e)),this.lastWriteId_=n},oh.prototype.addMerge=function(t,e,n){Io(n>this.lastWriteId_,"Stacking an older merge on top of newer ones"),this.allWrites_.push({path:t,children:e,writeId:n,visible:!0}),this.visibleWrites_=this.visibleWrites_.addWrites(t,e),this.lastWriteId_=n},oh.prototype.getWrite=function(t){for(var e=0;e<this.allWrites_.length;e++){var n=this.allWrites_[e];if(n.writeId===t)return n}return null},oh.prototype.removeWrite=function(e){var n=this,t=this.allWrites_.findIndex(function(t){return t.writeId===e});Io(0<=t,"removeWrite called with nonexistent writeId.");var r=this.allWrites_[t];this.allWrites_.splice(t,1);for(var i=r.visible,o=!1,s=this.allWrites_.length-1;i&&0<=s;){var a=this.allWrites_[s];a.visible&&(t<=s&&this.recordContainsPath_(a,r.path)?i=!1:r.path.contains(a.path)&&(o=!0)),s--}return!!i&&(o?this.resetTree_():r.snap?this.visibleWrites_=this.visibleWrites_.removeWrite(r.path):pa(r.children,function(t){n.visibleWrites_=n.visibleWrites_.removeWrite(r.path.child(t))}),!0)},oh.prototype.getCompleteWriteData=function(t){return this.visibleWrites_.getCompleteNode(t)},oh.prototype.calcCompleteEventCache=function(e,t,n,r){if(n||r){var i=this.visibleWrites_.childCompoundWrite(e);if(!r&&i.isEmpty())return t;if(r||null!=t||i.hasCompleteWrite(_a.Empty)){var o=oh.layerTree_(this.allWrites_,function(t){return(t.visible||r)&&(!n||!~n.indexOf(t.writeId))&&(t.path.contains(e)||e.contains(t.path))},e),s=t||Mu.EMPTY_NODE;return o.apply(s)}return null}if(null!=(o=this.visibleWrites_.getCompleteNode(e)))return o;if((o=this.visibleWrites_.childCompoundWrite(e)).isEmpty())return t;if(null!=t||o.hasCompleteWrite(_a.Empty)){s=t||Mu.EMPTY_NODE;return o.apply(s)}return null},oh.prototype.calcCompleteEventChildren=function(t,e){var n=Mu.EMPTY_NODE,r=this.visibleWrites_.getCompleteNode(t);if(r)return r.isLeafNode()||r.forEachChild(yu,function(t,e){n=n.updateImmediateChild(t,e)}),n;if(e){var i=this.visibleWrites_.childCompoundWrite(t);return e.forEachChild(yu,function(t,e){e=i.childCompoundWrite(new _a(t)).apply(e),n=n.updateImmediateChild(t,e)}),i.getCompleteChildren().forEach(function(t){n=n.updateImmediateChild(t.name,t.node)}),n}return this.visibleWrites_.childCompoundWrite(t).getCompleteChildren().forEach(function(t){n=n.updateImmediateChild(t.name,t.node)}),n},oh.prototype.calcEventCacheAfterServerOverwrite=function(t,e,n,r){return Io(n||r,"Either existingEventSnap or existingServerSnap must exist"),t=t.child(e),this.visibleWrites_.hasCompleteWrite(t)?null:(t=this.visibleWrites_.childCompoundWrite(t)).isEmpty()?r.getChild(e):t.apply(r.getChild(e))},oh.prototype.calcCompleteChild=function(t,e,n){var r=t.child(e);return null!=(t=this.visibleWrites_.getCompleteNode(r))?t:n.isCompleteForChild(e)?this.visibleWrites_.childCompoundWrite(r).apply(n.getNode().getImmediateChild(e)):null},oh.prototype.shadowingWrite=function(t){return this.visibleWrites_.getCompleteNode(t)},oh.prototype.calcIndexedSlice=function(t,e,n,r,i,o){var s,a=this.visibleWrites_.childCompoundWrite(t);if(null!=(t=a.getCompleteNode(_a.Empty)))s=t;else{if(null==e)return[];s=a.apply(e)}if((s=s.withIndex(o)).isEmpty()||s.isLeafNode())return[];for(var u=[],c=o.getCompare(),h=i?s.getReverseIteratorFrom(n,o):s.getIteratorFrom(n,o),l=h.getNext();l&&u.length<r;)0!==c(l,n)&&u.push(l),l=h.getNext();return u},oh.prototype.recordContainsPath_=function(t,e){if(t.snap)return t.path.contains(e);for(var n in t.children)if(t.children.hasOwnProperty(n)&&t.path.child(n).contains(e))return!0;return!1},oh.prototype.resetTree_=function(){this.visibleWrites_=oh.layerTree_(this.allWrites_,oh.DefaultFilter_,_a.Empty),0<this.allWrites_.length?this.lastWriteId_=this.allWrites_[this.allWrites_.length-1].writeId:this.lastWriteId_=-1},oh.DefaultFilter_=function(t){return t.visible},oh.layerTree_=function(t,e,n){for(var r=nh.Empty,i=0;i<t.length;++i){var o=t[i];if(e(o)){var s=o.path,a=void 0;if(o.snap)n.contains(s)?(a=_a.relativePath(n,s),r=r.addWrite(a,o.snap)):s.contains(n)&&(a=_a.relativePath(s,n),r=r.addWrite(_a.Empty,o.snap.getChild(a)));else{if(!o.children)throw To("WriteRecord should have .snap or .children");n.contains(s)?(a=_a.relativePath(n,s),r=r.addWrites(a,o.children)):s.contains(n)&&((a=_a.relativePath(s,n)).isEmpty()?r=r.addWrites(_a.Empty,o.children):(o=Yo(o.children,a.getFront()))&&(a=o.getChild(a.popFront()),r=r.addWrite(_a.Empty,a)))}}}return r},oh);function oh(){this.visibleWrites_=nh.Empty,this.allWrites_=[],this.lastWriteId_=-1}var sh=(ah.prototype.calcCompleteEventCache=function(t,e,n){return this.writeTree_.calcCompleteEventCache(this.treePath_,t,e,n)},ah.prototype.calcCompleteEventChildren=function(t){return this.writeTree_.calcCompleteEventChildren(this.treePath_,t)},ah.prototype.calcEventCacheAfterServerOverwrite=function(t,e,n){return this.writeTree_.calcEventCacheAfterServerOverwrite(this.treePath_,t,e,n)},ah.prototype.shadowingWrite=function(t){return this.writeTree_.shadowingWrite(this.treePath_.child(t))},ah.prototype.calcIndexedSlice=function(t,e,n,r,i){return this.writeTree_.calcIndexedSlice(this.treePath_,t,e,n,r,i)},ah.prototype.calcCompleteChild=function(t,e){return this.writeTree_.calcCompleteChild(this.treePath_,t,e)},ah.prototype.child=function(t){return new ah(this.treePath_.child(t),this.writeTree_)},ah);function ah(t,e){this.treePath_=t,this.writeTree_=e}var uh=(ch.prototype.applyUserOverwrite=function(t,e,n,r){return this.pendingWriteTree_.addOverwrite(t,e,n,r),r?this.applyOperationToSyncPoints_(new Ac(_c.User,t,e)):[]},ch.prototype.applyUserMerge=function(t,e,n){return this.pendingWriteTree_.addMerge(t,e,n),e=Tc.fromObject(e),this.applyOperationToSyncPoints_(new Oc(_c.User,t,e))},ch.prototype.ackUserWrite=function(t,e){void 0===e&&(e=!1);var n=this.pendingWriteTree_.getWrite(t);if(this.pendingWriteTree_.removeWrite(t)){var r=Tc.Empty;return null!=n.snap?r=r.set(_a.Empty,!0):pa(n.children,function(t,e){r=r.set(new _a(t),e)}),this.applyOperationToSyncPoints_(new Ec(n.path,r,e))}return[]},ch.prototype.applyServerOverwrite=function(t,e){return this.applyOperationToSyncPoints_(new Ac(_c.Server,t,e))},ch.prototype.applyServerMerge=function(t,e){return e=Tc.fromObject(e),this.applyOperationToSyncPoints_(new Oc(_c.Server,t,e))},ch.prototype.applyListenComplete=function(t){return this.applyOperationToSyncPoints_(new Cc(_c.Server,t))},ch.prototype.applyTaggedQueryOverwrite=function(t,e,n){var r=this.queryKeyForTag_(n);return null==r?[]:(r=(n=ch.parseQueryKey_(r)).path,n=n.queryId,t=_a.relativePath(r,t),e=new Ac(_c.forServerTaggedQuery(n),t,e),this.applyTaggedOperation_(r,e))},ch.prototype.applyTaggedQueryMerge=function(t,e,n){var r=this.queryKeyForTag_(n);return r?(r=(n=ch.parseQueryKey_(r)).path,n=n.queryId,t=_a.relativePath(r,t),e=Tc.fromObject(e),e=new Oc(_c.forServerTaggedQuery(n),t,e),this.applyTaggedOperation_(r,e)):[]},ch.prototype.applyTaggedListenComplete=function(t,e){var n=this.queryKeyForTag_(e);return n?(n=(e=ch.parseQueryKey_(n)).path,e=e.queryId,t=_a.relativePath(n,t),t=new Cc(_c.forServerTaggedQuery(e),t),this.applyTaggedOperation_(n,t)):[]},ch.prototype.addEventRegistration=function(t,e){var n=t.path,r=null,i=!1;this.syncPointTree_.foreachOnPath(n,function(t,e){t=_a.relativePath(t,n),r=r||e.getCompleteServerCache(t),i=i||e.hasCompleteView()});var o=this.syncPointTree_.get(n);o?(i=i||o.hasCompleteView(),r=r||o.getCompleteServerCache(_a.Empty)):(o=new th,this.syncPointTree_=this.syncPointTree_.set(n,o)),null!=r?c=!0:(c=!1,r=Mu.EMPTY_NODE,this.syncPointTree_.subtree(n).foreachChild(function(t,e){(e=e.getCompleteServerCache(_a.Empty))&&(r=r.updateImmediateChild(t,e))}));var s,a=o.viewExistsForQuery(t);a||t.getQueryParams().loadsAllData()||(u=ch.makeQueryKey_(t),Io(!this.queryToTagMap.has(u),"View does not exist, but we have a tag"),s=ch.getNextQueryTag_(),this.queryToTagMap.set(u,s),this.tagToQueryMap.set(s,u));var u=this.pendingWriteTree_.childWrites(n),c=o.addEventRegistration(t,e,u,r,c);return a||i||(o=o.viewForQuery(t),c=c.concat(this.setupListener_(t,o))),c},ch.prototype.removeEventRegistration=function(t,e,n){var r=this,i=t.path,o=this.syncPointTree_.get(i),s=[];if(o&&("default"===t.queryIdentifier()||o.viewExistsForQuery(t))){var a=o.removeEventRegistration(t,e,n);if(o.isEmpty()&&(this.syncPointTree_=this.syncPointTree_.remove(i)),e=a.removed,s=a.events,o=-1!==e.findIndex(function(t){return t.getQueryParams().loadsAllData()}),a=this.syncPointTree_.findOnPath(i,function(t,e){return e.hasCompleteView()}),o&&!a&&!(i=this.syncPointTree_.subtree(i)).isEmpty())for(var u=this.collectDistinctViewsForSubTree_(i),c=0;c<u.length;++c){var h=(l=u[c]).getQuery(),l=this.createListenerForView_(l);this.listenProvider_.startListening(ch.queryForListening_(h),this.tagForQuery_(h),l.hashFn,l.onComplete)}!a&&0<e.length&&!n&&(o?this.listenProvider_.stopListening(ch.queryForListening_(t),null):e.forEach(function(t){var e=r.queryToTagMap.get(ch.makeQueryKey_(t));r.listenProvider_.stopListening(ch.queryForListening_(t),e)})),this.removeTags_(e)}return s},ch.prototype.calcCompleteEventCache=function(n,t){var e=this.pendingWriteTree_,r=this.syncPointTree_.findOnPath(n,function(t,e){if(t=_a.relativePath(t,n),t=e.getCompleteServerCache(t))return t});return e.calcCompleteEventCache(n,r,t,!0)},ch.prototype.collectDistinctViewsForSubTree_=function(t){return t.fold(function(t,e,n){if(e&&e.hasCompleteView())return[e.getCompleteView()];var r=[];return e&&(r=e.getQueryViews()),pa(n,function(t,e){r=r.concat(e)}),r})},ch.prototype.removeTags_=function(t){for(var e=0;e<t.length;++e){var n,r=t[e];r.getQueryParams().loadsAllData()||(n=ch.makeQueryKey_(r),r=this.queryToTagMap.get(n),this.queryToTagMap.delete(n),this.tagToQueryMap.delete(r))}},ch.queryForListening_=function(t){return t.getQueryParams().loadsAllData()&&!t.getQueryParams().isDefault()?t.getRef():t},ch.prototype.setupListener_=function(t,e){var n=t.path,r=this.tagForQuery_(t),e=this.createListenerForView_(e),e=this.listenProvider_.startListening(ch.queryForListening_(t),r,e.hashFn,e.onComplete),n=this.syncPointTree_.subtree(n);if(r)Io(!n.value.hasCompleteView(),"If we're adding a query, it shouldn't be shadowed");else for(var i=n.fold(function(t,e,n){if(!t.isEmpty()&&e&&e.hasCompleteView())return[e.getCompleteView().getQuery()];var r=[];return e&&(r=r.concat(e.getQueryViews().map(function(t){return t.getQuery()}))),pa(n,function(t,e){r=r.concat(e)}),r}),o=0;o<i.length;++o){var s=i[o];this.listenProvider_.stopListening(ch.queryForListening_(s),this.tagForQuery_(s))}return e},ch.prototype.createListenerForView_=function(t){var r=this,i=t.getQuery(),o=this.tagForQuery_(i);return{hashFn:function(){return(t.getServerCache()||Mu.EMPTY_NODE).hash()},onComplete:function(t){return"ok"===t?o?r.applyTaggedListenComplete(i.path,o):r.applyListenComplete(i.path):(n="Unknown Error","too_big"===(e=t)?n="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===e?n="Client doesn't have permission to access the desired data.":"unavailable"===e&&(n="The service is unavailable"),(n=new Error(e+" at "+i.path.toString()+": "+n)).code=e.toUpperCase(),t=n,r.removeEventRegistration(i,null,t));var e,n}}},ch.makeQueryKey_=function(t){return t.path.toString()+"$"+t.queryIdentifier()},ch.parseQueryKey_=function(t){var e=t.indexOf("$");return Io(-1!==e&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new _a(t.substr(0,e))}},ch.prototype.queryKeyForTag_=function(t){return this.tagToQueryMap.get(t)},ch.prototype.tagForQuery_=function(t){return t=ch.makeQueryKey_(t),this.queryToTagMap.get(t)},ch.getNextQueryTag_=function(){return ch.nextQueryTag_++},ch.prototype.applyTaggedOperation_=function(t,e){var n=this.syncPointTree_.get(t);return Io(n,"Missing sync point for query tag that we're tracking"),t=this.pendingWriteTree_.childWrites(t),n.applyOperation(e,t,null)},ch.prototype.applyOperationToSyncPoints_=function(t){return this.applyOperationHelper_(t,this.syncPointTree_,null,this.pendingWriteTree_.childWrites(_a.Empty))},ch.prototype.applyOperationHelper_=function(t,e,n,r){if(t.path.isEmpty())return this.applyOperationDescendantsHelper_(t,e,n,r);var i=e.get(_a.Empty);null==n&&null!=i&&(n=i.getCompleteServerCache(_a.Empty));var o=[],s=t.path.getFront(),a=t.operationForChild(s),u=e.children.get(s);return u&&a&&(e=n?n.getImmediateChild(s):null,s=r.child(s),o=o.concat(this.applyOperationHelper_(a,u,e,s))),i&&(o=o.concat(i.applyOperation(t,r,n))),o},ch.prototype.applyOperationDescendantsHelper_=function(i,t,o,s){var a=this,e=t.get(_a.Empty);null==o&&null!=e&&(o=e.getCompleteServerCache(_a.Empty));var u=[];return t.children.inorderTraversal(function(t,e){var n=o?o.getImmediateChild(t):null,r=s.child(t);(t=i.operationForChild(t))&&(u=u.concat(a.applyOperationDescendantsHelper_(t,e,n,r)))}),e&&(u=u.concat(e.applyOperation(i,s,o))),u},ch.nextQueryTag_=1,ch);function ch(t){this.listenProvider_=t,this.syncPointTree_=Tc.Empty,this.pendingWriteTree_=new ih,this.tagToQueryMap=new Map,this.queryToTagMap=new Map}var hh=(lh.prototype.getNode=function(t){return this.rootNode_.getChild(t)},lh.prototype.updateSnapshot=function(t,e){this.rootNode_=this.rootNode_.updateChild(t,e)},lh);function lh(){this.rootNode_=Mu.EMPTY_NODE}var fh=(ph.prototype.incrementCounter=function(t,e){void 0===e&&(e=1),Qo(this.counters_,t)||(this.counters_[t]=0),this.counters_[t]+=e},ph.prototype.get=function(){return Co(this.counters_)},ph);function ph(){this.counters_={}}var dh=(vh.getCollection=function(t){return t=t.toString(),this.collections_[t]||(this.collections_[t]=new fh),this.collections_[t]},vh.getOrCreateReporter=function(t,e){return t=t.toString(),this.reporters_[t]||(this.reporters_[t]=e()),this.reporters_[t]},vh.collections_={},vh.reporters_={},vh);function vh(){}var yh=(gh.prototype.get=function(){var t=this.collection_.get(),n=fo({},t);return this.last_&&pa(this.last_,function(t,e){n[t]=n[t]-e}),this.last_=t,n},gh);function gh(t){this.collection_=t,this.last_=null}var mh=(_h.prototype.includeStat=function(t){this.statsToReport_[t]=!0},_h.prototype.reportStats_=function(){var n=this,t=this.statsListener_.get(),r={},i=!1;pa(t,function(t,e){0<e&&Qo(n.statsToReport_,t)&&(r[t]=e,i=!0)}),i&&this.server_.reportStats(r),ya(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))},_h);function _h(t,e){this.server_=e,this.statsToReport_={},this.statsListener_=new yh(t),t=1e4+2e4*Math.random(),ya(this.reportStats_.bind(this),Math.floor(t))}var bh=(wh.prototype.queueEvents=function(t){for(var e=null,n=0;n<t.length;n++){var r=t[n],i=r.getPath();null===e||i.equals(e.getPath())||(this.eventLists_.push(e),e=null),null===e&&(e=new Eh(i)),e.add(r)}e&&this.eventLists_.push(e)},wh.prototype.raiseEventsAtPath=function(e,t){this.queueEvents(t),this.raiseQueuedEventsMatchingPredicate_(function(t){return t.equals(e)})},wh.prototype.raiseEventsForChangedPath=function(e,t){this.queueEvents(t),this.raiseQueuedEventsMatchingPredicate_(function(t){return t.contains(e)||e.contains(t)})},wh.prototype.raiseQueuedEventsMatchingPredicate_=function(t){this.recursionDepth_++;for(var e=!0,n=0;n<this.eventLists_.length;n++){var r=this.eventLists_[n];r&&(t(r.getPath())?(this.eventLists_[n].raise(),this.eventLists_[n]=null):e=!1)}e&&(this.eventLists_=[]),this.recursionDepth_--},wh);function wh(){this.eventLists_=[],this.recursionDepth_=0}var Eh=(Ih.prototype.add=function(t){this.events_.push(t)},Ih.prototype.raise=function(){for(var t=0;t<this.events_.length;t++){var e,n=this.events_[t];null!==n&&(this.events_[t]=null,e=n.getEventRunner(),oa&&aa("event: "+n.toString()),va(e))}},Ih.prototype.getPath=function(){return this.path_},Ih);function Ih(t){this.path_=t,this.events_=[]}function Th(t){this.allowedEvents_=t,this.listeners_={},Io(Array.isArray(t)&&0<t.length,"Requires a non-empty array")}Th.prototype.trigger=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Array.isArray(this.listeners_[t]))for(var r=mo(this.listeners_[t]),i=0;i<r.length;i++)r[i].callback.apply(r[i].context,e)},Th.prototype.on=function(t,e,n){this.validateEventType_(t),this.listeners_[t]=this.listeners_[t]||[],this.listeners_[t].push({callback:e,context:n}),(t=this.getInitialEvent(t))&&e.apply(n,t)},Th.prototype.off=function(t,e,n){this.validateEventType_(t);for(var r=this.listeners_[t]||[],i=0;i<r.length;i++)if(r[i].callback===e&&(!n||n===r[i].context))return void r.splice(i,1)},Th.prototype.validateEventType_=function(e){Io(this.allowedEvents_.find(function(t){return t===e}),"Unknown event: "+e)};var Sh,Ch=(lo(Nh,Sh=L=Th),Nh.getInstance=function(){return new Nh},Nh.prototype.getInitialEvent=function(t){return Io("visible"===t,"Unknown event type: "+t),[this.visible_]},Nh);function Nh(){var e,t,n=Sh.call(this,["visible"])||this;return"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(t="visibilitychange",e="hidden"):void 0!==document.mozHidden?(t="mozvisibilitychange",e="mozHidden"):void 0!==document.msHidden?(t="msvisibilitychange",e="msHidden"):void 0!==document.webkitHidden&&(t="webkitvisibilitychange",e="webkitHidden")),n.visible_=!0,t&&document.addEventListener(t,function(){var t=!document[e];t!==n.visible_&&(n.visible_=t,n.trigger("visible",t))},!1),n}var Ah,kh=(lo(Oh,Ah=L),Oh.getInstance=function(){return new Oh},Oh.prototype.getInitialEvent=function(t){return Io("online"===t,"Unknown event type: "+t),[this.online_]},Oh.prototype.currentlyOnline=function(){return this.online_},Oh);function Oh(){var t=Ah.call(this,["online"])||this;return t.online_=!0,"undefined"==typeof window||void 0===window.addEventListener||Po()||(window.addEventListener("online",function(){t.online_||(t.online_=!0,t.trigger("online",!0))},!1),window.addEventListener("offline",function(){t.online_&&(t.online_=!1,t.trigger("online",!1))},!1)),t}var Ph=(Rh.prototype.closeAfter=function(t,e){this.closeAfterResponse=t,this.onClose=e,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)},Rh.prototype.handleResponse=function(t,e){var n=this;this.pendingResponses[t]=e;for(var r=this;this.pendingResponses[this.currentResponseNum]&&"break"!==function(){var e=r.pendingResponses[r.currentResponseNum];delete r.pendingResponses[r.currentResponseNum];for(var t=0;t<e.length;++t)!function(t){e[t]&&va(function(){n.onMessage_(e[t])})}(t);if(r.currentResponseNum===r.closeAfterResponse)return r.onClose&&(r.onClose(),r.onClose=null),"break";r.currentResponseNum++}(););},Rh);function Rh(t){this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}var Dh="pLPCommand",xh="pRTLPCB",Lh=(Mh.prototype.open=function(t,e){var n,r,i,s=this;this.curSegmentNum=0,this.onDisconnect_=e,this.myPacketOrderer=new Ph(t),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(function(){s.log_("Timed out trying to connect."),s.onClosed_(),s.connectTimeoutTimer_=null},Math.floor(3e4)),n=function(){var t;s.isClosed_||(s.scriptTagHolder=new Fh(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=go(t,5),r=n[0],i=n[1],o=n[2];if(n[3],n[4],s.incrementIncomingBytes_(t),s.scriptTagHolder)if(s.connectTimeoutTimer_&&(clearTimeout(s.connectTimeoutTimer_),s.connectTimeoutTimer_=null),s.everConnected_=!0,"start"===r)s.id=i,s.password=o;else{if("close"!==r)throw new Error("Unrecognized command received: "+r);i?(s.scriptTagHolder.sendNewPolls=!1,s.myPacketOrderer.closeAfter(i,function(){s.onClosed_()})):s.onClosed_()}},function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=(r=go(t,2))[0],r=r[1];s.incrementIncomingBytes_(t),s.myPacketOrderer.handleResponse(n,r)},function(){s.onClosed_()},s.urlFn),(t={start:"t"}).ser=Math.floor(1e8*Math.random()),s.scriptTagHolder.uniqueCallbackIdentifier&&(t.cb=s.scriptTagHolder.uniqueCallbackIdentifier),t.v="5",s.transportSessionId&&(t.s=s.transportSessionId),s.lastSessionId&&(t.ls=s.lastSessionId),s.applicationId&&(t.p=s.applicationId),"undefined"!=typeof location&&location.href&&-1!==location.href.indexOf(Ia)&&(t.r="f"),t=s.urlFn(t),s.log_("Connecting via long-poll to "+t),s.scriptTagHolder.addTag(t,function(){}))},"complete"===document.readyState?n():(r=!1,i=function(){document.body?r||(r=!0,n()):setTimeout(i,Math.floor(10))},document.addEventListener?(document.addEventListener("DOMContentLoaded",i,!1),window.addEventListener("load",i,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",function(){"complete"===document.readyState&&i()}),window.attachEvent("onload",i)))},Mh.prototype.start=function(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)},Mh.forceAllow=function(){Mh.forceAllow_=!0},Mh.forceDisallow=function(){Mh.forceDisallow_=!0},Mh.isAvailable=function(){return!!Mh.forceAllow_||!(Mh.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI)},Mh.prototype.markConnectionHealthy=function(){},Mh.prototype.shutdown_=function(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)},Mh.prototype.onClosed_=function(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))},Mh.prototype.close=function(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())},Mh.prototype.send=function(t){t=Go(t),this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);for(var e,n=$s(t=(e=bo(e=t),So.encodeByteArray(e,!0)),1840),r=0;r<n.length;r++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,n.length,n[r]),this.curSegmentNum++},Mh.prototype.addDisconnectPingFrame=function(t,e){this.myDisconnFrame=document.createElement("iframe");var n={dframe:"t"};n.id=t,n.pw=e,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)},Mh.prototype.incrementIncomingBytes_=function(t){t=Go(t).length,this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)},Mh);function Mh(t,e,n,r,i){this.connId=t,this.repoInfo=e,this.applicationId=n,this.transportSessionId=r,this.lastSessionId=i,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=ua(t),this.stats_=dh.getCollection(e),this.urlFn=function(t){return e.connectionURL(Sa,t)}}var Fh=(Uh.createIFrame_=function(){var e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||aa("No IE domain setting required")}catch(t){var n=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+n+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e},Uh.prototype.close=function(){var t=this;this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(function(){null!==t.myIFrame&&(document.body.removeChild(t.myIFrame),t.myIFrame=null)},Math.floor(0)));var e=this.onDisconnect;e&&(this.onDisconnect=null,e())},Uh.prototype.startLongPoll=function(t,e){for(this.myID=t,this.myPW=e,this.alive=!0;this.newRequest_(););},Uh.prototype.newRequest_=function(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(0<this.pendingSegs.length?2:1)){this.currentSerial++,(t={}).id=this.myID,t.pw=this.myPW,t.ser=this.currentSerial;for(var t=this.urlFn(t),e="",n=0;0<this.pendingSegs.length&&this.pendingSegs[0].d.length+30+e.length<=1870;){var r=this.pendingSegs.shift(),e=e+"&seg"+n+"="+r.seg+"&ts"+n+"="+r.ts+"&d"+n+"="+r.d;n++}return t+=e,this.addLongPollTag_(t,this.currentSerial),!0}return!1},Uh.prototype.enqueueSegment=function(t,e,n){this.pendingSegs.push({seg:t,ts:e,d:n}),this.alive&&this.newRequest_()},Uh.prototype.addLongPollTag_=function(t,e){var n=this;function r(){n.outstandingRequests.delete(e),n.newRequest_()}this.outstandingRequests.add(e);var i=setTimeout(r,Math.floor(25e3));this.addTag(t,function(){clearTimeout(i),r()})},Uh.prototype.addTag=function(t,n){var r=this;setTimeout(function(){try{if(!r.sendNewPolls)return;var e=r.myIFrame.doc.createElement("script");e.type="text/javascript",e.async=!0,e.src=t,e.onload=e.onreadystatechange=function(){var t=e.readyState;t&&"loaded"!==t&&"complete"!==t||(e.onload=e.onreadystatechange=null,e.parentNode&&e.parentNode.removeChild(e),n())},e.onerror=function(){aa("Long-poll script failed to load: "+t),r.sendNewPolls=!1,r.close()},r.myIFrame.doc.body.appendChild(e)}catch(t){}},Math.floor(1))},Uh);function Uh(t,e,n,r){this.onDisconnect=n,this.urlFn=r,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,this.uniqueCallbackIdentifier=ra(),window[Dh+this.uniqueCallbackIdentifier]=t,window[xh+this.uniqueCallbackIdentifier]=e,this.myIFrame=Uh.createIFrame_(),e="",this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length)&&(e='<script>document.domain="'+document.domain+'";<\/script>');var i="<html><body>"+e+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(i),this.myIFrame.doc.close()}catch(t){aa("frame writing exception"),t.stack&&aa(t.stack),aa(t)}}var jh="";function Vh(t){jh=t}var qh=null;"undefined"!=typeof MozWebSocket?qh=MozWebSocket:"undefined"!=typeof WebSocket&&(qh=WebSocket);var Bh=(Wh.connectionURL_=function(t,e,n){var r={v:"5"};return"undefined"!=typeof location&&location.href&&-1!==location.href.indexOf(Ia)&&(r.r="f"),e&&(r.s=e),n&&(r.ls=n),t.connectionURL(Ta,r)},Wh.prototype.open=function(t,e){var n,r=this;this.onDisconnect=e,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,ta.set("previous_websocket_failure",!0);try{xo()||(n={headers:{"X-Firebase-GMPID":this.applicationId||""}},this.mySock=new qh(this.connURL,[],n))}catch(e){return this.log_("Error instantiating WebSocket."),(t=e.message||e.data)&&this.log_(t),void this.onClosed_()}this.mySock.onopen=function(){r.log_("Websocket connected."),r.everConnected_=!0},this.mySock.onclose=function(){r.log_("Websocket connection was disconnected."),r.mySock=null,r.onClosed_()},this.mySock.onmessage=function(t){r.handleIncomingFrame(t)},this.mySock.onerror=function(t){r.log_("WebSocket error.  Closing connection."),(t=t.message||t.data)&&r.log_(t),r.onClosed_()}},Wh.prototype.start=function(){},Wh.forceDisallow=function(){Wh.forceDisallow_=!0},Wh.isAvailable=function(){var t,e=!1;return"undefined"!=typeof navigator&&navigator.userAgent&&(t=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/))&&1<t.length&&parseFloat(t[1])<4.4&&(e=!0),!e&&null!==qh&&!Wh.forceDisallow_},Wh.previouslyFailed=function(){return ta.isInMemoryStorage||!0===ta.get("previous_websocket_failure")},Wh.prototype.markConnectionHealthy=function(){ta.remove("previous_websocket_failure")},Wh.prototype.appendFrame_=function(t){this.frames.push(t),this.frames.length===this.totalFrames&&(t=this.frames.join(""),this.frames=null,t=Ho(t),this.onMessage(t))},Wh.prototype.handleNewFrameCount_=function(t){this.totalFrames=t,this.frames=[]},Wh.prototype.extractFrameCount_=function(t){if(Io(null===this.frames,"We already have a frame buffer"),t.length<=6){var e=Number(t);if(!isNaN(e))return this.handleNewFrameCount_(e),null}return this.handleNewFrameCount_(1),t},Wh.prototype.handleIncomingFrame=function(t){null!==this.mySock&&(t=t.data,this.bytesReceived+=t.length,this.stats_.incrementCounter("bytes_received",t.length),this.resetKeepAlive(),null===this.frames&&null===(t=this.extractFrameCount_(t))||this.appendFrame_(t))},Wh.prototype.send=function(t){this.resetKeepAlive(),t=Go(t),this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);var e=$s(t,16384);1<e.length&&this.sendString_(String(e.length));for(var n=0;n<e.length;n++)this.sendString_(e[n])},Wh.prototype.shutdown_=function(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)},Wh.prototype.onClosed_=function(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))},Wh.prototype.close=function(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())},Wh.prototype.resetKeepAlive=function(){var t=this;clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(function(){t.mySock&&t.sendString_("0"),t.resetKeepAlive()},Math.floor(45e3))},Wh.prototype.sendString_=function(t){try{this.mySock.send(t)}catch(t){this.log_("Exception thrown from WebSocket.send():",t.message||t.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}},Wh.responsesRequiredToBeHealthy=2,Wh.healthyTimeout=3e4,Wh);function Wh(t,e,n,r,i){this.connId=t,this.applicationId=n,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=ua(this.connId),this.stats_=dh.getCollection(e),this.connURL=Wh.connectionURL_(e,r,i),this.nodeAdmin=e.nodeAdmin}var Kh=(Object.defineProperty(Hh,"ALL_TRANSPORTS",{get:function(){return[Lh,Bh]},enumerable:!1,configurable:!0}),Hh.prototype.initTransports_=function(t){var e,n,r=Bh&&Bh.isAvailable(),i=r&&!Bh.previouslyFailed();if(t.webSocketOnly&&(r||Qs("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[Bh];else{var o=this.transports_=[];try{for(var s=yo(Hh.ALL_TRANSPORTS),a=s.next();!a.done;a=s.next()){var u=a.value;u&&u.isAvailable()&&o.push(u)}}catch(t){e={error:t}}finally{try{a&&!a.done&&(n=s.return)&&n.call(s)}finally{if(e)throw e.error}}}},Hh.prototype.initialTransport=function(){if(0<this.transports_.length)return this.transports_[0];throw new Error("No transports available")},Hh.prototype.upgradeTransport=function(){return 1<this.transports_.length?this.transports_[1]:null},Hh);function Hh(t){this.initTransports_(t)}var Gh=(zh.prototype.start_=function(){var t=this,e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,void 0,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(function(){t.conn_&&t.conn_.open(n,r)},Math.floor(0)),0<(e=e.healthyTimeout||0)&&(this.healthyTimeout_=ya(function(){t.healthyTimeout_=null,t.isHealthy_||(t.conn_&&102400<t.conn_.bytesReceived?(t.log_("Connection exceeded healthy timeout but has received "+t.conn_.bytesReceived+" bytes.  Marking connection healthy."),t.isHealthy_=!0,t.conn_.markConnectionHealthy()):t.conn_&&10240<t.conn_.bytesSent?t.log_("Connection exceeded healthy timeout but has sent "+t.conn_.bytesSent+" bytes.  Leaving connection alive."):(t.log_("Closing unhealthy connection after timeout."),t.close()))},Math.floor(e)))},zh.prototype.nextTransportId_=function(){return"c:"+this.id+":"+this.connectionCount++},zh.prototype.disconnReceiver_=function(e){var n=this;return function(t){e===n.conn_?n.onConnectionLost_(t):e===n.secondaryConn_?(n.log_("Secondary connection lost."),n.onSecondaryConnectionLost_()):n.log_("closing an old connection")}},zh.prototype.connReceiver_=function(e){var n=this;return function(t){2!==n.state_&&(e===n.rx_?n.onPrimaryMessageReceived_(t):e===n.secondaryConn_?n.onSecondaryMessageReceived_(t):n.log_("message on old connection"))}},zh.prototype.sendRequest=function(t){t={t:"d",d:t},this.sendData_(t)},zh.prototype.tryCleanupConnection=function(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)},zh.prototype.onSecondaryControl_=function(t){"t"in t&&("a"===(t=t.t)?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_()))},zh.prototype.onSecondaryMessageReceived_=function(t){var e=Js("t",t),t=Js("d",t);if("c"===e)this.onSecondaryControl_(t);else{if("d"!==e)throw new Error("Unknown protocol layer: "+e);this.pendingDataMessages.push(t)}},zh.prototype.upgradeIfSecondaryHealthy_=function(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))},zh.prototype.proceedWithUpgrade_=function(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()},zh.prototype.onPrimaryMessageReceived_=function(t){var e=Js("t",t),t=Js("d",t);"c"===e?this.onControl_(t):"d"===e&&this.onDataMessage_(t)},zh.prototype.onDataMessage_=function(t){this.onPrimaryResponse_(),this.onMessage_(t)},zh.prototype.onPrimaryResponse_=function(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))},zh.prototype.onControl_=function(t){var e=Js("t",t);if("d"in t)if(t=t.d,"h"===e)this.onHandshake_(t);else if("n"===e){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(var n=0;n<this.pendingDataMessages.length;++n)this.onDataMessage_(this.pendingDataMessages[n]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===e?this.onConnectionShutdown_(t):"r"===e?this.onReset_(t):"e"===e?Gs("Server Error: "+t):"o"===e?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Gs("Unknown control packet command: "+e)},zh.prototype.onHandshake_=function(t){var e=t.ts,n=t.v,r=t.h;this.sessionId=t.s,this.repoInfo_.updateHost(r),0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,e),"5"!==n&&Qs("Protocol version mismatch detected"),this.tryStartUpgrade_())},zh.prototype.tryStartUpgrade_=function(){var t=this.transportManager_.upgradeTransport();t&&this.startUpgrade_(t)},zh.prototype.startUpgrade_=function(t){var e=this;this.secondaryConn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.sessionId),this.secondaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.secondaryConn_),t=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,t),ya(function(){e.secondaryConn_&&(e.log_("Timed out trying to upgrade."),e.secondaryConn_.close())},Math.floor(6e4))},zh.prototype.onReset_=function(t){this.log_("Reset packet received.  New host: "+t),this.repoInfo_.updateHost(t),1===this.state_?this.close():(this.closeConnections_(),this.start_())},zh.prototype.onConnectionEstablished_=function(t,e){var n=this;this.log_("Realtime connection established."),this.conn_=t,this.state_=1,this.onReady_&&(this.onReady_(e,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):ya(function(){n.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))},zh.prototype.sendPingOnPrimaryIfNecessary_=function(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))},zh.prototype.onSecondaryConnectionLost_=function(){var t=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==t&&this.rx_!==t||this.close()},zh.prototype.onConnectionLost_=function(t){this.conn_=null,t||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(ta.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()},zh.prototype.onConnectionShutdown_=function(t){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(t),this.onKill_=null),this.onDisconnect_=null,this.close()},zh.prototype.sendData_=function(t){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(t)},zh.prototype.close=function(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))},zh.prototype.closeConnections_=function(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)},zh);function zh(t,e,n,r,i,o,s,a){this.id=t,this.repoInfo_=e,this.applicationId_=n,this.onMessage_=r,this.onReady_=i,this.onDisconnect_=o,this.onKill_=s,this.lastSessionId=a,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=ua("c:"+this.id+":"),this.transportManager_=new Kh(e),this.log_("Connection created"),this.start_()}function Qh(){}Qh.prototype.put=function(t,e,n,r){},Qh.prototype.merge=function(t,e,n,r){},Qh.prototype.refreshAuthToken=function(t){},Qh.prototype.onDisconnectPut=function(t,e,n){},Qh.prototype.onDisconnectMerge=function(t,e,n){},Qh.prototype.onDisconnectCancel=function(t,e){},Qh.prototype.reportStats=function(t){};var Yh,Xh=1e3,Jh=3e5,$h=(lo(Zh,Yh=ru=Qh),Zh.prototype.sendRequest=function(t,e,n){var r=++this.requestNumber_,e={r:r,a:t,b:e};this.log_(Go(e)),Io(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(e),n&&(this.requestCBHash_[r]=n)},Zh.prototype.listen=function(t,e,n,r){var i=t.queryIdentifier(),o=t.path.toString();this.log_("Listen called for "+o+" "+i),this.listens.has(o)||this.listens.set(o,new Map),Io(t.getQueryParams().isDefault()||!t.getQueryParams().loadsAllData(),"listen() called for non-default but complete query"),Io(!this.listens.get(o).has(i),"listen() called twice for same path/queryId."),n={onComplete:r,hashFn:e,query:t,tag:n},this.listens.get(o).set(i,n),this.connected_&&this.sendListen_(n)},Zh.prototype.sendListen_=function(r){var i=this,o=r.query,s=o.path.toString(),a=o.queryIdentifier();this.log_("Listen on "+s+" for "+a);var t={p:s};r.tag&&(t.q=o.queryObject(),t.t=r.tag),t.h=r.hashFn(),this.sendRequest("q",t,function(t){var e=t.d,n=t.s;Zh.warnOnListenWarnings_(e,o),(i.listens.get(s)&&i.listens.get(s).get(a))===r&&(i.log_("listen response",t),"ok"!==n&&i.removeListen_(s,a),r.onComplete&&r.onComplete(n,e))})},Zh.warnOnListenWarnings_=function(t,e){t&&"object"==typeof t&&Qo(t,"w")&&(t=Yo(t,"w"),Array.isArray(t)&&~t.indexOf("no_index")&&Qs("Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding "+(t='".indexOn": "'+e.getQueryParams().getIndex().toString()+'"')+" at "+(e=e.path.toString())+" to your security rules for better performance."))},Zh.prototype.refreshAuthToken=function(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},function(){}),this.reduceReconnectDelayIfAdminCredential_(t)},Zh.prototype.reduceReconnectDelayIfAdminCredential_=function(t){(t&&40===t.length||"object"==typeof(t=zo(t=t).claims)&&!0===t.admin)&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)},Zh.prototype.tryAuth=function(){var n,t,e,r=this;this.connected_&&this.authToken_&&(t=(e=zo(e=n=this.authToken_).claims)&&"object"==typeof e&&e.hasOwnProperty("iat")?"auth":"gauth",e={cred:n},null===this.authOverride_?e.noauth=!0:"object"==typeof this.authOverride_&&(e.authvar=this.authOverride_),this.sendRequest(t,e,function(t){var e=t.s,t=t.d||"error";r.authToken_===n&&("ok"===e?r.invalidAuthTokenCount_=0:r.onAuthRevoked_(e,t))}))},Zh.prototype.unlisten=function(t,e){var n=t.path.toString(),r=t.queryIdentifier();this.log_("Unlisten called for "+n+" "+r),Io(t.getQueryParams().isDefault()||!t.getQueryParams().loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(n,r)&&this.connected_&&this.sendUnlisten_(n,r,t.queryObject(),e)},Zh.prototype.sendUnlisten_=function(t,e,n,r){this.log_("Unlisten on "+t+" for "+e),t={p:t},r&&(t.q=n,t.t=r),this.sendRequest("n",t)},Zh.prototype.onDisconnectPut=function(t,e,n){this.connected_?this.sendOnDisconnect_("o",t,e,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:e,onComplete:n})},Zh.prototype.onDisconnectMerge=function(t,e,n){this.connected_?this.sendOnDisconnect_("om",t,e,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:e,onComplete:n})},Zh.prototype.onDisconnectCancel=function(t,e){this.connected_?this.sendOnDisconnect_("oc",t,null,e):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:e})},Zh.prototype.sendOnDisconnect_=function(t,e,n,r){n={p:e,d:n},this.log_("onDisconnect "+t,n),this.sendRequest(t,n,function(t){r&&setTimeout(function(){r(t.s,t.d)},Math.floor(0))})},Zh.prototype.put=function(t,e,n,r){this.putInternal("p",t,e,n,r)},Zh.prototype.merge=function(t,e,n,r){this.putInternal("m",t,e,n,r)},Zh.prototype.putInternal=function(t,e,n,r,i){n={p:e,d:n},void 0!==i&&(n.h=i),this.outstandingPuts_.push({action:t,request:n,onComplete:r}),this.outstandingPutCount_++,r=this.outstandingPuts_.length-1,this.connected_?this.sendPut_(r):this.log_("Buffering put: "+e)},Zh.prototype.sendPut_=function(e){var n=this,r=this.outstandingPuts_[e].action,t=this.outstandingPuts_[e].request,i=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(r,t,function(t){n.log_(r+" response",t),delete n.outstandingPuts_[e],n.outstandingPutCount_--,0===n.outstandingPutCount_&&(n.outstandingPuts_=[]),i&&i(t.s,t.d)})},Zh.prototype.reportStats=function(t){var e=this;this.connected_&&(t={c:t},this.log_("reportStats",t),this.sendRequest("s",t,function(t){"ok"!==t.s&&(t=t.d,e.log_("reportStats","Error sending stats: "+t))}))},Zh.prototype.onDataMessage_=function(t){if("r"in t){this.log_("from server: "+Go(t));var e=t.r,n=this.requestCBHash_[e];n&&(delete this.requestCBHash_[e],n(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}},Zh.prototype.onDataPush_=function(t,e){this.log_("handleServerMessage",t,e),"d"===t?this.onDataUpdate_(e.p,e.d,!1,e.t):"m"===t?this.onDataUpdate_(e.p,e.d,!0,e.t):"c"===t?this.onListenRevoked_(e.p,e.q):"ac"===t?this.onAuthRevoked_(e.s,e.d):"sd"===t?this.onSecurityDebugPacket_(e):Gs("Unrecognized action received from server: "+Go(t)+"\nAre you using the latest client?")},Zh.prototype.onReady_=function(t,e){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=e,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)},Zh.prototype.scheduleConnect_=function(t){var e=this;Io(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(function(){e.establishConnectionTimer_=null,e.establishConnection_()},Math.floor(t))},Zh.prototype.onVisible_=function(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Xh,this.realtime_||this.scheduleConnect_(0)),this.visible_=t},Zh.prototype.onOnline_=function(t){t?(this.log_("Browser went online."),this.reconnectDelay_=Xh,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())},Zh.prototype.onRealtimeDisconnect_=function(){var t;this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()&&(this.visible_?this.lastConnectionEstablishedTime_&&(3e4<(new Date).getTime()-this.lastConnectionEstablishedTime_&&(this.reconnectDelay_=Xh),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime()),t=(new Date).getTime()-this.lastConnectionAttemptTime_,t=Math.max(0,this.reconnectDelay_-t),t=Math.random()*t,this.log_("Trying to reconnect in "+t+"ms"),this.scheduleConnect_(t),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)),this.onConnectStatus_(!1)},Zh.prototype.establishConnection_=function(){var e,n,r,i,o,s,a,u,c,t,h=this;this.shouldReconnect_()&&(this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null,e=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),i=this.id+":"+Zh.nextConnectionId_++,s=(o=this).lastSessionId,a=!1,u=null,c=function(){u?u.close():(a=!0,r())},this.realtime_={close:c,sendRequest:function(t){Io(u,"sendRequest call when we're not connected not allowed."),u.sendRequest(t)}},t=this.forceTokenRefresh_,this.forceTokenRefresh_=!1,this.authTokenProvider_.getToken(t).then(function(t){a?aa("getToken() completed but was canceled"):(aa("getToken() completed. Creating connection."),o.authToken_=t&&t.accessToken,u=new Gh(i,o.repoInfo_,o.applicationId_,e,n,r,function(t){Qs(t+" ("+o.repoInfo_.toString()+")"),o.interrupt("server_kill")},s))}).then(null,function(t){o.log_("Failed to get token: "+t),a||(h.repoInfo_.nodeAdmin&&Qs(t),c())}))},Zh.prototype.interrupt=function(t){aa("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())},Zh.prototype.resume=function(t){aa("Resuming connection for reason: "+t),delete this.interruptReasons_[t],Xo(this.interruptReasons_)&&(this.reconnectDelay_=Xh,this.realtime_||this.scheduleConnect_(0))},Zh.prototype.handleTimestamp_=function(t){t-=(new Date).getTime(),this.onServerInfoUpdate_({serverTimeOffset:t})},Zh.prototype.cancelSentTransactions_=function(){for(var t=0;t<this.outstandingPuts_.length;t++){var e=this.outstandingPuts_[t];e&&"h"in e.request&&e.queued&&(e.onComplete&&e.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])},Zh.prototype.onListenRevoked_=function(t,e){e=e?e.map(function(t){return fa(t)}).join("$"):"default",(e=this.removeListen_(t,e))&&e.onComplete&&e.onComplete("permission_denied")},Zh.prototype.removeListen_=function(t,e){var n,r=new _a(t).toString();return this.listens.has(r)?(n=(t=this.listens.get(r)).get(e),t.delete(e),0===t.size&&this.listens.delete(r)):n=void 0,n},Zh.prototype.onAuthRevoked_=function(t,e){aa("Auth token revoked: "+t+"/"+e),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==t&&"permission_denied"!==t||(this.invalidAuthTokenCount_++,3<=this.invalidAuthTokenCount_&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))},Zh.prototype.onSecurityDebugPacket_=function(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))},Zh.prototype.restoreState_=function(){var t,e,n,r;this.tryAuth();try{for(var i=yo(this.listens.values()),o=i.next();!o.done;o=i.next()){var s=o.value;try{for(var a=(n=void 0,yo(s.values())),u=a.next();!u.done;u=a.next()){var c=u.value;this.sendListen_(c)}}catch(e){n={error:e}}finally{try{u&&!u.done&&(r=a.return)&&r.call(a)}finally{if(n)throw n.error}}}}catch(e){t={error:e}}finally{try{o&&!o.done&&(e=i.return)&&e.call(i)}finally{if(t)throw t.error}}for(var h=0;h<this.outstandingPuts_.length;h++)this.outstandingPuts_[h]&&this.sendPut_(h);for(;this.onDisconnectRequestQueue_.length;){var l=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(l.action,l.pathString,l.data,l.onComplete)}},Zh.prototype.sendConnectStats_=function(){var t={};t["sdk.js."+jh.replace(/\./g,"-")]=1,Po()?t["framework.cordova"]=1:Do()&&(t["framework.reactnative"]=1),this.reportStats(t)},Zh.prototype.shouldReconnect_=function(){var t=kh.getInstance().currentlyOnline();return Xo(this.interruptReasons_)&&t},Zh.nextPersistentConnectionId_=0,Zh.nextConnectionId_=0,Zh);function Zh(t,e,n,r,i,o,s){var a=Yh.call(this)||this;if(a.repoInfo_=t,a.applicationId_=e,a.onDataUpdate_=n,a.onConnectStatus_=r,a.onServerInfoUpdate_=i,a.authTokenProvider_=o,a.authOverride_=s,a.id=Zh.nextPersistentConnectionId_++,a.log_=ua("p:"+a.id+":"),a.interruptReasons_={},a.listens=new Map,a.outstandingPuts_=[],a.outstandingPutCount_=0,a.onDisconnectRequestQueue_=[],a.connected_=!1,a.reconnectDelay_=Xh,a.maxReconnectDelay_=Jh,a.securityDebugCallback_=null,a.lastSessionId=null,a.establishConnectionTimer_=null,a.visible_=!1,a.requestCBHash_={},a.requestNumber_=0,a.realtime_=null,a.authToken_=null,a.forceTokenRefresh_=!1,a.invalidAuthTokenCount_=0,a.firstConnection_=!0,a.lastConnectionAttemptTime_=null,a.lastConnectionEstablishedTime_=null,s&&!xo())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");return a.scheduleConnect_(0),Ch.getInstance().on("visible",a.onVisible_,a),-1===t.host.indexOf("fblocal")&&kh.getInstance().on("online",a.onOnline_,a),a}var tl,el=(lo(nl,tl=ru),nl.prototype.reportStats=function(t){throw new Error("Method not implemented.")},nl.getListenId_=function(t,e){return void 0!==e?"tag$"+e:(Io(t.getQueryParams().isDefault(),"should have a tag if it's not a default query."),t.path.toString())},nl.prototype.listen=function(t,e,n,r){var i=this,o=t.path.toString();this.log_("Listen called for "+o+" "+t.queryIdentifier());var s=nl.getListenId_(t,n),a={};this.listens_[s]=a,t=t.getQueryParams().toRestQueryStringParameters(),this.restRequest_(o+".json",t,function(t,e){404===t&&(t=e=null),null===t&&i.onDataUpdate_(o,e,!1,n),Yo(i.listens_,s)===a&&r(t?401===t?"permission_denied":"rest_error:"+t:"ok",null)})},nl.prototype.unlisten=function(t,e){e=nl.getListenId_(t,e),delete this.listens_[e]},nl.prototype.refreshAuthToken=function(t){},nl.prototype.restRequest_=function(r,i,o){var s=this;void 0===i&&(i={}),i.format="export",this.authTokenProvider_.getToken(!1).then(function(t){(t=t&&t.accessToken)&&(i.auth=t);var e=(s.repoInfo_.secure?"https://":"http://")+s.repoInfo_.host+r+"?ns="+s.repoInfo_.namespace+function(){for(var n=[],t=0,e=Object.entries(i);t<e.length;t++){var r=e[t];!function(e,t){Array.isArray(t)?t.forEach(function(t){n.push(encodeURIComponent(e)+"="+encodeURIComponent(t))}):n.push(encodeURIComponent(e)+"="+encodeURIComponent(t))}(r[0],r[1])}return n.length?"&"+n.join("&"):""}();s.log_("Sending REST request for "+e);var n=new XMLHttpRequest;n.onreadystatechange=function(){if(o&&4===n.readyState){s.log_("REST Response for "+e+" received. status:",n.status,"response:",n.responseText);var t=null;if(200<=n.status&&n.status<300){try{t=Ho(n.responseText)}catch(t){Qs("Failed to parse JSON response for "+e+": "+n.responseText)}o(null,t)}else 401!==n.status&&404!==n.status&&Qs("Got unsuccessful REST response for "+e+" Status: "+n.status),o(n.status);o=null}},n.open("GET",e,!0),n.send()})},nl);function nl(t,e,n){var r=tl.call(this)||this;return r.repoInfo_=t,r.onDataUpdate_=e,r.authTokenProvider_=n,r.log_=ua("p:rest:"),r.listens_={},r}var rl="repo_interrupt",il=(ol.prototype.start=function(){var s=this;if(this.stats_=dh.getCollection(this.repoInfo_),this.forceRestClient_||0<=("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i))this.server_=new el(this.repoInfo_,this.onDataUpdate_.bind(this),this.authTokenProvider_),setTimeout(this.onConnectStatus_.bind(this,!0),0);else{var t=this.app.options.databaseAuthVariableOverride;if(null!=t){if("object"!=typeof t)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Go(t)}catch(t){throw new Error("Invalid authOverride provided: "+t)}}this.persistentConnection_=new $h(this.repoInfo_,this.app.options.appId,this.onDataUpdate_.bind(this),this.onConnectStatus_.bind(this),this.onServerInfoUpdate_.bind(this),this.authTokenProvider_,t),this.server_=this.persistentConnection_}this.authTokenProvider_.addTokenChangeListener(function(t){s.server_.refreshAuthToken(t)}),this.statsReporter_=dh.getOrCreateReporter(this.repoInfo_,function(){return new mh(s.stats_,s.server_)}),this.transactionsInit_(),this.infoData_=new hh,this.infoSyncTree_=new uh({startListening:function(t,e,n,r){var i=[],o=s.infoData_.getNode(t.path);return o.isEmpty()||(i=s.infoSyncTree_.applyServerOverwrite(t.path,o),setTimeout(function(){r("ok")},0)),i},stopListening:function(){}}),this.updateInfo_("connected",!1),this.serverSyncTree_=new uh({startListening:function(n,t,e,r){return s.server_.listen(n,e,t,function(t,e){e=r(t,e),s.eventQueue_.raiseEventsForChangedPath(n.path,e)}),[]},stopListening:function(t,e){s.server_.unlisten(t,e)}})},ol.prototype.toString=function(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host},ol.prototype.name=function(){return this.repoInfo_.namespace},ol.prototype.serverTime=function(){var t=this.infoData_.getNode(new _a(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t},ol.prototype.generateServerValues=function(){return(t=t={timestamp:this.serverTime()}).timestamp=t.timestamp||(new Date).getTime(),t;var t},ol.prototype.onDataUpdate_=function(t,e,n,r){this.dataUpdateCount++;var i=new _a(t);e=this.interceptServerDataCallback_?this.interceptServerDataCallback_(t,e):e;var o,s,t=i;0<(s=r?n?(o=Jo(e,function(t){return Bu(t)}),this.serverSyncTree_.applyTaggedQueryMerge(i,o,r)):(o=Bu(e),this.serverSyncTree_.applyTaggedQueryOverwrite(i,o,r)):n?(n=Jo(e,function(t){return Bu(t)}),this.serverSyncTree_.applyServerMerge(i,n)):(e=Bu(e),this.serverSyncTree_.applyServerOverwrite(i,e))).length&&(t=this.rerunTransactions_(i)),this.eventQueue_.raiseEventsForChangedPath(t,s)},ol.prototype.interceptServerData_=function(t){this.interceptServerDataCallback_=t},ol.prototype.onConnectStatus_=function(t){this.updateInfo_("connected",t),!1===t&&this.runOnDisconnectEvents_()},ol.prototype.onServerInfoUpdate_=function(t){var n=this;pa(t,function(t,e){n.updateInfo_(t,e)})},ol.prototype.updateInfo_=function(t,e){t=new _a("/.info/"+t),e=Bu(e),this.infoData_.updateSnapshot(t,e),e=this.infoSyncTree_.applyServerOverwrite(t,e),this.eventQueue_.raiseEventsForChangedPath(t,e)},ol.prototype.getNextWriteId_=function(){return this.nextWriteId_++},ol.prototype.setWithPriority=function(r,t,e,i){var o=this;this.log_("set",{path:r.toString(),value:t,priority:e});var n=this.generateServerValues(),n=lc(t=Bu(t,e),e=this.serverSyncTree_.calcCompleteEventCache(r),n),s=this.getNextWriteId_(),n=this.serverSyncTree_.applyUserOverwrite(r,n,s,!0);this.eventQueue_.queueEvents(n),this.server_.put(r.toString(),t.val(!0),function(t,e){var n="ok"===t;n||Qs("set at "+r+" failed: "+t),n=o.serverSyncTree_.ackUserWrite(s,!n),o.eventQueue_.raiseEventsForChangedPath(r,n),o.callOnCompleteCallback(i,t,e)}),t=this.abortTransactions_(r),this.rerunTransactions_(t),this.eventQueue_.raiseEventsForChangedPath(t,[])},ol.prototype.update=function(i,t,o){var s=this;this.log_("update",{path:i.toString(),value:t});var a,e,n=!0,r=this.generateServerValues(),u={};pa(t,function(t,e){n=!1,u[t]=hc(i.child(t),Bu(e),s.serverSyncTree_,r)}),n?(aa("update() called with empty data.  Don't do anything."),this.callOnCompleteCallback(o,"ok")):(a=this.getNextWriteId_(),e=this.serverSyncTree_.applyUserMerge(i,u,a),this.eventQueue_.queueEvents(e),this.server_.merge(i.toString(),t,function(t,e){(r="ok"===t)||Qs("update at "+i+" failed: "+t);var n=s.serverSyncTree_.ackUserWrite(a,!r),r=0<n.length?s.rerunTransactions_(i):i;s.eventQueue_.raiseEventsForChangedPath(r,n),s.callOnCompleteCallback(o,t,e)}),pa(t,function(t){t=s.abortTransactions_(i.child(t)),s.rerunTransactions_(t)}),this.eventQueue_.raiseEventsForChangedPath(i,[]))},ol.prototype.runOnDisconnectEvents_=function(){var n=this;this.log_("onDisconnectEvents");var r=this.generateServerValues(),i=new gc;this.onDisconnect_.forEachTree(_a.Empty,function(t,e){e=hc(t,e,n.serverSyncTree_,r),i.remember(t,e)});var o=[];i.forEachTree(_a.Empty,function(t,e){o=o.concat(n.serverSyncTree_.applyServerOverwrite(t,e)),t=n.abortTransactions_(t),n.rerunTransactions_(t)}),this.onDisconnect_=new gc,this.eventQueue_.raiseEventsForChangedPath(_a.Empty,o)},ol.prototype.onDisconnectCancel=function(n,r){var i=this;this.server_.onDisconnectCancel(n.toString(),function(t,e){"ok"===t&&i.onDisconnect_.forget(n),i.callOnCompleteCallback(r,t,e)})},ol.prototype.onDisconnectSet=function(n,t,r){var i=this,o=Bu(t);this.server_.onDisconnectPut(n.toString(),o.val(!0),function(t,e){"ok"===t&&i.onDisconnect_.remember(n,o),i.callOnCompleteCallback(r,t,e)})},ol.prototype.onDisconnectSetWithPriority=function(n,t,e,r){var i=this,o=Bu(t,e);this.server_.onDisconnectPut(n.toString(),o.val(!0),function(t,e){"ok"===t&&i.onDisconnect_.remember(n,o),i.callOnCompleteCallback(r,t,e)})},ol.prototype.onDisconnectUpdate=function(n,r,i){var o=this;if(Xo(r))return aa("onDisconnect().update() called with empty data.  Don't do anything."),void this.callOnCompleteCallback(i,"ok");this.server_.onDisconnectMerge(n.toString(),r,function(t,e){"ok"===t&&pa(r,function(t,e){e=Bu(e),o.onDisconnect_.remember(n.child(t),e)}),o.callOnCompleteCallback(i,t,e)})},ol.prototype.addEventCallbackForQuery=function(t,e){e=(".info"===t.path.getFront()?this.infoSyncTree_:this.serverSyncTree_).addEventRegistration(t,e),this.eventQueue_.raiseEventsAtPath(t.path,e)},ol.prototype.removeEventCallbackForQuery=function(t,e){e=(".info"===t.path.getFront()?this.infoSyncTree_:this.serverSyncTree_).removeEventRegistration(t,e),this.eventQueue_.raiseEventsAtPath(t.path,e)},ol.prototype.interrupt=function(){this.persistentConnection_&&this.persistentConnection_.interrupt(rl)},ol.prototype.resume=function(){this.persistentConnection_&&this.persistentConnection_.resume(rl)},ol.prototype.stats=function(t){var i;void 0===t&&(t=!1),"undefined"!=typeof console&&(t=t?(this.statsListener_||(this.statsListener_=new yh(this.stats_)),this.statsListener_.get()):this.stats_.get(),i=Object.keys(t).reduce(function(t,e){return Math.max(e.length,t)},0),pa(t,function(t,e){for(var n=t,r=t.length;r<i+2;r++)n+=" ";console.log(n+e)}))},ol.prototype.statsIncrementCounter=function(t){this.stats_.incrementCounter(t),this.statsReporter_.includeStat(t)},ol.prototype.log_=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="";this.persistentConnection_&&(n=this.persistentConnection_.id+":"),aa.apply(void 0,mo([n],t))},ol.prototype.callOnCompleteCallback=function(n,r,i){n&&va(function(){var t,e;"ok"===r?n(null):(e=t=(r||"error").toUpperCase(),i&&(e+=": "+i),(e=new Error(e)).code=t,n(e))})},Object.defineProperty(ol.prototype,"database",{get:function(){return this.__database||(this.__database=new Cl(this))},enumerable:!1,configurable:!0}),ol);function ol(t,e,n,r){this.repoInfo_=t,this.forceRestClient_=e,this.app=n,this.authTokenProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new bh,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=new gc,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}var sl=(al.prototype.getStartPost=function(){return this.startPost_},al.prototype.getEndPost=function(){return this.endPost_},al.prototype.matches=function(t){return this.index_.compare(this.getStartPost(),t)<=0&&this.index_.compare(t,this.getEndPost())<=0},al.prototype.updateChild=function(t,e,n,r,i,o){return this.matches(new $a(e,n))||(n=Mu.EMPTY_NODE),this.indexedFilter_.updateChild(t,e,n,r,i,o)},al.prototype.updateFullNode=function(t,e,n){e.isLeafNode()&&(e=Mu.EMPTY_NODE);var r=(r=e.withIndex(this.index_)).updatePriority(Mu.EMPTY_NODE),i=this;return e.forEachChild(yu,function(t,e){i.matches(new $a(t,e))||(r=r.updateImmediateChild(t,Mu.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(t,r,n)},al.prototype.updatePriority=function(t,e){return t},al.prototype.filtersNodes=function(){return!0},al.prototype.getIndexedFilter=function(){return this.indexedFilter_},al.prototype.getIndex=function(){return this.index_},al.getStartPost_=function(t){if(t.hasStart()){var e=t.getIndexStartName();return t.getIndex().makePost(t.getIndexStartValue(),e)}return t.getIndex().minPost()},al.getEndPost_=function(t){if(t.hasEnd()){var e=t.getIndexEndName();return t.getIndex().makePost(t.getIndexEndValue(),e)}return t.getIndex().maxPost()},al);function al(t){this.indexedFilter_=new Uc(t.getIndex()),this.index_=t.getIndex(),this.startPost_=al.getStartPost_(t),this.endPost_=al.getEndPost_(t)}var ul=(cl.prototype.updateChild=function(t,e,n,r,i,o){return this.rangedFilter_.matches(new $a(e,n))||(n=Mu.EMPTY_NODE),t.getImmediateChild(e).equals(n)?t:t.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(t,e,n,r,i,o):this.fullLimitUpdateChild_(t,e,n,i,o)},cl.prototype.updateFullNode=function(t,e,n){var r;if(e.isLeafNode()||e.isEmpty())r=Mu.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<e.numChildren()&&e.isIndexed(this.index_)){r=Mu.EMPTY_NODE.withIndex(this.index_);var i=void 0;i=this.reverse_?e.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):e.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);for(var o=0;i.hasNext()&&o<this.limit_;){var s=i.getNext();if(!(this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),s)<=0:this.index_.compare(s,this.rangedFilter_.getEndPost())<=0))break;r=r.updateImmediateChild(s.name,s.node),o++}}else{r=(r=e.withIndex(this.index_)).updatePriority(Mu.EMPTY_NODE);for(var a,u=void 0,c=void 0,h=void 0,i=void 0,h=this.reverse_?(i=r.getReverseIterator(this.index_),u=this.rangedFilter_.getEndPost(),c=this.rangedFilter_.getStartPost(),a=this.index_.getCompare(),function(t,e){return a(e,t)}):(i=r.getIterator(this.index_),u=this.rangedFilter_.getStartPost(),c=this.rangedFilter_.getEndPost(),this.index_.getCompare()),o=0,l=!1;i.hasNext();)s=i.getNext(),!l&&h(u,s)<=0&&(l=!0),l&&o<this.limit_&&h(s,c)<=0?o++:r=r.updateImmediateChild(s.name,Mu.EMPTY_NODE)}return this.rangedFilter_.getIndexedFilter().updateFullNode(t,r,n)},cl.prototype.updatePriority=function(t,e){return t},cl.prototype.filtersNodes=function(){return!0},cl.prototype.getIndexedFilter=function(){return this.rangedFilter_.getIndexedFilter()},cl.prototype.getIndex=function(){return this.index_},cl.prototype.fullLimitUpdateChild_=function(t,e,n,r,i){var o,s=this.reverse_?(o=this.index_.getCompare(),function(t,e){return o(e,t)}):this.index_.getCompare(),a=t;Io(a.numChildren()===this.limit_,"");var u=new $a(e,n),c=this.reverse_?a.getFirstChild(this.index_):a.getLastChild(this.index_),h=this.rangedFilter_.matches(u);if(a.hasChild(e)){for(var l=a.getImmediateChild(e),f=r.getChildAfterChild(this.index_,c,this.reverse_);null!=f&&(f.name===e||a.hasChild(f.name));)f=r.getChildAfterChild(this.index_,f,this.reverse_);var p=null==f?1:s(f,u);return h&&!n.isEmpty()&&0<=p?(null!=i&&i.trackChildChange(Mc.childChangedChange(e,n,l)),a.updateImmediateChild(e,n)):(null!=i&&i.trackChildChange(Mc.childRemovedChange(e,l)),l=a.updateImmediateChild(e,Mu.EMPTY_NODE),null!=f&&this.rangedFilter_.matches(f)?(null!=i&&i.trackChildChange(Mc.childAddedChange(f.name,f.node)),l.updateImmediateChild(f.name,f.node)):l)}return!n.isEmpty()&&h&&0<=s(c,u)?(null!=i&&(i.trackChildChange(Mc.childRemovedChange(c.name,c.node)),i.trackChildChange(Mc.childAddedChange(e,n))),a.updateImmediateChild(e,n).updateImmediateChild(c.name,Mu.EMPTY_NODE)):t},cl);function cl(t){this.rangedFilter_=new sl(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft()}var hl=(ll.prototype.hasStart=function(){return this.startSet_},ll.prototype.isViewFromLeft=function(){return""===this.viewFrom_?this.startSet_:this.viewFrom_===ll.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_LEFT},ll.prototype.getIndexStartValue=function(){return Io(this.startSet_,"Only valid if start has been set"),this.indexStartValue_},ll.prototype.getIndexStartName=function(){return Io(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:ca},ll.prototype.hasEnd=function(){return this.endSet_},ll.prototype.getIndexEndValue=function(){return Io(this.endSet_,"Only valid if end has been set"),this.indexEndValue_},ll.prototype.getIndexEndName=function(){return Io(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:ha},ll.prototype.hasLimit=function(){return this.limitSet_},ll.prototype.hasAnchoredLimit=function(){return this.limitSet_&&""!==this.viewFrom_},ll.prototype.getLimit=function(){return Io(this.limitSet_,"Only valid if limit has been set"),this.limit_},ll.prototype.getIndex=function(){return this.index_},ll.prototype.copy_=function(){var t=new ll;return t.limitSet_=this.limitSet_,t.limit_=this.limit_,t.startSet_=this.startSet_,t.indexStartValue_=this.indexStartValue_,t.startNameSet_=this.startNameSet_,t.indexStartName_=this.indexStartName_,t.endSet_=this.endSet_,t.indexEndValue_=this.indexEndValue_,t.endNameSet_=this.endNameSet_,t.indexEndName_=this.indexEndName_,t.index_=this.index_,t.viewFrom_=this.viewFrom_,t},ll.prototype.limit=function(t){var e=this.copy_();return e.limitSet_=!0,e.limit_=t,e.viewFrom_="",e},ll.prototype.limitToFirst=function(t){var e=this.copy_();return e.limitSet_=!0,e.limit_=t,e.viewFrom_=ll.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_LEFT,e},ll.prototype.limitToLast=function(t){var e=this.copy_();return e.limitSet_=!0,e.limit_=t,e.viewFrom_=ll.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_RIGHT,e},ll.prototype.startAt=function(t,e){var n=this.copy_();return n.startSet_=!0,void 0===t&&(t=null),n.indexStartValue_=t,null!=e?(n.startNameSet_=!0,n.indexStartName_=e):(n.startNameSet_=!1,n.indexStartName_=""),n},ll.prototype.endAt=function(t,e){var n=this.copy_();return n.endSet_=!0,void 0===t&&(t=null),n.indexEndValue_=t,void 0!==e?(n.endNameSet_=!0,n.indexEndName_=e):(n.endNameSet_=!1,n.indexEndName_=""),n},ll.prototype.orderBy=function(t){var e=this.copy_();return e.index_=t,e},ll.prototype.getQueryObject=function(){var t,e=ll.WIRE_PROTOCOL_CONSTANTS_,n={};return this.startSet_&&(n[e.INDEX_START_VALUE]=this.indexStartValue_,this.startNameSet_&&(n[e.INDEX_START_NAME]=this.indexStartName_)),this.endSet_&&(n[e.INDEX_END_VALUE]=this.indexEndValue_,this.endNameSet_&&(n[e.INDEX_END_NAME]=this.indexEndName_)),this.limitSet_&&(n[e.LIMIT]=this.limit_,""===(t=this.viewFrom_)&&(t=this.isViewFromLeft()?e.VIEW_FROM_LEFT:e.VIEW_FROM_RIGHT),n[e.VIEW_FROM]=t),this.index_!==yu&&(n[e.INDEX]=this.index_.toString()),n},ll.prototype.loadsAllData=function(){return!(this.startSet_||this.endSet_||this.limitSet_)},ll.prototype.isDefault=function(){return this.loadsAllData()&&this.index_===yu},ll.prototype.getNodeFilter=function(){return this.loadsAllData()?new Uc(this.getIndex()):new(this.hasLimit()?ul:sl)(this)},ll.prototype.toRestQueryStringParameters=function(){var t,e=ll.REST_QUERY_CONSTANTS_,n={};return this.isDefault()||(t=this.index_===yu?e.PRIORITY_INDEX:this.index_===Hu?e.VALUE_INDEX:this.index_===su?e.KEY_INDEX:(Io(this.index_ instanceof Gu,"Unrecognized index type!"),this.index_.toString()),n[e.ORDER_BY]=Go(t),this.startSet_&&(n[e.START_AT]=Go(this.indexStartValue_),this.startNameSet_&&(n[e.START_AT]+=","+Go(this.indexStartName_))),this.endSet_&&(n[e.END_AT]=Go(this.indexEndValue_),this.endNameSet_&&(n[e.END_AT]+=","+Go(this.indexEndName_))),this.limitSet_&&(this.isViewFromLeft()?n[e.LIMIT_TO_FIRST]=this.limit_:n[e.LIMIT_TO_LAST]=this.limit_)),n},ll.WIRE_PROTOCOL_CONSTANTS_={INDEX_START_VALUE:"sp",INDEX_START_NAME:"sn",INDEX_END_VALUE:"ep",INDEX_END_NAME:"en",LIMIT:"l",VIEW_FROM:"vf",VIEW_FROM_LEFT:"l",VIEW_FROM_RIGHT:"r",INDEX:"i"},ll.REST_QUERY_CONSTANTS_={ORDER_BY:"orderBy",PRIORITY_INDEX:"$priority",VALUE_INDEX:"$value",KEY_INDEX:"$key",START_AT:"startAt",END_AT:"endAt",LIMIT_TO_FIRST:"limitToFirst",LIMIT_TO_LAST:"limitToLast"},ll.DEFAULT=new ll,ll);function ll(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=yu}var fl,pl=(lo(dl,fl=ao),dl.prototype.getKey=function(){return is("Reference.key",0,0,arguments.length),this.path.isEmpty()?null:this.path.getBack()},dl.prototype.child=function(t){var e;return is("Reference.child",1,1,arguments.length),"number"==typeof t?t=String(t):t instanceof _a||(null===this.path.getFront()?(0,Fa("Reference.child",1,e=(e=t)&&e.replace(/^\/*\.info(\/|$)/,"/"),!1)):Fa("Reference.child",1,t,!1)),new dl(this.repo,this.path.child(t))},dl.prototype.getParent=function(){is("Reference.parent",0,0,arguments.length);var t=this.path.parent();return null===t?null:new dl(this.repo,t)},dl.prototype.getRoot=function(){is("Reference.root",0,0,arguments.length);for(var t=this;null!==t.getParent();)t=t.getParent();return t},dl.prototype.databaseProp=function(){return this.repo.database},dl.prototype.set=function(t,e){is("Reference.set",1,2,arguments.length),Ua("Reference.set",this.path),Ra("Reference.set",1,t,this.path,!1),ss("Reference.set",2,e,!0);var n=new Ao;return this.repo.setWithPriority(this.path,t,null,n.wrapCallback(e)),n.promise},dl.prototype.update=function(t,e){if(is("Reference.update",1,2,arguments.length),Ua("Reference.update",this.path),Array.isArray(t)){for(var n={},r=0;r<t.length;++r)n[""+r]=t[r];t=n,Qs("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Da("Reference.update",1,t,this.path,!1),ss("Reference.update",2,e,!0);var i=new Ao;return this.repo.update(this.path,t,i.wrapCallback(e)),i.promise},dl.prototype.setWithPriority=function(t,e,n){if(is("Reference.setWithPriority",2,3,arguments.length),Ua("Reference.setWithPriority",this.path),Ra("Reference.setWithPriority",1,t,this.path,!1),xa("Reference.setWithPriority",2,e,!1),ss("Reference.setWithPriority",3,n,!0),".length"===this.getKey()||".keys"===this.getKey())throw"Reference.setWithPriority failed: "+this.getKey()+" is a read-only object.";var r=new Ao;return this.repo.setWithPriority(this.path,t,e,r.wrapCallback(n)),r.promise},dl.prototype.remove=function(t){return is("Reference.remove",0,1,arguments.length),Ua("Reference.remove",this.path),ss("Reference.remove",1,t,!0),this.set(null,t)},dl.prototype.transaction=function(t,r,e){if(is("Reference.transaction",1,3,arguments.length),Ua("Reference.transaction",this.path),ss("Reference.transaction",1,t,!1),ss("Reference.transaction",2,r,!0),function(){if(void 0!==e&&"boolean"!=typeof e)throw new Error(os("Reference.transaction",3,!0)+"must be a boolean.")}(),".length"===this.getKey()||".keys"===this.getKey())throw"Reference.transaction failed: "+this.getKey()+" is a read-only object.";void 0===e&&(e=!0);var i=new Ao;return"function"==typeof r&&i.promise.catch(function(){}),this.repo.startTransaction(this.path,t,function(t,e,n){t?i.reject(t):i.resolve(new Ga(e,n)),"function"==typeof r&&r(t,e,n)},e),i.promise},dl.prototype.setPriority=function(t,e){is("Reference.setPriority",1,2,arguments.length),Ua("Reference.setPriority",this.path),xa("Reference.setPriority",1,t,!1),ss("Reference.setPriority",2,e,!0);var n=new Ao;return this.repo.setWithPriority(this.path.child(".priority"),t,null,n.wrapCallback(e)),n.promise},dl.prototype.push=function(t,e){is("Reference.push",0,2,arguments.length),Ua("Reference.push",this.path),Ra("Reference.push",1,t,this.path,!0),ss("Reference.push",2,e,!0);var n=this.repo.serverTime(),r=Ja(n),n=this.child(r),i=this.child(r),t=null!=t?n.set(t,e).then(function(){return i}):Promise.resolve(i);return n.then=t.then.bind(t),n.catch=t.then.bind(t,void 0),"function"==typeof e&&t.catch(function(){}),n},dl.prototype.onDisconnect=function(){return Ua("Reference.onDisconnect",this.path),new Ka(this.repo,this.path)},Object.defineProperty(dl.prototype,"database",{get:function(){return this.databaseProp()},enumerable:!1,configurable:!0}),Object.defineProperty(dl.prototype,"key",{get:function(){return this.getKey()},enumerable:!1,configurable:!0}),Object.defineProperty(dl.prototype,"parent",{get:function(){return this.getParent()},enumerable:!1,configurable:!0}),Object.defineProperty(dl.prototype,"root",{get:function(){return this.getRoot()},enumerable:!1,configurable:!0}),dl);function dl(t,e){if(!(t instanceof il))throw new Error("new Reference() no longer supported - use app.database().");return fl.call(this,t,e,hl.DEFAULT,!1)||this}ao.__referenceConstructor=pl,th.__referenceConstructor=pl;function vl(){this.children={},this.childCount=0,this.value=null}var yl,gl=(ml.prototype.subTree=function(t){for(var e=t instanceof _a?t:new _a(t),n=this,r=e.getFront();null!==r;)n=new ml(r,n,Yo(n.node_.children,r)||new vl),r=(e=e.popFront()).getFront();return n},ml.prototype.getValue=function(){return this.node_.value},ml.prototype.setValue=function(t){Io(void 0!==t,"Cannot set value to undefined"),this.node_.value=t,this.updateParents_()},ml.prototype.clear=function(){this.node_.value=null,this.node_.children={},this.node_.childCount=0,this.updateParents_()},ml.prototype.hasChildren=function(){return 0<this.node_.childCount},ml.prototype.isEmpty=function(){return null===this.getValue()&&!this.hasChildren()},ml.prototype.forEachChild=function(n){var r=this;pa(this.node_.children,function(t,e){n(new ml(t,r,e))})},ml.prototype.forEachDescendant=function(e,t,n){t&&!n&&e(this),this.forEachChild(function(t){t.forEachDescendant(e,!0,n)}),t&&n&&e(this)},ml.prototype.forEachAncestor=function(t,e){for(var n=e?this:this.parent();null!==n;){if(t(n))return!0;n=n.parent()}return!1},ml.prototype.forEachImmediateDescendantWithValue=function(e){this.forEachChild(function(t){null!==t.getValue()?e(t):t.forEachImmediateDescendantWithValue(e)})},ml.prototype.path=function(){return new _a(null===this.parent_?this.name_:this.parent_.path()+"/"+this.name_)},ml.prototype.name=function(){return this.name_},ml.prototype.parent=function(){return this.parent_},ml.prototype.updateParents_=function(){null!==this.parent_&&this.parent_.updateChild_(this.name_,this)},ml.prototype.updateChild_=function(t,e){var n=e.isEmpty(),r=Qo(this.node_.children,t);n&&r?(delete this.node_.children[t],this.node_.childCount--,this.updateParents_()):n||r||(this.node_.children[t]=e.node_,this.node_.childCount++,this.updateParents_())},ml);function ml(t,e,n){void 0===t&&(t=""),void 0===e&&(e=null),void 0===n&&(n=new vl),this.name_=t,this.parent_=e,this.node_=n}(K=yl={})[K.RUN=0]="RUN",K[K.SENT=1]="SENT",K[K.COMPLETED=2]="COMPLETED",K[K.SENT_NEEDS_ABORT=3]="SENT_NEEDS_ABORT",K[K.NEEDS_ABORT=4]="NEEDS_ABORT",il.MAX_TRANSACTION_RETRIES_=25,il.prototype.transactionsInit_=function(){this.transactionQueueTree_=new gl},il.prototype.startTransaction=function(t,e,n,r){function i(){}this.log_("transaction on "+t);var o=new pl(this,t);o.on("value",i);var s,a={path:t,update:e,onComplete:n,status:null,order:ra(),applyLocally:r,retryCount:0,unwatcher:function(){o.off("value",i)},abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},e=this.getLatestState_(t);a.currentInputSnapshot=e,void 0===(n=a.update(e.val()))?(a.unwatcher(),a.currentOutputSnapshotRaw=null,a.currentOutputSnapshotResolved=null,a.onComplete&&(s=new Qu(a.currentInputSnapshot,new pl(this,a.path),yu),a.onComplete(null,!1,s))):(Wa("transaction failed: Data returned ",n,a.path),a.status=yl.RUN,(s=(r=this.transactionQueueTree_.subTree(t)).getValue()||[]).push(a),r.setValue(s),r=void 0,"object"==typeof n&&null!==n&&Qo(n,".priority")?(r=Yo(n,".priority"),Io(Pa(r),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):r=(this.serverSyncTree_.calcCompleteEventCache(t)||Mu.EMPTY_NODE).getPriority().val(),s=this.generateServerValues(),s=lc(r=Bu(n,r),e,s),a.currentOutputSnapshotRaw=r,a.currentOutputSnapshotResolved=s,a.currentWriteId=this.getNextWriteId_(),a=this.serverSyncTree_.applyUserOverwrite(t,s,a.currentWriteId,a.applyLocally),this.eventQueue_.raiseEventsForChangedPath(t,a),this.sendReadyTransactions_())},il.prototype.getLatestState_=function(t,e){return this.serverSyncTree_.calcCompleteEventCache(t,e)||Mu.EMPTY_NODE},il.prototype.sendReadyTransactions_=function(t){var e,n=this;void 0===t&&(t=this.transactionQueueTree_),t||this.pruneCompletedTransactionsBelowNode_(t),null!==t.getValue()?(e=this.buildTransactionQueue_(t),Io(0<e.length,"Sending zero length transaction queue"),e.every(function(t){return t.status===yl.RUN})&&this.sendTransactionQueue_(t.path(),e)):t.hasChildren()&&t.forEachChild(function(t){n.sendReadyTransactions_(t)})},il.prototype.sendTransactionQueue_=function(s,a){for(var u=this,t=a.map(function(t){return t.currentWriteId}),e=o=this.getLatestState_(s,t),t=o.hash(),n=0;n<a.length;n++){var r=a[n];Io(r.status===yl.RUN,"tryToSendTransactionQueue_: items in queue should all be run."),r.status=yl.SENT,r.retryCount++;var i=_a.relativePath(s,r.path),e=e.updateChild(i,r.currentOutputSnapshotRaw)}var o=e.val(!0),c=s;this.server_.put(c.toString(),o,function(t){u.log_("transaction put response",{path:c.toString(),status:t});var e=[];if("ok"===t){for(var n,r,i=[],o=0;o<a.length;o++)a[o].status=yl.COMPLETED,e=e.concat(u.serverSyncTree_.ackUserWrite(a[o].currentWriteId)),a[o].onComplete&&(n=a[o].currentOutputSnapshotResolved,r=new pl(u,a[o].path),r=new Qu(n,r,yu),i.push(a[o].onComplete.bind(null,null,!0,r))),a[o].unwatcher();for(u.pruneCompletedTransactionsBelowNode_(u.transactionQueueTree_.subTree(s)),u.sendReadyTransactions_(),u.eventQueue_.raiseEventsForChangedPath(s,e),o=0;o<i.length;o++)va(i[o])}else{if("datastale"===t)for(o=0;o<a.length;o++)a[o].status===yl.SENT_NEEDS_ABORT?a[o].status=yl.NEEDS_ABORT:a[o].status=yl.RUN;else for(Qs("transaction at "+c.toString()+" failed: "+t),o=0;o<a.length;o++)a[o].status=yl.NEEDS_ABORT,a[o].abortReason=t;u.rerunTransactions_(s)}},t)},il.prototype.rerunTransactions_=function(t){var t=(e=this.getAncestorTransactionNode_(t)).path(),e=this.buildTransactionQueue_(e);return this.rerunTransactionQueue_(e,t),t},il.prototype.rerunTransactionQueue_=function(t,e){if(0!==t.length){for(var n=[],r=[],i=t.filter(function(t){return t.status===yl.RUN}).map(function(t){return t.currentWriteId}),o=0;o<t.length;o++){var s,a,u,c=t[o],h=_a.relativePath(e,c.path),l=!1,f=void 0;Io(null!==h,"rerunTransactionsUnderNode_: relativePath should not be null."),c.status===yl.NEEDS_ABORT?(l=!0,f=c.abortReason,r=r.concat(this.serverSyncTree_.ackUserWrite(c.currentWriteId,!0))):c.status===yl.RUN&&(r=c.retryCount>=il.MAX_TRANSACTION_RETRIES_?(l=!0,f="maxretry",r.concat(this.serverSyncTree_.ackUserWrite(c.currentWriteId,!0))):(s=this.getLatestState_(c.path,i),c.currentInputSnapshot=s,void 0!==(u=t[o].update(s.val()))?(Wa("transaction failed: Data returned ",u,c.path),a=Bu(u),"object"==typeof u&&null!=u&&Qo(u,".priority")||(a=a.updatePriority(s.getPriority())),h=c.currentWriteId,u=lc(a,s,u=this.generateServerValues()),c.currentOutputSnapshotRaw=a,c.currentOutputSnapshotResolved=u,c.currentWriteId=this.getNextWriteId_(),i.splice(i.indexOf(h),1),(r=r.concat(this.serverSyncTree_.applyUserOverwrite(c.path,u,c.currentWriteId,c.applyLocally))).concat(this.serverSyncTree_.ackUserWrite(h,!0))):(l=!0,f="nodata",r.concat(this.serverSyncTree_.ackUserWrite(c.currentWriteId,!0))))),this.eventQueue_.raiseEventsForChangedPath(e,r),r=[],l&&(t[o].status=yl.COMPLETED,c=t[o].unwatcher,setTimeout(c,Math.floor(0)),t[o].onComplete&&("nodata"===f?(l=new pl(this,t[o].path),c=t[o].currentInputSnapshot,l=new Qu(c,l,yu),n.push(t[o].onComplete.bind(null,null,!1,l))):n.push(t[o].onComplete.bind(null,new Error(f),!1,null))))}for(this.pruneCompletedTransactionsBelowNode_(this.transactionQueueTree_),o=0;o<n.length;o++)va(n[o]);this.sendReadyTransactions_()}},il.prototype.getAncestorTransactionNode_=function(t){for(var e=this.transactionQueueTree_,n=t.getFront();null!==n&&null===e.getValue();)e=e.subTree(n),n=(t=t.popFront()).getFront();return e},il.prototype.buildTransactionQueue_=function(t){var e=[];return this.aggregateTransactionQueuesForNode_(t,e),e.sort(function(t,e){return t.order-e.order}),e},il.prototype.aggregateTransactionQueuesForNode_=function(t,e){var n=this,r=t.getValue();if(null!==r)for(var i=0;i<r.length;i++)e.push(r[i]);t.forEachChild(function(t){n.aggregateTransactionQueuesForNode_(t,e)})},il.prototype.pruneCompletedTransactionsBelowNode_=function(t){var e=this,n=t.getValue();if(n){for(var r=0,i=0;i<n.length;i++)n[i].status!==yl.COMPLETED&&(n[r]=n[i],r++);n.length=r,t.setValue(0<n.length?n:null)}t.forEachChild(function(t){e.pruneCompletedTransactionsBelowNode_(t)})},il.prototype.abortTransactions_=function(t){var e=this,n=this.getAncestorTransactionNode_(t).path();return(t=this.transactionQueueTree_.subTree(t)).forEachAncestor(function(t){e.abortTransactionsOnNode_(t)}),this.abortTransactionsOnNode_(t),t.forEachDescendant(function(t){e.abortTransactionsOnNode_(t)}),n},il.prototype.abortTransactionsOnNode_=function(t){var e=t.getValue();if(null!==e){for(var n=[],r=[],i=-1,o=0;o<e.length;o++)e[o].status===yl.SENT_NEEDS_ABORT||(e[o].status===yl.SENT?(Io(i===o-1,"All SENT items should be at beginning of queue."),e[i=o].status=yl.SENT_NEEDS_ABORT,e[o].abortReason="set"):(Io(e[o].status===yl.RUN,"Unexpected transaction status in abort"),e[o].unwatcher(),r=r.concat(this.serverSyncTree_.ackUserWrite(e[o].currentWriteId,!0)),e[o].onComplete&&n.push(e[o].onComplete.bind(null,new Error("set"),!1,null))));for(-1===i?t.setValue(null):e.length=i+1,this.eventQueue_.raiseEventsForChangedPath(t.path(),r),o=0;o<n.length;o++)va(n[o])}};var _l=(bl.prototype.getToken=function(t){return this.auth_?this.auth_.getToken(t).catch(function(t){return t&&"auth/token-not-initialized"===t.code?(aa("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)}):Promise.resolve(null)},bl.prototype.addTokenChangeListener=function(e){this.auth_?this.auth_.addAuthTokenListener(e):(setTimeout(function(){return e(null)},0),this.authProvider_.get().then(function(t){return t.addAuthTokenListener(e)}))},bl.prototype.removeTokenChangeListener=function(e){this.authProvider_.get().then(function(t){return t.removeAuthTokenListener(e)})},bl.prototype.notifyForInvalidToken=function(){var t='Provided authentication credentials for the app named "'+this.app_.name+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.app_.options?t+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.app_.options?t+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':t+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Qs(t)},bl);function bl(t,e){var n=this;this.app_=t,this.authProvider_=e,this.auth_=null,this.auth_=e.getImmediate({optional:!0}),this.auth_||e.get().then(function(t){return n.auth_=t})}var wl=(El.prototype.getToken=function(t){return Promise.resolve({accessToken:El.EMULATOR_AUTH_TOKEN})},El.prototype.addTokenChangeListener=function(t){t(El.EMULATOR_AUTH_TOKEN)},El.prototype.removeTokenChangeListener=function(t){},El.prototype.notifyForInvalidToken=function(){},El.EMULATOR_AUTH_TOKEN="owner",El);function El(){}var Il,Tl=(Sl.getInstance=function(){return Il=Il||new Sl},Sl.prototype.interrupt=function(){var t,e,n,r;try{for(var i=yo(Object.keys(this.repos_)),o=i.next();!o.done;o=i.next()){var s=o.value;try{for(var a=(n=void 0,yo(Object.keys(this.repos_[s]))),u=a.next();!u.done;u=a.next()){var c=u.value;this.repos_[s][c].interrupt()}}catch(e){n={error:e}}finally{try{u&&!u.done&&(r=a.return)&&r.call(a)}finally{if(n)throw n.error}}}}catch(e){t={error:e}}finally{try{o&&!o.done&&(e=i.return)&&e.call(i)}finally{if(t)throw t.error}}},Sl.prototype.resume=function(){var t,e,n,r;try{for(var i=yo(Object.keys(this.repos_)),o=i.next();!o.done;o=i.next()){var s=o.value;try{for(var a=(n=void 0,yo(Object.keys(this.repos_[s]))),u=a.next();!u.done;u=a.next()){var c=u.value;this.repos_[s][c].resume()}}catch(e){n={error:e}}finally{try{u&&!u.done&&(r=a.return)&&r.call(a)}finally{if(n)throw n.error}}}}catch(e){t={error:e}}finally{try{o&&!o.done&&(e=i.return)&&e.call(i)}finally{if(t)throw t.error}}},Sl.prototype.applyEmulatorSettings=function(t,e,n){t.repoInfo_=new Ca(e+":"+n,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams),t.repoInfo_.nodeAdmin&&(t.authTokenProvider_=new wl)},Sl.prototype.databaseFromApp=function(t,e,n,r){var i=n||t.options.databaseURL;void 0===i&&(t.options.projectId||zs("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),aa("Using default host for project ",t.options.projectId),i=t.options.projectId+"-default-rtdb.firebaseio.com");var o,s=Aa(i,r),a=s.repoInfo,n=void 0;return"undefined"!=typeof process&&(n=process.env.FIREBASE_DATABASE_EMULATOR_HOST),n?(o=!0,a=(s=Aa(i="http://"+n+"?ns="+a.namespace,r)).repoInfo):o=!s.repoInfo.secure,e=r&&o?new wl:new _l(t,e),ja("Invalid Firebase Database URL",1,s),s.path.isEmpty()||zs("Database URL must point to the root of a Firebase Database (not including a child path)."),this.createRepo(a,t,e).database},Sl.prototype.deleteRepo=function(t){var e=Yo(this.repos_,t.app.name);e&&Yo(e,t.key)===t||zs("Database "+t.app.name+"("+t.repoInfo_+") has already been deleted."),t.interrupt(),delete e[t.key]},Sl.prototype.createRepo=function(t,e,n){var r=Yo(this.repos_,e.name);r||(r={},this.repos_[e.name]=r);var i=Yo(r,t.toURLString());return i&&zs("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),i=new il(t,this.useRestClient_,e,n),r[t.toURLString()]=i},Sl.prototype.forceRestClient=function(t){this.useRestClient_=t},Sl);function Sl(){this.repos_={},this.useRestClient_=!1}var Cl=(Object.defineProperty(Nl.prototype,"repo_",{get:function(){return this.instanceStarted_||(this.repoInternal_.start(),this.instanceStarted_=!0),this.repoInternal_},enumerable:!1,configurable:!0}),Object.defineProperty(Nl.prototype,"root_",{get:function(){return this.rootInternal_||(this.rootInternal_=new pl(this.repo_,_a.Empty)),this.rootInternal_},enumerable:!1,configurable:!0}),Object.defineProperty(Nl.prototype,"app",{get:function(){return this.repo_.app},enumerable:!1,configurable:!0}),Nl.prototype.useEmulator=function(t,e){this.checkDeleted_("useEmulator"),this.instanceStarted_?zs("Cannot call useEmulator() after instance has already been initialized."):Tl.getInstance().applyEmulatorSettings(this.repoInternal_,t,e)},Nl.prototype.ref=function(t){return this.checkDeleted_("ref"),is("database.ref",0,1,arguments.length),t instanceof pl?this.refFromURL(t.toString()):void 0!==t?this.root_.child(t):this.root_},Nl.prototype.refFromURL=function(t){var e="database.refFromURL";this.checkDeleted_(e),is(e,1,1,arguments.length);var n=Aa(t,this.repo_.repoInfo_.nodeAdmin);return ja(e,1,n),(t=n.repoInfo).isCustomHost()||t.host===this.repo_.repoInfo_.host||zs(e+": Host name does not match the current database: (found "+t.host+" but expected "+this.repo_.repoInfo_.host+")"),this.ref(n.path.toString())},Nl.prototype.checkDeleted_=function(t){null===this.repoInternal_&&zs("Cannot call "+t+" on a deleted database.")},Nl.prototype.goOffline=function(){is("database.goOffline",0,0,arguments.length),this.checkDeleted_("goOffline"),this.repo_.interrupt()},Nl.prototype.goOnline=function(){is("database.goOnline",0,0,arguments.length),this.checkDeleted_("goOnline"),this.repo_.resume()},Nl.ServerValue={TIMESTAMP:{".sv":"timestamp"},increment:function(t){return{".sv":{increment:t}}}},Nl);function Nl(t){var e=this;this.repoInternal_=t,this.instanceStarted_=!1,this.INTERNAL={delete:function(){return po(e,void 0,void 0,function(){return vo(this,function(t){return this.checkDeleted_("delete"),Tl.getInstance().deleteRepo(this.repo_),this.repoInternal_=null,this.rootInternal_=null,[2]})})}},t instanceof il||zs("Don't call new Database() directly - please use firebase.database().")}Y=Object.freeze({__proto__:null,forceLongPolling:function(){Bh.forceDisallow(),Lh.forceAllow()},forceWebSockets:function(){Lh.forceDisallow()},isWebSocketsAvailable:function(){return Bh.isAvailable()},setSecurityDebugCallback:function(t,e){t.repo.persistentConnection_.securityDebugCallback_=e},stats:function(t,e){t.repo.stats(e)},statsIncrementCounter:function(t,e){t.repo.statsIncrementCounter(e)},dataUpdateCount:function(t){return t.repo.dataUpdateCount},interceptServerData:function(t,e){return t.repo.interceptServerData_(e)},initStandalone:function(t){var e=t.app,n=t.url,r=t.version,i=t.customAuthImpl,o=t.namespace,t=void 0!==(t=t.nodeAdmin)&&t;return Vh(r),(r=new gs("auth-internal",new _s("database-standalone"))).setComponent(new ds("auth-internal",function(){return i},"PRIVATE")),{instance:Tl.getInstance().databaseFromApp(e,r,n,t),namespace:o}}}),Pr=$h;$h.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)},$h.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};io=Object.freeze({__proto__:null,DataConnection:Pr,RealTimeConnection:Gh,hijackHash:function(i){var o=$h.prototype.put;return $h.prototype.put=function(t,e,n,r){void 0!==r&&(r=i()),o.call(this,t,e,n,r)},function(){$h.prototype.put=o}},ConnectionTarget:Ca,queryIdentifier:function(t){return t.queryIdentifier()},forceRestClient:function(t){Tl.getInstance().forceRestClient(t)}}),wt=Cl.ServerValue;Vh((ft=Vl).SDK_VERSION),ft.INTERNAL.registerComponent(new ds("database",function(t,e){var n=t.getProvider("app").getImmediate(),t=t.getProvider("auth-internal");return Tl.getInstance().databaseFromApp(n,t,e)},"PUBLIC").setServiceProps({Reference:pl,Query:ao,Database:Cl,DataSnapshot:Qu,enableLogging:Hs,INTERNAL:Y,ServerValue:wt,TEST_ACCESS:io}).setMultipleInstances(!0)),ft.registerVersion("@firebase/database","0.7.1");var Al=function(t,e){return(Al=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function kl(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}var L="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},Ol=L||self;function Pl(){}function Rl(t){var e=typeof t;return"object"!=e?e:t?Array.isArray(t)?"array":e:"null"}function Dl(t){var e=Rl(t);return"array"==e||"object"==e&&"number"==typeof t.length}function xl(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var Ll="closure_uid_"+(1e9*Math.random()>>>0),Ml=0;function Fl(t,e,n){return t.call.apply(t.bind,arguments)}function Ul(e,n,t){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var t=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(t,r),e.apply(n,t)}}return function(){return e.apply(n,arguments)}}function jl(t,e,n){return(jl=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Fl:Ul).apply(null,arguments)}function ql(e){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}var Bl=Date.now;function Wl(t,e){function n(){}n.prototype=e.prototype,t.X=e.prototype,t.prototype=new n,t.prototype.constructor=t}function Kl(){this.j=this.j,this.i=this.i}Kl.prototype.j=!1,Kl.prototype.ja=function(){!this.j&&(this.j=!0,this.G(),0)&&(Object.prototype.hasOwnProperty.call(this,Ll)&&this[Ll]||(this[Ll]=++Ml))},Kl.prototype.G=function(){if(this.i)for(;this.i.length;)this.i.shift()()};var Hl=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},Gl=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"==typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)};function zl(){return Array.prototype.concat.apply([],arguments)}function Ql(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}function Yl(t){return/^[\s\xa0]*$/.test(t)}var Xl=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function Jl(t,e){return-1!=t.indexOf(e)}function $l(t,e){return t<e?-1:e<t?1:0}Y=Ol.navigator;function Zl(t,e,n){for(var r in t)e.call(n,t[r],r,t)}function tf(t){var e,n={};for(e in t)n[e]=t[e];return n}hf=(Y=Y&&Y.userAgent)?Y:"";var ef="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function nf(t){for(var e,n,r=1;r<arguments.length;r++){for(e in n=arguments[r])t[e]=n[e];for(var i=0;i<ef.length;i++)e=ef[i],Object.prototype.hasOwnProperty.call(n,e)&&(t[e]=n[e])}}function rf(t){return rf[" "](t),t}rf[" "]=Pl;var of,wt=Jl(hf,"Opera"),sf=Jl(hf,"Trident")||Jl(hf,"MSIE"),io=Jl(hf,"Edge"),af=io||sf,uf=Jl(hf,"Gecko")&&!(Jl(hf.toLowerCase(),"webkit")&&!Jl(hf,"Edge"))&&!(Jl(hf,"Trident")||Jl(hf,"MSIE"))&&!Jl(hf,"Edge"),ft=Jl(hf.toLowerCase(),"webkit")&&!Jl(hf,"Edge");function cf(){var t=Ol.document;return t?t.documentMode:void 0}var Y="",hf=(hf=hf,uf?/rv:([^\);]+)(\)|;)/.exec(hf):io?/Edge\/([\d\.]+)/.exec(hf):sf?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(hf):ft?/WebKit\/(\S+)/.exec(hf):wt?/(?:Version)[ \/]?(\S+)/.exec(hf):void 0);hf&&(Y=hf?hf[1]:""),of=sf&&null!=(hf=cf())&&hf>parseFloat(Y)?String(hf):Y;var lf={};function ff(a){return t=a,e=function(){for(var t=0,e=Xl(String(of)).split("."),n=Xl(String(a)).split("."),r=Math.max(e.length,n.length),i=0;0==t&&i<r;i++)for(var o=e[i]||"",s=n[i]||"";o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],(0!=o[0].length||0!=s[0].length)&&(t=$l(0==o[1].length?0:parseInt(o[1],10),0==s[1].length?0:parseInt(s[1],10))||$l(0==o[2].length,0==s[2].length)||$l(o[2],s[2]),o=o[3],s=s[3],0==t););return 0<=t},n=lf,Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e();var t,e,n}var pf=Ol.document&&sf&&(cf()||parseInt(of,10))||void 0,df=!sf||9<=Number(pf),vf=sf&&!ff("9"),yf=function(){if(!Ol.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{Ol.addEventListener("test",Pl,e),Ol.removeEventListener("test",Pl,e)}catch(t){}return t}();function gf(t,e){this.type=t,this.a=this.target=e,this.defaultPrevented=!1}function mf(t,e){if(gf.call(this,t?t.type:""),this.relatedTarget=this.a=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.c=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.a=e,e=t.relatedTarget){if(uf){t:{try{rf(e.nodeName);var i=!0;break t}catch(t){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:_f[t.pointerType]||"",(this.c=t).defaultPrevented&&this.b()}}gf.prototype.b=function(){this.defaultPrevented=!0},Wl(mf,gf);var _f={2:"touch",3:"pen",4:"mouse"};mf.prototype.b=function(){mf.X.b.call(this);var t=this.c;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,vf)try{(t.ctrlKey||112<=t.keyCode&&t.keyCode<=123)&&(t.keyCode=-1)}catch(t){}};var bf="closure_listenable_"+(1e6*Math.random()|0),wf=0;function Ef(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.ca=i,this.key=++wf,this.Y=this.Z=!1}function If(t){t.Y=!0,t.listener=null,t.proxy=null,t.src=null,t.ca=null}function Tf(t){this.src=t,this.a={},this.b=0}function Sf(t,e){var n,r,i,o=e.type;o in t.a&&(n=t.a[o],(i=0<=(r=Hl(n,e)))&&Array.prototype.splice.call(n,r,1),i&&(If(e),0==t.a[o].length&&(delete t.a[o],t.b--)))}function Cf(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.Y&&o.listener==e&&o.capture==!!n&&o.ca==r)return i}return-1}Tf.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var s=Cf(t,e,r,i);return-1<s?(e=t[s],n||(e.Z=!1)):((e=new Ef(e,this.src,o,!!r,i)).Z=n,t.push(e)),e};var Nf="closure_lm_"+(1e6*Math.random()|0),Af={};function kf(t,e,n,r,i){if(r&&r.once)return function t(e,n,r,i,o){if(Array.isArray(n)){for(var s=0;s<n.length;s++)t(e,n[s],r,i,o);return null}return r=Ff(r),e&&e[bf]?e.wa(n,r,xl(i)?!!i.capture:!!i,o):Of(e,n,r,!0,i,o)}(t,e,n,r,i);if(Array.isArray(e)){for(var o=0;o<e.length;o++)kf(t,e[o],n,r,i);return null}return n=Ff(n),t&&t[bf]?t.va(e,n,xl(r)?!!r.capture:!!r,i):Of(t,e,n,!1,r,i)}function Of(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var s=xl(i)?!!i.capture:!!i;if(s&&!df)return null;var a,u,c=Lf(t);if(c||(t[Nf]=c=new Tf(t)),(n=c.add(e,n,r,s,o)).proxy)return n;if(a=xf,r=u=df?function(t){return a.call(u.src,u.listener,t)}:function(t){if(!(t=a.call(u.src,u.listener,t)))return t},(n.proxy=r).src=t,r.listener=n,t.addEventListener)yf||(i=s),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(Rf(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function Pf(t){var e,n,r;"number"!=typeof t&&t&&!t.Y&&((e=t.src)&&e[bf]?Sf(e.c,t):(n=t.type,r=t.proxy,e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(Rf(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=Lf(e))?(Sf(n,t),0==n.b&&(n.src=null,e[Nf]=null)):If(t)))}function Rf(t){return t in Af?Af[t]:Af[t]="on"+t}function Df(t,e){var n=t.listener,r=t.ca||t.src;return t.Z&&Pf(t),n.call(r,e)}function xf(t,e){if(t.Y)return!0;if(df)return Df(t,new mf(e,this));if(!e)t:{e=["window","event"];for(var n=Ol,r=0;r<e.length;r++)if(null==(n=n[e[r]])){e=null;break t}e=n}return Df(t,e=new mf(e,this))}function Lf(t){return(t=t[Nf])instanceof Tf?t:null}var Mf="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ff(e){return"function"==Rl(e)?e:(e[Mf]||(e[Mf]=function(t){return e.handleEvent(t)}),e[Mf])}function Uf(){Kl.call(this),this.c=new Tf(this),(this.J=this).C=null}function jf(t,e){var n,r=t.C;if(r)for(n=[];r;r=r.C)n.push(r);if(t=t.J,r=e.type||e,"string"==typeof e?e=new gf(e,t):e instanceof gf?e.target=e.target||t:(s=e,nf(e=new gf(r,t),s)),s=!0,n)for(var i=n.length-1;0<=i;i--)var o=e.a=n[i],s=Vf(o,r,!0,e)&&s;if(s=Vf(o=e.a=t,r,!0,e)&&s,s=Vf(o,r,!1,e)&&s,n)for(i=0;i<n.length;i++)s=Vf(o=e.a=n[i],r,!1,e)&&s}function Vf(t,e,n,r){if(!(e=t.c.a[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var s,a,u=e[o];u&&!u.Y&&u.capture==n&&(s=u.listener,a=u.ca||u.src,u.Z&&Sf(t.c,u),i=!1!==s.call(a,r)&&i)}return i&&!r.defaultPrevented}Wl(Uf,Kl),Uf.prototype[bf]=!0,(ru=Uf.prototype).addEventListener=function(t,e,n,r){kf(this,t,e,n,r)},ru.removeEventListener=function(t,e,n,r){!function t(e,n,r,i,o){if(Array.isArray(n))for(var s=0;s<n.length;s++)t(e,n[s],r,i,o);else i=xl(i)?!!i.capture:!!i,r=Ff(r),e&&e[bf]?(e=e.c,(n=String(n).toString())in e.a&&-1<(r=Cf(s=e.a[n],r,i,o))&&(If(s[r]),Array.prototype.splice.call(s,r,1),0==s.length&&(delete e.a[n],e.b--))):(e=e&&Lf(e))&&(n=e.a[n.toString()],e=-1,n&&(e=Cf(n,r,i,o)),(r=-1<e?n[e]:null)&&Pf(r))}(this,t,e,n,r)},ru.G=function(){if(Uf.X.G.call(this),this.c){var t,e=this.c;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)If(n[r]);delete e.a[t],e.b--}}this.C=null},ru.va=function(t,e,n,r){return this.c.add(String(t),e,!1,n,r)},ru.wa=function(t,e,n,r){return this.c.add(String(t),e,!0,n,r)};var qf=Ol.JSON.stringify;function Bf(){this.b=this.a=null}var Wf,Kf=(Hf.prototype.get=function(){var t;return 0<this.b?(this.b--,t=this.a,this.a=t.next,t.next=null):t=this.c(),t},new Hf(function(){return new Gf},function(t){t.reset()},100));function Hf(t,e,n){this.f=n,this.c=t,this.g=e,this.b=0,this.a=null}function Gf(){this.next=this.b=this.a=null}function zf(t,e){var n;Wf||(n=Ol.Promise.resolve(void 0),Wf=function(){n.then(Xf)}),Qf||(Wf(),Qf=!0),Yf.add(t,e)}Bf.prototype.add=function(t,e){var n=Kf.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},Gf.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null};var Qf=!(Gf.prototype.reset=function(){this.next=this.b=this.a=null}),Yf=new Bf;function Xf(){for(var t,e;n=e=void 0,n=null,(e=Yf).a&&(n=e.a,e.a=e.a.next,e.a||(e.b=null),n.next=null),t=n;){try{t.a.call(t.b)}catch(t){!function(t){Ol.setTimeout(function(){throw t},0)}(t)}var n=Kf;n.g(t),n.b<n.f&&(n.b++,t.next=n.a,n.a=t)}Qf=!1}function Jf(t,e){Uf.call(this),this.b=t||1,this.a=e||Ol,this.f=jl(this.Xa,this),this.g=Bl()}function $f(t){t.aa=!1,t.M&&(t.a.clearTimeout(t.M),t.M=null)}function Zf(t,e,n){if("function"==Rl(t))n&&(t=jl(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=jl(t.handleEvent,t)}return 2147483647<Number(e)?-1:Ol.setTimeout(t,e||0)}Wl(Jf,Uf),(ru=Jf.prototype).aa=!1,ru.M=null,ru.Xa=function(){var t;this.aa&&(0<(t=Bl()-this.g)&&t<.8*this.b?this.M=this.a.setTimeout(this.f,this.b-t):(this.M&&(this.a.clearTimeout(this.M),this.M=null),jf(this,"tick"),this.aa&&($f(this),this.start())))},ru.start=function(){this.aa=!0,this.M||(this.M=this.a.setTimeout(this.f,this.b),this.g=Bl())},ru.G=function(){Jf.X.G.call(this),$f(this),delete this.a};var tp,ep,np=(Al(ep=ip,Y=tp=Kl),ep.prototype=null===Y?Object.create(Y):(rp.prototype=Y.prototype,new rp),ip.prototype.f=function(t){this.b=arguments,this.a?this.c=!0:function t(e){e.a=Zf(function(){e.a=null,e.c&&(e.c=!1,t(e))},e.h);var n=e.b;e.b=null,e.g.apply(null,n)}(this)},ip.prototype.G=function(){tp.prototype.G.call(this),this.a&&(Ol.clearTimeout(this.a),this.a=null,this.c=!1,this.b=null)},ip);function rp(){this.constructor=ep}function ip(t,e,n){var r=tp.call(this)||this;return r.g=null!=n?t.bind(n):t,r.h=e,r.b=null,r.c=!1,r.a=null,r}function op(t){Kl.call(this),this.b=t,this.a={}}Wl(op,Kl);var sp=[];function ap(t,e,n,r){Array.isArray(n)||(n&&(sp[0]=n.toString()),n=sp);for(var i=0;i<n.length;i++){var o=kf(e,n[i],r||t.handleEvent,!1,t.b||t);if(!o)break;t.a[o.key]=o}}function up(t){Zl(t.a,function(t,e){this.a.hasOwnProperty(e)&&Pf(t)},t),t.a={}}function cp(){this.a=!0}function hp(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+function(t,e){if(!t.a)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(r.length<2)){var i=r[1];if(Array.isArray(i)&&!(i.length<1)&&"noop"!=(r=i[0])&&"stop"!=r&&"close"!=r)for(var o=1;o<i.length;o++)i[o]=""}}return qf(n)}catch(t){return e}}(t,n)+(r?" "+r:"")})}op.prototype.G=function(){op.X.G.call(this),up(this)},op.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},cp.prototype.info=function(){};var lp=null;function fp(){return lp=lp||new Uf}function pp(t){gf.call(this,"serverreachability",t)}function dp(){var t=fp();jf(t,new pp(t))}function vp(t){gf.call(this,"statevent",t)}function yp(){var t=fp();jf(t,new vp(t))}function gp(t){gf.call(this,"timingevent",t)}function mp(t,e){if("function"!=Rl(t))throw Error("Fn must not be null and must be a function");return Ol.setTimeout(function(){t()},e)}function _p(){}function bp(t){var e;return(e=t.a)||(e=t.a={}),e}function wp(){}Wl(pp,gf),Wl(vp,gf),Wl(gp,gf),K={NO_ERROR:0,Ya:1,fb:2,eb:3,ab:4,cb:5,gb:6,Da:7,TIMEOUT:8,jb:9},Pr={$a:"complete",nb:"success",Ea:"error",Da:"abort",lb:"ready",mb:"readystatechange",TIMEOUT:"timeout",hb:"incrementaldata",kb:"progress",bb:"downloadprogress",ob:"uploadprogress"},_p.prototype.a=null;var Ep,L={OPEN:"a",Za:"b",Ea:"c",ib:"d"};function Ip(){gf.call(this,"d")}function Tp(){gf.call(this,"c")}function Sp(){}function Cp(t,e,n,r){this.g=t,this.c=e,this.f=n,this.S=r||1,this.J=new op(this),this.P=Np,t=af?125:void 0,this.R=new Jf(t),this.B=null,this.b=!1,this.j=this.l=this.i=this.H=this.u=this.T=this.o=null,this.s=[],this.a=null,this.D=0,this.h=this.m=null,this.N=-1,this.A=!1,this.O=0,this.F=null,this.V=this.C=this.U=this.I=!1}Wl(Ip,gf),Wl(Tp,gf),Wl(Sp,_p),Ep=new Sp;var Np=45e3,Ap={},kp={};function Op(t,e,n){t.H=1,t.i=Jp(Hp(e)),t.j=n,t.I=!0,Pp(t,null)}function Pp(t,e){t.u=Bl(),Dp(t),t.l=Hp(t.i);var s,a,u,c,h,l,n=t.l,r=t.S;Array.isArray(r)||(r=[String(r)]),hd(n.b,"t",r),t.D=0,t.a=rv(t.g,t.g.C?e:null),0<t.O&&(t.F=new np(jl(t.Ca,t,t.a),t.O)),ap(t.J,t.a,"readystatechange",t.Va),e=t.B?tf(t.B):{},t.j?(t.m||(t.m="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.a.ba(t.l,t.m,t.j,e)):(t.m="GET",t.a.ba(t.l,t.m,null,e)),dp(),s=t.c,a=t.m,u=t.l,c=t.f,h=t.S,l=t.j,s.info(function(){if(s.a)if(l)for(var t="",e=l.split("&"),n=0;n<e.length;n++){var r,i,o=e[n].split("=");1<o.length&&(r=o[0],o=o[1],t=2<=(i=r.split("_")).length&&"type"==i[1]?t+(r+"=")+o+"&":t+(r+"=redacted&"))}else t=null;else t=l;return"XMLHTTP REQ ("+c+") [attempt "+h+"]: "+a+"\n"+u+"\n"+t})}function Rp(t,e,n){for(var r,i,o,s=!0;!t.A&&t.D<n.length;){var a=(a=n,o=void 0,i=(r=t).D,-1==(o=a.indexOf("\n",i))?kp:(i=Number(a.substring(i,o)),isNaN(i)?Ap:(o+=1)+i>a.length?kp:(a=a.substr(o,i),r.D=o+i,a)));if(a==kp){4==e&&(t.h=4,yp(),s=!1),hp(t.c,t.f,null,"[Incomplete Response]");break}if(a==Ap){t.h=4,yp(),hp(t.c,t.f,n,"[Invalid Chunk]"),s=!1;break}hp(t.c,t.f,a,null),Up(t,a)}4==e&&0==n.length&&(t.h=1,yp(),s=!1),t.b=t.b&&s,s?0<n.length&&!t.V&&(t.V=!0,(e=t.g).a==t&&e.U&&!e.F&&(e.c.info("Great, no buffering proxy detected. Bytes received: "+n.length),Yd(e),e.F=!0,yp())):(hp(t.c,t.f,n,"[Invalid Chunked Response]"),Fp(t),Mp(t))}function Dp(t){t.T=Bl()+t.P,xp(t,t.P)}function xp(t,e){if(null!=t.o)throw Error("WatchDog timer not null");t.o=mp(jl(t.Ta,t),e)}function Lp(t){t.o&&(Ol.clearTimeout(t.o),t.o=null)}function Mp(t){0==t.g.v||t.A||$d(t.g,t)}function Fp(t){Lp(t);var e=t.F;e&&"function"==typeof e.ja&&e.ja(),t.F=null,$f(t.R),up(t.J),t.a&&(e=t.a,t.a=null,e.abort(),e.ja())}function Up(t,e){try{var n,r,i,o,s,a=t.g;if(0!=a.v&&(a.a==t||gd(a.b,t)))if(a.I=t.N,!t.C&&gd(a.b,t)&&3==a.v){try{var u=a.ka.a.parse(e)}catch(t){u=null}if(Array.isArray(u)&&3==u.length){var c=u;if(0==c[0]){t:if(!a.j){if(a.a){if(!(a.a.u+3e3<t.u))break t;Jd(a),Vd(a)}Qd(a),yp()}}else a.oa=c[1],0<a.oa-a.P&&c[2]<37500&&a.H&&0==a.o&&!a.m&&(a.m=mp(jl(a.Qa,a),6e3));if(yd(a.b)<=1&&a.ea){try{a.ea()}catch(t){}a.ea=void 0}}else tv(a,11)}else if(!t.C&&a.a!=t||Jd(a),!Yl(e))for(e=u=a.ka.a.parse(e),u=0;u<e.length;u++)c=e[u],a.P=c[0],c=c[1],2==a.v?"c"==c[0]?(a.J=c[1],a.ga=c[2],null!=(r=c[3])&&(a.ha=r,a.c.info("VER="+a.ha)),null!=(o=c[4])&&(a.pa=o,a.c.info("SVER="+a.pa)),null!=(r=c[5])&&"number"==typeof r&&0<r&&(n=1.5*r,a.D=n,a.c.info("backChannelRequestTimeoutMs_="+n)),n=a,(o=t.a)&&(!(r=o.a?o.a.getResponseHeader("X-Client-Wire-Protocol"):null)||!(i=n.b).a&&(Jl(r,"spdy")||Jl(r,"quic")||Jl(r,"h2"))&&(i.f=i.g,i.a=new Set,i.b&&(md(i,i.b),i.b=null)),!n.A||(s=o.a?o.a.getResponseHeader("X-HTTP-Session-Id"):null)&&(n.na=s,Xp(n.B,n.A,s))),a.v=3,a.f&&a.f.ta(),a.U&&(a.N=Bl()-t.u,a.c.info("Handshake RTT: "+a.N+"ms")),i=t,(n=a).la=nv(n,n.C?n.ga:null,n.fa),i.C?(_d(n.b,i),o=i,(s=n.D)&&o.setTimeout(s),o.o&&(Lp(o),Dp(o)),n.a=i):zd(n),0<a.g.length&&Wd(a)):"stop"!=c[0]&&"close"!=c[0]||tv(a,7):3==a.v&&("stop"==c[0]||"close"==c[0]?"stop"==c[0]?tv(a,7):jd(a):"noop"!=c[0]&&a.f&&a.f.sa(c),a.o=0);dp()}catch(t){}}function jp(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(Dl(t)||"string"==typeof t)Gl(t,e,void 0);else{if(t.L&&"function"==typeof t.L)var n=t.L();else if(t.K&&"function"==typeof t.K)n=void 0;else if(Dl(t)||"string"==typeof t){n=[];for(var r=t.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,t)n[r++]=i;i=(r=function(t){if(t.K&&"function"==typeof t.K)return t.K();if("string"==typeof t)return t.split("");if(Dl(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}(t)).length;for(var o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}}function Vp(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof Vp)for(n=t.L(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function qp(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];Bp(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){for(var i={},n=e=0;e<t.a.length;)Bp(i,r=t.a[e])||(i[t.a[n++]=r]=1),e++;t.a.length=n}}function Bp(t,e){return Object.prototype.hasOwnProperty.call(t,e)}(ru=Cp.prototype).setTimeout=function(t){this.P=t},ru.Va=function(t){t=t.target;var e=this.F;e&&3==Ld(t)?e.f():this.Ca(t)},ru.Ca=function(t){try{if(t==this.a)t:{var e=Ld(this.a),n=this.a.ua(),r=this.a.W();if(!(e<3||3==e&&!af&&!this.a.$())){this.A||4!=e||7==n||dp(),Lp(this);var i=this.a.W();if(this.N=i,n=this.a.$(),this.b=200==i,r=this.c,a=this.m,u=this.l,c=this.f,h=this.S,l=e,f=i,r.info(function(){return"XMLHTTP RESP ("+c+") [ attempt "+h+"]: "+a+"\n"+u+"\n"+l+" "+f}),this.b){if(this.U&&!this.C){e:{if(this.a){var o=this.a;if((o=o.a?o.a.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Yl(o)){var s=o;break e}}s=null}if(!s){this.b=!1,this.h=3,yp(),Fp(this),Mp(this);break t}hp(this.c,this.f,s,"Initial handshake response via X-HTTP-Initial-Response"),this.C=!0,Up(this,s)}this.I?(Rp(this,e,n),af&&this.b&&3==e&&(ap(this.J,this.R,"tick",this.Ua),this.R.start())):(hp(this.c,this.f,n,null),Up(this,n)),4==e&&Fp(this),this.b&&!this.A&&(4==e?$d(this.g,this):(this.b=!1,Dp(this)))}else 400==i&&0<n.indexOf("Unknown SID")?this.h=3:this.h=0,yp(),Fp(this),Mp(this)}}}catch(t){}var a,u,c,h,l,f},ru.Ua=function(){var t,e;this.a&&(t=Ld(this.a),e=this.a.$(),this.D<e.length&&(Lp(this),Rp(this,t,e),this.b&&4!=t&&Dp(this)))},ru.cancel=function(){this.A=!0,Fp(this)},ru.Ta=function(){this.o=null;var t,e,n=Bl();0<=n-this.T?(t=this.c,e=this.l,t.info(function(){return"TIMEOUT: "+e}),2!=this.H&&(dp(),yp()),Fp(this),this.h=2,Mp(this)):xp(this,this.T-n)},(ru=Vp.prototype).K=function(){qp(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},ru.L=function(){return qp(this),this.a.concat()},ru.get=function(t,e){return Bp(this.b,t)?this.b[t]:e},ru.set=function(t,e){Bp(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},ru.forEach=function(t,e){for(var n=this.L(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var Wp=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Kp(t,e){var n;this.c=this.j=this.f="",this.h=null,this.i=this.g="",this.a=!1,t instanceof Kp?(this.a=void 0!==e?e:t.a,Gp(this,t.f),this.j=t.j,zp(this,t.c),Qp(this,t.h),this.g=t.g,e=t.b,(n=new sd).c=e.c,e.a&&(n.a=new Vp(e.a),n.b=e.b),Yp(this,n),this.i=t.i):t&&(n=String(t).match(Wp))?(this.a=!!e,Gp(this,n[1]||"",!0),this.j=$p(n[2]||""),zp(this,n[3]||"",!0),Qp(this,n[4]),this.g=$p(n[5]||"",!0),Yp(this,n[6]||"",!0),this.i=$p(n[7]||"")):(this.a=!!e,this.b=new sd(null,this.a))}function Hp(t){return new Kp(t)}function Gp(t,e,n){t.f=n?$p(e,!0):e,t.f&&(t.f=t.f.replace(/:$/,""))}function zp(t,e,n){t.c=n?$p(e,!0):e}function Qp(t,e){if(e){if(e=Number(e),isNaN(e)||e<0)throw Error("Bad port number "+e);t.h=e}else t.h=null}function Yp(t,e,n){var r,i;e instanceof sd?(t.b=e,r=t.b,(i=t.a)&&!r.f&&(ad(r),r.c=null,r.a.forEach(function(t,e){var n=e.toLowerCase();e!=n&&(ud(this,e),hd(this,n,t))},r)),r.f=i):(n||(e=Zp(e,id)),t.b=new sd(e,t.a))}function Xp(t,e,n){t.b.set(e,n)}function Jp(t){return Xp(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Bl()).toString(36)),t}function $p(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Zp(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,td),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function td(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}Kp.prototype.toString=function(){var t=[],e=this.f;e&&t.push(Zp(e,ed,!0),":");var n=this.c;return!n&&"file"!=e||(t.push("//"),(e=this.j)&&t.push(Zp(e,ed,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.h)&&t.push(":",String(n))),(n=this.g)&&(this.c&&"/"!=n.charAt(0)&&t.push("/"),t.push(Zp(n,"/"==n.charAt(0)?rd:nd,!0))),(n=this.b.toString())&&t.push("?",n),(n=this.i)&&t.push("#",Zp(n,od)),t.join("")};var ed=/[#\/\?@]/g,nd=/[#\?:]/g,rd=/[#\?]/g,id=/[#\?@]/g,od=/#/g;function sd(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function ad(o){o.a||(o.a=new Vp,o.b=0,o.c&&function(t){if(t){t=t.split("&");for(var e=0;e<t.length;e++){var n,r=t[e].indexOf("="),i=null;0<=r?(n=t[e].substring(0,r),i=t[e].substring(r+1)):n=t[e],r=n,i=i?decodeURIComponent(i.replace(/\+/g," ")):"",o.add(decodeURIComponent(r.replace(/\+/g," ")),i)}}}(o.c))}function ud(t,e){ad(t),e=ld(t,e),Bp(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,Bp((t=t.a).b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&qp(t)))}function cd(t,e){return ad(t),e=ld(t,e),Bp(t.a.b,e)}function hd(t,e,n){ud(t,e),0<n.length&&(t.c=null,t.a.set(ld(t,e),Ql(n)),t.b+=n.length)}function ld(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}function fd(t,e){this.b=t,this.a=e}function pd(t){this.g=t||dd,t=Ol.PerformanceNavigationTiming?0<(t=Ol.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):!!(Ol.ia&&Ol.ia.ya&&Ol.ia.ya()&&Ol.ia.ya().pb),this.f=t?this.g:1,this.a=null,1<this.f&&(this.a=new Set),this.b=null,this.c=[]}(ru=sd.prototype).add=function(t,e){ad(this),this.c=null,t=ld(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},ru.forEach=function(n,r){ad(this),this.a.forEach(function(t,e){Gl(t,function(t){n.call(r,t,e,this)},this)},this)},ru.L=function(){ad(this);for(var t=this.a.K(),e=this.a.L(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},ru.K=function(t){ad(this);var e=[];if("string"==typeof t)cd(this,t)&&(e=zl(e,this.a.get(ld(this,t))));else{t=this.a.K();for(var n=0;n<t.length;n++)e=zl(e,t[n])}return e},ru.set=function(t,e){return ad(this),this.c=null,cd(this,t=ld(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},ru.get=function(t,e){return t&&0<(t=this.K(t)).length?String(t[0]):e},ru.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.L(),n=0;n<e.length;n++)for(var r=e[n],i=encodeURIComponent(String(r)),r=this.K(r),o=0;o<r.length;o++){var s=i;""!==r[o]&&(s+="="+encodeURIComponent(String(r[o]))),t.push(s)}return this.c=t.join("&")};var dd=10;function vd(t){return t.b||t.a&&t.a.size>=t.f}function yd(t){return t.b?1:t.a?t.a.size:0}function gd(t,e){return t.b?t.b==e:t.a&&t.a.has(e)}function md(t,e){t.a?t.a.add(e):t.b=e}function _d(t,e){t.b&&t.b==e?t.b=null:t.a&&t.a.has(e)&&t.a.delete(e)}function bd(t){var e,n;if(null!=t.b)return t.c.concat(t.b.s);if(null==t.a||0===t.a.size)return Ql(t.c);var r=t.c;try{for(var i=kl(t.a.values()),o=i.next();!o.done;o=i.next())var s=o.value,r=r.concat(s.s)}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}function wd(){}function Ed(){this.a=new wd}function Id(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(t){}}pd.prototype.cancel=function(){var t,e;if(this.c=bd(this),this.b)this.b.cancel(),this.b=null;else if(this.a&&0!==this.a.size){try{for(var n=kl(this.a.values()),r=n.next();!r.done;r=n.next())r.value.cancel()}catch(e){t={error:e}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}this.a.clear()}},wd.prototype.stringify=function(t){return Ol.JSON.stringify(t,void 0)},wd.prototype.parse=function(t){return Ol.JSON.parse(t,void 0)};var Td=Ol.JSON.parse;function Sd(t){Uf.call(this),this.headers=new Vp,this.H=t||null,this.b=!1,this.s=this.a=null,this.B="",this.h=0,this.f="",this.g=this.A=this.l=this.u=!1,this.o=0,this.m=null,this.I=Cd,this.D=this.F=!1}Wl(Sd,Uf);var Cd="",Nd=/^https?$/i,Ad=["POST","PUT"];function kd(t){return"content-type"==t.toLowerCase()}function Od(t,e){t.b=!1,t.a&&(t.g=!0,t.a.abort(),t.g=!1),t.f=e,t.h=5,Pd(t),Dd(t)}function Pd(t){t.u||(t.u=!0,jf(t,"complete"),jf(t,"error"))}function Rd(t){if(t.b&&(!t.s[1]||4!=Ld(t)||2!=t.W()))if(t.l&&4==Ld(t))Zf(t.za,0,t);else if(jf(t,"readystatechange"),4==Ld(t)){t.b=!1;try{var e,n,r,i,o=t.W();t:switch(o){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var s=!0;break t;default:s=!1}if((e=s)||((n=0===o)&&(!(i=String(t.B).match(Wp)[1]||null)&&Ol.self&&Ol.self.location&&(i=(r=Ol.self.location.protocol).substr(0,r.length-1)),n=!Nd.test(i?i.toLowerCase():"")),e=n),e)jf(t,"complete"),jf(t,"success");else{t.h=6;try{var a=2<Ld(t)?t.a.statusText:""}catch(t){a=""}t.f=a+" ["+t.W()+"]",Pd(t)}}finally{Dd(t)}}}function Dd(t,e){if(t.a){xd(t);var n=t.a,r=t.s[0]?Pl:null;t.a=null,t.s=null,e||jf(t,"ready");try{n.onreadystatechange=r}catch(t){}}}function xd(t){t.a&&t.D&&(t.a.ontimeout=null),t.m&&(Ol.clearTimeout(t.m),t.m=null)}function Ld(t){return t.a?t.a.readyState:0}function Md(t,e,n){t:{for(r in n){var r=!1;break t}r=!0}var i;r||(i="",Zl(n,function(t,e){i+=e,i+=":",i+=t,i+="\r\n"}),n=i,"string"==typeof t?null!=n&&encodeURIComponent(String(n)):Xp(t,e,n))}function Fd(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function Ud(t){this.pa=0,this.g=[],this.c=new cp,this.ga=this.la=this.B=this.fa=this.a=this.na=this.A=this.V=this.i=this.O=this.l=null,this.Ma=this.R=0,this.Ja=Fd("failFast",!1,t),this.H=this.m=this.j=this.h=this.f=null,this.S=!0,this.I=this.oa=this.P=-1,this.T=this.o=this.u=0,this.Fa=Fd("baseRetryDelayMs",5e3,t),this.Pa=Fd("retryDelaySeedMs",1e4,t),this.Ka=Fd("forwardChannelMaxRetries",2,t),this.ma=Fd("forwardChannelRequestTimeoutMs",2e4,t),this.La=t&&t.h||void 0,this.D=void 0,this.C=t&&t.supportsCrossDomainXhr||!1,this.J="",this.b=new pd(t&&t.concurrentRequestLimit),this.ka=new Ed,this.da=t&&t.fastHandshake||!1,this.Ga=t&&t.b||!1,t&&t.g&&(this.c.a=!1),t&&t.forceLongPolling&&(this.S=!1),this.U=!this.da&&this.S&&t&&t.c||!1,this.ea=void 0,this.N=0,this.F=!1,this.s=null,(this.Ia=t&&t.f||!1)&&this.c.info("Opt-in to enable Chrome Origin Trials.")}function jd(t){var e,n;qd(t),3==t.v&&(e=t.R++,Xp(n=Hp(t.B),"SID",t.J),Xp(n,"RID",e),Xp(n,"TYPE","terminate"),Hd(t,n),(e=new Cp(t,t.c,e,void 0)).H=2,e.i=Jp(Hp(n)),n=!1,Ol.navigator&&Ol.navigator.sendBeacon&&(n=Ol.navigator.sendBeacon(e.i.toString(),"")),!n&&Ol.Image&&((new Image).src=e.i,n=!0),n||(e.a=rv(e.g,null),e.a.ba(e.i)),e.u=Bl(),Dp(e)),ev(t)}function Vd(t){t.a&&(Yd(t),t.a.cancel(),t.a=null)}function qd(t){Vd(t),t.j&&(Ol.clearTimeout(t.j),t.j=null),Jd(t),t.b.cancel(),t.h&&("number"==typeof t.h&&Ol.clearTimeout(t.h),t.h=null)}function Bd(t,e){t.g.push(new fd(t.Ma++,e)),3==t.v&&Wd(t)}function Wd(t){vd(t.b)||t.h||(t.h=!0,zf(t.Ba,t),t.u=0)}function Kd(t,e){var n=e?e.f:t.R++,r=Hp(t.B);Xp(r,"SID",t.J),Xp(r,"RID",n),Xp(r,"AID",t.P),Hd(t,r),t.i&&t.l&&Md(r,t.i,t.l),n=new Cp(t,t.c,n,t.u+1),null===t.i&&(n.B=t.l),e&&(t.g=e.s.concat(t.g)),e=Gd(t,n,1e3),n.setTimeout(Math.round(.5*t.ma)+Math.round(.5*t.ma*Math.random())),md(t.b,n),Op(n,r,e)}function Hd(t,n){t.f&&jp({},function(t,e){Xp(n,e,t)})}function Gd(t,e,n){n=Math.min(t.g.length,n);var r=t.f?jl(t.f.Ha,t.f,t):null;t:for(var i=t.g,o=-1;;){var s=["count="+n];-1==o?0<n?(o=i[0].b,s.push("ofs="+o)):o=0:s.push("ofs="+o);for(var a=!0,u=0;u<n;u++){var c=i[u].b,h=i[u].a;if((c-=o)<0)o=Math.max(0,i[u].b-100),a=!1;else try{!function(t,r){var i="req"+c+"_"||"";try{jp(t,function(t,e){var n=t;xl(t)&&(n=qf(t)),r.push(i+e+"="+encodeURIComponent(n))})}catch(t){throw r.push(i+"type="+encodeURIComponent("_badmap")),t}}(h,s)}catch(t){r&&r(h)}}if(a){r=s.join("&");break t}}return t=t.g.splice(0,n),e.s=t,r}function zd(t){t.a||t.j||(t.T=1,zf(t.Aa,t),t.o=0)}function Qd(t){return!(t.a||t.j||3<=t.o)&&(t.T++,t.j=mp(jl(t.Aa,t),Zd(t,t.o)),t.o++,1)}function Yd(t){null!=t.s&&(Ol.clearTimeout(t.s),t.s=null)}function Xd(t){t.a=new Cp(t,t.c,"rpc",t.T),null===t.i&&(t.a.B=t.l),t.a.O=0;var e=Hp(t.la);Xp(e,"RID","rpc"),Xp(e,"SID",t.J),Xp(e,"CI",t.H?"0":"1"),Xp(e,"AID",t.P),Hd(t,e),Xp(e,"TYPE","xmlhttp"),t.i&&t.l&&Md(e,t.i,t.l),t.D&&t.a.setTimeout(t.D);var n=t.a;t=t.ga,n.H=1,n.i=Jp(Hp(e)),n.j=null,n.I=!0,Pp(n,t)}function Jd(t){null!=t.m&&(Ol.clearTimeout(t.m),t.m=null)}function $d(t,e){var n,r,i,o=null;if(t.a==e){Jd(t),Yd(t),t.a=null;var s=2}else{if(!gd(t.b,e))return;o=e.s,_d(t.b,e),s=1}if(t.I=e.N,0!=t.v)if(e.b)1==s?(o=e.j?e.j.length:0,e=Bl()-e.u,n=t.u,jf(s=fp(),new gp(s)),Wd(t)):zd(t);else if(3==(n=e.h)||0==n&&0<t.I||(1!=s||(i=e,yd((r=t).b)>=r.b.f-(r.h?1:0)||(r.h?(r.g=i.s.concat(r.g),0):1==r.v||2==r.v||r.u>=(r.Ja?0:r.Ka)||(r.h=mp(jl(r.Ba,r,i),Zd(r,r.u)),r.u++,0))))&&(2!=s||!Qd(t)))switch(o&&0<o.length&&(e=t.b,e.c=e.c.concat(o)),n){case 1:tv(t,5);break;case 4:tv(t,10);break;case 3:tv(t,6);break;default:tv(t,2)}}function Zd(t,e){var n=t.Fa+Math.floor(Math.random()*t.Pa);return t.f||(n*=2),n*e}function tv(t,e){var n,r,i,o;t.c.info("Error code "+e),2==e?(r=null,t.f&&(r=null),o=jl(t.Wa,t),r||(r=new Kp("//www.google.com/images/cleardot.gif"),Ol.location&&"http"==Ol.location.protocol||Gp(r,"https"),Jp(r)),n=r.toString(),r=o,o=new cp,Ol.Image?((i=new Image).onload=ql(Id,o,i,"TestLoadImage: loaded",!0,r),i.onerror=ql(Id,o,i,"TestLoadImage: error",!1,r),i.onabort=ql(Id,o,i,"TestLoadImage: abort",!1,r),i.ontimeout=ql(Id,o,i,"TestLoadImage: timeout",!1,r),Ol.setTimeout(function(){i.ontimeout&&i.ontimeout()},1e4),i.src=n):r(!1)):yp(),t.v=0,t.f&&t.f.ra(e),ev(t),qd(t)}function ev(t){t.v=0,t.I=-1,t.f&&(0==bd(t.b).length&&0==t.g.length||(t.b.c.length=0,Ql(t.g),t.g.length=0),t.f.qa())}function nv(t,e,n){var r,i,o,s,a,u=(s=n)instanceof Kp?Hp(s):new Kp(s,void 0);return""!=u.c?(e&&zp(u,e+"."+u.c),Qp(u,u.h)):(r=(a=Ol.location).protocol,i=e?e+"."+a.hostname:a.hostname,o=+a.port,s=n,a=new Kp(null,void 0),r&&Gp(a,r),i&&zp(a,i),o&&Qp(a,o),s&&(a.g=s),u=a),t.V&&Zl(t.V,function(t,e){Xp(u,e,t)}),e=t.A,n=t.na,e&&n&&Xp(u,e,n),Xp(u,"VER",t.ha),Hd(t,u),u}function rv(t,e){if(e&&!t.C)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Sd(t.La)).F=t.C,e}function iv(){}function ov(){if(sf&&!(10<=Number(pf)))throw Error("Environmental error: no available transport.")}function sv(t,e){Uf.call(this),this.a=new Ud(e),this.o=t,this.b=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.a.l=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.a&&(t?t["X-WebChannel-Client-Profile"]=e.a:t={"X-WebChannel-Client-Profile":e.a}),this.a.O=t,(t=e&&e.httpHeadersOverwriteParam)&&!Yl(t)&&(this.a.i=t),this.m=e&&e.supportsCrossDomainXhr||!1,this.l=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Yl(e)&&(this.a.A=e,null!==(t=this.b)&&e in t&&e in(t=this.b)&&delete t[e]),this.f=new cv(this)}function av(t){Ip.call(this);var e=t.__sm__;if(e){t:{for(var n in e){t=n;break t}t=void 0}(this.c=t)?(t=this.c,this.data=null!==e&&t in e?e[t]:void 0):this.data=e}else this.data=t}function uv(){Tp.call(this),this.status=1}function cv(t){this.a=t}(ru=Sd.prototype).ba=function(t,e,n,r){if(this.a)throw Error("[goog.net.XhrIo] Object is active with another request="+this.B+"; newUri="+t);e=e?e.toUpperCase():"GET",this.B=t,this.f="",this.h=0,this.u=!1,this.b=!0,this.a=new XMLHttpRequest,this.s=this.H?bp(this.H):bp(Ep),this.a.onreadystatechange=jl(this.za,this);try{this.A=!0,this.a.open(e,String(t),!0),this.A=!1}catch(t){return void Od(this,t)}t=n||"";var i,o=new Vp(this.headers);r&&jp(r,function(t,e){o.set(e,t)}),r=function(t){t:{for(var e=kd,n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return e<0?null:"string"==typeof t?t.charAt(e):t[e]}(o.L()),n=Ol.FormData&&t instanceof Ol.FormData,0<=Hl(Ad,e)&&!r&&!n&&o.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),o.forEach(function(t,e){this.a.setRequestHeader(e,t)},this),this.I&&(this.a.responseType=this.I),"withCredentials"in this.a&&this.a.withCredentials!==this.F&&(this.a.withCredentials=this.F);try{xd(this),0<this.o&&((this.D=(i=this.a,sf&&ff(9)&&"number"==typeof i.timeout&&void 0!==i.ontimeout))?(this.a.timeout=this.o,this.a.ontimeout=jl(this.xa,this)):this.m=Zf(this.xa,this.o,this)),this.l=!0,this.a.send(t),this.l=!1}catch(t){Od(this,t)}},ru.xa=function(){this.a&&(this.f="Timed out after "+this.o+"ms, aborting",this.h=8,jf(this,"timeout"),this.abort(8))},ru.abort=function(t){this.a&&this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1,this.h=t||7,jf(this,"complete"),jf(this,"abort"),Dd(this))},ru.G=function(){this.a&&(this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1),Dd(this,!0)),Sd.X.G.call(this)},ru.za=function(){this.j||(this.A||this.l||this.g?Rd(this):this.Sa())},ru.Sa=function(){Rd(this)},ru.W=function(){try{return 2<Ld(this)?this.a.status:-1}catch(t){return-1}},ru.$=function(){try{return this.a?this.a.responseText:""}catch(t){return""}},ru.Na=function(t){if(this.a){var e=this.a.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),Td(e)}},ru.ua=function(){return this.h},ru.Oa=function(){return"string"==typeof this.f?this.f:String(this.f)},(ru=Ud.prototype).ha=8,ru.v=1,ru.Ba=function(t){if(this.h)if(this.h=null,1==this.v){if(!t){this.R=Math.floor(1e5*Math.random()),t=this.R++;var e,n=new Cp(this,this.c,t,void 0),r=this.l;if(this.O&&(r?nf(r=tf(r),this.O):r=this.O),null===this.i&&(n.B=r),this.da)t:{for(var i=e=0;i<this.g.length;i++){var o=this.g[i];if(void 0===(o="__data__"in o.a&&"string"==typeof(o=o.a.__data__)?o.length:void 0))break;if(4096<(e+=o)){e=i;break t}if(4096===e||i===this.g.length-1){e=i+1;break t}}e=1e3}else e=1e3;e=Gd(this,n,e),Xp(i=Hp(this.B),"RID",t),Xp(i,"CVER",22),this.A&&Xp(i,"X-HTTP-Session-Id",this.A),Hd(this,i),this.i&&r&&Md(i,this.i,r),md(this.b,n),this.Ga&&Xp(i,"TYPE","init"),this.da?(Xp(i,"$req",e),Xp(i,"SID","null"),n.U=!0,Op(n,i,null)):Op(n,i,e),this.v=2}}else 3==this.v&&(t?Kd(this,t):0==this.g.length||vd(this.b)||Kd(this))},ru.Aa=function(){var t;this.j=null,Xd(this),this.U&&!(this.F||null==this.a||this.N<=0)&&(t=2*this.N,this.c.info("BP detection timer enabled: "+t),this.s=mp(jl(this.Ra,this),t))},ru.Ra=function(){this.s&&(this.s=null,this.c.info("BP detection timeout reached."),this.c.info("Buffering proxy detected and switch to long-polling!"),this.H=!1,this.F=!0,yp(),Vd(this),Xd(this))},ru.Qa=function(){null!=this.m&&(this.m=null,Vd(this),Qd(this),yp())},ru.Wa=function(t){t?this.c.info("Successfully pinged google.com"):this.c.info("Failed to ping google.com"),yp()},(ru=iv.prototype).ta=function(){},ru.sa=function(){},ru.ra=function(){},ru.qa=function(){},ru.Ha=function(){},ov.prototype.a=function(t,e){return new sv(t,e)},Wl(sv,Uf),sv.prototype.g=function(){this.a.f=this.f,this.m&&(this.a.C=!0);var t=this.a,e=this.o,n=this.b||void 0;yp(),t.fa=e,t.V=n||{},t.H=t.S,t.B=nv(t,null,t.fa),Wd(t)},sv.prototype.close=function(){jd(this.a)},sv.prototype.h=function(t){var e;"string"==typeof t?((e={}).__data__=t,Bd(this.a,e)):this.l?((e={}).__data__=qf(t),Bd(this.a,e)):Bd(this.a,t)},sv.prototype.G=function(){this.a.f=null,delete this.f,jd(this.a),delete this.a,sv.X.G.call(this)},Wl(av,Ip),Wl(uv,Tp),Wl(cv,iv),cv.prototype.ta=function(){jf(this.a,"a")},cv.prototype.sa=function(t){jf(this.a,new av(t))},cv.prototype.ra=function(t){jf(this.a,new uv)},cv.prototype.qa=function(){jf(this.a,"b")},ov.prototype.createWebChannel=ov.prototype.a,sv.prototype.send=sv.prototype.h,sv.prototype.open=sv.prototype.g,K.NO_ERROR=0,K.TIMEOUT=8,K.HTTP_ERROR=6,Pr.COMPLETE="complete",(wp.EventType=L).OPEN="a",L.CLOSE="b",L.ERROR="c",L.MESSAGE="d",Uf.prototype.listen=Uf.prototype.va,Sd.prototype.listenOnce=Sd.prototype.wa,Sd.prototype.getLastError=Sd.prototype.Oa,Sd.prototype.getLastErrorCode=Sd.prototype.ua,Sd.prototype.getStatus=Sd.prototype.W,Sd.prototype.getResponseJson=Sd.prototype.Na,Sd.prototype.getResponseText=Sd.prototype.$,Sd.prototype.send=Sd.prototype.ba;var hv=K,lv=Pr,fv=wp,pv=Sd,dv=function(t,e,n,r,i,o){this.t=t,this.persistenceKey=e,this.host=n,this.ssl=r,this.forceLongPolling=i,this.i=o},vv=(Object.defineProperty(mv.prototype,"o",{get:function(){return"(default)"===this.database},enumerable:!1,configurable:!0}),mv.prototype.isEqual=function(t){return t instanceof mv&&t.projectId===this.projectId&&t.database===this.database},mv),yv="8.0.2-20201012233953",gv=new As("@firebase/firestore");function mv(t,e){this.projectId=t,this.database=e||"(default)"}function _v(){return gv.logLevel}function bv(t){for(var e,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];gv.logLevel<=Es.DEBUG&&(e=n.map(Iv),gv.debug.apply(gv,_o(["Firestore ("+yv+"): "+t],e)))}function wv(t){for(var e,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];gv.logLevel<=Es.ERROR&&(e=n.map(Iv),gv.error.apply(gv,_o(["Firestore ("+yv+"): "+t],e)))}function Ev(t){for(var e,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];gv.logLevel<=Es.WARN&&(e=n.map(Iv),gv.warn.apply(gv,_o(["Firestore ("+yv+"): "+t],e)))}function Iv(e){if("string"==typeof e)return e;try{return JSON.stringify(e)}catch(t){return e}}function Tv(t){throw void 0===t&&(t="Unexpected state"),wv(t="FIRESTORE ("+yv+") INTERNAL ASSERTION FAILED: "+t),new Error(t)}function Sv(t){t||Tv()}var Cv=(Nv.u=function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length,n="";n.length<20;)for(var r=function(){var t="undefined"!=typeof self&&(self.crypto||self.msCrypto),e=new Uint8Array(40);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(e);else for(var n=0;n<40;n++)e[n]=Math.floor(256*Math.random());return e}(),i=0;i<r.length;++i)n.length<20&&r[i]<e&&(n+=t.charAt(r[i]%t.length));return n},Nv);function Nv(){}function Av(t,e){return t<e?-1:e<t?1:0}function kv(t,n,r){return t.length===n.length&&t.every(function(t,e){return r(t,n[e])})}function Ov(t){return t+"\0"}function Pv(t){var e,n=0;for(e in t)Object.prototype.hasOwnProperty.call(t,e)&&n++;return n}function Rv(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Dv(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var xv,Lv,Mv,Fv=(Zv.prototype.get=function(t){var e=this.h(t);if(void 0!==(e=this._[e]))for(var n=0,r=e;n<r.length;n++){var i=(o=r[n])[0],o=o[1];if(this.l(i,t))return o}},Zv.prototype.has=function(t){return void 0!==this.get(t)},Zv.prototype.set=function(t,e){var n=this.h(t),r=this._[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(this.l(r[i][0],t))return void(r[i]=[t,e]);r.push([t,e])}else this._[n]=[[t,e]]},Zv.prototype.delete=function(t){var e=this.h(t),n=this._[e];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.l(n[r][0],t))return 1===n.length?delete this._[e]:n.splice(r,1),!0;return!1},Zv.prototype.forEach=function(s){Rv(this._,function(t,e){for(var n=0,r=e;n<r.length;n++){var i=(o=r[n])[0],o=o[1];s(i,o)}})},Zv.prototype.T=function(){return Dv(this._)},Zv),Uv={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},jv=(lo($v,Mv=Error),$v),Vv=(Jv.now=function(){return Jv.fromMillis(Date.now())},Jv.fromDate=function(t){return Jv.fromMillis(t.getTime())},Jv.fromMillis=function(t){var e=Math.floor(t/1e3);return new Jv(e,1e6*(t-1e3*e))},Jv.prototype.toDate=function(){return new Date(this.toMillis())},Jv.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},Jv.prototype.I=function(t){return this.seconds===t.seconds?Av(this.nanoseconds,t.nanoseconds):Av(this.seconds,t.seconds)},Jv.prototype.isEqual=function(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds},Jv.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},Jv.prototype.toJSON=function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}},Jv.prototype.valueOf=function(){var t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")},Jv),qv=(Xv.m=function(t){return new Xv(t)},Xv.min=function(){return new Xv(new Vv(0,0))},Xv.prototype.A=function(t){return this.timestamp.I(t.timestamp)},Xv.prototype.isEqual=function(t){return this.timestamp.isEqual(t.timestamp)},Xv.prototype.R=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},Xv.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},Xv.prototype.P=function(){return this.timestamp},Xv),L=(Object.defineProperty(Yv.prototype,"length",{get:function(){return this.g},enumerable:!1,configurable:!0}),Yv.prototype.isEqual=function(t){return 0===Yv.V(this,t)},Yv.prototype.child=function(t){var e=this.segments.slice(this.offset,this.limit());return t instanceof Yv?t.forEach(function(t){e.push(t)}):e.push(t),this.p(e)},Yv.prototype.limit=function(){return this.offset+this.length},Yv.prototype.v=function(t){return t=void 0===t?1:t,this.p(this.segments,this.offset+t,this.length-t)},Yv.prototype.S=function(){return this.p(this.segments,this.offset,this.length-1)},Yv.prototype.D=function(){return this.segments[this.offset]},Yv.prototype.C=function(){return this.get(this.length-1)},Yv.prototype.get=function(t){return this.segments[this.offset+t]},Yv.prototype.T=function(){return 0===this.length},Yv.prototype.N=function(t){if(t.length<this.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},Yv.prototype.F=function(t){if(this.length+1!==t.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},Yv.prototype.forEach=function(t){for(var e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])},Yv.prototype.O=function(){return this.segments.slice(this.offset,this.limit())},Yv.V=function(t,e){for(var n=Math.min(t.length,e.length),r=0;r<n;r++){var i=t.get(r),o=e.get(r);if(i<o)return-1;if(o<i)return 1}return t.length<e.length?-1:t.length>e.length?1:0},Yv),Bv=(lo(Qv,Lv=L),Qv.prototype.p=function(t,e,n){return new Qv(t,e,n)},Qv.prototype.M=function(){return this.O().join("/")},Qv.prototype.toString=function(){return this.M()},Qv.k=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=[],r=0,i=t;r<i.length;r++){var o=i[r];if(0<=o.indexOf("//"))throw new jv(Uv.INVALID_ARGUMENT,"Invalid segment ("+o+"). Paths must not contain // in them.");n.push.apply(n,o.split("/").filter(function(t){return 0<t.length}))}return new Qv(n)},Qv.$=function(){return new Qv([])},Qv),Wv=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Kv=(lo(zv,xv=L),zv.prototype.p=function(t,e,n){return new zv(t,e,n)},zv.L=function(t){return Wv.test(t)},zv.prototype.M=function(){return this.O().map(function(t){return t=t.replace("\\","\\\\").replace("`","\\`"),zv.L(t)||(t="`"+t+"`"),t}).join(".")},zv.prototype.toString=function(){return this.M()},zv.prototype.B=function(){return 1===this.length&&"__name__"===this.get(0)},zv.q=function(){return new zv(["__name__"])},zv.U=function(t){for(var e=[],n="",r=0,i=function(){if(0===n.length)throw new jv(Uv.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");e.push(n),n=""},o=!1;r<t.length;){var s=t[r];if("\\"===s){if(r+1===t.length)throw new jv(Uv.INVALID_ARGUMENT,"Path has trailing escape character: "+t);var a=t[r+1];if("\\"!==a&&"."!==a&&"`"!==a)throw new jv(Uv.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);n+=a,r+=2}else"`"===s?o=!o:"."!==s||o?n+=s:i(),r++}if(i(),o)throw new jv(Uv.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new zv(e)},zv.$=function(){return new zv([])},zv),Hv=(Gv.K=function(t){return new Gv(Bv.k(t))},Gv.W=function(t){return new Gv(Bv.k(t).v(5))},Gv.prototype.j=function(t){return 2<=this.path.length&&this.path.get(this.path.length-2)===t},Gv.prototype.isEqual=function(t){return null!==t&&0===Bv.V(this.path,t.path)},Gv.prototype.toString=function(){return this.path.toString()},Gv.V=function(t,e){return Bv.V(t.path,e.path)},Gv.G=function(t){return t.length%2==0},Gv.H=function(t){return new Gv(new Bv(t.slice()))},Gv);function Gv(t){this.path=t}function zv(){return null!==xv&&xv.apply(this,arguments)||this}function Qv(){return null!==Lv&&Lv.apply(this,arguments)||this}function Yv(t,e,n){void 0===e?e=0:e>t.length&&Tv(),void 0===n?n=t.length-e:n>t.length-e&&Tv(),this.segments=t,this.offset=e,this.g=n}function Xv(t){this.timestamp=t}function Jv(t,e){if(this.seconds=t,(this.nanoseconds=e)<0)throw new jv(Uv.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(1e9<=e)throw new jv(Uv.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new jv(Uv.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(253402300800<=t)throw new jv(Uv.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}function $v(t,e){var n=this;return(n=Mv.call(this,e)||this).code=t,n.message=e,n.name="FirebaseError",n.toString=function(){return n.name+": [code="+n.code+"]: "+n.message},n}function Zv(t,e){this.h=t,this.l=e,this._={}}function ty(t){return null==t}function ey(t){return 0===t&&1/t==-1/0}function ny(t){return"number"==typeof t&&Number.isInteger(t)&&!ey(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}var ry=function(t,e,n,r,i,o,s){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=s,this.J=null};function iy(t,e,n,r,i,o,s){return void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),new ry(t,e,n,r,i,o,s)}function oy(t){var e=t;return null===e.J&&(t=e.path.M(),null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(function(t){return t.field.M()+t.op.toString()+sg(t.value)}).join(","),t+="|ob:",t+=e.orderBy.map(function(t){return t.field.M()+t.dir}).join(","),ty(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=F_(e.startAt)),e.endAt&&(t+="|ub:",t+=F_(e.endAt)),e.J=t),e.J}function sy(t,e){if(t.limit!==e.limit)return!1;if(t.orderBy.length!==e.orderBy.length)return!1;for(var n,r,i=0;i<t.orderBy.length;i++)if(n=t.orderBy[i],r=e.orderBy[i],n.dir!==r.dir||!n.field.isEqual(r.field))return!1;if(t.filters.length!==e.filters.length)return!1;for(var o,s,a=0;a<t.filters.length;a++)if(o=t.filters[a],s=e.filters[a],o.op!==s.op||!o.field.isEqual(s.field)||!ng(o.value,s.value))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!j_(t.startAt,e.startAt)&&j_(t.endAt,e.endAt)}function ay(t){return Hv.G(t.path)&&null===t.collectionGroup&&0===t.filters.length}var uy=(cy.fromBase64String=function(t){return new cy(atob(t))},cy.fromUint8Array=function(t){return new cy(function(t){for(var e="",n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}(t))},cy.prototype.toBase64=function(){return t=this.Y,btoa(t);var t},cy.prototype.toUint8Array=function(){return function(t){for(var e=new Uint8Array(t.length),n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}(this.Y)},cy.prototype.X=function(){return 2*this.Y.length},cy.prototype.A=function(t){return Av(this.Y,t.Y)},cy.prototype.isEqual=function(t){return this.Y===t.Y},cy);function cy(t){this.Y=t}function hy(t){this.count=t}uy.Z=new uy("");var ly,fy=(py.prototype.nt=function(t){return new py(this.target,this.targetId,this.tt,t,this.et,this.lastLimboFreeSnapshotVersion,this.resumeToken)},py.prototype.st=function(t,e){return new py(this.target,this.targetId,this.tt,this.sequenceNumber,e,this.lastLimboFreeSnapshotVersion,t)},py.prototype.it=function(t){return new py(this.target,this.targetId,this.tt,this.sequenceNumber,this.et,t,this.resumeToken)},py);function py(t,e,n,r,i,o,s){void 0===i&&(i=qv.min()),void 0===o&&(o=qv.min()),void 0===s&&(s=uy.Z),this.target=t,this.targetId=e,this.tt=n,this.sequenceNumber=r,this.et=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=s}function dy(t){switch(t){case Uv.OK:return Tv(),0;case Uv.CANCELLED:case Uv.UNKNOWN:case Uv.DEADLINE_EXCEEDED:case Uv.RESOURCE_EXHAUSTED:case Uv.INTERNAL:case Uv.UNAVAILABLE:case Uv.UNAUTHENTICATED:return;case Uv.INVALID_ARGUMENT:case Uv.NOT_FOUND:case Uv.ALREADY_EXISTS:case Uv.PERMISSION_DENIED:case Uv.FAILED_PRECONDITION:case Uv.ABORTED:case Uv.OUT_OF_RANGE:case Uv.UNIMPLEMENTED:case Uv.DATA_LOSS:return 1;default:return Tv(),0}}function vy(t){if(void 0===t)return wv("GRPC error has no .code"),Uv.UNKNOWN;switch(t){case ly.OK:return Uv.OK;case ly.CANCELLED:return Uv.CANCELLED;case ly.UNKNOWN:return Uv.UNKNOWN;case ly.DEADLINE_EXCEEDED:return Uv.DEADLINE_EXCEEDED;case ly.RESOURCE_EXHAUSTED:return Uv.RESOURCE_EXHAUSTED;case ly.INTERNAL:return Uv.INTERNAL;case ly.UNAVAILABLE:return Uv.UNAVAILABLE;case ly.UNAUTHENTICATED:return Uv.UNAUTHENTICATED;case ly.INVALID_ARGUMENT:return Uv.INVALID_ARGUMENT;case ly.NOT_FOUND:return Uv.NOT_FOUND;case ly.ALREADY_EXISTS:return Uv.ALREADY_EXISTS;case ly.PERMISSION_DENIED:return Uv.PERMISSION_DENIED;case ly.FAILED_PRECONDITION:return Uv.FAILED_PRECONDITION;case ly.ABORTED:return Uv.ABORTED;case ly.OUT_OF_RANGE:return Uv.OUT_OF_RANGE;case ly.UNIMPLEMENTED:return Uv.UNIMPLEMENTED;case ly.DATA_LOSS:return Uv.DATA_LOSS;default:return Tv()}}(K=ly={})[K.OK=0]="OK",K[K.CANCELLED=1]="CANCELLED",K[K.UNKNOWN=2]="UNKNOWN",K[K.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",K[K.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",K[K.NOT_FOUND=5]="NOT_FOUND",K[K.ALREADY_EXISTS=6]="ALREADY_EXISTS",K[K.PERMISSION_DENIED=7]="PERMISSION_DENIED",K[K.UNAUTHENTICATED=16]="UNAUTHENTICATED",K[K.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",K[K.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",K[K.ABORTED=10]="ABORTED",K[K.OUT_OF_RANGE=11]="OUT_OF_RANGE",K[K.UNIMPLEMENTED=12]="UNIMPLEMENTED",K[K.INTERNAL=13]="INTERNAL",K[K.UNAVAILABLE=14]="UNAVAILABLE",K[K.DATA_LOSS=15]="DATA_LOSS";var yy=(wy.prototype.rt=function(t,e){return new wy(this.V,this.root.rt(t,e,this.V).copy(null,null,my.ot,null,null))},wy.prototype.remove=function(t){return new wy(this.V,this.root.remove(t,this.V).copy(null,null,my.ot,null,null))},wy.prototype.get=function(t){for(var e=this.root;!e.T();){var n=this.V(t,e.key);if(0===n)return e.value;n<0?e=e.left:0<n&&(e=e.right)}return null},wy.prototype.indexOf=function(t){for(var e=0,n=this.root;!n.T();){var r=this.V(t,n.key);if(0===r)return e+n.left.size;n=r<0?n.left:(e+=n.left.size+1,n.right)}return-1},wy.prototype.T=function(){return this.root.T()},Object.defineProperty(wy.prototype,"size",{get:function(){return this.root.size},enumerable:!1,configurable:!0}),wy.prototype.at=function(){return this.root.at()},wy.prototype.ct=function(){return this.root.ct()},wy.prototype.ut=function(t){return this.root.ut(t)},wy.prototype.forEach=function(n){this.ut(function(t,e){return n(t,e),!1})},wy.prototype.toString=function(){var n=[];return this.ut(function(t,e){return n.push(t+":"+e),!1}),"{"+n.join(", ")+"}"},wy.prototype.ht=function(t){return this.root.ht(t)},wy.prototype.lt=function(){return new gy(this.root,null,this.V,!1)},wy.prototype._t=function(t){return new gy(this.root,t,this.V,!1)},wy.prototype.ft=function(){return new gy(this.root,null,this.V,!0)},wy.prototype.dt=function(t){return new gy(this.root,t,this.V,!0)},wy),gy=(by.prototype.Et=function(){var t=this.Tt.pop(),e={key:t.key,value:t.value};if(this.wt)for(t=t.left;!t.T();)this.Tt.push(t),t=t.right;else for(t=t.right;!t.T();)this.Tt.push(t),t=t.left;return e},by.prototype.It=function(){return 0<this.Tt.length},by.prototype.At=function(){if(0===this.Tt.length)return null;var t=this.Tt[this.Tt.length-1];return{key:t.key,value:t.value}},by),my=(_y.prototype.copy=function(t,e,n,r,i){return new _y(null!=t?t:this.key,null!=e?e:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)},_y.prototype.T=function(){return!1},_y.prototype.ut=function(t){return this.left.ut(t)||t(this.key,this.value)||this.right.ut(t)},_y.prototype.ht=function(t){return this.right.ht(t)||t(this.key,this.value)||this.left.ht(t)},_y.prototype.min=function(){return this.left.T()?this:this.left.min()},_y.prototype.at=function(){return this.min().key},_y.prototype.ct=function(){return this.right.T()?this.key:this.right.ct()},_y.prototype.rt=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.rt(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.rt(t,e,n))).Rt()},_y.prototype.Pt=function(){if(this.left.T())return _y.EMPTY;var t=this;return t.left.gt()||t.left.left.gt()||(t=t.Vt()),(t=t.copy(null,null,null,t.left.Pt(),null)).Rt()},_y.prototype.remove=function(t,e){var n,r=this;if(e(t,r.key)<0)r.left.T()||r.left.gt()||r.left.left.gt()||(r=r.Vt()),r=r.copy(null,null,null,r.left.remove(t,e),null);else{if(r.left.gt()&&(r=r.yt()),r.right.T()||r.right.gt()||r.right.left.gt()||(r=r.vt()),0===e(t,r.key)){if(r.right.T())return _y.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.Pt())}r=r.copy(null,null,null,null,r.right.remove(t,e))}return r.Rt()},_y.prototype.gt=function(){return this.color},_y.prototype.Rt=function(){var t=this;return t.right.gt()&&!t.left.gt()&&(t=t.bt()),t.left.gt()&&t.left.left.gt()&&(t=t.yt()),t.left.gt()&&t.right.gt()&&(t=t.St()),t},_y.prototype.Vt=function(){var t=this.St();return t.right.left.gt()&&(t=(t=(t=t.copy(null,null,null,null,t.right.yt())).bt()).St()),t},_y.prototype.vt=function(){var t=this.St();return t.left.left.gt()&&(t=(t=t.yt()).St()),t},_y.prototype.bt=function(){var t=this.copy(null,null,_y.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)},_y.prototype.yt=function(){var t=this.copy(null,null,_y.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)},_y.prototype.St=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},_y.prototype.Dt=function(){var t=this.Ct();return Math.pow(2,t)<=this.size+1},_y.prototype.Ct=function(){if(this.gt()&&this.left.gt())throw Tv();if(this.right.gt())throw Tv();var t=this.left.Ct();if(t!==this.right.Ct())throw Tv();return t+(this.gt()?0:1)},_y);function _y(t,e,n,r,i){this.key=t,this.value=e,this.color=null!=n?n:_y.RED,this.left=null!=r?r:_y.EMPTY,this.right=null!=i?i:_y.EMPTY,this.size=this.left.size+1+this.right.size}function by(t,e,n,r){this.wt=r,this.Tt=[];for(var i=1;!t.T();)if(i=e?n(t.key,e):1,r&&(i*=-1),i<0)t=this.wt?t.left:t.right;else{if(0===i){this.Tt.push(t);break}this.Tt.push(t),t=this.wt?t.right:t.left}}function wy(t,e){this.V=t,this.root=e||my.EMPTY}function Ey(){this.size=0}my.EMPTY=null,my.RED=!0,my.ot=!1,my.EMPTY=(Object.defineProperty(Ey.prototype,"key",{get:function(){throw Tv()},enumerable:!1,configurable:!0}),Object.defineProperty(Ey.prototype,"value",{get:function(){throw Tv()},enumerable:!1,configurable:!0}),Object.defineProperty(Ey.prototype,"color",{get:function(){throw Tv()},enumerable:!1,configurable:!0}),Object.defineProperty(Ey.prototype,"left",{get:function(){throw Tv()},enumerable:!1,configurable:!0}),Object.defineProperty(Ey.prototype,"right",{get:function(){throw Tv()},enumerable:!1,configurable:!0}),Ey.prototype.copy=function(t,e,n,r,i){return this},Ey.prototype.rt=function(t,e,n){return new my(t,e)},Ey.prototype.remove=function(t,e){return this},Ey.prototype.T=function(){return!0},Ey.prototype.ut=function(t){return!1},Ey.prototype.ht=function(t){return!1},Ey.prototype.at=function(){return null},Ey.prototype.ct=function(){return null},Ey.prototype.gt=function(){return!1},Ey.prototype.Dt=function(){return!0},Ey.prototype.Ct=function(){return 0},new Ey);var Iy=(Ny.prototype.has=function(t){return null!==this.data.get(t)},Ny.prototype.first=function(){return this.data.at()},Ny.prototype.last=function(){return this.data.ct()},Object.defineProperty(Ny.prototype,"size",{get:function(){return this.data.size},enumerable:!1,configurable:!0}),Ny.prototype.indexOf=function(t){return this.data.indexOf(t)},Ny.prototype.forEach=function(n){this.data.ut(function(t,e){return n(t),!1})},Ny.prototype.Nt=function(t,e){for(var n=this.data._t(t[0]);n.It();){var r=n.Et();if(0<=this.V(r.key,t[1]))return;e(r.key)}},Ny.prototype.xt=function(t,e){for(var n=void 0!==e?this.data._t(e):this.data.lt();n.It();)if(!t(n.Et().key))return},Ny.prototype.Ft=function(t){return(t=this.data._t(t)).It()?t.Et().key:null},Ny.prototype.lt=function(){return new Ty(this.data.lt())},Ny.prototype._t=function(t){return new Ty(this.data._t(t))},Ny.prototype.add=function(t){return this.copy(this.data.remove(t).rt(t,!0))},Ny.prototype.delete=function(t){return this.has(t)?this.copy(this.data.remove(t)):this},Ny.prototype.T=function(){return this.data.T()},Ny.prototype.Ot=function(t){var e=this;return e.size<t.size&&(e=t,t=this),t.forEach(function(t){e=e.add(t)}),e},Ny.prototype.isEqual=function(t){if(!(t instanceof Ny))return!1;if(this.size!==t.size)return!1;for(var e=this.data.lt(),n=t.data.lt();e.It();){var r=e.Et().key,i=n.Et().key;if(0!==this.V(r,i))return!1}return!0},Ny.prototype.O=function(){var e=[];return this.forEach(function(t){e.push(t)}),e},Ny.prototype.toString=function(){var e=[];return this.forEach(function(t){return e.push(t)}),"SortedSet("+e.toString()+")"},Ny.prototype.copy=function(t){var e=new Ny(this.V);return e.data=t,e},Ny),Ty=(Cy.prototype.Et=function(){return this.Mt.Et().key},Cy.prototype.It=function(){return this.Mt.It()},Cy),Sy=new yy(Hv.V);function Cy(t){this.Mt=t}function Ny(t){this.V=t,this.data=new yy(this.V)}var Ay=new yy(Hv.V),ky=new yy(Hv.V),Oy=new Iy(Hv.V);function Py(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=Oy,r=0,i=t;r<i.length;r++)var o=i[r],n=n.add(o);return n}var Ry=new Iy(Av),Dy=(Yy.Lt=function(t){return new Yy(t.V)},Yy.prototype.has=function(t){return null!=this.kt.get(t)},Yy.prototype.get=function(t){return this.kt.get(t)},Yy.prototype.first=function(){return this.$t.at()},Yy.prototype.last=function(){return this.$t.ct()},Yy.prototype.T=function(){return this.$t.T()},Yy.prototype.indexOf=function(t){return(t=this.kt.get(t))?this.$t.indexOf(t):-1},Object.defineProperty(Yy.prototype,"size",{get:function(){return this.$t.size},enumerable:!1,configurable:!0}),Yy.prototype.forEach=function(n){this.$t.ut(function(t,e){return n(t),!1})},Yy.prototype.add=function(t){var e=this.delete(t.key);return e.copy(e.kt.rt(t.key,t),e.$t.rt(t,null))},Yy.prototype.delete=function(t){var e=this.get(t);return e?this.copy(this.kt.remove(t),this.$t.remove(e)):this},Yy.prototype.isEqual=function(t){if(!(t instanceof Yy))return!1;if(this.size!==t.size)return!1;for(var e=this.$t.lt(),n=t.$t.lt();e.It();){var r=e.Et().key,i=n.Et().key;if(!r.isEqual(i))return!1}return!0},Yy.prototype.toString=function(){var e=[];return this.forEach(function(t){e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"},Yy.prototype.copy=function(t,e){var n=new Yy;return n.V=this.V,n.kt=t,n.$t=e,n},Yy),xy=(Qy.prototype.track=function(t){var e=t.doc.key,n=this.Bt.get(e);!n||0!==t.type&&3===n.type?this.Bt=this.Bt.rt(e,t):3===t.type&&1!==n.type?this.Bt=this.Bt.rt(e,{type:n.type,doc:t.doc}):2===t.type&&2===n.type?this.Bt=this.Bt.rt(e,{type:2,doc:t.doc}):2===t.type&&0===n.type?this.Bt=this.Bt.rt(e,{type:0,doc:t.doc}):1===t.type&&0===n.type?this.Bt=this.Bt.remove(e):1===t.type&&2===n.type?this.Bt=this.Bt.rt(e,{type:1,doc:n.doc}):0===t.type&&1===n.type?this.Bt=this.Bt.rt(e,{type:2,doc:t.doc}):Tv()},Qy.prototype.qt=function(){var n=[];return this.Bt.ut(function(t,e){n.push(e)}),n},Qy),Ly=(zy.jt=function(t,e,n,r){var i=[];return e.forEach(function(t){i.push({type:0,doc:t})}),new zy(t,e,Dy.Lt(e),i,n,r,!0,!1)},Object.defineProperty(zy.prototype,"hasPendingWrites",{get:function(){return!this.Qt.T()},enumerable:!1,configurable:!0}),zy.prototype.isEqual=function(t){if(!(this.fromCache===t.fromCache&&this.Kt===t.Kt&&this.Qt.isEqual(t.Qt)&&s_(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.Ut.isEqual(t.Ut)))return!1;var e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(var r=0;r<e.length;r++)if(e[r].type!==n[r].type||!e[r].doc.isEqual(n[r].doc))return!1;return!0},zy),My=(Gy.Yt=function(t,e){var n=new Map;return n.set(t,Fy.Xt(t,e)),new Gy(qv.min(),n,Ry,Sy,Py())},Gy),Fy=(Hy.Xt=function(t,e){return new Hy(uy.Z,e,Py(),Py(),Py())},Hy),Uy=function(t,e,n,r){this.se=t,this.removedTargetIds=e,this.key=n,this.ie=r},jy=function(t,e){this.targetId=t,this.re=e},Vy=function(t,e,n,r){void 0===n&&(n=uy.Z),void 0===r&&(r=null),this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=r},qy=(Object.defineProperty(Ky.prototype,"Zt",{get:function(){return this.ue},enumerable:!1,configurable:!0}),Object.defineProperty(Ky.prototype,"resumeToken",{get:function(){return this.ce},enumerable:!1,configurable:!0}),Object.defineProperty(Ky.prototype,"le",{get:function(){return 0!==this.oe},enumerable:!1,configurable:!0}),Object.defineProperty(Ky.prototype,"_e",{get:function(){return this.he},enumerable:!1,configurable:!0}),Ky.prototype.fe=function(t){0<t.X()&&(this.he=!0,this.ce=t)},Ky.prototype.de=function(){var n=Py(),r=Py(),i=Py();return this.ae.forEach(function(t,e){switch(e){case 0:n=n.add(t);break;case 2:r=r.add(t);break;case 1:i=i.add(t);break;default:Tv()}}),new Fy(this.ce,this.ue,n,r,i)},Ky.prototype.we=function(){this.he=!1,this.ae=Jy()},Ky.prototype.Te=function(t,e){this.he=!0,this.ae=this.ae.rt(t,e)},Ky.prototype.Ee=function(t){this.he=!0,this.ae=this.ae.remove(t)},Ky.prototype.Ie=function(){this.oe+=1},Ky.prototype.me=function(){--this.oe},Ky.prototype.Ae=function(){this.he=!0,this.ue=!0},Ky),By=(Wy.prototype.pe=function(t){for(var e=0,n=t.se;e<n.length;e++){var r=n[e];t.ie instanceof qm?this.ve(r,t.ie):t.ie instanceof Bm&&this.be(r,t.key,t.ie)}for(var i=0,o=t.removedTargetIds;i<o.length;i++){var s=o[i];this.be(s,t.key,t.ie)}},Wy.prototype.Se=function(n){var r=this;this.De(n,function(t){var e=r.Ce(t);switch(n.state){case 0:r.Ne(t)&&e.fe(n.resumeToken);break;case 1:e.me(),e.le||e.we(),e.fe(n.resumeToken);break;case 2:e.me(),e.le||r.removeTarget(t);break;case 3:r.Ne(t)&&(e.Ae(),e.fe(n.resumeToken));break;case 4:r.Ne(t)&&(r.xe(t),e.fe(n.resumeToken));break;default:Tv()}})},Wy.prototype.De=function(t,n){var r=this;0<t.targetIds.length?t.targetIds.forEach(n):this.Pe.forEach(function(t,e){r.Ne(e)&&n(e)})},Wy.prototype.Fe=function(t){var e=t.targetId,n=t.re.count;(t=this.Oe(e))&&(ay(t=t.target)?0===n?(t=new Hv(t.path),this.be(e,t,new Bm(t,qv.min()))):Sv(1===n):this.Me(e)!==n&&(this.xe(e),this.ye=this.ye.add(e)))},Wy.prototype.ke=function(r){var i=this,o=new Map;this.Pe.forEach(function(t,e){var n=i.Oe(e);n&&(t.Zt&&ay(n.target)&&(n=new Hv(n.target.path),null!==i.ge.get(n)||i.$e(e,n)||i.be(e,n,new Bm(n,r))),t._e&&(o.set(e,t.de()),t.we()))});var s=Py();this.Ve.forEach(function(t,e){var n=!0;e.xt(function(t){return!(t=i.Oe(t))||2===t.tt||(n=!1)}),n&&(s=s.add(t))});var t=new My(r,o,this.ye,this.ge,s);return this.ge=Sy,this.Ve=Xy(),this.ye=new Iy(Av),t},Wy.prototype.ve=function(t,e){var n;this.Ne(t)&&(n=this.$e(t,e.key)?2:0,this.Ce(t).Te(e.key,n),this.ge=this.ge.rt(e.key,e),this.Ve=this.Ve.rt(e.key,this.Le(e.key).add(t)))},Wy.prototype.be=function(t,e,n){var r;this.Ne(t)&&(r=this.Ce(t),this.$e(t,e)?r.Te(e,1):r.Ee(e),this.Ve=this.Ve.rt(e,this.Le(e).delete(t)),n&&(this.ge=this.ge.rt(e,n)))},Wy.prototype.removeTarget=function(t){this.Pe.delete(t)},Wy.prototype.Me=function(t){var e=this.Ce(t).de();return this.Re.Be(t).size+e.te.size-e.ne.size},Wy.prototype.Ie=function(t){this.Ce(t).Ie()},Wy.prototype.Ce=function(t){var e=this.Pe.get(t);return e||(e=new qy,this.Pe.set(t,e)),e},Wy.prototype.Le=function(t){var e=this.Ve.get(t);return e||(e=new Iy(Av),this.Ve=this.Ve.rt(t,e)),e},Wy.prototype.Ne=function(t){var e=null!==this.Oe(t);return e||bv("WatchChangeAggregator","Detected inactive target",t),e},Wy.prototype.Oe=function(t){var e=this.Pe.get(t);return e&&e.le?null:this.Re.qe(t)},Wy.prototype.xe=function(e){var n=this;this.Pe.set(e,new qy),this.Re.Be(e).forEach(function(t){n.be(e,t,null)})},Wy.prototype.$e=function(t,e){return this.Re.Be(t).has(e)},Wy);function Wy(t){this.Re=t,this.Pe=new Map,this.ge=Sy,this.Ve=Xy(),this.ye=new Iy(Av)}function Ky(){this.oe=0,this.ae=Jy(),this.ce=uy.Z,this.ue=!1,this.he=!0}function Hy(t,e,n,r,i){this.resumeToken=t,this.Zt=e,this.te=n,this.ee=r,this.ne=i}function Gy(t,e,n,r,i){this.et=t,this.Gt=e,this.zt=n,this.Ht=r,this.Jt=i}function zy(t,e,n,r,i,o,s,a){this.query=t,this.docs=e,this.Ut=n,this.docChanges=r,this.Qt=i,this.fromCache=o,this.Kt=s,this.Wt=a}function Qy(){this.Bt=new yy(Hv.V)}function Yy(n){this.V=n?function(t,e){return n(t,e)||Hv.V(t.key,e.key)}:function(t,e){return Hv.V(t.key,e.key)},this.kt=Ay,this.$t=new yy(this.V)}function Xy(){return new yy(Hv.V)}function Jy(){return new yy(Hv.V)}function $y(t){return"server_timestamp"===(null===(t=((null===(t=null==t?void 0:t.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function Zy(t){return t=ag(t.mapValue.fields.__local_write_time__.timestampValue),new Vv(t.seconds,t.nanos)}var tg=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function eg(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?$y(t)?4:10:Tv()}function ng(r,i){var t,e=eg(r);if(e!==eg(i))return!1;switch(e){case 0:return!0;case 1:return r.booleanValue===i.booleanValue;case 4:return Zy(r).isEqual(Zy(i));case 3:return function(t){if("string"==typeof r.timestampValue&&"string"==typeof t.timestampValue&&r.timestampValue.length===t.timestampValue.length)return r.timestampValue===t.timestampValue;var e=ag(r.timestampValue),t=ag(t.timestampValue);return e.seconds===t.seconds&&e.nanos===t.nanos}(i);case 5:return r.stringValue===i.stringValue;case 6:return t=i,cg(r.bytesValue).isEqual(cg(t.bytesValue));case 7:return r.referenceValue===i.referenceValue;case 8:return e=i,ug((t=r).geoPointValue.latitude)===ug(e.geoPointValue.latitude)&&ug(t.geoPointValue.longitude)===ug(e.geoPointValue.longitude);case 2:return t=i,"integerValue"in(e=r)&&"integerValue"in t?ug(e.integerValue)===ug(t.integerValue):"doubleValue"in e&&"doubleValue"in t&&((e=ug(e.doubleValue))===(t=ug(t.doubleValue))?ey(e)===ey(t):isNaN(e)&&isNaN(t));case 9:return kv(r.arrayValue.values||[],i.arrayValue.values||[],ng);case 10:return function(){var t,e=r.mapValue.fields||{},n=i.mapValue.fields||{};if(Pv(e)!==Pv(n))return!1;for(t in e)if(e.hasOwnProperty(t)&&(void 0===n[t]||!ng(e[t],n[t])))return!1;return!0}();default:return Tv()}}function rg(t,e){return void 0!==(t.values||[]).find(function(t){return ng(t,e)})}function ig(t,e){var n,r,i,o=eg(t),s=eg(e);if(o!==s)return Av(o,s);switch(o){case 0:return 0;case 1:return Av(t.booleanValue,e.booleanValue);case 2:return n=e,(r=ug(t.integerValue||t.doubleValue))<(n=ug(n.integerValue||n.doubleValue))?-1:n<r?1:r===n?0:isNaN(r)?isNaN(n)?0:-1:1;case 3:return og(t.timestampValue,e.timestampValue);case 4:return og(Zy(t),Zy(e));case 5:return Av(t.stringValue,e.stringValue);case 6:return i=t.bytesValue,s=e.bytesValue,i=cg(i),s=cg(s),i.A(s);case 7:return function(t,e){for(var n=t.split("/"),r=e.split("/"),i=0;i<n.length&&i<r.length;i++){var o=Av(n[i],r[i]);if(0!==o)return o}return Av(n.length,r.length)}(t.referenceValue,e.referenceValue);case 8:return o=t.geoPointValue,r=e.geoPointValue,0!==(n=Av(ug(o.latitude),ug(r.latitude)))?n:Av(ug(o.longitude),ug(r.longitude));case 9:return function(t,e){for(var n=t.values||[],r=e.values||[],i=0;i<n.length&&i<r.length;++i){var o=ig(n[i],r[i]);if(o)return o}return Av(n.length,r.length)}(t.arrayValue,e.arrayValue);case 10:return function(t,e){var n=t.fields||{},r=Object.keys(n),i=e.fields||{},o=Object.keys(i);r.sort(),o.sort();for(var s=0;s<r.length&&s<o.length;++s){var a=Av(r[s],o[s]);if(0!==a)return a;if(0!==(a=ig(n[r[s]],i[o[s]])))return a}return Av(r.length,o.length)}(t.mapValue,e.mapValue);default:throw Tv()}}function og(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return Av(t,e);var n=ag(t),t=ag(e);return 0!==(e=Av(n.seconds,t.seconds))?e:Av(n.nanos,t.nanos)}function sg(t){return function s(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?"time("+(t=ag(t=i.timestampValue)).seconds+","+t.nanos+")":"stringValue"in i?i.stringValue:"bytesValue"in i?cg(i.bytesValue).toBase64():"referenceValue"in i?(e=i.referenceValue,Hv.W(e).toString()):"geoPointValue"in i?"geo("+(e=i.geoPointValue).latitude+","+e.longitude+")":"arrayValue"in i?function(){for(var t="[",e=!0,n=0,r=i.arrayValue.values||[];n<r.length;n++)e?e=!1:t+=",",t+=s(r[n]);return t+"]"}():"mapValue"in i?function(t){for(var e="{",n=!0,r=0,i=Object.keys(t.fields||{}).sort();r<i.length;r++){var o=i[r];n?n=!1:e+=",",e+=o+":"+s(t.fields[o])}return e+"}"}(i.mapValue):Tv();var t,e}(t)}function ag(t){if(Sv(!!t),"string"!=typeof t)return{seconds:ug(t.seconds),nanos:ug(t.nanos)};var e=0,n=tg.exec(t);return Sv(!!n),n[1]&&(n=(n[1]+"000000000").substr(0,9),e=Number(n)),t=new Date(t),{seconds:Math.floor(t.getTime()/1e3),nanos:e}}function ug(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function cg(t){return"string"==typeof t?uy.fromBase64String(t):uy.fromUint8Array(t)}function hg(t,e){return{referenceValue:"projects/"+t.projectId+"/databases/"+t.database+"/documents/"+e.path.M()}}function lg(t){return t&&"integerValue"in t}function fg(t){return!!t&&"arrayValue"in t}function pg(t){return t&&"nullValue"in t}function dg(t){return t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function vg(t){return t&&"mapValue"in t}var yg={asc:"ASCENDING",desc:"DESCENDING"},gg={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},mg=function(t,e){this.t=t,this.Ue=e};function _g(t){return{integerValue:""+t}}function bg(t,e){if(t.Ue){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ey(e)?"-0":e}}function wg(t,e){return ny(e)?_g(e):bg(t,e)}function Eg(t,e){return t.Ue?new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+e.nanoseconds).slice(-9)+"Z":{seconds:""+e.seconds,nanos:e.nanoseconds}}function Ig(t,e){return t.Ue?e.toBase64():e.toUint8Array()}function Tg(t){return Sv(!!t),qv.m((t=ag(t),new Vv(t.seconds,t.nanos)))}function Sg(t,e){return new Bv(["projects",t.projectId,"databases",t.database]).child("documents").child(e).M()}function Cg(t){return Sv(Wg(t=Bv.k(t))),t}function Ng(t,e){return Sg(t.t,e.path)}function Ag(t,e){if((e=Cg(e)).get(1)!==t.t.projectId)throw new jv(Uv.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+e.get(1)+" vs "+t.t.projectId);if(e.get(3)!==t.t.database)throw new jv(Uv.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+e.get(3)+" vs "+t.t.database);return new Hv(Rg(e))}function kg(t,e){return Sg(t.t,e)}function Og(t){return 4===(t=Cg(t)).length?Bv.$():Rg(t)}function Pg(t){return new Bv(["projects",t.t.projectId,"databases",t.t.database]).M()}function Rg(t){return Sv(4<t.length&&"documents"===t.get(4)),t.v(5)}function Dg(t,e,n){return{name:Ng(t,e),fields:n.proto.mapValue.fields}}function xg(t,e){var n,r,i;if(e instanceof _m)n={update:Dg(t,e.key,e.value)};else if(e instanceof Om)n={delete:Ng(t,e.key)};else if(e instanceof bm)n={update:Dg(t,e.key,e.data),updateMask:(i=e.Qe,r=[],i.fields.forEach(function(t){return r.push(t.M())}),{fieldPaths:r})};else if(e instanceof Sm)n={transform:{document:Ng(t,e.key),fieldTransforms:e.fieldTransforms.map(function(t){var e=t.transform;if(e instanceof zg)return{fieldPath:t.field.M(),setToServerValue:"REQUEST_TIME"};if(e instanceof Qg)return{fieldPath:t.field.M(),appendMissingElements:{values:e.elements}};if(e instanceof Zg)return{fieldPath:t.field.M(),removeAllFromArray:{values:e.elements}};if(e instanceof rm)return{fieldPath:t.field.M(),increment:e.Ke};throw Tv()})}};else{if(!(e instanceof Pm))return Tv();n={verify:Ng(t,e.key)}}return e.je.We||(n.currentDocument=void 0!==(i=e.je).updateTime?{updateTime:Eg(e=t,(t=i.updateTime).P())}:void 0!==i.exists?{exists:i.exists}:Tv()),n}function Lg(i,t){var e=t.currentDocument?void 0!==(o=t.currentDocument).updateTime?lm.updateTime(Tg(o.updateTime)):void 0!==o.exists?lm.exists(o.exists):lm.Ge():lm.Ge();if(t.update){t.update.name;var n=Ag(i,t.update.name),r=new Rm({mapValue:{fields:t.update.fields}});if(t.updateMask){var o=(o=t.updateMask.fieldPaths||[],new am(o.map(function(t){return Kv.U(t)})));return new bm(n,r,o,e)}return new _m(n,r,e)}if(t.delete){var s=Ag(i,t.delete);return new Om(s,e)}return t.transform?(r=Ag(i,t.transform.document),s=t.transform.fieldTransforms.map(function(t){return e=i,r=null,"setToServerValue"in(t=t)?(Sv("REQUEST_TIME"===t.setToServerValue),r=new zg):"appendMissingElements"in t?(n=t.appendMissingElements.values||[],r=new Qg(n)):"removeAllFromArray"in t?(n=t.removeAllFromArray.values||[],r=new Zg(n)):"increment"in t?r=new rm(e,t.increment):Tv(),t=Kv.U(t.fieldPath),new um(t,r);var e,n,r}),Sv(!0===e.exists),new Sm(r,s)):t.verify?(t=Ag(i,t.verify),new Pm(t,e)):Tv()}function Mg(t,e){return{documents:[kg(t,e.path)]}}function Fg(t,e){var n={structuredQuery:{}},r=e.path;return null!==e.collectionGroup?(n.parent=kg(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=kg(t,r.S()),n.structuredQuery.from=[{collectionId:r.C()}]),(r=function(t){if(0!==t.length)return 1===(t=t.map(function(t){if("=="===t.op){if(dg(t.value))return{unaryFilter:{field:qg(t.field),op:"IS_NAN"}};if(pg(t.value))return{unaryFilter:{field:qg(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(dg(t.value))return{unaryFilter:{field:qg(t.field),op:"IS_NOT_NAN"}};if(pg(t.value))return{unaryFilter:{field:qg(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:qg(t.field),op:(e=t.op,gg[e]),value:t.value}};var e})).length?t[0]:{compositeFilter:{op:"AND",filters:t}}}(e.filters))&&(n.structuredQuery.where=r),(r=function(t){if(0!==t.length)return t.map(function(t){return{field:qg(t.field),direction:(t=t.dir,yg[t])}})}(e.orderBy))&&(n.structuredQuery.orderBy=r),r=e.limit,null!==(r=t.Ue||ty(r)?r:{value:r})&&(n.structuredQuery.limit=r),e.startAt&&(n.structuredQuery.startAt=jg(e.startAt)),e.endAt&&(n.structuredQuery.endAt=jg(e.endAt)),n}function Ug(t){var e=Og(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;0<r&&(Sv(1===r),(s=n.from[0]).allDescendants?i=s.collectionId:e=e.child(s.collectionId));var o=[];n.where&&(o=function t(e){return e?void 0!==e.unaryFilter?[function(t){switch(t.unaryFilter.op){case"IS_NAN":var e=Bg(t.unaryFilter.field);return f_.create(e,"==",{doubleValue:NaN});case"IS_NULL":var n=Bg(t.unaryFilter.field);return f_.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":return n=Bg(t.unaryFilter.field),f_.create(n,"!=",{doubleValue:NaN});case"IS_NOT_NULL":return t=Bg(t.unaryFilter.field),f_.create(t,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":default:return Tv()}}(e)]:void 0!==e.fieldFilter?[(n=e,f_.create(Bg(n.fieldFilter.field),function(){switch(n.fieldFilter.op){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":default:return Tv()}}(),n.fieldFilter.value))]:void 0!==e.compositeFilter?e.compositeFilter.filters.map(t).reduce(function(t,e){return t.concat(e)}):Tv():[];var n}(n.where)),t=[],n.orderBy&&(t=n.orderBy.map(function(t){return new q_(Bg((e=t).field),function(){switch(e.direction){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}());var e})),r=null,n.limit&&(r=ty(a="object"==typeof(a=n.limit)?a.value:a)?null:a);var s=null;n.startAt&&(s=Vg(n.startAt));var a=null;return n.endAt&&(a=Vg(n.endAt)),Qm(e,i,t,o,r,"F",s,a)}function jg(t){return{before:t.before,values:t.position}}function Vg(t){var e=!!t.before,t=t.values||[];return new R_(t,e)}function qg(t){return{fieldPath:t.M()}}function Bg(t){return Kv.U(t.fieldPath)}function Wg(t){return 4<=t.length&&"projects"===t.get(0)&&"databases"===t.get(2)}function Kg(t,e){return t instanceof rm?lg(t=e)||t&&"doubleValue"in t?e:{integerValue:0}:null}var Hg,Gg,zg=(lo(Xg,Gg=Pr=function(){this.ze=void 0}),Xg),Qg=(lo(Yg,Hg=Pr),Yg);function Yg(t){var e=this;return(e=Hg.call(this)||this).elements=t,e}function Xg(){return null!==Gg&&Gg.apply(this,arguments)||this}function Jg(t,e){for(var n=sm(e),r=0,i=t.elements;r<i.length;r++)!function(e){n.some(function(t){return ng(t,e)})||n.push(e)}(i[r]);return{arrayValue:{values:n}}}var $g,Zg=(lo(tm,$g=Pr),tm);function tm(t){var e=this;return(e=$g.call(this)||this).elements=t,e}function em(t,e){for(var n=sm(e),r=0,i=t.elements;r<i.length;r++)!function(e){n=n.filter(function(t){return!ng(t,e)})}(i[r]);return{arrayValue:{values:n}}}var nm,rm=(lo(im,nm=Pr),im);function im(t,e){var n=this;return(n=nm.call(this)||this).serializer=t,n.Ke=e,n}function om(t){return ug(t.integerValue||t.doubleValue)}function sm(t){return fg(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}var am=(cm.prototype.He=function(t){for(var e=0,n=this.fields;e<n.length;e++)if(n[e].N(t))return!0;return!1},cm.prototype.isEqual=function(t){return kv(this.fields,t.fields,function(t,e){return t.isEqual(e)})},cm),um=function(t,e){this.field=t,this.transform=e};function cm(t){(this.fields=t).sort(Kv.V)}function hm(t,e){this.version=t,this.transformResults=e}var lm=(fm.Ge=function(){return new fm},fm.exists=function(t){return new fm(void 0,t)},fm.updateTime=function(t){return new fm(t)},Object.defineProperty(fm.prototype,"We",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!1,configurable:!0}),fm.prototype.isEqual=function(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)},fm);function fm(t,e){this.updateTime=t,this.exists=e}function pm(t,e){return void 0!==t.updateTime?e instanceof qm&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e instanceof qm}function dm(t,e,n,r){return t instanceof _m?(o=e,pm((i=t).je,o)?(o=ym(o),new qm(i.key,o,i.value,{Je:!0})):o):t instanceof bm?function(t,e){if(!pm(t.je,e))return e;var n=ym(e),e=Im(t,e);return new qm(t.key,n,e,{Je:!0})}(t,e):t instanceof Sm?function(t,e,n,r){if(!pm(t.je,e))return e;var i=e,r=function(t,e,n,r){for(var i,o=[],s=0,a=t;s<a.length;s++){var u=a[s],c=u.transform,h=null;n instanceof qm&&(h=n.field(u.field)),null===h&&r instanceof qm&&(h=r.field(u.field)),o.push((i=h,u=e,h=void 0,c instanceof zg?(h={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:u.seconds,nanos:u.nanoseconds}}}},i&&(h.fields.__previous_value__=i),{mapValue:h}):c instanceof Qg?Jg(c,i):c instanceof Zg?em(c,i):(i=om(c=Kg(h=c,i))+om(h.Ke),lg(c)&&lg(h.Ke)?_g(i):bg(h.serializer,i))))}return o}(t.fieldTransforms,n,e,r),r=Nm(t,i.data(),r);return new qm(t.key,i.version,r,{Je:!0})}(t,e,r,n):pm(t.je,e)?new Bm(t.key,qv.min()):e;var i,o}function vm(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.je.isEqual(e.je)&&(0===t.type?t.value.isEqual(e.value):1===t.type?t.data.isEqual(e.data)&&t.Qe.isEqual(e.Qe):2!==t.type||kv(t.fieldTransforms,t.fieldTransforms,function(t,e){return t.field.isEqual(e.field)&&(t=t.transform,e=e.transform,t instanceof Qg&&e instanceof Qg||t instanceof Zg&&e instanceof Zg?kv(t.elements,e.elements,ng):t instanceof rm&&e instanceof rm?ng(t.Ke,e.Ke):t instanceof zg&&e instanceof zg)}))}function ym(t){return t instanceof qm?t.version:qv.min()}var gm,mm,_m=(lo(Em,mm=L=function(){}),Em),bm=(lo(wm,gm=L),wm);function wm(t,e,n,r){var i=this;return(i=gm.call(this)||this).key=t,i.data=e,i.Qe=n,i.je=r,i.type=1,i}function Em(t,e,n){var r=this;return(r=mm.call(this)||this).key=t,r.value=e,r.je=n,r.type=0,r}function Im(t,e){return n=t,e=e instanceof qm?e.data():Rm.empty(),r=new Dm(e),n.Qe.fields.forEach(function(t){var e;t.T()||(null!==(e=n.data.field(t))?r.set(t,e):r.delete(t))}),r.Ye();var n,r}var Tm,Sm=(lo(Cm,Tm=L),Cm);function Cm(t,e){var n=this;return(n=Tm.call(this)||this).key=t,n.fieldTransforms=e,n.type=2,n.je=lm.exists(!0),n}function Nm(t,e,n){for(var r=new Dm(e),i=0;i<t.fieldTransforms.length;i++){var o=t.fieldTransforms[i];r.set(o.field,n[i])}return r.Ye()}var Am,km,Om=(lo(Fm,km=L),Fm),Pm=(lo(Mm,Am=L),Mm),Rm=(Lm.empty=function(){return new Lm({mapValue:{}})},Lm.prototype.field=function(t){if(t.T())return this.proto;for(var e=this.proto,n=0;n<t.length-1;++n){if(!e.mapValue.fields)return null;if(!vg(e=e.mapValue.fields[t.get(n)]))return null}return(e=(e.mapValue.fields||{})[t.C()])||null},Lm.prototype.isEqual=function(t){return ng(this.proto,t.proto)},Lm),Dm=(xm.prototype.set=function(t,e){return this.tn(t,e),this},xm.prototype.delete=function(t){return this.tn(t,null),this},xm.prototype.tn=function(t,e){for(var n=this.Ze,r=0;r<t.length-1;++r)var i=t.get(r),o=n.get(i),n=(o instanceof Map||(o=o&&10===eg(o)?new Map(Object.entries(o.mapValue.fields||{})):new Map,n.set(i,o)),o);n.set(t.C(),e)},xm.prototype.Ye=function(){var t=this.en(Kv.$(),this.Ze);return null!=t?new Rm(t):this.Xe},xm.prototype.en=function(r,t){var i=this,o=!1,e=this.Xe.field(r),s=vg(e)?Object.assign({},e.mapValue.fields):{};return t.forEach(function(t,e){var n;t instanceof Map?null!=(n=i.en(r.child(e),t))&&(s[e]=n,o=!0):null!==t?(s[e]=t,o=!0):s.hasOwnProperty(e)&&(delete s[e],o=!0)}),o?{mapValue:{fields:s}}:null},xm);function xm(t){void 0===t&&(t=Rm.empty()),this.Xe=t,this.Ze=new Map}function Lm(t){this.proto=t}function Mm(t,e){var n=this;return(n=Am.call(this)||this).key=t,n.je=e,n.type=4,n}function Fm(t,e){var n=this;return(n=km.call(this)||this).key=t,n.je=e,n.type=3,n}var Um,jm,Vm,qm=(lo(zm,Vm=K=function(t,e){this.key=t,this.version=e}),zm.prototype.field=function(t){return this.nn.field(t)},zm.prototype.data=function(){return this.nn},zm.prototype.sn=function(){return this.nn.proto},zm.prototype.isEqual=function(t){return t instanceof zm&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.Je===t.Je&&this.hasCommittedMutations===t.hasCommittedMutations&&this.nn.isEqual(t.nn)},zm.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+this.nn.toString()+", {hasLocalMutations: "+this.Je+"}), {hasCommittedMutations: "+this.hasCommittedMutations+"})"},Object.defineProperty(zm.prototype,"hasPendingWrites",{get:function(){return this.Je||this.hasCommittedMutations},enumerable:!1,configurable:!0}),zm),Bm=(lo(Gm,jm=K),Gm.prototype.toString=function(){return"NoDocument("+this.key+", "+this.version+")"},Object.defineProperty(Gm.prototype,"hasPendingWrites",{get:function(){return this.hasCommittedMutations},enumerable:!1,configurable:!0}),Gm.prototype.isEqual=function(t){return t instanceof Gm&&t.hasCommittedMutations===this.hasCommittedMutations&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},Gm),Wm=(lo(Hm,Um=K),Hm.prototype.toString=function(){return"UnknownDocument("+this.key+", "+this.version+")"},Object.defineProperty(Hm.prototype,"hasPendingWrites",{get:function(){return!0},enumerable:!1,configurable:!0}),Hm.prototype.isEqual=function(t){return t instanceof Hm&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},Hm),Km=function(t,e,n,r,i,o,s,a){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o="F"),void 0===s&&(s=null),void 0===a&&(a=null),this.path=t,this.collectionGroup=e,this.rn=n,this.filters=r,this.limit=i,this.limitType=o,this.startAt=s,this.endAt=a,this.on=null,this.an=null,this.startAt,this.endAt};function Hm(){return null!==Um&&Um.apply(this,arguments)||this}function Gm(t,e,n){var r=this;return(r=jm.call(this,t,e)||this).hasCommittedMutations=!(!n||!n.hasCommittedMutations),r}function zm(t,e,n,r){var i=this;return(i=Vm.call(this,t,e)||this).nn=n,i.Je=!!r.Je,i.hasCommittedMutations=!!r.hasCommittedMutations,i}function Qm(t,e,n,r,i,o,s,a){return new Km(t,e,n,r,i,o,s,a)}function Ym(t){return new Km(t)}function Xm(t){return!ty(t.limit)&&"F"===t.limitType}function Jm(t){return!ty(t.limit)&&"L"===t.limitType}function $m(t){return 0<t.rn.length?t.rn[0].field:null}function Zm(t){for(var e=0,n=t.filters;e<n.length;e++){var r=n[e];if(r.cn())return r.field}return null}function t_(t){return null!==t.collectionGroup}function e_(t){var e=t;if(null===e.on){e.on=[];var n=Zm(e),t=$m(e);if(null!==n&&null===t)n.B()||e.on.push(new q_(n)),e.on.push(new q_(Kv.q(),"asc"));else{for(var r=!1,i=0,o=e.rn;i<o.length;i++){var s=o[i];e.on.push(s),s.field.B()&&(r=!0)}r||(n=0<e.rn.length?e.rn[e.rn.length-1].dir:"asc",e.on.push(new q_(Kv.q(),n)))}}return e.on}function n_(t){var e=t;if(!e.an)if("F"===e.limitType)e.an=iy(e.path,e.collectionGroup,e_(e),e.filters,e.limit,e.startAt,e.endAt);else{for(var n=[],r=0,i=e_(e);r<i.length;r++){var o=i[r],s="desc"===o.dir?"asc":"desc";n.push(new q_(o.field,s))}var a=e.endAt?new R_(e.endAt.position,!e.endAt.before):null,t=e.startAt?new R_(e.startAt.position,!e.startAt.before):null;e.an=iy(e.path,e.collectionGroup,n,e.filters,e.limit,a,t)}return e.an}function r_(t,e,n){return new Km(t.path,t.collectionGroup,t.rn.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function i_(t,e){return new Km(t.path,t.collectionGroup,t.rn.slice(),t.filters.slice(),t.limit,t.limitType,e,t.endAt)}function o_(t,e){return new Km(t.path,t.collectionGroup,t.rn.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,e)}function s_(t,e){return sy(n_(t),n_(e))&&t.limitType===e.limitType}function a_(t){return oy(n_(t))+"|lt:"+t.limitType}function u_(t){return"Query(target="+(n=(e=n_(t)).path.M(),null!==e.collectionGroup&&(n+=" collectionGroup="+e.collectionGroup),0<e.filters.length&&(n+=", filters: ["+e.filters.map(function(t){return t.field.M()+" "+t.op+" "+sg(t.value)}).join(", ")+"]"),ty(e.limit)||(n+=", limit: "+e.limit),0<e.orderBy.length&&(n+=", orderBy: ["+e.orderBy.map(function(t){return t.field.M()+" ("+t.dir+")"}).join(", ")+"]"),e.startAt&&(n+=", startAt: "+F_(e.startAt)),e.endAt&&(n+=", endAt: "+F_(e.endAt)),"Target("+n+")")+"; limitType="+t.limitType+")";var e,n}function c_(i,t){return e=i,n=t.key.path,(null!==e.collectionGroup?t.key.j(e.collectionGroup)&&e.path.N(n):Hv.G(e.path)?e.path.isEqual(n):e.path.F(n))&&function(t){for(var e=0,n=i.rn;e<n.length;e++){var r=n[e];if(!r.field.B()&&null===t.field(r.field))return}return 1}(t)&&function(t){for(var e=0,n=i.filters;e<n.length;e++)if(!n[e].matches(t))return;return 1}(t)&&(n=t,(!(t=i).startAt||U_(t.startAt,e_(t),n))&&(!t.endAt||!U_(t.endAt,e_(t),n)));var e,n}function h_(a){return function(t,e){for(var n=!1,r=0,i=e_(a);r<i.length;r++){var o=i[r],s=function(t,e,n){var r,i;switch(n=t.field.B()?Hv.V(e.key,n.key):(r=t.field,i=n,e=e.field(r),r=i.field(r),null!==e&&null!==r?ig(e,r):Tv()),t.dir){case"asc":return n;case"desc":return-1*n;default:return Tv()}}(o,t,e);if(0!==s)return s;n=n||o.field.B()}return 0}}var l_,f_=(lo(p_,l_=function(){}),p_.create=function(t,e,n){return t.B()?"in"===e||"not-in"===e?this.un(t,e,n):new g_(t,e,n):"array-contains"===e?new A_(t,n):"in"===e?new k_(t,n):"not-in"===e?new O_(t,n):"array-contains-any"===e?new P_(t,n):new p_(t,e,n)},p_.un=function(t,e,n){return new("in"===e?m_:__)(t,n)},p_.prototype.matches=function(t){return t=t.field(this.field),"!="===this.op?null!==t&&this.hn(ig(t,this.value)):null!==t&&eg(this.value)===eg(t)&&this.hn(ig(t,this.value))},p_.prototype.hn=function(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return 0<t;case">=":return 0<=t;default:return Tv()}},p_.prototype.cn=function(){return 0<=["<","<=",">",">=","!=","not-in"].indexOf(this.op)},p_);function p_(t,e,n){var r=this;return(r=l_.call(this)||this).field=t,r.op=e,r.value=n,r}var d_,v_,y_,g_=(lo(E_,y_=f_),E_.prototype.matches=function(t){return t=Hv.V(t.key,this.key),this.hn(t)},E_),m_=(lo(w_,v_=f_),w_.prototype.matches=function(e){return this.keys.some(function(t){return t.isEqual(e.key)})},w_),__=(lo(b_,d_=f_),b_.prototype.matches=function(e){return!this.keys.some(function(t){return t.isEqual(e.key)})},b_);function b_(t,e){var n=this;return(n=d_.call(this,t,"not-in",e)||this).keys=I_(0,e),n}function w_(t,e){var n=this;return(n=v_.call(this,t,"in",e)||this).keys=I_(0,e),n}function E_(t,e,n){var r=this;return(r=y_.call(this,t,e,n)||this).key=Hv.W(n.referenceValue),r}function I_(t,e){return((null===(e=e.arrayValue)||void 0===e?void 0:e.values)||[]).map(function(t){return Hv.W(t.referenceValue)})}var T_,S_,C_,N_,A_=(lo(M_,N_=f_),M_.prototype.matches=function(t){return fg(t=t.field(this.field))&&rg(t.arrayValue,this.value)},M_),k_=(lo(L_,C_=f_),L_.prototype.matches=function(t){return null!==(t=t.field(this.field))&&rg(this.value.arrayValue,t)},L_),O_=(lo(x_,S_=f_),x_.prototype.matches=function(t){return!rg(this.value.arrayValue,{nullValue:"NULL_VALUE"})&&(null!==(t=t.field(this.field))&&!rg(this.value.arrayValue,t))},x_),P_=(lo(D_,T_=f_),D_.prototype.matches=function(t){var e=this;return!(!fg(t=t.field(this.field))||!t.arrayValue.values)&&t.arrayValue.values.some(function(t){return rg(e.value.arrayValue,t)})},D_),R_=function(t,e){this.position=t,this.before=e};function D_(t,e){return T_.call(this,t,"array-contains-any",e)||this}function x_(t,e){return S_.call(this,t,"not-in",e)||this}function L_(t,e){return C_.call(this,t,"in",e)||this}function M_(t,e){return N_.call(this,t,"array-contains",e)||this}function F_(t){return(t.before?"b":"a")+":"+t.position.map(sg).join(",")}function U_(t,e,n){for(var r=0,i=0;i<t.position.length;i++){var o=e[i],s=t.position[i],r=o.field.B()?Hv.V(Hv.W(s.referenceValue),n.key):ig(s,n.field(o.field));if("desc"===o.dir&&(r*=-1),0!==r)break}return t.before?r<=0:r<0}function j_(t,e){if(null===t)return null===e;if(null===e)return!1;if(t.before!==e.before||t.position.length!==e.position.length)return!1;for(var n=0;n<t.position.length;n++)if(!ng(t.position[n],e.position[n]))return!1;return!0}var V_,q_=function(t,e){void 0===e&&(e="asc"),this.field=t,this.dir=e},B_=function(){var n=this;this.promise=new Promise(function(t,e){n.resolve=t,n.reject=e})},W_=($_.prototype.reset=function(){this.Tn=0},$_.prototype.mn=function(){this.Tn=this.wn},$_.prototype.An=function(t){var e=this;this.cancel();var n=Math.floor(this.Tn+this.Rn()),r=Math.max(0,Date.now()-this.In),i=Math.max(0,n-r);0<i&&bv("ExponentialBackoff","Backing off for "+i+" ms (base delay: "+this.Tn+" ms, delay with jitter: "+n+" ms, last attempt: "+r+" ms ago)"),this.En=this.ln.Pn(this._n,i,function(){return e.In=Date.now(),t()}),this.Tn*=this.dn,this.Tn<this.fn&&(this.Tn=this.fn),this.Tn>this.wn&&(this.Tn=this.wn)},$_.prototype.gn=function(){null!==this.En&&(this.En.Vn(),this.En=null)},$_.prototype.cancel=function(){null!==this.En&&(this.En.cancel(),this.En=null)},$_.prototype.Rn=function(){return(Math.random()-.5)*this.Tn},$_),K_=(J_.prototype.catch=function(t){return this.next(void 0,t)},J_.prototype.next=function(r,i){var o=this;return this.bn&&Tv(),this.bn=!0,this.vn?this.error?this.Sn(i,this.error):this.Dn(r,this.result):new J_(function(e,n){o.yn=function(t){o.Dn(r,t).next(e,n)},o.pn=function(t){o.Sn(i,t).next(e,n)}})},J_.prototype.Cn=function(){var n=this;return new Promise(function(t,e){n.next(t,e)})},J_.prototype.Nn=function(t){try{var e=t();return e instanceof J_?e:J_.resolve(e)}catch(t){return J_.reject(t)}},J_.prototype.Dn=function(t,e){return t?this.Nn(function(){return t(e)}):J_.resolve(e)},J_.prototype.Sn=function(t,e){return t?this.Nn(function(){return t(e)}):J_.reject(e)},J_.resolve=function(n){return new J_(function(t,e){t(n)})},J_.reject=function(n){return new J_(function(t,e){e(n)})},J_.xn=function(t){return new J_(function(e,n){var r=0,i=0,o=!1;t.forEach(function(t){++r,t.next(function(){++i,o&&i===r&&e()},function(t){return n(t)})}),o=!0,i===r&&e()})},J_.Fn=function(t){for(var n=J_.resolve(!1),e=0,r=t;e<r.length;e++)!function(e){n=n.next(function(t){return t?J_.resolve(t):e()})}(r[e]);return n},J_.forEach=function(t,n){var r=this,i=[];return t.forEach(function(t,e){i.push(n.call(r,t,e))}),this.xn(i)},J_),H_=(X_.delete=function(t){return bv("SimpleDb","Removing database:",t),ib(window.indexedDB.deleteDatabase(t)).Cn()},X_.kn=function(){if("undefined"==typeof indexedDB)return!1;if(X_.$n())return!0;var t=Oo(),e=0<(n=X_.Mn(t))&&n<10,n=0<(n=X_.Ln(t))&&n<4.5;return!(0<t.indexOf("MSIE ")||0<t.indexOf("Trident/")||0<t.indexOf("Edge/")||e||n)},X_.$n=function(){var t;return"undefined"!=typeof process&&"YES"===(null===(t=process.env)||void 0===t?void 0:t.Bn)},X_.qn=function(t,e){return t.store(e)},X_.Mn=function(t){return t=(t=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i))?t[1].split("_").slice(0,2).join("."):"-1",Number(t)},X_.Ln=function(t){return t=(t=t.match(/Android ([\d.]+)/i))?t[1].split(".").slice(0,2).join("."):"-1",Number(t)},X_.prototype.Un=function(o){return po(this,void 0,void 0,function(){var e,i=this;return vo(this,function(t){switch(t.label){case 0:return this.db?[3,2]:(bv("SimpleDb","Opening database:",this.name),e=this,[4,new Promise(function(e,n){var r=indexedDB.open(i.name,i.version);r.onsuccess=function(t){t=t.target.result,e(t)},r.onblocked=function(){n(new z_(o,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},r.onerror=function(t){"VersionError"===(t=t.target.error).name?n(new jv(Uv.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):n(new z_(o,t))},r.onupgradeneeded=function(t){bv("SimpleDb",'Database "'+i.name+'" requires upgrade from version:',t.oldVersion);var e=t.target.result;i.On.createOrUpgrade(e,r.transaction,t.oldVersion,i.version).next(function(){bv("SimpleDb","Database upgrade to version "+i.version+" complete")})}})]);case 1:e.db=t.sent(),t.label=2;case 2:return[2,(this.Qn&&(this.db.onversionchange=function(t){return i.Qn(t)}),this.db)]}})})},X_.prototype.Kn=function(e){this.Qn=e,this.db&&(this.db.onversionchange=function(t){return e(t)})},X_.prototype.runTransaction=function(a,n,u,c){return po(this,void 0,void 0,function(){var i,o,s,e;return vo(this,function(t){switch(t.label){case 0:i="readonly"===n,o=0,e=function(){var e,n,r;return vo(this,function(t){switch(t.label){case 0:++o,t.label=1;case 1:return t.trys.push([1,4,,5]),[4,s.Un(a)];case 2:return s.db=t.sent(),e=tb.open(s.db,a,i?"readonly":"readwrite",u),n=c(e).catch(function(t){return e.abort(t),K_.reject(t)}).Cn(),r={},n.catch(function(){}),[4,e.Wn];case 3:return[2,(r.value=(t.sent(),n),r)];case 4:return n=t.sent(),r="FirebaseError"!==n.name&&o<3,bv("SimpleDb","Transaction failed with error:",n.message,"Retrying:",r),s.close(),r?[3,5]:[2,{value:Promise.reject(n)}];case 5:return[2]}})},s=this,t.label=1;case 1:return[5,e()];case 2:if("object"==typeof(e=t.sent()))return[2,e.value];t.label=3;case 3:return[3,1];case 4:return[2]}})})},X_.prototype.close=function(){this.db&&this.db.close(),this.db=void 0},X_),G_=(Object.defineProperty(Y_.prototype,"vn",{get:function(){return this.Gn},enumerable:!1,configurable:!0}),Object.defineProperty(Y_.prototype,"Hn",{get:function(){return this.zn},enumerable:!1,configurable:!0}),Object.defineProperty(Y_.prototype,"cursor",{set:function(t){this.jn=t},enumerable:!1,configurable:!0}),Y_.prototype.done=function(){this.Gn=!0},Y_.prototype.Jn=function(t){this.zn=t},Y_.prototype.delete=function(){return ib(this.jn.delete())},Y_),z_=(lo(Q_,V_=jv),Q_);function Q_(t,e){var n=this;return(n=V_.call(this,Uv.UNAVAILABLE,"IndexedDB transaction '"+t+"' failed: "+e)||this).name="IndexedDbTransactionError",n}function Y_(t){this.jn=t,this.Gn=!1,this.zn=null}function X_(t,e,n){this.name=t,this.version=e,this.On=n,12.2===X_.Mn(Oo())&&wv("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}function J_(t){var e=this;this.yn=null,this.pn=null,this.result=void 0,this.error=void 0,this.vn=!1,this.bn=!1,t(function(t){e.vn=!0,e.result=t,e.yn&&e.yn(t)},function(t){e.vn=!0,e.error=t,e.pn&&e.pn(t)})}function $_(t,e,n,r,i){void 0===n&&(n=1e3),void 0===r&&(r=1.5),void 0===i&&(i=6e4),this.ln=t,this._n=e,this.fn=n,this.dn=r,this.wn=i,this.Tn=0,this.En=null,this.In=Date.now(),this.reset()}function Z_(t){return"IndexedDbTransactionError"===t.name}var tb=(rb.open=function(t,e,n,r){try{return new rb(e,t.transaction(r,n))}catch(t){throw new z_(e,t)}},Object.defineProperty(rb.prototype,"Wn",{get:function(){return this.Yn.promise},enumerable:!1,configurable:!0}),rb.prototype.abort=function(t){t&&this.Yn.reject(t),this.aborted||(bv("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},rb.prototype.store=function(t){return t=this.transaction.objectStore(t),new eb(t)},rb),eb=(nb.prototype.put=function(t,e){return ib(t=void 0!==e?(bv("SimpleDb","PUT",this.store.name,t,e),this.store.put(e,t)):(bv("SimpleDb","PUT",this.store.name,"<auto-key>",t),this.store.put(t)))},nb.prototype.add=function(t){return bv("SimpleDb","ADD",this.store.name,t,t),ib(this.store.add(t))},nb.prototype.get=function(e){var n=this;return ib(this.store.get(e)).next(function(t){return void 0===t&&(t=null),bv("SimpleDb","GET",n.store.name,e,t),t})},nb.prototype.delete=function(t){return bv("SimpleDb","DELETE",this.store.name,t),ib(this.store.delete(t))},nb.prototype.count=function(){return bv("SimpleDb","COUNT",this.store.name),ib(this.store.count())},nb.prototype.Xn=function(t,e){var e=this.cursor(this.options(t,e)),n=[];return this.Zn(e,function(t,e){n.push(e)}).next(function(){return n})},nb.prototype.ts=function(t,e){return bv("SimpleDb","DELETE ALL",this.store.name),(e=this.options(t,e)).es=!1,e=this.cursor(e),this.Zn(e,function(t,e,n){return n.delete()})},nb.prototype.ns=function(t,e){e?n=t:(n={},e=t);var n=this.cursor(n);return this.Zn(n,e)},nb.prototype.ss=function(r){var t=this.cursor({});return new K_(function(n,e){t.onerror=function(t){t=sb(t.target.error),e(t)},t.onsuccess=function(t){var e=t.target.result;e?r(e.primaryKey,e.value).next(function(t){t?e.continue():n()}):n()}})},nb.prototype.Zn=function(t,i){var o=[];return new K_(function(r,e){t.onerror=function(t){e(t.target.error)},t.onsuccess=function(t){var e,n=t.target.result;n?(e=new G_(n),(t=i(n.primaryKey,n.value,e))instanceof K_&&(t=t.catch(function(t){return e.done(),K_.reject(t)}),o.push(t)),e.vn?r():null===e.Hn?n.continue():n.continue(e.Hn)):r()}}).next(function(){return K_.xn(o)})},nb.prototype.options=function(t,e){var n=void 0;return void 0!==t&&("string"==typeof t?n=t:e=t),{index:n,range:e}},nb.prototype.cursor=function(t){var e="next";if(t.reverse&&(e="prev"),t.index){var n=this.store.index(t.index);return t.es?n.openKeyCursor(t.range,e):n.openCursor(t.range,e)}return this.store.openCursor(t.range,e)},nb);function nb(t){this.store=t}function rb(e,t){var n=this;this.action=e,this.transaction=t,this.aborted=!1,this.Yn=new B_,this.transaction.oncomplete=function(){n.Yn.resolve()},this.transaction.onabort=function(){t.error?n.Yn.reject(new z_(e,t.error)):n.Yn.resolve()},this.transaction.onerror=function(t){t=sb(t.target.error),n.Yn.reject(new z_(e,t))}}function ib(t){return new K_(function(e,n){t.onsuccess=function(t){t=t.target.result,e(t)},t.onerror=function(t){t=sb(t.target.error),n(t)}})}var ob=!1;function sb(t){var e=H_.Mn(Oo());if(12.2<=e&&e<13&&(e="An internal error was encountered in the Indexed Database server",0<=t.message.indexOf(e))){var n=new jv("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+e+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return ob||(ob=!0,setTimeout(function(){throw n},0)),n}return t}function ab(){return"undefined"!=typeof window?window:null}function ub(){return"undefined"!=typeof document?document:null}var cb=(fb.hs=function(t,e,n,r,i){return(i=new fb(t,e,Date.now()+n,r,i)).start(n),i},fb.prototype.start=function(t){var e=this;this.ls=setTimeout(function(){return e._s()},t)},fb.prototype.Vn=function(){return this._s()},fb.prototype.cancel=function(t){null!==this.ls&&(this.clearTimeout(),this.us.reject(new jv(Uv.CANCELLED,"Operation cancelled"+(t?": "+t:""))))},fb.prototype._s=function(){var e=this;this.rs.fs(function(){return null!==e.ls?(e.clearTimeout(),e.op().then(function(t){return e.us.resolve(t)})):Promise.resolve()})},fb.prototype.clearTimeout=function(){null!==this.ls&&(this.cs(this),clearTimeout(this.ls),this.ls=null)},fb),hb=(Object.defineProperty(lb.prototype,"Vs",{get:function(){return this.Ts},enumerable:!1,configurable:!0}),lb.prototype.fs=function(t){this.enqueue(t)},lb.prototype.ys=function(t){this.ps(),this.vs(t)},lb.prototype.bs=function(){var t;this.Ts||(this.Ts=!0,(t=ub())&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.gs))},lb.prototype.enqueue=function(t){return this.ps(),this.Ts?new Promise(function(t){}):this.vs(t)},lb.prototype.Ss=function(t){var e=this;this.fs(function(){return e.ws.push(t),e.Ds()})},lb.prototype.Ds=function(){return po(this,void 0,void 0,function(){var e,n=this;return vo(this,function(t){switch(t.label){case 0:if(0===this.ws.length)return[3,5];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,this.ws[0]()];case 2:return t.sent(),this.ws.shift(),this.Ps.reset(),[3,4];case 3:if(!Z_(e=t.sent()))throw e;return bv("AsyncQueue","Operation failed with retryable error: "+e),[3,4];case 4:0<this.ws.length&&this.Ps.An(function(){return n.Ds()}),t.label=5;case 5:return[2]}})})},lb.prototype.vs=function(t){var r=this,e=this.ds.then(function(){return r.As=!0,t().catch(function(t){throw r.Is=t,r.As=!1,wv("INTERNAL UNHANDLED ERROR: ",(n=(e=t).message||"",e.stack&&(n=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),n)),t;var e,n}).then(function(t){return r.As=!1,t})});return this.ds=e},lb.prototype.Pn=function(t,e,n){var r=this;return this.ps(),-1<this.Rs.indexOf(t)&&(e=0),n=cb.hs(this,t,e,n,function(t){return r.Cs(t)}),this.Es.push(n),n},lb.prototype.ps=function(){this.Is&&Tv()},lb.prototype.Ns=function(){},lb.prototype.xs=function(){return po(this,void 0,void 0,function(){var e;return vo(this,function(t){switch(t.label){case 0:return[4,e=this.ds];case 1:t.sent(),t.label=2;case 2:if(e!==this.ds)return[3,0];t.label=3;case 3:return[2]}})})},lb.prototype.Fs=function(t){for(var e=0,n=this.Es;e<n.length;e++)if(n[e]._n===t)return!0;return!1},lb.prototype.Os=function(r){var i=this;return this.xs().then(function(){i.Es.sort(function(t,e){return t.os-e.os});for(var t=0,e=i.Es;t<e.length;t++){var n=e[t];if(n.Vn(),"all"!==r&&n._n===r)break}return i.xs()})},lb.prototype.Ms=function(t){this.Rs.push(t)},lb.prototype.Cs=function(t){t=this.Es.indexOf(t),this.Es.splice(t,1)},lb);function lb(){var e=this;this.ds=Promise.resolve(),this.ws=[],this.Ts=!1,this.Es=[],this.Is=null,this.As=!1,this.Rs=[],this.Ps=new W_(this,"async_queue_retry"),this.gs=function(){var t=ub();t&&bv("AsyncQueue","Visibility state changed to "+t.visibilityState),e.Ps.gn()};var t=ub();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this.gs)}function fb(t,e,n,r,i){this.rs=t,this._n=e,this.os=n,this.op=r,this.cs=i,this.us=new B_,this.then=this.us.promise.then.bind(this.us.promise),this.us.promise.catch(function(t){})}function pb(t,e){if(wv("AsyncQueue",e+": "+t),Z_(t))return new jv(Uv.UNAVAILABLE,e+": "+t);throw t}function db(){this.queries=new Fv(a_,s_),this.onlineState="Unknown",this.$s=new Set}var vb=function(){this.ks=void 0,this.listeners=[]};function yb(s,a){return po(this,void 0,void 0,function(){var e,n,r,i,o;return vo(this,function(t){switch(t.label){case 0:if(e=s,n=a.query,r=!1,(i=e.queries.get(n))||(r=!0,i=new vb),!r)return[3,4];t.label=1;case 1:return t.trys.push([1,3,,4]),o=i,[4,e.Ls(n)];case 2:return o.ks=t.sent(),[3,4];case 3:return o=pb(o=t.sent(),"Initialization of query '"+u_(a.query)+"' failed"),[2,void a.onError(o)];case 4:return e.queries.set(n,i),i.listeners.push(a),a.Bs(e.onlineState),i.ks&&a.qs(i.ks)&&mb(e),[2]}})})}function gb(s,a){return po(this,void 0,void 0,function(){var e,n,r,i,o;return vo(this,function(t){return e=s,n=a.query,r=!1,(i=e.queries.get(n))&&0<=(o=i.listeners.indexOf(a))&&(i.listeners.splice(o,1),r=0===i.listeners.length),r?[2,(e.queries.delete(n),e.Us(n))]:[2]})})}function mb(t){t.$s.forEach(function(t){t.next()})}var _b=(Eb.prototype.qs=function(t){if(!this.options.includeMetadataChanges){for(var e=[],n=0,r=t.docChanges;n<r.length;n++){var i=r[n];3!==i.type&&e.push(i)}t=new Ly(t.query,t.docs,t.Ut,e,t.Qt,t.fromCache,t.Kt,!0)}var o=!1;return this.Ks?this.js(t)&&(this.Qs.next(t),o=!0):this.Gs(t,this.onlineState)&&(this.zs(t),o=!0),this.Ws=t,o},Eb.prototype.onError=function(t){this.Qs.error(t)},Eb.prototype.Bs=function(t){this.onlineState=t;var e=!1;return this.Ws&&!this.Ks&&this.Gs(this.Ws,t)&&(this.zs(this.Ws),e=!0),e},Eb.prototype.Gs=function(t,e){if(!t.fromCache)return!0;var n="Offline"!==e;return!(this.options.Hs&&n||t.docs.T()&&"Offline"!==e)},Eb.prototype.js=function(t){if(0<t.docChanges.length)return!0;var e=this.Ws&&this.Ws.hasPendingWrites!==t.hasPendingWrites;return!(!t.Kt&&!e)&&!0===this.options.includeMetadataChanges},Eb.prototype.zs=function(t){t=Ly.jt(t.query,t.docs,t.Qt,t.fromCache),this.Ks=!0,this.Qs.next(t)},Eb),bb=(wb.prototype.Js=function(){return null!=this.uid},wb.prototype.Ys=function(){return this.Js()?"uid:"+this.uid:"anonymous-user"},wb.prototype.isEqual=function(t){return t.uid===this.uid},wb);function wb(t){this.uid=t}function Eb(t,e,n){this.query=t,this.Qs=e,this.Ks=!1,this.Ws=null,this.onlineState="Unknown",this.options=n||{}}function Ib(t,e){this.user=e,this.type="OAuth",this.ti={},this.ti.Authorization="Bearer "+t}bb.UNAUTHENTICATED=new bb(null),bb.Xs=new bb("google-credentials-uid"),bb.Zs=new bb("first-party-uid");var Tb=(Mb.prototype.getToken=function(){return Promise.resolve(null)},Mb.prototype.ni=function(){},Mb.prototype.si=function(t){(this.ei=t)(bb.UNAUTHENTICATED)},Mb.prototype.ii=function(){this.ei=null},Mb),Sb=(Lb.prototype.getToken=function(){var e=this,n=this.ai,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(function(t){return e.ai!==n?(bv("FirebaseCredentialsProvider","getToken aborted due to token change."),e.getToken()):t?(Sv("string"==typeof t.accessToken),new Ib(t.accessToken,e.currentUser)):null}):Promise.resolve(null)},Lb.prototype.ni=function(){this.forceRefresh=!0},Lb.prototype.si=function(t){this.ei=t,this.oi&&t(this.currentUser)},Lb.prototype.ii=function(){this.auth&&this.auth.removeAuthTokenListener(this.ri),this.ri=null,this.ei=null},Lb.prototype.ci=function(){var t=this.auth&&this.auth.getUid();return Sv(null===t||"string"==typeof t),new bb(t)},Lb),Cb=(Object.defineProperty(xb.prototype,"ti",{get:function(){var t={"X-Goog-AuthUser":this.hi},e=this.ui.auth.getAuthHeaderValueForFirstParty([]);return e&&(t.Authorization=e),t},enumerable:!1,configurable:!0}),xb),Nb=(Db.prototype.getToken=function(){return Promise.resolve(new Cb(this.ui,this.hi))},Db.prototype.si=function(t){t(bb.Zs)},Db.prototype.ii=function(){},Db.prototype.ni=function(){},Db),Ab=(Rb.prototype._i=function(t,e,n){for(var r,i,o,s,a,u=n.fi,c=0;c<this.mutations.length;c++){var h=this.mutations[c];h.key.isEqual(t)&&(r=h,i=e,o=u[c],h=a=s=void 0,e=r instanceof _m?new qm(r.key,o.version,r.value,{hasCommittedMutations:!0}):r instanceof bm?(a=i,h=o,pm((s=r).je,a)?(a=Im(s,a),new qm(s.key,h.version,a,{hasCommittedMutations:!0})):new Wm(s.key,h.version)):r instanceof Sm?function(t,e,n){if(Sv(null!=n.transformResults),!pm(t.je,e))return new Wm(t.key,n.version);var r=e,e=function(t,e,n){var r=[];Sv(t.length===n.length);for(var i=0;i<n.length;i++){var o=t[i],s=o.transform,a=null;e instanceof qm&&(a=e.field(o.field)),r.push((o=s,s=a,a=n[i],o instanceof Qg?Jg(o,s):o instanceof Zg?em(o,s):a))}return r}(t.fieldTransforms,e,n.transformResults),n=n.version,e=Nm(t,r.data(),e);return new qm(t.key,n,e,{hasCommittedMutations:!0})}(r,i,o):new Bm(r.key,o.version,{hasCommittedMutations:!0}))}return e},Rb.prototype.di=function(t,e){for(var n=0,r=this.baseMutations;n<r.length;n++){var i=r[n];i.key.isEqual(t)&&(e=dm(i,e,e,this.li))}for(var o=e,s=0,a=this.mutations;s<a.length;s++){var u=a[s];u.key.isEqual(t)&&(e=dm(u,e,o,this.li))}return e},Rb.prototype.wi=function(n){var r=this,i=n;return this.mutations.forEach(function(t){var e=r.di(t.key,n.get(t.key));e&&(i=i.rt(t.key,e))}),i},Rb.prototype.keys=function(){return this.mutations.reduce(function(t,e){return t.add(e.key)},Py())},Rb.prototype.isEqual=function(t){return this.batchId===t.batchId&&kv(this.mutations,t.mutations,vm)&&kv(this.baseMutations,t.baseMutations,vm)},Rb),kb=(Pb.from=function(t,e,n){Sv(t.mutations.length===n.length);for(var r=ky,i=t.mutations,o=0;o<i.length;o++)r=r.rt(i[o].key,n[o].version);return new Pb(t,e,n,r)},Pb),Pr=(Ob.prototype.Ai=function(t){return(t=this.Ii.get(t))?t.readTime:qv.min()},Ob.prototype.Ri=function(t,e){this.Pi(),this.Ii.set(t.key,{gi:t,readTime:e})},Ob.prototype.Vi=function(t,e){void 0===e&&(e=null),this.Pi(),this.Ii.set(t,{gi:null,readTime:e})},Ob.prototype.yi=function(t,e){this.Pi();var n=this.Ii.get(e);return void 0!==n?K_.resolve(n.gi):this.pi(t,e)},Ob.prototype.getEntries=function(t,e){return this.vi(t,e)},Ob.prototype.apply=function(t){return this.Pi(),this.mi=!0,this.bi(t)},Ob.prototype.Pi=function(){},Ob);function Ob(){this.Ii=new Fv(function(t){return t.toString()},function(t,e){return t.isEqual(e)}),this.mi=!1}function Pb(t,e,n,r){this.batch=t,this.Ti=e,this.fi=n,this.Ei=r}function Rb(t,e,n,r){this.batchId=t,this.li=e,this.baseMutations=n,this.mutations=r}function Db(t,e){this.ui=t,this.hi=e}function xb(t,e){this.ui=t,this.hi=e,this.type="FirstParty",this.user=bb.Zs}function Lb(t){var e=this;this.ri=null,this.currentUser=bb.UNAUTHENTICATED,this.oi=!1,this.ai=0,this.ei=null,this.forceRefresh=!1,this.ri=function(){e.ai++,e.currentUser=e.ci(),e.oi=!0,e.ei&&e.ei(e.currentUser)},this.ai=0,this.auth=t.getImmediate({optional:!0}),this.auth?this.auth.addAuthTokenListener(this.ri):(this.ri(null),t.get().then(function(t){e.auth=t,e.ri&&e.auth.addAuthTokenListener(e.ri)},function(){}))}function Mb(){this.ei=null}function Fb(t){return new mg(t,!0)}function Ub(i){return function(){if("object"==typeof i&&null!==i)for(var t=i,e=0,n=["next","error","complete"];e<n.length;e++){var r=n[e];if(r in t&&"function"==typeof t[r])return 1}}()}var jb="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",L=(Gb.prototype.Di=function(t){this.Si.push(t)},Gb.prototype.Ci=function(){this.Si.forEach(function(t){return t()})},Gb),Vb=(Hb.prototype.Oi=function(e,n){var r=this;return this.xi.Mi(e,n).next(function(t){return r.ki(e,n,t)})},Hb.prototype.ki=function(t,r,i){return this.Ni.yi(t,r).next(function(t){for(var e=0,n=i;e<n.length;e++)t=n[e].di(r,t);return t})},Hb.prototype.$i=function(t,e,i){var o=Sy;return e.forEach(function(t,e){for(var n=0,r=i;n<r.length;n++)e=r[n].di(t,e);o=o.rt(t,e)}),o},Hb.prototype.Li=function(e,t){var n=this;return this.Ni.getEntries(e,t).next(function(t){return n.Bi(e,t)})},Hb.prototype.Bi=function(e,r){var i=this;return this.xi.qi(e,r).next(function(t){var t=i.$i(e,r,t),n=Sy;return t.forEach(function(t,e){e=e||new Bm(t,qv.min()),n=n.rt(t,e)}),n})},Hb.prototype.Ui=function(t,e,n){return r=e,Hv.G(r.path)&&null===r.collectionGroup&&0===r.filters.length?this.Qi(t,e.path):t_(e)?this.Ki(t,e,n):this.Wi(t,e,n);var r},Hb.prototype.Qi=function(t,e){return this.Oi(t,new Hv(e)).next(function(t){var e=Ay;return t instanceof qm&&(e=e.rt(t.key,t)),e})},Hb.prototype.Ki=function(n,r,i){var o=this,s=r.collectionGroup,a=Ay;return this.Fi.ji(n,s).next(function(t){return K_.forEach(t,function(t){var e=(e=r,t=t.child(s),new Km(t,null,e.rn.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt));return o.Wi(n,e,i).next(function(t){t.forEach(function(t,e){a=a.rt(t,e)})})}).next(function(){return a})})},Hb.prototype.Wi=function(e,n,t){var u,c,r=this;return this.Ni.Ui(e,n,t).next(function(t){return u=t,r.xi.Gi(e,n)}).next(function(t){return c=t,r.zi(e,c,u).next(function(t){u=t;for(var e=0,n=c;e<n.length;e++)for(var r=n[e],i=0,o=r.mutations;i<o.length;i++){var s=o[i],a=s.key,s=dm(s,s=u.get(a),s,r.li);u=s instanceof qm?u.rt(a,s):u.remove(a)}})}).next(function(){return u.forEach(function(t,e){c_(n,e)||(u=u.remove(t))}),u})},Hb.prototype.zi=function(t,e,n){for(var r=Py(),i=0,o=e;i<o.length;i++)for(var s=0,a=o[i].mutations;s<a.length;s++){var u=a[s];u instanceof bm&&null===n.get(u.key)&&(r=r.add(u.key))}var c=n;return this.Ni.getEntries(t,r).next(function(t){return t.forEach(function(t,e){null!==e&&e instanceof qm&&(c=c.rt(t,e))}),c})},Hb),qb=(Kb.Yi=function(t,e){for(var n=Py(),r=Py(),i=0,o=e.docChanges;i<o.length;i++){var s=o[i];switch(s.type){case 0:n=n.add(s.doc.key);break;case 1:r=r.add(s.doc.key)}}return new Kb(t,e.fromCache,n,r)},Kb),Bb=(Wb.prototype.Zi=function(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue},Wb.prototype.next=function(){var t=++this.previousValue;return this.tr&&this.tr(t),t},Wb);function Wb(t,e){var n=this;this.previousValue=t,e&&(e.Xi=function(t){return n.Zi(t)},this.tr=function(t){return e.er(t)})}function Kb(t,e,n,r){this.targetId=t,this.fromCache=e,this.Hi=n,this.Ji=r}function Hb(t,e,n){this.Ni=t,this.xi=e,this.Fi=n}function Gb(){this.Si=[]}function zb(t,e){var n=t[0],r=t[1],t=e[0],e=e[1];return 0===(t=Av(n,t))?Av(r,e):t}Bb.nr=-1;var Qb=($b.prototype.rr=function(){return++this.ir},$b.prototype.ar=function(t){var e=[t,this.rr()];this.buffer.size<this.sr?this.buffer=this.buffer.add(e):zb(e,t=this.buffer.last())<0&&(this.buffer=this.buffer.delete(t).add(e))},Object.defineProperty($b.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!1,configurable:!0}),$b),Yb={cr:!1,ur:0,hr:0,lr:0},Xb=(Jb.Tr=function(t){return new Jb(t,Jb.Er,Jb.Ir)},Jb);function Jb(t,e,n){this._r=t,this.dr=e,this.wr=n}function $b(t){this.sr=t,this.buffer=new Iy(zb),this.ir=0}Xb.Er=10,Xb.Ir=1e3,Xb.mr=new Xb(41943040,Xb.Er,Xb.Ir),Xb.Ar=new Xb(-1,0,0);var Zb=(nw.prototype.start=function(t){-1!==this.Rr.params._r&&this.Vr(t)},nw.prototype.stop=function(){this.gr&&(this.gr.cancel(),this.gr=null)},Object.defineProperty(nw.prototype,"yr",{get:function(){return null!==this.gr},enumerable:!1,configurable:!0}),nw.prototype.Vr=function(n){var t=this,e=this.Pr?3e5:6e4;bv("LruGarbageCollector","Garbage collection scheduled in "+e+"ms"),this.gr=this.rs.Pn("lru_garbage_collection",e,function(){return po(t,void 0,void 0,function(){var e;return vo(this,function(t){switch(t.label){case 0:this.gr=null,this.Pr=!0,t.label=1;case 1:return t.trys.push([1,3,,7]),[4,n.pr(this.Rr)];case 2:return t.sent(),[3,7];case 3:return Z_(e=t.sent())?(bv("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e),[3,6]):[3,4];case 4:return[4,VE(e)];case 5:t.sent(),t.label=6;case 6:return[3,7];case 7:return[4,this.Vr(n)];case 8:return t.sent(),[2]}})})})},nw),tw=(ew.prototype.br=function(t,e){return this.vr.Sr(t).next(function(t){return Math.floor(e/100*t)})},ew.prototype.Dr=function(t,e){var n=this;if(0===e)return K_.resolve(Bb.nr);var r=new Qb(e);return this.vr.De(t,function(t){return r.ar(t.sequenceNumber)}).next(function(){return n.vr.Cr(t,function(t){return r.ar(t)})}).next(function(){return r.maxValue})},ew.prototype.Nr=function(t,e,n){return this.vr.Nr(t,e,n)},ew.prototype.Fr=function(t,e){return this.vr.Fr(t,e)},ew.prototype.Or=function(e,n){var r=this;return-1===this.params._r?(bv("LruGarbageCollector","Garbage collection skipped; disabled"),K_.resolve(Yb)):this.Mr(e).next(function(t){return t<r.params._r?(bv("LruGarbageCollector","Garbage collection skipped; Cache size "+t+" is lower than threshold "+r.params._r),Yb):r.kr(e,n)})},ew.prototype.Mr=function(t){return this.vr.Mr(t)},ew.prototype.kr=function(e,n){var r,i,o,s,a,u,c,h=this,l=Date.now();return this.br(e,this.params.dr).next(function(t){return i=t>h.params.wr?(bv("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+h.params.wr+" from "+t),h.params.wr):t,s=Date.now(),h.Dr(e,i)}).next(function(t){return r=t,a=Date.now(),h.Nr(e,r,n)}).next(function(t){return o=t,u=Date.now(),h.Fr(e,r)}).next(function(t){return c=Date.now(),_v()<=Es.DEBUG&&bv("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(s-l)+"ms\n\tDetermined least recently used "+i+" in "+(a-s)+"ms\n\tRemoved "+o+" targets in "+(u-a)+"ms\n\tRemoved "+t+" documents in "+(c-u)+"ms\nTotal Duration: "+(c-l)+"ms"),K_.resolve({cr:!0,ur:i,hr:o,lr:t})})},ew);function ew(t,e){this.vr=t,this.params=e}function nw(t,e){this.Rr=t,this.rs=e,this.Pr=!1,this.gr=null}function rw(t){for(var o="",e=0;e<t.length;e++)0<o.length&&(o=iw(o)),o=function(t){for(var e=o,n=t.length,r=0;r<n;r++){var i=t.charAt(r);switch(i){case"\0":e+="";break;case"":e+="";break;default:e+=i}}return e}(t.get(e));return iw(o)}function iw(t){return t+""}function ow(t){var e=t.length;if(Sv(2<=e),2===e)return Sv(""===t.charAt(0)&&""===t.charAt(1)),Bv.$();for(var n=e-2,r=[],i="",o=0;o<e;){var s=t.indexOf("",o);switch((s<0||n<s)&&Tv(),t.charAt(s+1)){case"":var a=t.substring(o,s),u=void 0;0===i.length?u=a:(u=i+=a,i=""),r.push(u);break;case"":i+=t.substring(o,s),i+="\0";break;case"":i+=t.substring(o,s+1);break;default:Tv()}o=s+2}return new Bv(r)}var sw=function(t){this.$r=t};function aw(t,e){if(e.document)return n=t.$r,r=e.document,i=!!e.hasCommittedMutations,t=Ag(n,r.name),n=Tg(r.updateTime),r=new Rm({mapValue:{fields:r.fields}}),new qm(t,n,r,{hasCommittedMutations:!!i});var n,r;if(e.noDocument){var i=Hv.H(e.noDocument.path),o=fw(e.noDocument.readTime);return new Bm(i,o,{hasCommittedMutations:!!e.hasCommittedMutations})}return e.unknownDocument?(o=Hv.H(e.unknownDocument.path),e=fw(e.unknownDocument.version),new Wm(o,e)):Tv()}function uw(t,e,n){var r=cw(n),n=e.key.path.S().O();if(e instanceof qm){var i={name:Ng(i=t.$r,(o=e).key),fields:o.sn().mapValue.fields,updateTime:Eg(i,o.version.P())},o=e.hasCommittedMutations;return new zw(null,null,i,o,r,n)}if(e instanceof Bm){var i=e.key.path.O(),o=lw(e.version),s=e.hasCommittedMutations;return new zw(null,new Hw(i,o),null,s,r,n)}return e instanceof Wm?(s=e.key.path.O(),e=lw(e.version),new zw(new Gw(s,e),null,null,!0,r,n)):Tv()}function cw(t){return[(t=t.P()).seconds,t.nanoseconds]}function hw(t){return t=new Vv(t[0],t[1]),qv.m(t)}function lw(t){return t=t.P(),new Mw(t.seconds,t.nanoseconds)}function fw(t){return t=new Vv(t.seconds,t.nanoseconds),qv.m(t)}function pw(e,t){var n=(t.baseMutations||[]).map(function(t){return Lg(e.$r,t)}),r=t.mutations.map(function(t){return Lg(e.$r,t)}),i=Vv.fromMillis(t.localWriteTimeMs);return new Ab(t.batchId,i,n,r)}function dw(t){var e=fw(t.readTime),n=void 0!==t.lastLimboFreeSnapshotVersion?fw(t.lastLimboFreeSnapshotVersion):qv.min(),r=void 0!==t.query.documents?(Sv(1===(r=t.query).documents.length),n_(Ym(Og(r.documents[0])))):n_(Ug(t.query));return new fy(r,t.targetId,0,t.lastListenSequenceNumber,e,n,uy.fromBase64String(t.resumeToken))}function vw(t,e){var n=lw(e.et),r=lw(e.lastLimboFreeSnapshotVersion),i=(ay(e.target)?Mg:Fg)(t.$r,e.target),t=e.resumeToken.toBase64();return new Yw(e.targetId,oy(e.target),n,t,e.sequenceNumber,r,i)}function yw(t){var e=Ug({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?r_(e,e.limit,"L"):e}var gw=(mw.qr=function(t,e,n,r){return Sv(""!==t.uid),new mw(t.Js()?t.uid:"",e,n,r)},mw.prototype.Ur=function(t){var r=!0,e=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return ww(t).ns({index:Bw.userMutationsIndex,range:e},function(t,e,n){r=!1,n.done()}).next(function(){return r})},mw.prototype.Qr=function(d,v,y,g){var m=this,_=Ew(d),b=ww(d);return b.add({}).next(function(t){Sv("number"==typeof t);for(var e,n,r,i,o,s=new Ab(t,v,y,g),a=(e=m.serializer,n=m.userId,i=(r=s).baseMutations.map(function(t){return xg(e.$r,t)}),o=r.mutations.map(function(t){return xg(e.$r,t)}),new Bw(n,r.batchId,r.li.toMillis(),i,o)),u=[],c=new Iy(function(t,e){return Av(t.M(),e.M())}),h=0,l=g;h<l.length;h++){var f=l[h],p=Ww.key(m.userId,f.key.path,t),c=c.add(f.key.path.S());u.push(b.put(a)),u.push(_.put(p,Ww.PLACEHOLDER))}return c.forEach(function(t){u.push(m.Fi.Kr(d,t))}),d.Di(function(){m.Br[t]=s.keys()}),K_.xn(u).next(function(){return s})})},mw.prototype.Wr=function(t,e){var n=this;return ww(t).get(e).next(function(t){return t?(Sv(t.userId===n.userId),pw(n.serializer,t)):null})},mw.prototype.jr=function(t,e){var n=this;return this.Br[e]?K_.resolve(this.Br[e]):this.Wr(t,e).next(function(t){return t?(t=t.keys(),n.Br[e]=t):null})},mw.prototype.Gr=function(t,e){var r=this,i=e+1,e=IDBKeyRange.lowerBound([this.userId,i]),o=null;return ww(t).ns({index:Bw.userMutationsIndex,range:e},function(t,e,n){e.userId===r.userId&&(Sv(e.batchId>=i),o=pw(r.serializer,e)),n.done()}).next(function(){return o})},mw.prototype.zr=function(t){var e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),r=-1;return ww(t).ns({index:Bw.userMutationsIndex,range:e,reverse:!0},function(t,e,n){r=e.batchId,n.done()}).next(function(){return r})},mw.prototype.Hr=function(t){var e=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return ww(t).Xn(Bw.userMutationsIndex,n).next(function(t){return t.map(function(t){return pw(e.serializer,t)})})},mw.prototype.Mi=function(o,s){var a=this,t=Ww.prefixForPath(this.userId,s.path),t=IDBKeyRange.lowerBound(t),u=[];return Ew(o).ns({range:t},function(t,e,n){var r=t[0],i=t[1],t=t[2],i=ow(i);if(r===a.userId&&s.path.isEqual(i))return ww(o).get(t).next(function(t){if(!t)throw Tv();Sv(t.userId===a.userId),u.push(pw(a.serializer,t))});n.done()}).next(function(){return u})},mw.prototype.qi=function(e,t){var s=this,a=new Iy(Av),n=[];return t.forEach(function(o){var t=Ww.prefixForPath(s.userId,o.path),t=IDBKeyRange.lowerBound(t),t=Ew(e).ns({range:t},function(t,e,n){var r=t[0],i=t[1],t=t[2],i=ow(i);r===s.userId&&o.path.isEqual(i)?a=a.add(t):n.done()});n.push(t)}),K_.xn(n).next(function(){return s.Jr(e,a)})},mw.prototype.Gi=function(t,e){var o=this,s=e.path,a=s.length+1,e=Ww.prefixForPath(this.userId,s),e=IDBKeyRange.lowerBound(e),u=new Iy(Av);return Ew(t).ns({range:e},function(t,e,n){var r=t[0],i=t[1],t=t[2],i=ow(i);r===o.userId&&s.N(i)?i.length===a&&(u=u.add(t)):n.done()}).next(function(){return o.Jr(t,u)})},mw.prototype.Jr=function(e,t){var n=this,r=[],i=[];return t.forEach(function(t){i.push(ww(e).get(t).next(function(t){if(null===t)throw Tv();Sv(t.userId===n.userId),r.push(pw(n.serializer,t))}))}),K_.xn(i).next(function(){return r})},mw.prototype.Yr=function(e,n){var r=this;return bw(e.Xr,this.userId,n).next(function(t){return e.Di(function(){r.Zr(n.batchId)}),K_.forEach(t,function(t){return r.Lr.eo(e,t)})})},mw.prototype.Zr=function(t){delete this.Br[t]},mw.prototype.no=function(e){var i=this;return this.Ur(e).next(function(t){if(!t)return K_.resolve();var t=IDBKeyRange.lowerBound(Ww.prefixForUser(i.userId)),r=[];return Ew(e).ns({range:t},function(t,e,n){t[0]===i.userId?(t=ow(t[1]),r.push(t)):n.done()}).next(function(){Sv(0===r.length)})})},mw.prototype.so=function(t,e){return _w(t,this.userId,e)},mw.prototype.io=function(t){var e=this;return Iw(t).get(this.userId).next(function(t){return t||new qw(e.userId,-1,"")})},mw);function mw(t,e,n,r){this.userId=t,this.serializer=e,this.Fi=n,this.Lr=r,this.Br={}}function _w(t,o,e){var s=(e=Ww.prefixForPath(o,e.path))[1],e=IDBKeyRange.lowerBound(e),a=!1;return Ew(t).ns({range:e,es:!0},function(t,e,n){var r=t[0],i=t[1];t[2],r===o&&i===s&&(a=!0),n.done()}).next(function(){return a})}function bw(t,e,n){var r=t.store(Bw.store),i=t.store(Ww.store),o=[],t=IDBKeyRange.only(n.batchId),s=0,t=r.ns({range:t},function(t,e,n){return s++,n.delete()});o.push(t.next(function(){Sv(1===s)}));for(var a=[],u=0,c=n.mutations;u<c.length;u++){var h=c[u],l=Ww.key(e,h.key.path,n.batchId);o.push(i.delete(l)),a.push(h.key)}return K_.xn(o).next(function(){return a})}function ww(t){return wE.qn(t,Bw.store)}function Ew(t){return wE.qn(t,Ww.store)}function Iw(t){return wE.qn(t,qw.store)}var Tw,Sw=(Aw.prototype.Ri=function(t,e,n){return Ow(t).put(Pw(e),n)},Aw.prototype.Vi=function(t,e){return t=Ow(t),e=Pw(e),t.delete(e)},Aw.prototype.updateMetadata=function(e,n){var r=this;return this.getMetadata(e).next(function(t){return t.byteSize+=n,r.ro(e,t)})},Aw.prototype.yi=function(t,e){var n=this;return Ow(t).get(Pw(e)).next(function(t){return n.oo(t)})},Aw.prototype.ao=function(t,e){var n=this;return Ow(t).get(Pw(e)).next(function(t){var e=n.oo(t);return e?{gi:e,size:Rw(t)}:null})},Aw.prototype.getEntries=function(t,e){var n=this,r=Sy;return this.co(t,e,function(t,e){e=n.oo(e),r=r.rt(t,e)}).next(function(){return r})},Aw.prototype.uo=function(t,e){var r=this,i=Sy,o=new yy(Hv.V);return this.co(t,e,function(t,e){var n=r.oo(e);o=n?(i=i.rt(t,n),o.rt(t,Rw(e))):(i=i.rt(t,null),o.rt(t,0))}).next(function(){return{ho:i,lo:o}})},Aw.prototype.co=function(t,e,i){if(e.T())return K_.resolve();var n=IDBKeyRange.bound(e.first().path.O(),e.last().path.O()),o=e.lt(),s=o.Et();return Ow(t).ns({range:n},function(t,e,n){for(var r=Hv.H(t);s&&Hv.V(s,r)<0;)i(s,null),s=o.Et();s&&s.isEqual(r)&&(i(s,e),s=o.It()?o.Et():null),s?n.Jn(s.path.O()):n.done()}).next(function(){for(;s;)i(s,null),s=o.It()?o.Et():null})},Aw.prototype.Ui=function(t,r,e){var n,i=this,o=Ay,s=r.path.length+1,a={};return e.isEqual(qv.min())?(n=r.path.O(),a.range=IDBKeyRange.lowerBound(n)):(n=r.path.O(),e=cw(e),a.range=IDBKeyRange.lowerBound([n,e],!0),a.index=zw.collectionReadTimeIndex),Ow(t).ns(a,function(t,e,n){t.length===s&&(e=aw(i.serializer,e),r.path.N(e.key.path)?e instanceof qm&&c_(r,e)&&(o=o.rt(e.key,e)):n.done())}).next(function(){return o})},Aw.prototype._o=function(t){return new Cw(this,!!t&&t.fo)},Aw.prototype.wo=function(t){return this.getMetadata(t).next(function(t){return t.byteSize})},Aw.prototype.getMetadata=function(t){return kw(t).get(Qw.key).next(function(t){return Sv(!!t),t})},Aw.prototype.ro=function(t,e){return kw(t).put(Qw.key,e)},Aw.prototype.oo=function(t){return!t||(t=aw(this.serializer,t))instanceof Bm&&t.version.isEqual(qv.min())?null:t},Aw),Cw=(lo(Nw,Tw=Pr),Nw.prototype.bi=function(i){var o=this,s=[],a=0,u=new Iy(function(t,e){return Av(t.M(),e.M())});return this.Ii.forEach(function(t,e){var n,r=o.Eo.get(t);e.gi?(n=uw(o.To.serializer,e.gi,o.Ai(t)),u=u.add(t.path.S()),e=Rw(n),a+=e-r,s.push(o.To.Ri(i,t,n))):(a-=r,o.fo?(r=uw(o.To.serializer,new Bm(t,qv.min()),o.Ai(t)),s.push(o.To.Ri(i,t,r))):s.push(o.To.Vi(i,t)))}),u.forEach(function(t){s.push(o.To.Fi.Kr(i,t))}),s.push(this.To.updateMetadata(i,a)),K_.xn(s)},Nw.prototype.pi=function(t,e){var n=this;return this.To.ao(t,e).next(function(t){return null===t?(n.Eo.set(e,0),null):(n.Eo.set(e,t.size),t.gi)})},Nw.prototype.vi=function(t,e){var n=this;return this.To.uo(t,e).next(function(t){var e=t.ho;return t.lo.forEach(function(t,e){n.Eo.set(t,e)}),e})},Nw);function Nw(t,e){var n=this;return(n=Tw.call(this)||this).To=t,n.fo=e,n.Eo=new Fv(function(t){return t.toString()},function(t,e){return t.isEqual(e)}),n}function Aw(t,e){this.serializer=t,this.Fi=e}function kw(t){return wE.qn(t,Qw.store)}function Ow(t){return wE.qn(t,zw.store)}function Pw(t){return t.path.O()}function Rw(t){var e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw Tv();e=t.noDocument}return JSON.stringify(e).length}var Dw=(Vw.prototype.Kr=function(t,e){return this.Io.add(e),K_.resolve()},Vw.prototype.ji=function(t,e){return K_.resolve(this.Io.getEntries(e))},Vw),xw=(jw.prototype.add=function(t){var e=t.C(),n=t.S(),r=this.index[e]||new Iy(Bv.V),t=!r.has(n);return this.index[e]=r.add(n),t},jw.prototype.has=function(t){var e=t.C(),t=t.S();return(e=this.index[e])&&e.has(t)},jw.prototype.getEntries=function(t){return(this.index[t]||new Iy(Bv.V)).O()},jw),Lw=(Uw.prototype.createOrUpgrade=function(e,n,t,r){var i=this;Sv(t<r&&0<=t&&r<=11);var o=new tb("createOrUpgrade",n);t<1&&1<=r&&(e.createObjectStore(Fw.store),(s=e).createObjectStore(qw.store,{keyPath:qw.keyPath}),s.createObjectStore(Bw.store,{keyPath:Bw.keyPath,autoIncrement:!0}).createIndex(Bw.userMutationsIndex,Bw.userMutationsKeyPath,{unique:!0}),s.createObjectStore(Ww.store),Zw(e),e.createObjectStore(zw.store));var s,a=K_.resolve();return t<3&&3<=r&&(0!==t&&((s=e).deleteObjectStore(Xw.store),s.deleteObjectStore(Yw.store),s.deleteObjectStore(Jw.store),Zw(e)),a=a.next(function(){return t=o.store(Jw.store),e=new Jw(0,0,qv.min().P(),0),t.put(Jw.key,e);var t,e})),t<4&&4<=r&&(0!==t&&(a=a.next(function(){return n=e,(r=o).store(Bw.store).Xn().next(function(t){n.deleteObjectStore(Bw.store),n.createObjectStore(Bw.store,{keyPath:Bw.keyPath,autoIncrement:!0}).createIndex(Bw.userMutationsIndex,Bw.userMutationsKeyPath,{unique:!0});var e=r.store(Bw.store),t=t.map(function(t){return e.put(t)});return K_.xn(t)});var n,r})),a=a.next(function(){e.createObjectStore(tE.store,{keyPath:tE.keyPath})})),t<5&&5<=r&&(a=a.next(function(){return i.removeAcknowledgedMutations(o)})),t<6&&6<=r&&(a=a.next(function(){return e.createObjectStore(Qw.store),i.addDocumentGlobal(o)})),t<7&&7<=r&&(a=a.next(function(){return i.ensureSequenceNumbers(o)})),t<8&&8<=r&&(a=a.next(function(){return i.createCollectionParentIndex(e,o)})),t<9&&9<=r&&(a=a.next(function(){var t;(t=e).objectStoreNames.contains("remoteDocumentChanges")&&t.deleteObjectStore("remoteDocumentChanges"),(t=n.objectStore(zw.store)).createIndex(zw.readTimeIndex,zw.readTimeIndexPath,{unique:!1}),t.createIndex(zw.collectionReadTimeIndex,zw.collectionReadTimeIndexPath,{unique:!1})})),t<10&&10<=r&&(a=a.next(function(){return i.rewriteCanonicalIds(o)})),t<11&&11<=r&&(a=a.next(function(){e.createObjectStore(eE.store,{keyPath:eE.keyPath}),e.createObjectStore(nE.store,{keyPath:nE.keyPath})})),a},Uw.prototype.addDocumentGlobal=function(e){var n=0;return e.store(zw.store).ns(function(t,e){n+=Rw(e)}).next(function(){var t=new Qw(n);return e.store(Qw.store).put(Qw.key,t)})},Uw.prototype.removeAcknowledgedMutations=function(n){var r=this,t=n.store(qw.store),i=n.store(Bw.store);return t.Xn().next(function(t){return K_.forEach(t,function(e){var t=IDBKeyRange.bound([e.userId,-1],[e.userId,e.lastAcknowledgedBatchId]);return i.Xn(Bw.userMutationsIndex,t).next(function(t){return K_.forEach(t,function(t){return Sv(t.userId===e.userId),t=pw(r.serializer,t),bw(n,e.userId,t).next(function(){})})})})})},Uw.prototype.ensureSequenceNumbers=function(t){var o=t.store(Xw.store),e=t.store(zw.store);return t.store(Jw.store).get(Jw.key).next(function(r){var i=[];return e.ns(function(t,e){var n=new Bv(t),t=[0,rw(n)];i.push(o.get(t).next(function(t){return t?K_.resolve():o.put(new Xw(0,rw(n),r.highestListenSequenceNumber))}))}).next(function(){return K_.xn(i)})})},Uw.prototype.createCollectionParentIndex=function(t,e){function r(t){if(i.add(t)){var e=t.C(),t=t.S();return n.put({collectionId:e,parent:rw(t)})}}t.createObjectStore($w.store,{keyPath:$w.keyPath});var n=e.store($w.store),i=new xw;return e.store(zw.store).ns({es:!0},function(t,e){return r((t=new Bv(t)).S())}).next(function(){return e.store(Ww.store).ns({es:!0},function(t,e){t[0];var n=t[1];return r((n=(t[2],ow(n))).S())})})},Uw.prototype.rewriteCanonicalIds=function(t){var n=this,r=t.store(Yw.store);return r.ns(function(t,e){return e=dw(e),e=vw(n.serializer,e),r.put(e)})},Uw),Mw=function(t,e){this.seconds=t,this.nanoseconds=e},Fw=function(t,e,n){this.ownerId=t,this.allowTabSynchronization=e,this.leaseTimestampMs=n};function Uw(t){this.serializer=t}function jw(){this.index={}}function Vw(){this.Io=new xw}Fw.store="owner",Fw.key="owner";var qw=function(t,e,n){this.userId=t,this.lastAcknowledgedBatchId=e,this.lastStreamToken=n};qw.store="mutationQueues",qw.keyPath="userId";var Bw=function(t,e,n,r,i){this.userId=t,this.batchId=e,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i};Bw.store="mutations",Bw.keyPath="batchId",Bw.userMutationsIndex="userMutationsIndex",Bw.userMutationsKeyPath=["userId","batchId"];var Ww=(Kw.prefixForUser=function(t){return[t]},Kw.prefixForPath=function(t,e){return[t,rw(e)]},Kw.key=function(t,e,n){return[t,rw(e),n]},Kw);function Kw(){}Ww.store="documentMutations",Ww.PLACEHOLDER=new Ww;var Hw=function(t,e){this.path=t,this.readTime=e},Gw=function(t,e){this.path=t,this.version=e},zw=function(t,e,n,r,i,o){this.unknownDocument=t,this.noDocument=e,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=o};zw.store="remoteDocuments",zw.readTimeIndex="readTimeIndex",zw.readTimeIndexPath="readTime",zw.collectionReadTimeIndex="collectionReadTimeIndex",zw.collectionReadTimeIndexPath=["parentPath","readTime"];var Qw=function(t){this.byteSize=t};Qw.store="remoteDocumentGlobal",Qw.key="remoteDocumentGlobalKey";var Yw=function(t,e,n,r,i,o,s){this.targetId=t,this.canonicalId=e,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=o,this.query=s};Yw.store="targets",Yw.keyPath="targetId",Yw.queryTargetsIndexName="queryTargetsIndex",Yw.queryTargetsKeyPath=["canonicalId","targetId"];var Xw=function(t,e,n){this.targetId=t,this.path=e,this.sequenceNumber=n};Xw.store="targetDocuments",Xw.keyPath=["targetId","path"],Xw.documentTargetsIndex="documentTargetsIndex",Xw.documentTargetsKeyPath=["path","targetId"];var Jw=function(t,e,n,r){this.highestTargetId=t,this.highestListenSequenceNumber=e,this.lastRemoteSnapshotVersion=n,this.targetCount=r};Jw.key="targetGlobalKey",Jw.store="targetGlobal";var $w=function(t,e){this.collectionId=t,this.parent=e};function Zw(t){t.createObjectStore(Xw.store,{keyPath:Xw.keyPath}).createIndex(Xw.documentTargetsIndex,Xw.documentTargetsKeyPath,{unique:!0}),t.createObjectStore(Yw.store,{keyPath:Yw.keyPath}).createIndex(Yw.queryTargetsIndexName,Yw.queryTargetsKeyPath,{unique:!0}),t.createObjectStore(Jw.store)}$w.store="collectionParents",$w.keyPath=["collectionId","parent"];var tE=function(t,e,n,r){this.clientId=t,this.updateTimeMs=e,this.networkEnabled=n,this.inForeground=r};tE.store="clientMetadata",tE.keyPath="clientId";var eE=function(t,e,n){this.bundleId=t,this.createTime=e,this.version=n};eE.store="bundles",eE.keyPath="bundleId";var nE=function(t,e,n){this.name=t,this.readTime=e,this.bundledQuery=n};nE.store="namedQueries",nE.keyPath="name";var rE=_o(_o(_o(_o([qw.store,Bw.store,Ww.store,zw.store,Yw.store,Fw.store,Jw.store,Xw.store],[tE.store]),[Qw.store]),[$w.store]),[eE.store,nE.store]),iE=(oE.prototype.mo=function(t,e){return sE(t).get(e).next(function(t){if(t)return{id:t.bundleId,createTime:fw(t.createTime),version:t.version}})},oE.prototype.Ao=function(t,e){return sE(t).put({bundleId:e.id,createTime:lw(Tg(e.createTime)),version:e.version})},oE.prototype.Ro=function(t,e){return aE(t).get(e).next(function(t){if(t)return{name:t.name,query:yw(t.bundledQuery),readTime:fw(t.readTime)}})},oE.prototype.Po=function(t,e){return aE(t).put({name:e.name,readTime:lw(Tg(e.readTime)),bundledQuery:e.bundledQuery})},oE);function oE(t){this.serializer=t}function sE(t){return wE.qn(t,eE.store)}function aE(t){return wE.qn(t,nE.store)}var uE=(cE.prototype.Kr=function(t,e){var n=this;if(this.Vo.has(e))return K_.resolve();var r=e.C(),i=e.S();return t.Di(function(){n.Vo.add(e)}),i={collectionId:r,parent:rw(i)},hE(t).put(i)},cE.prototype.ji=function(t,i){var o=[],e=IDBKeyRange.bound([i,""],[Ov(i),""],!1,!0);return hE(t).Xn(e).next(function(t){for(var e=0,n=t;e<n.length;e++){var r=n[e];if(r.collectionId!==i)break;o.push(ow(r.parent))}return o})},cE);function cE(){this.Vo=new xw}function hE(t){return wE.qn(t,$w.store)}var lE=(dE.prototype.next=function(){return this.yo+=2,this.yo},dE.po=function(){return new dE(0)},dE.vo=function(){return new dE(-1)},dE),fE=(pE.prototype.bo=function(n){var r=this;return this.So(n).next(function(t){var e=new lE(t.highestTargetId);return t.highestTargetId=e.next(),r.Do(n,t).next(function(){return t.highestTargetId})})},pE.prototype.Co=function(t){return this.So(t).next(function(t){return qv.m(new Vv(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))})},pE.prototype.No=function(t){return this.So(t).next(function(t){return t.highestListenSequenceNumber})},pE.prototype.xo=function(e,n,r){var i=this;return this.So(e).next(function(t){return t.highestListenSequenceNumber=n,r&&(t.lastRemoteSnapshotVersion=r.P()),n>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=n),i.Do(e,t)})},pE.prototype.Fo=function(e,n){var r=this;return this.Oo(e,n).next(function(){return r.So(e).next(function(t){return t.targetCount+=1,r.Mo(n,t),r.Do(e,t)})})},pE.prototype.ko=function(t,e){return this.Oo(t,e)},pE.prototype.$o=function(e,t){var n=this;return this.Lo(e,t.targetId).next(function(){return vE(e).delete(t.targetId)}).next(function(){return n.So(e)}).next(function(t){return Sv(0<t.targetCount),--t.targetCount,n.Do(e,t)})},pE.prototype.Nr=function(n,r,i){var o=this,s=0,a=[];return vE(n).ns(function(t,e){(e=dw(e)).sequenceNumber<=r&&null===i.get(e.targetId)&&(s++,a.push(o.$o(n,e)))}).next(function(){return K_.xn(a)}).next(function(){return s})},pE.prototype.De=function(t,n){return vE(t).ns(function(t,e){e=dw(e),n(e)})},pE.prototype.So=function(t){return yE(t).get(Jw.key).next(function(t){return Sv(null!==t),t})},pE.prototype.Do=function(t,e){return yE(t).put(Jw.key,e)},pE.prototype.Oo=function(t,e){return vE(t).put(vw(this.serializer,e))},pE.prototype.Mo=function(t,e){var n=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,n=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,n=!0),n},pE.prototype.Bo=function(t){return this.So(t).next(function(t){return t.targetCount})},pE.prototype.qo=function(t,r){var e=oy(r),e=IDBKeyRange.bound([e,Number.NEGATIVE_INFINITY],[e,Number.POSITIVE_INFINITY]),i=null;return vE(t).ns({range:e,index:Yw.queryTargetsIndexName},function(t,e,n){e=dw(e),sy(r,e.target)&&(i=e,n.done())}).next(function(){return i})},pE.prototype.Uo=function(n,t,r){var i=this,o=[],s=gE(n);return t.forEach(function(t){var e=rw(t.path);o.push(s.put(new Xw(r,e))),o.push(i.Lr.Qo(n,r,t))}),K_.xn(o)},pE.prototype.Ko=function(n,t,r){var i=this,o=gE(n);return K_.forEach(t,function(t){var e=rw(t.path);return K_.xn([o.delete([r,e]),i.Lr.Wo(n,r,t)])})},pE.prototype.Lo=function(t,e){return t=gE(t),e=IDBKeyRange.bound([e],[e+1],!1,!0),t.delete(e)},pE.prototype.jo=function(t,e){var e=IDBKeyRange.bound([e],[e+1],!1,!0),t=gE(t),r=Py();return t.ns({range:e,es:!0},function(t,e,n){t=ow(t[1]),t=new Hv(t),r=r.add(t)}).next(function(){return r})},pE.prototype.so=function(t,e){var e=rw(e.path),e=IDBKeyRange.bound([e],[Ov(e)],!1,!0),i=0;return gE(t).ns({index:Xw.documentTargetsIndex,es:!0,range:e},function(t,e,n){var r=t[0];t[1],0!==r&&(i++,n.done())}).next(function(){return 0<i})},pE.prototype.qe=function(t,e){return vE(t).get(e).next(function(t){return t?dw(t):null})},pE);function pE(t,e){this.Lr=t,this.serializer=e}function dE(t){this.yo=t}function vE(t){return wE.qn(t,Yw.store)}function yE(t){return wE.qn(t,Jw.store)}function gE(t){return wE.qn(t,Xw.store)}var mE,_E="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",bE=(lo(IE,mE=L),IE),wE=(EE.qn=function(t,e){if(t instanceof bE)return H_.qn(t.Xr,e);throw Tv()},EE.prototype.start=function(){var e=this;return this.ca().then(function(){if(!e.isPrimary&&!e.allowTabSynchronization)throw new jv(Uv.FAILED_PRECONDITION,_E);return e.ua(),e.ha(),e.la(),e.runTransaction("getHighestListenSequenceNumber","readonly",function(t){return e.ra.No(t)})}).then(function(t){e.Jo=new Bb(t,e.zo)}).then(function(){e.Yo=!0}).catch(function(t){return e.ia&&e.ia.close(),Promise.reject(t)})},EE.prototype._a=function(n){var t=this;return this.na=function(e){return po(t,void 0,void 0,function(){return vo(this,function(t){return this.yr?[2,n(e)]:[2]})})},n(this.isPrimary)},EE.prototype.fa=function(n){var t=this;this.ia.Kn(function(e){return po(t,void 0,void 0,function(){return vo(this,function(t){switch(t.label){case 0:return null===e.newVersion?[4,n()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})})},EE.prototype.da=function(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.ln.fs(function(){return po(e,void 0,void 0,function(){return vo(this,function(t){switch(t.label){case 0:return this.yr?[4,this.ca()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})}))},EE.prototype.ca=function(){var n=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",function(e){return SE(e).put(new tE(n.clientId,Date.now(),n.networkEnabled,n.inForeground)).next(function(){if(n.isPrimary)return n.wa(e).next(function(t){t||(n.isPrimary=!1,n.ln.Ss(function(){return n.na(!1)}))})}).next(function(){return n.Ta(e)}).next(function(t){return n.isPrimary&&!t?n.Ea(e).next(function(){return!1}):!!t&&n.Ia(e).next(function(){return!0})})}).catch(function(t){if(Z_(t))return bv("IndexedDbPersistence","Failed to extend owner lease: ",t),n.isPrimary;if(!n.allowTabSynchronization)throw t;return bv("IndexedDbPersistence","Releasing owner lease after error during lease refresh",t),!1}).then(function(t){n.isPrimary!==t&&n.ln.Ss(function(){return n.na(t)}),n.isPrimary=t})},EE.prototype.wa=function(t){var e=this;return TE(t).get(Fw.key).next(function(t){return K_.resolve(e.ma(t))})},EE.prototype.Aa=function(t){return SE(t).delete(this.clientId)},EE.prototype.Ra=function(){return po(this,void 0,void 0,function(){var e,n,r,i,o=this;return vo(this,function(t){switch(t.label){case 0:return!this.isPrimary||this.Pa(this.ea,18e5)?[3,2]:(this.ea=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",function(t){var r=EE.qn(t,tE.store);return r.Xn().next(function(t){var e=o.ga(t,18e5),n=t.filter(function(t){return-1===e.indexOf(t)});return K_.forEach(n,function(t){return r.delete(t.clientId)}).next(function(){return n})})}).catch(function(){return[]})]);case 1:if(e=t.sent(),this.aa)for(n=0,r=e;n<r.length;n++)i=r[n],this.aa.removeItem(this.Va(i.clientId));t.label=2;case 2:return[2]}})})},EE.prototype.la=function(){var t=this;this.ta=this.ln.Pn("client_metadata_refresh",4e3,function(){return t.ca().then(function(){return t.Ra()}).then(function(){return t.la()})})},EE.prototype.ma=function(t){return!!t&&t.ownerId===this.clientId},EE.prototype.Ta=function(e){var r=this;return this.Ho?K_.resolve(!0):TE(e).get(Fw.key).next(function(t){if(null!==t&&r.Pa(t.leaseTimestampMs,5e3)&&!r.ya(t.ownerId)){if(r.ma(t)&&r.networkEnabled)return!0;if(!r.ma(t)){if(!t.allowTabSynchronization)throw new jv(Uv.FAILED_PRECONDITION,_E);return!1}}return!(!r.networkEnabled||!r.inForeground)||SE(e).Xn().next(function(t){return void 0===r.ga(t,5e3).find(function(t){if(r.clientId!==t.clientId){var e=!r.networkEnabled&&t.networkEnabled,n=!r.inForeground&&t.inForeground,t=r.networkEnabled===t.networkEnabled;if(e||n&&t)return!0}return!1})})}).next(function(t){return r.isPrimary!==t&&bv("IndexedDbPersistence","Client "+(t?"is":"is not")+" eligible for a primary lease."),t})},EE.prototype.pa=function(){return po(this,void 0,void 0,function(){var n=this;return vo(this,function(t){switch(t.label){case 0:return this.Yo=!1,this.va(),this.ta&&(this.ta.cancel(),this.ta=null),this.ba(),this.Sa(),[4,this.ia.runTransaction("shutdown","readwrite",[Fw.store,tE.store],function(t){var e=new bE(t,Bb.nr);return n.Ea(e).next(function(){return n.Aa(e)})})];case 1:return t.sent(),this.ia.close(),this.Da(),[2]}})})},EE.prototype.ga=function(t,e){var n=this;return t.filter(function(t){return n.Pa(t.updateTimeMs,e)&&!n.ya(t.clientId)})},EE.prototype.Ca=function(){var e=this;return this.runTransaction("getActiveClients","readonly",function(t){return SE(t).Xn().next(function(t){return e.ga(t,18e5).map(function(t){return t.clientId})})})},Object.defineProperty(EE.prototype,"yr",{get:function(){return this.Yo},enumerable:!1,configurable:!0}),EE.prototype.Na=function(t){return gw.qr(t,this.serializer,this.Fi,this.Lr)},EE.prototype.xa=function(){return this.ra},EE.prototype.Fa=function(){return this.Ni},EE.prototype.Oa=function(){return this.Fi},EE.prototype.Ma=function(){return this.oa},EE.prototype.runTransaction=function(e,n,r){var i=this;bv("IndexedDbPersistence","Starting transaction:",e);var o,t="readonly"===n?"readonly":"readwrite";return this.ia.runTransaction(e,t,rE,function(t){return o=new bE(t,i.Jo?i.Jo.next():Bb.nr),"readwrite-primary"===n?i.wa(o).next(function(t){return!!t||i.Ta(o)}).next(function(t){if(!t)throw wv("Failed to obtain primary lease for action '"+e+"'."),i.isPrimary=!1,i.ln.Ss(function(){return i.na(!1)}),new jv(Uv.FAILED_PRECONDITION,jb);return r(o)}).next(function(t){return i.Ia(o).next(function(){return t})}):i.ka(o).next(function(){return r(o)})}).then(function(t){return o.Ci(),t})},EE.prototype.ka=function(t){var e=this;return TE(t).get(Fw.key).next(function(t){if(null!==t&&e.Pa(t.leaseTimestampMs,5e3)&&!e.ya(t.ownerId)&&!e.ma(t)&&!(e.Ho||e.allowTabSynchronization&&t.allowTabSynchronization))throw new jv(Uv.FAILED_PRECONDITION,_E)})},EE.prototype.Ia=function(t){var e=new Fw(this.clientId,this.allowTabSynchronization,Date.now());return TE(t).put(Fw.key,e)},EE.kn=function(){return H_.kn()},EE.prototype.Ea=function(t){var e=this,n=TE(t);return n.get(Fw.key).next(function(t){return e.ma(t)?(bv("IndexedDbPersistence","Releasing primary lease."),n.delete(Fw.key)):K_.resolve()})},EE.prototype.Pa=function(t,e){var n=Date.now();return!(t<n-e||n<t&&(wv("Detected an update time that is in the future: "+t+" > "+n),1))},EE.prototype.ua=function(){var t=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Zo=function(){t.ln.fs(function(){return t.inForeground="visible"===t.document.visibilityState,t.ca()})},this.document.addEventListener("visibilitychange",this.Zo),this.inForeground="visible"===this.document.visibilityState)},EE.prototype.ba=function(){this.Zo&&(this.document.removeEventListener("visibilitychange",this.Zo),this.Zo=null)},EE.prototype.ha=function(){var t,e=this;"function"==typeof(null===(t=this.window)||void 0===t?void 0:t.addEventListener)&&(this.Xo=function(){e.va(),e.ln.fs(function(){return e.pa()})},this.window.addEventListener("unload",this.Xo))},EE.prototype.Sa=function(){this.Xo&&(this.window.removeEventListener("unload",this.Xo),this.Xo=null)},EE.prototype.ya=function(t){try{var e=null!==(null===(e=this.aa)||void 0===e?void 0:e.getItem(this.Va(t)));return bv("IndexedDbPersistence","Client '"+t+"' "+(e?"is":"is not")+" zombied in LocalStorage"),e}catch(t){return wv("IndexedDbPersistence","Failed to get zombied client id.",t),!1}},EE.prototype.va=function(){if(this.aa)try{this.aa.setItem(this.Va(this.clientId),String(Date.now()))}catch(t){wv("Failed to set zombie client id.",t)}},EE.prototype.Da=function(){if(this.aa)try{this.aa.removeItem(this.Va(this.clientId))}catch(t){}},EE.prototype.Va=function(t){return"firestore_zombie_"+this.persistenceKey+"_"+t},EE);function EE(t,e,n,r,i,o,s,a,u,c){if(this.allowTabSynchronization=t,this.persistenceKey=e,this.clientId=n,this.ln=i,this.window=o,this.document=s,this.zo=u,this.Ho=c,this.Jo=null,this.Yo=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Xo=null,this.inForeground=!1,this.Zo=null,this.ta=null,this.ea=Number.NEGATIVE_INFINITY,this.na=function(t){return Promise.resolve()},!EE.kn())throw new jv(Uv.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.Lr=new CE(this,r),this.sa=e+"main",this.serializer=new sw(a),this.ia=new H_(this.sa,11,new Lw(this.serializer)),this.ra=new fE(this.Lr,this.serializer),this.Fi=new uE,this.Ni=(e=this.serializer,a=this.Fi,new Sw(e,a)),this.oa=new iE(this.serializer),this.window&&this.window.localStorage?this.aa=this.window.localStorage:(this.aa=null,!1===c&&wv("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}function IE(t,e){var n=this;return(n=mE.call(this)||this).Xr=t,n.Go=e,n}function TE(t){return wE.qn(t,Fw.store)}function SE(t){return wE.qn(t,tE.store)}var CE=(NE.prototype.Sr=function(t){var n=this.$a(t);return this.db.xa().Bo(t).next(function(e){return n.next(function(t){return e+t})})},NE.prototype.$a=function(t){var e=0;return this.Cr(t,function(t){e++}).next(function(){return e})},NE.prototype.De=function(t,e){return this.db.xa().De(t,e)},NE.prototype.Cr=function(t,n){return this.La(t,function(t,e){return n(e)})},NE.prototype.Qo=function(t,e,n){return AE(t,n)},NE.prototype.Wo=function(t,e,n){return AE(t,n)},NE.prototype.Nr=function(t,e,n){return this.db.xa().Nr(t,e,n)},NE.prototype.eo=AE,NE.prototype.Ba=function(t,e){return r=e,i=!1,Iw(n=t).ss(function(t){return _w(n,t,r).next(function(t){return t&&(i=!0),K_.resolve(!t)})}).next(function(){return i});var n,r,i},NE.prototype.Fr=function(n,r){var i=this,o=this.db.Fa()._o(),s=[],a=0;return this.La(n,function(e,t){t<=r&&(t=i.Ba(n,e).next(function(t){if(!t)return a++,o.yi(n,e).next(function(){return o.Vi(e),gE(n).delete([0,rw(e.path)])})}),s.push(t))}).next(function(){return K_.xn(s)}).next(function(){return o.apply(n)}).next(function(){return a})},NE.prototype.removeTarget=function(t,e){return e=e.nt(t.Go),this.db.xa().ko(t,e)},NE.prototype.qa=AE,NE.prototype.La=function(t,r){var i,t=gE(t),o=Bb.nr;return t.ns({index:Xw.documentTargetsIndex},function(t,e){var n=t[0],t=(t[1],e.path),e=e.sequenceNumber;0===n?(o!==Bb.nr&&r(new Hv(ow(i)),o),o=e,i=t):o=Bb.nr}).next(function(){o!==Bb.nr&&r(new Hv(ow(i)),o)})},NE.prototype.Mr=function(t){return this.db.Fa().wo(t)},NE);function NE(t,e){this.db=t,this.Rr=new tw(this,e)}function AE(t,e){return gE(t).put((t=t.Go,new Xw(0,rw(e.path),t)))}function kE(t,e){var n=t.projectId;return t.o||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}var OE=(PE.prototype.pr=function(e){var n=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",function(t){return e.Or(t,n.Qa)})},PE);function PE(t,e,n,r){this.persistence=t,this.Ua=e,this.serializer=r,this.Qa=new yy(Av),this.Ka=new Fv(oy,sy),this.Wa=qv.min(),this.xi=t.Na(n),this.ja=t.Fa(),this.ra=t.xa(),this.Ga=new Vb(this.ja,this.xi,this.persistence.Oa()),this.oa=t.Ma(),this.Ua.za(this.Ga)}function RE(t,e,n,r){return new OE(t,e,n,r)}function DE(i,o){return po(this,void 0,void 0,function(){var e,n,m,r;return vo(this,function(t){switch(t.label){case 0:return n=(e=i).xi,m=e.Ga,[4,e.persistence.runTransaction("Handle user change","readonly",function(y){var g;return e.xi.Hr(y).next(function(t){return g=t,n=e.persistence.Na(o),m=new Vb(e.ja,n,e.persistence.Oa()),n.Hr(y)}).next(function(t){for(var e=[],n=[],r=Py(),i=0,o=g;i<o.length;i++){var s=o[i];e.push(s.batchId);for(var a=0,u=s.mutations;a<u.length;a++)var c=u[a],r=r.add(c.key)}for(var h=0,l=t;h<l.length;h++){var f=l[h];n.push(f.batchId);for(var p=0,d=f.mutations;p<d.length;p++){var v=d[p];r=r.add(v.key)}}return m.Li(y,r).next(function(t){return{Ha:t,Ja:e,Ya:n}})})})];case 1:return r=t.sent(),[2,(e.xi=n,e.Ga=m,e.Ua.za(e.Ga),r)]}})})}function xE(t){var e=t;return e.persistence.runTransaction("Get last remote snapshot version","readonly",function(t){return e.ra.Co(t)})}function LE(t,r){var i=t;return i.persistence.runTransaction("Allocate target","readwrite",function(e){var n;return i.ra.qo(e,r).next(function(t){return t?(n=t,K_.resolve(n)):i.ra.bo(e).next(function(t){return n=new fy(r,t,0,e.Go),i.ra.Fo(e,n).next(function(){return n})})})}).then(function(t){var e=i.Qa.get(t.targetId);return(null===e||0<t.et.A(e.et))&&(i.Qa=i.Qa.rt(t.targetId,t),i.Ka.set(r,t.targetId)),t})}function ME(i,o,s){return po(this,void 0,void 0,function(){var e,n,r;return vo(this,function(t){switch(t.label){case 0:n=(e=i).Qa.get(o),r=s?"readwrite":"readwrite-primary",t.label=1;case 1:return t.trys.push([1,4,,5]),s?[3,3]:[4,e.persistence.runTransaction("Release target",r,function(t){return e.persistence.Lr.removeTarget(t,n)})];case 2:t.sent(),t.label=3;case 3:return[3,5];case 4:if(!Z_(r=t.sent()))throw r;return bv("LocalStore","Failed to update sequence numbers for target "+o+": "+r),[3,5];case 5:return e.Qa=e.Qa.remove(o),e.Ka.delete(n.target),[2]}})})}function FE(t,o,s){var a=t,u=qv.min(),c=Py();return a.persistence.runTransaction("Execute query","readonly",function(e){return t=a,n=e,r=n_(o),(void 0!==(t=(i=t).Ka.get(r))?K_.resolve(i.Qa.get(t)):i.ra.qo(n,r)).next(function(t){if(t)return u=t.lastLimboFreeSnapshotVersion,a.ra.jo(e,t.targetId).next(function(t){c=t})}).next(function(){return a.Ua.Ui(e,o,s?u:qv.min(),s?c:Py())}).next(function(t){return{documents:t,Xa:c}});var t,n,r,i})}function UE(t,e){var n=t,r=n.ra;return(t=n.Qa.get(e))?Promise.resolve(t.target):n.persistence.runTransaction("Get target data","readonly",function(t){return r.qe(t,e).next(function(t){return t?t.target:null})})}function jE(t){var s=t;return s.persistence.runTransaction("Get new document changes","readonly",function(t){return e=s.ja,n=t,t=s.Wa,r=e,i=Sy,o=cw(t),t=Ow(n),n=IDBKeyRange.lowerBound(o,!0),t.ns({index:zw.readTimeIndex,range:n},function(t,e){var n=aw(r.serializer,e);i=i.rt(n.key,n),o=e.readTime}).next(function(){return{Za:i,readTime:hw(o)}});var e,n,r,i,o}).then(function(t){var e=t.Za,t=t.readTime;return s.Wa=t,e})}function VE(e){return po(this,void 0,void 0,function(){return vo(this,function(t){if(e.code!==Uv.FAILED_PRECONDITION||e.message!==jb)throw e;return bv("LocalStore","Unexpectedly lost primary lease"),[2]})})}function qE(t,e,n,r,i){var o=this;this.Kc=t,this.Wc=e,this.rs=n,this.jc={},this.Gc=[],this.zc=new Map,this.Hc=new Set,this.Jc=[],this.Yc=i,this.Yc.Xc(function(t){n.fs(function(){return po(o,void 0,void 0,function(){return vo(this,function(t){switch(t.label){case 0:return uI(this)?(bv("RemoteStore","Restarting streams for network reachability change."),[4,function(n){return po(this,void 0,void 0,function(){var e;return vo(this,function(t){switch(t.label){case 0:return(e=n).Hc.add(4),[4,eI(e)];case 1:return t.sent(),e.Zc.set("Unknown"),e.Hc.delete(4),[4,tI(e)];case 2:return t.sent(),[2]}})})}(this)]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})})}),this.Zc=new QE(n,r)}var BE,WE,KE,K=(ZE.prototype.rc=function(){return 1===this.state||2===this.state||4===this.state},ZE.prototype.oc=function(){return 2===this.state},ZE.prototype.start=function(){3!==this.state?this.auth():this.ac()},ZE.prototype.stop=function(){return po(this,void 0,void 0,function(){return vo(this,function(t){switch(t.label){case 0:return this.rc()?[4,this.close(0)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})},ZE.prototype.cc=function(){this.state=0,this.Ps.reset()},ZE.prototype.uc=function(){var t=this;this.oc()&&null===this.ic&&(this.ic=this.ln.Pn(this.tc,6e4,function(){return t.hc()}))},ZE.prototype.lc=function(t){this._c(),this.stream.send(t)},ZE.prototype.hc=function(){return po(this,void 0,void 0,function(){return vo(this,function(t){return this.oc()?[2,this.close(0)]:[2]})})},ZE.prototype._c=function(){this.ic&&(this.ic.cancel(),this.ic=null)},ZE.prototype.close=function(e,n){return po(this,void 0,void 0,function(){return vo(this,function(t){switch(t.label){case 0:return this._c(),this.Ps.cancel(),this.sc++,3!==e?this.Ps.reset():n&&n.code===Uv.RESOURCE_EXHAUSTED?(wv(n.toString()),wv("Using maximum backoff delay to prevent overloading the backend."),this.Ps.mn()):n&&n.code===Uv.UNAUTHENTICATED&&this.nc.ni(),null!==this.stream&&(this.fc(),this.stream.close(),this.stream=null),this.state=e,[4,this.listener.dc(n)];case 1:return t.sent(),[2]}})})},ZE.prototype.fc=function(){},ZE.prototype.auth=function(){var n=this;this.state=1;var t=this.wc(this.sc),e=this.sc;this.nc.getToken().then(function(t){n.sc===e&&n.Tc(t)},function(e){t(function(){var t=new jv(Uv.UNKNOWN,"Fetching auth token failed: "+e.message);return n.Ec(t)})})},ZE.prototype.Tc=function(t){var e=this,n=this.wc(this.sc);this.stream=this.Ic(t),this.stream.mc(function(){n(function(){return e.state=2,e.listener.mc()})}),this.stream.dc(function(t){n(function(){return e.Ec(t)})}),this.stream.onMessage(function(t){n(function(){return e.onMessage(t)})})},ZE.prototype.ac=function(){var t=this;this.state=4,this.Ps.An(function(){return po(t,void 0,void 0,function(){return vo(this,function(t){return this.state=0,this.start(),[2]})})})},ZE.prototype.Ec=function(t){return bv("PersistentStream","close with error: "+t),this.stream=null,this.close(3,t)},ZE.prototype.wc=function(e){var n=this;return function(t){n.ln.fs(function(){return n.sc===e?t():(bv("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())})}},ZE),HE=(lo($E,KE=K),$E.prototype.Ic=function(t){return this.ec.Ac("Listen",t)},$E.prototype.onMessage=function(t){this.Ps.reset();var e,n=function(t,e){if("targetChange"in e){e.targetChange;var n="NO_CHANGE"===(i=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===i?1:"REMOVE"===i?2:"CURRENT"===i?3:"RESET"===i?4:Tv(),r=e.targetChange.targetIds||[],i=(o=e.targetChange.resumeToken,t.Ue?(Sv(void 0===o||"string"==typeof o),uy.fromBase64String(o||"")):(Sv(void 0===o||o instanceof Uint8Array),uy.fromUint8Array(o||new Uint8Array))),o=e.targetChange.cause,s=o&&(o=void 0===(s=o).code?Uv.UNKNOWN:vy(s.code),new jv(o,s.message||"")),r=new Vy(n,r,i,s||null)}else if("documentChange"in e){e.documentChange,(u=e.documentChange).document,u.document.name,u.document.updateTime;var i=Ag(t,u.document.name),a=Tg(u.document.updateTime),s=new Rm({mapValue:{fields:u.document.fields}}),a=new qm(i,a,s,{}),s=u.targetIds||[],u=u.removedTargetIds||[];r=new Uy(s,u,a.key,a)}else if("documentDelete"in e){e.documentDelete,(u=e.documentDelete).document;var a=Ag(t,u.document),c=u.readTime?Tg(u.readTime):qv.min(),c=new Bm(a,c),u=u.removedTargetIds||[];r=new Uy([],u,c.key,c)}else if("documentRemove"in e){e.documentRemove,(c=e.documentRemove).document;var h=Ag(t,c.document),c=c.removedTargetIds||[];r=new Uy([],c,h,null)}else{if(!("filter"in e))return Tv();e.filter,(h=e.filter).targetId,e=new hy(e=h.count||0),h=h.targetId,r=new jy(h,e)}return r}(this.serializer,t),t=!("targetChange"in(e=t))||(e=e.targetChange).targetIds&&e.targetIds.length||!e.readTime?qv.min():Tg(e.readTime);return this.listener.Rc(n,t)},$E.prototype.Pc=function(t){var e,n,r,i,o={};o.database=Pg(this.serializer),o.addTarget=(e=this.serializer,(r=ay(r=(n=t).target)?{documents:Mg(e,r)}:{query:Fg(e,r)}).targetId=n.targetId,0<n.resumeToken.X()?r.resumeToken=Ig(e,n.resumeToken):0<n.et.A(qv.min())&&(r.readTime=Eg(e,n.et.P())),r),(t=(this.serializer,i=t,null==(t=function(){switch(i.tt){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Tv()}}())?null:{"goog-listen-tags":t}))&&(o.labels=t),this.lc(o)},$E.prototype.gc=function(t){var e={};e.database=Pg(this.serializer),e.removeTarget=t,this.lc(e)},$E),GE=(lo(JE,WE=K),Object.defineProperty(JE.prototype,"yc",{get:function(){return this.Vc},enumerable:!1,configurable:!0}),JE.prototype.start=function(){this.Vc=!1,this.lastStreamToken=void 0,WE.prototype.start.call(this)},JE.prototype.fc=function(){this.Vc&&this.vc([])},JE.prototype.Ic=function(t){return this.ec.Ac("Write",t)},JE.prototype.onMessage=function(t){if(Sv(!!t.streamToken),this.lastStreamToken=t.streamToken,this.Vc){this.Ps.reset();var e=(n=t.writeResults,r=t.commitTime,n&&0<n.length?(Sv(void 0!==r),n.map(function(t){return n=r,(t=(e=t).updateTime?Tg(e.updateTime):Tg(n)).isEqual(qv.min())&&(t=Tg(n)),n=null,e.transformResults&&0<e.transformResults.length&&(n=e.transformResults),new hm(t,n);var e,n})):[]),n=Tg(t.commitTime);return this.listener.bc(n,e)}var r;return Sv(!t.writeResults||0===t.writeResults.length),this.Vc=!0,this.listener.Sc()},JE.prototype.Dc=function(){var t={};t.database=Pg(this.serializer),this.lc(t)},JE.prototype.vc=function(t){var e=this,t={streamToken:this.lastStreamToken,writes:t.map(function(t){return xg(e.serializer,t)})};this.lc(t)},JE),zE=(lo(XE,BE=function(){}),XE.prototype.Nc=function(){if(this.Cc)throw new jv(Uv.FAILED_PRECONDITION,"The client has already been terminated.")},XE.prototype.xc=function(e,n,r){var i=this;return this.Nc(),this.credentials.getToken().then(function(t){return i.ec.xc(e,n,r,t)}).catch(function(t){throw t.code===Uv.UNAUTHENTICATED&&i.credentials.ni(),t})},XE.prototype.Fc=function(e,n,r){var i=this;return this.Nc(),this.credentials.getToken().then(function(t){return i.ec.Fc(e,n,r,t)}).catch(function(t){throw t.code===Uv.UNAUTHENTICATED&&i.credentials.ni(),t})},XE.prototype.terminate=function(){this.Cc=!1},XE),QE=(YE.prototype.Lc=function(){var t=this;0===this.Mc&&(this.Bc("Unknown"),this.kc=this.rs.Pn("online_state_timeout",1e4,function(){return t.kc=null,t.qc("Backend didn't respond within 10 seconds."),t.Bc("Offline"),Promise.resolve()}))},YE.prototype.Uc=function(t){"Online"===this.state?this.Bc("Unknown"):(this.Mc++,1<=this.Mc&&(this.Qc(),this.qc("Connection failed 1 times. Most recent error: "+t.toString()),this.Bc("Offline")))},YE.prototype.set=function(t){this.Qc(),this.Mc=0,"Online"===t&&(this.$c=!1),this.Bc(t)},YE.prototype.Bc=function(t){t!==this.state&&(this.state=t,this.Oc(t))},YE.prototype.qc=function(t){t="Could not reach Cloud Firestore backend. "+t+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.",this.$c?(wv(t),this.$c=!1):bv("OnlineStateTracker",t)},YE.prototype.Qc=function(){null!==this.kc&&(this.kc.cancel(),this.kc=null)},YE);function YE(t,e){this.rs=t,this.Oc=e,this.state="Unknown",this.Mc=0,this.kc=null,this.$c=!0}function XE(t,e,n){var r=this;return(r=BE.call(this)||this).credentials=t,r.ec=e,r.serializer=n,r.Cc=!1,r}function JE(t,e,n,r,i){var o=this;return(o=WE.call(this,t,"write_stream_connection_backoff","write_stream_idle",e,n,i)||this).serializer=r,o.Vc=!1,o}function $E(t,e,n,r,i){var o=this;return(o=KE.call(this,t,"listen_stream_connection_backoff","listen_stream_idle",e,n,i)||this).serializer=r,o}function ZE(t,e,n,r,i,o){this.ln=t,this.tc=n,this.ec=r,this.nc=i,this.listener=o,this.state=0,this.sc=0,this.ic=null,this.stream=null,this.Ps=new W_(t,e)}function tI(r){return po(this,void 0,void 0,function(){var e,n;return vo(this,function(t){switch(t.label){case 0:if(!uI(r))return[3,4];e=0,n=r.Jc,t.label=1;case 1:return e<n.length?[4,(0,n[e])(!0)]:[3,4];case 2:t.sent(),t.label=3;case 3:return e++,[3,1];case 4:return[2]}})})}function eI(r){return po(this,void 0,void 0,function(){var e,n;return vo(this,function(t){switch(t.label){case 0:e=0,n=r.Jc,t.label=1;case 1:return e<n.length?[4,(0,n[e])(!1)]:[3,4];case 2:t.sent(),t.label=3;case 3:return e++,[3,1];case 4:return[2]}})})}function nI(t,e){t.zc.has(e.targetId)||(t.zc.set(e.targetId,e),aI(t)?sI(t):yI(t).oc()&&iI(t,e))}function rI(t,e){var n=t,t=yI(n);n.zc.delete(e),t.oc()&&oI(n,e),0===n.zc.size&&(t.oc()?t.uc():uI(n)&&n.Zc.set("Unknown"))}function iI(t,e){t.tu.Ie(e.targetId),yI(t).Pc(e)}function oI(t,e){t.tu.Ie(e),yI(t).gc(e)}function sI(e){e.tu=new By({Be:function(t){return e.jc.Be(t)},qe:function(t){return e.zc.get(t)||null}}),yI(e).start(),e.Zc.Lc()}function aI(t){return uI(t)&&!yI(t).rc()&&0<t.zc.size}function uI(t){return 0===t.Hc.size}function cI(t){t.tu=void 0}function hI(n,r,i){return po(this,void 0,void 0,function(){var e=this;return vo(this,function(t){switch(t.label){case 0:if(!Z_(r))throw r;return n.Hc.add(1),[4,eI(n)];case 1:return t.sent(),n.Zc.set("Offline"),i=i||function(){return xE(n.Kc)},n.rs.Ss(function(){return po(e,void 0,void 0,function(){return vo(this,function(t){switch(t.label){case 0:return bv("RemoteStore","Retrying IndexedDB access"),[4,i()];case 1:return t.sent(),n.Hc.delete(1),[4,tI(n)];case 2:return t.sent(),[2]}})})}),[2]}})})}function lI(e,n){return n().catch(function(t){return hI(e,t,n)})}function fI(c){return po(this,void 0,void 0,function(){var o,s,a,u;return vo(this,function(t){switch(t.label){case 0:s=gI(o=c),a=0<o.Gc.length?o.Gc[o.Gc.length-1].batchId:-1,t.label=1;case 1:if(!(uI(o)&&o.Gc.length<10))return[3,7];t.label=2;case 2:return t.trys.push([2,4,,6]),[4,(n=o.Kc,r=a,(i=n).persistence.runTransaction("Get next mutation batch","readonly",function(t){return void 0===r&&(r=-1),i.xi.Gr(t,r)}))];case 3:return null===(u=t.sent())?(0===o.Gc.length&&s.uc(),[3,7]):(a=u.batchId,e=u,(n=o).Gc.push(e),(n=gI(n)).oc()&&n.yc&&n.vc(e.mutations),[3,6]);case 4:return u=t.sent(),[4,hI(o,u)];case 5:return t.sent(),[3,6];case 6:return[3,1];case 7:return pI(o)&&dI(o),[2]}var e,n,r,i})})}function pI(t){return uI(t)&&!gI(t).rc()&&0<t.Gc.length}function dI(t){gI(t).start()}function vI(n,r){return po(this,void 0,void 0,function(){var e;return vo(this,function(t){switch(t.label){case 0:return e=n,r?(e.Hc.delete(2),[4,tI(e)]):[3,2];case 1:return t.sent(),[3,5];case 2:return r?[3,4]:(e.Hc.add(2),[4,eI(e)]);case 3:t.sent(),e.Zc.set("Unknown"),t.label=4;case 4:t.label=5;case 5:return[2]}})})}function yI(n){var t,e,r,i=this;return n.ru||(n.ru=(t=n.Wc,e=n.rs,r={mc:function(n){return po(this,void 0,void 0,function(){return vo(this,function(t){return n.zc.forEach(function(t,e){iI(n,t)}),[2]})})}.bind(null,n),dc:function(e,n){return po(this,void 0,void 0,function(){return vo(this,function(t){return cI(e),aI(e)?(e.Zc.Uc(n),sI(e)):e.Zc.set("Unknown"),[2]})})}.bind(null,n),Rc:function(s,a,u){return po(this,void 0,void 0,function(){var n,o;return vo(this,function(t){switch(t.label){case 0:if(s.Zc.set("Online"),!(a instanceof Vy&&2===a.state&&a.cause))return[3,6];t.label=1;case 1:return t.trys.push([1,3,,5]),[4,function(o,s){return po(this,void 0,void 0,function(){var e,n,r,i;return vo(this,function(t){switch(t.label){case 0:e=s.cause,n=0,r=s.targetIds,t.label=1;case 1:return n<r.length?(i=r[n],o.zc.has(i)?[4,o.jc.eu(i,e)]:[3,3]):[3,5];case 2:t.sent(),o.zc.delete(i),o.tu.removeTarget(i),t.label=3;case 3:t.label=4;case 4:return n++,[3,1];case 5:return[2]}})})}(s,a)];case 2:return t.sent(),[3,5];case 3:return n=t.sent(),bv("RemoteStore","Failed to remove targets %s: %s ",a.targetIds.join(","),n),[4,hI(s,n)];case 4:return t.sent(),[3,5];case 5:return[3,13];case 6:if(a instanceof Uy?s.tu.pe(a):a instanceof jy?s.tu.Fe(a):s.tu.Se(a),u.isEqual(qv.min()))return[3,13];t.label=7;case 7:return t.trys.push([7,11,,13]),[4,xE(s.Kc)];case 8:return o=t.sent(),0<=u.A(o)?[4,(i=u,(e=(r=s).tu.ke(i)).Gt.forEach(function(t,e){var n;0<t.resumeToken.X()&&(n=r.zc.get(e))&&r.zc.set(e,n.st(t.resumeToken,i))}),e.zt.forEach(function(t){var e=r.zc.get(t);e&&(r.zc.set(t,e.st(uy.Z,e.et)),oI(r,t),e=new fy(e.target,t,1,e.sequenceNumber),iI(r,e))}),r.jc.nu(e))]:[3,10];case 9:t.sent(),t.label=10;case 10:return[3,13];case 11:return bv("RemoteStore","Failed to raise snapshot:",o=t.sent()),[4,hI(s,o)];case 12:return t.sent(),[3,13];case 13:return[2]}var r,i,e})})}.bind(null,n)},t.Nc(),new HE(e,t.ec,t.credentials,t.serializer,r)),n.Jc.push(function(e){return po(i,void 0,void 0,function(){return vo(this,function(t){switch(t.label){case 0:return e?(n.ru.cc(),aI(n)?sI(n):n.Zc.set("Unknown"),[3,3]):[3,1];case 1:return[4,n.ru.stop()];case 2:t.sent(),cI(n),t.label=3;case 3:return[2]}})})})),n.ru}function gI(n){var t,e,r,i=this;return n.ou||(n.ou=(t=n.Wc,e=n.rs,r={mc:function(e){return po(this,void 0,void 0,function(){return vo(this,function(t){return gI(e).Dc(),[2]})})}.bind(null,n),dc:function(e,n){return po(this,void 0,void 0,function(){return vo(this,function(t){switch(t.label){case 0:return n&&gI(e).yc?[4,function(r,i){return po(this,void 0,void 0,function(){var e,n;return vo(this,function(t){switch(t.label){case 0:return dy(n=i.code)&&n!==Uv.ABORTED?(e=r.Gc.shift(),gI(r).cc(),[4,lI(r,function(){return r.jc.iu(e.batchId,i)})]):[3,3];case 1:return t.sent(),[4,fI(r)];case 2:t.sent(),t.label=3;case 3:return[2]}})})}(e,n)]:[3,2];case 1:t.sent(),t.label=2;case 2:return pI(e)&&dI(e),[2]}})})}.bind(null,n),Sc:function(o){return po(this,void 0,void 0,function(){var e,n,r,i;return vo(this,function(t){for(e=gI(o),n=0,r=o.Gc;n<r.length;n++)i=r[n],e.vc(i.mutations);return[2]})})}.bind(null,n),bc:function(r,i,o){return po(this,void 0,void 0,function(){var e,n;return vo(this,function(t){switch(t.label){case 0:return e=r.Gc.shift(),n=kb.from(e,i,o),[4,lI(r,function(){return r.jc.su(n)})];case 1:return t.sent(),[4,fI(r)];case 2:return t.sent(),[2]}})})}.bind(null,n)},t.Nc(),new GE(e,t.ec,t.credentials,t.serializer,r)),n.Jc.push(function(e){return po(i,void 0,void 0,function(){return vo(this,function(t){switch(t.label){case 0:return e?(n.ou.cc(),[4,fI(n)]):[3,2];case 1:return t.sent(),[3,4];case 2:return[4,n.ou.stop()];case 3:t.sent(),0<n.Gc.length&&(bv("RemoteStore","Stopping write stream with "+n.Gc.length+" pending writes"),n.Gc=[]),t.label=4;case 4:return[2]}})})})),n.ou}var mI=(wI.prototype.T=function(){return this.au.T()},wI.prototype.Qo=function(t,e){e=new _I(t,e),this.au=this.au.add(e),this.uu=this.uu.add(e)},wI.prototype.lu=function(t,e){var n=this;t.forEach(function(t){return n.Qo(t,e)})},wI.prototype.Wo=function(t,e){this._u(new _I(t,e))},wI.prototype.fu=function(t,e){var n=this;t.forEach(function(t){return n.Wo(t,e)})},wI.prototype.du=function(t){var e=this,n=new Hv(new Bv([])),r=new _I(n,t),t=new _I(n,t+1),i=[];return this.uu.Nt([r,t],function(t){e._u(t),i.push(t.key)}),i},wI.prototype.wu=function(){var e=this;this.au.forEach(function(t){return e._u(t)})},wI.prototype._u=function(t){this.au=this.au.delete(t),this.uu=this.uu.delete(t)},wI.prototype.Tu=function(t){var e=new Hv(new Bv([])),n=new _I(e,t),t=new _I(e,t+1),r=Py();return this.uu.Nt([n,t],function(t){r=r.add(t.key)}),r},wI.prototype.so=function(t){var e=new _I(t,0);return null!==(e=this.au.Ft(e))&&t.isEqual(e.key)},wI),_I=(bI.cu=function(t,e){return Hv.V(t.key,e.key)||Av(t.Eu,e.Eu)},bI.hu=function(t,e){return Av(t.Eu,e.Eu)||Hv.V(t.key,e.key)},bI);function bI(t,e){this.key=t,this.Eu=e}function wI(){this.au=new Iy(_I.cu),this.uu=new Iy(_I.hu)}function EI(t,e){return"firestore_clients_"+t+"_"+e}function II(t,e,n){return n="firestore_mutations_"+t+"_"+n,e.Js()&&(n+="_"+e.uid),n}function TI(t,e){return"firestore_targets_"+t+"_"+e}var SI=(GI.Iu=function(t,e,n){var r=JSON.parse(n),i="object"==typeof r&&-1!==["pending","acknowledged","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error),o=void 0;return i&&r.error&&(i="string"==typeof r.error.message&&"string"==typeof r.error.code)&&(o=new jv(r.error.code,r.error.message)),i?new GI(t,e,r.state,o):(wv("SharedClientState","Failed to parse mutation state for ID '"+e+"': "+n),null)},GI.prototype.mu=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},GI),CI=(HI.Iu=function(t,e){var n=JSON.parse(e),r="object"==typeof n&&-1!==["not-current","current","rejected"].indexOf(n.state)&&(void 0===n.error||"object"==typeof n.error),i=void 0;return r&&n.error&&(r="string"==typeof n.error.message&&"string"==typeof n.error.code)&&(i=new jv(n.error.code,n.error.message)),r?new HI(t,n.state,i):(wv("SharedClientState","Failed to parse target state for ID '"+t+"': "+e),null)},HI.prototype.mu=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},HI),NI=(KI.Iu=function(t,e){for(var n=JSON.parse(e),r="object"==typeof n&&n.activeTargetIds instanceof Array,i=Ry,o=0;r&&o<n.activeTargetIds.length;++o)r=ny(n.activeTargetIds[o]),i=i.add(n.activeTargetIds[o]);return r?new KI(t,i):(wv("SharedClientState","Failed to parse client data for instance '"+t+"': "+e),null)},KI),AI=(WI.Iu=function(t){var e=JSON.parse(t);return"object"==typeof e&&-1!==["Unknown","Online","Offline"].indexOf(e.onlineState)&&"string"==typeof e.clientId?new WI(e.clientId,e.onlineState):(wv("SharedClientState","Failed to parse online state: "+t),null)},WI),kI=(BI.prototype.Au=function(t){this.activeTargetIds=this.activeTargetIds.add(t)},BI.prototype.Ru=function(t){this.activeTargetIds=this.activeTargetIds.delete(t)},BI.prototype.mu=function(){var t={activeTargetIds:this.activeTargetIds.O(),updateTimeMs:Date.now()};return JSON.stringify(t)},BI),OI=(qI.kn=function(t){return!(!t||!t.localStorage)},qI.prototype.start=function(){return po(this,void 0,void 0,function(){var e,n,r,i,o,s,a,u,c,h,l=this;return vo(this,function(t){switch(t.label){case 0:return[4,this.gu.Ca()];case 1:for(s=t.sent(),e=0,n=s;e<n.length;e++)(r=n[e])!==this.Pu&&(i=this.getItem(EI(this.persistenceKey,r)))&&(o=NI.Iu(r,i))&&(this.pu=this.pu.rt(o.clientId,o));for(this.Ou(),(s=this.storage.getItem(this.xu))&&(a=this.Mu(s))&&this.ku(a),u=0,c=this.vu;u<c.length;u++)h=c[u],this.yu(h);return this.vu=[],this.window.addEventListener("unload",function(){return l.pa()}),this.yr=!0,[2]}})})},qI.prototype.er=function(t){this.setItem(this.Su,JSON.stringify(t))},qI.prototype.$u=function(){return this.Lu(this.pu)},qI.prototype.Bu=function(n){var r=!1;return this.pu.forEach(function(t,e){e.activeTargetIds.has(n)&&(r=!0)}),r},qI.prototype.qu=function(t){this.Uu(t,"pending")},qI.prototype.Qu=function(t,e,n){this.Uu(t,e,n),this.Ku(t)},qI.prototype.Wu=function(t){var e,n="not-current";return this.Bu(t)&&(!(e=this.storage.getItem(TI(this.persistenceKey,t)))||(e=CI.Iu(t,e))&&(n=e.state)),this.ju.Au(t),this.Ou(),n},qI.prototype.Gu=function(t){this.ju.Ru(t),this.Ou()},qI.prototype.zu=function(t){return this.ju.activeTargetIds.has(t)},qI.prototype.Hu=function(t){this.removeItem(TI(this.persistenceKey,t))},qI.prototype.Ju=function(t,e,n){this.Yu(t,e,n)},qI.prototype.Xu=function(t,e,n){var r=this;e.forEach(function(t){r.Ku(t)}),this.currentUser=t,n.forEach(function(t){r.qu(t)})},qI.prototype.Zu=function(t){this.th(t)},qI.prototype.eh=function(){this.nh()},qI.prototype.pa=function(){this.yr&&(this.window.removeEventListener("storage",this.Vu),this.removeItem(this.bu),this.yr=!1)},qI.prototype.getItem=function(t){var e=this.storage.getItem(t);return bv("SharedClientState","READ",t,e),e},qI.prototype.setItem=function(t,e){bv("SharedClientState","SET",t,e),this.storage.setItem(t,e)},qI.prototype.removeItem=function(t){bv("SharedClientState","REMOVE",t),this.storage.removeItem(t)},qI.prototype.yu=function(t){var e=this,o=t;o.storageArea===this.storage&&(bv("SharedClientState","EVENT",o.key,o.newValue),o.key!==this.bu?this.ln.Ss(function(){return po(e,void 0,void 0,function(){var e,n,r,i;return vo(this,function(t){if(this.yr){if(null!==o.key)if(this.Du.test(o.key)){if(null==o.newValue)return e=this.sh(o.key),[2,this.ih(e,null)];if(e=this.rh(o.key,o.newValue))return[2,this.ih(e.clientId,e)]}else if(this.Cu.test(o.key)){if(null!==o.newValue&&(n=this.oh(o.key,o.newValue)))return[2,this.ah(n)]}else if(this.Nu.test(o.key)){if(null!==o.newValue&&(r=this.uh(o.key,o.newValue)))return[2,this.hh(r)]}else if(o.key===this.xu){if(null!==o.newValue&&(i=this.Mu(o.newValue)))return[2,this.ku(i)]}else if(o.key===this.Su)(i=function(t){var e=Bb.nr;if(null!=t)try{var n=JSON.parse(t);Sv("number"==typeof n),e=n}catch(t){wv("SharedClientState","Failed to read sequence number from WebStorage",t)}return e}(o.newValue))!==Bb.nr&&this.Xi(i);else if(o.key===this.Fu)return[2,this.gu.lh()]}else this.vu.push(o);return[2]})})}):wv("Received WebStorage notification for local change. Another client might have garbage-collected our state"))},Object.defineProperty(qI.prototype,"ju",{get:function(){return this.pu.get(this.Pu)},enumerable:!1,configurable:!0}),qI.prototype.Ou=function(){this.setItem(this.bu,this.ju.mu())},qI.prototype.Uu=function(t,e,n){n=new SI(this.currentUser,t,e,n),t=II(this.persistenceKey,this.currentUser,t),this.setItem(t,n.mu())},qI.prototype.Ku=function(t){t=II(this.persistenceKey,this.currentUser,t),this.removeItem(t)},qI.prototype.th=function(t){t={clientId:this.Pu,onlineState:t},this.storage.setItem(this.xu,JSON.stringify(t))},qI.prototype.Yu=function(t,e,n){var r=TI(this.persistenceKey,t),n=new CI(t,e,n);this.setItem(r,n.mu())},qI.prototype.nh=function(){this.setItem(this.Fu,"value-not-used")},qI.prototype.sh=function(t){return(t=this.Du.exec(t))?t[1]:null},qI.prototype.rh=function(t,e){return t=this.sh(t),NI.Iu(t,e)},qI.prototype.oh=function(t,e){var n=this.Cu.exec(t),t=Number(n[1]),n=void 0!==n[2]?n[2]:null;return SI.Iu(new bb(n),t,e)},qI.prototype.uh=function(t,e){return t=this.Nu.exec(t),t=Number(t[1]),CI.Iu(t,e)},qI.prototype.Mu=function(t){return AI.Iu(t)},qI.prototype.ah=function(e){return po(this,void 0,void 0,function(){return vo(this,function(t){return e.user.uid===this.currentUser.uid?[2,this.gu._h(e.batchId,e.state,e.error)]:(bv("SharedClientState","Ignoring mutation for non-active user "+e.user.uid),[2])})})},qI.prototype.hh=function(t){return this.gu.fh(t.targetId,t.state,t.error)},qI.prototype.ih=function(t,e){var n=this,r=e?this.pu.rt(t,e):this.pu.remove(t),i=this.Lu(this.pu),o=this.Lu(r),s=[],a=[];return o.forEach(function(t){i.has(t)||s.push(t)}),i.forEach(function(t){o.has(t)||a.push(t)}),this.gu.dh(s,a).then(function(){n.pu=r})},qI.prototype.ku=function(t){this.pu.get(t.clientId)&&this.Oc(t.onlineState)},qI.prototype.Lu=function(t){var n=Ry;return t.forEach(function(t,e){n=n.Ot(e.activeTargetIds)}),n},qI),PI=(VI.prototype.qu=function(t){},VI.prototype.Qu=function(t,e,n){},VI.prototype.Wu=function(t){return this.wh.Au(t),this.Th[t]||"not-current"},VI.prototype.Ju=function(t,e,n){this.Th[t]=e},VI.prototype.Gu=function(t){this.wh.Ru(t)},VI.prototype.zu=function(t){return this.wh.activeTargetIds.has(t)},VI.prototype.Hu=function(t){delete this.Th[t]},VI.prototype.$u=function(){return this.wh.activeTargetIds},VI.prototype.Bu=function(t){return this.wh.activeTargetIds.has(t)},VI.prototype.start=function(){return this.wh=new kI,Promise.resolve()},VI.prototype.Xu=function(t,e,n){},VI.prototype.Zu=function(t){},VI.prototype.pa=function(){},VI.prototype.er=function(t){},VI.prototype.eh=function(){},VI),RI=function(t){this.key=t},DI=function(t){this.key=t},xI=(Object.defineProperty(jI.prototype,"Ph",{get:function(){return this.Eh},enumerable:!1,configurable:!0}),jI.prototype.gh=function(t,e){var s=this,a=e?e.Vh:new xy,u=(e||this).Rh,c=(e||this).Qt,h=u,l=!1,f=Xm(this.query)&&u.size===this.query.limit?u.last():null,p=Jm(this.query)&&u.size===this.query.limit?u.first():null;if(t.ut(function(t,e){var n=u.get(t),r=(r=e instanceof qm?e:null)&&(c_(s.query,r)?r:null),i=!!n&&s.Qt.has(n.key),o=!!r&&(r.Je||s.Qt.has(r.key)&&r.hasCommittedMutations),e=!1;n&&r?n.data().isEqual(r.data())?i!==o&&(a.track({type:3,doc:r}),e=!0):s.yh(n,r)||(a.track({type:2,doc:r}),e=!0,(f&&0<s.Ah(r,f)||p&&s.Ah(r,p)<0)&&(l=!0)):!n&&r?(a.track({type:0,doc:r}),e=!0):n&&!r&&(a.track({type:1,doc:n}),e=!0,(f||p)&&(l=!0)),e&&(c=r?(h=h.add(r),o?c.add(t):c.delete(t)):(h=h.delete(t),c.delete(t)))}),Xm(this.query)||Jm(this.query))for(;h.size>this.query.limit;){var n=Xm(this.query)?h.last():h.first(),h=h.delete(n.key),c=c.delete(n.key);a.track({type:1,doc:n})}return{Rh:h,Vh:a,ph:l,Qt:c}},jI.prototype.yh=function(t,e){return t.Je&&e.hasCommittedMutations&&!e.Je},jI.prototype.bi=function(t,e,n){var o=this,r=this.Rh;this.Rh=t.Rh,this.Qt=t.Qt;var i=t.Vh.qt();i.sort(function(t,e){return r=t.type,i=e.type,n(r)-n(i)||o.Ah(t.doc,e.doc);function n(t){switch(t){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Tv()}}var r,i}),this.bh(n);var s=e?this.Sh():[],e=(n=0===this.mh.size&&this.Zt?1:0)!==this.Ih;return this.Ih=n,0!==i.length||e?{snapshot:new Ly(this.query,t.Rh,r,i,t.Qt,0==n,e,!1),Dh:s}:{Dh:s}},jI.prototype.Bs=function(t){return this.Zt&&"Offline"===t?(this.Zt=!1,this.bi({Rh:this.Rh,Vh:new xy,Qt:this.Qt,ph:!1},!1)):{Dh:[]}},jI.prototype.Ch=function(t){return!this.Eh.has(t)&&!!this.Rh.has(t)&&!this.Rh.get(t).Je},jI.prototype.bh=function(t){var e=this;t&&(t.te.forEach(function(t){return e.Eh=e.Eh.add(t)}),t.ee.forEach(function(t){}),t.ne.forEach(function(t){return e.Eh=e.Eh.delete(t)}),this.Zt=t.Zt)},jI.prototype.Sh=function(){var e=this;if(!this.Zt)return[];var n=this.mh;this.mh=Py(),this.Rh.forEach(function(t){e.Ch(t.key)&&(e.mh=e.mh.add(t.key))});var r=[];return n.forEach(function(t){e.mh.has(t)||r.push(new DI(t))}),this.mh.forEach(function(t){n.has(t)||r.push(new RI(t))}),r},jI.prototype.Nh=function(t){return this.Eh=t.Xa,this.mh=Py(),t=this.gh(t.documents),this.bi(t,!0)},jI.prototype.xh=function(){return Ly.jt(this.query,this.Rh,this.Qt,0===this.Ih)},jI),LI=function(t,e,n){this.query=t,this.targetId=e,this.view=n},MI=function(t){this.key=t,this.Fh=!1},FI=(Object.defineProperty(UI.prototype,"Jh",{get:function(){return!0===this.Hh},enumerable:!1,configurable:!0}),UI);function UI(t,e,n,r,i,o){this.Kc=t,this.Oh=e,this.Mh=n,this.kh=r,this.currentUser=i,this.$h=o,this.Lh={},this.Bh=new Fv(a_,s_),this.qh=new Map,this.Uh=[],this.Qh=new yy(Hv.V),this.Kh=new Map,this.Wh=new mI,this.jh={},this.Gh=new Map,this.zh=lE.vo(),this.onlineState="Unknown",this.Hh=void 0}function jI(t,e){this.query=t,this.Eh=e,this.Ih=null,this.Zt=!1,this.mh=Py(),this.Qt=Py(),this.Ah=h_(t),this.Rh=new Dy(this.Ah)}function VI(){this.wh=new kI,this.Th={},this.Oc=null,this.Xi=null}function qI(t,e,n,r,i){this.window=t,this.ln=e,this.persistenceKey=n,this.Pu=r,this.gu=null,this.Oc=null,this.Xi=null,this.Vu=this.yu.bind(this),this.pu=new yy(Av),this.yr=!1,this.vu=[],n=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),this.storage=this.window.localStorage,this.currentUser=i,this.bu=EI(this.persistenceKey,this.Pu),this.Su="firestore_sequence_number_"+this.persistenceKey,this.pu=this.pu.rt(this.Pu,new kI),this.Du=new RegExp("^firestore_clients_"+n+"_([^_]*)$"),this.Cu=new RegExp("^firestore_mutations_"+n+"_(\\d+)(?:_(.*))?$"),this.Nu=new RegExp("^firestore_targets_"+n+"_(\\d+)$"),this.xu="firestore_online_state_"+this.persistenceKey,this.Fu="firestore_bundle_loaded_"+this.persistenceKey,this.window.addEventListener("storage",this.Vu)}function BI(){this.activeTargetIds=Ry}function WI(t,e){this.clientId=t,this.onlineState=e}function KI(t,e){this.clientId=t,this.activeTargetIds=e}function HI(t,e,n){this.targetId=t,this.state=e,this.error=n}function GI(t,e,n,r){this.user=t,this.batchId=e,this.state=n,this.error=r}function zI(i,o,s,a){return po(this,void 0,void 0,function(){var e,n,r;return vo(this,function(t){switch(t.label){case 0:return i.Yh=function(t,e,n){return function(r,i,o,s){return po(this,void 0,void 0,function(){var e,n;return vo(this,function(t){switch(t.label){case 0:return(e=i.view.gh(o)).ph?[4,FE(r.Kc,i.query,!1).then(function(t){return t=t.documents,i.view.gh(t,e)})]:[3,2];case 1:e=t.sent(),t.label=2;case 2:return n=s&&s.Gt.get(i.targetId),n=i.view.bi(e,r.Jh,n),[2,(nT(r,i.targetId,n.Dh),n.snapshot)]}})})}(i,t,e,n)},[4,FE(i.Kc,o,!0)];case 1:return n=t.sent(),r=new xI(o,n.Xa),e=r.gh(n.documents),n=Fy.Xt(s,a&&"Offline"!==i.onlineState),n=r.bi(e,i.Jh,n),nT(i,s,n.Dh),r=new LI(o,s,r),[2,(i.Bh.set(o,r),i.qh.has(s)?i.qh.get(s).push(o):i.qh.set(s,[o]),n.snapshot)]}})})}function QI(f,p,d){return po(this,void 0,void 0,function(){var s,a;return vo(this,function(t){switch(t.label){case 0:a=uT(f),t.label=1;case 1:return t.trys.push([1,5,,6]),[4,(i=a.Kc,u=p,h=i,l=Vv.now(),o=u.reduce(function(t,e){return t.add(e.key)},Py()),h.persistence.runTransaction("Locally write mutations","readwrite",function(a){return h.Ga.Li(a,o).next(function(t){c=t;for(var s,e=[],n=0,r=u;n<r.length;n++){var i=r[n],o=(s=i,o=c.get(i.key),s instanceof Sm?function(t){for(var e=null,n=0,r=s.fieldTransforms;n<r.length;n++){var i=r[n],o=t instanceof qm?t.field(i.field):void 0;null!=(o=Kg(i.transform,o||null))&&(e=(null==e?new Dm:e).set(i.field,o))}return e?e.Ye():null}(o):null);null!=o&&e.push(new bm(i.key,o,function s(t){var a=[];return Rv(t.fields||{},function(t,e){var n=new Kv([t]);if(vg(e))if(0===(e=s(e.mapValue).fields).length)a.push(n);else for(var r=0,i=e;r<i.length;r++){var o=i[r];a.push(n.child(o))}else a.push(n)}),new am(a)}(o.proto.mapValue),lm.exists(!0)))}return h.xi.Qr(a,l,e,u)})}).then(function(t){var e=t.wi(c);return{batchId:t.batchId,Ii:e}}))];case 2:return s=t.sent(),a.kh.qu(s.batchId),e=a,n=s.batchId,r=d,i=(i=(i=e.jh[e.currentUser.Ys()])||new yy(Av)).rt(n,r),e.jh[e.currentUser.Ys()]=i,[4,iT(a,s.Ii)];case 3:return t.sent(),[4,fI(a.Oh)];case 4:return t.sent(),[3,6];case 5:return a=pb(a=t.sent(),"Failed to persist write"),d.reject(a),[3,6];case 6:return[2]}var e,n,r,i,u,c,h,l,o})})}function YI(i,s){return po(this,void 0,void 0,function(){var n,r;return vo(this,function(t){switch(t.label){case 0:n=i,t.label=1;case 1:return t.trys.push([1,4,,6]),[4,(e=n.Kc,h=e,l=(o=s).et,f=h.Qa,h.persistence.runTransaction("Apply remote event","readwrite-primary",function(s){var t=h.ja._o({fo:!0});f=h.Qa;var a=[];o.Gt.forEach(function(t,e){var n,r,i,o=f.get(e);o&&(a.push(h.ra.Ko(s,t.ne,e).next(function(){return h.ra.Uo(s,t.te,e)})),0<(i=t.resumeToken).X()&&(n=o.st(i,l).nt(s.Go),f=f.rt(e,n),r=o,i=t,Sv(0<(o=n).resumeToken.X()),(0===r.resumeToken.X()||3e8<=o.et.R()-r.et.R()||0<i.te.size+i.ee.size+i.ne.size)&&a.push(h.ra.ko(s,n))))});var e,u,n,c,r,i=Sy;return o.Ht.forEach(function(t,e){o.Jt.has(t)&&a.push(h.persistence.Lr.qa(s,t))}),a.push((e=s,u=t,n=o.Ht,c=l,r=Py(),n.forEach(function(t){return r=r.add(t)}),u.getEntries(e,r).next(function(i){var o=Sy;return n.forEach(function(t,e){var n=i.get(t),r=c;e instanceof Bm&&e.version.isEqual(qv.min())?(u.Vi(t,r),o=o.rt(t,e)):null==n||0<e.version.A(n.version)||0===e.version.A(n.version)&&n.hasPendingWrites?(u.Ri(e,r),o=o.rt(t,e)):bv("LocalStore","Ignoring outdated watch update for ",t,". Current version:",n.version," Watch version:",e.version)}),o}).next(function(t){i=t}))),l.isEqual(qv.min())||(e=h.ra.Co(s).next(function(t){return h.ra.xo(s,s.Go,l)}),a.push(e)),K_.xn(a).next(function(){return t.apply(s)}).next(function(){return h.Ga.Bi(s,i)})}).then(function(t){return h.Qa=f,t}))];case 2:return r=t.sent(),s.Gt.forEach(function(t,e){(e=n.Kh.get(e))&&(Sv(t.te.size+t.ee.size+t.ne.size<=1),0<t.te.size?e.Fh=!0:0<t.ee.size?Sv(e.Fh):0<t.ne.size&&(Sv(e.Fh),e.Fh=!1))}),[4,iT(n,r,s)];case 3:return t.sent(),[3,6];case 4:return[4,VE(t.sent())];case 5:return t.sent(),[3,6];case 6:return[2]}var e,o,h,l,f})})}function XI(t,n,e){var r;((t=t).Jh&&0===e||!t.Jh&&1===e)&&(r=[],t.Bh.forEach(function(t,e){(e=e.view.Bs(n)).snapshot&&r.push(e.snapshot)}),function(t,i){t.onlineState=i;var o=!1;t.queries.forEach(function(t,e){for(var n=0,r=e.listeners;n<r.length;n++)r[n].Bs(i)&&(o=!0)}),o&&mb(t)}(t.Mh,n),r.length&&t.Lh.Rc(r),t.onlineState=n,t.Jh&&t.kh.Zu(n))}function JI(o,s){return po(this,void 0,void 0,function(){var n,r,i;return vo(this,function(t){switch(t.label){case 0:uI((n=o).Oh)||bv("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),t.label=1;case 1:return t.trys.push([1,3,,4]),[4,(e=n.Kc).persistence.runTransaction("Get highest unacknowledged batch id","readonly",function(t){return e.xi.zr(t)})];case 2:return-1===(r=t.sent())?[2,void s.resolve()]:((i=n.Gh.get(r)||[]).push(s),n.Gh.set(r,i),[3,4]);case 3:return i=pb(i=t.sent(),"Initialization of waitForPendingWrites() operation failed"),s.reject(i),[3,4];case 4:return[2]}var e})})}function $I(t,e){(t.Gh.get(e)||[]).forEach(function(t){t.resolve()}),t.Gh.delete(e)}function ZI(t,e,n){var r=t,i=r.jh[r.currentUser.Ys()];i&&((t=i.get(e))&&(n?t.reject(n):t.resolve(),i=i.remove(e)),r.jh[r.currentUser.Ys()]=i)}function tT(e,t,n){void 0===n&&(n=null),e.kh.Gu(t);for(var r=0,i=e.qh.get(t);r<i.length;r++){var o=i[r];e.Bh.delete(o),n&&e.Lh.Xh(o,n)}e.qh.delete(t),e.Jh&&e.Wh.du(t).forEach(function(t){e.Wh.so(t)||eT(e,t)})}function eT(t,e){var n=t.Qh.get(e);null!==n&&(rI(t.Oh,n),t.Qh=t.Qh.remove(e),t.Kh.delete(n),rT(t))}function nT(t,e,n){for(var r,i,o=0,s=n;o<s.length;o++){var a=s[o];a instanceof RI?(t.Wh.Qo(a.key,e),r=t,i=(i=a).key,r.Qh.get(i)||(bv("SyncEngine","New document in limbo: "+i),r.Uh.push(i),rT(r))):a instanceof DI?(bv("SyncEngine","Document no longer in limbo: "+a.key),t.Wh.Wo(a.key,e),t.Wh.so(a.key)||eT(t,a.key)):Tv()}}function rT(t){for(;0<t.Uh.length&&t.Qh.size<t.$h;){var e=t.Uh.shift(),n=t.zh.next();t.Kh.set(n,new MI(e)),t.Qh=t.Qh.rt(e,n),nI(t.Oh,new fy(n_(Ym(e.path)),n,2,Bb.nr))}}function iT(e,s,a){return po(this,void 0,void 0,function(){var n,r,i,o;return vo(this,function(t){switch(t.label){case 0:return r=[],i=[],o=[],(n=e).Bh.T()?[3,3]:(n.Bh.forEach(function(t,e){o.push(n.Yh(e,s,a).then(function(t){t&&(n.Jh&&n.kh.Ju(e.targetId,t.fromCache?"not-current":"current"),r.push(t),t=qb.Yi(e.targetId,t),i.push(t))}))}),[4,Promise.all(o)]);case 1:return t.sent(),n.Lh.Rc(r),[4,function(u,c){return po(this,void 0,void 0,function(){var r,e,n,i,o,s,a;return vo(this,function(t){switch(t.label){case 0:r=u,t.label=1;case 1:return t.trys.push([1,3,,4]),[4,r.persistence.runTransaction("notifyLocalViewChanges","readwrite",function(n){return K_.forEach(c,function(e){return K_.forEach(e.Hi,function(t){return r.persistence.Lr.Qo(n,e.targetId,t)}).next(function(){return K_.forEach(e.Ji,function(t){return r.persistence.Lr.Wo(n,e.targetId,t)})})})})];case 2:return t.sent(),[3,4];case 3:if(!Z_(e=t.sent()))throw e;return bv("LocalStore","Failed to update sequence numbers: "+e),[3,4];case 4:for(n=0,i=c;n<i.length;n++)a=i[n],o=a.targetId,a.fromCache||(s=r.Qa.get(o),a=s.et,a=s.it(a),r.Qa=r.Qa.rt(o,a));return[2]}})})}(n.Kc,i)];case 2:t.sent(),t.label=3;case 3:return[2]}})})}function oT(p,d){return po(this,void 0,void 0,function(){var e,n,r,i,o,s,a,u,c,h,l,f;return vo(this,function(t){switch(t.label){case 0:e=p,n=[],r=[],i=0,o=d,t.label=1;case 1:return i<o.length?(s=o[i],a=void 0,(u=e.qh.get(s))&&0!==u.length?[4,LE(e.Kc,n_(u[0]))]:[3,7]):[3,13];case 2:a=t.sent(),c=0,h=u,t.label=3;case 3:return c<h.length?(l=h[c],l=e.Bh.get(l),[4,function(r,i){return po(this,void 0,void 0,function(){var e,n;return vo(this,function(t){switch(t.label){case 0:return[4,FE((e=r).Kc,i.query,!0)];case 1:return n=t.sent(),n=i.view.Nh(n),[2,(e.Jh&&nT(e,i.targetId,n.Dh),n)]}})})}(e,l)]):[3,6];case 4:(l=t.sent()).snapshot&&r.push(l.snapshot),t.label=5;case 5:return c++,[3,3];case 6:return[3,11];case 7:return[4,UE(e.Kc,s)];case 8:return f=t.sent(),[4,LE(e.Kc,f)];case 9:return a=t.sent(),[4,zI(e,sT(f),s,!1)];case 10:t.sent(),t.label=11;case 11:n.push(a),t.label=12;case 12:return i++,[3,1];case 13:return[2,(e.Lh.Rc(r),n)]}})})}function sT(t){return Qm(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function aT(t){return t.Oh.jc.nu=YI.bind(null,t),t.Oh.jc.Be=function(t,e){var n=t;if((t=n.Kh.get(e))&&t.Fh)return Py().add(t.key);var r=Py();if(!(e=n.qh.get(e)))return r;for(var i=0,o=e;i<o.length;i++)var s=o[i],s=n.Bh.get(s),r=r.Ot(s.view.Ph);return r}.bind(null,t),t.Oh.jc.eu=function(o,s,a){return po(this,void 0,void 0,function(){var e,n,r,i;return vo(this,function(t){switch(t.label){case 0:return(e=o).kh.Ju(s,"rejected",a),i=e.Kh.get(s),(n=i&&i.key)?(r=(r=new yy(Hv.V)).rt(n,new Bm(n,qv.min())),i=Py().add(n),i=new My(qv.min(),new Map,new Iy(Av),r,i),[4,YI(e,i)]):[3,2];case 1:return t.sent(),e.Qh=e.Qh.remove(n),e.Kh.delete(s),rT(e),[3,4];case 2:return[4,ME(e.Kc,s,!1).then(function(){return tT(e,s,a)}).catch(VE)];case 3:t.sent(),t.label=4;case 4:return[2]}})})}.bind(null,t),t.Lh.Rc=function(t,e){for(var n=t,r=!1,i=0,o=e;i<o.length;i++){var s=o[i],a=s.query;if(a=n.queries.get(a)){for(var u=0,c=a.listeners;u<c.length;u++)c[u].qs(s)&&(r=!0);a.ks=s}}r&&mb(n)}.bind(null,t.Mh),t.Lh.Xh=function(t,e,n){var r=t;if(t=r.queries.get(e))for(var i=0,o=t.listeners;i<o.length;i++)o[i].onError(n);r.queries.delete(e)}.bind(null,t.Mh),t}function uT(t){return t.Oh.jc.su=function(o,s){return po(this,void 0,void 0,function(){var n,r,i;return vo(this,function(t){switch(t.label){case 0:n=o,r=s.batch.batchId,t.label=1;case 1:return t.trys.push([1,4,,6]),[4,(e=n.Kc,h=s,(l=e).persistence.runTransaction("Acknowledge batch","readwrite-primary",function(t){var r,e=h.batch.keys(),n=l.ja._o({fo:!0}),i=l,o=t,s=n,a=(r=h).batch,u=a.keys(),c=K_.resolve();return u.forEach(function(n){c=c.next(function(){return s.yi(o,n)}).next(function(t){var e=t;Sv(null!==(t=r.Ei.get(n))),(!e||e.version.A(t)<0)&&(e=a._i(n,e,r))&&s.Ri(e,r.Ti)})}),c.next(function(){return i.xi.Yr(o,a)}).next(function(){return n.apply(t)}).next(function(){return l.xi.no(t)}).next(function(){return l.Ga.Li(t,e)})}))];case 2:return i=t.sent(),ZI(n,r,null),$I(n,r),n.kh.Qu(r,"acknowledged"),[4,iT(n,i)];case 3:return t.sent(),[3,6];case 4:return[4,VE(t.sent())];case 5:return t.sent(),[3,6];case 6:return[2]}var e,h,l})})}.bind(null,t),t.Oh.jc.iu=function(s,a,u){return po(this,void 0,void 0,function(){var n,o;return vo(this,function(t){switch(t.label){case 0:n=s,t.label=1;case 1:return t.trys.push([1,4,,6]),[4,(e=n.Kc,r=a,(i=e).persistence.runTransaction("Reject batch","readwrite-primary",function(e){var n;return i.xi.Wr(e,r).next(function(t){return Sv(null!==t),n=t.keys(),i.xi.Yr(e,t)}).next(function(){return i.xi.no(e)}).next(function(){return i.Ga.Li(e,n)})}))];case 2:return o=t.sent(),ZI(n,a,u),$I(n,a),n.kh.Qu(a,"rejected",u),[4,iT(n,o)];case 3:return t.sent(),[3,6];case 4:return[4,VE(t.sent())];case 5:return t.sent(),[3,6];case 6:return[2]}var e,r,i})})}.bind(null,t),t}var cT,hT,lT,fT,pT,dT=($T.prototype.za=function(t){this.Zh=t},$T.prototype.Ui=function(e,r,i,o){var s=this;return 0===r.filters.length&&null===r.limit&&null==r.startAt&&null==r.endAt&&(0===r.rn.length||1===r.rn.length&&r.rn[0].field.B())||i.isEqual(qv.min())?this.tl(e,r):this.Zh.Li(e,o).next(function(t){var n=s.el(r,t);return(Xm(r)||Jm(r))&&s.ph(r.limitType,n,o,i)?s.tl(e,r):(_v()<=Es.DEBUG&&bv("IndexFreeQueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),u_(r)),s.Zh.Ui(e,r,i).next(function(e){return n.forEach(function(t){e=e.rt(t.key,t)}),e}))})},$T.prototype.el=function(n,t){var r=new Iy(h_(n));return t.forEach(function(t,e){e instanceof qm&&c_(n,e)&&(r=r.add(e))}),r},$T.prototype.ph=function(t,e,n,r){return n.size!==e.size||!!(e="F"===t?e.last():e.first())&&(e.hasPendingWrites||0<e.version.A(r))},$T.prototype.tl=function(t,e){return _v()<=Es.DEBUG&&bv("IndexFreeQueryEngine","Using full collection scan to execute query:",u_(e)),this.Zh.Ui(t,e,qv.min())},$T),vT=(JT.prototype.Ur=function(t){return K_.resolve(0===this.xi.length)},JT.prototype.Qr=function(t,e,n,r){var i=this.nl;this.nl++,0<this.xi.length&&this.xi[this.xi.length-1],n=new Ab(i,e,n,r),this.xi.push(n);for(var o=0,s=r;o<s.length;o++){var a=s[o];this.sl=this.sl.add(new _I(a.key,i)),this.Fi.Kr(t,a.key.path.S())}return K_.resolve(n)},JT.prototype.Wr=function(t,e){return K_.resolve(this.il(e))},JT.prototype.Gr=function(t,e){return e+=1,e=(e=this.rl(e))<0?0:e,K_.resolve(this.xi.length>e?this.xi[e]:null)},JT.prototype.zr=function(){return K_.resolve(0===this.xi.length?-1:this.nl-1)},JT.prototype.Hr=function(t){return K_.resolve(this.xi.slice())},JT.prototype.Mi=function(t,e){var n=this,r=new _I(e,0),e=new _I(e,Number.POSITIVE_INFINITY),i=[];return this.sl.Nt([r,e],function(t){t=n.il(t.Eu),i.push(t)}),K_.resolve(i)},JT.prototype.qi=function(t,e){var n=this,r=new Iy(Av);return e.forEach(function(t){var e=new _I(t,0),t=new _I(t,Number.POSITIVE_INFINITY);n.sl.Nt([e,t],function(t){r=r.add(t.Eu)})}),K_.resolve(this.ol(r))},JT.prototype.Gi=function(t,e){var n=e.path,r=n.length+1,e=n;Hv.G(e)||(e=e.child(""));var e=new _I(new Hv(e),0),i=new Iy(Av);return this.sl.xt(function(t){var e=t.key.path;return!!n.N(e)&&(e.length===r&&(i=i.add(t.Eu)),!0)},e),K_.resolve(this.ol(i))},JT.prototype.ol=function(t){var e=this,n=[];return t.forEach(function(t){null!==(t=e.il(t))&&n.push(t)}),n},JT.prototype.Yr=function(n,r){var i=this;Sv(0===this.al(r.batchId,"removed")),this.xi.shift();var o=this.sl;return K_.forEach(r.mutations,function(t){var e=new _I(t.key,r.batchId);return o=o.delete(e),i.Lr.eo(n,t.key)}).next(function(){i.sl=o})},JT.prototype.Zr=function(t){},JT.prototype.so=function(t,e){var n=new _I(e,0),n=this.sl.Ft(n);return K_.resolve(e.isEqual(n&&n.key))},JT.prototype.no=function(t){return this.xi.length,K_.resolve()},JT.prototype.al=function(t,e){return this.rl(t)},JT.prototype.rl=function(t){return 0===this.xi.length?0:t-this.xi[0].batchId},JT.prototype.il=function(t){return(t=this.rl(t))<0||t>=this.xi.length?null:this.xi[t]},JT),yT=(XT.prototype.Ri=function(t,e,n){var r=e.key,i=(o=this.docs.get(r))?o.size:0,o=this.cl(e);return this.docs=this.docs.rt(r,{gi:e,size:o,readTime:n}),this.size+=o-i,this.Fi.Kr(t,r.path.S())},XT.prototype.Vi=function(t){var e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)},XT.prototype.yi=function(t,e){return e=this.docs.get(e),K_.resolve(e?e.gi:null)},XT.prototype.getEntries=function(t,e){var n=this,r=Sy;return e.forEach(function(t){var e=n.docs.get(t);r=r.rt(t,e?e.gi:null)}),K_.resolve(r)},XT.prototype.Ui=function(t,e,n){for(var r=Ay,i=new Hv(e.path.child("")),o=this.docs._t(i);o.It();){var s=(a=o.Et()).key,a=(u=a.value).gi,u=u.readTime;if(!e.path.N(s.path))break;u.A(n)<=0||a instanceof qm&&c_(e,a)&&(r=r.rt(a.key,a))}return K_.resolve(r)},XT.prototype.ul=function(t,e){return K_.forEach(this.docs,function(t){return e(t)})},XT.prototype._o=function(t){return new gT(this)},XT.prototype.wo=function(t){return K_.resolve(this.size)},XT),gT=(lo(YT,pT=Pr),YT.prototype.bi=function(n){var r=this,i=[];return this.Ii.forEach(function(t,e){e&&e.gi?i.push(r.To.Ri(n,e.gi,r.Ai(t))):r.To.Vi(t)}),K_.xn(i)},YT.prototype.pi=function(t,e){return this.To.yi(t,e)},YT.prototype.vi=function(t,e){return this.To.getEntries(t,e)},YT),mT=(QT.prototype.De=function(t,n){return this.hl.forEach(function(t,e){return n(e)}),K_.resolve()},QT.prototype.Co=function(t){return K_.resolve(this.lastRemoteSnapshotVersion)},QT.prototype.No=function(t){return K_.resolve(this.ll)},QT.prototype.bo=function(t){return this.highestTargetId=this.fl.next(),K_.resolve(this.highestTargetId)},QT.prototype.xo=function(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.ll&&(this.ll=e),K_.resolve()},QT.prototype.Oo=function(t){this.hl.set(t.target,t);var e=t.targetId;e>this.highestTargetId&&(this.fl=new lE(e),this.highestTargetId=e),t.sequenceNumber>this.ll&&(this.ll=t.sequenceNumber)},QT.prototype.Fo=function(t,e){return this.Oo(e),this.targetCount+=1,K_.resolve()},QT.prototype.ko=function(t,e){return this.Oo(e),K_.resolve()},QT.prototype.$o=function(t,e){return this.hl.delete(e.target),this._l.du(e.targetId),--this.targetCount,K_.resolve()},QT.prototype.Nr=function(n,r,i){var o=this,s=0,a=[];return this.hl.forEach(function(t,e){e.sequenceNumber<=r&&null===i.get(e.targetId)&&(o.hl.delete(t),a.push(o.Lo(n,e.targetId)),s++)}),K_.xn(a).next(function(){return s})},QT.prototype.Bo=function(t){return K_.resolve(this.targetCount)},QT.prototype.qo=function(t,e){return e=this.hl.get(e)||null,K_.resolve(e)},QT.prototype.Uo=function(t,e,n){return this._l.lu(e,n),K_.resolve()},QT.prototype.Ko=function(e,t,n){this._l.fu(t,n);var r=this.persistence.Lr,i=[];return r&&t.forEach(function(t){i.push(r.eo(e,t))}),K_.xn(i)},QT.prototype.Lo=function(t,e){return this._l.du(e),K_.resolve()},QT.prototype.jo=function(t,e){return e=this._l.Tu(e),K_.resolve(e)},QT.prototype.so=function(t,e){return K_.resolve(this._l.so(e))},QT),_T=(zT.prototype.mo=function(t,e){return K_.resolve(this.dl.get(e))},zT.prototype.Ao=function(t,e){return this.dl.set(e.id,{id:e.id,version:e.version,createTime:Tg(e.createTime)}),K_.resolve()},zT.prototype.Ro=function(t,e){return K_.resolve(this.wl.get(e))},zT.prototype.Po=function(t,e){return this.wl.set(e.name,{name:e.name,query:yw(e.bundledQuery),readTime:Tg(e.readTime)}),K_.resolve()},zT),bT=(GT.prototype.start=function(){return Promise.resolve()},GT.prototype.pa=function(){return this.Yo=!1,Promise.resolve()},Object.defineProperty(GT.prototype,"yr",{get:function(){return this.Yo},enumerable:!1,configurable:!0}),GT.prototype.fa=function(){},GT.prototype.da=function(){},GT.prototype.Oa=function(){return this.Fi},GT.prototype.Na=function(t){var e=this.Tl[t.Ys()];return e||(e=new vT(this.Fi,this.Lr),this.Tl[t.Ys()]=e),e},GT.prototype.xa=function(){return this.ra},GT.prototype.Fa=function(){return this.Ni},GT.prototype.Ma=function(){return this.oa},GT.prototype.runTransaction=function(t,e,n){var r=this;bv("MemoryPersistence","Starting transaction:",t);var i=new wT(this.Jo.next());return this.Lr.Il(),n(i).next(function(t){return r.Lr.ml(i).next(function(){return t})}).Cn().then(function(t){return i.Ci(),t})},GT.prototype.Al=function(e,n){return K_.Fn(Object.values(this.Tl).map(function(t){return function(){return t.so(e,n)}}))},GT),wT=(lo(HT,fT=L),HT),ET=(KT.gl=function(t){return new KT(t)},Object.defineProperty(KT.prototype,"Vl",{get:function(){if(this.Pl)return this.Pl;throw Tv()},enumerable:!1,configurable:!0}),KT.prototype.Qo=function(t,e,n){return this.Rl.Qo(n,e),this.Vl.delete(n.toString()),K_.resolve()},KT.prototype.Wo=function(t,e,n){return this.Rl.Wo(n,e),this.Vl.add(n.toString()),K_.resolve()},KT.prototype.eo=function(t,e){return this.Vl.add(e.toString()),K_.resolve()},KT.prototype.removeTarget=function(t,e){var n=this;this.Rl.du(e.targetId).forEach(function(t){return n.Vl.add(t.toString())});var r=this.persistence.xa();return r.jo(t,e.targetId).next(function(t){t.forEach(function(t){return n.Vl.add(t.toString())})}).next(function(){return r.$o(t,e)})},KT.prototype.Il=function(){this.Pl=new Set},KT.prototype.ml=function(n){var r=this,i=this.persistence.Fa()._o();return K_.forEach(this.Vl,function(t){var e=Hv.K(t);return r.yl(n,e).next(function(t){t||i.Vi(e)})}).next(function(){return r.Pl=null,i.apply(n)})},KT.prototype.qa=function(t,e){var n=this;return this.yl(t,e).next(function(t){t?n.Vl.delete(e.toString()):n.Vl.add(e.toString())})},KT.prototype.El=function(t){return 0},KT.prototype.yl=function(t,e){var n=this;return K_.Fn([function(){return K_.resolve(n.Rl.so(e))},function(){return n.persistence.xa().so(t,e)},function(){return n.persistence.Al(t,e)}])},KT),IT=(WT.prototype.mc=function(t){this.bl=t},WT.prototype.dc=function(t){this.Sl=t},WT.prototype.onMessage=function(t){this.Dl=t},WT.prototype.close=function(){this.vl()},WT.prototype.send=function(t){this.pl(t)},WT.prototype.Cl=function(){this.bl()},WT.prototype.Nl=function(t){this.Sl(t)},WT.prototype.xl=function(t){this.Dl(t)},WT),TT={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},ST=(BT.prototype.xc=function(e,t,n,r){var i=this.kl(e,t);return bv("RestConnection","Sending: ",i,n),t={},this.$l(t,r),this.Ll(e,i,t,n).then(function(t){return bv("RestConnection","Received: ",t),t},function(t){throw Ev("RestConnection",e+" failed with error: ",t,"url: ",i,"request:",n),t})},BT.prototype.Fc=function(t,e,n,r){return this.xc(t,e,n,r)},BT.prototype.$l=function(t,e){if(t["X-Goog-Api-Client"]="gl-js/ fire/8.0.2-20201012233953",t["Content-Type"]="text/plain",e)for(var n in e.ti)e.ti.hasOwnProperty(n)&&(t[n]=e.ti[n])},BT.prototype.kl=function(t,e){return t=TT[t],this.Ol+"/v1/"+e+":"+t},lo(qT,lT=BT),qT.prototype.Ll=function(o,e,s,a){return new Promise(function(n,r){var i=new pv;i.listenOnce(lv.COMPLETE,function(){try{switch(i.getLastErrorCode()){case hv.NO_ERROR:var t=i.getResponseJson();bv("Connection","XHR received:",JSON.stringify(t)),n(t);break;case hv.TIMEOUT:bv("Connection",'RPC "'+o+'" timed out'),r(new jv(Uv.DEADLINE_EXCEEDED,"Request time out"));break;case hv.HTTP_ERROR:var e=i.getStatus();bv("Connection",'RPC "'+o+'" failed with status:',e,"response text:",i.getResponseText()),0<e?(t=i.getResponseJson().error)&&t.status&&t.message?(e=t.status.toLowerCase().replace("_","-"),e=0<=Object.values(Uv).indexOf(e)?e:Uv.UNKNOWN,r(new jv(e,t.message))):r(new jv(Uv.UNKNOWN,"Server responded with status "+i.getStatus())):r(new jv(Uv.UNAVAILABLE,"Connection failed."));break;default:Tv()}}finally{bv("Connection",'RPC "'+o+'" completed.')}});var t=JSON.stringify(a);i.send(e,"POST",t,s,15)})},qT.prototype.Ac=function(t,e){var n=[this.Ol,"/","google.firestore.v1.Firestore","/",t,"/channel"],r=new ov,t={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.t.projectId+"/databases/"+this.t.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.i};this.$l(t.initMessageHeaders,e),Po()||Do()||0<=Oo().indexOf("Electron/")||0<=(e=Oo()).indexOf("MSIE ")||0<=e.indexOf("Trident/")||0<=Oo().indexOf("MSAppHost/")||Ro()||(t.httpHeadersOverwriteParam="$httpHeaders"),bv("Connection","Creating WebChannel: "+(n=n.join("")),t);var o=r.createWebChannel(n,t),i=!1,s=!1,a=new IT({pl:function(t){s?bv("Connection","Not sending because WebChannel is closed:",t):(i||(bv("Connection","Opening WebChannel transport."),o.open(),i=!0),bv("Connection","WebChannel sending:",t),o.send(t))},vl:function(){return o.close()}});return(t=function(t,e){o.listen(t,function(t){try{e(t)}catch(t){setTimeout(function(){throw t},0)}})})(fv.EventType.OPEN,function(){s||bv("Connection","WebChannel transport opened.")}),t(fv.EventType.CLOSE,function(){s||(s=!0,bv("Connection","WebChannel transport closed"),a.Nl())}),t(fv.EventType.ERROR,function(t){s||(s=!0,Ev("Connection","WebChannel transport errored:",t),a.Nl(new jv(Uv.UNAVAILABLE,"The operation could not be completed")))}),t(fv.EventType.MESSAGE,function(t){var e,n,r,i;s||(Sv(!!(e=t.data[0])),(n=e.error||(null===(i=e[0])||void 0===i?void 0:i.error))?(bv("Connection","WebChannel received error:",n),r=n.status,t=function(){var t=ly[r];if(void 0!==t)return vy(t)}(),i=n.message,void 0===t&&(t=Uv.INTERNAL,i="Unknown error status: "+r+" with message "+n.message),s=!0,a.Nl(new jv(t,i)),o.close()):(bv("Connection","WebChannel received:",e),a.xl(e)))}),setTimeout(function(){a.Cl()},0),a},qT),CT=(VT.prototype.Xc=function(t){this.Kl.push(t)},VT.prototype.pa=function(){window.removeEventListener("online",this.Bl),window.removeEventListener("offline",this.Ul)},VT.prototype.Wl=function(){window.addEventListener("online",this.Bl),window.addEventListener("offline",this.Ul)},VT.prototype.ql=function(){bv("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var t=0,e=this.Kl;t<e.length;t++)(0,e[t])(0)},VT.prototype.Ql=function(){bv("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var t=0,e=this.Kl;t<e.length;t++)(0,e[t])(1)},VT.kn=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},VT),NT=(jT.prototype.Xc=function(t){},jT.prototype.pa=function(){},jT),AT=(UT.prototype.initialize=function(e){return po(this,void 0,void 0,function(){return vo(this,function(t){switch(t.label){case 0:return this.serializer=Fb(e.Fl.t),this.kh=this.jl(e),this.persistence=this.Gl(e),[4,this.persistence.start()];case 1:return t.sent(),this.zl=this.Hl(e),this.Kc=this.Jl(e),[2]}})})},UT.prototype.Hl=function(t){return null},UT.prototype.Jl=function(t){return RE(this.persistence,new dT,t.Yl,this.serializer)},UT.prototype.Gl=function(t){return new bT(ET.gl,this.serializer)},UT.prototype.jl=function(t){return new PI},UT.prototype.terminate=function(){return po(this,void 0,void 0,function(){return vo(this,function(t){switch(t.label){case 0:return this.zl&&this.zl.stop(),[4,this.kh.pa()];case 1:return t.sent(),[4,this.persistence.pa()];case 2:return t.sent(),[2]}})})},UT),kT=(lo(FT,hT=AT),FT.prototype.initialize=function(e){return po(this,void 0,void 0,function(){return vo(this,function(t){switch(t.label){case 0:return[4,hT.prototype.initialize.call(this,e)];case 1:return t.sent(),[4,function(n){return po(this,void 0,void 0,function(){var e;return vo(this,function(t){return[2,(e=n).persistence.runTransaction("Synchronize last document change read time","readonly",function(t){return t=Ow(t),r=qv.min(),t.ns({index:zw.readTimeIndex,reverse:!0},function(t,e,n){e.readTime&&(r=hw(e.readTime)),n.done()}).next(function(){return r});var r}).then(function(t){e.Wa=t})]})})}(this.Kc)];case 2:return t.sent(),[4,this.Xl.initialize(this,e)];case 3:return t.sent(),[4,uT(this.Xl.gu)];case 4:return t.sent(),[4,fI(this.Xl.Oh)];case 5:return t.sent(),[2]}})})},FT.prototype.Jl=function(t){return RE(this.persistence,new dT,t.Yl,this.serializer)},FT.prototype.Hl=function(t){var e=this.persistence.Lr.Rr;return new Zb(e,t.rs)},FT.prototype.Gl=function(t){var e=kE(t.Fl.t,t.Fl.persistenceKey),n=void 0!==this.cacheSizeBytes?Xb.Tr(this.cacheSizeBytes):Xb.mr;return new wE(this.synchronizeTabs,e,t.clientId,n,t.rs,ab(),ub(),this.serializer,this.kh,!!this.forceOwnership)},FT.prototype.jl=function(t){return new PI},FT),OT=(lo(MT,cT=kT),MT.prototype.initialize=function(r){return po(this,void 0,void 0,function(){var e,n=this;return vo(this,function(t){switch(t.label){case 0:return[4,cT.prototype.initialize.call(this,r)];case 1:return t.sent(),e=this.Xl.gu,this.kh instanceof OI?(this.kh.gu={_h:function(a,u,c,h){return po(this,void 0,void 0,function(){var o,s;return vo(this,function(t){switch(t.label){case 0:return[4,(e=(o=a).Kc,n=u,i=(r=e).xi,r.persistence.runTransaction("Lookup mutation documents","readonly",function(e){return i.jr(e,n).next(function(t){return t?r.Ga.Li(e,t):K_.resolve(null)})}))];case 1:return null===(s=t.sent())?[3,6]:"pending"!==c?[3,3]:[4,fI(o.Oh)];case 2:return t.sent(),[3,4];case 3:"acknowledged"===c||"rejected"===c?(ZI(o,u,h||null),$I(o,u),o.Kc.xi.Zr(u)):Tv(),t.label=4;case 4:return[4,iT(o,s)];case 5:return t.sent(),[3,7];case 6:bv("SyncEngine","Cannot apply mutation batch with id: "+u),t.label=7;case 7:return[2]}var e,n,r,i})})}.bind(null,e),fh:function(i,o,s,a){return po(this,void 0,void 0,function(){var e,n,r;return vo(this,function(t){switch(t.label){case 0:return(e=i).Hh?(bv("SyncEngine","Ignoring unexpected query state notification."),[3,8]):[3,1];case 1:if(!e.qh.has(o))return[3,8];switch(s){case"current":case"not-current":return[3,2];case"rejected":return[3,5]}return[3,7];case 2:return[4,jE(e.Kc)];case 3:return n=t.sent(),r=My.Yt(o,"current"===s),[4,iT(e,n,r)];case 4:return t.sent(),[3,8];case 5:return[4,ME(e.Kc,o,!0)];case 6:return t.sent(),tT(e,o,a),[3,8];case 7:Tv(),t.label=8;case 8:return[2]}})})}.bind(null,e),dh:function(c,h,l){return po(this,void 0,void 0,function(){var n,e,r,i,o,s,a,u;return vo(this,function(t){switch(t.label){case 0:if(!(n=aT(c)).Hh)return[3,10];e=0,r=h,t.label=1;case 1:return e<r.length?(r=r[e],n.qh.has(r)?(bv("SyncEngine","Adding an already active target "+r),[3,5]):[4,UE(n.Kc,r)]):[3,6];case 2:return i=t.sent(),[4,LE(n.Kc,i)];case 3:return o=t.sent(),[4,zI(n,sT(i),o.targetId,!1)];case 4:t.sent(),nI(n.Oh,o),t.label=5;case 5:return e++,[3,1];case 6:s=function(e){return vo(this,function(t){switch(t.label){case 0:return n.qh.has(e)?[4,ME(n.Kc,e,!1).then(function(){rI(n.Oh,e),tT(n,e)}).catch(VE)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})},a=0,u=l,t.label=7;case 7:return a<u.length?(u=u[a],[5,s(u)]):[3,10];case 8:t.sent(),t.label=9;case 9:return a++,[3,7];case 10:return[2]}})})}.bind(null,e),Ca:function(t){return t.Kc.persistence.Ca()}.bind(null,e),lh:function(n){return po(this,void 0,void 0,function(){var e;return vo(this,function(t){return[2,jE((e=n).Kc).then(function(t){return iT(e,t)})]})})}.bind(null,e)},[4,this.kh.start()]):[3,3];case 2:t.sent(),t.label=3;case 3:return[4,this.persistence._a(function(e){return po(n,void 0,void 0,function(){return vo(this,function(t){switch(t.label){case 0:return[4,function(h,l){return po(this,void 0,void 0,function(){var r,e,i,o,s,a,u,c;return vo(this,function(t){switch(t.label){case 0:return aT(r=h),uT(r),!0!==l||!0===r.Hh?[3,3]:(e=r.kh.$u(),[4,oT(r,e.O())]);case 1:return i=t.sent(),r.Hh=!0,[4,vI(r.Oh,!0)];case 2:for(t.sent(),o=0,s=i;o<s.length;o++)a=s[o],nI(r.Oh,a);return[3,7];case 3:return!1!==l||!1===r.Hh?[3,7]:(u=[],c=Promise.resolve(),r.qh.forEach(function(t,e){r.kh.zu(e)?u.push(e):c=c.then(function(){return tT(r,e),ME(r.Kc,e,!0)}),rI(r.Oh,e)}),[4,c]);case 4:return t.sent(),[4,oT(r,u)];case 5:return t.sent(),(n=r).Kh.forEach(function(t,e){rI(n.Oh,e)}),n.Wh.wu(),n.Kh=new Map,n.Qh=new yy(Hv.V),r.Hh=!1,[4,vI(r.Oh,!1)];case 6:t.sent(),t.label=7;case 7:return[2]}var n})})}(this.Xl.gu,e)];case 1:return t.sent(),this.zl&&(e&&!this.zl.yr?this.zl.start(this.Kc):e||this.zl.stop()),[2]}})})})];case 4:return t.sent(),[2]}})})},MT.prototype.jl=function(t){var e=ab();if(!OI.kn(e))throw new jv(Uv.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=kE(t.Fl.t,t.Fl.persistenceKey);return new OI(e,t.rs,n,t.clientId,t.Yl)},MT),PT=(LT.prototype.initialize=function(n,r){return po(this,void 0,void 0,function(){var e=this;return vo(this,function(t){switch(t.label){case 0:return this.Kc?[3,2]:(this.Kc=n.Kc,this.kh=n.kh,this.Wc=this.Zl(r),this.Oh=this.t_(r),this.Mh=this.e_(r),this.gu=this.n_(r,!n.synchronizeTabs),this.kh.Oc=function(t){return XI(e.gu,t,1)},this.Oh.jc.s_=function(i,o){return po(this,void 0,void 0,function(){var n,r;return vo(this,function(t){switch(t.label){case 0:return(n=i).currentUser.isEqual(o)?[3,3]:(bv("SyncEngine","User change. New user:",o.Ys()),[4,DE(n.Kc,o)]);case 1:return r=t.sent(),n.currentUser=o,(e=n).Gh.forEach(function(t){t.forEach(function(t){t.reject(new jv(Uv.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),e.Gh.clear(),n.kh.Xu(o,r.Ja,r.Ya),[4,iT(n,r.Ha)];case 2:t.sent(),t.label=3;case 3:return[2]}var e})})}.bind(null,this.gu),[4,vI(this.Oh,this.gu.Jh)]);case 1:t.sent(),t.label=2;case 2:return[2]}})})},LT.prototype.e_=function(t){return new db},LT.prototype.Zl=function(t){var e=Fb(t.Fl.t),n=(n=t.Fl,new ST(n));return t=t.credentials,new zE(t,n,e)},LT.prototype.t_=function(t){var e=this;return new qE(this.Kc,this.Wc,t.rs,function(t){return XI(e.gu,t,0)},t=new(CT.kn()?CT:NT))},LT.prototype.n_=function(t,e){return n=this.Kc,r=this.Oh,i=this.Mh,o=this.kh,s=t.Yl,t=t.$h,e=e,t=new FI(n,r,i,o,s,t),e&&(t.Hh=!0),t;var n,r,i,o,s},LT.prototype.terminate=function(){return function(n){return po(this,void 0,void 0,function(){var e;return vo(this,function(t){switch(t.label){case 0:return e=n,bv("RemoteStore","RemoteStore shutting down."),e.Hc.add(5),[4,eI(e)];case 1:return t.sent(),e.Yc.pa(),e.Zc.set("Unknown"),[2]}})})}(this.Oh)},LT),RT=(xT.prototype.next=function(t){this.observer.next&&this.i_(this.observer.next,t)},xT.prototype.error=function(t){this.observer.error?this.i_(this.observer.error,t):console.error("Uncaught Error in snapshot listener:",t)},xT.prototype.r_=function(){this.muted=!0},xT.prototype.i_=function(t,e){var n=this;this.muted||setTimeout(function(){n.muted||t(e)},0)},xT),DT=function(t){this.o_=t};function xT(t){this.observer=t,this.muted=!1}function LT(){}function MT(t,e){var n=this;return(n=cT.call(this,t,e,!1)||this).Xl=t,n.cacheSizeBytes=e,n.synchronizeTabs=!0,n}function FT(t,e,n){var r=this;return(r=hT.call(this)||this).Xl=t,r.cacheSizeBytes=e,r.forceOwnership=n,r.synchronizeTabs=!1,r}function UT(){this.synchronizeTabs=!1}function jT(){}function VT(){var t=this;this.Bl=function(){return t.ql()},this.Ul=function(){return t.Ql()},this.Kl=[],this.Wl()}function qT(t){var e=this;return(e=lT.call(this,t)||this).forceLongPolling=t.forceLongPolling,e.i=t.i,e}function BT(t){this.Fl=t,this.t=t.t;var e=t.ssl?"https":"http";this.Ol=e+"://"+t.host,this.Ml="projects/"+this.t.projectId+"/databases/"+this.t.database+"/documents"}function WT(t){this.pl=t.pl,this.vl=t.vl}function KT(t){this.persistence=t,this.Rl=new mI,this.Pl=null}function HT(t){var e=this;return(e=fT.call(this)||this).Go=t,e}function GT(t,e){var n=this;this.Tl={},this.Jo=new Bb(0),this.Yo=!1,this.Yo=!0,this.Lr=t(this),this.ra=new mT(this),this.Fi=new Dw,this.Ni=(t=this.Fi,new yT(t,function(t){return n.Lr.El(t)})),this.serializer=new sw(e),this.oa=new _T(this.serializer)}function zT(t){this.serializer=t,this.dl=new Map,this.wl=new Map}function QT(t){this.persistence=t,this.hl=new Fv(oy,sy),this.lastRemoteSnapshotVersion=qv.min(),this.highestTargetId=0,this.ll=0,this._l=new mI,this.targetCount=0,this.fl=lE.po()}function YT(t){var e=this;return(e=pT.call(this)||this).To=t,e}function XT(t,e){this.Fi=t,this.cl=e,this.docs=new yy(Hv.V),this.size=0}function JT(t,e){this.Fi=t,this.Lr=e,this.xi=[],this.nl=1,this.sl=new Iy(_I.cu)}function $T(){}function ZT(t,e,n){if(!n)throw new jv(Uv.INVALID_ARGUMENT,"Function "+t+"() cannot be called with an empty "+e+".")}function tS(t,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new jv(Uv.INVALID_ARGUMENT,"Invalid options passed to function "+t+'(): You cannot specify both "merge" and "mergeFields".');return e}function eS(t,e,n,r){if(!0===e&&!0===r)throw new jv(Uv.INVALID_ARGUMENT,t+" and "+n+" cannot be used together.")}function nS(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return 20<e.length&&(e=e.substring(0,20)+"..."),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"!=typeof e)return"function"==typeof e?"a function":Tv();if(e instanceof Array)return"an array";var t=function(){if(e.constructor){var t=/function\s+([^\s(]+)\s*\(/.exec(e.constructor.toString());if(t&&1<t.length)return t[1]}return null}();return t?"a custom "+t+" object":"an object"}function rS(t,e){if(t instanceof DT&&(t=t.o_),t instanceof e)return t;if(e.name===t.constructor.name)throw new jv(Uv.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");throw t=nS(t),new jv(Uv.INVALID_ARGUMENT,"Expected type '"+e.name+"', but it was: "+t)}function iS(t,e){if(e<=0)throw new jv(Uv.INVALID_ARGUMENT,"Function "+t+"() requires a positive number, but it was: "+e+".")}var oS,sS=function(t){this.a_=t},aS=(lo(uS,oS=sS),uS.prototype.c_=function(t){if(2!==t.u_)throw 1===t.u_?t.h_(this.a_+"() can only appear at the top level of your update data"):t.h_(this.a_+"() cannot be used with set() unless you pass {merge:true}");return t.Qe.push(t.path),null},uS.prototype.isEqual=function(t){return t instanceof uS},uS);function uS(){return null!==oS&&oS.apply(this,arguments)||this}function cS(t,e,n){return new oC({u_:3,l_:e.settings.l_,methodName:t.a_,__:n},e.t,e.serializer,e.ignoreUndefinedProperties)}var hS,lS,fS,pS,dS=(lo(AS,pS=sS),AS.prototype.c_=function(t){return new um(t.path,new zg)},AS.prototype.isEqual=function(t){return t instanceof AS},AS),vS=(lo(NS,fS=sS),NS.prototype.c_=function(t){var e=cS(this,t,!0),n=this.f_.map(function(t){return pC(t,e)}),n=new Qg(n);return new um(t.path,n)},NS.prototype.isEqual=function(t){return this===t},NS),yS=(lo(CS,lS=sS),CS.prototype.c_=function(t){var e=cS(this,t,!0),n=this.f_.map(function(t){return pC(t,e)}),n=new Zg(n);return new um(t.path,n)},CS.prototype.isEqual=function(t){return this===t},CS),gS=(lo(SS,hS=sS),SS.prototype.c_=function(t){var e=new rm(t.serializer,wg(t.serializer,this.d_));return new um(t.path,e)},SS.prototype.isEqual=function(t){return this===t},SS),mS=(Object.defineProperty(TS.prototype,"latitude",{get:function(){return this.w_},enumerable:!1,configurable:!0}),Object.defineProperty(TS.prototype,"longitude",{get:function(){return this.T_},enumerable:!1,configurable:!0}),TS.prototype.isEqual=function(t){return this.w_===t.w_&&this.T_===t.T_},TS.prototype.toJSON=function(){return{latitude:this.w_,longitude:this.T_}},TS.prototype.I=function(t){return Av(this.w_,t.w_)||Av(this.T_,t.T_)},TS),_S=(IS.fromBase64String=function(t){try{return new IS(uy.fromBase64String(t))}catch(t){throw new jv(Uv.INVALID_ARGUMENT,"Failed to construct Bytes from Base64 string: "+t)}},IS.fromUint8Array=function(t){return new IS(uy.fromUint8Array(t))},IS.prototype.toBase64=function(){return this.E_.toBase64()},IS.prototype.toUint8Array=function(){return this.E_.toUint8Array()},IS.prototype.toString=function(){return"Bytes(base64: "+this.toBase64()+")"},IS.prototype.isEqual=function(t){return this.E_.isEqual(t.E_)},IS),bS=new Map,wS=(ES.prototype.isEqual=function(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties},ES);function ES(t){var e;if(void 0===t.host){if(void 0!==t.ssl)throw new jv(Uv.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(e=t.ssl)||void 0===e||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new jv(Uv.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,eS("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}function IS(t){this.E_=t}function TS(t,e){if(!isFinite(t)||t<-90||90<t)throw new jv(Uv.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||180<e)throw new jv(Uv.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this.w_=t,this.T_=e}function SS(t,e){var n=this;return(n=hS.call(this,t)||this).d_=e,n}function CS(t,e){var n=this;return(n=lS.call(this,t)||this).f_=e,n}function NS(t,e){var n=this;return(n=fS.call(this,t)||this).f_=e,n}function AS(){return null!==pS&&pS.apply(this,arguments)||this}function kS(){if("undefined"==typeof Uint8Array)throw new jv(Uv.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function OS(){if("undefined"==typeof atob)throw new jv(Uv.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var PS,RS,DS,xS=(lo(qS,DS=_S),qS.fromBase64String=function(t){OS();try{return new qS(uy.fromBase64String(t))}catch(t){throw new jv(Uv.INVALID_ARGUMENT,"Failed to construct Blob from Base64 string: "+t)}},qS.fromUint8Array=function(t){return kS(),new qS(uy.fromUint8Array(t))},qS.prototype.toBase64=function(){return OS(),DS.prototype.toBase64.call(this)},qS.prototype.toUint8Array=function(){return kS(),DS.prototype.toUint8Array.call(this)},qS.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},qS),Pr=(VS.prototype.I_=function(t,e){switch(void 0===e&&(e="none"),eg(t)){case 0:return null;case 1:return t.booleanValue;case 2:return ug(t.integerValue||t.doubleValue);case 3:return this.m_(t.timestampValue);case 4:return this.A_(t,e);case 5:return t.stringValue;case 6:return this.R_(cg(t.bytesValue));case 7:return this.P_(t.referenceValue);case 8:return this.g_(t.geoPointValue);case 9:return this.V_(t.arrayValue,e);case 10:return this.y_(t.mapValue,e);default:throw Tv()}},VS.prototype.y_=function(t,n){var r=this,i={};return Rv(t.fields||{},function(t,e){i[t]=r.I_(e,n)}),i},VS.prototype.g_=function(t){return new mS(ug(t.latitude),ug(t.longitude))},VS.prototype.V_=function(t,e){var n=this;return(t.values||[]).map(function(t){return n.I_(t,e)})},VS.prototype.A_=function(t,e){switch(e){case"previous":var n=function t(e){return $y(e=e.mapValue.fields.__previous_value__)?t(e):e}(t);return null==n?null:this.I_(n,e);case"estimate":return this.m_(Zy(t));default:return null}},VS.prototype.m_=function(t){return t=ag(t),new Vv(t.seconds,t.nanos)},VS.prototype.p_=function(t,e){var n=Bv.k(t);return Sv(Wg(n)),t=new vv(n.get(1),n.get(3)),n=new Hv(n.v(5)),t.isEqual(e)||wv("Document "+n+" contains a document reference within a different database ("+t.projectId+"/"+t.database+") which is not supported. It will be treated as a reference in the current database ("+e.projectId+"/"+e.database+") instead."),n},VS),LS=(lo(jS,RS=Pr),jS.prototype.R_=function(t){return new xS(t)},jS.prototype.P_=function(t){return t=this.p_(t,this.firestore.v_),yN.b_(t,this.firestore,null)},jS),L=(Object.defineProperty(US.prototype,"id",{get:function(){return this.C_.path.C()},enumerable:!1,configurable:!0}),Object.defineProperty(US.prototype,"ref",{get:function(){return new HS(this.S_,this.x_,this.C_)},enumerable:!1,configurable:!0}),US.prototype.exists=function(){return null!==this.N_},US.prototype.data=function(){if(this.N_){if(this.x_){var t=new MS(this.S_,this.D_,this.C_,this.N_,null);return this.x_.fromFirestore(t)}return this.D_.I_(this.N_.sn())}},US.prototype.get=function(t){if(this.N_&&null!==(t=this.N_.data().field(BS("DocumentSnapshot.get",t))))return this.D_.I_(t)},US),MS=(lo(FS,PS=L),FS.prototype.data=function(){return PS.prototype.data.call(this)},FS);function FS(){return null!==PS&&PS.apply(this,arguments)||this}function US(t,e,n,r,i){this.S_=t,this.D_=e,this.C_=n,this.N_=r,this.x_=i}function jS(t){var e=this;return(e=RS.call(this)||this).firestore=t,e}function VS(){}function qS(){return null!==DS&&DS.apply(this,arguments)||this}function BS(t,e){return"string"==typeof e?_C(t,e):(e instanceof DT?e.o_:e).F_}var WS,KS=(JS.prototype.isEqual=function(t){return this.F_.isEqual(t.F_)},JS),HS=(Object.defineProperty(XS.prototype,"O_",{get:function(){return this.C_.path},enumerable:!1,configurable:!0}),Object.defineProperty(XS.prototype,"id",{get:function(){return this.C_.path.C()},enumerable:!1,configurable:!0}),Object.defineProperty(XS.prototype,"path",{get:function(){return this.C_.path.M()},enumerable:!1,configurable:!0}),Object.defineProperty(XS.prototype,"parent",{get:function(){return new zS(this.firestore,this.x_,this.C_.path.S())},enumerable:!1,configurable:!0}),XS.prototype.withConverter=function(t){return new XS(this.firestore,t,this.C_)},XS),GS=(YS.prototype.withConverter=function(t){return new YS(this.firestore,t,this.M_)},YS),zS=(lo(QS,WS=GS),Object.defineProperty(QS.prototype,"id",{get:function(){return this.M_.path.C()},enumerable:!1,configurable:!0}),Object.defineProperty(QS.prototype,"path",{get:function(){return this.M_.path.M()},enumerable:!1,configurable:!0}),Object.defineProperty(QS.prototype,"parent",{get:function(){var t=this.O_.S();return t.T()?null:new HS(this.firestore,null,new Hv(t))},enumerable:!1,configurable:!0}),QS.prototype.withConverter=function(t){return new QS(this.firestore,t,this.O_)},QS);function QS(t,e,n){var r=this;return(r=WS.call(this,t,e,Ym(n))||this).firestore=t,r.O_=n,r.type="collection",r}function YS(t,e,n){this.x_=e,this.M_=n,this.type="query",this.firestore=t}function XS(t,e,n){this.x_=e,this.C_=n,this.type="document",this.firestore=t}function JS(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=0;n<t.length;++n)if(0===t[n].length)throw new jv(Uv.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this.F_=new Kv(t)}function $S(t){var e=t.k_(),n=Fb(t.v_);return new sC(t.v_,!!e.ignoreUndefinedProperties,n)}var ZS=/^__.*__$/,tC=(rC.prototype.L_=function(t,e){var n=[];return null!==this.Qe?n.push(new bm(t,this.data,this.Qe,e)):n.push(new _m(t,this.data,e)),0<this.fieldTransforms.length&&n.push(new Sm(t,this.fieldTransforms)),n},rC),eC=(nC.prototype.L_=function(t,e){return e=[new bm(t,this.data,this.Qe,e)],0<this.fieldTransforms.length&&e.push(new Sm(t,this.fieldTransforms)),e},nC);function nC(t,e,n){this.data=t,this.Qe=e,this.fieldTransforms=n}function rC(t,e,n){this.data=t,this.Qe=e,this.fieldTransforms=n}function iC(t){switch(t){case 0:case 2:case 1:return 1;case 3:case 4:return;default:throw Tv()}}var oC=(Object.defineProperty(uC.prototype,"path",{get:function(){return this.settings.path},enumerable:!1,configurable:!0}),Object.defineProperty(uC.prototype,"u_",{get:function(){return this.settings.u_},enumerable:!1,configurable:!0}),uC.prototype.q_=function(t){return new uC(Object.assign(Object.assign({},this.settings),t),this.t,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.Qe)},uC.prototype.U_=function(t){var e=null===(e=this.path)||void 0===e?void 0:e.child(t);return(e=this.q_({path:e,__:!1})).Q_(t),e},uC.prototype.K_=function(t){var e,t=null===(e=this.path)||void 0===e?void 0:e.child(t);return(t=this.q_({path:t,__:!1})).B_(),t},uC.prototype.W_=function(t){return this.q_({path:void 0,__:!0})},uC.prototype.h_=function(t){return bC(t,this.settings.methodName,this.settings.j_||!1,this.path,this.settings.l_)},uC.prototype.contains=function(e){return void 0!==this.Qe.find(function(t){return e.N(t)})||void 0!==this.fieldTransforms.find(function(t){return e.N(t.field)})},uC.prototype.B_=function(){if(this.path)for(var t=0;t<this.path.length;t++)this.Q_(this.path.get(t))},uC.prototype.Q_=function(t){if(0===t.length)throw this.h_("Document fields must not be empty");if(iC(this.u_)&&ZS.test(t))throw this.h_('Document fields cannot begin and end with "__"')},uC),sC=(aC.prototype.G_=function(t,e,n,r){return void 0===r&&(r=!1),new oC({u_:t,methodName:e,l_:n,path:Kv.$(),__:!1,j_:r},this.t,this.serializer,this.ignoreUndefinedProperties)},aC);function aC(t,e,n){this.t=t,this.ignoreUndefinedProperties=e,this.serializer=n||Fb(t)}function uC(t,e,n,r,i,o){this.settings=t,this.t=e,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===i&&this.B_(),this.fieldTransforms=i||[],this.Qe=o||[]}function cC(t,e,n,r,i,o){void 0===o&&(o={});var s=t.G_(o.merge||o.mergeFields?2:0,e,n,i);yC("Data must be an object, but it was:",s,r);var a,u,r=dC(r,s);if(o.merge)a=new am(s.Qe),u=s.fieldTransforms;else if(o.mergeFields){for(var c=[],h=0,l=o.mergeFields;h<l.length;h++){var f=gC(e,l[h],n);if(!s.contains(f))throw new jv(Uv.INVALID_ARGUMENT,"Field '"+f+"' is specified in your field mask but missing from your input data.");wC(c,f)||c.push(f)}a=new am(c),u=s.fieldTransforms.filter(function(t){return a.He(t.field)})}else a=null,u=s.fieldTransforms;return new tC(new Rm(r),a,u)}function hC(t,r,i,e){var o=t.G_(1,r,i);yC("Data must be an object, but it was:",o,e);var s=[],a=new Dm;return Rv(e,function(t,e){var n=_C(r,t,i);e instanceof DT&&(e=e.o_),t=o.K_(n),e instanceof aS?s.push(n):null!=(t=pC(e,t))&&(s.push(n),a.set(n,t))}),e=new am(s),new eC(a.Ye(),e,o.fieldTransforms)}function lC(t,e,n,r,i,o){var s=t.G_(1,e,n),a=[gC(e,r,n)],u=[i];if(o.length%2!=0)throw new jv(Uv.INVALID_ARGUMENT,"Function "+e+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var c=0;c<o.length;c+=2)a.push(gC(e,o[c])),u.push(o[c+1]);for(var h,l,f,p=[],d=new Dm,v=a.length-1;0<=v;--v)wC(p,a[v])||(h=a[v],(l=u[v])instanceof DT&&(l=l.o_),f=s.K_(h),l instanceof aS?p.push(h):null!=(f=pC(l,f))&&(p.push(h),d.set(h,f)));return i=new am(p),new eC(d.Ye(),i,s.fieldTransforms)}function fC(t,e,n,r){return void 0===r&&(r=!1),pC(n,t.G_(r?4:3,e))}function pC(s,t){if(s instanceof DT&&(s=s.o_),vC(s))return yC("Unsupported field value:",t,s),dC(s,t);if(s instanceof sS)return function(t,e){if(!iC(e.u_))throw e.h_(t.a_+"() can only be used with update() and set()");if(!e.path)throw e.h_(t.a_+"() is not currently supported inside arrays");(t=t.c_(e))&&e.fieldTransforms.push(t)}(s,t),null;if(t.path&&t.Qe.push(t.path),s instanceof Array){if(t.settings.__&&4!==t.u_)throw t.h_("Nested arrays are not supported");return function(t){for(var e=[],n=0,r=0,i=s;r<i.length;r++){var o=pC(i[r],t.W_(n));null==o&&(o={nullValue:"NULL_VALUE"}),e.push(o),n++}return{arrayValue:{values:e}}}(t)}return function(t,e){if(t instanceof DT&&(t=t.o_),null===t)return{nullValue:"NULL_VALUE"};if("number"==typeof t)return wg(e.serializer,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){var n=Vv.fromDate(t);return{timestampValue:Eg(e.serializer,n)}}if(t instanceof Vv){var r=new Vv(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:Eg(e.serializer,r)}}if(t instanceof mS)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof _S)return{bytesValue:Ig(e.serializer,t.E_)};if(t instanceof HS){if(n=e.t,!(r=t.firestore.v_).isEqual(n))throw e.h_("Document reference is for database "+r.projectId+"/"+r.database+" but should be for database "+n.projectId+"/"+n.database);return{referenceValue:Sg(t.firestore.v_||e.t,t.C_.path)}}if(void 0===t&&e.ignoreUndefinedProperties)return null;throw e.h_("Unsupported field value: "+nS(t))}(s,t)}function dC(t,n){var r={};return Dv(t)?n.path&&0<n.path.length&&n.Qe.push(n.path):Rv(t,function(t,e){null!=(e=pC(e,n.U_(t)))&&(r[t]=e)}),{mapValue:{fields:r}}}function vC(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof Vv||t instanceof mS||t instanceof _S||t instanceof HS||t instanceof sS)}function yC(t,e,n){if(!vC(n)||"object"!=typeof(r=n)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r))throw"an object"===(n=nS(n))?e.h_(t+" a custom object"):e.h_(t+" "+n);var r}function gC(t,e,n){if(e instanceof DT&&(e=e.o_),e instanceof KS)return e.F_;if("string"==typeof e)return _C(t,e);throw bC("Field path arguments must be of type string or FieldPath.",t,!1,void 0,n)}var mC=new RegExp("[~\\*/\\[\\]]");function _C(e,n,r){if(0<=n.search(mC))throw bC("Invalid field path ("+n+"). Paths must not contain '~', '*', '/', '[', or ']'",e,!1,void 0,r);try{return(new(KS.bind.apply(KS,_o([void 0],n.split("."))))).F_}catch(t){throw bC("Invalid field path ("+n+"). Paths must not be empty, begin with '.', end with '.', or contain '..'",e,!1,void 0,r)}}function bC(t,e,n,r,i){var o=r&&!r.T(),s=void 0!==i,e="Function "+e+"() called with invalid data";return n&&(e+=" (via `toFirestore()`)"),n="",(o||s)&&(n+=" (found",o&&(n+=" in field "+r),s&&(n+=" in document "+i),n+=")"),new jv(Uv.INVALID_ARGUMENT,(e+=". ")+t+n)}function wC(t,e){return t.some(function(t){return t.isEqual(e)})}var EC=(NC.prototype.X_=function(r){return po(this,void 0,void 0,function(){var e,n=this;return vo(this,function(t){switch(t.label){case 0:if(this.Z_(),0<this.mutations.length)throw new jv(Uv.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,function(s,a){return po(this,void 0,void 0,function(){var r,e,n,i,o;return vo(this,function(t){switch(t.label){case 0:return e=Pg((r=s).serializer)+"/documents",n={documents:a.map(function(t){return Ng(r.serializer,t)})},[4,r.Fc("BatchGetDocuments",e,n)];case 1:return n=t.sent(),i=new Map,n.forEach(function(t){var e,n,t=(n=r.serializer,"found"in t?function(t,e){Sv(!!e.found),e.found.name,e.found.updateTime;var n=Ag(t,e.found.name),t=Tg(e.found.updateTime),e=new Rm({mapValue:{fields:e.found.fields}});return new qm(n,t,e,{})}(n,t):"missing"in t?(e=n,Sv(!!(n=t).missing),Sv(!!n.readTime),e=Ag(e,n.missing),n=Tg(n.readTime),new Bm(e,n)):Tv());i.set(t.key.toString(),t)}),o=[],[2,(a.forEach(function(t){Sv(!!(t=i.get(t.toString()))),o.push(t)}),o)]}})})}(this.Wc,r)];case 1:return[2,((e=t.sent()).forEach(function(t){t instanceof Bm||t instanceof qm?n.tf(t):Tv()}),e)]}})})},NC.prototype.set=function(t,e){this.write(e.L_(t,this.je(t))),this.Y_.add(t.toString())},NC.prototype.update=function(t,e){try{this.write(e.L_(t,this.ef(t)))}catch(t){this.J_=t}this.Y_.add(t.toString())},NC.prototype.delete=function(t){this.write([new Om(t,this.je(t))]),this.Y_.add(t.toString())},NC.prototype.commit=function(){return po(this,void 0,void 0,function(){var e,n=this;return vo(this,function(t){switch(t.label){case 0:if(this.Z_(),this.J_)throw this.J_;return e=this.z_,this.mutations.forEach(function(t){e.delete(t.key.toString())}),e.forEach(function(t,e){e=Hv.K(e),n.mutations.push(new Pm(e,n.je(e)))}),[4,function(i,o){return po(this,void 0,void 0,function(){var e,n,r;return vo(this,function(t){switch(t.label){case 0:return n=Pg((e=i).serializer)+"/documents",r={writes:o.map(function(t){return xg(e.serializer,t)})},[4,e.xc("Commit",n,r)];case 1:return t.sent(),[2]}})})}(this.Wc,this.mutations)];case 1:return t.sent(),this.H_=!0,[2]}})})},NC.prototype.tf=function(t){var e;if(t instanceof qm)e=t.version;else{if(!(t instanceof Bm))throw Tv();e=qv.min()}var n=this.z_.get(t.key.toString());if(n){if(!e.isEqual(n))throw new jv(Uv.ABORTED,"Document version changed between two reads.")}else this.z_.set(t.key.toString(),e)},NC.prototype.je=function(t){var e=this.z_.get(t.toString());return!this.Y_.has(t.toString())&&e?lm.updateTime(e):lm.Ge()},NC.prototype.ef=function(t){var e=this.z_.get(t.toString());if(this.Y_.has(t.toString())||!e)return lm.exists(!0);if(e.isEqual(qv.min()))throw new jv(Uv.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return lm.updateTime(e)},NC.prototype.write=function(t){this.Z_(),this.mutations=this.mutations.concat(t)},NC.prototype.Z_=function(){},NC),IC=(CC.prototype.run=function(){this.sf()},CC.prototype.sf=function(){var t=this;this.Ps.An(function(){return po(t,void 0,void 0,function(){var e,n,r=this;return vo(this,function(t){return e=new EC(this.Wc),(n=this.rf(e))&&n.then(function(t){r.rs.fs(function(){return e.commit().then(function(){r.us.resolve(t)}).catch(function(t){r.af(t)})})}).catch(function(t){r.af(t)}),[2]})})})},CC.prototype.rf=function(t){try{var e=this.updateFunction(t);return!ty(e)&&e.catch&&e.then?e:(this.us.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.us.reject(t),null}},CC.prototype.af=function(t){var e=this;0<this.nf&&this.cf(t)?(--this.nf,this.rs.fs(function(){return e.sf(),Promise.resolve()})):this.us.reject(t)},CC.prototype.cf=function(t){return"FirebaseError"===t.name&&("aborted"===(t=t.code)||"failed-precondition"===t||!dy(t))},CC),TC=(SC.prototype.getConfiguration=function(){return po(this,void 0,void 0,function(){return vo(this,function(t){switch(t.label){case 0:return[4,this.oi.promise];case 1:return[2,(t.sent(),{rs:this.rs,Fl:this.Fl,clientId:this.clientId,credentials:this.credentials,Yl:this.user,$h:100})]}})})},SC.prototype.hf=function(t){var e=this;this.uf=t,this.oi.promise.then(function(){return e.uf(e.user)})},SC.prototype.lf=function(){if(this.rs.Vs)throw new jv(Uv.FAILED_PRECONDITION,"The client has already been terminated.")},SC.prototype.terminate=function(){var t=this;this.rs.bs();var n=new B_;return this.rs.ys(function(){return po(t,void 0,void 0,function(){var e;return vo(this,function(t){switch(t.label){case 0:return t.trys.push([0,5,,6]),this._f?[4,this._f.terminate()]:[3,2];case 1:t.sent(),t.label=2;case 2:return this.ff?[4,this.ff.terminate()]:[3,4];case 3:t.sent(),t.label=4;case 4:return this.credentials.ii(),n.resolve(),[3,6];case 5:return e=pb(t.sent(),"Failed to shutdown persistence"),n.reject(e),[3,6];case 6:return[2]}})})}),n.promise},SC);function SC(t,e,n){var r=this;this.credentials=t,this.rs=e,this.Fl=n,this.user=bb.UNAUTHENTICATED,this.clientId=Cv.u(),this.uf=function(){},this.oi=new B_,this.credentials.si(function(t){bv("FirestoreClient","Received user=",t.uid),r.user.isEqual(t)||(r.user=t,r.uf(t)),r.oi.resolve()})}function CC(t,e,n,r){this.rs=t,this.Wc=e,this.updateFunction=n,this.us=r,this.nf=5,this.Ps=new W_(this.rs,"transaction_retry")}function NC(t){this.Wc=t,this.z_=new Map,this.mutations=[],this.H_=!1,this.J_=null,this.Y_=new Set}function AC(r,i){return po(this,void 0,void 0,function(){var e,n=this;return vo(this,function(t){switch(t.label){case 0:return r.rs.Ns(),bv("FirestoreClient","Initializing OfflineComponentProvider"),[4,r.getConfiguration()];case 1:return e=t.sent(),[4,i.initialize(e)];case 2:return t.sent(),r.hf(function(e){return r.rs.Ss(function(){return po(n,void 0,void 0,function(){return vo(this,function(t){switch(t.label){case 0:return[4,DE(i.Kc,e)];case 1:return t.sent(),[2]}})})})}),i.persistence.fa(function(){return r.terminate()}),r.ff=i,[2]}})})}function kC(r,i){return po(this,void 0,void 0,function(){var e,n;return vo(this,function(t){switch(t.label){case 0:return r.rs.Ns(),[4,OC(r)];case 1:return e=t.sent(),bv("FirestoreClient","Initializing OnlineComponentProvider"),[4,r.getConfiguration()];case 2:return n=t.sent(),[4,i.initialize(e,n)];case 3:return t.sent(),r.hf(function(t){return r.rs.Ss(function(){return function(r,i){return po(this,void 0,void 0,function(){var e,n;return vo(this,function(t){switch(t.label){case 0:return(e=r).rs.Ns(),bv("RemoteStore","RemoteStore received new credentials"),n=uI(e),e.Hc.add(3),[4,eI(e)];case 1:return t.sent(),n&&e.Zc.set("Unknown"),[4,e.jc.s_(i)];case 2:return t.sent(),e.Hc.delete(3),[4,tI(e)];case 3:return t.sent(),[2]}})})}(i.Oh,t)})}),r._f=i,[2]}})})}function OC(e){return po(this,void 0,void 0,function(){return vo(this,function(t){switch(t.label){case 0:return e.ff?[3,2]:(bv("FirestoreClient","Using default OfflineComponentProvider"),[4,AC(e,new AT)]);case 1:t.sent(),t.label=2;case 2:return[2,e.ff]}})})}function PC(e){return po(this,void 0,void 0,function(){return vo(this,function(t){switch(t.label){case 0:return e._f?[3,2]:(bv("FirestoreClient","Using default OnlineComponentProvider"),[4,kC(e,new PT)]);case 1:t.sent(),t.label=2;case 2:return[2,e._f]}})})}function RC(t){return OC(t).then(function(t){return t.persistence})}function DC(t){return OC(t).then(function(t){return t.Kc})}function xC(t){return PC(t).then(function(t){return t.Oh})}function LC(t){return PC(t).then(function(t){return t.gu})}function MC(r){return po(this,void 0,void 0,function(){var e,n;return vo(this,function(t){switch(t.label){case 0:return[4,PC(r)];case 1:return e=t.sent(),[2,((n=e.Mh).Ls=function(s,a){return po(this,void 0,void 0,function(){var e,n,r,i,o;return vo(this,function(t){switch(t.label){case 0:return e=aT(s),(o=e.Bh.get(a))?(n=o.targetId,e.kh.Wu(n),r=o.view.xh(),[3,4]):[3,1];case 1:return[4,LE(e.Kc,n_(a))];case 2:return i=t.sent(),o=e.kh.Wu(i.targetId),n=i.targetId,[4,zI(e,a,n,"current"===o)];case 3:r=t.sent(),e.Jh&&nI(e.Oh,i),t.label=4;case 4:return[2,r]}})})}.bind(null,e.gu),n.Us=function(i,o){return po(this,void 0,void 0,function(){var e,n,r;return vo(this,function(t){switch(t.label){case 0:return n=(e=i).Bh.get(o),1<(r=e.qh.get(n.targetId)).length?[2,(e.qh.set(n.targetId,r.filter(function(t){return!s_(t,o)})),void e.Bh.delete(o))]:e.Jh?(e.kh.Gu(n.targetId),e.kh.Bu(n.targetId)?[3,2]:[4,ME(e.Kc,n.targetId,!1).then(function(){e.kh.Hu(n.targetId),rI(e.Oh,n.targetId),tT(e,n.targetId)}).catch(VE)]):[3,3];case 1:t.sent(),t.label=2;case 2:return[3,5];case 3:return tT(e,n.targetId),[4,ME(e.Kc,n.targetId,!0)];case 4:t.sent(),t.label=5;case 5:return[2]}})})}.bind(null,e.gu),n)]}})})}function FC(n,r){var t=this,i=new B_;return n.rs.fs(function(){return po(t,void 0,void 0,function(){var e;return vo(this,function(t){switch(t.label){case 0:return e=QI,[4,LC(n)];case 1:return[2,e.apply(void 0,[t.sent(),r,i])]}})})}),i.promise}function UC(n,r,i,o,s){var t=new RT({next:function(t){r.fs(function(){return gb(n,a)});var e=t.docs.has(i);!e&&t.fromCache?s.reject(new jv(Uv.UNAVAILABLE,"Failed to get document because the client is offline.")):e&&t.fromCache&&o&&"server"===o.source?s.reject(new jv(Uv.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):s.resolve(t)},error:function(t){return s.reject(t)}}),a=new _b(Ym(i.path),t,{includeMetadataChanges:!0,Hs:!0});return yb(n,a)}var jC,VC=(Object.defineProperty(BC.prototype,"app",{get:function(){if(!this.If)throw new jv(Uv.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.If},enumerable:!1,configurable:!0}),Object.defineProperty(BC.prototype,"mf",{get:function(){return this.Tf},enumerable:!1,configurable:!0}),Object.defineProperty(BC.prototype,"Af",{get:function(){return void 0!==this.Rf},enumerable:!1,configurable:!0}),BC.prototype.Pf=function(t){if(this.Tf)throw new jv(Uv.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this.wf=new wS(t),void 0!==t.credentials&&(this.Ef=function(t){if(!t)return new Tb;switch(t.type){case"gapi":var e=t.client;return Sv(!("object"!=typeof e||null===e||!e.auth||!e.auth.getAuthHeaderValueForFirstParty)),new Nb(e,t.sessionIndex||"0");case"provider":return t.client;default:throw new jv(Uv.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(t.credentials))},BC.prototype.gf=function(){return this.wf},BC.prototype.k_=function(){return this.Tf=!0,this.wf},BC.prototype._delete=function(){return this.Rf||(this.Rf=this.Vf()),this.Rf},BC.prototype.Vf=function(){return(t=bS.get(this))&&(bv("ComponentProvider","Removing Datastore"),bS.delete(this),t.terminate()),Promise.resolve();var t},lo(qC,jC=BC),qC.prototype.Vf=function(){return this.pf||fN(this),this.pf.terminate()},qC);function qC(t,e){var n=this;return(n=jC.call(this,t,e)||this).yf=new hb,n.df="name"in t?t.name:"[DEFAULT]",n}function BC(t,e){this.df="(lite)",this.wf=new wS({}),this.Tf=!1,t instanceof vv?(this.v_=t,this.Ef=new Tb):(this.If=t,this.v_=function(t){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new jv(Uv.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new vv(t.options.projectId)}(t),this.Ef=new Sb(e))}function WC(n,r,i){var t=this,o=new B_;return n.rs.enqueue(function(){return po(t,void 0,void 0,function(){var e;return vo(this,function(t){switch(t.label){case 0:return t.trys.push([0,3,,4]),[4,AC(n,i)];case 1:return t.sent(),[4,kC(n,r)];case 2:return t.sent(),o.resolve(),[3,4];case 3:if(!("FirebaseError"===(t=e=t.sent()).name?t.code===Uv.FAILED_PRECONDITION||t.code===Uv.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code))throw e;return console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+e),o.reject(e),[3,4];case 4:return[2]}})})}).then(function(){return o.promise})}function KC(t){if(t.mf||t.Af)throw new jv(Uv.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var HC,GC,zC=(lo($C,GC=L),$C.prototype.exists=function(){return GC.prototype.exists.call(this)},$C.prototype.data=function(t){if(void 0===t&&(t={}),this.N_){if(this.x_){var e=new QC(this.S_,this.D_,this.C_,this.N_,this.metadata,null);return this.x_.fromFirestore(e,t)}return this.D_.I_(this.N_.sn(),t.serverTimestamps)}},$C.prototype.get=function(t,e){if(void 0===e&&(e={}),this.N_&&null!==(t=this.N_.data().field(BS("DocumentSnapshot.get",t))))return this.D_.I_(t,e.serverTimestamps)},$C),QC=(lo(JC,HC=zC),JC.prototype.data=function(t){return void 0===t&&(t={}),HC.prototype.data.call(this,t)},JC),YC=(Object.defineProperty(XC.prototype,"docs",{get:function(){var e=[];return this.forEach(function(t){return e.push(t)}),e},enumerable:!1,configurable:!0}),Object.defineProperty(XC.prototype,"size",{get:function(){return this.bf.docs.size},enumerable:!1,configurable:!0}),Object.defineProperty(XC.prototype,"empty",{get:function(){return 0===this.size},enumerable:!1,configurable:!0}),XC.prototype.forEach=function(e,n){var r=this;this.bf.docs.forEach(function(t){e.call(n,new QC(r.S_,r.D_,t.key,t,new IN(r.bf.Qt.has(t.key),r.bf.fromCache),r.query.x_))})},XC.prototype.docChanges=function(t){if(void 0===t&&(t={}),(t=!!t.includeMetadataChanges)&&this.bf.Wt)throw new jv(Uv.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this.Sf&&this.Df===t||(this.Sf=function(i,e){if(i.bf.Ut.T()){var n=0;return i.bf.docChanges.map(function(t){var e=new QC(i.S_,i.D_,t.doc.key,t.doc,new IN(i.bf.Qt.has(t.doc.key),i.bf.fromCache),i.query.x_);return t.doc,{type:"added",doc:e,oldIndex:-1,newIndex:n++}})}var o=i.bf.Ut;return i.bf.docChanges.filter(function(t){return e||3!==t.type}).map(function(t){var e=new QC(i.S_,i.D_,t.doc.key,t.doc,new IN(i.bf.Qt.has(t.doc.key),i.bf.fromCache),i.query.x_),n=-1,r=-1;return 0!==t.type&&(n=o.indexOf(t.doc.key),o=o.delete(t.doc.key)),1!==t.type&&(r=(o=o.add(t.doc)).indexOf(t.doc.key)),{type:function(){switch(t.type){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Tv()}}(),doc:e,oldIndex:n,newIndex:r}})}(this,t),this.Df=t),this.Sf},XC);function XC(t,e,n,r){this.S_=t,this.D_=e,this.bf=r,this.metadata=new IN(r.hasPendingWrites,r.fromCache),this.query=n}function JC(){return null!==HC&&HC.apply(this,arguments)||this}function $C(t,e,n,r,i,o){var s=this;return(s=GC.call(this,t,e,n,r,o)||this).S_=t,s.vf=t,s.metadata=i,s}function ZC(t,e){return t instanceof zC&&e instanceof zC?t.S_===e.S_&&t.C_.isEqual(e.C_)&&(null===t.N_?null===e.N_:t.N_.isEqual(e.N_))&&t.x_===e.x_:t instanceof YC&&e instanceof YC&&t.S_===e.S_&&(n=t.query,r=e.query,n instanceof GS&&r instanceof GS&&n.firestore===r.firestore&&s_(n.M_,r.M_)&&n.x_===r.x_)&&t.metadata.isEqual(e.metadata)&&t.bf.isEqual(e.bf);var n,r}var tN,eN=(lo(nN,tN=Pr),nN.prototype.R_=function(t){return new _S(t)},nN.prototype.P_=function(t){return t=this.p_(t,this.firestore.v_),new HS(this.firestore,null,t)},nN);function nN(t){var e=this;return(e=tN.call(this)||this).firestore=t,e}function rN(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];var o=rS(t.firestore,VC),s=$S(o);return e instanceof DT&&(e=e.o_),iN(o,("string"==typeof e||e instanceof KS?lC(s,"updateDoc",t.C_,e,n,r):hC(s,"updateDoc",t.C_,e)).L_(t.C_,lm.exists(!0)))}function iN(t,e){return FC(lN(t),e)}function oN(t,e,n){var r=n.docs.get(e.C_),i=new eN(t);return new zC(t,i,e.C_,r,new IN(n.hasPendingWrites,n.fromCache),e.x_)}var sN,aN=(hN.prototype.enableIndexedDbPersistence=function(t,e){return function(t,e){KC(t);var n=lN(t),r=t.k_();return WC(n,t=new PT,new kT(t,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(t.o_,{forceOwnership:e})},hN.prototype.enableMultiTabIndexedDbPersistence=function(t){return function(t){KC(t);var e=lN(t),n=t.k_();return WC(e,t=new PT,new OT(t,n.cacheSizeBytes))}(t.o_)},hN.prototype.clearIndexedDbPersistence=function(t){return function(n){var t=this;if(n.mf&&!n.Af)throw new jv(Uv.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var r=new B_;return n.yf.ys(function(){return po(t,void 0,void 0,function(){var e;return vo(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,function(n){return po(this,void 0,void 0,function(){var e;return vo(this,function(t){switch(t.label){case 0:return H_.kn()?(e=n+"main",[4,H_.delete(e)]):[2,Promise.resolve()];case 1:return t.sent(),[2]}})})}(kE(n.v_,n.df))];case 1:return t.sent(),r.resolve(),[3,3];case 2:return e=t.sent(),r.reject(e),[3,3];case 3:return[2]}})})}),r.promise}(t.o_)},hN),uN=(lo(cN,sN=DT),Object.defineProperty(cN.prototype,"v_",{get:function(){return this.o_.v_},enumerable:!1,configurable:!0}),cN.prototype.settings=function(t){t.merge&&delete(t=Object.assign(Object.assign({},this.o_.gf()),t)).merge,this.o_.Pf(t)},cN.prototype.useEmulator=function(t,e){"firestore.googleapis.com"!==this.o_.gf().host&&Ev("Host has been set in both settings() and useEmulator(), emulator host will be used"),this.settings({host:t+":"+e,ssl:!1,merge:!0})},cN.prototype.enableNetwork=function(){return function(r){var t=this;return r.rs.enqueue(function(){return po(t,void 0,void 0,function(){var e,n;return vo(this,function(t){switch(t.label){case 0:return[4,RC(r)];case 1:return e=t.sent(),[4,xC(r)];case 2:return n=t.sent(),[2,(e.da(!0),(t=n).Hc.delete(0),tI(t))]}})})})}(lN(this.o_))},cN.prototype.disableNetwork=function(){return function(r){var t=this;return r.rs.enqueue(function(){return po(t,void 0,void 0,function(){var e,n;return vo(this,function(t){switch(t.label){case 0:return[4,RC(r)];case 1:return e=t.sent(),[4,xC(r)];case 2:return n=t.sent(),[2,(e.da(!1),function(n){return po(this,void 0,void 0,function(){var e;return vo(this,function(t){switch(t.label){case 0:return(e=n).Hc.add(0),[4,eI(e)];case 1:return t.sent(),e.Zc.set("Offline"),[2]}})})}(n))]}})})})}(lN(this.o_))},cN.prototype.enablePersistence=function(t){var e=!1,n=!1;return t&&eS("synchronizeTabs",e=!!t.synchronizeTabs,"experimentalForceOwningTab",n=!!t.experimentalForceOwningTab),e?this.Cf.enableMultiTabIndexedDbPersistence(this):this.Cf.enableIndexedDbPersistence(this,n)},cN.prototype.clearPersistence=function(){return this.Cf.clearIndexedDbPersistence(this)},cN.prototype.terminate=function(){return this.app._removeServiceInstance("firestore"),this.app._removeServiceInstance("firestore-exp"),this.o_._delete()},cN.prototype.waitForPendingWrites=function(){return function(n){var t=this,r=new B_;return n.rs.fs(function(){return po(t,void 0,void 0,function(){var e;return vo(this,function(t){switch(t.label){case 0:return e=JI,[4,LC(n)];case 1:return[2,e.apply(void 0,[t.sent(),r])]}})})}),r.promise}(lN(this.o_))},cN.prototype.onSnapshotsInSync=function(t){return function(t,e){var n=this,r=lN(t),e=Ub(e)?e:{next:e},i=new RT(e);return t.yf.fs(function(){return po(n,void 0,void 0,function(){var e;return vo(this,function(t){switch(t.label){case 0:return e=function(t,e){t.$s.add(e),e.next()},[4,MC(r)];case 1:return e.apply(void 0,[t.sent(),i]),[2]}})})}),function(){i.r_(),t.yf.fs(function(){return po(n,void 0,void 0,function(){var e;return vo(this,function(t){switch(t.label){case 0:return e=function(t,e){t.$s.delete(e)},[4,MC(r)];case 1:return e.apply(void 0,[t.sent(),i]),[2]}})})})}}(this.o_,t)},Object.defineProperty(cN.prototype,"app",{get:function(){if(!this.Nf)throw new jv(Uv.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.Nf},enumerable:!1,configurable:!0}),cN.prototype.collection=function(t){return ZT("Firestore.collection","path",t),lN(this.o_),new jN(Bv.k(t),this,null)},cN.prototype.doc=function(t){return ZT("Firestore.doc","path",t),lN(this.o_),yN.xf(Bv.k(t),this,null)},cN.prototype.collectionGroup=function(t){if(ZT("Firestore.collectionGroup","collectionId",t),0<=t.indexOf("/"))throw new jv(Uv.INVALID_ARGUMENT,"Invalid collection ID '"+t+"' passed to function Firestore.collectionGroup(). Collection IDs must not contain '/'.");return lN(this.o_),new MN(new Km(Bv.$(),t),this,null)},cN.prototype.runTransaction=function(e){var n=this;return function(n,r){var t=this,i=new B_;return n.rs.fs(function(){return po(t,void 0,void 0,function(){var e;return vo(this,function(t){switch(t.label){case 0:return[4,PC(n).then(function(t){return t.Wc})];case 1:return e=t.sent(),new IC(n.rs,e,r,i).run(),[2]}})})}),i.promise}(lN(this.o_),function(t){return e(new dN(n,t))})},cN.prototype.batch=function(){return lN(this.o_),new vN(this)},cN);function cN(t,e,n){var r=this;return(r=sN.call(this,e)||this).Cf=n,r.INTERNAL={delete:function(){return r.terminate()}},t instanceof vv||(r.Nf=t),r}function hN(){}function lN(t){return t.pf||fN(t),t.pf.lf(),t.pf}function fN(t){var e,n,r=t.k_(),r=(e=t.v_,n=t.df,new dv(e,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling));t.pf=new TC(t.Ef,t.yf,r)}var pN,dN=(_N.prototype.get=function(t){var e=this,n=KN(0,t,this.S_),r=new LS(this.S_);return this.Ff.X_([n.C_]).then(function(t){if(!t||1!==t.length)return Tv();if((t=t[0])instanceof Bm)return new TN(e.S_,new zC(e.S_.o_,r,n.C_,null,new IN(!1,!1),n.x_));if(t instanceof qm)return new TN(e.S_,new zC(e.S_.o_,r,n.C_,t,new IN(!1,!1),n.x_));throw Tv()})},_N.prototype.set=function(t,e,n){return t=KN(0,t,this.S_),n=tS("Transaction.set",n),e=HN(t.x_,e,n),n=cC(this.Of,"Transaction.set",t.C_,e,null!==t.x_,n),this.Ff.set(t.C_,n),this},_N.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];return t=KN(0,t,this.S_),e instanceof DT&&(e=e.o_),e="string"==typeof e||e instanceof KS?lC(this.Of,"Transaction.update",t.C_,e,n,r):hC(this.Of,"Transaction.update",t.C_,e),this.Ff.update(t.C_,e),this},_N.prototype.delete=function(t){return t=KN(0,t,this.S_),this.Ff.delete(t.C_),this},_N),vN=(mN.prototype.set=function(t,e,n){return this.$f(),t=KN(0,t,this.S_),n=tS("WriteBatch.set",n),e=HN(t.x_,e,n),n=cC(this.Of,"WriteBatch.set",t.C_,e,null!==t.x_,n),this.Mf=this.Mf.concat(n.L_(t.C_,lm.Ge())),this},mN.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];return this.$f(),t=KN(0,t,this.S_),e instanceof DT&&(e=e.o_),e="string"==typeof e||e instanceof KS?lC(this.Of,"WriteBatch.update",t.C_,e,n,r):hC(this.Of,"WriteBatch.update",t.C_,e),this.Mf=this.Mf.concat(e.L_(t.C_,lm.exists(!0))),this},mN.prototype.delete=function(t){return this.$f(),t=KN(0,t,this.S_),this.Mf=this.Mf.concat(new Om(t.C_,lm.Ge())),this},mN.prototype.commit=function(){return this.$f(),this.kf=!0,0<this.Mf.length?FC(lN(this.S_.o_),this.Mf):Promise.resolve()},mN.prototype.$f=function(){if(this.kf)throw new jv(Uv.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},mN),yN=(lo(gN,pN=DT),gN.xf=function(t,e,n){if(t.length%2!=0)throw new jv(Uv.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t.M()+" has "+t.length);return new gN(e,new HS(e.o_,n,new Hv(t)))},gN.b_=function(t,e,n){return new gN(e,new HS(e.o_,n,t))},Object.defineProperty(gN.prototype,"id",{get:function(){return this.o_.id},enumerable:!1,configurable:!0}),Object.defineProperty(gN.prototype,"parent",{get:function(){return new jN(this.o_.O_.S(),this.firestore,this.o_.x_)},enumerable:!1,configurable:!0}),Object.defineProperty(gN.prototype,"path",{get:function(){return this.o_.path},enumerable:!1,configurable:!0}),gN.prototype.collection=function(t){if(ZT("DocumentReference.collection","path",t),!t)throw new jv(Uv.INVALID_ARGUMENT,"Must provide a non-empty collection name to collection()");return t=Bv.k(t),new jN(this.o_.O_.child(t),this.firestore,null)},gN.prototype.isEqual=function(t){return t instanceof DT&&(t=t.o_),t instanceof HS&&((e=this.o_)instanceof HS||e instanceof zS)&&(t instanceof HS||t instanceof zS)&&e.firestore===t.firestore&&e.path===t.path&&e.x_===t.x_;var e},gN.prototype.set=function(t,e){e=tS("DocumentReference.set",e);try{return n=this.o_,r=t,i=e,o=rS(n.firestore,VC),r=HN(n.x_,r,i),iN(o,cC($S(o),"setDoc",n.C_,r,null!==n.x_,i).L_(n.C_,lm.Ge()))}catch(t){throw bN(t,"setDoc","DocumentReference.set")}var n,r,i,o},gN.prototype.update=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];try{return 1===arguments.length?rN(this.o_,t):rN.apply(void 0,_o([this.o_,t,e],n))}catch(t){throw bN(t,"updateDoc","DocumentReference.update")}},gN.prototype.delete=function(){return iN(rS((t=this.o_).firestore,VC),[new Om(t.C_,lm.Ge())]);var t},gN.prototype.onSnapshot=function(){for(var e=this,r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];var n,i=function(){for(var t=0,e=r;t<e.length;t++){var n=e[t];if("object"==typeof n&&!Ub(n))return n}return{}}(),o={next:function(t){n.next&&n.next(new TN(e.firestore,new zC(e.firestore.o_,e.D_,t.C_,t.N_,t.metadata,e.o_.x_)))},error:null===(o=(n=Ub((o=r)[0])?o[0]:Ub(o[1])?o[1]:"function"==typeof o[0]?{next:o[0],error:o[1],complete:o[2]}:{next:o[1],error:o[2],complete:o[3]}).error)||void 0===o?void 0:o.bind(n),complete:null===(o=n.complete)||void 0===o?void 0:o.bind(n)};return function(e){for(var t=this,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];var i={includeMetadataChanges:!1},o=0;"object"!=typeof n[o]||Ub(n[o])||(i=n[o],o++);var s,a,u,c,h,l={includeMetadataChanges:i.includeMetadataChanges};Ub(n[o])&&(u=n[o],n[o]=null===(i=u.next)||void 0===i?void 0:i.bind(u),n[o+1]=null===(i=u.error)||void 0===i?void 0:i.bind(u),n[o+2]=null===(i=u.complete)||void 0===i?void 0:i.bind(u)),e instanceof HS?(s=rS(e.firestore,VC),a=Ym(e.C_.path),h={next:function(t){n[o]&&n[o](oN(s,e,t))},error:n[o+1],complete:n[o+2]}):(s=rS(e.firestore,VC),a=e.M_,c=new eN(s),h={next:function(t){n[o]&&n[o](new YC(s,c,e,t))},error:n[o+1],complete:n[o+2]},RN(e.M_));var f=lN(s),p=new RT(h),d=new _b(a,p,l);return s.yf.fs(function(){return po(t,void 0,void 0,function(){var e;return vo(this,function(t){switch(t.label){case 0:return e=yb,[4,MC(f)];case 1:return[2,e.apply(void 0,[t.sent(),d])]}})})}),function(){p.r_(),s.yf.fs(function(){return po(t,void 0,void 0,function(){var e;return vo(this,function(t){switch(t.label){case 0:return e=gb,[4,MC(f)];case 1:return[2,e.apply(void 0,[t.sent(),d])]}})})})}}(this.o_,i,o)},gN.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(e){var t=this,n=rS(e.firestore,VC),r=lN(n),i=new eN(n),o=new B_;return n.yf.fs(function(){return po(t,void 0,void 0,function(){return vo(this,function(t){switch(t.label){case 0:return[4,DC(r)];case 1:return[4,function(i,o,s){return po(this,void 0,void 0,function(){var r;return vo(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,(e=o,(n=i).persistence.runTransaction("read document","readonly",function(t){return n.Ga.Oi(t,e)}))];case 1:return(r=t.sent())instanceof qm?s.resolve(r):r instanceof Bm?s.resolve(null):s.reject(new jv(Uv.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),[3,3];case 2:return r=pb(r=t.sent(),"Failed to get document '"+o+" from cache"),s.reject(r),[3,3];case 3:return[2]}var e,n})})}(t.sent(),e.C_,o)];case 2:return t.sent(),[2]}})})}),o.promise.then(function(t){return new zC(n,i,e.C_,t,new IN(t instanceof qm&&t.Je,!0),e.x_)})}:"server"===(null==t?void 0:t.source)?function(e){var t=this,n=rS(e.firestore,VC),r=lN(n),i=new B_;return n.yf.fs(function(){return po(t,void 0,void 0,function(){return vo(this,function(t){switch(t.label){case 0:return[4,MC(r)];case 1:return[4,UC(t.sent(),n.yf,e.C_,{source:"server"},i)];case 2:return t.sent(),[2]}})})}),i.promise.then(function(t){return oN(n,e,t)})}:function(e){var t=this,n=rS(e.firestore,VC),r=lN(n),i=new B_;return n.yf.fs(function(){return po(t,void 0,void 0,function(){return vo(this,function(t){switch(t.label){case 0:return[4,MC(r)];case 1:return[4,UC(t.sent(),n.yf,e.C_,{source:"default"},i)];case 2:return t.sent(),[2]}})})}),i.promise.then(function(t){return oN(n,e,t)})})(this.o_).then(function(t){return new TN(e.firestore,new zC(e.firestore.o_,e.D_,t.C_,t.N_,t.metadata,e.o_.x_))})},gN.prototype.withConverter=function(t){return new gN(this.firestore,this.o_.withConverter(t))},gN);function gN(t,e){var n=this;return(n=pN.call(this,e)||this).firestore=t,n.D_=new LS(t),n}function mN(t){this.S_=t,this.Mf=[],this.kf=!1,this.Of=$S(this.S_.o_)}function _N(t,e){this.S_=t,this.Ff=e,this.Of=$S(this.S_.o_)}function bN(t,e,n){return t.message=t.message.replace(e+"()",n+"()"),t}var wN,EN,IN=(AN.prototype.isEqual=function(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache},AN),TN=(lo(NN,EN=DT),Object.defineProperty(NN.prototype,"ref",{get:function(){return new yN(this.S_,this.o_.ref)},enumerable:!1,configurable:!0}),Object.defineProperty(NN.prototype,"id",{get:function(){return this.o_.id},enumerable:!1,configurable:!0}),Object.defineProperty(NN.prototype,"metadata",{get:function(){return this.o_.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(NN.prototype,"exists",{get:function(){return this.o_.exists()},enumerable:!1,configurable:!0}),NN.prototype.data=function(t){return this.o_.data(t)},NN.prototype.get=function(t,e){return this.o_.get(t,e)},NN.prototype.isEqual=function(t){return ZC(this.o_,t.o_)},NN),SN=(lo(CN,wN=TN),CN.prototype.data=function(t){return this.o_.data(t)},CN);function CN(){return null!==wN&&wN.apply(this,arguments)||this}function NN(t,e){var n=this;return(n=EN.call(this,e)||this).S_=t,n}function AN(t,e){this.hasPendingWrites=t,this.fromCache=e}function kN(t,e,n){if(n instanceof DT&&(n=n.o_),"string"==typeof n){if(""===n)throw new jv(Uv.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!t_(e)&&-1!==n.indexOf("/"))throw new jv(Uv.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+n+"' contains a '/' character.");if(e=e.path.child(Bv.k(n)),!Hv.G(e))throw new jv(Uv.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+e+"' is not because it has an odd number of segments ("+e.length+").");return hg(t,new Hv(e))}if(n instanceof HS)return hg(t,n.C_);throw new jv(Uv.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+nS(n)+".")}function ON(t,e){if(!Array.isArray(t)||0===t.length)throw new jv(Uv.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+e.toString()+"' filters.");if(10<t.length)throw new jv(Uv.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters support a maximum of 10 elements in the value array.")}function PN(t,e,n){if(!n.isEqual(e))throw new jv(Uv.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, >, or >=) on field '"+e.toString()+"' and so you must also use '"+e.toString()+"' as your first orderBy(), but your first orderBy() is on field '"+n.toString()+"' instead.")}function RN(t){if(Jm(t)&&0===t.rn.length)throw new jv(Uv.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var DN,xN,LN,MN=(WN.prototype.where=function(t,e,n){return t=gC("Query.where",t),e=function(t,e,n,r,i,o){if(r.B()){if("array-contains"===i||"array-contains-any"===i)throw new jv(Uv.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+i+"' queries on FieldPath.documentId().");if("in"===i||"not-in"===i){ON(o,i);for(var s=[],a=0,u=o;a<u.length;a++){var c=u[a];s.push(kN(n,t,c))}h={arrayValue:{values:s}}}else h=kN(n,t,o)}else"in"!==i&&"not-in"!==i&&"array-contains-any"!==i||ON(o,i),h=fC(e,"Query.where",o,"in"===i||"not-in"===i);var h=f_.create(r,i,h);return function(t,e){if(e.cn()){var n=Zm(t);if(null!==n&&!n.isEqual(e.field))throw new jv(Uv.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, >, or >=) must be on the same field. But you have inequality filters on '"+n.toString()+"' and '"+e.field.toString()+"'");null!==(n=$m(t))&&PN(0,e.field,n)}if(null!==(t=function(t,e){for(var n=0,r=t.filters;n<r.length;n++){var i=r[n];if(0<=e.indexOf(i.op))return i.op}return null}(t,function(){switch(e.op){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}())))throw t===e.op?new jv(Uv.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '"+e.op.toString()+"' filter."):new jv(Uv.INVALID_ARGUMENT,"Invalid query. You cannot use '"+e.op.toString()+"' filters with '"+t.toString()+"' filters.")}(t,h),h}(this.M_,this.Lf,this.firestore.v_,t,e,n),new WN((e=(n=this.M_).filters.concat([e]),new Km(n.path,n.collectionGroup,n.rn.slice(),e,n.limit,n.limitType,n.startAt,n.endAt)),this.firestore,this.x_)},WN.prototype.orderBy=function(t,e){if(void 0===e||"asc"===e)n="asc";else{if("desc"!==e)throw new jv(Uv.INVALID_ARGUMENT,"Function Query.orderBy() has unknown direction '"+e+"', expected 'asc' or 'desc'.");n="desc"}var n,t=gC("Query.orderBy",t),t=function(t,e,n){if(null!==t.startAt)throw new jv(Uv.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==t.endAt)throw new jv(Uv.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return n=e=new q_(e,n),null!==$m(t)||null!==(t=Zm(t))&&PN(0,t,n.field),e}(this.M_,t,n);return new WN((t=(n=this.M_).rn.concat([t]),new Km(n.path,n.collectionGroup,t,n.filters.slice(),n.limit,n.limitType,n.startAt,n.endAt)),this.firestore,this.x_)},WN.prototype.limit=function(t){return iS("Query.limit",t),new WN(r_(this.M_,t,"F"),this.firestore,this.x_)},WN.prototype.limitToLast=function(t){return iS("Query.limitToLast",t),new WN(r_(this.M_,t,"L"),this.firestore,this.x_)},WN.prototype.startAt=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return t=this.Bf("Query.startAt",t,e,!0),new WN(i_(this.M_,t),this.firestore,this.x_)},WN.prototype.startAfter=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return t=this.Bf("Query.startAfter",t,e,!1),new WN(i_(this.M_,t),this.firestore,this.x_)},WN.prototype.endBefore=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return t=this.Bf("Query.endBefore",t,e,!0),new WN(o_(this.M_,t),this.firestore,this.x_)},WN.prototype.endAt=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return t=this.Bf("Query.endAt",t,e,!1),new WN(o_(this.M_,t),this.firestore,this.x_)},WN.prototype.isEqual=function(t){return t instanceof WN&&this.firestore===t.firestore&&s_(this.M_,t.M_)&&this.x_===t.x_},WN.prototype.withConverter=function(t){return new WN(this.M_,this.firestore,t)},WN.prototype.Bf=function(c,t,e,n){return t instanceof TN?function(t,e,n,r){if(!n)throw new jv(Uv.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+c+"().");for(var i=[],o=0,s=e_(t);o<s.length;o++){var a=s[o];if(a.field.B())i.push(hg(e,n.key));else{var u=n.field(a.field);if($y(u))throw new jv(Uv.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+a.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===u)throw a=a.field.M(),new jv(Uv.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+a+"' (used as the orderBy) does not exist.");i.push(u)}}return new R_(i,r)}(this.M_,this.firestore.v_,t.o_.N_,n):(e=[t].concat(e),function(t,e,n,r,i,o){var s=t.rn;if(i.length>s.length)throw new jv(Uv.INVALID_ARGUMENT,"Too many arguments provided to "+r+"(). The number of arguments must be less than or equal to the number of orderBy() clauses");for(var a=[],u=0;u<i.length;u++){var c=i[u];if(s[u].field.B()){if("string"!=typeof c)throw new jv(Uv.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+r+"(), but got a "+typeof c);if(!t_(t)&&-1!==c.indexOf("/"))throw new jv(Uv.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+r+"() must be a plain document ID, but '"+c+"' contains a slash.");var h=t.path.child(Bv.k(c));if(!Hv.G(h))throw new jv(Uv.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+r+"() must result in a valid document path, but '"+h+"' is not because it contains an odd number of segments.");h=new Hv(h),a.push(hg(e,h))}else c=fC(n,r,c),a.push(c)}return new R_(a,o)}(this.M_,this.firestore.v_,this.Lf,c,e,n))},WN.prototype.onSnapshot=function(){for(var t,e=this,n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i,o={},s=0;"object"!=typeof n[s]||Ub(n[s])||(o=n[s],s++),Ub(n[s])&&(i=n[s],n[s]=null===(t=i.next)||void 0===t?void 0:t.bind(i),n[s+1]=null===(t=i.error)||void 0===t?void 0:t.bind(i),n[s+2]=null===(t=i.complete)||void 0===t?void 0:t.bind(i));var a={next:function(t){n[s]&&n[s](new UN(e.firestore,new YC(e.firestore.o_,e.D_,new GS(e.firestore.o_,e.x_,e.M_),t)))},error:n[s+1],complete:n[s+2]};return RN(this.M_),function(n,t,e){var r=this,i=new RT(a),o=new _b(t,i,e);return n.rs.fs(function(){return po(r,void 0,void 0,function(){var e;return vo(this,function(t){switch(t.label){case 0:return e=yb,[4,MC(n)];case 1:return[2,e.apply(void 0,[t.sent(),o])]}})})}),function(){i.r_(),n.rs.fs(function(){return po(r,void 0,void 0,function(){var e;return vo(this,function(t){switch(t.label){case 0:return e=gb,[4,MC(n)];case 1:return[2,e.apply(void 0,[t.sent(),o])]}})})})}}(lN(this.firestore.o_),this.M_,o)},WN.prototype.get=function(t){var e=this;RN(this.M_);var n=lN(this.firestore.o_);return(t&&"cache"===t.source?function(n,r){var t=this,i=new B_;return n.rs.fs(function(){return po(t,void 0,void 0,function(){var e;return vo(this,function(t){switch(t.label){case 0:return e=function(r,i,o){return po(this,void 0,void 0,function(){var e,n;return vo(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,FE(r,i,!0)];case 1:return n=t.sent(),e=new xI(i,n.Xa),n=e.gh(n.documents),n=e.bi(n,!1),o.resolve(n.snapshot),[3,3];case 2:return n=pb(n=t.sent(),"Failed to execute query '"+i+" against cache"),o.reject(n),[3,3];case 3:return[2]}})})},[4,DC(n)];case 1:return[2,e.apply(void 0,[t.sent(),r,i])]}})})}),i.promise}(n,this.M_):function(n,r,i){var t=this;void 0===i&&(i={});var o=new B_;return n.rs.fs(function(){return po(t,void 0,void 0,function(){var e;return vo(this,function(t){switch(t.label){case 0:return e=function(e,n,t,r,i){var o=new RT({next:function(t){n.fs(function(){return gb(e,s)}),t.fromCache&&"server"===r.source?i.reject(new jv(Uv.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(t)},error:function(t){return i.reject(t)}}),s=new _b(t,o,{includeMetadataChanges:!0,Hs:!0});return yb(e,s)},[4,MC(n)];case 1:return[2,e.apply(void 0,[t.sent(),n.rs,r,i,o])]}})})}),o.promise}(n,this.M_,t)).then(function(t){return new UN(e.firestore,new YC(e.firestore.o_,e.D_,new GS(e.firestore.o_,e.x_,e.M_),t))})},WN),FN=(lo(BN,LN=DT),Object.defineProperty(BN.prototype,"type",{get:function(){return this.o_.type},enumerable:!1,configurable:!0}),Object.defineProperty(BN.prototype,"doc",{get:function(){return new SN(this.S_,this.o_.doc)},enumerable:!1,configurable:!0}),Object.defineProperty(BN.prototype,"oldIndex",{get:function(){return this.o_.oldIndex},enumerable:!1,configurable:!0}),Object.defineProperty(BN.prototype,"newIndex",{get:function(){return this.o_.oldIndex},enumerable:!1,configurable:!0}),BN),UN=(lo(qN,xN=DT),Object.defineProperty(qN.prototype,"query",{get:function(){return new MN(this.o_.query.M_,this.S_,this.o_.query.x_)},enumerable:!1,configurable:!0}),Object.defineProperty(qN.prototype,"metadata",{get:function(){return this.o_.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(qN.prototype,"size",{get:function(){return this.o_.size},enumerable:!1,configurable:!0}),Object.defineProperty(qN.prototype,"empty",{get:function(){return this.o_.empty},enumerable:!1,configurable:!0}),Object.defineProperty(qN.prototype,"docs",{get:function(){var e=this;return this.o_.docs.map(function(t){return new SN(e.S_,t)})},enumerable:!1,configurable:!0}),qN.prototype.docChanges=function(t){var e=this;return this.o_.docChanges(t).map(function(t){return new FN(e.S_,t)})},qN.prototype.forEach=function(e,n){var r=this;this.o_.forEach(function(t){e.call(n,new SN(r.S_,t))})},qN.prototype.isEqual=function(t){return ZC(this.o_,t.o_)},qN),jN=(lo(VN,DN=MN),Object.defineProperty(VN.prototype,"id",{get:function(){return this.M_.path.C()},enumerable:!1,configurable:!0}),Object.defineProperty(VN.prototype,"parent",{get:function(){var t=this.M_.path.S();return t.T()?null:yN.xf(t,this.firestore,null)},enumerable:!1,configurable:!0}),Object.defineProperty(VN.prototype,"path",{get:function(){return this.M_.path.M()},enumerable:!1,configurable:!0}),VN.prototype.doc=function(t){return 0===arguments.length&&(t=Cv.u()),ZT("CollectionReference.doc","path",t),t=Bv.k(t),yN.xf(this.M_.path.child(t),this.firestore,this.x_)},VN.prototype.add=function(t){var t=this.x_?this.x_.toFirestore(t):t,e=this.doc();return yN.b_(e.o_.C_,this.firestore,null).set(t).then(function(){return e})},VN.prototype.withConverter=function(t){return new VN(this.O_,this.firestore,t)},VN);function VN(t,e,n){var r=this;if(((r=DN.call(this,Ym(t),e,n)||this).O_=t).length%2!=1)throw new jv(Uv.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+t.M()+" has "+t.length);return r}function qN(t,e){var n=this;return(n=xN.call(this,e)||this).S_=t,n}function BN(t,e){var n=this;return(n=LN.call(this,e)||this).S_=t,n}function WN(t,e,n){this.M_=t,this.firestore=e,this.x_=n,this.Lf=$S(e.o_),this.D_=new LS(e)}function KN(t,e,n){if((e=rS(e,HS)).firestore!==n.o_)throw new jv(Uv.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}function HN(t,e,n){return t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e}var GN,zN,L=(lo(YN,zN=DT),YN.documentId=function(){return new YN(Kv.q().M())},YN.prototype.isEqual=function(t){return t instanceof DT&&(t=t.o_),t instanceof KS&&this.o_.F_.isEqual(t.F_)},YN),Pr=(lo(QN,GN=DT),QN.serverTimestamp=function(){var t=new dS("serverTimestamp");return t.a_="FieldValue.serverTimestamp",new QN(t)},QN.delete=function(){var t=new aS("deleteField");return t.a_="FieldValue.delete",new QN(t)},QN.arrayUnion=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new vS("arrayUnion",t)}.apply(void 0,t);return n.a_="FieldValue.arrayUnion",new QN(n)},QN.arrayRemove=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new yS("arrayRemove",t)}.apply(void 0,t);return n.a_="FieldValue.arrayRemove",new QN(n)},QN.increment=function(t){return(t=new gS("increment",t)).a_="FieldValue.increment",new QN(t)},QN.prototype.isEqual=function(t){return this.o_.isEqual(t.o_)},QN),ru={Firestore:uN,GeoPoint:mS,Timestamp:Vv,Blob:xS,Transaction:dN,WriteBatch:vN,DocumentReference:yN,DocumentSnapshot:TN,Query:MN,QueryDocumentSnapshot:SN,QuerySnapshot:UN,CollectionReference:jN,FieldPath:L,FieldValue:Pr,setLogLevel:function(t){gv.setLogLevel(t)},CACHE_SIZE_UNLIMITED:-1};function QN(){return null!==GN&&GN.apply(this,arguments)||this}function YN(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return zN.call(this,new(KS.bind.apply(KS,_o([void 0],t))))||this}(K=Vl).INTERNAL.registerComponent(new ds("firestore",function(t){return e=t.getProvider("app").getImmediate(),t=t.getProvider("auth-internal"),new uN(e,new VC(e,t),new aN);var e},"PUBLIC").setServiceProps(Object.assign({},ru))),K.registerVersion("@firebase/firestore","2.0.2-20201012233953");var XN,JN={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},$N=(lo(ZN,XN=Error),ZN);function ZN(t,e,n){return e=XN.call(this,e)||this,Object.setPrototypeOf(e,ZN.prototype),e.code=t,e.details=n,e}var tA=(eA.prototype.getAuthToken=function(){return po(this,void 0,void 0,function(){var e;return vo(this,function(t){switch(t.label){case 0:if(!this.auth)return[2,void 0];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,this.auth.getToken()];case 2:return(e=t.sent())?[2,e.accessToken]:[2,void 0];case 3:return t.sent(),[2,void 0];case 4:return[2]}})})},eA.prototype.getInstanceIdToken=function(){return po(this,void 0,void 0,function(){return vo(this,function(t){if(!(this.messaging&&"Notification"in self&&"granted"===Notification.permission))return[2,void 0];try{return[2,this.messaging.getToken()]}catch(t){return[2,void 0]}return[2]})})},eA.prototype.getContext=function(){return po(this,void 0,void 0,function(){var e,n;return vo(this,function(t){switch(t.label){case 0:return[4,this.getAuthToken()];case 1:return e=t.sent(),[4,this.getInstanceIdToken()];case 2:return n=t.sent(),[2,{authToken:e,instanceIdToken:n}]}})})},eA);function eA(t,e){var n=this;this.auth=null,this.messaging=null,this.auth=t.getImmediate({optional:!0}),this.messaging=e.getImmediate({optional:!0}),this.auth||t.get().then(function(t){return n.auth=t},function(){}),this.messaging||e.get().then(function(t){return n.messaging=t},function(){})}function nA(t,e){var n,r={};for(n in t)t.hasOwnProperty(n)&&(r[n]=e(t[n]));return r}var rA=(iA.prototype.encode=function(t){var e=this;if(null==t)return null;if(t instanceof Number&&(t=t.valueOf()),"number"==typeof t&&isFinite(t))return t;if(!0===t||!1===t)return t;if("[object String]"===Object.prototype.toString.call(t))return t;if(Array.isArray(t))return t.map(function(t){return e.encode(t)});if("function"==typeof t||"object"==typeof t)return nA(t,function(t){return e.encode(t)});throw new Error("Data cannot be encoded in JSON: "+t)},iA.prototype.decode=function(t){var e=this;if(null==t)return t;if(t["@type"])switch(t["@type"]){case"type.googleapis.com/google.protobuf.Int64Value":case"type.googleapis.com/google.protobuf.UInt64Value":var n=Number(t.value);if(isNaN(n))throw new Error("Data cannot be decoded from JSON: "+t);return n;default:throw new Error("Data cannot be decoded from JSON: "+t)}return Array.isArray(t)?t.map(function(t){return e.decode(t)}):"function"==typeof t||"object"==typeof t?nA(t,function(t){return e.decode(t)}):t},iA);function iA(){}var oA,sA=(Object.defineProperty(aA.prototype,"app",{get:function(){return this.app_},enumerable:!1,configurable:!0}),aA.prototype._url=function(t){var e=this.app_.options.projectId;return null===this.emulatorOrigin?null!==this.customDomain?this.customDomain+"/"+t:"https://"+this.region+"-"+e+".cloudfunctions.net/"+t:this.emulatorOrigin+"/"+e+"/"+this.region+"/"+t},aA.prototype.useEmulator=function(t,e){this.emulatorOrigin="http://"+t+":"+e},aA.prototype.useFunctionsEmulator=function(t){this.emulatorOrigin=t},aA.prototype.httpsCallable=function(e,n){var r=this;return function(t){return r.call(e,t,n||{})}},aA.prototype.postJSON=function(r,i,o){return po(this,void 0,void 0,function(){var e,n;return vo(this,function(t){switch(t.label){case 0:o["Content-Type"]="application/json",t.label=1;case 1:return t.trys.push([1,3,,4]),[4,this.fetchImpl(r,{method:"POST",body:JSON.stringify(i),headers:o})];case 2:return e=t.sent(),[3,4];case 3:return t.sent(),[2,{status:0,json:null}];case 4:n=null,t.label=5;case 5:return t.trys.push([5,7,,8]),[4,e.json()];case 6:return n=t.sent(),[3,8];case 7:return t.sent(),[3,8];case 8:return[2,{status:e.status,json:n}]}})})},aA.prototype.call=function(c,h,l){return po(this,void 0,void 0,function(){var i,o,s,a,u;return vo(this,function(t){switch(t.label){case 0:return i=this._url(c),h=this.serializer.encode(h),o={data:h},s={},[4,this.contextProvider.getContext()];case 1:return(a=t.sent()).authToken&&(s.Authorization="Bearer "+a.authToken),a.instanceIdToken&&(s["Firebase-Instance-ID-Token"]=a.instanceIdToken),u=l.timeout||7e4,n=u,e=new Promise(function(t,e){r=setTimeout(function(){e(new $N("deadline-exceeded","deadline-exceeded"))},n)}),u=(a={timer:r,promise:e}).timer,a=a.promise,[4,Promise.race([uA(u,this.postJSON(i,o,s)),a,uA(u,this.cancelAllRequests)])];case 2:if(!(a=t.sent()))throw new $N("cancelled","Firebase Functions instance was deleted.");if(u=function(t,e,n){var r=function(){if(200<=t&&t<300)return"ok";switch(t){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}(),i=r,o=void 0;try{var s=e&&e.error;if(s){var a=s.status;if("string"==typeof a){if(!JN[a])return new $N("internal","internal");r=JN[a],i=a}"string"==typeof(a=s.message)&&(i=a),void 0!==(o=s.details)&&(o=n.decode(o))}}catch(t){}return"ok"===r?null:new $N(r,i,o)}(a.status,a.json,this.serializer))throw u;if(!a.json)throw new $N("internal","Response is not valid JSON object.");if(void 0===(u=a.json.data)&&(u=a.json.result),void 0===u)throw new $N("internal","Response is missing data field.");return[2,{data:this.serializer.decode(u)}]}var n,r,e})})},aA);function aA(t,e,n,r,i){var o=this;void 0===r&&(r="us-central1"),this.app_=t,this.fetchImpl=i,this.serializer=new rA,this.emulatorOrigin=null,this.INTERNAL={delete:function(){return Promise.resolve(o.deleteService())}},this.contextProvider=new tA(e,n),this.cancelAllRequests=new Promise(function(t){o.deleteService=function(){return t()}});try{var s=new URL(r);this.customDomain=s.origin,this.region="us-central1"}catch(t){this.customDomain=null,this.region=r}}function uA(n,r){return po(this,void 0,void 0,function(){var e;return vo(this,function(t){switch(t.label){case 0:return[4,r];case 1:return e=t.sent(),clearTimeout(n),[2,e]}})})}function cA(n){return new Promise(function(t,e){n.onsuccess=function(){t(n.result)},n.onerror=function(){e(n.error)}})}function hA(n,r,i){var o,t=new Promise(function(t,e){cA(o=n[r].apply(n,i)).then(t,e)});return t.request=o,t}function lA(t,n,e){e.forEach(function(e){Object.defineProperty(t.prototype,e,{get:function(){return this[n][e]},set:function(t){this[n][e]=t}})})}function fA(e,n,r,t){t.forEach(function(t){t in r.prototype&&(e.prototype[t]=function(){return hA(this[n],t,arguments)})})}function pA(e,n,r,t){t.forEach(function(t){t in r.prototype&&(e.prototype[t]=function(){return this[n][t].apply(this[n],arguments)})})}function dA(t,r,e,n){n.forEach(function(n){n in e.prototype&&(t.prototype[n]=function(){return t=this[r],(e=hA(t,n,arguments)).then(function(t){if(t)return new yA(t,e.request)});var t,e})})}function vA(t){this._index=t}function yA(t,e){this._cursor=t,this._request=e}function gA(t){this._store=t}function mA(n){this._tx=n,this.complete=new Promise(function(t,e){n.oncomplete=function(){t()},n.onerror=function(){e(n.error)},n.onabort=function(){e(n.error)}})}function _A(t,e,n){this._db=t,this.oldVersion=e,this.transaction=new mA(n)}function bA(t){this._db=t}function wA(t,e,n){var r=(e=hA(indexedDB,"open",[t,e])).request;return r&&(r.onupgradeneeded=function(t){n&&n(new _A(r.result,t.oldVersion,r.transaction))}),e.then(function(t){return new bA(t)})}function EA(t){return hA(indexedDB,"deleteDatabase",[t])}ru=Vl,oA=fetch.bind(self),K={Functions:sA},ru.INTERNAL.registerComponent(new ds("functions",function(t,e){var n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),t=t.getProvider("messaging");return new sA(n,r,t,e,oA)},"PUBLIC").setServiceProps(K).setMultipleInstances(!0)),Vl.registerVersion("@firebase/functions","0.6.1"),lA(vA,"_index",["name","keyPath","multiEntry","unique"]),fA(vA,"_index",IDBIndex,["get","getKey","getAll","getAllKeys","count"]),dA(vA,"_index",IDBIndex,["openCursor","openKeyCursor"]),lA(yA,"_cursor",["direction","key","primaryKey","value"]),fA(yA,"_cursor",IDBCursor,["update","delete"]),["advance","continue","continuePrimaryKey"].forEach(function(n){n in IDBCursor.prototype&&(yA.prototype[n]=function(){var e=this,t=arguments;return Promise.resolve().then(function(){return e._cursor[n].apply(e._cursor,t),cA(e._request).then(function(t){if(t)return new yA(t,e._request)})})})}),gA.prototype.createIndex=function(){return new vA(this._store.createIndex.apply(this._store,arguments))},gA.prototype.index=function(){return new vA(this._store.index.apply(this._store,arguments))},lA(gA,"_store",["name","keyPath","indexNames","autoIncrement"]),fA(gA,"_store",IDBObjectStore,["put","add","delete","clear","get","getAll","getKey","getAllKeys","count"]),dA(gA,"_store",IDBObjectStore,["openCursor","openKeyCursor"]),pA(gA,"_store",IDBObjectStore,["deleteIndex"]),mA.prototype.objectStore=function(){return new gA(this._tx.objectStore.apply(this._tx,arguments))},lA(mA,"_tx",["objectStoreNames","mode"]),pA(mA,"_tx",IDBTransaction,["abort"]),_A.prototype.createObjectStore=function(){return new gA(this._db.createObjectStore.apply(this._db,arguments))},lA(_A,"_db",["name","version","objectStoreNames"]),pA(_A,"_db",IDBDatabase,["deleteObjectStore","close"]),bA.prototype.transaction=function(){return new mA(this._db.transaction.apply(this._db,arguments))},lA(bA,"_db",["name","version","objectStoreNames"]),pA(bA,"_db",IDBDatabase,["close"]),["openCursor","openKeyCursor"].forEach(function(i){[gA,vA].forEach(function(t){i in t.prototype&&(t.prototype[i.replace("open","iterate")]=function(){var t=(n=arguments,Array.prototype.slice.call(n)),e=t[t.length-1],n=this._store||this._index,r=n[i].apply(n,t.slice(0,-1));r.onsuccess=function(){e(r.result)}})})}),[vA,gA].forEach(function(t){t.prototype.getAll||(t.prototype.getAll=function(t,n){var r=this,i=[];return new Promise(function(e){r.iterateCursor(t,function(t){t?(i.push(t.value),void 0===n||i.length!=n?t.continue():e(i)):e(i)})})})});var IA=1e4,TA="w:0.4.19",SA="FIS_v2",CA="https://firebaseinstallations.googleapis.com/v1",NA=36e5,Pr=((L={})["missing-app-config-values"]='Missing App configuration value: "{$valueName}"',L["not-registered"]="Firebase Installation is not registered.",L["installation-not-found"]="Firebase Installation not found.",L["request-failed"]='{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',L["app-offline"]="Could not process request. Application offline.",L["delete-pending-registration"]="Can't delete installation while there is a pending registration request.",L),AA=new Bo("installations","Installations",Pr);function kA(t){return t instanceof Vo&&t.code.includes("request-failed")}function OA(t){return t=t.projectId,CA+"/projects/"+t+"/installations"}function PA(t){return{token:t.token,requestStatus:2,expiresIn:(t=t.expiresIn,Number(t.replace("s","000"))),creationTime:Date.now()}}function RA(n,r){return po(this,void 0,void 0,function(){var e;return vo(this,function(t){switch(t.label){case 0:return[4,r.json()];case 1:return e=t.sent().error,[2,AA.create("request-failed",{requestName:n,serverCode:e.code,serverMessage:e.message,serverStatus:e.status})]}})})}function DA(t){return t=t.apiKey,new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function xA(t,e){return e=e.refreshToken,(t=DA(t)).append("Authorization",SA+" "+e),t}function LA(n){return po(this,void 0,void 0,function(){var e;return vo(this,function(t){switch(t.label){case 0:return[4,n()];case 1:return 500<=(e=t.sent()).status&&e.status<600?[2,n()]:[2,e]}})})}function MA(e){return new Promise(function(t){setTimeout(t,e)})}var FA=/^[cdef][\w-]{21}$/,UA="";function jA(t){return t.appName+"!"+t.appId}var VA=new Map;function qA(t,e){var n;BA(t=jA(t),e),n=t,t=e,(e=KA())&&e.postMessage({key:n,fid:t}),HA()}function BA(t,e){var n,r,i=VA.get(t);if(i)try{for(var o=yo(i),s=o.next();!s.done;s=o.next())(0,s.value)(e)}catch(t){n={error:t}}finally{try{s&&!s.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}}var WA=null;function KA(){return!WA&&"BroadcastChannel"in self&&((WA=new BroadcastChannel("[Firebase] FID Change")).onmessage=function(t){BA(t.data.key,t.data.fid)}),WA}function HA(){0===VA.size&&WA&&(WA.close(),WA=null)}var GA="firebase-installations-database",zA=1,QA="firebase-installations-store",YA=null;function XA(){return YA=YA||wA(GA,zA,function(t){0===t.oldVersion&&t.createObjectStore(QA)})}function JA(o,s){return po(this,void 0,void 0,function(){var e,n,r,i;return vo(this,function(t){switch(t.label){case 0:return e=jA(o),[4,XA()];case 1:return r=t.sent(),[4,(r=(n=r.transaction(QA,"readwrite")).objectStore(QA)).get(e)];case 2:return i=t.sent(),[4,r.put(s,e)];case 3:return t.sent(),[4,n.complete];case 4:return t.sent(),i&&i.fid===s.fid||qA(o,s.fid),[2,s]}})})}function $A(r){return po(this,void 0,void 0,function(){var e,n;return vo(this,function(t){switch(t.label){case 0:return e=jA(r),[4,XA()];case 1:return[4,(n=(n=t.sent()).transaction(QA,"readwrite")).objectStore(QA).delete(e)];case 2:return t.sent(),[4,n.complete];case 3:return t.sent(),[2]}})})}function ZA(s,a){return po(this,void 0,void 0,function(){var e,n,r,i,o;return vo(this,function(t){switch(t.label){case 0:return e=jA(s),[4,XA()];case 1:return r=t.sent(),[4,(r=(n=r.transaction(QA,"readwrite")).objectStore(QA)).get(e)];case 2:return i=t.sent(),void 0!==(o=a(i))?[3,4]:[4,r.delete(e)];case 3:return t.sent(),[3,6];case 4:return[4,r.put(o,e)];case 5:t.sent(),t.label=6;case 6:return[4,n.complete];case 7:return t.sent(),!o||i&&i.fid===o.fid||qA(s,o.fid),[2,o]}})})}function tk(i){return po(this,void 0,void 0,function(){var r,e,n;return vo(this,function(t){switch(t.label){case 0:return[4,ZA(i,function(t){var e,n;return t=nk(t||{fid:function(){try{var t=new Uint8Array(17);return(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16,t=btoa(String.fromCharCode.apply(String,mo(t))).replace(/\+/g,"-").replace(/\//g,"_").substr(0,22),FA.test(t)?t:UA}catch(t){return UA}}(),registrationStatus:0}),e=i,t=0!==(n=t).registrationStatus?1===n.registrationStatus?{installationEntry:n,registrationPromise:function(i){return po(this,void 0,void 0,function(){var e,n,r;return vo(this,function(t){switch(t.label){case 0:return[4,ek(i)];case 1:e=t.sent(),t.label=2;case 2:return 1!==e.registrationStatus?[3,5]:[4,MA(100)];case 3:return t.sent(),[4,ek(i)];case 4:return e=t.sent(),[3,2];case 5:return 0!==e.registrationStatus?[3,7]:[4,tk(i)];case 6:return r=t.sent(),n=r.installationEntry,(r=r.registrationPromise)?[2,r]:[2,n];case 7:return[2,e]}})})}(e)}:{installationEntry:n}:navigator.onLine?{installationEntry:n={fid:n.fid,registrationStatus:1,registrationTime:Date.now()},registrationPromise:e=function(r,i){return po(this,void 0,void 0,function(){var e,n;return vo(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,7]),[4,function(s){var a=i.fid;return po(this,void 0,void 0,function(){var e,n,r,i,o;return vo(this,function(t){switch(t.label){case 0:return e=OA(s),n=DA(s),o={fid:a,authVersion:SA,appId:s.appId,sdkVersion:TA},r={method:"POST",headers:n,body:JSON.stringify(o)},[4,LA(function(){return fetch(e,r)})];case 1:return(i=t.sent()).ok?[4,i.json()]:[3,3];case 2:return[2,{fid:(o=t.sent()).fid||a,registrationStatus:2,refreshToken:o.refreshToken,authToken:PA(o.authToken)}];case 3:return[4,RA("Create Installation",i)];case 4:throw t.sent()}})})}(r)];case 1:return e=t.sent(),[2,JA(r,e)];case 2:return kA(n=t.sent())&&409===n.customData.serverCode?[4,$A(r)]:[3,4];case 3:return t.sent(),[3,6];case 4:return[4,JA(r,{fid:i.fid,registrationStatus:0})];case 5:t.sent(),t.label=6;case 6:throw n;case 7:return[2]}})})}(e,n)}:{installationEntry:n,registrationPromise:Promise.reject(AA.create("app-offline"))},r=t.registrationPromise,t.installationEntry})];case 1:return(e=t.sent()).fid!==UA?[3,3]:(n={},[4,r]);case 2:return[2,(n.installationEntry=t.sent(),n)];case 3:return[2,{installationEntry:e,registrationPromise:r}]}})})}function ek(t){return ZA(t,function(t){if(!t)throw AA.create("installation-not-found");return nk(t)})}function nk(t){return 1===t.registrationStatus&&t.registrationTime+IA<Date.now()?{fid:t.fid,registrationStatus:0}:t}function rk(t,a){var u=t.appConfig,c=t.platformLoggerProvider;return po(this,void 0,void 0,function(){var n,r,i,o,s;return vo(this,function(t){switch(t.label){case 0:return e=(e=a).fid,n=OA(u)+"/"+e+"/authTokens:generate",r=xA(u,a),(s=c.getImmediate({optional:!0}))&&r.append("x-firebase-client",s.getPlatformInfoString()),s={installation:{sdkVersion:TA}},i={method:"POST",headers:r,body:JSON.stringify(s)},[4,LA(function(){return fetch(n,i)})];case 1:return(o=t.sent()).ok?[4,o.json()]:[3,3];case 2:return[2,PA(s=t.sent())];case 3:return[4,RA("Generate Auth Token",o)];case 4:throw t.sent()}var e})})}function ik(s,a){return void 0===a&&(a=!1),po(this,void 0,void 0,function(){var o,e,n;return vo(this,function(t){switch(t.label){case 0:return[4,ZA(s.appConfig,function(t){if(!sk(t))throw AA.create("not-registered");var e,n,r,i=t.authToken;if(a||2!==(e=i).requestStatus||(n=e,(r=Date.now())<n.creationTime||n.creationTime+n.expiresIn<r+NA)){if(1===i.requestStatus)return o=function(n,r){return po(this,void 0,void 0,function(){var e;return vo(this,function(t){switch(t.label){case 0:return[4,ok(n.appConfig)];case 1:e=t.sent(),t.label=2;case 2:return 1!==e.authToken.requestStatus?[3,5]:[4,MA(100)];case 3:return t.sent(),[4,ok(n.appConfig)];case 4:return e=t.sent(),[3,2];case 5:return 0===(e=e.authToken).requestStatus?[2,ik(n,r)]:[2,e]}})})}(s,a),t;if(!navigator.onLine)throw AA.create("app-offline");return e=t,i={requestStatus:1,requestTime:Date.now()},i=fo(fo({},e),{authToken:i}),o=function(i,o){return po(this,void 0,void 0,function(){var e,n,r;return vo(this,function(t){switch(t.label){case 0:return t.trys.push([0,3,,8]),[4,rk(i,o)];case 1:return e=t.sent(),r=fo(fo({},o),{authToken:e}),[4,JA(i.appConfig,r)];case 2:return t.sent(),[2,e];case 3:return!kA(n=t.sent())||401!==n.customData.serverCode&&404!==n.customData.serverCode?[3,5]:[4,$A(i.appConfig)];case 4:return t.sent(),[3,7];case 5:return r=fo(fo({},o),{authToken:{requestStatus:0}}),[4,JA(i.appConfig,r)];case 6:t.sent(),t.label=7;case 7:throw n;case 8:return[2]}})})}(s,i),i}return t})];case 1:return e=t.sent(),o?[4,o]:[3,3];case 2:return n=t.sent(),[3,4];case 3:n=e.authToken,t.label=4;case 4:return[2,n]}})})}function ok(t){return ZA(t,function(t){if(!sk(t))throw AA.create("not-registered");var e=t.authToken;return 1===e.requestStatus&&e.requestTime+IA<Date.now()?fo(fo({},t),{authToken:{requestStatus:0}}):t})}function sk(t){return void 0!==t&&2===t.registrationStatus}function ak(o,s){return po(this,void 0,void 0,function(){var n,r,i;return vo(this,function(t){switch(t.label){case 0:return e=(e=s).fid,n=OA(o)+"/"+e,i=xA(o,s),r={method:"DELETE",headers:i},[4,LA(function(){return fetch(n,r)})];case 1:return(i=t.sent()).ok?[3,3]:[4,RA("Delete Installation",i)];case 2:throw t.sent();case 3:return[2]}var e})})}function uk(t){return AA.create("missing-app-config-values",{valueName:t})}(ru=Vl).INTERNAL.registerComponent(new ds("installations",function(t){var e=t.getProvider("app").getImmediate(),n={appConfig:function(t){var e,n;if(!t||!t.options)throw uk("App Configuration");if(!t.name)throw uk("App Name");try{for(var r=yo(["projectId","apiKey","appId"]),i=r.next();!i.done;i=r.next()){var o=i.value;if(!t.options[o])throw uk(o)}}catch(t){e={error:t}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}(e),platformLoggerProvider:t.getProvider("platform-logger")};return{app:e,getId:function(){return function(r){return po(this,void 0,void 0,function(){var e,n;return vo(this,function(t){switch(t.label){case 0:return[4,tk(r.appConfig)];case 1:return e=t.sent(),n=e.installationEntry,(e.registrationPromise||ik(r)).catch(console.error),[2,n.fid]}})})}(n)},getToken:function(t){return function(e,n){return void 0===n&&(n=!1),po(this,void 0,void 0,function(){return vo(this,function(t){switch(t.label){case 0:return[4,function(n){return po(this,void 0,void 0,function(){var e;return vo(this,function(t){switch(t.label){case 0:return[4,tk(n)];case 1:return(e=t.sent().registrationPromise)?[4,e]:[3,3];case 2:t.sent(),t.label=3;case 3:return[2]}})})}(e.appConfig)];case 1:return t.sent(),[4,ik(e,n)];case 2:return[2,t.sent().token]}})})}(n,t)},delete:function(){return function(r){return po(this,void 0,void 0,function(){var e,n;return vo(this,function(t){switch(t.label){case 0:return[4,ZA(e=r.appConfig,function(t){if(!t||0!==t.registrationStatus)return t})];case 1:if(!(n=t.sent()))return[3,6];if(1!==n.registrationStatus)return[3,2];throw AA.create("delete-pending-registration");case 2:if(2!==n.registrationStatus)return[3,6];if(navigator.onLine)return[3,3];throw AA.create("app-offline");case 3:return[4,ak(e,n)];case 4:return t.sent(),[4,$A(e)];case 5:t.sent(),t.label=6;case 6:return[2]}})})}(n)},onIdChange:function(t){return function(t,e){KA();var n=jA(t);(t=VA.get(n))||(t=new Set,VA.set(n,t)),t.add(e)}(i=n.appConfig,r=t),function(){var t,e=r,n=jA(t=i);(t=VA.get(n))&&(t.delete(e),0===t.size&&VA.delete(n),HA())};var r,i}}},"PUBLIC")),ru.registerVersion("@firebase/installations","0.4.19");var ck,Pr=((L={})["missing-app-config-values"]='Missing App configuration value: "{$valueName}"',L["only-available-in-window"]="This method is available in a Window context.",L["only-available-in-sw"]="This method is available in a service worker context.",L["permission-default"]="The notification permission was not granted and dismissed instead.",L["permission-blocked"]="The notification permission was not granted and blocked instead.",L["unsupported-browser"]="This browser doesn't support the API's required to use the firebase SDK.",L["failed-service-worker-registration"]="We are unable to register the default service worker. {$browserErrorMessage}",L["token-subscribe-failed"]="A problem occurred while subscribing the user to FCM: {$errorInfo}",L["token-subscribe-no-token"]="FCM returned no token when subscribing the user to push.",L["token-unsubscribe-failed"]="A problem occurred while unsubscribing the user from FCM: {$errorInfo}",L["token-update-failed"]="A problem occurred while updating the user from FCM: {$errorInfo}",L["token-update-no-token"]="FCM returned no token when updating the user to push.",L["use-sw-after-get-token"]="The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.",L["invalid-sw-registration"]="The input to useServiceWorker() must be a ServiceWorkerRegistration.",L["invalid-bg-handler"]="The input to setBackgroundMessageHandler() must be a function.",L["invalid-vapid-key"]="The public VAPID key must be a string.",L["use-vapid-key-after-get-token"]="The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used.",L),hk=new Bo("messaging","Messaging",Pr),lk="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",fk="https://fcmregistrations.googleapis.com/v1",pk="FCM_MSG",dk="google.c.a.c_id";function vk(t){return t=new Uint8Array(t),btoa(String.fromCharCode.apply(String,mo(t))).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}(L=ck={}).PUSH_RECEIVED="push-received",L.NOTIFICATION_CLICKED="notification-clicked";var yk="fcm_token_details_db",gk=5,mk="fcm_token_object_Store";var _k="firebase-messaging-database",bk=1,wk="firebase-messaging-store",Ek=null;function Ik(){return Ek=Ek||wA(_k,bk,function(t){0===t.oldVersion&&t.createObjectStore(wk)})}function Tk(r){return po(this,void 0,void 0,function(){var e,n;return vo(this,function(t){switch(t.label){case 0:return e=Ck(r),[4,Ik()];case 1:return[4,t.sent().transaction(wk).objectStore(wk).get(e)];case 2:return(e=t.sent())?[2,e]:[3,3];case 3:return[4,function(s){return po(this,void 0,void 0,function(){var o,e=this;return vo(this,function(t){switch(t.label){case 0:return"databases"in indexedDB?[4,indexedDB.databases()]:[3,2];case 1:if(!t.sent().map(function(t){return t.name}).includes(yk))return[2,null];t.label=2;case 2:return o=null,[4,wA(yk,gk,function(i){return po(e,void 0,void 0,function(){var e,n,r;return vo(this,function(t){switch(t.label){case 0:return!(i.oldVersion<2)&&i.objectStoreNames.contains(mk)?[4,(r=i.transaction.objectStore(mk)).index("fcmSenderId").get(s)]:[2];case 1:return e=t.sent(),[4,r.clear()];case 2:if(t.sent(),!e)return[2];if(2===i.oldVersion){if(!(n=e).auth||!n.p256dh||!n.endpoint)return[2];o={token:n.fcmToken,createTime:null!==(r=n.createTime)&&void 0!==r?r:Date.now(),subscriptionOptions:{auth:n.auth,p256dh:n.p256dh,endpoint:n.endpoint,swScope:n.swScope,vapidKey:"string"==typeof n.vapidKey?n.vapidKey:vk(n.vapidKey)}}}else 3!==i.oldVersion&&4!==i.oldVersion||(o={token:(n=e).fcmToken,createTime:n.createTime,subscriptionOptions:{auth:vk(n.auth),p256dh:vk(n.p256dh),endpoint:n.endpoint,swScope:n.swScope,vapidKey:vk(n.vapidKey)}});return[2]}})})})];case 3:return t.sent().close(),[4,EA(yk)];case 4:return t.sent(),[4,EA("fcm_vapid_details_db")];case 5:return t.sent(),[4,EA("undefined")];case 6:return t.sent(),[2,function(t){if(t&&t.subscriptionOptions){var e=t.subscriptionOptions;return"number"==typeof t.createTime&&0<t.createTime&&"string"==typeof t.token&&0<t.token.length&&"string"==typeof e.auth&&0<e.auth.length&&"string"==typeof e.p256dh&&0<e.p256dh.length&&"string"==typeof e.endpoint&&0<e.endpoint.length&&"string"==typeof e.swScope&&0<e.swScope.length&&"string"==typeof e.vapidKey&&0<e.vapidKey.length}}(o)?o:null]}})})}(r.appConfig.senderId)];case 4:return(n=t.sent())?[4,Sk(r,n)]:[3,6];case 5:return t.sent(),[2,n];case 6:return[2]}})})}function Sk(r,i){return po(this,void 0,void 0,function(){var e,n;return vo(this,function(t){switch(t.label){case 0:return e=Ck(r),[4,Ik()];case 1:return[4,(n=(n=t.sent()).transaction(wk,"readwrite")).objectStore(wk).put(i,e)];case 2:return t.sent(),[4,n.complete];case 3:return t.sent(),[2,i]}})})}function Ck(t){return t.appConfig.appId}function Nk(r,i){return po(this,void 0,void 0,function(){var e,n;return vo(this,function(t){switch(t.label){case 0:return[4,kk(r)];case 1:e={method:"DELETE",headers:e=t.sent()},t.label=2;case 2:return t.trys.push([2,5,,6]),[4,fetch(Ak(r.appConfig)+"/"+i,e)];case 3:return[4,t.sent().json()];case 4:if((e=t.sent()).error)throw n=e.error.message,hk.create("token-unsubscribe-failed",{errorInfo:n});return[3,6];case 5:throw n=t.sent(),hk.create("token-unsubscribe-failed",{errorInfo:n});case 6:return[2]}})})}function Ak(t){return t=t.projectId,fk+"/projects/"+t+"/registrations"}function kk(t){var n=t.appConfig,r=t.installations;return po(this,void 0,void 0,function(){var e;return vo(this,function(t){switch(t.label){case 0:return[4,r.getToken()];case 1:return e=t.sent(),[2,new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n.apiKey,"x-goog-firebase-installations-auth":"FIS "+e})]}})})}function Ok(t){var e=t.p256dh,n=t.auth,e={web:{endpoint:t.endpoint,auth:n,p256dh:e}};return(t=t.vapidKey)!==lk&&(e.web.applicationPubKey=t),e}function Pk(u,c,h){return po(this,void 0,void 0,function(){var o,s,a;return vo(this,function(t){switch(t.label){case 0:if("granted"!==Notification.permission)throw hk.create("permission-blocked");return[4,function(n,r){return po(this,void 0,void 0,function(){var e;return vo(this,function(t){switch(t.label){case 0:return[4,n.pushManager.getSubscription()];case 1:return(e=t.sent())?[2,e]:[2,n.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:function(t){for(var t=(t+"=".repeat((4-t.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),e=atob(t),n=new Uint8Array(e.length),r=0;r<e.length;++r)n[r]=e.charCodeAt(r);return n}(r)})]}})})}(c,h)];case 1:return a=t.sent(),[4,Tk(u)];case 2:return o=t.sent(),s={vapidKey:h,swScope:c.scope,endpoint:a.endpoint,auth:vk(a.getKey("auth")),p256dh:vk(a.getKey("p256dh"))},o?[3,3]:[2,Dk(u,s)];case 3:if(e=o.subscriptionOptions,n=s.vapidKey===e.vapidKey,r=s.endpoint===e.endpoint,i=s.auth===e.auth,e=s.p256dh===e.p256dh,n&&r&&i&&e)return[3,8];t.label=4;case 4:return t.trys.push([4,6,,7]),[4,Nk(u,o.token)];case 5:return t.sent(),[3,7];case 6:return a=t.sent(),console.warn(a),[3,7];case 7:return[2,Dk(u,s)];case 8:return Date.now()>=o.createTime+6048e5?[2,function(i,o,s){return po(this,void 0,void 0,function(){var e,n,r;return vo(this,function(t){switch(t.label){case 0:return t.trys.push([0,3,,5]),[4,function(o,s){return po(this,void 0,void 0,function(){var e,n,r,i;return vo(this,function(t){switch(t.label){case 0:return[4,kk(o)];case 1:e=t.sent(),n=Ok(s.subscriptionOptions),n={method:"PATCH",headers:e,body:JSON.stringify(n)},t.label=2;case 2:return t.trys.push([2,5,,6]),[4,fetch(Ak(o.appConfig)+"/"+s.token,n)];case 3:return[4,t.sent().json()];case 4:return r=t.sent(),[3,6];case 5:throw i=t.sent(),hk.create("token-update-failed",{errorInfo:i});case 6:if(r.error)throw i=r.error.message,hk.create("token-update-failed",{errorInfo:i});if(!r.token)throw hk.create("token-update-no-token");return[2,r.token]}})})}(o,i)];case 1:return e=t.sent(),n=fo(fo({},i),{token:e,createTime:Date.now()}),[4,Sk(o,n)];case 2:return t.sent(),[2,e];case 3:return r=t.sent(),[4,Rk(o,s)];case 4:throw t.sent(),r;case 5:return[2]}})})}({token:o.token,createTime:Date.now(),subscriptionOptions:s},u,c)]:[2,o.token];case 9:return[2]}var e,n,r,i})})}function Rk(n,r){return po(this,void 0,void 0,function(){var e;return vo(this,function(t){switch(t.label){case 0:return[4,Tk(n)];case 1:return(e=t.sent())?[4,Nk(n,e.token)]:[3,4];case 2:return t.sent(),[4,function(r){return po(this,void 0,void 0,function(){var e,n;return vo(this,function(t){switch(t.label){case 0:return e=Ck(r),[4,Ik()];case 1:return[4,(n=(n=t.sent()).transaction(wk,"readwrite")).objectStore(wk).delete(e)];case 2:return t.sent(),[4,n.complete];case 3:return t.sent(),[2]}})})}(n)];case 3:t.sent(),t.label=4;case 4:return[4,r.pushManager.getSubscription()];case 5:return(e=t.sent())?[2,e.unsubscribe()]:[2,!0]}})})}function Dk(n,r){return po(this,void 0,void 0,function(){var e;return vo(this,function(t){switch(t.label){case 0:return[4,function(o,s){return po(this,void 0,void 0,function(){var e,n,r,i;return vo(this,function(t){switch(t.label){case 0:return[4,kk(o)];case 1:e=t.sent(),n=Ok(s),n={method:"POST",headers:e,body:JSON.stringify(n)},t.label=2;case 2:return t.trys.push([2,5,,6]),[4,fetch(Ak(o.appConfig),n)];case 3:return[4,t.sent().json()];case 4:return r=t.sent(),[3,6];case 5:throw i=t.sent(),hk.create("token-subscribe-failed",{errorInfo:i});case 6:if(r.error)throw i=r.error.message,hk.create("token-subscribe-failed",{errorInfo:i});if(!r.token)throw hk.create("token-subscribe-no-token");return[2,r.token]}})})}(n,r)];case 1:return e={token:e=t.sent(),createTime:Date.now(),subscriptionOptions:r},[4,Sk(n,e)];case 2:return t.sent(),[2,e.token]}})})}function xk(t){return"object"==typeof t&&t&&dk in t}function Lk(e){return new Promise(function(t){setTimeout(t,e)})}var Mk=(Object.defineProperty(Fk.prototype,"app",{get:function(){return this.firebaseDependencies.app},enumerable:!1,configurable:!0}),Fk.prototype.setBackgroundMessageHandler=function(t){if(this.isOnBackgroundMessageUsed=!1,!t||"function"!=typeof t)throw hk.create("invalid-bg-handler");this.bgMessageHandler=t},Fk.prototype.onBackgroundMessage=function(t){var e=this;return this.isOnBackgroundMessageUsed=!0,this.bgMessageHandler=t,function(){e.bgMessageHandler=null}},Fk.prototype.getToken=function(){var n;return po(this,void 0,void 0,function(){var e;return vo(this,function(t){switch(t.label){case 0:return this.vapidKey?[3,2]:[4,Tk(this.firebaseDependencies)];case 1:e=t.sent(),this.vapidKey=null!==(n=null===(n=null==e?void 0:e.subscriptionOptions)||void 0===n?void 0:n.vapidKey)&&void 0!==n?n:lk,t.label=2;case 2:return[2,Pk(this.firebaseDependencies,self.registration,this.vapidKey)]}})})},Fk.prototype.deleteToken=function(){return Rk(this.firebaseDependencies,self.registration)},Fk.prototype.requestPermission=function(){throw hk.create("only-available-in-window")},Fk.prototype.usePublicVapidKey=function(t){if(null!==this.vapidKey)throw hk.create("use-vapid-key-after-get-token");if("string"!=typeof t||0===t.length)throw hk.create("invalid-vapid-key");this.vapidKey=t},Fk.prototype.useServiceWorker=function(){throw hk.create("only-available-in-window")},Fk.prototype.onMessage=function(){throw hk.create("only-available-in-window")},Fk.prototype.onTokenRefresh=function(){throw hk.create("only-available-in-window")},Fk.prototype.onPush=function(c){return po(this,void 0,void 0,function(){var s,a,u;return vo(this,function(t){switch(t.label){case 0:return(u=function(){var t=c.data;if(!t)return null;try{return t.json()}catch(t){return null}}())?[4,Uk()]:(console.debug("FirebaseMessaging: failed to get parsed MessagePayload from the PushEvent. Skip handling the push."),[2]);case 1:return(s=t.sent()).some(function(t){return"visible"===t.visibilityState&&!t.url.startsWith("chrome-extension://")})?[2,function(t,e){var n,r;e.isFirebaseMessaging=!0,e.messageType=ck.PUSH_RECEIVED;try{for(var i=yo(t),o=i.next();!o.done;o=i.next())o.value.postMessage(e)}catch(t){n={error:t}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}}(s,u)]:(a=!1,u.notification?[4,((o=fo({},(r=u).notification)).data=((i={})[pk]=r,i),n=(e=o).actions,r=Notification.maxActions,n&&r&&n.length>r&&console.warn("This browser only supports "+r+" actions. The remaining actions will not be displayed."),self.registration.showNotification(null!==(r=e.title)&&void 0!==r?r:"",e))]:[3,3]);case 2:t.sent(),a=!0,t.label=3;case 3:return!0===a&&!1===this.isOnBackgroundMessageUsed?[2]:(this.bgMessageHandler&&(o={from:(i=u).from,collapseKey:i.collapse_key},n=o,(r=i).notification&&(n.notification={},(e=r.notification.title)&&(n.notification.title=e),(e=r.notification.body)&&(n.notification.body=e),(r=r.notification.image)&&(n.notification.image=r)),i.data&&(o.data=i.data),n=o,(r=i).fcmOptions&&(n.fcmOptions={},(i=r.fcmOptions.link)&&(n.fcmOptions.link=i),(r=r.fcmOptions.analytics_label)&&(n.fcmOptions.analyticsLabel=r)),u=o,"function"==typeof this.bgMessageHandler?this.bgMessageHandler(u):this.bgMessageHandler.next(u)),[4,Lk(1e3)]);case 4:return t.sent(),[2]}var e,n,r,i,o})})},Fk.prototype.onSubChange=function(n){var r;return po(this,void 0,void 0,function(){var e;return vo(this,function(t){switch(t.label){case 0:return n.newSubscription?[3,2]:[4,Rk(this.firebaseDependencies,self.registration)];case 1:return t.sent(),[2];case 2:return[4,Tk(this.firebaseDependencies)];case 3:return e=t.sent(),[4,Rk(this.firebaseDependencies,self.registration)];case 4:return t.sent(),[4,Pk(this.firebaseDependencies,self.registration,null!==(r=null===(r=null==e?void 0:e.subscriptionOptions)||void 0===r?void 0:r.vapidKey)&&void 0!==r?r:lk)];case 5:return t.sent(),[2]}})})},Fk.prototype.onNotificationClick=function(u){var c;return po(this,void 0,void 0,function(){var r,i,o,s,a;return vo(this,function(t){switch(t.label){case 0:return!(r=null===(c=null===(c=u.notification)||void 0===c?void 0:c.data)||void 0===c?void 0:c[pk])||u.action?[2]:(u.stopImmediatePropagation(),u.notification.close(),n=null!==(e=null===(e=r.fcmOptions)||void 0===e?void 0:e.link)&&void 0!==e?e:null===(n=r.notification)||void 0===n?void 0:n.click_action,(i=n||(xk(r.data)?self.location.origin:null))?(o=new URL(i,self.location.href),s=new URL(self.location.origin),o.host!==s.host?[2]:[4,function(u){return po(this,void 0,void 0,function(){var e,n,r,i,o,s,a;return vo(this,function(t){switch(t.label){case 0:return[4,Uk()];case 1:e=t.sent();try{for(n=yo(e),r=n.next();!r.done;r=n.next())if(i=r.value,o=new URL(i.url,self.location.href),u.host===o.host)return[2,i]}catch(t){s={error:t}}finally{try{r&&!r.done&&(a=n.return)&&a.call(n)}finally{if(s)throw s.error}}return[2,null]}})})}(o)]):[2]);case 1:return(a=t.sent())?[3,4]:[4,self.clients.openWindow(i)];case 2:return a=t.sent(),[4,Lk(3e3)];case 3:return t.sent(),[3,6];case 4:return[4,a.focus()];case 5:a=t.sent(),t.label=6;case 6:return a?(r.messageType=ck.NOTIFICATION_CLICKED,r.isFirebaseMessaging=!0,[2,a.postMessage(r)]):[2]}var e,n})})},Fk);function Fk(t){var e=this;this.firebaseDependencies=t,this.isOnBackgroundMessageUsed=null,this.vapidKey=null,this.bgMessageHandler=null,self.addEventListener("push",function(t){t.waitUntil(e.onPush(t))}),self.addEventListener("pushsubscriptionchange",function(t){t.waitUntil(e.onSubChange(t))}),self.addEventListener("notificationclick",function(t){t.waitUntil(e.onNotificationClick(t))})}function Uk(){return self.clients.matchAll({type:"window",includeUncontrolled:!0})}var jk=(Object.defineProperty(Vk.prototype,"app",{get:function(){return this.firebaseDependencies.app},enumerable:!1,configurable:!0}),Vk.prototype.messageEventListener=function(i){return po(this,void 0,void 0,function(){var n,r;return vo(this,function(t){switch(t.label){case 0:return(n=i.data).isFirebaseMessaging?(this.onMessageCallback&&n.messageType===ck.PUSH_RECEIVED&&("function"==typeof this.onMessageCallback?this.onMessageCallback((delete(e=Object.assign({},n)).messageType,delete e.isFirebaseMessaging,e)):this.onMessageCallback.next(Object.assign({},n))),xk(r=n.data)&&"1"===r["google.c.a.e"]?[4,this.logEvent(n.messageType,r)]:[3,2]):[2];case 1:t.sent(),t.label=2;case 2:return[2]}var e})})},Vk.prototype.getVapidKey=function(){return this.vapidKey},Vk.prototype.getSwReg=function(){return this.swRegistration},Vk.prototype.getToken=function(e){return po(this,void 0,void 0,function(){return vo(this,function(t){switch(t.label){case 0:return"default"!==Notification.permission?[3,2]:[4,Notification.requestPermission()];case 1:t.sent(),t.label=2;case 2:if("granted"!==Notification.permission)throw hk.create("permission-blocked");return[4,this.updateVapidKey(null==e?void 0:e.vapidKey)];case 3:return t.sent(),[4,this.updateSwReg(null==e?void 0:e.serviceWorkerRegistration)];case 4:return t.sent(),[2,Pk(this.firebaseDependencies,this.swRegistration,this.vapidKey)]}})})},Vk.prototype.updateVapidKey=function(e){return po(this,void 0,void 0,function(){return vo(this,function(t){return e?this.vapidKey=e:this.vapidKey||(this.vapidKey=lk),[2]})})},Vk.prototype.updateSwReg=function(e){return po(this,void 0,void 0,function(){return vo(this,function(t){switch(t.label){case 0:return e||this.swRegistration?[3,2]:[4,this.registerDefaultSw()];case 1:t.sent(),t.label=2;case 2:if(!e&&this.swRegistration)return[2];if(!(e instanceof ServiceWorkerRegistration))throw hk.create("invalid-sw-registration");return this.swRegistration=e,[2]}})})},Vk.prototype.registerDefaultSw=function(){return po(this,void 0,void 0,function(){var e;return vo(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),e=this,[4,navigator.serviceWorker.register("/firebase-messaging-sw.js",{scope:"/firebase-cloud-messaging-push-scope"})];case 1:return e.swRegistration=t.sent(),this.swRegistration.update().catch(function(){}),[3,3];case 2:throw e=t.sent(),hk.create("failed-service-worker-registration",{browserErrorMessage:e.message});case 3:return[2]}})})},Vk.prototype.deleteToken=function(){return po(this,void 0,void 0,function(){return vo(this,function(t){switch(t.label){case 0:return this.swRegistration?[3,2]:[4,this.registerDefaultSw()];case 1:t.sent(),t.label=2;case 2:return[2,Rk(this.firebaseDependencies,this.swRegistration)]}})})},Vk.prototype.requestPermission=function(){return po(this,void 0,void 0,function(){var e;return vo(this,function(t){switch(t.label){case 0:return"granted"===Notification.permission?[2]:[4,Notification.requestPermission()];case 1:if("granted"===(e=t.sent()))return[2];throw"denied"===e?hk.create("permission-blocked"):hk.create("permission-default")}})})},Vk.prototype.usePublicVapidKey=function(t){if(null!==this.vapidKey)throw hk.create("use-vapid-key-after-get-token");if("string"!=typeof t||0===t.length)throw hk.create("invalid-vapid-key");this.vapidKey=t},Vk.prototype.useServiceWorker=function(t){if(!(t instanceof ServiceWorkerRegistration))throw hk.create("invalid-sw-registration");if(this.swRegistration)throw hk.create("use-sw-after-get-token");this.swRegistration=t},Vk.prototype.onMessage=function(t){var e=this;return this.onMessageCallback=t,function(){e.onMessageCallback=null}},Vk.prototype.setBackgroundMessageHandler=function(){throw hk.create("only-available-in-sw")},Vk.prototype.onBackgroundMessage=function(){throw hk.create("only-available-in-sw")},Vk.prototype.onTokenRefresh=function(){return function(){}},Vk.prototype.logEvent=function(n,r){return po(this,void 0,void 0,function(){var e;return vo(this,function(t){switch(t.label){case 0:return e=function(){switch(n){case ck.NOTIFICATION_CLICKED:return"notification_open";case ck.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}(),[4,this.firebaseDependencies.analyticsProvider.get()];case 1:return t.sent().logEvent(e,{message_id:r[dk],message_name:r["google.c.a.c_l"],message_time:r["google.c.a.ts"],message_device_time:Math.floor(Date.now()/1e3)}),[2]}})})},Vk);function Vk(t){var e=this;this.firebaseDependencies=t,this.vapidKey=null,this.onMessageCallback=null,navigator.serviceWorker.addEventListener("message",function(t){return e.messageEventListener(t)})}function qk(t){return hk.create("missing-app-config-values",{valueName:t})}function Bk(){return self&&"ServiceWorkerGlobalScope"in self?"indexedDB"in self&&null!==indexedDB&&"PushManager"in self&&"Notification"in self&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey"):"indexedDB"in window&&null!==indexedDB&&navigator.cookieEnabled&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}Pr={isSupported:Bk},Vl.INTERNAL.registerComponent(new ds("messaging",function(t){var e=t.getProvider("app").getImmediate(),t={app:e,appConfig:function(t){var e,n;if(!t||!t.options)throw qk("App Configuration Object");if(!t.name)throw qk("App Name");var r=t.options;try{for(var i=yo(["projectId","apiKey","appId","messagingSenderId"]),o=i.next();!o.done;o=i.next()){var s=o.value;if(!r[s])throw qk(s)}}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return{appName:t.name,projectId:r.projectId,apiKey:r.apiKey,appId:r.appId,senderId:r.messagingSenderId}}(e),installations:t.getProvider("installations").getImmediate(),analyticsProvider:t.getProvider("analytics-internal")};if(!Bk())throw hk.create("unsupported-browser");return new(self&&"ServiceWorkerGlobalScope"in self?Mk:jk)(t)},"PUBLIC").setServiceProps(Pr));var Wk,Kk="firebasestorage.googleapis.com",Hk="storageBucket",Gk=(lo(zk,Wk=Vo),zk.prototype.codeEquals=function(t){return Yk(t)===this.code},Object.defineProperty(zk.prototype,"message",{get:function(){return this.customData.serverResponse?this.message+"\n"+this.customData.serverResponse:this.message},enumerable:!1,configurable:!0}),Object.defineProperty(zk.prototype,"serverResponse",{get:function(){return this.customData.serverResponse},set:function(t){this.customData.serverResponse=t},enumerable:!1,configurable:!0}),zk);function zk(t,e){return(t=Wk.call(this,Yk(t),"Firebase Storage: "+e+" ("+Yk(t)+")")||this).customData={serverResponse:null},Object.setPrototypeOf(t,zk.prototype),t}var Qk={UNKNOWN:"unknown",OBJECT_NOT_FOUND:"object-not-found",BUCKET_NOT_FOUND:"bucket-not-found",PROJECT_NOT_FOUND:"project-not-found",QUOTA_EXCEEDED:"quota-exceeded",UNAUTHENTICATED:"unauthenticated",UNAUTHORIZED:"unauthorized",RETRY_LIMIT_EXCEEDED:"retry-limit-exceeded",INVALID_CHECKSUM:"invalid-checksum",CANCELED:"canceled",INVALID_EVENT_NAME:"invalid-event-name",INVALID_URL:"invalid-url",INVALID_DEFAULT_BUCKET:"invalid-default-bucket",NO_DEFAULT_BUCKET:"no-default-bucket",CANNOT_SLICE_BLOB:"cannot-slice-blob",SERVER_FILE_WRONG_SIZE:"server-file-wrong-size",NO_DOWNLOAD_URL:"no-download-url",INVALID_ARGUMENT:"invalid-argument",INVALID_ARGUMENT_COUNT:"invalid-argument-count",APP_DELETED:"app-deleted",INVALID_ROOT_OPERATION:"invalid-root-operation",INVALID_FORMAT:"invalid-format",INTERNAL_ERROR:"internal-error",UNSUPPORTED_ENVIRONMENT:"unsupported-environment"};function Yk(t){return"storage/"+t}function Xk(){return new Gk(Qk.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function Jk(){return new Gk(Qk.CANCELED,"User canceled the upload/download.")}function $k(){return new Gk(Qk.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function Zk(t){return new Gk(Qk.INVALID_ARGUMENT,t)}function tO(){return new Gk(Qk.APP_DELETED,"The Firebase app was deleted.")}function eO(t){return new Gk(Qk.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function nO(t,e){return new Gk(Qk.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function rO(t){throw new Gk(Qk.INTERNAL_ERROR,"Internal error: "+t)}function iO(t,e){this.data=t,this.contentType=e||null}var oO={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};function sO(t,e){switch(t){case oO.RAW:return new iO(aO(e));case oO.BASE64:case oO.BASE64URL:return new iO(uO(t,e));case oO.DATA_URL:return new iO((t=new cO(t=e)).base64?uO(oO.BASE64,t.rest):function(t){var e;try{e=decodeURIComponent(t)}catch(t){throw nO(oO.DATA_URL,"Malformed data URL.")}return aO(e)}(t.rest),new cO(e).contentType)}throw Xk()}function aO(t){for(var e=[],n=0;n<t.length;n++){var r=t.charCodeAt(n);r<=127?e.push(r):r<=2047?e.push(192|r>>6,128|63&r):55296==(64512&r)?n<t.length-1&&56320==(64512&t.charCodeAt(n+1))?(r=65536|(1023&r)<<10|1023&t.charCodeAt(++n),e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)):e.push(239,191,189):56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function uO(t,e){switch(t){case oO.BASE64:var n=-1!==e.indexOf("-"),r=-1!==e.indexOf("_");if(n||r)throw nO(t,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?");break;case oO.BASE64URL:if(r=-1!==e.indexOf("+"),n=-1!==e.indexOf("/"),r||n)throw nO(t,"Invalid character '"+(r?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/")}var i;try{i=atob(e)}catch(e){throw nO(t,"Invalid character found")}for(var o=new Uint8Array(i.length),s=0;s<i.length;s++)o[s]=i.charCodeAt(s);return o}function cO(t){var e;if(this.base64=!1,(this.contentType=null)===(e=t.match(/^data:([^,]+)?,/)))throw nO(oO.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");var n,r=e[1]||null;null!=r&&(this.base64=(n=";base64",(e=r).length>=n.length&&e.substring(e.length-n.length)===n),this.contentType=this.base64?r.substring(0,r.length-";base64".length):r),this.rest=t.substring(t.indexOf(",")+1)}var hO,lO="running",fO="pausing",pO="paused",dO="success",vO="canceling",yO="canceled",gO="error",mO={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function _O(t){switch(t){case lO:case fO:case vO:return mO.RUNNING;case pO:return mO.PAUSED;case dO:return mO.SUCCESS;case yO:return mO.CANCELED;case gO:default:return mO.ERROR}}(L=hO={})[L.NO_ERROR=0]="NO_ERROR",L[L.NETWORK_ERROR=1]="NETWORK_ERROR",L[L.ABORT=2]="ABORT";var bO=(wO.prototype.send=function(t,e,n,r){if(this.sent_)throw rO("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(e,t,!0),void 0!==r)for(var i in r)r.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,r[i].toString());return void 0!==n?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_},wO.prototype.getErrorCode=function(){if(!this.sent_)throw rO("cannot .getErrorCode() before sending");return this.errorCode_},wO.prototype.getStatus=function(){if(!this.sent_)throw rO("cannot .getStatus() before sending");try{return this.xhr_.status}catch(t){return-1}},wO.prototype.getResponseText=function(){if(!this.sent_)throw rO("cannot .getResponseText() before sending");return this.xhr_.responseText},wO.prototype.abort=function(){this.xhr_.abort()},wO.prototype.getResponseHeader=function(t){return this.xhr_.getResponseHeader(t)},wO.prototype.addUploadProgressListener=function(t){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",t)},wO.prototype.removeUploadProgressListener=function(t){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",t)},wO);function wO(){var e=this;this.sent_=!1,this.xhr_=new XMLHttpRequest,this.errorCode_=hO.NO_ERROR,this.sendPromise_=new Promise(function(t){e.xhr_.addEventListener("abort",function(){e.errorCode_=hO.ABORT,t(e)}),e.xhr_.addEventListener("error",function(){e.errorCode_=hO.NETWORK_ERROR,t(e)}),e.xhr_.addEventListener("load",function(){t(e)})})}var EO=(IO.prototype.createXhrIo=function(){return new bO},IO);function IO(){}function TO(t){return"string"==typeof t||t instanceof String}function SO(t){return CO()&&t instanceof Blob}function CO(){return"undefined"!=typeof Blob}function NO(t,e,n,r){if(r<e)throw new Gk(Qk.INVALID_ARGUMENT,"Invalid value for '"+t+"'. Expected "+e+" or greater.");if(n<r)throw new Gk(Qk.INVALID_ARGUMENT,"Invalid value for '"+t+"'. Expected "+n+" or less.")}var AO=(kO.prototype.size=function(){return this.size_},kO.prototype.type=function(){return this.type_},kO.prototype.slice=function(t,e){if(SO(this.data_)){var n=this.data_;return null===(i=(r=t,i=e,n.webkitSlice?n.webkitSlice(r,i):n.mozSlice?n.mozSlice(r,i):n.slice?n.slice(r,i):null))?null:new kO(i)}var r,i;return new kO(new Uint8Array(this.data_.buffer,t,e-t),!0)},kO.getBlob=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(CO()){var n=t.map(function(t){return t instanceof kO?t.data_:t});return new kO(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0;if(void 0!==n){for(var r=new n,i=0;i<t.length;i++)r.append(t[i]);return r.getBlob()}if(CO())return new Blob(t);throw new Gk(Qk.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}.apply(null,n))}var n=t.map(function(t){return TO(t)?sO(oO.RAW,t).data:t.data_}),r=0;n.forEach(function(t){r+=t.byteLength});var i=new Uint8Array(r),o=0;return n.forEach(function(t){for(var e=0;e<t.length;e++)i[o++]=t[e]}),new kO(i,!0)},kO.prototype.uploadData=function(){return this.data_},kO);function kO(t,e){var n=0,r="";SO(t)?(n=(this.data_=t).size,r=t.type):t instanceof ArrayBuffer?(e?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),n=this.data_.length):t instanceof Uint8Array&&(e?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),n=t.length),this.size_=n,this.type_=r}var OO=(Object.defineProperty(PO.prototype,"path",{get:function(){return this.path_},enumerable:!1,configurable:!0}),Object.defineProperty(PO.prototype,"isRoot",{get:function(){return 0===this.path.length},enumerable:!1,configurable:!0}),PO.prototype.fullServerUrl=function(){var t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)},PO.prototype.bucketOnlyServerUrl=function(){return"/b/"+encodeURIComponent(this.bucket)+"/o"},PO.makeFromBucketSpec=function(t){var e;try{e=PO.makeFromUrl(t)}catch(e){return new PO(t,"")}if(""===e.path)return e;throw new Gk(Qk.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")},PO.makeFromUrl=function(t){var e,n=null,r=new RegExp("^gs://([A-Za-z0-9.\\-_]+)(/(.*))?$","i");function i(t){t.path_=decodeURIComponent(t.path)}for(var o=Kk.replace(/[.]/g,"\\."),s=[{regex:r,indices:{bucket:1,path:3},postModify:function(t){"/"===t.path.charAt(t.path.length-1)&&(t.path_=t.path_.slice(0,-1))}},{regex:new RegExp("^https?://"+o+"/v[A-Za-z0-9_]+/b/([A-Za-z0-9.\\-_]+)/o(/([^?#]*).*)?$","i"),indices:{bucket:1,path:3},postModify:i},{regex:new RegExp("^https?://(?:storage.googleapis.com|storage.cloud.google.com)/([A-Za-z0-9.\\-_]+)/([^?#]*)","i"),indices:{bucket:1,path:2},postModify:i}],a=0;a<s.length;a++){var u=s[a],c=u.regex.exec(t);if(c){n=new PO(c[u.indices.bucket],c[u.indices.path]||""),u.postModify(n);break}}if(null==n)throw e=t,new Gk(Qk.INVALID_URL,"Invalid URL '"+e+"'.");return n},PO);function PO(t,e){this.bucket=t,this.path_=e}function RO(t){var e;try{e=JSON.parse(t)}catch(t){return null}return"object"!=typeof e||Array.isArray(e)?null:e}function DO(t){var e=t.lastIndexOf("/",t.length-2);return-1===e?t:t.slice(e+1)}function xO(t){return"https://"+Kk+"/v0"+t}function LO(t){var e,n=encodeURIComponent,r="?";for(e in t)t.hasOwnProperty(e)&&(r=r+(n(e)+"="+n(t[e]))+"&");return r.slice(0,-1)}function MO(t,e){return e}var FO=function(t,e,n,r){this.server=t,this.local=e||t,this.writable=!!n,this.xform=r||MO},UO=null;function jO(){if(UO)return UO;var t=[];t.push(new FO("bucket")),t.push(new FO("generation")),t.push(new FO("metageneration")),t.push(new FO("name","fullPath",!0));var e=new FO("name");return e.xform=function(t,e){return!TO(e)||e.length<2?e:DO(e)},t.push(e),(e=new FO("size")).xform=function(t,e){return void 0!==e?Number(e):e},t.push(e),t.push(new FO("timeCreated")),t.push(new FO("updated")),t.push(new FO("md5Hash",null,!0)),t.push(new FO("cacheControl",null,!0)),t.push(new FO("contentDisposition",null,!0)),t.push(new FO("contentEncoding",null,!0)),t.push(new FO("contentLanguage",null,!0)),t.push(new FO("contentType",null,!0)),t.push(new FO("metadata","customMetadata",!0)),UO=t}function VO(t,e,n){return null===(e=RO(e))?null:function(t,e,n){for(var r,i,o={type:"file"},s=n.length,a=0;a<s;a++){var u=n[a];o[u.local]=u.xform(o,e[u.server])}return r=o,i=t,Object.defineProperty(r,"ref",{get:function(){var t=r.bucket,e=r.fullPath,e=new OO(t,e);return i.makeStorageReference(e)}}),o}(t,e,n)}function qO(t,e){for(var n={},r=e.length,i=0;i<r;i++){var o=e[i];o.writable&&(n[o.server]=t[o.local])}return JSON.stringify(n)}var BO="prefixes",WO="items";var KO=function(t,e,n,r){this.url=t,this.method=e,this.handler=n,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]};function HO(t){if(!t)throw Xk()}function GO(n,r){return function(t,e){return HO(null!==(e=VO(n,e,r))),e}}function zO(o,s){return function(t,e){return HO(null!==(n=o,r=s,e=null===(i=RO(i=e))?null:function(t,e,n){var r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n[BO])for(var i=0,o=n[BO];i<o.length;i++){var s=o[i].replace(/\/$/,""),a=t.makeStorageReference(new OO(e,s));r.prefixes.push(a)}if(n[WO])for(var u=0,c=n[WO];u<c.length;u++){var h=c[u],a=t.makeStorageReference(new OO(e,h.name));r.items.push(a)}return r}(n,r,i))),e;var n,r,i}}function QO(i){return function(t,e){var n,r=401===t.getStatus()?new Gk(Qk.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again."):402===t.getStatus()?(n=i.bucket,new Gk(Qk.QUOTA_EXCEEDED,"Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")):403===t.getStatus()?(r=i.path,new Gk(Qk.UNAUTHORIZED,"User does not have permission to access '"+r+"'.")):e;return r.serverResponse=e.serverResponse,r}}function YO(r){var i=QO(r);return function(t,e){var n=i(t,e);return 404===t.getStatus()&&(t=r.path,n=new Gk(Qk.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")),n.serverResponse=e.serverResponse,n}}function XO(t,e,n){var r=xO(e.fullServerUrl()),i=t.maxOperationRetryTime;return(i=new KO(r,"GET",GO(t,n),i)).errorHandler=YO(e),i}function JO(t,e,n){return(n=Object.assign({},n)).fullPath=t.path,n.size=e.size(),n.contentType||(n.contentType=(t=e,(e=null)&&e.contentType||t&&t.type()||"application/octet-stream")),n}function $O(t,e,n,r){this.current=t,this.total=e,this.finalized=!!n,this.metadata=r||null}function ZO(t,e){var n=null;try{n=t.getResponseHeader("X-Goog-Upload-Status")}catch(t){HO(!1)}return HO(!!n&&-1!==(e||["active"]).indexOf(n)),n}function tP(t,e,n){"function"==typeof t||null!=e||null!=n?(this.next=t,this.error=e,this.complete=n):(this.next=t.next,this.error=t.error,this.complete=t.complete)}function eP(t,e,n,r,i,o){this.bytesTransferred=t,this.totalBytes=e,this.state=n,this.metadata=r,this.task=i,this.ref=o}function nP(n){return function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];Promise.resolve().then(function(){return n.apply(void 0,t)})}}var rP=(iP.prototype._makeProgressCallback=function(){var e=this,n=this._transferred;return function(t){return e._updateProgress(n+t)}},iP.prototype._shouldDoResumable=function(t){return 262144<t.size()},iP.prototype._start=function(){this._state===lO&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())},iP.prototype._resolveToken=function(e){var n=this;this._ref.storage.getAuthToken().then(function(t){switch(n._state){case lO:e(t);break;case vO:n._transition(yO);break;case fO:n._transition(pO)}})},iP.prototype._createResumable=function(){var u=this;this._resolveToken(function(t){var e,n,r,i,o,s,a,e=(e=u._ref.storage,n=u._ref._location,r=u._mappings,i=u._blob,o=u._metadata,s=n.bucketOnlyServerUrl(),a=JO(n,i,o),o={name:a.fullPath},s=xO(s),i={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":i.size(),"X-Goog-Upload-Header-Content-Type":a.contentType,"Content-Type":"application/json; charset=utf-8"},r=qO(a,r),e=e.maxUploadRetryTime,(e=new KO(s,"POST",function(t){var e;ZO(t);try{e=t.getResponseHeader("X-Goog-Upload-URL")}catch(t){HO(!1)}return HO(TO(e)),e},e)).urlParams=o,e.headers=i,e.body=r,e.errorHandler=QO(n),e),t=u._ref.storage.makeRequest(e,t);(u._request=t).getPromise().then(function(t){u._request=void 0,u._uploadUrl=t,u._needToFetchStatus=!1,u.completeTransitions_()},u._errorHandler)})},iP.prototype._fetchStatus=function(){var o=this,s=this._uploadUrl;this._resolveToken(function(t){var e,n,r,i,e=(e=o._ref.storage,n=o._ref._location,r=s,i=o._blob,e=e.maxUploadRetryTime,(e=new KO(r,"POST",function(t){var e=ZO(t,["active","final"]),n=null;try{n=t.getResponseHeader("X-Goog-Upload-Size-Received")}catch(t){HO(!1)}n||HO(!1);var r=Number(n);return HO(!isNaN(r)),new $O(r,i.size(),"final"===e)},e)).headers={"X-Goog-Upload-Command":"query"},e.errorHandler=QO(n),e),t=o._ref.storage.makeRequest(e,t);(o._request=t).getPromise().then(function(t){o._request=void 0,o._updateProgress(t.current),o._needToFetchStatus=!1,t.finalized&&(o._needToFetchMetadata=!0),o.completeTransitions_()},o._errorHandler)})},iP.prototype._continueUpload=function(){var n=this,r=262144*this._chunkMultiplier,i=new $O(this._transferred,this._blob.size()),o=this._uploadUrl;this._resolveToken(function(t){var e;try{e=function(t,o,e,s,n,a,r,i){var u=new $O(0,0);if(r?(u.current=r.current,u.total=r.total):(u.current=0,u.total=s.size()),s.size()!==u.total)throw new Gk(Qk.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.");var c=u.total-u.current,h=c;if(0<n&&(h=Math.min(h,n)),n=(r=u.current)+h,c={"X-Goog-Upload-Command":h===c?"upload, finalize":"upload","X-Goog-Upload-Offset":u.current},null===(r=s.slice(r,n)))throw $k();return n=o.maxUploadRetryTime,(n=new KO(e,"POST",function(t,e){var n=ZO(t,["active","final"]),r=u.current+h,i=s.size(),e="final"===n?GO(o,a)(t,e):null;return new $O(r,i,"final"===n,e)},n)).headers=c,n.body=r.uploadData(),n.progressCallback=i||null,n.errorHandler=QO(t),n}(n._ref._location,n._ref.storage,o,n._blob,r,n._mappings,i,n._makeProgressCallback())}catch(t){return n._error=t,void n._transition(gO)}t=n._ref.storage.makeRequest(e,t),(n._request=t).getPromise().then(function(t){n._increaseMultiplier(),n._request=void 0,n._updateProgress(t.current),t.finalized?(n._metadata=t.metadata,n._transition(dO)):n.completeTransitions_()},n._errorHandler)})},iP.prototype._increaseMultiplier=function(){262144*this._chunkMultiplier<33554432&&(this._chunkMultiplier*=2)},iP.prototype._fetchMetadata=function(){var n=this;this._resolveToken(function(t){var e=XO(n._ref.storage,n._ref._location,n._mappings),t=n._ref.storage.makeRequest(e,t);(n._request=t).getPromise().then(function(t){n._request=void 0,n._metadata=t,n._transition(dO)},n._metadataErrorHandler)})},iP.prototype._oneShotUpload=function(){var n=this;this._resolveToken(function(t){var e=function(t,e,n,r,i){var o=e.bucketOnlyServerUrl(),s={"X-Goog-Upload-Protocol":"multipart"},a=function(){for(var t="",e=0;e<2;e++)t+=Math.random().toString().slice(2);return t}();s["Content-Type"]="multipart/related; boundary="+a;var u=JO(e,r,i),i="--"+a+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+qO(u,n)+"\r\n--"+a+"\r\nContent-Type: "+u.contentType+"\r\n\r\n",a="\r\n--"+a+"--";if(null===(r=AO.getBlob(i,r,a)))throw $k();return a={name:u.fullPath},u=xO(o),o=t.maxUploadRetryTime,(o=new KO(u,"POST",GO(t,n),o)).urlParams=a,o.headers=s,o.body=r.uploadData(),o.errorHandler=QO(e),o}(n._ref.storage,n._ref._location,n._mappings,n._blob,n._metadata),t=n._ref.storage.makeRequest(e,t);(n._request=t).getPromise().then(function(t){n._request=void 0,n._metadata=t,n._updateProgress(n._blob.size()),n._transition(dO)},n._errorHandler)})},iP.prototype._updateProgress=function(t){var e=this._transferred;this._transferred=t,this._transferred!==e&&this._notifyObservers()},iP.prototype._transition=function(t){if(this._state!==t)switch(t){case vO:case fO:this._state=t,void 0!==this._request&&this._request.cancel();break;case lO:var e=this._state===pO;this._state=t,e&&(this._notifyObservers(),this._start());break;case pO:this._state=t,this._notifyObservers();break;case yO:this._error=Jk(),this._state=t,this._notifyObservers();break;case gO:case dO:this._state=t,this._notifyObservers()}},iP.prototype.completeTransitions_=function(){switch(this._state){case fO:this._transition(pO);break;case vO:this._transition(yO);break;case lO:this._start()}},Object.defineProperty(iP.prototype,"snapshot",{get:function(){var t=_O(this._state);return new eP(this._transferred,this._blob.size(),t,this._metadata,this,this._ref)},enumerable:!1,configurable:!0}),iP.prototype.on=function(t,e,n,r){var i=this,o=new tP(e,n,r);return this._addObserver(o),function(){i._removeObserver(o)}},iP.prototype.then=function(t,e){return this._promise.then(t,e)},iP.prototype.catch=function(t){return this.then(null,t)},iP.prototype._addObserver=function(t){this._observers.push(t),this._notifyObserver(t)},iP.prototype._removeObserver=function(t){-1!==(t=this._observers.indexOf(t))&&this._observers.splice(t,1)},iP.prototype._notifyObservers=function(){var e=this;this._finishPromise(),this._observers.slice().forEach(function(t){e._notifyObserver(t)})},iP.prototype._finishPromise=function(){if(void 0!==this._resolve){var t=!0;switch(_O(this._state)){case mO.SUCCESS:nP(this._resolve.bind(null,this.snapshot))();break;case mO.CANCELED:case mO.ERROR:nP(this._reject.bind(null,this._error))();break;default:t=!1}t&&(this._resolve=void 0,this._reject=void 0)}},iP.prototype._notifyObserver=function(t){switch(_O(this._state)){case mO.RUNNING:case mO.PAUSED:t.next&&nP(t.next.bind(t,this.snapshot))();break;case mO.SUCCESS:t.complete&&nP(t.complete.bind(t))();break;case mO.CANCELED:case mO.ERROR:t.error&&nP(t.error.bind(t,this._error))();break;default:t.error&&nP(t.error.bind(t,this._error))()}},iP.prototype.resume=function(){var t=this._state===pO||this._state===fO;return t&&this._transition(lO),t},iP.prototype.pause=function(){var t=this._state===lO;return t&&this._transition(fO),t},iP.prototype.cancel=function(){var t=this._state===lO||this._state===fO;return t&&this._transition(vO),t},iP);function iP(t,e,n){var r=this;void 0===n&&(n=null),this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=t,this._blob=e,this._metadata=n,this._mappings=jO(),this._resumable=this._shouldDoResumable(this._blob),this._state=lO,this._errorHandler=function(t){r._request=void 0,r._chunkMultiplier=1,t.codeEquals(Qk.CANCELED)?(r._needToFetchStatus=!0,r.completeTransitions_()):(r._error=t,r._transition(gO))},this._metadataErrorHandler=function(t){r._request=void 0,t.codeEquals(Qk.CANCELED)?r.completeTransitions_():(r._error=t,r._transition(gO))},this._promise=new Promise(function(t,e){r._resolve=t,r._reject=e,r._start()}),this._promise.then(null,function(){})}var oP=(sP.prototype.toString=function(){return"gs://"+this._location.bucket+"/"+this._location.path},sP.prototype.newRef=function(t,e){return new sP(t,e)},Object.defineProperty(sP.prototype,"root",{get:function(){var t=new OO(this._location.bucket,"");return this.newRef(this._service,t)},enumerable:!1,configurable:!0}),Object.defineProperty(sP.prototype,"bucket",{get:function(){return this._location.bucket},enumerable:!1,configurable:!0}),Object.defineProperty(sP.prototype,"fullPath",{get:function(){return this._location.path},enumerable:!1,configurable:!0}),Object.defineProperty(sP.prototype,"name",{get:function(){return DO(this._location.path)},enumerable:!1,configurable:!0}),Object.defineProperty(sP.prototype,"storage",{get:function(){return this._service},enumerable:!1,configurable:!0}),Object.defineProperty(sP.prototype,"parent",{get:function(){var t=function(t){if(0===t.length)return null;var e=t.lastIndexOf("/");return-1===e?"":t.slice(0,e)}(this._location.path);return null===t?null:(t=new OO(this._location.bucket,t),new sP(this._service,t))},enumerable:!1,configurable:!0}),sP.prototype._throwIfRoot=function(t){if(""===this._location.path)throw eO(t)},sP);function sP(t,e){this._service=t,this._location=e instanceof OO?e:OO.makeFromUrl(e)}function aP(a,u){return po(this,void 0,void 0,function(){var o,s;return vo(this,function(t){switch(t.label){case 0:return null!=u&&"number"==typeof u.maxResults&&NO("options.maxResults",1,1e3,u.maxResults),[4,a.storage.getAuthToken()];case 1:return o=t.sent(),s=u||{},e=a.storage,n=a._location,r=s.pageToken,i=s.maxResults,t={},n.isRoot?t.prefix="":t.prefix=n.path+"/",0<"/".length&&(t.delimiter="/"),r&&(t.pageToken=r),i&&(t.maxResults=i),r=xO(n.bucketOnlyServerUrl()),i=e.maxOperationRetryTime,(i=new KO(r,"GET",zO(e,n.bucket),i)).urlParams=t,i.errorHandler=QO(n),[2,a.storage.makeRequest(i,o).getPromise()]}var e,n,r,i})})}function uP(u){return po(this,void 0,void 0,function(){var a;return vo(this,function(t){switch(t.label){case 0:return u._throwIfRoot("getDownloadURL"),[4,u.storage.getAuthToken()];case 1:return a=t.sent(),e=u.storage,n=u._location,o=jO(),s=xO(n.fullServerUrl()),t=e.maxOperationRetryTime,(t=new KO(s,"GET",(r=e,i=o,function(t,e){var n=VO(r,e,i);return HO(null!==n),function(r,t){if(null===(t=RO(t)))return null;if(!TO(t.downloadTokens))return null;if(0===(t=t.downloadTokens).length)return null;var i=encodeURIComponent;return t.split(",").map(function(t){var e=r.bucket,n=r.fullPath;return xO("/b/"+i(e)+"/o/"+i(n))+LO({alt:"media",token:t})})[0]}(n,e)}),t)).errorHandler=YO(n),[2,u.storage.makeRequest(t,a).getPromise().then(function(t){if(null===t)throw new Gk(Qk.NO_DOWNLOAD_URL,"The given file does not have any download URLs.");return t})]}var r,i,e,n,o,s})})}function cP(t,e){var n,e=(n=t._location.path,e=e.split("/").filter(function(t){return 0<t.length}).join("/"),0===n.length?e:n+"/"+e),e=new OO(t._location.bucket,e);return new oP(t.storage,e)}var hP=(Object.defineProperty(lP.prototype,"bytesTransferred",{get:function(){return this._delegate.bytesTransferred},enumerable:!1,configurable:!0}),Object.defineProperty(lP.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(lP.prototype,"state",{get:function(){return this._delegate.state},enumerable:!1,configurable:!0}),Object.defineProperty(lP.prototype,"totalBytes",{get:function(){return this._delegate.totalBytes},enumerable:!1,configurable:!0}),lP);function lP(t,e,n){this._delegate=t,this.task=e,this.ref=n}var fP=(Object.defineProperty(pP.prototype,"snapshot",{get:function(){return this._snapshot},enumerable:!1,configurable:!0}),pP.prototype.then=function(e,t){var n=this;return this._delegate.then(function(t){if(e)return e(new hP(t,n,n._ref))},t)},pP.prototype.on=function(t,e,n,r){var i=this,o=void 0;return e&&(o="function"==typeof e?function(t){return e(new hP(t,i,i._ref))}:{next:e.next?function(t){return e.next(new hP(t,i,i._ref))}:void 0,complete:e.complete||void 0,error:e.error||void 0}),this._delegate.on(t,o,n||void 0,r||void 0)},pP);function pP(t,e){this._delegate=t,this._ref=e,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate),this._snapshot=new hP(this._delegate.snapshot,this,this._ref)}var dP=(Object.defineProperty(vP.prototype,"prefixes",{get:function(){var e=this;return this._delegate.prefixes.map(function(t){return new yP(t,e._service)})},enumerable:!1,configurable:!0}),Object.defineProperty(vP.prototype,"items",{get:function(){var e=this;return this._delegate.items.map(function(t){return new yP(t,e._service)})},enumerable:!1,configurable:!0}),Object.defineProperty(vP.prototype,"nextPageToken",{get:function(){return this._delegate.nextPageToken||null},enumerable:!1,configurable:!0}),vP);function vP(t,e){this._delegate=t,this._service=e}var yP=(Object.defineProperty(gP.prototype,"name",{get:function(){return this._delegate.name},enumerable:!1,configurable:!0}),Object.defineProperty(gP.prototype,"bucket",{get:function(){return this._delegate.bucket},enumerable:!1,configurable:!0}),Object.defineProperty(gP.prototype,"fullPath",{get:function(){return this._delegate.fullPath},enumerable:!1,configurable:!0}),gP.prototype.toString=function(){return this._delegate.toString()},gP.prototype.child=function(t){return new gP(cP(this._delegate,t),this.storage)},Object.defineProperty(gP.prototype,"root",{get:function(){return new gP(this._delegate.root,this.storage)},enumerable:!1,configurable:!0}),Object.defineProperty(gP.prototype,"parent",{get:function(){var t=this._delegate.parent;return null==t?null:new gP(t,this.storage)},enumerable:!1,configurable:!0}),gP.prototype.put=function(t,e){return this._throwIfRoot("put"),new fP((void 0===e&&(e=null),(n=this._delegate)._throwIfRoot("uploadBytesResumable"),new rP(n,new AO(t),e)),this);var n},gP.prototype.putString=function(t,e,n){return void 0===e&&(e=oO.RAW),this._throwIfRoot("putString"),new fP((r=this._delegate,void 0===e&&(e=oO.RAW),r._throwIfRoot("putString"),t=sO(e,t),null==(n=fo({},n)).contentType&&null!=t.contentType&&(n.contentType=t.contentType),new rP(r,new AO(t.data,!0),n)),this);var r},gP.prototype.listAll=function(){var t,e=this;return function r(i,o,s){return po(this,void 0,void 0,function(){var e,n;return vo(this,function(t){switch(t.label){case 0:return[4,aP(i,{pageToken:s})];case 1:return e=t.sent(),(n=o.prefixes).push.apply(n,e.prefixes),(n=o.items).push.apply(n,e.items),null==e.nextPageToken?[3,3]:[4,r(i,o,e.nextPageToken)];case 2:t.sent(),t.label=3;case 3:return[2]}})})}(this._delegate,t={prefixes:[],items:[]}).then(function(){return t}).then(function(t){return new dP(t,e.storage)})},gP.prototype.list=function(t){var e=this;return aP(this._delegate,t).then(function(t){return new dP(t,e.storage)})},gP.prototype.getMetadata=function(){return function(r){return po(this,void 0,void 0,function(){var e,n;return vo(this,function(t){switch(t.label){case 0:return r._throwIfRoot("getMetadata"),[4,r.storage.getAuthToken()];case 1:return e=t.sent(),n=XO(r.storage,r._location,jO()),[2,r.storage.makeRequest(n,e).getPromise()]}})})}(this._delegate)},gP.prototype.updateMetadata=function(t){return function(a,u){return po(this,void 0,void 0,function(){var s;return vo(this,function(t){switch(t.label){case 0:return a._throwIfRoot("updateMetadata"),[4,a.storage.getAuthToken()];case 1:return s=t.sent(),e=a.storage,n=a._location,r=u,i=jO(),o=xO(n.fullServerUrl()),t=qO(r,i),r=e.maxOperationRetryTime,(r=new KO(o,"PATCH",GO(e,i),r)).headers={"Content-Type":"application/json; charset=utf-8"},r.body=t,r.errorHandler=YO(n),[2,a.storage.makeRequest(r,s).getPromise()]}var e,n,r,i,o})})}(this._delegate,t)},gP.prototype.getDownloadURL=function(){return uP(this._delegate)},gP.prototype.delete=function(){return this._throwIfRoot("delete"),function(i){return po(this,void 0,void 0,function(){var r;return vo(this,function(t){switch(t.label){case 0:return i._throwIfRoot("deleteObject"),[4,i.storage.getAuthToken()];case 1:return r=t.sent(),e=i.storage,t=xO((n=i._location).fullServerUrl()),e=e.maxOperationRetryTime,(e=new KO(t,"DELETE",function(t,e){},e)).successCodes=[200,204],e.errorHandler=YO(n),[2,i.storage.makeRequest(e,r).getPromise()]}var e,n})})}(this._delegate)},gP.prototype._throwIfRoot=function(t){if(""===this._delegate._location.path)throw eO(t)},gP);function gP(t,e){this._delegate=t,this.storage=e}var mP=(_P.prototype.getPromise=function(){return this.promise_},_P.prototype.cancel=function(t){},_P);function _P(t){this.promise_=Promise.reject(t)}var bP=(wP.prototype.start_=function(){var e,n,t,r,i,o,s,a,u,c=this;function h(t,e){var n,r=c.resolve_,i=c.reject_,o=e.xhr;if(e.wasSuccessCode)try{var s=c.callback_(o,o.getResponseText());void 0!==s?r(s):r()}catch(t){i(t)}else null!==o?((n=Xk()).serverResponse=o.getResponseText(),c.errorCallback_?i(c.errorCallback_(o,n)):i(n)):e.canceled?i(n=(c.appDelete_?tO:Jk)()):i(n=new Gk(Qk.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again."))}function l(){return 2===s}function f(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];a||(a=!0,n.apply(null,t))}function p(t){i=setTimeout(function(){i=null,e(d,l())},t)}function d(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];a||(t||l()||o?f.call.apply(f,_o([null,t],e)):(r<64&&(r*=2),p(1===s?(s=2,0):1e3*(r+Math.random()))))}function v(t){u||(u=!0,a||(null!==i?(t||(s=2),clearTimeout(i),p(0)):t||(s=1)))}this.canceled_?h(0,new EP(!1,null,!0)):this.backoffId_=(e=function(r,t){function i(t){var e=t.loaded,t=t.lengthComputable?t.total:-1;null!==c.progressCallback_&&c.progressCallback_(e,t)}t?r(!1,new EP(!1,null,!0)):(t=c.pool_.createXhrIo(),c.pendingXhr_=t,null!==c.progressCallback_&&t.addUploadProgressListener(i),t.send(c.url_,c.method_,c.body_,c.headers_).then(function(t){null!==c.progressCallback_&&t.removeUploadProgressListener(i),c.pendingXhr_=null;var e=t.getErrorCode()===hO.NO_ERROR,n=t.getStatus();e&&!c.isRetryStatusCode_(n)?(n=-1!==c.successCodes_.indexOf(n),r(!0,new EP(n,t))):(t=t.getErrorCode()===hO.ABORT,r(!1,new EP(!1,null,t)))}))},n=h,t=this.timeout_,i=null,u=a=o=!(r=1),p(s=0),setTimeout(function(){v(o=!0)},t),v)},wP.prototype.getPromise=function(){return this.promise_},wP.prototype.cancel=function(t){this.canceled_=!0,this.appDelete_=t||!1,null!==this.backoffId_&&(0,this.backoffId_)(!1),null!==this.pendingXhr_&&this.pendingXhr_.abort()},wP.prototype.isRetryStatusCode_=function(t){var e=500<=t&&t<600,n=-1!==[408,429].indexOf(t),t=-1!==this.additionalRetryCodes_.indexOf(t);return e||n||t},wP);function wP(t,e,n,r,i,o,s,a,u,c,h){var l=this;this.pendingXhr_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.url_=t,this.method_=e,this.headers_=n,this.body_=r,this.successCodes_=i.slice(),this.additionalRetryCodes_=o.slice(),this.callback_=s,this.errorCallback_=a,this.progressCallback_=c,this.timeout_=u,this.pool_=h,this.promise_=new Promise(function(t,e){l.resolve_=t,l.reject_=e,l.start_()})}var EP=function(t,e,n){this.wasSuccessCode=t,this.xhr=e,this.canceled=!!n};function IP(t){return/^[A-Za-z]+:\/\//.test(t)}function TP(t,e){if(e&&IP(e)){if(t instanceof SP)return new oP(t,e);throw Zk("To use ref(service, url), the first argument must be a Storage instance.")}return function t(e,n){if(e instanceof SP){var r=e;if(null==r._bucket)throw new Gk(Qk.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+Hk+"' property when initializing the app?");return r=new oP(r,r._bucket),null!=n?t(r,n):r}if(void 0===n)return e;if(n.includes(".."))throw Zk('`path` param cannot contain ".."');return cP(e,n)}(t,e)}var SP=(Object.defineProperty(CP.prototype,"maxUploadRetryTime",{get:function(){return this._maxUploadRetryTime},set:function(t){NO("time",0,Number.POSITIVE_INFINITY,t),this._maxUploadRetryTime=t},enumerable:!1,configurable:!0}),Object.defineProperty(CP.prototype,"maxOperationRetryTime",{get:function(){return this._maxOperationRetryTime},set:function(t){NO("time",0,Number.POSITIVE_INFINITY,t),this._maxOperationRetryTime=t},enumerable:!1,configurable:!0}),CP.prototype.getAuthToken=function(){return po(this,void 0,void 0,function(){var e;return vo(this,function(t){switch(t.label){case 0:return(e=this._authProvider.getImmediate({optional:!0}))?[4,e.getToken()]:[3,2];case 1:if(null!==(e=t.sent()))return[2,e.accessToken];t.label=2;case 2:return[2,null]}})})},CP.prototype._delete=function(){return this._deleted=!0,this._requests.forEach(function(t){return t.cancel()}),this._requests.clear(),Promise.resolve()},CP.prototype.makeStorageReference=function(t){return new oP(this,t)},CP.prototype.makeRequest=function(t,e){var n=this;if(this._deleted)return new mP(tO());var r,i,o,s,a,u=(r=t,i=this._appId,o=e,s=this._pool,a=LO(r.urlParams),t=r.url+a,e=Object.assign({},r.headers),a=e,i&&(a["X-Firebase-GMPID"]=i),i=e,null!==o&&0<o.length&&(i.Authorization="Firebase "+o),i=e,o=void 0!==Vl?Vl.SDK_VERSION:"AppManager",i["X-Firebase-Storage-Version"]="webjs/"+o,new bP(t,r.method,e,r.body,r.successCodes,r.additionalRetryCodes,r.handler,r.errorHandler,r.timeout,r.progressCallback,s));return this._requests.add(u),u.getPromise().then(function(){return n._requests.delete(u)},function(){return n._requests.delete(u)}),u},CP);function CP(t,e,n,r){this.app=t,this._authProvider=e,this._pool=n,this._url=r,this._bucket=null,this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null==r&&null==(r=null==(r=this.app.options)?void 0:r[Hk])?null:OO.makeFromBucketSpec(r)}var NP=(Object.defineProperty(AP.prototype,"maxOperationRetryTime",{get:function(){return this._delegate.maxOperationRetryTime},enumerable:!1,configurable:!0}),Object.defineProperty(AP.prototype,"maxUploadRetryTime",{get:function(){return this._delegate.maxUploadRetryTime},enumerable:!1,configurable:!0}),AP.prototype.ref=function(t){if(IP(t))throw Zk("ref() expected a child path but got a URL, use refFromURL instead.");return new yP(TP(this._delegate,t),this)},AP.prototype.refFromURL=function(t){if(!IP(t))throw Zk("refFromURL() expected a full URL but got a child path, use ref() instead.");try{OO.makeFromUrl(t)}catch(t){throw Zk("refFromUrl() expected a valid full URL but got an invalid one.")}return new yP(TP(this._delegate,t),this)},AP.prototype.setMaxUploadRetryTime=function(t){this._delegate.maxUploadRetryTime=t},AP.prototype.setMaxOperationRetryTime=function(t){this._delegate.maxOperationRetryTime=t},AP);function AP(t,e){var n=this;this.app=t,this._delegate=e,this.INTERNAL={delete:function(){return n._delegate._delete()}}}K={TaskState:mO,TaskEvent:{STATE_CHANGED:"state_changed"},StringFormat:oO,Storage:SP,Reference:yP},(ru=Vl).INTERNAL.registerComponent(new ds("storage",function(t,e){var n=t.getProvider("app").getImmediate(),t=t.getProvider("auth-internal");return new NP(n,new SP(n,t,new EO,e))},"PUBLIC").setServiceProps(K).setMultipleInstances(!0)),ru.registerVersion("@firebase/storage","0.4.2-20201012233953");var kP,OP,PP="0.4.4",RP="FB-PERF-TRACE-MEASURE",DP="@firebase/performance/config",xP="@firebase/performance/configexpire",Pr="Performance",L=((L={})["trace started"]="Trace {$traceName} was started before.",L["trace stopped"]="Trace {$traceName} is not running.",L["nonpositive trace startTime"]="Trace {$traceName} startTime should be positive.",L["nonpositive trace duration"]="Trace {$traceName} duration should be positive.",L["no window"]="Window is not available.",L["no app id"]="App id is not available.",L["no project id"]="Project id is not available.",L["no api key"]="Api key is not available.",L["invalid cc log"]="Attempted to queue invalid cc event",L["FB not default"]="Performance can only start when Firebase app instance is the default one.",L["RC response not ok"]="RC response is not ok",L["invalid attribute name"]="Attribute name {$attributeName} is invalid.",L["invalid attribute value"]="Attribute value {$attributeValue} is invalid.",L["invalid custom metric name"]="Custom metric name {$customMetricName} is invalid",L["invalid String merger input"]="Input for String merger is invalid, contact support team to resolve.",L),LP=new Bo("performance",Pr,L),MP=new As(Pr);MP.logLevel=Es.INFO;var FP,UP=(jP.prototype.getUrl=function(){return this.windowLocation.href.split("?")[0]},jP.prototype.mark=function(t){this.performance&&this.performance.mark&&this.performance.mark(t)},jP.prototype.measure=function(t,e,n){this.performance&&this.performance.measure&&this.performance.measure(t,e,n)},jP.prototype.getEntriesByType=function(t){return this.performance&&this.performance.getEntriesByType?this.performance.getEntriesByType(t):[]},jP.prototype.getEntriesByName=function(t){return this.performance&&this.performance.getEntriesByName?this.performance.getEntriesByName(t):[]},jP.prototype.getTimeOrigin=function(){return this.performance&&(this.performance.timeOrigin||this.performance.timing.navigationStart)},jP.prototype.requiredApisAvailable=function(){return fetch&&Promise&&this.navigator&&this.navigator.cookieEnabled?!!Lo()||(MP.info("IndexedDB is not supported by current browswer"),!1):(MP.info("Firebase Performance cannot start if browser does not support fetch and Promise or cookie is disabled."),!1)},jP.prototype.setupObserver=function(t,i){this.PerformanceObserver&&new this.PerformanceObserver(function(t){for(var e=0,n=t.getEntries();e<n.length;e++){var r=n[e];i(r)}}).observe({entryTypes:[t]})},jP.getInstance=function(){return void 0===kP&&(kP=new jP(OP)),kP},jP);function jP(t){if(!(this.window=t))throw LP.create("no window");this.performance=t.performance,this.PerformanceObserver=t.PerformanceObserver,this.windowLocation=t.location,this.navigator=t.navigator,this.document=t.document,this.navigator&&this.navigator.cookieEnabled&&(this.localStorage=t.localStorage),t.perfMetrics&&t.perfMetrics.onFirstInputDelay&&(this.onFirstInputDelay=t.perfMetrics.onFirstInputDelay)}function VP(t,e){var n=t.length-e.length;if(n<0||1<n)throw LP.create("invalid String merger input");for(var r=[],i=0;i<t.length;i++)r.push(t.charAt(i)),e.length>i&&r.push(e.charAt(i));return r.join("")}var qP,BP,WP=(KP.prototype.getAppId=function(){var t=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.appId;if(!t)throw LP.create("no app id");return t},KP.prototype.getProjectId=function(){var t=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.projectId;if(!t)throw LP.create("no project id");return t},KP.prototype.getApiKey=function(){var t=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.apiKey;if(!t)throw LP.create("no api key");return t},KP.prototype.getFlTransportFullUrl=function(){return this.flTransportEndpointUrl.concat("?key=",this.transportKey)},KP.getInstance=function(){return void 0===FP&&(FP=new KP),FP},KP);function KP(){this.instrumentationEnabled=!0,this.dataCollectionEnabled=!0,this.loggingEnabled=!1,this.tracesSamplingRate=1,this.networkRequestsSamplingRate=1,this.logEndPointUrl="https://firebaselogging.googleapis.com/v0cc/log?format=json_proto",this.flTransportEndpointUrl=VP("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),this.transportKey=VP("AzSC8r6ReiGqFMyfvgow","Iayx0u-XT3vksVM-pIV"),this.logSource=462,this.logTraceAfterSampling=!1,this.logNetworkAfterSampling=!1,this.configTimeToLive=12}(Pr=BP=BP||{})[Pr.UNKNOWN=0]="UNKNOWN",Pr[Pr.VISIBLE=1]="VISIBLE",Pr[Pr.HIDDEN=2]="HIDDEN";var HP=["firebase_","google_","ga_"],GP=new RegExp("^[a-zA-Z]\\w*$");function zP(){switch(UP.getInstance().document.visibilityState){case"visible":return BP.VISIBLE;case"hidden":return BP.HIDDEN;default:return BP.UNKNOWN}}var QP="0.0.1",YP={loggingEnabled:!0},XP="FIREBASE_INSTALLATIONS_AUTH";function JP(t){var n,e=function(){var t=UP.getInstance().localStorage;if(t){var e=t.getItem(xP);if(e&&Number(e)>Date.now()){var n=t.getItem(DP);if(n)try{return JSON.parse(n)}catch(t){return}}}}();return e?(ZP(e),Promise.resolve()):(n=t,(t=WP.getInstance().installationsService.getToken()).then(function(t){}),t.then(function(t){var e="https://firebaseremoteconfig.googleapis.com/v1/projects/"+WP.getInstance().getProjectId()+"/namespaces/fireperf:fetch?key="+WP.getInstance().getApiKey(),t=new Request(e,{method:"POST",headers:{Authorization:XP+" "+t},body:JSON.stringify({app_instance_id:n,app_instance_id_token:t,app_id:WP.getInstance().getAppId(),app_version:PP,sdk_version:QP})});return fetch(t).then(function(t){if(t.ok)return t.json();throw LP.create("RC response not ok")})}).catch(function(){MP.info($P)}).then(ZP).then(function(t){var e=UP.getInstance().localStorage;t&&e&&(e.setItem(DP,JSON.stringify(t)),e.setItem(xP,String(Date.now()+60*WP.getInstance().configTimeToLive*60*1e3)))},function(){}))}var $P="Could not fetch config, will use default configs";function ZP(t){if(!t)return t;var e=WP.getInstance(),n=t.entries||{};return e.loggingEnabled=void 0!==n.fpr_enabled?"true"===String(n.fpr_enabled):YP.loggingEnabled,n.fpr_log_source&&(e.logSource=Number(n.fpr_log_source)),n.fpr_log_endpoint_url&&(e.logEndPointUrl=n.fpr_log_endpoint_url),n.fpr_log_transport_key&&(e.transportKey=n.fpr_log_transport_key),void 0!==n.fpr_vc_network_request_sampling_rate&&(e.networkRequestsSamplingRate=Number(n.fpr_vc_network_request_sampling_rate)),void 0!==n.fpr_vc_trace_sampling_rate&&(e.tracesSamplingRate=Number(n.fpr_vc_trace_sampling_rate)),e.logTraceAfterSampling=tR(e.tracesSamplingRate),e.logNetworkAfterSampling=tR(e.networkRequestsSamplingRate),t}function tR(t){return Math.random()<=t}var eR,nR=1;function rR(){return nR=2,eR=eR||(n=UP.getInstance().document,new Promise(function(t){var e;n&&"complete"!==n.readyState?(e=function(){"complete"===n.readyState&&(n.removeEventListener("readystatechange",e),t())},n.addEventListener("readystatechange",e)):t()}).then(function(){return(t=WP.getInstance().installationsService.getId()).then(function(t){qP=t}),t;var t}).then(JP).then(iR,iR));var n}function iR(){nR=3}var oR,sR=1e4,aR=3,uR=aR,cR=[],hR=!1;function lR(t){setTimeout(function(){if(0!==uR)return cR.length?void function(){var t=_o(cR);cR=[];var e,r,n=t.map(function(t){return{source_extension_json_proto3:t.message,event_time_ms:String(t.eventTime)}});e={request_time_ms:String(Date.now()),client_info:{client_type:1,js_client_info:{}},log_source:WP.getInstance().logSource,log_event:n},r=t,n=e,e=WP.getInstance().getFlTransportFullUrl(),fetch(e,{method:"POST",body:JSON.stringify(n)}).then(function(t){return t.ok||MP.info("Call to Firebase backend failed."),t.json()}).then(function(t){var e=Number(t.nextRequestWaitMillis),n=sR;isNaN(e)||(n=Math.max(e,n)),t=t.logResponseDetails,Array.isArray(t)&&0<t.length&&"RETRY_REQUEST_LATER"===t[0].responseAction&&(cR=_o(r,cR),MP.info("Retry transport request later.")),uR=aR,lR(n)}).catch(function(){cR=_o(t,cR),uR--,MP.info("Tries left: "+uR+"."),lR(sR)})}():lR(sR)},t)}function fR(t,e){var n;(oR=oR||(n=vR,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];!function(t){if(!t.eventTime||!t.message)throw LP.create("invalid cc log");cR=_o(cR,[t])}({message:n.apply(void 0,t),eventTime:Date.now()})}))(t,e)}function pR(t){var e=WP.getInstance();!e.instrumentationEnabled&&t.isAuto||(e.dataCollectionEnabled||t.isAuto)&&UP.getInstance().requiredApisAvailable()&&(t.isAuto&&zP()!==BP.VISIBLE||(3===nR?dR(t):rR().then(function(){return dR(t)},function(){return dR(t)})))}function dR(t){var e;!qP||(e=WP.getInstance()).loggingEnabled&&e.logTraceAfterSampling&&setTimeout(function(){return fR(t,1)},0)}function vR(t,e){return(0===e?function(t){return t={url:t.url,http_method:t.httpMethod||0,http_response_code:200,response_payload_bytes:t.responsePayloadBytes,client_start_time_us:t.startTimeUs,time_to_response_initiated_us:t.timeToResponseInitiatedUs,time_to_response_completed_us:t.timeToResponseCompletedUs},t={application_info:yR(),network_request_metric:t},JSON.stringify(t)}:function(t){var e={name:t.name,is_auto:t.isAuto,client_start_time_us:t.startTimeUs,duration_us:t.durationUs};return 0!==Object.keys(t.counters).length&&(e.counters=t.counters),t=t.getAttributes(),0!==Object.keys(t).length&&(e.custom_attributes=t),e={application_info:yR(),trace_metric:e},JSON.stringify(e)})(t)}function yR(){return{google_app_id:WP.getInstance().getAppId(),app_instance_id:qP,web_app_info:{sdk_version:PP,page_url:UP.getInstance().getUrl(),service_worker_status:"serviceWorker"in(t=UP.getInstance().navigator)?t.serviceWorker.controller?2:3:1,visibility_state:zP(),effective_connection_type:function(){var t=UP.getInstance().navigator.connection;switch(t&&t.effectiveType){case"slow-2g":return 1;case"2g":return 2;case"3g":return 3;case"4g":return 4;default:return 0}}()},application_process_state:0};var t}var gR=["_fp","_fcp","_fid"],mR=(_R.prototype.start=function(){if(1!==this.state)throw LP.create("trace started",{traceName:this.name});this.api.mark(this.traceStartMark),this.state=2},_R.prototype.stop=function(){if(2!==this.state)throw LP.create("trace stopped",{traceName:this.name});this.state=3,this.api.mark(this.traceStopMark),this.api.measure(this.traceMeasure,this.traceStartMark,this.traceStopMark),this.calculateTraceMetrics(),pR(this)},_R.prototype.record=function(t,e,n){if(t<=0)throw LP.create("nonpositive trace startTime",{traceName:this.name});if(e<=0)throw LP.create("nonpositive trace duration",{traceName:this.name});if(this.durationUs=Math.floor(1e3*e),this.startTimeUs=Math.floor(1e3*t),n&&n.attributes&&(this.customAttributes=fo({},n.attributes)),n&&n.metrics)for(var r=0,i=Object.keys(n.metrics);r<i.length;r++){var o=i[r];isNaN(Number(n.metrics[o]))||(this.counters[o]=Number(Math.floor(n.metrics[o])))}pR(this)},_R.prototype.incrementMetric=function(t,e){void 0===e&&(e=1),void 0===this.counters[t]?this.putMetric(t,e):this.putMetric(t,this.counters[t]+e)},_R.prototype.putMetric=function(t,e){if(n=t,r=this.name,0===n.length||100<n.length||!(r&&r.startsWith("_wt_")&&-1<gR.indexOf(n))&&n.startsWith("_"))throw LP.create("invalid custom metric name",{customMetricName:t});var n,r;this.counters[t]=(t=e,(e=Math.floor(t))<t&&MP.info("Metric value should be an Integer, setting the value as : "+e+"."),e)},_R.prototype.getMetric=function(t){return this.counters[t]||0},_R.prototype.putAttribute=function(t,e){var n,r=!(0===(n=t).length||40<n.length||HP.some(function(t){return n.startsWith(t)})||!n.match(GP)),i=0!==(i=e).length&&i.length<=100;if(r&&i)this.customAttributes[t]=e;else{if(!r)throw LP.create("invalid attribute name",{attributeName:t});if(!i)throw LP.create("invalid attribute value",{attributeValue:e})}},_R.prototype.getAttribute=function(t){return this.customAttributes[t]},_R.prototype.removeAttribute=function(t){void 0!==this.customAttributes[t]&&delete this.customAttributes[t]},_R.prototype.getAttributes=function(){return fo({},this.customAttributes)},_R.prototype.setStartTime=function(t){this.startTimeUs=t},_R.prototype.setDuration=function(t){this.durationUs=t},_R.prototype.calculateTraceMetrics=function(){var t=this.api.getEntriesByName(this.traceMeasure);(t=t&&t[0])&&(this.durationUs=Math.floor(1e3*t.duration),this.startTimeUs=Math.floor(1e3*(t.startTime+this.api.getTimeOrigin())))},_R.createOobTrace=function(t,e,n){var r,i=UP.getInstance().getUrl();i&&(r=new _R("_wt_"+i,!0),i=Math.floor(1e3*UP.getInstance().getTimeOrigin()),r.setStartTime(i),t&&t[0]&&(r.setDuration(Math.floor(1e3*t[0].duration)),r.putMetric("domInteractive",Math.floor(1e3*t[0].domInteractive)),r.putMetric("domContentLoadedEventEnd",Math.floor(1e3*t[0].domContentLoadedEventEnd)),r.putMetric("loadEventEnd",Math.floor(1e3*t[0].loadEventEnd))),e&&((t=e.find(function(t){return"first-paint"===t.name}))&&t.startTime&&r.putMetric("_fp",Math.floor(1e3*t.startTime)),(e=e.find(function(t){return"first-contentful-paint"===t.name}))&&e.startTime&&r.putMetric("_fcp",Math.floor(1e3*e.startTime)),n&&r.putMetric("_fid",Math.floor(1e3*n))),pR(r))},_R.createUserTimingTrace=function(t){pR(new _R(t,!1,t))},_R);function _R(t,e,n){void 0===e&&(e=!1),this.name=t,this.isAuto=e,this.state=1,this.customAttributes={},this.counters={},this.api=UP.getInstance(),this.randomId=Math.floor(1e6*Math.random()),this.isAuto||(this.traceStartMark="FB-PERF-TRACE-START-"+this.randomId+"-"+this.name,this.traceStopMark="FB-PERF-TRACE-STOP-"+this.randomId+"-"+this.name,this.traceMeasure=n||RP+"-"+this.randomId+"-"+this.name,n&&this.calculateTraceMetrics())}function bR(t){var e,n,r,i=t;i&&void 0!==i.responseStart&&(n=UP.getInstance().getTimeOrigin(),r=Math.floor(1e3*(i.startTime+n)),t=i.responseStart?Math.floor(1e3*(i.responseStart-i.startTime)):void 0,n=Math.floor(1e3*(i.responseEnd-i.startTime)),i={url:i.name&&i.name.split("?")[0],responsePayloadBytes:i.transferSize,startTimeUs:r,timeToResponseInitiatedUs:t,timeToResponseCompletedUs:n},e=i,(r=WP.getInstance()).instrumentationEnabled&&(t=e.url,n=r.logEndPointUrl.split("?")[0],i=r.flTransportEndpointUrl.split("?")[0],t!==n&&t!==i&&r.loggingEnabled&&r.logNetworkAfterSampling&&setTimeout(function(){return fR(e,0)},0)))}var wR=5e3;function ER(){qP&&(setTimeout(function(){var e,t=UP.getInstance(),n=t.getEntriesByType("navigation"),r=t.getEntriesByType("paint");t.onFirstInputDelay?(e=setTimeout(function(){mR.createOobTrace(n,r),e=void 0},wR),t.onFirstInputDelay(function(t){e&&(clearTimeout(e),mR.createOobTrace(n,r,t))})):mR.createOobTrace(n,r)},0),setTimeout(function(){for(var t=UP.getInstance(),e=0,n=t.getEntriesByType("resource");e<n.length;e++)bR(n[e]);t.setupObserver("resource",bR)},0),setTimeout(function(){for(var t=UP.getInstance(),e=0,n=t.getEntriesByType("measure");e<n.length;e++)IR(n[e]);t.setupObserver("measure",IR)},0))}function IR(t){(t=t.name).substring(0,RP.length)!==RP&&mR.createUserTimingTrace(t)}var TR=(SR.prototype.trace=function(t){return new mR(t)},Object.defineProperty(SR.prototype,"instrumentationEnabled",{get:function(){return WP.getInstance().instrumentationEnabled},set:function(t){WP.getInstance().instrumentationEnabled=t},enumerable:!1,configurable:!0}),Object.defineProperty(SR.prototype,"dataCollectionEnabled",{get:function(){return WP.getInstance().dataCollectionEnabled},set:function(t){WP.getInstance().dataCollectionEnabled=t},enumerable:!1,configurable:!0}),SR);function SR(t){this.app=t,UP.getInstance().requiredApisAvailable()&&Mo().then(function(t){t&&(hR||(lR(5500),hR=!0),rR().then(ER,ER))}).catch(function(t){MP.info("Environment doesn't support IndexedDB: "+t)})}(ru=Vl).INTERNAL.registerComponent(new ds("performance",function(t){return function(t,e){if("[DEFAULT]"!==t.name)throw LP.create("FB not default");if("undefined"==typeof window)throw LP.create("no window");return OP=window,WP.getInstance().firebaseAppInstance=t,WP.getInstance().installationsService=e,new TR(t)}(t.getProvider("app").getImmediate(),t=t.getProvider("installations").getImmediate())},"PUBLIC")),ru.registerVersion("@firebase/performance","0.4.4");var CR,NR="firebase_id",AR="origin",kR=6e4,OR="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",PR="https://www.googletagmanager.com/gtag/js";(Pr=CR=CR||{}).EVENT="event",Pr.SET="set",Pr.CONFIG="config",(Pr=L={}).ADD_SHIPPING_INFO="add_shipping_info",Pr.ADD_PAYMENT_INFO="add_payment_info",Pr.ADD_TO_CART="add_to_cart",Pr.ADD_TO_WISHLIST="add_to_wishlist",Pr.BEGIN_CHECKOUT="begin_checkout",Pr.CHECKOUT_PROGRESS="checkout_progress",Pr.EXCEPTION="exception",Pr.GENERATE_LEAD="generate_lead",Pr.LOGIN="login",Pr.PAGE_VIEW="page_view",Pr.PURCHASE="purchase",Pr.REFUND="refund",Pr.REMOVE_FROM_CART="remove_from_cart",Pr.SCREEN_VIEW="screen_view",Pr.SEARCH="search",Pr.SELECT_CONTENT="select_content",Pr.SELECT_ITEM="select_item",Pr.SELECT_PROMOTION="select_promotion",Pr.SET_CHECKOUT_OPTION="set_checkout_option",Pr.SHARE="share",Pr.SIGN_UP="sign_up",Pr.TIMING_COMPLETE="timing_complete",Pr.VIEW_CART="view_cart",Pr.VIEW_ITEM="view_item",Pr.VIEW_ITEM_LIST="view_item_list",Pr.VIEW_PROMOTION="view_promotion",Pr.VIEW_SEARCH_RESULTS="view_search_results";var RR=new As("@firebase/analytics");var Pr=((Pr={})["already-exists"]="A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.",Pr["already-initialized"]="Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.",Pr["interop-component-reg-failed"]="Firebase Analytics Interop Component failed to instantiate: {$reason}",Pr["invalid-analytics-context"]="Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}",Pr["indexeddb-unavailable"]="IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}",Pr["fetch-throttle"]="The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.",Pr["config-fetch-failed"]="Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}",Pr["no-api-key"]='The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',Pr["no-app-id"]='The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',Pr),DR=new Bo("analytics","Analytics",Pr),xR=30;function LR(t,e){void 0===t&&(t={}),void 0===e&&(e=1e3),this.throttleMetadata=t,this.intervalMillis=e}var MR=(LR.prototype.getThrottleMetadata=function(t){return this.throttleMetadata[t]},LR.prototype.setThrottleMetadata=function(t,e){this.throttleMetadata[t]=e},LR.prototype.deleteThrottleMetadata=function(t){delete this.throttleMetadata[t]},new LR);function FR(a,u,c){return void 0===u&&(u=MR),po(this,void 0,void 0,function(){var e,n,r,i,o,s=this;return vo(this,function(t){if(i=a.options,e=i.appId,n=i.apiKey,r=i.measurementId,!e)throw DR.create("no-app-id");if(n)return i=u.getThrottleMetadata(e)||{backoffCount:0,throttleEndTimeMillis:Date.now()},o=new UR,setTimeout(function(){return po(s,void 0,void 0,function(){return vo(this,function(t){return o.abort(),[2]})})},void 0!==c?c:kR),[2,function u(c,t,h,l){var f=t.throttleEndTimeMillis,p=t.backoffCount;return void 0===l&&(l=MR),po(this,void 0,void 0,function(){var e,n,r,s,a;return vo(this,function(t){switch(t.label){case 0:e=c.appId,n=c.measurementId,t.label=1;case 1:return t.trys.push([1,3,,4]),[4,(i=h,o=f,new Promise(function(t,e){var n=Math.max(o-Date.now(),0),r=setTimeout(t,n);i.addEventListener(function(){clearTimeout(r),e(DR.create("fetch-throttle",{throttleEndTimeMillis:o}))})}))];case 2:return t.sent(),[3,4];case 3:if(s=t.sent(),n)return RR.warn("Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID "+n+' provided in the "measurementId" field in the local Firebase config. ['+s.message+"]"),[2,{appId:e,measurementId:n}];throw s;case 4:return t.trys.push([4,6,,7]),[4,function(o){var s;return po(this,void 0,void 0,function(){var e,n,r,i;return vo(this,function(t){switch(t.label){case 0:return e=o.appId,i=o.apiKey,i={method:"GET",headers:new Headers({Accept:"application/json","x-goog-api-key":i})},e=OR.replace("{app-id}",e),[4,fetch(e,i)];case 1:if(200===(n=t.sent()).status||304===n.status)return[3,6];r="",t.label=2;case 2:return t.trys.push([2,4,,5]),[4,n.json()];case 3:return i=t.sent(),null!==(s=i.error)&&void 0!==s&&s.message&&(r=i.error.message),[3,5];case 4:return t.sent(),[3,5];case 5:throw DR.create("config-fetch-failed",{httpStatus:n.status,responseMessage:r});case 6:return[2,n.json()]}})})}(c)];case 5:return a=t.sent(),l.deleteThrottleMetadata(e),[2,a];case 6:if(function(t){if(t instanceof Vo&&t.customData)return 429===(t=Number(t.customData.httpStatus))||500===t||503===t||504===t}(r=t.sent()))return s=503===Number(r.customData.httpStatus)?ps(p,l.intervalMillis,xR):ps(p,l.intervalMillis),a={throttleEndTimeMillis:Date.now()+s,backoffCount:p+1},l.setThrottleMetadata(e,a),RR.debug("Calling attemptFetch again in "+s+" millis"),[2,u(c,a,h,l)];if(l.deleteThrottleMetadata(e),n)return RR.warn("Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID "+n+' provided in the "measurementId" field in the local Firebase config. ['+r.message+"]"),[2,{appId:e,measurementId:n}];throw r;case 7:return[2]}var i,o})})}({appId:e,apiKey:n,measurementId:r},i,o,u)];if(r)return[2,{measurementId:r,appId:e}];throw DR.create("no-api-key")})})}var UR=(jR.prototype.addEventListener=function(t){this.listeners.push(t)},jR.prototype.abort=function(){this.listeners.forEach(function(t){return t()})},jR);function jR(){this.listeners=[]}var VR,qR,BR={},WR=[],KR={},HR="dataLayer",GR="gtag",zR=!1;function QR(t,e){n=[],Ro()&&n.push("This is a browser extension environment."),Fo()||n.push("Cookies are not available."),0<n.length&&(n=n.map(function(t,e){return"("+(e+1)+") "+t}).join(" "),n=DR.create("invalid-analytics-context",{errorInfo:n}),RR.warn(n.message));var n,r,i,o,s,a,u,c,h,l,f=t.options.appId;if(!f)throw DR.create("no-app-id");if(!t.options.apiKey){if(!t.options.measurementId)throw DR.create("no-api-key");RR.warn('The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID '+t.options.measurementId+' provided in the "measurementId" field in the local Firebase config.')}if(null!=BR[f])throw DR.create("already-exists",{id:f});return zR||(function(){for(var t=window.document.getElementsByTagName("script"),e=0,n=Object.values(t);e<n.length;e++){var r=n[e];if(r.src&&r.src.includes(PR))return r}}()||(s=HR,(a=document.createElement("script")).src=PR+"?l="+s,a.async=!0,document.head.appendChild(a)),i=HR,o=[],Array.isArray(window[i])?o=window[i]:window[i]=o,n=BR,s=WR,a=KR,r=HR,i=GR,o=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];window[r].push(arguments)},window[i]&&"function"==typeof window[i]&&(o=window[i]),window[i]=(u=o,c=n,h=s,l=a,function(n,r,i){return po(this,void 0,void 0,function(){var e;return vo(this,function(t){switch(t.label){case 0:return t.trys.push([0,6,,7]),n!==CR.EVENT?[3,2]:[4,function(u,c,h,l,f){return po(this,void 0,void 0,function(){var n,r,e,i,o,s,a;return vo(this,function(t){switch(t.label){case 0:return t.trys.push([0,4,,5]),n=[],f&&f.send_to?(a=f.send_to,Array.isArray(a)||(a=[a]),[4,Promise.all(h)]):[3,2];case 1:for(r=t.sent(),e=function(e){var t=r.find(function(t){return t.measurementId===e});if(!(t=t&&c[t.appId]))return n=[],"break";n.push(t)},i=0,o=a;i<o.length&&(s=o[i],"break"!==e(s));i++);t.label=2;case 2:return 0===n.length&&(n=Object.values(c)),[4,Promise.all(n)];case 3:return t.sent(),u(CR.EVENT,l,f||{}),[3,5];case 4:return a=t.sent(),RR.error(a),[3,5];case 5:return[2]}})})}(u,c,h,r,i)];case 1:return t.sent(),[3,5];case 2:return n!==CR.CONFIG?[3,4]:[4,function(r,i,o,s,a,u){return po(this,void 0,void 0,function(){var e,n;return vo(this,function(t){switch(t.label){case 0:e=s[a],t.label=1;case 1:return t.trys.push([1,7,,8]),e?[4,i[e]]:[3,3];case 2:return t.sent(),[3,6];case 3:return[4,Promise.all(o)];case 4:return(n=(n=t.sent()).find(function(t){return t.measurementId===a}))?[4,i[n.appId]]:[3,6];case 5:t.sent(),t.label=6;case 6:return[3,8];case 7:return n=t.sent(),RR.error(n),[3,8];case 8:return r(CR.CONFIG,a,u),[2]}})})}(u,c,h,l,r,i)];case 3:return t.sent(),[3,5];case 4:u(CR.SET,r),t.label=5;case 5:return[3,7];case 6:return e=t.sent(),RR.error(e),[3,7];case 7:return[2]}})})}),i={gtagCore:o,wrappedGtag:window[i]},qR=i.wrappedGtag,VR=i.gtagCore,zR=!0),BR[f]=function(i,o,s,a,u){return po(this,void 0,void 0,function(){var e,n,r;return vo(this,function(t){switch(t.label){case 0:return(e=FR(i)).then(function(t){s[t.measurementId]=t.appId,i.options.measurementId&&t.measurementId!==i.options.measurementId&&RR.warn("The measurement ID in the local Firebase config ("+i.options.measurementId+") does not match the measurement ID fetched from the server ("+t.measurementId+"). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.")}).catch(function(t){return RR.error(t)}),o.push(e),n=function(){return po(this,void 0,void 0,function(){var e;return vo(this,function(t){switch(t.label){case 0:return Lo()?[3,1]:(RR.warn(DR.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),[2,!1]);case 1:return t.trys.push([1,3,,4]),[4,Mo()];case 2:return t.sent(),[3,4];case 3:return e=t.sent(),RR.warn(DR.create("indexeddb-unavailable",{errorInfo:e}).message),[2,!1];case 4:return[2,!0]}})})}().then(function(t){return t?a.getId():void 0}),[4,Promise.all([e,n])];case 1:return r=t.sent(),e=r[0],n=r[1],u("js",new Date),(r={})[AR]="firebase",r.update=!0,null!=n&&(r[NR]=n),u(CR.CONFIG,e.measurementId,r),[2,e.measurementId]}})})}(t,WR,KR,e,VR),{app:t,logEvent:function(t,e,n){(function(n,r,i,o,s){return po(this,void 0,void 0,function(){var e;return vo(this,function(t){switch(t.label){case 0:return s&&s.global?(n(CR.EVENT,i,o),[2]):[3,1];case 1:return[4,r];case 2:e=t.sent(),e=fo(fo({},o),{send_to:e}),n(CR.EVENT,i,e),t.label=3;case 3:return[2]}})})})(qR,BR[f],t,e,n).catch(function(t){return RR.error(t)})},setCurrentScreen:function(t,e){(function(n,r,i,o){return po(this,void 0,void 0,function(){var e;return vo(this,function(t){switch(t.label){case 0:return o&&o.global?(n(CR.SET,{screen_name:i}),[2,Promise.resolve()]):[3,1];case 1:return[4,r];case 2:e=t.sent(),n(CR.CONFIG,e,{update:!0,screen_name:i}),t.label=3;case 3:return[2]}})})})(qR,BR[f],t,e).catch(function(t){return RR.error(t)})},setUserId:function(t,e){(function(n,r,i,o){return po(this,void 0,void 0,function(){var e;return vo(this,function(t){switch(t.label){case 0:return o&&o.global?(n(CR.SET,{user_id:i}),[2,Promise.resolve()]):[3,1];case 1:return[4,r];case 2:e=t.sent(),n(CR.CONFIG,e,{update:!0,user_id:i}),t.label=3;case 3:return[2]}})})})(qR,BR[f],t,e).catch(function(t){return RR.error(t)})},setUserProperties:function(t,e){(function(s,a,u,c){return po(this,void 0,void 0,function(){var e,n,r,i,o;return vo(this,function(t){switch(t.label){case 0:if(!c||!c.global)return[3,1];for(e={},n=0,r=Object.keys(u);n<r.length;n++)i=r[n],e["user_properties."+i]=u[i];return s(CR.SET,e),[2,Promise.resolve()];case 1:return[4,a];case 2:o=t.sent(),s(CR.CONFIG,o,{update:!0,user_properties:u}),t.label=3;case 3:return[2]}})})})(qR,BR[f],t,e).catch(function(t){return RR.error(t)})},setAnalyticsCollectionEnabled:function(t){(function(n,r){return po(this,void 0,void 0,function(){var e;return vo(this,function(t){switch(t.label){case 0:return[4,n];case 1:return e=t.sent(),window["ga-disable-"+e]=!r,[2]}})})})(BR[f],t).catch(function(t){return RR.error(t)})},INTERNAL:{delete:function(){return delete BR[f],Promise.resolve()}}}}var YR="analytics";(ru=Vl).INTERNAL.registerComponent(new ds(YR,function(t){return QR(t.getProvider("app").getImmediate(),t.getProvider("installations").getImmediate())},"PUBLIC").setServiceProps({settings:function(t){if(zR)throw DR.create("already-initialized");t.dataLayerName&&(HR=t.dataLayerName),t.gtagName&&(GR=t.gtagName)},EventName:L,isSupported:function(){return po(this,void 0,void 0,function(){return vo(this,function(t){switch(t.label){case 0:if(Ro())return[2,!1];if(!Fo())return[2,!1];if(!Lo())return[2,!1];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,Mo()];case 2:return[2,t.sent()];case 3:return t.sent(),[2,!1];case 4:return[2]}})})}})),ru.INTERNAL.registerComponent(new ds("analytics-internal",function(t){try{return{logEvent:t.getProvider(YR).getImmediate().logEvent}}catch(t){throw DR.create("interop-component-reg-failed",{reason:t})}},"PRIVATE")),ru.registerVersion("@firebase/analytics","0.6.2");var XR=(JR.prototype.isCachedDataFresh=function(t,e){if(!e)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;var n=Date.now()-e,e=n<=t;return this.logger.debug("Config fetch cache check. Cache age millis: "+n+". Cache max age millis (minimumFetchIntervalMillis setting): "+t+". Is cache hit: "+e+"."),e},JR.prototype.fetch=function(i){return po(this,void 0,void 0,function(){var e,n,r;return vo(this,function(t){switch(t.label){case 0:return[4,Promise.all([this.storage.getLastSuccessfulFetchTimestampMillis(),this.storage.getLastSuccessfulFetchResponse()])];case 1:return r=t.sent(),e=r[0],(r=r[1])&&this.isCachedDataFresh(i.cacheMaxAgeMillis,e)?[2,r]:(i.eTag=r&&r.eTag,[4,this.client.fetch(i)]);case 2:return n=t.sent(),r=[this.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())],200===n.status&&r.push(this.storage.setLastSuccessfulFetchResponse(n)),[4,Promise.all(r)];case 3:return t.sent(),[2,n]}})})},JR);function JR(t,e,n,r){this.client=t,this.storage=e,this.storageCache=n,this.logger=r}var Pr=((Pr={})["registration-window"]="Undefined window object. This SDK only supports usage in a browser environment.",Pr["registration-project-id"]="Undefined project identifier. Check Firebase app initialization.",Pr["registration-api-key"]="Undefined API key. Check Firebase app initialization.",Pr["registration-app-id"]="Undefined app identifier. Check Firebase app initialization.",Pr["storage-open"]="Error thrown when opening storage. Original error: {$originalErrorMessage}.",Pr["storage-get"]="Error thrown when reading from storage. Original error: {$originalErrorMessage}.",Pr["storage-set"]="Error thrown when writing to storage. Original error: {$originalErrorMessage}.",Pr["storage-delete"]="Error thrown when deleting from storage. Original error: {$originalErrorMessage}.",Pr["fetch-client-network"]="Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.",Pr["fetch-timeout"]='The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',Pr["fetch-throttle"]='The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',Pr["fetch-client-parse"]="Fetch client could not parse response. Original error: {$originalErrorMessage}.",Pr["fetch-status"]="Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.",Pr),$R=new Bo("remoteconfig","Remote Config",Pr),ZR=(tD.prototype.fetch=function(f){return po(this,void 0,void 0,function(){var n,r,i,o,s,a,u,c,h,l;return vo(this,function(t){switch(t.label){case 0:return[4,Promise.all([this.firebaseInstallations.getId(),this.firebaseInstallations.getToken()])];case 1:o=t.sent(),n=o[0],i=o[1],r=window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com",o=r+"/v1/projects/"+this.projectId+"/namespaces/"+this.namespace+":fetch?key="+this.apiKey,r={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":f.eTag||"*"},i={sdk_version:this.sdkVersion,app_instance_id:n,app_instance_id_token:i,app_id:this.appId,language_code:(void 0===e&&(e=navigator),e.languages&&e.languages[0]||e.language)},i={method:"POST",headers:r,body:JSON.stringify(i)},o=fetch(o,i),i=new Promise(function(t,e){f.signal.addEventListener(function(){var t=new Error("The operation was aborted.");t.name="AbortError",e(t)})}),t.label=2;case 2:return t.trys.push([2,5,,6]),[4,Promise.race([o,i])];case 3:return t.sent(),[4,o];case 4:return l=t.sent(),[3,6];case 5:throw i=t.sent(),o="fetch-client-network","AbortError"===i.name&&(o="fetch-timeout"),$R.create(o,{originalErrorMessage:i.message});case 6:if(s=l.status,a=l.headers.get("ETag")||void 0,200!==l.status)return[3,11];h=void 0,t.label=7;case 7:return t.trys.push([7,9,,10]),[4,l.json()];case 8:return h=t.sent(),[3,10];case 9:throw l=t.sent(),$R.create("fetch-client-parse",{originalErrorMessage:l.message});case 10:u=h.entries,c=h.state,t.label=11;case 11:if("INSTANCE_STATE_UNSPECIFIED"===c?s=500:"NO_CHANGE"===c?s=304:"NO_TEMPLATE"!==c&&"EMPTY_CONFIG"!==c||(u={}),304!==s&&200!==s)throw $R.create("fetch-status",{httpStatus:s});return[2,{status:s,eTag:a,config:u}]}var e})})},tD);function tD(t,e,n,r,i,o){this.firebaseInstallations=t,this.sdkVersion=e,this.namespace=n,this.projectId=r,this.apiKey=i,this.appId=o}var eD=(nD.prototype.addEventListener=function(t){this.listeners.push(t)},nD.prototype.abort=function(){this.listeners.forEach(function(t){return t()})},nD);function nD(){this.listeners=[]}var rD=["1","true","t","yes","y","on"],iD=(oD.prototype.asString=function(){return this._value},oD.prototype.asBoolean=function(){return"static"!==this._source&&0<=rD.indexOf(this._value.toLowerCase())},oD.prototype.asNumber=function(){if("static"===this._source)return 0;var t=Number(this._value);return isNaN(t)&&(t=0),t},oD.prototype.getSource=function(){return this._source},oD);function oD(t,e){void 0===e&&(e=""),this._source=t,this._value=e}var sD=(aD.prototype.setLogLevel=function(t){switch(t){case"debug":this._logger.logLevel=Es.DEBUG;break;case"silent":this._logger.logLevel=Es.SILENT;break;default:this._logger.logLevel=Es.ERROR}},Object.defineProperty(aD.prototype,"fetchTimeMillis",{get:function(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1},enumerable:!1,configurable:!0}),Object.defineProperty(aD.prototype,"lastFetchStatus",{get:function(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"},enumerable:!1,configurable:!0}),aD.prototype.activate=function(){return po(this,void 0,void 0,function(){var e,n;return vo(this,function(t){switch(t.label){case 0:return[4,Promise.all([this._storage.getLastSuccessfulFetchResponse(),this._storage.getActiveConfigEtag()])];case 1:return n=t.sent(),e=n[0],n=n[1],e&&e.config&&e.eTag&&e.eTag!==n?[4,Promise.all([this._storageCache.setActiveConfig(e.config),this._storage.setActiveConfigEtag(e.eTag)])]:[2,!1];case 2:return t.sent(),[2,!0]}})})},aD.prototype.ensureInitialized=function(){var t=this;return this._initializePromise||(this._initializePromise=this._storageCache.loadFromStorage().then(function(){t._isInitializationComplete=!0})),this._initializePromise},aD.prototype.fetch=function(){return po(this,void 0,void 0,function(){var e,n,r,i=this;return vo(this,function(t){switch(t.label){case 0:e=new eD,setTimeout(function(){return po(i,void 0,void 0,function(){return vo(this,function(t){return e.abort(),[2]})})},this.settings.fetchTimeoutMillis),t.label=1;case 1:return t.trys.push([1,4,,6]),[4,this._client.fetch({cacheMaxAgeMillis:this.settings.minimumFetchIntervalMillis,signal:e})];case 2:return t.sent(),[4,this._storageCache.setLastFetchStatus("success")];case 3:return t.sent(),[3,6];case 4:return n=t.sent(),r=n instanceof Vo&&-1!==n.code.indexOf("fetch-throttle")?"throttle":"failure",[4,this._storageCache.setLastFetchStatus(r)];case 5:throw t.sent(),n;case 6:return[2]}})})},aD.prototype.fetchAndActivate=function(){return po(this,void 0,void 0,function(){return vo(this,function(t){switch(t.label){case 0:return[4,this.fetch()];case 1:return t.sent(),[2,this.activate()]}})})},aD.prototype.getAll=function(){var t,e,n=this;return t=this._storageCache.getActiveConfig(),e=this.defaultConfig,void 0===t&&(t={}),void 0===e&&(e={}),Object.keys(fo(fo({},t),e)).reduce(function(t,e){return t[e]=n.getValue(e),t},{})},aD.prototype.getBoolean=function(t){return this.getValue(t).asBoolean()},aD.prototype.getNumber=function(t){return this.getValue(t).asNumber()},aD.prototype.getString=function(t){return this.getValue(t).asString()},aD.prototype.getValue=function(t){this._isInitializationComplete||this._logger.debug('A value was requested for key "'+t+'" before SDK initialization completed. Await on ensureInitialized if the intent was to get a previously activated value.');var e=this._storageCache.getActiveConfig();return e&&void 0!==e[t]?new iD("remote",e[t]):this.defaultConfig&&void 0!==this.defaultConfig[t]?new iD("default",String(this.defaultConfig[t])):(this._logger.debug('Returning static value for key "'+t+'". Define a default or remote value if this is unintentional.'),new iD("static"))},aD);function aD(t,e,n,r,i){this.app=t,this._client=e,this._storageCache=n,this._storage=r,this._logger=i,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}function uD(t,e){return t=t.target.error||void 0,$R.create(e,{originalErrorMessage:t&&t.message})}var cD="app_namespace_store",hD=(lD.prototype.getLastFetchStatus=function(){return this.get("last_fetch_status")},lD.prototype.setLastFetchStatus=function(t){return this.set("last_fetch_status",t)},lD.prototype.getLastSuccessfulFetchTimestampMillis=function(){return this.get("last_successful_fetch_timestamp_millis")},lD.prototype.setLastSuccessfulFetchTimestampMillis=function(t){return this.set("last_successful_fetch_timestamp_millis",t)},lD.prototype.getLastSuccessfulFetchResponse=function(){return this.get("last_successful_fetch_response")},lD.prototype.setLastSuccessfulFetchResponse=function(t){return this.set("last_successful_fetch_response",t)},lD.prototype.getActiveConfig=function(){return this.get("active_config")},lD.prototype.setActiveConfig=function(t){return this.set("active_config",t)},lD.prototype.getActiveConfigEtag=function(){return this.get("active_config_etag")},lD.prototype.setActiveConfigEtag=function(t){return this.set("active_config_etag",t)},lD.prototype.getThrottleMetadata=function(){return this.get("throttle_metadata")},lD.prototype.setThrottleMetadata=function(t){return this.set("throttle_metadata",t)},lD.prototype.deleteThrottleMetadata=function(){return this.delete("throttle_metadata")},lD.prototype.get=function(a){return po(this,void 0,void 0,function(){var o,s=this;return vo(this,function(t){switch(t.label){case 0:return[4,this.openDbPromise];case 1:return o=t.sent(),[2,new Promise(function(e,n){var t=o.transaction([cD],"readonly").objectStore(cD),r=s.createCompositeKey(a);try{var i=t.get(r);i.onerror=function(t){n(uD(t,"storage-get"))},i.onsuccess=function(t){t=t.target.result,e(t?t.value:void 0)}}catch(t){n($R.create("storage-get",{originalErrorMessage:t&&t.message}))}})]}})})},lD.prototype.set=function(a,u){return po(this,void 0,void 0,function(){var o,s=this;return vo(this,function(t){switch(t.label){case 0:return[4,this.openDbPromise];case 1:return o=t.sent(),[2,new Promise(function(t,e){var n=o.transaction([cD],"readwrite").objectStore(cD),r=s.createCompositeKey(a);try{var i=n.put({compositeKey:r,value:u});i.onerror=function(t){e(uD(t,"storage-set"))},i.onsuccess=function(){t()}}catch(t){e($R.create("storage-set",{originalErrorMessage:t&&t.message}))}})]}})})},lD.prototype.delete=function(a){return po(this,void 0,void 0,function(){var o,s=this;return vo(this,function(t){switch(t.label){case 0:return[4,this.openDbPromise];case 1:return o=t.sent(),[2,new Promise(function(t,e){var n=o.transaction([cD],"readwrite").objectStore(cD),r=s.createCompositeKey(a);try{var i=n.delete(r);i.onerror=function(t){e(uD(t,"storage-delete"))},i.onsuccess=function(){t()}}catch(t){e($R.create("storage-delete",{originalErrorMessage:t&&t.message}))}})]}})})},lD.prototype.createCompositeKey=function(t){return[this.appId,this.appName,this.namespace,t].join()},lD);function lD(t,e,n,r){void 0===r&&(r=new Promise(function(e,n){var t=indexedDB.open("firebase_remote_config",1);t.onerror=function(t){n(uD(t,"storage-open"))},t.onsuccess=function(t){e(t.target.result)},t.onupgradeneeded=function(t){var e=t.target.result;0===t.oldVersion&&e.createObjectStore(cD,{keyPath:"compositeKey"})}})),this.appId=t,this.appName=e,this.namespace=n,this.openDbPromise=r}var fD=(pD.prototype.getLastFetchStatus=function(){return this.lastFetchStatus},pD.prototype.getLastSuccessfulFetchTimestampMillis=function(){return this.lastSuccessfulFetchTimestampMillis},pD.prototype.getActiveConfig=function(){return this.activeConfig},pD.prototype.loadFromStorage=function(){return po(this,void 0,void 0,function(){var e,n,r;return vo(this,function(t){switch(t.label){case 0:return e=this.storage.getLastFetchStatus(),n=this.storage.getLastSuccessfulFetchTimestampMillis(),r=this.storage.getActiveConfig(),[4,e];case 1:return(e=t.sent())&&(this.lastFetchStatus=e),[4,n];case 2:return(n=t.sent())&&(this.lastSuccessfulFetchTimestampMillis=n),[4,r];case 3:return(r=t.sent())&&(this.activeConfig=r),[2]}})})},pD.prototype.setLastFetchStatus=function(t){return this.lastFetchStatus=t,this.storage.setLastFetchStatus(t)},pD.prototype.setLastSuccessfulFetchTimestampMillis=function(t){return this.lastSuccessfulFetchTimestampMillis=t,this.storage.setLastSuccessfulFetchTimestampMillis(t)},pD.prototype.setActiveConfig=function(t){return this.activeConfig=t,this.storage.setActiveConfig(t)},pD);function pD(t){this.storage=t}var dD=(vD.prototype.fetch=function(n){return po(this,void 0,void 0,function(){var e;return vo(this,function(t){switch(t.label){case 0:return[4,this.storage.getThrottleMetadata()];case 1:return e=t.sent()||{backoffCount:0,throttleEndTimeMillis:Date.now()},[2,this.attemptFetch(n,e)]}})})},vD.prototype.attemptFetch=function(s,t){var a=t.throttleEndTimeMillis,u=t.backoffCount;return po(this,void 0,void 0,function(){var n,r;return vo(this,function(t){switch(t.label){case 0:return[4,(i=s.signal,o=a,new Promise(function(t,e){var n=Math.max(o-Date.now(),0),r=setTimeout(t,n);i.addEventListener(function(){clearTimeout(r),e($R.create("fetch-throttle",{throttleEndTimeMillis:o}))})}))];case 1:t.sent(),t.label=2;case 2:return t.trys.push([2,5,,7]),[4,this.client.fetch(s)];case 3:return n=t.sent(),[4,this.storage.deleteThrottleMetadata()];case 4:return t.sent(),[2,n];case 5:if(!((e=r=t.sent())instanceof Vo&&e.customData)||429!==(e=Number(e.customData.httpStatus))&&500!==e&&503!==e&&504!==e)throw r;return r={throttleEndTimeMillis:Date.now()+ps(u),backoffCount:u+1},[4,this.storage.setThrottleMetadata(r)];case 6:return t.sent(),[2,this.attemptFetch(s,r)];case 7:return[2]}var e,i,o})})},vD);function vD(t,e){this.client=t,this.storage=e}var yD,gD="@firebase/remote-config";return(yD=Vl).INTERNAL.registerComponent(new ds("remoteConfig",function(t,e){var n=t.getProvider("app").getImmediate(),r=t.getProvider("installations").getImmediate();if("undefined"==typeof window)throw $R.create("registration-window");var i=n.options,o=i.projectId,s=i.apiKey,a=i.appId;if(!o)throw $R.create("registration-project-id");if(!s)throw $R.create("registration-api-key");if(!a)throw $R.create("registration-app-id");e=e||"firebase";var u=new hD(a,n.name,e),t=new fD(u);return(i=new As(gD)).logLevel=Es.ERROR,a=new ZR(r,yD.SDK_VERSION,e,o,s,a),a=new dD(a,u),a=new XR(a,u,t,i),(i=new sD(n,a,t,u,i)).ensureInitialized(),i},"PUBLIC").setMultipleInstances(!0)),yD.registerVersion(gD,"0.1.30"),console.warn("\nIt looks like you're using the development build of the Firebase JS SDK.\nWhen deploying Firebase apps to production, it is advisable to only import\nthe individual SDK components you intend to use.\n\nFor the CDN builds, these are available in the following manner\n(replace <PACKAGE> with the name of a component - i.e. auth, database, etc):\n\nhttps://www.gstatic.com/firebasejs/5.0.0/firebase-<PACKAGE>.js\n"),Vl.registerVersion("firebase","8.0.2-20201012233953","cdn"),Vl});