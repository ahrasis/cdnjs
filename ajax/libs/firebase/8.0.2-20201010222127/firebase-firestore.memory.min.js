!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(require("@firebase/app")):"function"==typeof define&&define.amd?define(["@firebase/app"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self).firebase)}(this,function(vp){"use strict";try{(function(){var t,e=(t=vp)&&"object"==typeof t&&"default"in t?t:{default:t},r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function n(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var u,i=function(){return(i=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function y(t,s,u,a){return new(u=u||Promise)(function(n,e){function r(t){try{o(a.next(t))}catch(t){e(t)}}function i(t){try{o(a.throw(t))}catch(t){e(t)}}function o(t){var e;t.done?n(t.value):((e=t.value)instanceof u?e:new u(function(t){t(e)})).then(r,i)}o((a=a.apply(t,s||[])).next())})}function v(n,r){var i,o,s,u={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},t={next:e(0),throw:e(1),return:e(2)};return"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(e){return function(t){return function(e){if(i)throw new TypeError("Generator is already executing.");for(;u;)try{if(i=1,o&&(s=2&e[0]?o.return:e[0]?o.throw||((s=o.return)&&s.call(o),0):o.next)&&!(s=s.call(o,e[1])).done)return s;switch(o=0,s&&(e=[2&e[0],s.value]),e[0]){case 0:case 1:s=e;break;case 4:return u.label++,{value:e[1],done:!1};case 5:u.label++,o=e[1],e=[0];continue;case 7:e=u.ops.pop(),u.trys.pop();continue;default:if(!(s=0<(s=u.trys).length&&s[s.length-1])&&(6===e[0]||2===e[0])){u=0;continue}if(3===e[0]&&(!s||e[1]>s[0]&&e[1]<s[3])){u.label=e[1];break}if(6===e[0]&&u.label<s[1]){u.label=s[1],s=e;break}if(s&&u.label<s[2]){u.label=s[2],u.ops.push(e);break}s[2]&&u.ops.pop(),u.trys.pop();continue}e=r.call(n,u)}catch(t){e=[6,t],o=0}finally{i=s=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}}function o(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),i=0,e=0;e<n;e++)for(var o=arguments[e],s=0,u=o.length;s<u;s++,i++)r[i]=o[s];return r}function s(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),i=0,e=0;e<n;e++)for(var o=arguments[e],s=0,u=o.length;s<u;s++,i++)r[i]=o[s];return r}function a(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(!(e<t.logLevel)){var i=(new Date).toISOString(),o=l[e];if(!o)throw new Error("Attempted to log a message with an invalid logType (value: "+e+")");console[o].apply(console,s(["["+i+"]  "+t.name+":"],n))}}(me=u=u||{})[me.DEBUG=0]="DEBUG",me[me.VERBOSE=1]="VERBOSE",me[me.INFO=2]="INFO",me[me.WARN=3]="WARN",me[me.ERROR=4]="ERROR",me[me.SILENT=5]="SILENT";var h={debug:u.DEBUG,verbose:u.VERBOSE,info:u.INFO,warn:u.WARN,error:u.ERROR,silent:u.SILENT},c=u.INFO,l=((we={})[u.DEBUG]="log",we[u.VERBOSE]="log",we[u.INFO]="info",we[u.WARN]="warn",we[u.ERROR]="error",we),f=(Object.defineProperty(p.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in u))throw new TypeError('Invalid value "'+t+'" assigned to `logLevel`');this._logLevel=t},enumerable:!1,configurable:!0}),p.prototype.setLogLevel=function(t){this._logLevel="string"==typeof t?h[t]:t},Object.defineProperty(p.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!1,configurable:!0}),Object.defineProperty(p.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(t){this._userLogHandler=t},enumerable:!1,configurable:!0}),p.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,s([this,u.DEBUG],t)),this._logHandler.apply(this,s([this,u.DEBUG],t))},p.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,s([this,u.VERBOSE],t)),this._logHandler.apply(this,s([this,u.VERBOSE],t))},p.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,s([this,u.INFO],t)),this._logHandler.apply(this,s([this,u.INFO],t))},p.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,s([this,u.WARN],t)),this._logHandler.apply(this,s([this,u.WARN],t))},p.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,s([this,u.ERROR],t)),this._logHandler.apply(this,s([this,u.ERROR],t))},p);function p(t){this.name=t,this._logLevel=c,this._logHandler=a,this._userLogHandler=null}function d(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}var g,m="FirebaseError",w=(n(b,g=Error),b);function b(t,e,n){return(e=g.call(this,e)||this).code=t,e.customData=n,e.name=m,Object.setPrototypeOf(e,b.prototype),Error.captureStackTrace&&Error.captureStackTrace(e,E.prototype.create),e}var E=(I.prototype.create=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r,i=e[0]||{},o=this.service+"/"+t,t=(t=this.errors[t])?(r=i,t.replace(A,function(t,e){var n=r[e];return null!=n?String(n):"<"+e+"?>"})):"Error",t=this.serviceName+": "+t+" ("+o+").";return new w(o,t,i)},I);function I(t,e,n){this.service=t,this.serviceName=e,this.errors=n}var A=/\{\$([^}]+)}/g,T=function(t,e){return(T=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function N(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}var S="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},O=S||self;function P(){}function k(t){var e=typeof t;return"object"!=e?e:t?Array.isArray(t)?"array":e:"null"}function D(t){var e=k(t);return"array"==e||"object"==e&&"number"==typeof t.length}function R(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var L="closure_uid_"+(1e9*Math.random()>>>0),_=0;function V(t,e,n){return t.call.apply(t.bind,arguments)}function C(e,n,t){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var t=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(t,r),e.apply(n,t)}}return function(){return e.apply(n,arguments)}}function U(t,e,n){return(U=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?V:C).apply(null,arguments)}function j(e){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}var x=Date.now;function M(t,e){function n(){}n.prototype=e.prototype,t.X=e.prototype,t.prototype=new n,t.prototype.constructor=t}function q(){this.j=this.j,this.i=this.i}q.prototype.j=!1,q.prototype.ja=function(){!this.j&&(this.j=!0,this.G(),0)&&(Object.prototype.hasOwnProperty.call(this,L)&&this[L]||(this[L]=++_))},q.prototype.G=function(){if(this.i)for(;this.i.length;)this.i.shift()()};var F=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},B=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"==typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)};function W(){return Array.prototype.concat.apply([],arguments)}function G(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}function z(t){return/^[\s\xa0]*$/.test(t)}var H=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function Q(t,e){return-1!=t.indexOf(e)}function X(t,e){return t<e?-1:e<t?1:0}var K=O.navigator;function Y(t,e,n){for(var r in t)e.call(n,t[r],r,t)}function Z(t){var e,n={};for(e in t)n[e]=t[e];return n}ht=(K=K&&K.userAgent)?K:"";var $="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function J(t){for(var e,n,r=1;r<arguments.length;r++){for(e in n=arguments[r])t[e]=n[e];for(var i=0;i<$.length;i++)e=$[i],Object.prototype.hasOwnProperty.call(n,e)&&(t[e]=n[e])}}function tt(t){return tt[" "](t),t}tt[" "]=P;var et,nt=Q(ht,"Opera"),rt=Q(ht,"Trident")||Q(ht,"MSIE"),it=Q(ht,"Edge"),ot=it||rt,st=Q(ht,"Gecko")&&!(Q(ht.toLowerCase(),"webkit")&&!Q(ht,"Edge"))&&!(Q(ht,"Trident")||Q(ht,"MSIE"))&&!Q(ht,"Edge"),ut=Q(ht.toLowerCase(),"webkit")&&!Q(ht,"Edge");function at(){var t=O.document;return t?t.documentMode:void 0}var K="",ht=(ht=ht,st?/rv:([^\);]+)(\)|;)/.exec(ht):it?/Edge\/([\d\.]+)/.exec(ht):rt?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(ht):ut?/WebKit\/(\S+)/.exec(ht):nt?/(?:Version)[ \/]?(\S+)/.exec(ht):void 0);ht&&(K=ht?ht[1]:""),et=rt&&null!=(ht=at())&&ht>parseFloat(K)?String(ht):K;var ct={};function lt(u){return t=u,e=function(){for(var t=0,e=H(String(et)).split("."),n=H(String(u)).split("."),r=Math.max(e.length,n.length),i=0;0==t&&i<r;i++)for(var o=e[i]||"",s=n[i]||"";o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],(0!=o[0].length||0!=s[0].length)&&(t=X(0==o[1].length?0:parseInt(o[1],10),0==s[1].length?0:parseInt(s[1],10))||X(0==o[2].length,0==s[2].length)||X(o[2],s[2]),o=o[3],s=s[3],0==t););return 0<=t},n=ct,Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e();var t,e,n}var ft=O.document&&rt&&(at()||parseInt(et,10))||void 0,pt=!rt||9<=Number(ft),dt=rt&&!lt("9"),yt=function(){if(!O.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{O.addEventListener("test",P,e),O.removeEventListener("test",P,e)}catch(t){}return t}();function vt(t,e){this.type=t,this.a=this.target=e,this.defaultPrevented=!1}function gt(t,e){if(vt.call(this,t?t.type:""),this.relatedTarget=this.a=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.c=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.a=e,e=t.relatedTarget){if(st){t:{try{tt(e.nodeName);var i=!0;break t}catch(t){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:mt[t.pointerType]||"",(this.c=t).defaultPrevented&&this.b()}}vt.prototype.b=function(){this.defaultPrevented=!0},M(gt,vt);var mt={2:"touch",3:"pen",4:"mouse"};gt.prototype.b=function(){gt.X.b.call(this);var t=this.c;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,dt)try{(t.ctrlKey||112<=t.keyCode&&t.keyCode<=123)&&(t.keyCode=-1)}catch(t){}};var wt="closure_listenable_"+(1e6*Math.random()|0),bt=0;function Et(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.ca=i,this.key=++bt,this.Y=this.Z=!1}function It(t){t.Y=!0,t.listener=null,t.proxy=null,t.src=null,t.ca=null}function At(t){this.src=t,this.a={},this.b=0}function Tt(t,e){var n,r,i,o=e.type;o in t.a&&(n=t.a[o],(i=0<=(r=F(n,e)))&&Array.prototype.splice.call(n,r,1),i&&(It(e),0==t.a[o].length&&(delete t.a[o],t.b--)))}function Nt(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.Y&&o.listener==e&&o.capture==!!n&&o.ca==r)return i}return-1}At.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var s=Nt(t,e,r,i);return-1<s?(e=t[s],n||(e.Z=!1)):((e=new Et(e,this.src,o,!!r,i)).Z=n,t.push(e)),e};var St="closure_lm_"+(1e6*Math.random()|0),Ot={};function Pt(t,e,n,r,i){if(r&&r.once)return function t(e,n,r,i,o){if(Array.isArray(n)){for(var s=0;s<n.length;s++)t(e,n[s],r,i,o);return null}return r=Ut(r),e&&e[wt]?e.wa(n,r,R(i)?!!i.capture:!!i,o):kt(e,n,r,!0,i,o)}(t,e,n,r,i);if(Array.isArray(e)){for(var o=0;o<e.length;o++)Pt(t,e[o],n,r,i);return null}return n=Ut(n),t&&t[wt]?t.va(e,n,R(r)?!!r.capture:!!r,i):kt(t,e,n,!1,r,i)}function kt(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var s=R(i)?!!i.capture:!!i;if(s&&!pt)return null;var u,a,h=Vt(t);if(h||(t[St]=h=new At(t)),(n=h.add(e,n,r,s,o)).proxy)return n;if(u=_t,r=a=pt?function(t){return u.call(a.src,a.listener,t)}:function(t){if(!(t=u.call(a.src,a.listener,t)))return t},(n.proxy=r).src=t,r.listener=n,t.addEventListener)yt||(i=s),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(Rt(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function Dt(t){var e,n,r;"number"!=typeof t&&t&&!t.Y&&((e=t.src)&&e[wt]?Tt(e.c,t):(n=t.type,r=t.proxy,e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(Rt(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=Vt(e))?(Tt(n,t),0==n.b&&(n.src=null,e[St]=null)):It(t)))}function Rt(t){return t in Ot?Ot[t]:Ot[t]="on"+t}function Lt(t,e){var n=t.listener,r=t.ca||t.src;return t.Z&&Dt(t),n.call(r,e)}function _t(t,e){if(t.Y)return!0;if(pt)return Lt(t,new gt(e,this));if(!e)t:{e=["window","event"];for(var n=O,r=0;r<e.length;r++)if(null==(n=n[e[r]])){e=null;break t}e=n}return Lt(t,e=new gt(e,this))}function Vt(t){return(t=t[St])instanceof At?t:null}var Ct="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ut(e){return"function"==k(e)?e:(e[Ct]||(e[Ct]=function(t){return e.handleEvent(t)}),e[Ct])}function jt(){q.call(this),this.c=new At(this),(this.J=this).C=null}function xt(t,e){var n,r=t.C;if(r)for(n=[];r;r=r.C)n.push(r);if(t=t.J,r=e.type||e,"string"==typeof e?e=new vt(e,t):e instanceof vt?e.target=e.target||t:(s=e,J(e=new vt(r,t),s)),s=!0,n)for(var i=n.length-1;0<=i;i--)var o=e.a=n[i],s=Mt(o,r,!0,e)&&s;if(s=Mt(o=e.a=t,r,!0,e)&&s,s=Mt(o,r,!1,e)&&s,n)for(i=0;i<n.length;i++)s=Mt(o=e.a=n[i],r,!1,e)&&s}function Mt(t,e,n,r){if(!(e=t.c.a[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var s,u,a=e[o];a&&!a.Y&&a.capture==n&&(s=a.listener,u=a.ca||a.src,a.Z&&Tt(t.c,a),i=!1!==s.call(u,r)&&i)}return i&&!r.defaultPrevented}M(jt,q),jt.prototype[wt]=!0,(ht=jt.prototype).addEventListener=function(t,e,n,r){Pt(this,t,e,n,r)},ht.removeEventListener=function(t,e,n,r){!function t(e,n,r,i,o){if(Array.isArray(n))for(var s=0;s<n.length;s++)t(e,n[s],r,i,o);else i=R(i)?!!i.capture:!!i,r=Ut(r),e&&e[wt]?(e=e.c,(n=String(n).toString())in e.a&&-1<(r=Nt(s=e.a[n],r,i,o))&&(It(s[r]),Array.prototype.splice.call(s,r,1),0==s.length&&(delete e.a[n],e.b--))):(e=e&&Vt(e))&&(n=e.a[n.toString()],e=-1,n&&(e=Nt(n,r,i,o)),(r=-1<e?n[e]:null)&&Dt(r))}(this,t,e,n,r)},ht.G=function(){if(jt.X.G.call(this),this.c){var t,e=this.c;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)It(n[r]);delete e.a[t],e.b--}}this.C=null},ht.va=function(t,e,n,r){return this.c.add(String(t),e,!1,n,r)},ht.wa=function(t,e,n,r){return this.c.add(String(t),e,!0,n,r)};var qt=O.JSON.stringify;function Ft(){this.b=this.a=null}var Bt,Wt=(Gt.prototype.get=function(){var t;return 0<this.b?(this.b--,t=this.a,this.a=t.next,t.next=null):t=this.c(),t},new Gt(function(){return new zt},function(t){t.reset()},100));function Gt(t,e,n){this.f=n,this.c=t,this.g=e,this.b=0,this.a=null}function zt(){this.next=this.b=this.a=null}function Ht(t,e){var n;Bt||(n=O.Promise.resolve(void 0),Bt=function(){n.then(Kt)}),Qt||(Bt(),Qt=!0),Xt.add(t,e)}Ft.prototype.add=function(t,e){var n=Wt.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},zt.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null};var Qt=!(zt.prototype.reset=function(){this.next=this.b=this.a=null}),Xt=new Ft;function Kt(){for(var t,e;n=e=void 0,n=null,(e=Xt).a&&(n=e.a,e.a=e.a.next,e.a||(e.b=null),n.next=null),t=n;){try{t.a.call(t.b)}catch(t){!function(t){O.setTimeout(function(){throw t},0)}(t)}var n=Wt;n.g(t),n.b<n.f&&(n.b++,t.next=n.a,n.a=t)}Qt=!1}function Yt(t,e){jt.call(this),this.b=t||1,this.a=e||O,this.f=U(this.Xa,this),this.g=x()}function Zt(t){t.aa=!1,t.M&&(t.a.clearTimeout(t.M),t.M=null)}function $t(t,e,n){if("function"==k(t))n&&(t=U(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=U(t.handleEvent,t)}return 2147483647<Number(e)?-1:O.setTimeout(t,e||0)}M(Yt,jt),(ht=Yt.prototype).aa=!1,ht.M=null,ht.Xa=function(){var t;this.aa&&(0<(t=x()-this.g)&&t<.8*this.b?this.M=this.a.setTimeout(this.f,this.b-t):(this.M&&(this.a.clearTimeout(this.M),this.M=null),xt(this,"tick"),this.aa&&(Zt(this),this.start())))},ht.start=function(){this.aa=!0,this.M||(this.M=this.a.setTimeout(this.f,this.b),this.g=x())},ht.G=function(){Yt.X.G.call(this),Zt(this),delete this.a};var Jt,te,ee=(T(te=re,K=Jt=q),te.prototype=null===K?Object.create(K):(ne.prototype=K.prototype,new ne),re.prototype.f=function(t){this.b=arguments,this.a?this.c=!0:function t(e){e.a=$t(function(){e.a=null,e.c&&(e.c=!1,t(e))},e.h);var n=e.b;e.b=null,e.g.apply(null,n)}(this)},re.prototype.G=function(){Jt.prototype.G.call(this),this.a&&(O.clearTimeout(this.a),this.a=null,this.c=!1,this.b=null)},re);function ne(){this.constructor=te}function re(t,e,n){var r=Jt.call(this)||this;return r.g=null!=n?t.bind(n):t,r.h=e,r.b=null,r.c=!1,r.a=null,r}function ie(t){q.call(this),this.b=t,this.a={}}M(ie,q);var oe=[];function se(t,e,n,r){Array.isArray(n)||(n&&(oe[0]=n.toString()),n=oe);for(var i=0;i<n.length;i++){var o=Pt(e,n[i],r||t.handleEvent,!1,t.b||t);if(!o)break;t.a[o.key]=o}}function ue(t){Y(t.a,function(t,e){this.a.hasOwnProperty(e)&&Dt(t)},t),t.a={}}function ae(){this.a=!0}function he(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+function(t,e){if(!t.a)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(r.length<2)){var i=r[1];if(Array.isArray(i)&&!(i.length<1)&&"noop"!=(r=i[0])&&"stop"!=r&&"close"!=r)for(var o=1;o<i.length;o++)i[o]=""}}return qt(n)}catch(t){return e}}(t,n)+(r?" "+r:"")})}ie.prototype.G=function(){ie.X.G.call(this),ue(this)},ie.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},ae.prototype.info=function(){};var ce=null;function le(){return ce=ce||new jt}function fe(t){vt.call(this,"serverreachability",t)}function pe(){var t=le();xt(t,new fe(t))}function de(t){vt.call(this,"statevent",t)}function ye(){var t=le();xt(t,new de(t))}function ve(t){vt.call(this,"timingevent",t)}function ge(t,e){if("function"!=k(t))throw Error("Fn must not be null and must be a function");return O.setTimeout(function(){t()},e)}M(fe,vt),M(de,vt),M(ve,vt);var me={NO_ERROR:0,Ya:1,fb:2,eb:3,ab:4,cb:5,gb:6,Da:7,TIMEOUT:8,jb:9},we={$a:"complete",nb:"success",Ea:"error",Da:"abort",lb:"ready",mb:"readystatechange",TIMEOUT:"timeout",hb:"incrementaldata",kb:"progress",bb:"downloadprogress",ob:"uploadprogress"};function be(){}function Ee(t){var e;return(e=t.a)||(e=t.a={}),e}function Ie(){}be.prototype.a=null;var Ae,S={OPEN:"a",Za:"b",Ea:"c",ib:"d"};function Te(){vt.call(this,"d")}function Ne(){vt.call(this,"c")}function Se(){}function Oe(t,e,n,r){this.g=t,this.c=e,this.f=n,this.S=r||1,this.J=new ie(this),this.P=Pe,t=ot?125:void 0,this.R=new Yt(t),this.B=null,this.b=!1,this.j=this.l=this.i=this.H=this.u=this.T=this.o=null,this.s=[],this.a=null,this.D=0,this.h=this.m=null,this.N=-1,this.A=!1,this.O=0,this.F=null,this.V=this.C=this.U=this.I=!1}M(Te,vt),M(Ne,vt),M(Se,be),Ae=new Se;var Pe=45e3,ke={},De={};function Re(t,e,n){t.H=1,t.i=$e(He(e)),t.j=n,t.I=!0,Le(t,null)}function Le(t,e){t.u=x(),Ve(t),t.l=He(t.i);var s,u,a,h,c,l,n=t.l,r=t.S;Array.isArray(r)||(r=[String(r)]),fn(n.b,"t",r),t.D=0,t.a=or(t.g,t.g.C?e:null),0<t.O&&(t.F=new ee(U(t.Ca,t,t.a),t.O)),se(t.J,t.a,"readystatechange",t.Va),e=t.B?Z(t.B):{},t.j?(t.m||(t.m="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.a.ba(t.l,t.m,t.j,e)):(t.m="GET",t.a.ba(t.l,t.m,null,e)),pe(),s=t.c,u=t.m,a=t.l,h=t.f,c=t.S,l=t.j,s.info(function(){if(s.a)if(l)for(var t="",e=l.split("&"),n=0;n<e.length;n++){var r,i,o=e[n].split("=");1<o.length&&(r=o[0],o=o[1],t=2<=(i=r.split("_")).length&&"type"==i[1]?t+(r+"=")+o+"&":t+(r+"=redacted&"))}else t=null;else t=l;return"XMLHTTP REQ ("+h+") [attempt "+c+"]: "+u+"\n"+a+"\n"+t})}function _e(t,e,n){for(var r,i,o,s=!0;!t.A&&t.D<n.length;){var u=(u=n,o=void 0,i=(r=t).D,-1==(o=u.indexOf("\n",i))?De:(i=Number(u.substring(i,o)),isNaN(i)?ke:(o+=1)+i>u.length?De:(u=u.substr(o,i),r.D=o+i,u)));if(u==De){4==e&&(t.h=4,ye(),s=!1),he(t.c,t.f,null,"[Incomplete Response]");break}if(u==ke){t.h=4,ye(),he(t.c,t.f,n,"[Invalid Chunk]"),s=!1;break}he(t.c,t.f,u,null),Me(t,u)}4==e&&0==n.length&&(t.h=1,ye(),s=!1),t.b=t.b&&s,s?0<n.length&&!t.V&&(t.V=!0,(e=t.g).a==t&&e.U&&!e.F&&(e.c.info("Great, no buffering proxy detected. Bytes received: "+n.length),Zn(e),e.F=!0,ye())):(he(t.c,t.f,n,"[Invalid Chunked Response]"),xe(t),je(t))}function Ve(t){t.T=x()+t.P,Ce(t,t.P)}function Ce(t,e){if(null!=t.o)throw Error("WatchDog timer not null");t.o=ge(U(t.Ta,t),e)}function Ue(t){t.o&&(O.clearTimeout(t.o),t.o=null)}function je(t){0==t.g.v||t.A||tr(t.g,t)}function xe(t){Ue(t);var e=t.F;e&&"function"==typeof e.ja&&e.ja(),t.F=null,Zt(t.R),ue(t.J),t.a&&(e=t.a,t.a=null,e.abort(),e.ja())}function Me(t,e){try{var n,r,i,o,s,u=t.g;if(0!=u.v&&(u.a==t||wn(u.b,t)))if(u.I=t.N,!t.C&&wn(u.b,t)&&3==u.v){try{var a=u.ka.a.parse(e)}catch(t){a=null}if(Array.isArray(a)&&3==a.length){var h=a;if(0==h[0]){t:if(!u.j){if(u.a){if(!(u.a.u+3e3<t.u))break t;Jn(u),Bn(u)}Yn(u),ye()}}else u.oa=h[1],0<u.oa-u.P&&h[2]<37500&&u.H&&0==u.o&&!u.m&&(u.m=ge(U(u.Qa,u),6e3));if(mn(u.b)<=1&&u.ea){try{u.ea()}catch(t){}u.ea=void 0}}else nr(u,11)}else if(!t.C&&u.a!=t||Jn(u),!z(e))for(e=a=u.ka.a.parse(e),a=0;a<e.length;a++)h=e[a],u.P=h[0],h=h[1],2==u.v?"c"==h[0]?(u.J=h[1],u.ga=h[2],null!=(r=h[3])&&(u.ha=r,u.c.info("VER="+u.ha)),null!=(o=h[4])&&(u.pa=o,u.c.info("SVER="+u.pa)),null!=(r=h[5])&&"number"==typeof r&&0<r&&(n=1.5*r,u.D=n,u.c.info("backChannelRequestTimeoutMs_="+n)),n=u,(o=t.a)&&(!(r=o.a?o.a.getResponseHeader("X-Client-Wire-Protocol"):null)||!(i=n.b).a&&(Q(r,"spdy")||Q(r,"quic")||Q(r,"h2"))&&(i.f=i.g,i.a=new Set,i.b&&(bn(i,i.b),i.b=null)),!n.A||(s=o.a?o.a.getResponseHeader("X-HTTP-Session-Id"):null)&&(n.na=s,Ze(n.B,n.A,s))),u.v=3,u.f&&u.f.ta(),u.U&&(u.N=x()-t.u,u.c.info("Handshake RTT: "+u.N+"ms")),i=t,(n=u).la=ir(n,n.C?n.ga:null,n.fa),i.C?(En(n.b,i),o=i,(s=n.D)&&o.setTimeout(s),o.o&&(Ue(o),Ve(o)),n.a=i):Kn(n),0<u.g.length&&zn(u)):"stop"!=h[0]&&"close"!=h[0]||nr(u,7):3==u.v&&("stop"==h[0]||"close"==h[0]?"stop"==h[0]?nr(u,7):Fn(u):"noop"!=h[0]&&u.f&&u.f.sa(h),u.o=0);pe()}catch(t){}}function qe(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(D(t)||"string"==typeof t)B(t,e,void 0);else{if(t.L&&"function"==typeof t.L)var n=t.L();else if(t.K&&"function"==typeof t.K)n=void 0;else if(D(t)||"string"==typeof t){n=[];for(var r=t.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,t)n[r++]=i;i=(r=function(t){if(t.K&&"function"==typeof t.K)return t.K();if("string"==typeof t)return t.split("");if(D(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}(t)).length;for(var o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}}function Fe(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof Fe)for(n=t.L(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function Be(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];We(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){for(var i={},n=e=0;e<t.a.length;)We(i,r=t.a[e])||(i[t.a[n++]=r]=1),e++;t.a.length=n}}function We(t,e){return Object.prototype.hasOwnProperty.call(t,e)}(ht=Oe.prototype).setTimeout=function(t){this.P=t},ht.Va=function(t){t=t.target;var e=this.F;e&&3==jn(t)?e.f():this.Ca(t)},ht.Ca=function(t){try{if(t==this.a)t:{var e=jn(this.a),n=this.a.ua(),r=this.a.W();if(!(e<3||3==e&&!ot&&!this.a.$())){this.A||4!=e||7==n||pe(),Ue(this);var i=this.a.W();if(this.N=i,n=this.a.$(),this.b=200==i,r=this.c,u=this.m,a=this.l,h=this.f,c=this.S,l=e,f=i,r.info(function(){return"XMLHTTP RESP ("+h+") [ attempt "+c+"]: "+u+"\n"+a+"\n"+l+" "+f}),this.b){if(this.U&&!this.C){e:{if(this.a){var o=this.a;if((o=o.a?o.a.getResponseHeader("X-HTTP-Initial-Response"):null)&&!z(o)){var s=o;break e}}s=null}if(!s){this.b=!1,this.h=3,ye(),xe(this),je(this);break t}he(this.c,this.f,s,"Initial handshake response via X-HTTP-Initial-Response"),this.C=!0,Me(this,s)}this.I?(_e(this,e,n),ot&&this.b&&3==e&&(se(this.J,this.R,"tick",this.Ua),this.R.start())):(he(this.c,this.f,n,null),Me(this,n)),4==e&&xe(this),this.b&&!this.A&&(4==e?tr(this.g,this):(this.b=!1,Ve(this)))}else 400==i&&0<n.indexOf("Unknown SID")?this.h=3:this.h=0,ye(),xe(this),je(this)}}}catch(t){}var u,a,h,c,l,f},ht.Ua=function(){var t,e;this.a&&(t=jn(this.a),e=this.a.$(),this.D<e.length&&(Ue(this),_e(this,t,e),this.b&&4!=t&&Ve(this)))},ht.cancel=function(){this.A=!0,xe(this)},ht.Ta=function(){this.o=null;var t,e,n=x();0<=n-this.T?(t=this.c,e=this.l,t.info(function(){return"TIMEOUT: "+e}),2!=this.H&&(pe(),ye()),xe(this),this.h=2,je(this)):Ce(this,this.T-n)},(ht=Fe.prototype).K=function(){Be(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},ht.L=function(){return Be(this),this.a.concat()},ht.get=function(t,e){return We(this.b,t)?this.b[t]:e},ht.set=function(t,e){We(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},ht.forEach=function(t,e){for(var n=this.L(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var Ge=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function ze(t,e){var n;this.c=this.j=this.f="",this.h=null,this.i=this.g="",this.a=!1,t instanceof ze?(this.a=void 0!==e?e:t.a,Qe(this,t.f),this.j=t.j,Xe(this,t.c),Ke(this,t.h),this.g=t.g,e=t.b,(n=new an).c=e.c,e.a&&(n.a=new Fe(e.a),n.b=e.b),Ye(this,n),this.i=t.i):t&&(n=String(t).match(Ge))?(this.a=!!e,Qe(this,n[1]||"",!0),this.j=Je(n[2]||""),Xe(this,n[3]||"",!0),Ke(this,n[4]),this.g=Je(n[5]||"",!0),Ye(this,n[6]||"",!0),this.i=Je(n[7]||"")):(this.a=!!e,this.b=new an(null,this.a))}function He(t){return new ze(t)}function Qe(t,e,n){t.f=n?Je(e,!0):e,t.f&&(t.f=t.f.replace(/:$/,""))}function Xe(t,e,n){t.c=n?Je(e,!0):e}function Ke(t,e){if(e){if(e=Number(e),isNaN(e)||e<0)throw Error("Bad port number "+e);t.h=e}else t.h=null}function Ye(t,e,n){var r,i;e instanceof an?(t.b=e,r=t.b,(i=t.a)&&!r.f&&(hn(r),r.c=null,r.a.forEach(function(t,e){var n=e.toLowerCase();e!=n&&(cn(this,e),fn(this,n,t))},r)),r.f=i):(n||(e=tn(e,sn)),t.b=new an(e,t.a))}function Ze(t,e,n){t.b.set(e,n)}function $e(t){return Ze(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^x()).toString(36)),t}function Je(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function tn(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,en),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function en(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}ze.prototype.toString=function(){var t=[],e=this.f;e&&t.push(tn(e,nn,!0),":");var n=this.c;return!n&&"file"!=e||(t.push("//"),(e=this.j)&&t.push(tn(e,nn,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.h)&&t.push(":",String(n))),(n=this.g)&&(this.c&&"/"!=n.charAt(0)&&t.push("/"),t.push(tn(n,"/"==n.charAt(0)?on:rn,!0))),(n=this.b.toString())&&t.push("?",n),(n=this.i)&&t.push("#",tn(n,un)),t.join("")};var nn=/[#\/\?@]/g,rn=/[#\?:]/g,on=/[#\?]/g,sn=/[#\?@]/g,un=/#/g;function an(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function hn(o){o.a||(o.a=new Fe,o.b=0,o.c&&function(t){if(t){t=t.split("&");for(var e=0;e<t.length;e++){var n,r=t[e].indexOf("="),i=null;0<=r?(n=t[e].substring(0,r),i=t[e].substring(r+1)):n=t[e],r=n,i=i?decodeURIComponent(i.replace(/\+/g," ")):"",o.add(decodeURIComponent(r.replace(/\+/g," ")),i)}}}(o.c))}function cn(t,e){hn(t),e=pn(t,e),We(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,We((t=t.a).b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&Be(t)))}function ln(t,e){return hn(t),e=pn(t,e),We(t.a.b,e)}function fn(t,e,n){cn(t,e),0<n.length&&(t.c=null,t.a.set(pn(t,e),G(n)),t.b+=n.length)}function pn(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}function dn(t,e){this.b=t,this.a=e}function yn(t){this.g=t||vn,t=O.PerformanceNavigationTiming?0<(t=O.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):!!(O.ia&&O.ia.ya&&O.ia.ya()&&O.ia.ya().pb),this.f=t?this.g:1,this.a=null,1<this.f&&(this.a=new Set),this.b=null,this.c=[]}(ht=an.prototype).add=function(t,e){hn(this),this.c=null,t=pn(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},ht.forEach=function(n,r){hn(this),this.a.forEach(function(t,e){B(t,function(t){n.call(r,t,e,this)},this)},this)},ht.L=function(){hn(this);for(var t=this.a.K(),e=this.a.L(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},ht.K=function(t){hn(this);var e=[];if("string"==typeof t)ln(this,t)&&(e=W(e,this.a.get(pn(this,t))));else{t=this.a.K();for(var n=0;n<t.length;n++)e=W(e,t[n])}return e},ht.set=function(t,e){return hn(this),this.c=null,ln(this,t=pn(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},ht.get=function(t,e){return t&&0<(t=this.K(t)).length?String(t[0]):e},ht.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.L(),n=0;n<e.length;n++)for(var r=e[n],i=encodeURIComponent(String(r)),r=this.K(r),o=0;o<r.length;o++){var s=i;""!==r[o]&&(s+="="+encodeURIComponent(String(r[o]))),t.push(s)}return this.c=t.join("&")};var vn=10;function gn(t){return t.b||t.a&&t.a.size>=t.f}function mn(t){return t.b?1:t.a?t.a.size:0}function wn(t,e){return t.b?t.b==e:t.a&&t.a.has(e)}function bn(t,e){t.a?t.a.add(e):t.b=e}function En(t,e){t.b&&t.b==e?t.b=null:t.a&&t.a.has(e)&&t.a.delete(e)}function In(t){var e,n;if(null!=t.b)return t.c.concat(t.b.s);if(null==t.a||0===t.a.size)return G(t.c);var r=t.c;try{for(var i=N(t.a.values()),o=i.next();!o.done;o=i.next())var s=o.value,r=r.concat(s.s)}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}function An(){}function Tn(){this.a=new An}function Nn(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(t){}}yn.prototype.cancel=function(){var t,e;if(this.c=In(this),this.b)this.b.cancel(),this.b=null;else if(this.a&&0!==this.a.size){try{for(var n=N(this.a.values()),r=n.next();!r.done;r=n.next())r.value.cancel()}catch(e){t={error:e}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}this.a.clear()}},An.prototype.stringify=function(t){return O.JSON.stringify(t,void 0)},An.prototype.parse=function(t){return O.JSON.parse(t,void 0)};var Sn=O.JSON.parse;function On(t){jt.call(this),this.headers=new Fe,this.H=t||null,this.b=!1,this.s=this.a=null,this.B="",this.h=0,this.f="",this.g=this.A=this.l=this.u=!1,this.o=0,this.m=null,this.I=Pn,this.D=this.F=!1}M(On,jt);var Pn="",kn=/^https?$/i,Dn=["POST","PUT"];function Rn(t){return"content-type"==t.toLowerCase()}function Ln(t,e){t.b=!1,t.a&&(t.g=!0,t.a.abort(),t.g=!1),t.f=e,t.h=5,_n(t),Cn(t)}function _n(t){t.u||(t.u=!0,xt(t,"complete"),xt(t,"error"))}function Vn(t){if(t.b&&(!t.s[1]||4!=jn(t)||2!=t.W()))if(t.l&&4==jn(t))$t(t.za,0,t);else if(xt(t,"readystatechange"),4==jn(t)){t.b=!1;try{var e,n,r,i,o=t.W();t:switch(o){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var s=!0;break t;default:s=!1}if((e=s)||((n=0===o)&&(!(i=String(t.B).match(Ge)[1]||null)&&O.self&&O.self.location&&(i=(r=O.self.location.protocol).substr(0,r.length-1)),n=!kn.test(i?i.toLowerCase():"")),e=n),e)xt(t,"complete"),xt(t,"success");else{t.h=6;try{var u=2<jn(t)?t.a.statusText:""}catch(t){u=""}t.f=u+" ["+t.W()+"]",_n(t)}}finally{Cn(t)}}}function Cn(t,e){if(t.a){Un(t);var n=t.a,r=t.s[0]?P:null;t.a=null,t.s=null,e||xt(t,"ready");try{n.onreadystatechange=r}catch(t){}}}function Un(t){t.a&&t.D&&(t.a.ontimeout=null),t.m&&(O.clearTimeout(t.m),t.m=null)}function jn(t){return t.a?t.a.readyState:0}function xn(t,e,n){t:{for(r in n){var r=!1;break t}r=!0}var i;r||(i="",Y(n,function(t,e){i+=e,i+=":",i+=t,i+="\r\n"}),n=i,"string"==typeof t?null!=n&&encodeURIComponent(String(n)):Ze(t,e,n))}function Mn(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function qn(t){this.pa=0,this.g=[],this.c=new ae,this.ga=this.la=this.B=this.fa=this.a=this.na=this.A=this.V=this.i=this.O=this.l=null,this.Ma=this.R=0,this.Ja=Mn("failFast",!1,t),this.H=this.m=this.j=this.h=this.f=null,this.S=!0,this.I=this.oa=this.P=-1,this.T=this.o=this.u=0,this.Fa=Mn("baseRetryDelayMs",5e3,t),this.Pa=Mn("retryDelaySeedMs",1e4,t),this.Ka=Mn("forwardChannelMaxRetries",2,t),this.ma=Mn("forwardChannelRequestTimeoutMs",2e4,t),this.La=t&&t.h||void 0,this.D=void 0,this.C=t&&t.supportsCrossDomainXhr||!1,this.J="",this.b=new yn(t&&t.concurrentRequestLimit),this.ka=new Tn,this.da=t&&t.fastHandshake||!1,this.Ga=t&&t.b||!1,t&&t.g&&(this.c.a=!1),t&&t.forceLongPolling&&(this.S=!1),this.U=!this.da&&this.S&&t&&t.c||!1,this.ea=void 0,this.N=0,this.F=!1,this.s=null,(this.Ia=t&&t.f||!1)&&this.c.info("Opt-in to enable Chrome Origin Trials.")}function Fn(t){var e,n;Wn(t),3==t.v&&(e=t.R++,Ze(n=He(t.B),"SID",t.J),Ze(n,"RID",e),Ze(n,"TYPE","terminate"),Qn(t,n),(e=new Oe(t,t.c,e,void 0)).H=2,e.i=$e(He(n)),n=!1,O.navigator&&O.navigator.sendBeacon&&(n=O.navigator.sendBeacon(e.i.toString(),"")),!n&&O.Image&&((new Image).src=e.i,n=!0),n||(e.a=or(e.g,null),e.a.ba(e.i)),e.u=x(),Ve(e)),rr(t)}function Bn(t){t.a&&(Zn(t),t.a.cancel(),t.a=null)}function Wn(t){Bn(t),t.j&&(O.clearTimeout(t.j),t.j=null),Jn(t),t.b.cancel(),t.h&&("number"==typeof t.h&&O.clearTimeout(t.h),t.h=null)}function Gn(t,e){t.g.push(new dn(t.Ma++,e)),3==t.v&&zn(t)}function zn(t){gn(t.b)||t.h||(t.h=!0,Ht(t.Ba,t),t.u=0)}function Hn(t,e){var n=e?e.f:t.R++,r=He(t.B);Ze(r,"SID",t.J),Ze(r,"RID",n),Ze(r,"AID",t.P),Qn(t,r),t.i&&t.l&&xn(r,t.i,t.l),n=new Oe(t,t.c,n,t.u+1),null===t.i&&(n.B=t.l),e&&(t.g=e.s.concat(t.g)),e=Xn(t,n,1e3),n.setTimeout(Math.round(.5*t.ma)+Math.round(.5*t.ma*Math.random())),bn(t.b,n),Re(n,r,e)}function Qn(t,n){t.f&&qe({},function(t,e){Ze(n,e,t)})}function Xn(t,e,n){n=Math.min(t.g.length,n);var r=t.f?U(t.f.Ha,t.f,t):null;t:for(var i=t.g,o=-1;;){var s=["count="+n];-1==o?0<n?(o=i[0].b,s.push("ofs="+o)):o=0:s.push("ofs="+o);for(var u=!0,a=0;a<n;a++){var h=i[a].b,c=i[a].a;if((h-=o)<0)o=Math.max(0,i[a].b-100),u=!1;else try{!function(t,r){var i="req"+h+"_"||"";try{qe(t,function(t,e){var n=t;R(t)&&(n=qt(t)),r.push(i+e+"="+encodeURIComponent(n))})}catch(t){throw r.push(i+"type="+encodeURIComponent("_badmap")),t}}(c,s)}catch(t){r&&r(c)}}if(u){r=s.join("&");break t}}return t=t.g.splice(0,n),e.s=t,r}function Kn(t){t.a||t.j||(t.T=1,Ht(t.Aa,t),t.o=0)}function Yn(t){return!(t.a||t.j||3<=t.o)&&(t.T++,t.j=ge(U(t.Aa,t),er(t,t.o)),t.o++,1)}function Zn(t){null!=t.s&&(O.clearTimeout(t.s),t.s=null)}function $n(t){t.a=new Oe(t,t.c,"rpc",t.T),null===t.i&&(t.a.B=t.l),t.a.O=0;var e=He(t.la);Ze(e,"RID","rpc"),Ze(e,"SID",t.J),Ze(e,"CI",t.H?"0":"1"),Ze(e,"AID",t.P),Qn(t,e),Ze(e,"TYPE","xmlhttp"),t.i&&t.l&&xn(e,t.i,t.l),t.D&&t.a.setTimeout(t.D);var n=t.a;t=t.ga,n.H=1,n.i=$e(He(e)),n.j=null,n.I=!0,Le(n,t)}function Jn(t){null!=t.m&&(O.clearTimeout(t.m),t.m=null)}function tr(t,e){var n,r,i,o=null;if(t.a==e){Jn(t),Zn(t),t.a=null;var s=2}else{if(!wn(t.b,e))return;o=e.s,En(t.b,e),s=1}if(t.I=e.N,0!=t.v)if(e.b)1==s?(o=e.j?e.j.length:0,e=x()-e.u,n=t.u,xt(s=le(),new ve(s)),zn(t)):Kn(t);else if(3==(n=e.h)||0==n&&0<t.I||(1!=s||(i=e,mn((r=t).b)>=r.b.f-(r.h?1:0)||(r.h?(r.g=i.s.concat(r.g),0):1==r.v||2==r.v||r.u>=(r.Ja?0:r.Ka)||(r.h=ge(U(r.Ba,r,i),er(r,r.u)),r.u++,0))))&&(2!=s||!Yn(t)))switch(o&&0<o.length&&(e=t.b,e.c=e.c.concat(o)),n){case 1:nr(t,5);break;case 4:nr(t,10);break;case 3:nr(t,6);break;default:nr(t,2)}}function er(t,e){var n=t.Fa+Math.floor(Math.random()*t.Pa);return t.f||(n*=2),n*e}function nr(t,e){var n,r,i,o;t.c.info("Error code "+e),2==e?(r=null,t.f&&(r=null),o=U(t.Wa,t),r||(r=new ze("//www.google.com/images/cleardot.gif"),O.location&&"http"==O.location.protocol||Qe(r,"https"),$e(r)),n=r.toString(),r=o,o=new ae,O.Image?((i=new Image).onload=j(Nn,o,i,"TestLoadImage: loaded",!0,r),i.onerror=j(Nn,o,i,"TestLoadImage: error",!1,r),i.onabort=j(Nn,o,i,"TestLoadImage: abort",!1,r),i.ontimeout=j(Nn,o,i,"TestLoadImage: timeout",!1,r),O.setTimeout(function(){i.ontimeout&&i.ontimeout()},1e4),i.src=n):r(!1)):ye(),t.v=0,t.f&&t.f.ra(e),rr(t),Wn(t)}function rr(t){t.v=0,t.I=-1,t.f&&(0==In(t.b).length&&0==t.g.length||(t.b.c.length=0,G(t.g),t.g.length=0),t.f.qa())}function ir(t,e,n){var r,i,o,s,u,a=(s=n)instanceof ze?He(s):new ze(s,void 0);return""!=a.c?(e&&Xe(a,e+"."+a.c),Ke(a,a.h)):(r=(u=O.location).protocol,i=e?e+"."+u.hostname:u.hostname,o=+u.port,s=n,u=new ze(null,void 0),r&&Qe(u,r),i&&Xe(u,i),o&&Ke(u,o),s&&(u.g=s),a=u),t.V&&Y(t.V,function(t,e){Ze(a,e,t)}),e=t.A,n=t.na,e&&n&&Ze(a,e,n),Ze(a,"VER",t.ha),Qn(t,a),a}function or(t,e){if(e&&!t.C)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new On(t.La)).F=t.C,e}function sr(){}function ur(){if(rt&&!(10<=Number(ft)))throw Error("Environmental error: no available transport.")}function ar(t,e){jt.call(this),this.a=new qn(e),this.o=t,this.b=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.a.l=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.a&&(t?t["X-WebChannel-Client-Profile"]=e.a:t={"X-WebChannel-Client-Profile":e.a}),this.a.O=t,(t=e&&e.httpHeadersOverwriteParam)&&!z(t)&&(this.a.i=t),this.m=e&&e.supportsCrossDomainXhr||!1,this.l=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!z(e)&&(this.a.A=e,null!==(t=this.b)&&e in t&&e in(t=this.b)&&delete t[e]),this.f=new lr(this)}function hr(t){Te.call(this);var e=t.__sm__;if(e){t:{for(var n in e){t=n;break t}t=void 0}(this.c=t)?(t=this.c,this.data=null!==e&&t in e?e[t]:void 0):this.data=e}else this.data=t}function cr(){Ne.call(this),this.status=1}function lr(t){this.a=t}(ht=On.prototype).ba=function(t,e,n,r){if(this.a)throw Error("[goog.net.XhrIo] Object is active with another request="+this.B+"; newUri="+t);e=e?e.toUpperCase():"GET",this.B=t,this.f="",this.h=0,this.u=!1,this.b=!0,this.a=new XMLHttpRequest,this.s=this.H?Ee(this.H):Ee(Ae),this.a.onreadystatechange=U(this.za,this);try{this.A=!0,this.a.open(e,String(t),!0),this.A=!1}catch(t){return void Ln(this,t)}t=n||"";var i,o=new Fe(this.headers);r&&qe(r,function(t,e){o.set(e,t)}),r=function(t){t:{for(var e=Rn,n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return e<0?null:"string"==typeof t?t.charAt(e):t[e]}(o.L()),n=O.FormData&&t instanceof O.FormData,0<=F(Dn,e)&&!r&&!n&&o.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),o.forEach(function(t,e){this.a.setRequestHeader(e,t)},this),this.I&&(this.a.responseType=this.I),"withCredentials"in this.a&&this.a.withCredentials!==this.F&&(this.a.withCredentials=this.F);try{Un(this),0<this.o&&((this.D=(i=this.a,rt&&lt(9)&&"number"==typeof i.timeout&&void 0!==i.ontimeout))?(this.a.timeout=this.o,this.a.ontimeout=U(this.xa,this)):this.m=$t(this.xa,this.o,this)),this.l=!0,this.a.send(t),this.l=!1}catch(t){Ln(this,t)}},ht.xa=function(){this.a&&(this.f="Timed out after "+this.o+"ms, aborting",this.h=8,xt(this,"timeout"),this.abort(8))},ht.abort=function(t){this.a&&this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1,this.h=t||7,xt(this,"complete"),xt(this,"abort"),Cn(this))},ht.G=function(){this.a&&(this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1),Cn(this,!0)),On.X.G.call(this)},ht.za=function(){this.j||(this.A||this.l||this.g?Vn(this):this.Sa())},ht.Sa=function(){Vn(this)},ht.W=function(){try{return 2<jn(this)?this.a.status:-1}catch(t){return-1}},ht.$=function(){try{return this.a?this.a.responseText:""}catch(t){return""}},ht.Na=function(t){if(this.a){var e=this.a.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),Sn(e)}},ht.ua=function(){return this.h},ht.Oa=function(){return"string"==typeof this.f?this.f:String(this.f)},(ht=qn.prototype).ha=8,ht.v=1,ht.Ba=function(t){if(this.h)if(this.h=null,1==this.v){if(!t){this.R=Math.floor(1e5*Math.random()),t=this.R++;var e,n=new Oe(this,this.c,t,void 0),r=this.l;if(this.O&&(r?J(r=Z(r),this.O):r=this.O),null===this.i&&(n.B=r),this.da)t:{for(var i=e=0;i<this.g.length;i++){var o=this.g[i];if(void 0===(o="__data__"in o.a&&"string"==typeof(o=o.a.__data__)?o.length:void 0))break;if(4096<(e+=o)){e=i;break t}if(4096===e||i===this.g.length-1){e=i+1;break t}}e=1e3}else e=1e3;e=Xn(this,n,e),Ze(i=He(this.B),"RID",t),Ze(i,"CVER",22),this.A&&Ze(i,"X-HTTP-Session-Id",this.A),Qn(this,i),this.i&&r&&xn(i,this.i,r),bn(this.b,n),this.Ga&&Ze(i,"TYPE","init"),this.da?(Ze(i,"$req",e),Ze(i,"SID","null"),n.U=!0,Re(n,i,null)):Re(n,i,e),this.v=2}}else 3==this.v&&(t?Hn(this,t):0==this.g.length||gn(this.b)||Hn(this))},ht.Aa=function(){var t;this.j=null,$n(this),this.U&&!(this.F||null==this.a||this.N<=0)&&(t=2*this.N,this.c.info("BP detection timer enabled: "+t),this.s=ge(U(this.Ra,this),t))},ht.Ra=function(){this.s&&(this.s=null,this.c.info("BP detection timeout reached."),this.c.info("Buffering proxy detected and switch to long-polling!"),this.H=!1,this.F=!0,ye(),Bn(this),$n(this))},ht.Qa=function(){null!=this.m&&(this.m=null,Bn(this),Yn(this),ye())},ht.Wa=function(t){t?this.c.info("Successfully pinged google.com"):this.c.info("Failed to ping google.com"),ye()},(ht=sr.prototype).ta=function(){},ht.sa=function(){},ht.ra=function(){},ht.qa=function(){},ht.Ha=function(){},ur.prototype.a=function(t,e){return new ar(t,e)},M(ar,jt),ar.prototype.g=function(){this.a.f=this.f,this.m&&(this.a.C=!0);var t=this.a,e=this.o,n=this.b||void 0;ye(),t.fa=e,t.V=n||{},t.H=t.S,t.B=ir(t,null,t.fa),zn(t)},ar.prototype.close=function(){Fn(this.a)},ar.prototype.h=function(t){var e;"string"==typeof t?((e={}).__data__=t,Gn(this.a,e)):this.l?((e={}).__data__=qt(t),Gn(this.a,e)):Gn(this.a,t)},ar.prototype.G=function(){this.a.f=null,delete this.f,Fn(this.a),delete this.a,ar.X.G.call(this)},M(hr,Te),M(cr,Ne),M(lr,sr),lr.prototype.ta=function(){xt(this.a,"a")},lr.prototype.sa=function(t){xt(this.a,new hr(t))},lr.prototype.ra=function(t){xt(this.a,new cr)},lr.prototype.qa=function(){xt(this.a,"b")},ur.prototype.createWebChannel=ur.prototype.a,ar.prototype.send=ar.prototype.h,ar.prototype.open=ar.prototype.g,me.NO_ERROR=0,me.TIMEOUT=8,me.HTTP_ERROR=6,we.COMPLETE="complete",(Ie.EventType=S).OPEN="a",S.CLOSE="b",S.ERROR="c",S.MESSAGE="d",jt.prototype.listen=jt.prototype.va,On.prototype.listenOnce=On.prototype.wa,On.prototype.getLastError=On.prototype.Oa,On.prototype.getLastErrorCode=On.prototype.ua,On.prototype.getStatus=On.prototype.W,On.prototype.getResponseJson=On.prototype.Na,On.prototype.getResponseText=On.prototype.$,On.prototype.send=On.prototype.ba;var fr=me,pr=we,dr=Ie,yr=On,vr=(gr.prototype.setInstantiationMode=function(t){return this.instantiationMode=t,this},gr.prototype.setMultipleInstances=function(t){return this.multipleInstances=t,this},gr.prototype.setServiceProps=function(t){return this.serviceProps=t,this},gr);function gr(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY"}var mr=(wr.prototype.getPlatformInfoString=function(){return this.container.getProviders().map(function(t){return"VERSION"===(null==(e=(e=t).getComponent())?void 0:e.type)?(t=t.getImmediate()).library+"/"+t.version:null;var e}).filter(function(t){return t}).join(" ")},wr);function wr(t){this.container=t}var me="@firebase/app-exp",br=new f("@firebase/app"),Er=((we={})[me]="fire-core",we["@firebase/app-compat"]="fire-core-compat",we["@firebase/analytics"]="fire-analytics",we["@firebase/auth"]="fire-auth",we["@firebase/database"]="fire-rtdb",we["@firebase/functions-exp"]="fire-fn",we["@firebase/functions-compat"]="fire-fn-compat",we["@firebase/installations"]="fire-iid",we["@firebase/messaging"]="fire-fcm",we["@firebase/performance"]="fire-perf",we["@firebase/remote-config"]="fire-rc",we["@firebase/storage"]="fire-gcs",we["@firebase/firestore"]="fire-fst",we["fire-js"]="fire-js",we["firebase-exp"]="fire-js-all",we),Ir=new Map,Ar=new Map;function Tr(t){var e,n,r=t.name;if(!Ar.has(r)){Ar.set(r,t);try{for(var i=function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(Ir.values()),o=i.next();!o.done;o=i.next())!function(e,n){try{e.container.addComponent(n)}catch(t){br.debug("Component "+n.name+" failed to register with FirebaseApp "+e.name,t)}}(o.value,t)}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return 1}br.debug("There were multiple attempts to register component "+r+".")}var we=((we={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",we["bad-app-name"]="Illegal App name: '{$appName}",we["duplicate-app"]="Firebase App named '{$appName}' already exists",we["app-deleted"]="Firebase App named '{$appName}' already deleted",we["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",we["invalid-log-argument"]="First argument to `onLog` must be null or a function.",we),Nr=new E("app","Firebase",we);function Sr(t,e,n){var r=this;this.isDeleted=!1,this.options_=i({},t),this.name_=e.name,this.automaticDataCollectionEnabled_=e.automaticDataCollectionEnabled,this.container=n,this.container.addComponent(new vr("app-exp",function(){return r},"PUBLIC"))}function Or(t,e,n){var r=null!==(i=Er[t])&&void 0!==i?i:t;n&&(r+="-"+n);var i=r.match(/\s|\//),t=e.match(/\s|\//);if(i||t)return n=['Unable to register library "'+r+'" with version "'+e+'":'],i&&n.push('library name "'+r+'" contains illegal characters (whitespace or "/")'),i&&t&&n.push("and"),t&&n.push('version name "'+e+'" contains illegal characters (whitespace or "/")'),br.warn(n.join(" ")),0;Tr(new vr(r+"-version",function(){return{library:r,version:e}},"VERSION"))}Object.defineProperty(Sr.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed(),this.automaticDataCollectionEnabled_},set:function(t){this.checkDestroyed(),this.automaticDataCollectionEnabled_=t},enumerable:!1,configurable:!0}),Object.defineProperty(Sr.prototype,"name",{get:function(){return this.checkDestroyed(),this.name_},enumerable:!1,configurable:!0}),Object.defineProperty(Sr.prototype,"options",{get:function(){return this.checkDestroyed(),this.options_},enumerable:!1,configurable:!0}),Sr.prototype.checkDestroyed=function(){if(this.isDeleted)throw Nr.create("app-deleted",{appName:this.name_})},Tr(new vr("platform-logger",function(t){return new mr(t)},"PRIVATE")),Or(me,"0.0.800",void 0),Or("fire-js","");var Pr,kr={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},Dr=(n(_r,Pr=Error),_r),Rr="8.0.2-20201010222127",Lr=new f("@firebase/firestore");function _r(t,e){var n=this;return(n=Pr.call(this,e)||this).code=t,n.message=e,n.name="FirebaseError",n.toString=function(){return n.name+": [code="+n.code+"]: "+n.message},n}function Vr(){return Lr.logLevel}function Cr(t){for(var e,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];Lr.logLevel<=u.DEBUG&&(e=n.map(xr),Lr.debug.apply(Lr,o(["Firestore ("+Rr+"): "+t],e)))}function Ur(t){for(var e,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];Lr.logLevel<=u.ERROR&&(e=n.map(xr),Lr.error.apply(Lr,o(["Firestore ("+Rr+"): "+t],e)))}function jr(t){for(var e,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];Lr.logLevel<=u.WARN&&(e=n.map(xr),Lr.warn.apply(Lr,o(["Firestore ("+Rr+"): "+t],e)))}function xr(e){if("string"==typeof e)return e;try{return JSON.stringify(e)}catch(t){return e}}function Mr(t){throw void 0===t&&(t="Unexpected state"),Ur(t="FIRESTORE ("+Rr+") INTERNAL ASSERTION FAILED: "+t),new Error(t)}function qr(t){t||Mr()}var Fr=(Br.t=function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length,n="";n.length<20;)for(var r=function(){var t="undefined"!=typeof self&&(self.crypto||self.msCrypto),e=new Uint8Array(40);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(e);else for(var n=0;n<40;n++)e[n]=Math.floor(256*Math.random());return e}(),i=0;i<r.length;++i)n.length<20&&r[i]<e&&(n+=t.charAt(r[i]%t.length));return n},Br);function Br(){}function Wr(t,e){return t<e?-1:e<t?1:0}function Gr(t,n,r){return t.length===n.length&&t.every(function(t,e){return r(t,n[e])})}var zr=(Hr.fromBase64String=function(t){return new Hr(atob(t))},Hr.fromUint8Array=function(t){return new Hr(function(t){for(var e="",n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}(t))},Hr.prototype.toBase64=function(){return t=this.i,btoa(t);var t},Hr.prototype.toUint8Array=function(){return function(t){for(var e=new Uint8Array(t.length),n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}(this.i)},Hr.prototype.o=function(){return 2*this.i.length},Hr.prototype.u=function(t){return Wr(this.i,t.i)},Hr.prototype.isEqual=function(t){return this.i===t.i},Hr);function Hr(t){this.i=t}zr.h=new zr("");var Qr=(Xr.fromBase64String=function(t){try{return new Xr(zr.fromBase64String(t))}catch(t){throw new Dr(kr.INVALID_ARGUMENT,"Failed to construct Bytes from Base64 string: "+t)}},Xr.fromUint8Array=function(t){return new Xr(zr.fromUint8Array(t))},Xr.prototype.toBase64=function(){return this.l.toBase64()},Xr.prototype.toUint8Array=function(){return this.l.toUint8Array()},Xr.prototype.toString=function(){return"Bytes(base64: "+this.toBase64()+")"},Xr.prototype.isEqual=function(t){return this.l.isEqual(t.l)},Xr);function Xr(t){this.l=t}function Kr(){if("undefined"==typeof Uint8Array)throw new Dr(kr.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function Yr(){if("undefined"==typeof atob)throw new Dr(kr.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var Zr,$r=(n(ni,Zr=Qr),ni.fromBase64String=function(t){Yr();try{return new ni(zr.fromBase64String(t))}catch(t){throw new Dr(kr.INVALID_ARGUMENT,"Failed to construct Blob from Base64 string: "+t)}},ni.fromUint8Array=function(t){return Kr(),new ni(zr.fromUint8Array(t))},ni.prototype.toBase64=function(){return Yr(),Zr.prototype.toBase64.call(this)},ni.prototype.toUint8Array=function(){return Kr(),Zr.prototype.toUint8Array.call(this)},ni.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},ni),Jr=function(t,e,n,r,i,o){this._=t,this.persistenceKey=e,this.host=n,this.ssl=r,this.forceLongPolling=i,this.m=o},ti=(Object.defineProperty(ei.prototype,"T",{get:function(){return"(default)"===this.database},enumerable:!1,configurable:!0}),ei.prototype.isEqual=function(t){return t instanceof ei&&t.projectId===this.projectId&&t.database===this.database},ei);function ei(t,e){this.projectId=t,this.database=e||"(default)"}function ni(){return null!==Zr&&Zr.apply(this,arguments)||this}function ri(t){var e,n=0;for(e in t)Object.prototype.hasOwnProperty.call(t,e)&&n++;return n}function ii(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function oi(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var si,ui,ai=(Ei.prototype.get=function(t){var e=this.I(t);if(void 0!==(e=this.R[e]))for(var n=0,r=e;n<r.length;n++){var i=(o=r[n])[0],o=o[1];if(this.A(i,t))return o}},Ei.prototype.has=function(t){return void 0!==this.get(t)},Ei.prototype.set=function(t,e){var n=this.I(t),r=this.R[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(this.A(r[i][0],t))return void(r[i]=[t,e]);r.push([t,e])}else this.R[n]=[[t,e]]},Ei.prototype.delete=function(t){var e=this.I(t),n=this.R[e];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.A(n[r][0],t))return 1===n.length?delete this.R[e]:n.splice(r,1),!0;return!1},Ei.prototype.forEach=function(s){ii(this.R,function(t,e){for(var n=0,r=e;n<r.length;n++){var i=(o=r[n])[0],o=o[1];s(i,o)}})},Ei.prototype.P=function(){return oi(this.R)},Ei),hi=(bi.now=function(){return bi.fromMillis(Date.now())},bi.fromDate=function(t){return bi.fromMillis(t.getTime())},bi.fromMillis=function(t){var e=Math.floor(t/1e3);return new bi(e,1e6*(t-1e3*e))},bi.prototype.toDate=function(){return new Date(this.toMillis())},bi.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},bi.prototype.V=function(t){return this.seconds===t.seconds?Wr(this.nanoseconds,t.nanoseconds):Wr(this.seconds,t.seconds)},bi.prototype.isEqual=function(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds},bi.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},bi.prototype.toJSON=function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}},bi.prototype.valueOf=function(){var t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")},bi),ci=(wi.g=function(t){return new wi(t)},wi.min=function(){return new wi(new hi(0,0))},wi.prototype.u=function(t){return this.timestamp.V(t.timestamp)},wi.prototype.isEqual=function(t){return this.timestamp.isEqual(t.timestamp)},wi.prototype.p=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},wi.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},wi.prototype.v=function(){return this.timestamp},wi),we=(Object.defineProperty(mi.prototype,"length",{get:function(){return this.C},enumerable:!1,configurable:!0}),mi.prototype.isEqual=function(t){return 0===mi.S(this,t)},mi.prototype.child=function(t){var e=this.segments.slice(this.offset,this.limit());return t instanceof mi?t.forEach(function(t){e.push(t)}):e.push(t),this.D(e)},mi.prototype.limit=function(){return this.offset+this.length},mi.prototype.F=function(t){return t=void 0===t?1:t,this.D(this.segments,this.offset+t,this.length-t)},mi.prototype.N=function(){return this.D(this.segments,this.offset,this.length-1)},mi.prototype.$=function(){return this.segments[this.offset]},mi.prototype.O=function(){return this.get(this.length-1)},mi.prototype.get=function(t){return this.segments[this.offset+t]},mi.prototype.P=function(){return 0===this.length},mi.prototype.k=function(t){if(t.length<this.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},mi.prototype.M=function(t){if(this.length+1!==t.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},mi.prototype.forEach=function(t){for(var e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])},mi.prototype.L=function(){return this.segments.slice(this.offset,this.limit())},mi.S=function(t,e){for(var n=Math.min(t.length,e.length),r=0;r<n;r++){var i=t.get(r),o=e.get(r);if(i<o)return-1;if(o<i)return 1}return t.length<e.length?-1:t.length>e.length?1:0},mi),li=(n(gi,ui=we),gi.prototype.D=function(t,e,n){return new gi(t,e,n)},gi.prototype.q=function(){return this.L().join("/")},gi.prototype.toString=function(){return this.q()},gi.U=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=[],r=0,i=t;r<i.length;r++){var o=i[r];if(0<=o.indexOf("//"))throw new Dr(kr.INVALID_ARGUMENT,"Invalid segment ("+o+"). Paths must not contain // in them.");n.push.apply(n,o.split("/").filter(function(t){return 0<t.length}))}return new gi(n)},gi.B=function(){return new gi([])},gi),fi=/^[_a-zA-Z][_a-zA-Z0-9]*$/,pi=(n(vi,si=we),vi.prototype.D=function(t,e,n){return new vi(t,e,n)},vi.j=function(t){return fi.test(t)},vi.prototype.q=function(){return this.L().map(function(t){return t=t.replace("\\","\\\\").replace("`","\\`"),vi.j(t)||(t="`"+t+"`"),t}).join(".")},vi.prototype.toString=function(){return this.q()},vi.prototype.W=function(){return 1===this.length&&"__name__"===this.get(0)},vi.K=function(){return new vi(["__name__"])},vi.G=function(t){for(var e=[],n="",r=0,i=function(){if(0===n.length)throw new Dr(kr.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");e.push(n),n=""},o=!1;r<t.length;){var s=t[r];if("\\"===s){if(r+1===t.length)throw new Dr(kr.INVALID_ARGUMENT,"Path has trailing escape character: "+t);var u=t[r+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new Dr(kr.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);n+=u,r+=2}else"`"===s?o=!o:"."!==s||o?n+=s:i(),r++}if(i(),o)throw new Dr(kr.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new vi(e)},vi.B=function(){return new vi([])},vi),di=(yi.H=function(t){return new yi(li.U(t))},yi.Y=function(t){return new yi(li.U(t).F(5))},yi.prototype.J=function(t){return 2<=this.path.length&&this.path.get(this.path.length-2)===t},yi.prototype.isEqual=function(t){return null!==t&&0===li.S(this.path,t.path)},yi.prototype.toString=function(){return this.path.toString()},yi.S=function(t,e){return li.S(t.path,e.path)},yi.X=function(t){return t.length%2==0},yi.Z=function(t){return new yi(new li(t.slice()))},yi);function yi(t){this.path=t}function vi(){return null!==si&&si.apply(this,arguments)||this}function gi(){return null!==ui&&ui.apply(this,arguments)||this}function mi(t,e,n){void 0===e?e=0:e>t.length&&Mr(),void 0===n?n=t.length-e:n>t.length-e&&Mr(),this.segments=t,this.offset=e,this.C=n}function wi(t){this.timestamp=t}function bi(t,e){if(this.seconds=t,(this.nanoseconds=e)<0)throw new Dr(kr.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(1e9<=e)throw new Dr(kr.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new Dr(kr.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(253402300800<=t)throw new Dr(kr.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}function Ei(t,e){this.I=t,this.A=e,this.R={}}function Ii(t){return null==t}function Ai(t){return 0===t&&1/t==-1/0}var Ti=function(t,e,n,r,i,o,s){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=s,this.tt=null};function Ni(t,e,n,r,i,o,s){return void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),new Ti(t,e,n,r,i,o,s)}function Si(t){var e=t;return null===e.tt&&(t=e.path.q(),null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(function(t){return t.field.q()+t.op.toString()+So(t.value)}).join(","),t+="|ob:",t+=e.orderBy.map(function(t){return t.field.q()+t.dir}).join(","),Ii(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=Qu(e.startAt)),e.endAt&&(t+="|ub:",t+=Qu(e.endAt)),e.tt=t),e.tt}function Oi(t,e){if(t.limit!==e.limit)return!1;if(t.orderBy.length!==e.orderBy.length)return!1;for(var n,r,i=0;i<t.orderBy.length;i++)if(n=t.orderBy[i],r=e.orderBy[i],n.dir!==r.dir||!n.field.isEqual(r.field))return!1;if(t.filters.length!==e.filters.length)return!1;for(var o,s,u=0;u<t.filters.length;u++)if(o=t.filters[u],s=e.filters[u],o.op!==s.op||!o.field.isEqual(s.field)||!Io(o.value,s.value))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Ku(t.startAt,e.startAt)&&Ku(t.endAt,e.endAt)}function Pi(t){return di.X(t.path)&&null===t.collectionGroup&&0===t.filters.length}function ki(t){this.count=t}var Di,Ri=(Li.prototype.st=function(t){return new Li(this.target,this.targetId,this.nt,t,this.et,this.lastLimboFreeSnapshotVersion,this.resumeToken)},Li.prototype.it=function(t,e){return new Li(this.target,this.targetId,this.nt,this.sequenceNumber,e,this.lastLimboFreeSnapshotVersion,t)},Li.prototype.rt=function(t){return new Li(this.target,this.targetId,this.nt,this.sequenceNumber,this.et,t,this.resumeToken)},Li);function Li(t,e,n,r,i,o,s){void 0===i&&(i=ci.min()),void 0===o&&(o=ci.min()),void 0===s&&(s=zr.h),this.target=t,this.targetId=e,this.nt=n,this.sequenceNumber=r,this.et=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=s}function _i(t){switch(t){case kr.OK:return Mr(),0;case kr.CANCELLED:case kr.UNKNOWN:case kr.DEADLINE_EXCEEDED:case kr.RESOURCE_EXHAUSTED:case kr.INTERNAL:case kr.UNAVAILABLE:case kr.UNAUTHENTICATED:return;case kr.INVALID_ARGUMENT:case kr.NOT_FOUND:case kr.ALREADY_EXISTS:case kr.PERMISSION_DENIED:case kr.FAILED_PRECONDITION:case kr.ABORTED:case kr.OUT_OF_RANGE:case kr.UNIMPLEMENTED:case kr.DATA_LOSS:return 1;default:return Mr(),0}}function Vi(t){if(void 0===t)return Ur("GRPC error has no .code"),kr.UNKNOWN;switch(t){case Di.OK:return kr.OK;case Di.CANCELLED:return kr.CANCELLED;case Di.UNKNOWN:return kr.UNKNOWN;case Di.DEADLINE_EXCEEDED:return kr.DEADLINE_EXCEEDED;case Di.RESOURCE_EXHAUSTED:return kr.RESOURCE_EXHAUSTED;case Di.INTERNAL:return kr.INTERNAL;case Di.UNAVAILABLE:return kr.UNAVAILABLE;case Di.UNAUTHENTICATED:return kr.UNAUTHENTICATED;case Di.INVALID_ARGUMENT:return kr.INVALID_ARGUMENT;case Di.NOT_FOUND:return kr.NOT_FOUND;case Di.ALREADY_EXISTS:return kr.ALREADY_EXISTS;case Di.PERMISSION_DENIED:return kr.PERMISSION_DENIED;case Di.FAILED_PRECONDITION:return kr.FAILED_PRECONDITION;case Di.ABORTED:return kr.ABORTED;case Di.OUT_OF_RANGE:return kr.OUT_OF_RANGE;case Di.UNIMPLEMENTED:return kr.UNIMPLEMENTED;case Di.DATA_LOSS:return kr.DATA_LOSS;default:return Mr()}}(f=Di={})[f.OK=0]="OK",f[f.CANCELLED=1]="CANCELLED",f[f.UNKNOWN=2]="UNKNOWN",f[f.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",f[f.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",f[f.NOT_FOUND=5]="NOT_FOUND",f[f.ALREADY_EXISTS=6]="ALREADY_EXISTS",f[f.PERMISSION_DENIED=7]="PERMISSION_DENIED",f[f.UNAUTHENTICATED=16]="UNAUTHENTICATED",f[f.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",f[f.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",f[f.ABORTED=10]="ABORTED",f[f.OUT_OF_RANGE=11]="OUT_OF_RANGE",f[f.UNIMPLEMENTED=12]="UNIMPLEMENTED",f[f.INTERNAL=13]="INTERNAL",f[f.UNAVAILABLE=14]="UNAVAILABLE",f[f.DATA_LOSS=15]="DATA_LOSS";var Ci=(qi.prototype.ot=function(t,e){return new qi(this.S,this.root.ot(t,e,this.S).copy(null,null,ji.ut,null,null))},qi.prototype.remove=function(t){return new qi(this.S,this.root.remove(t,this.S).copy(null,null,ji.ut,null,null))},qi.prototype.get=function(t){for(var e=this.root;!e.P();){var n=this.S(t,e.key);if(0===n)return e.value;n<0?e=e.left:0<n&&(e=e.right)}return null},qi.prototype.indexOf=function(t){for(var e=0,n=this.root;!n.P();){var r=this.S(t,n.key);if(0===r)return e+n.left.size;n=r<0?n.left:(e+=n.left.size+1,n.right)}return-1},qi.prototype.P=function(){return this.root.P()},Object.defineProperty(qi.prototype,"size",{get:function(){return this.root.size},enumerable:!1,configurable:!0}),qi.prototype.ct=function(){return this.root.ct()},qi.prototype.ht=function(){return this.root.ht()},qi.prototype.at=function(t){return this.root.at(t)},qi.prototype.forEach=function(n){this.at(function(t,e){return n(t,e),!1})},qi.prototype.toString=function(){var n=[];return this.at(function(t,e){return n.push(t+":"+e),!1}),"{"+n.join(", ")+"}"},qi.prototype.lt=function(t){return this.root.lt(t)},qi.prototype._t=function(){return new Ui(this.root,null,this.S,!1)},qi.prototype.ft=function(t){return new Ui(this.root,t,this.S,!1)},qi.prototype.dt=function(){return new Ui(this.root,null,this.S,!0)},qi.prototype.wt=function(t){return new Ui(this.root,t,this.S,!0)},qi),Ui=(Mi.prototype.It=function(){var t=this.Tt.pop(),e={key:t.key,value:t.value};if(this.Et)for(t=t.left;!t.P();)this.Tt.push(t),t=t.right;else for(t=t.right;!t.P();)this.Tt.push(t),t=t.left;return e},Mi.prototype.At=function(){return 0<this.Tt.length},Mi.prototype.Rt=function(){if(0===this.Tt.length)return null;var t=this.Tt[this.Tt.length-1];return{key:t.key,value:t.value}},Mi),ji=(xi.prototype.copy=function(t,e,n,r,i){return new xi(null!=t?t:this.key,null!=e?e:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)},xi.prototype.P=function(){return!1},xi.prototype.at=function(t){return this.left.at(t)||t(this.key,this.value)||this.right.at(t)},xi.prototype.lt=function(t){return this.right.lt(t)||t(this.key,this.value)||this.left.lt(t)},xi.prototype.min=function(){return this.left.P()?this:this.left.min()},xi.prototype.ct=function(){return this.min().key},xi.prototype.ht=function(){return this.right.P()?this.key:this.right.ht()},xi.prototype.ot=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.ot(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.ot(t,e,n))).Pt()},xi.prototype.yt=function(){if(this.left.P())return xi.EMPTY;var t=this;return t.left.Vt()||t.left.left.Vt()||(t=t.gt()),(t=t.copy(null,null,null,t.left.yt(),null)).Pt()},xi.prototype.remove=function(t,e){var n,r=this;if(e(t,r.key)<0)r.left.P()||r.left.Vt()||r.left.left.Vt()||(r=r.gt()),r=r.copy(null,null,null,r.left.remove(t,e),null);else{if(r.left.Vt()&&(r=r.vt()),r.right.P()||r.right.Vt()||r.right.left.Vt()||(r=r.bt()),0===e(t,r.key)){if(r.right.P())return xi.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.yt())}r=r.copy(null,null,null,null,r.right.remove(t,e))}return r.Pt()},xi.prototype.Vt=function(){return this.color},xi.prototype.Pt=function(){var t=this;return t.right.Vt()&&!t.left.Vt()&&(t=t.Ct()),t.left.Vt()&&t.left.left.Vt()&&(t=t.vt()),t.left.Vt()&&t.right.Vt()&&(t=t.St()),t},xi.prototype.gt=function(){var t=this.St();return t.right.left.Vt()&&(t=(t=(t=t.copy(null,null,null,null,t.right.vt())).Ct()).St()),t},xi.prototype.bt=function(){var t=this.St();return t.left.left.Vt()&&(t=(t=t.vt()).St()),t},xi.prototype.Ct=function(){var t=this.copy(null,null,xi.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)},xi.prototype.vt=function(){var t=this.copy(null,null,xi.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)},xi.prototype.St=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},xi.prototype.Dt=function(){var t=this.Ft();return Math.pow(2,t)<=this.size+1},xi.prototype.Ft=function(){if(this.Vt()&&this.left.Vt())throw Mr();if(this.right.Vt())throw Mr();var t=this.left.Ft();if(t!==this.right.Ft())throw Mr();return t+(this.Vt()?0:1)},xi);function xi(t,e,n,r,i){this.key=t,this.value=e,this.color=null!=n?n:xi.RED,this.left=null!=r?r:xi.EMPTY,this.right=null!=i?i:xi.EMPTY,this.size=this.left.size+1+this.right.size}function Mi(t,e,n,r){this.Et=r,this.Tt=[];for(var i=1;!t.P();)if(i=e?n(t.key,e):1,r&&(i*=-1),i<0)t=this.Et?t.left:t.right;else{if(0===i){this.Tt.push(t);break}this.Tt.push(t),t=this.Et?t.right:t.left}}function qi(t,e){this.S=t,this.root=e||ji.EMPTY}function Fi(){this.size=0}ji.EMPTY=null,ji.RED=!0,ji.ut=!1,ji.EMPTY=(Object.defineProperty(Fi.prototype,"key",{get:function(){throw Mr()},enumerable:!1,configurable:!0}),Object.defineProperty(Fi.prototype,"value",{get:function(){throw Mr()},enumerable:!1,configurable:!0}),Object.defineProperty(Fi.prototype,"color",{get:function(){throw Mr()},enumerable:!1,configurable:!0}),Object.defineProperty(Fi.prototype,"left",{get:function(){throw Mr()},enumerable:!1,configurable:!0}),Object.defineProperty(Fi.prototype,"right",{get:function(){throw Mr()},enumerable:!1,configurable:!0}),Fi.prototype.copy=function(t,e,n,r,i){return this},Fi.prototype.ot=function(t,e,n){return new ji(t,e)},Fi.prototype.remove=function(t,e){return this},Fi.prototype.P=function(){return!0},Fi.prototype.at=function(t){return!1},Fi.prototype.lt=function(t){return!1},Fi.prototype.ct=function(){return null},Fi.prototype.ht=function(){return null},Fi.prototype.Vt=function(){return!1},Fi.prototype.Dt=function(){return!0},Fi.prototype.Ft=function(){return 0},new Fi);var Bi=(Hi.prototype.has=function(t){return null!==this.data.get(t)},Hi.prototype.first=function(){return this.data.ct()},Hi.prototype.last=function(){return this.data.ht()},Object.defineProperty(Hi.prototype,"size",{get:function(){return this.data.size},enumerable:!1,configurable:!0}),Hi.prototype.indexOf=function(t){return this.data.indexOf(t)},Hi.prototype.forEach=function(n){this.data.at(function(t,e){return n(t),!1})},Hi.prototype.Nt=function(t,e){for(var n=this.data.ft(t[0]);n.At();){var r=n.It();if(0<=this.S(r.key,t[1]))return;e(r.key)}},Hi.prototype.xt=function(t,e){for(var n=void 0!==e?this.data.ft(e):this.data._t();n.At();)if(!t(n.It().key))return},Hi.prototype.$t=function(t){return(t=this.data.ft(t)).At()?t.It().key:null},Hi.prototype._t=function(){return new Wi(this.data._t())},Hi.prototype.ft=function(t){return new Wi(this.data.ft(t))},Hi.prototype.add=function(t){return this.copy(this.data.remove(t).ot(t,!0))},Hi.prototype.delete=function(t){return this.has(t)?this.copy(this.data.remove(t)):this},Hi.prototype.P=function(){return this.data.P()},Hi.prototype.Ot=function(t){var e=this;return e.size<t.size&&(e=t,t=this),t.forEach(function(t){e=e.add(t)}),e},Hi.prototype.isEqual=function(t){if(!(t instanceof Hi))return!1;if(this.size!==t.size)return!1;for(var e=this.data._t(),n=t.data._t();e.At();){var r=e.It().key,i=n.It().key;if(0!==this.S(r,i))return!1}return!0},Hi.prototype.L=function(){var e=[];return this.forEach(function(t){e.push(t)}),e},Hi.prototype.toString=function(){var e=[];return this.forEach(function(t){return e.push(t)}),"SortedSet("+e.toString()+")"},Hi.prototype.copy=function(t){var e=new Hi(this.S);return e.data=t,e},Hi),Wi=(zi.prototype.It=function(){return this.kt.It().key},zi.prototype.At=function(){return this.kt.At()},zi),Gi=new Ci(di.S);function zi(t){this.kt=t}function Hi(t){this.S=t,this.data=new Ci(this.S)}var Qi=new Ci(di.S),Xi=new Ci(di.S),Ki=new Bi(di.S);function Yi(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=Ki,r=0,i=t;r<i.length;r++)var o=i[r],n=n.add(o);return n}var Zi=new Bi(Wr),$i=(yo.qt=function(t){return new yo(t.S)},yo.prototype.has=function(t){return null!=this.Mt.get(t)},yo.prototype.get=function(t){return this.Mt.get(t)},yo.prototype.first=function(){return this.Lt.ct()},yo.prototype.last=function(){return this.Lt.ht()},yo.prototype.P=function(){return this.Lt.P()},yo.prototype.indexOf=function(t){return(t=this.Mt.get(t))?this.Lt.indexOf(t):-1},Object.defineProperty(yo.prototype,"size",{get:function(){return this.Lt.size},enumerable:!1,configurable:!0}),yo.prototype.forEach=function(n){this.Lt.at(function(t,e){return n(t),!1})},yo.prototype.add=function(t){var e=this.delete(t.key);return e.copy(e.Mt.ot(t.key,t),e.Lt.ot(t,null))},yo.prototype.delete=function(t){var e=this.get(t);return e?this.copy(this.Mt.remove(t),this.Lt.remove(e)):this},yo.prototype.isEqual=function(t){if(!(t instanceof yo))return!1;if(this.size!==t.size)return!1;for(var e=this.Lt._t(),n=t.Lt._t();e.At();){var r=e.It().key,i=n.It().key;if(!r.isEqual(i))return!1}return!0},yo.prototype.toString=function(){var e=[];return this.forEach(function(t){e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"},yo.prototype.copy=function(t,e){var n=new yo;return n.S=this.S,n.Mt=t,n.Lt=e,n},yo),Ji=(po.prototype.track=function(t){var e=t.doc.key,n=this.Ut.get(e);!n||0!==t.type&&3===n.type?this.Ut=this.Ut.ot(e,t):3===t.type&&1!==n.type?this.Ut=this.Ut.ot(e,{type:n.type,doc:t.doc}):2===t.type&&2===n.type?this.Ut=this.Ut.ot(e,{type:2,doc:t.doc}):2===t.type&&0===n.type?this.Ut=this.Ut.ot(e,{type:0,doc:t.doc}):1===t.type&&0===n.type?this.Ut=this.Ut.remove(e):1===t.type&&2===n.type?this.Ut=this.Ut.ot(e,{type:1,doc:n.doc}):0===t.type&&1===n.type?this.Ut=this.Ut.ot(e,{type:2,doc:t.doc}):Mr()},po.prototype.Bt=function(){var n=[];return this.Ut.at(function(t,e){n.push(e)}),n},po),to=(fo.Gt=function(t,e,n,r){var i=[];return e.forEach(function(t){i.push({type:0,doc:t})}),new fo(t,e,$i.qt(e),i,n,r,!0,!1)},Object.defineProperty(fo.prototype,"hasPendingWrites",{get:function(){return!this.Qt.P()},enumerable:!1,configurable:!0}),fo.prototype.isEqual=function(t){if(!(this.fromCache===t.fromCache&&this.Wt===t.Wt&&this.Qt.isEqual(t.Qt)&&vu(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.jt.isEqual(t.jt)))return!1;var e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(var r=0;r<e.length;r++)if(e[r].type!==n[r].type||!e[r].doc.isEqual(n[r].doc))return!1;return!0},fo),eo=(lo.Xt=function(t,e){var n=new Map;return n.set(t,no.Zt(t,e)),new lo(ci.min(),n,Zi,Gi,Yi())},lo),no=(co.Zt=function(t,e){return new co(zr.h,e,Yi(),Yi(),Yi())},co),ro=function(t,e,n,r){this.rn=t,this.removedTargetIds=e,this.key=n,this.on=r},io=function(t,e){this.targetId=t,this.un=e},oo=function(t,e,n,r){void 0===n&&(n=zr.h),void 0===r&&(r=null),this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=r},so=(Object.defineProperty(ho.prototype,"tn",{get:function(){return this.ln},enumerable:!1,configurable:!0}),Object.defineProperty(ho.prototype,"resumeToken",{get:function(){return this.an},enumerable:!1,configurable:!0}),Object.defineProperty(ho.prototype,"fn",{get:function(){return 0!==this.cn},enumerable:!1,configurable:!0}),Object.defineProperty(ho.prototype,"dn",{get:function(){return this._n},enumerable:!1,configurable:!0}),ho.prototype.wn=function(t){0<t.o()&&(this._n=!0,this.an=t)},ho.prototype.mn=function(){var n=Yi(),r=Yi(),i=Yi();return this.hn.forEach(function(t,e){switch(e){case 0:n=n.add(t);break;case 2:r=r.add(t);break;case 1:i=i.add(t);break;default:Mr()}}),new no(this.an,this.ln,n,r,i)},ho.prototype.En=function(){this._n=!1,this.hn=go()},ho.prototype.Tn=function(t,e){this._n=!0,this.hn=this.hn.ot(t,e)},ho.prototype.In=function(t){this._n=!0,this.hn=this.hn.remove(t)},ho.prototype.An=function(){this.cn+=1},ho.prototype.Rn=function(){--this.cn},ho.prototype.Pn=function(){this._n=!0,this.ln=!0},ho),uo=(ao.prototype.bn=function(t){for(var e=0,n=t.rn;e<n.length;e++){var r=n[e];t.on instanceof $s?this.Cn(r,t.on):t.on instanceof Js&&this.Sn(r,t.key,t.on)}for(var i=0,o=t.removedTargetIds;i<o.length;i++){var s=o[i];this.Sn(s,t.key,t.on)}},ao.prototype.Dn=function(n){var r=this;this.Fn(n,function(t){var e=r.Nn(t);switch(n.state){case 0:r.xn(t)&&e.wn(n.resumeToken);break;case 1:e.Rn(),e.fn||e.En(),e.wn(n.resumeToken);break;case 2:e.Rn(),e.fn||r.removeTarget(t);break;case 3:r.xn(t)&&(e.Pn(),e.wn(n.resumeToken));break;case 4:r.xn(t)&&(r.$n(t),e.wn(n.resumeToken));break;default:Mr()}})},ao.prototype.Fn=function(t,n){var r=this;0<t.targetIds.length?t.targetIds.forEach(n):this.Vn.forEach(function(t,e){r.xn(e)&&n(e)})},ao.prototype.On=function(t){var e=t.targetId,n=t.un.count;(t=this.kn(e))&&(Pi(t=t.target)?0===n?(t=new di(t.path),this.Sn(e,t,new Js(t,ci.min()))):qr(1===n):this.Mn(e)!==n&&(this.$n(e),this.vn=this.vn.add(e)))},ao.prototype.Ln=function(r){var i=this,o=new Map;this.Vn.forEach(function(t,e){var n=i.kn(e);n&&(t.tn&&Pi(n.target)&&(n=new di(n.target.path),null!==i.gn.get(n)||i.qn(e,n)||i.Sn(e,n,new Js(n,r))),t.dn&&(o.set(e,t.mn()),t.En()))});var s=Yi();this.pn.forEach(function(t,e){var n=!0;e.xt(function(t){return!(t=i.kn(t))||2===t.nt||(n=!1)}),n&&(s=s.add(t))});var t=new eo(r,o,this.vn,this.gn,s);return this.gn=Gi,this.pn=vo(),this.vn=new Bi(Wr),t},ao.prototype.Cn=function(t,e){var n;this.xn(t)&&(n=this.qn(t,e.key)?2:0,this.Nn(t).Tn(e.key,n),this.gn=this.gn.ot(e.key,e),this.pn=this.pn.ot(e.key,this.Un(e.key).add(t)))},ao.prototype.Sn=function(t,e,n){var r;this.xn(t)&&(r=this.Nn(t),this.qn(t,e)?r.Tn(e,1):r.In(e),this.pn=this.pn.ot(e,this.Un(e).delete(t)),n&&(this.gn=this.gn.ot(e,n)))},ao.prototype.removeTarget=function(t){this.Vn.delete(t)},ao.prototype.Mn=function(t){var e=this.Nn(t).mn();return this.yn.Bn(t).size+e.nn.size-e.sn.size},ao.prototype.An=function(t){this.Nn(t).An()},ao.prototype.Nn=function(t){var e=this.Vn.get(t);return e||(e=new so,this.Vn.set(t,e)),e},ao.prototype.Un=function(t){var e=this.pn.get(t);return e||(e=new Bi(Wr),this.pn=this.pn.ot(t,e)),e},ao.prototype.xn=function(t){var e=null!==this.kn(t);return e||Cr("WatchChangeAggregator","Detected inactive target",t),e},ao.prototype.kn=function(t){var e=this.Vn.get(t);return e&&e.fn?null:this.yn.jn(t)},ao.prototype.$n=function(e){var n=this;this.Vn.set(e,new so),this.yn.Bn(e).forEach(function(t){n.Sn(e,t,null)})},ao.prototype.qn=function(t,e){return this.yn.Bn(t).has(e)},ao);function ao(t){this.yn=t,this.Vn=new Map,this.gn=Gi,this.pn=vo(),this.vn=new Bi(Wr)}function ho(){this.cn=0,this.hn=go(),this.an=zr.h,this.ln=!1,this._n=!0}function co(t,e,n,r,i){this.resumeToken=t,this.tn=e,this.nn=n,this.en=r,this.sn=i}function lo(t,e,n,r,i){this.et=t,this.zt=e,this.Ht=n,this.Yt=r,this.Jt=i}function fo(t,e,n,r,i,o,s,u){this.query=t,this.docs=e,this.jt=n,this.docChanges=r,this.Qt=i,this.fromCache=o,this.Wt=s,this.Kt=u}function po(){this.Ut=new Ci(di.S)}function yo(n){this.S=n?function(t,e){return n(t,e)||di.S(t.key,e.key)}:function(t,e){return di.S(t.key,e.key)},this.Mt=Qi,this.Lt=new Ci(this.S)}function vo(){return new Ci(di.S)}function go(){return new Ci(di.S)}function mo(t){return"server_timestamp"===(null===(t=((null===(t=null==t?void 0:t.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function wo(t){return t=Oo(t.mapValue.fields.__local_write_time__.timestampValue),new hi(t.seconds,t.nanos)}var bo=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Eo(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?mo(t)?4:10:Mr()}function Io(r,i){var t,e=Eo(r);if(e!==Eo(i))return!1;switch(e){case 0:return!0;case 1:return r.booleanValue===i.booleanValue;case 4:return wo(r).isEqual(wo(i));case 3:return function(t){if("string"==typeof r.timestampValue&&"string"==typeof t.timestampValue&&r.timestampValue.length===t.timestampValue.length)return r.timestampValue===t.timestampValue;var e=Oo(r.timestampValue),t=Oo(t.timestampValue);return e.seconds===t.seconds&&e.nanos===t.nanos}(i);case 5:return r.stringValue===i.stringValue;case 6:return t=i,ko(r.bytesValue).isEqual(ko(t.bytesValue));case 7:return r.referenceValue===i.referenceValue;case 8:return e=i,Po((t=r).geoPointValue.latitude)===Po(e.geoPointValue.latitude)&&Po(t.geoPointValue.longitude)===Po(e.geoPointValue.longitude);case 2:return t=i,"integerValue"in(e=r)&&"integerValue"in t?Po(e.integerValue)===Po(t.integerValue):"doubleValue"in e&&"doubleValue"in t&&((e=Po(e.doubleValue))===(t=Po(t.doubleValue))?Ai(e)===Ai(t):isNaN(e)&&isNaN(t));case 9:return Gr(r.arrayValue.values||[],i.arrayValue.values||[],Io);case 10:return function(){var t,e=r.mapValue.fields||{},n=i.mapValue.fields||{};if(ri(e)!==ri(n))return!1;for(t in e)if(e.hasOwnProperty(t)&&(void 0===n[t]||!Io(e[t],n[t])))return!1;return!0}();default:return Mr()}}function Ao(t,e){return void 0!==(t.values||[]).find(function(t){return Io(t,e)})}function To(t,e){var n,r,i,o=Eo(t),s=Eo(e);if(o!==s)return Wr(o,s);switch(o){case 0:return 0;case 1:return Wr(t.booleanValue,e.booleanValue);case 2:return n=e,(r=Po(t.integerValue||t.doubleValue))<(n=Po(n.integerValue||n.doubleValue))?-1:n<r?1:r===n?0:isNaN(r)?isNaN(n)?0:-1:1;case 3:return No(t.timestampValue,e.timestampValue);case 4:return No(wo(t),wo(e));case 5:return Wr(t.stringValue,e.stringValue);case 6:return i=t.bytesValue,s=e.bytesValue,i=ko(i),s=ko(s),i.u(s);case 7:return function(t,e){for(var n=t.split("/"),r=e.split("/"),i=0;i<n.length&&i<r.length;i++){var o=Wr(n[i],r[i]);if(0!==o)return o}return Wr(n.length,r.length)}(t.referenceValue,e.referenceValue);case 8:return o=t.geoPointValue,r=e.geoPointValue,0!==(n=Wr(Po(o.latitude),Po(r.latitude)))?n:Wr(Po(o.longitude),Po(r.longitude));case 9:return function(t,e){for(var n=t.values||[],r=e.values||[],i=0;i<n.length&&i<r.length;++i){var o=To(n[i],r[i]);if(o)return o}return Wr(n.length,r.length)}(t.arrayValue,e.arrayValue);case 10:return function(t,e){var n=t.fields||{},r=Object.keys(n),i=e.fields||{},o=Object.keys(i);r.sort(),o.sort();for(var s=0;s<r.length&&s<o.length;++s){var u=Wr(r[s],o[s]);if(0!==u)return u;if(0!==(u=To(n[r[s]],i[o[s]])))return u}return Wr(r.length,o.length)}(t.mapValue,e.mapValue);default:throw Mr()}}function No(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return Wr(t,e);var n=Oo(t),t=Oo(e);return 0!==(e=Wr(n.seconds,t.seconds))?e:Wr(n.nanos,t.nanos)}function So(t){return function s(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?"time("+(t=Oo(t=i.timestampValue)).seconds+","+t.nanos+")":"stringValue"in i?i.stringValue:"bytesValue"in i?ko(i.bytesValue).toBase64():"referenceValue"in i?(e=i.referenceValue,di.Y(e).toString()):"geoPointValue"in i?"geo("+(e=i.geoPointValue).latitude+","+e.longitude+")":"arrayValue"in i?function(){for(var t="[",e=!0,n=0,r=i.arrayValue.values||[];n<r.length;n++)e?e=!1:t+=",",t+=s(r[n]);return t+"]"}():"mapValue"in i?function(t){for(var e="{",n=!0,r=0,i=Object.keys(t.fields||{}).sort();r<i.length;r++){var o=i[r];n?n=!1:e+=",",e+=o+":"+s(t.fields[o])}return e+"}"}(i.mapValue):Mr();var t,e}(t)}function Oo(t){if(qr(!!t),"string"!=typeof t)return{seconds:Po(t.seconds),nanos:Po(t.nanos)};var e=0,n=bo.exec(t);return qr(!!n),n[1]&&(n=(n[1]+"000000000").substr(0,9),e=Number(n)),t=new Date(t),{seconds:Math.floor(t.getTime()/1e3),nanos:e}}function Po(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function ko(t){return"string"==typeof t?zr.fromBase64String(t):zr.fromUint8Array(t)}function Do(t,e){return{referenceValue:"projects/"+t.projectId+"/databases/"+t.database+"/documents/"+e.path.q()}}function Ro(t){return t&&"integerValue"in t}function Lo(t){return!!t&&"arrayValue"in t}function _o(t){return t&&"nullValue"in t}function Vo(t){return t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Co(t){return t&&"mapValue"in t}var Uo={asc:"ASCENDING",desc:"DESCENDING"},jo={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},xo=function(t,e){this._=t,this.Qn=e};function Mo(t){return{integerValue:""+t}}function qo(t,e){if(t.Qn){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ai(e)?"-0":e}}function Fo(t,e){return"number"==typeof(n=e)&&Number.isInteger(n)&&!Ai(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER?Mo(e):qo(t,e);var n}function Bo(t,e){return t.Qn?new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+e.nanoseconds).slice(-9)+"Z":{seconds:""+e.seconds,nanos:e.nanoseconds}}function Wo(t,e){return t.Qn?e.toBase64():e.toUint8Array()}function Go(t){return qr(!!t),ci.g((t=Oo(t),new hi(t.seconds,t.nanos)))}function zo(t,e){return new li(["projects",t.projectId,"databases",t.database]).child("documents").child(e).q()}function Ho(t,e){return zo(t._,e.path)}function Qo(t,e){return qr(ts(e=li.U(e))),qr(e.get(1)===t._.projectId),qr(!e.get(3)&&!t._.database||e.get(3)===t._.database),new di((qr(4<e.length&&"documents"===e.get(4)),e.F(5)))}function Xo(t,e){return zo(t._,e)}function Ko(t){return new li(["projects",t._.projectId,"databases",t._.database]).q()}function Yo(t,e,n){return{name:Ho(t,e),fields:n.proto.mapValue.fields}}function Zo(t,e){var n,r,i;if(e instanceof Ds)n={update:Yo(t,e.key,e.value)};else if(e instanceof Fs)n={delete:Ho(t,e.key)};else if(e instanceof Rs)n={update:Yo(t,e.key,e.data),updateMask:(i=e.Wn,r=[],i.fields.forEach(function(t){return r.push(t.q())}),{fieldPaths:r})};else if(e instanceof Us)n={transform:{document:Ho(t,e.key),fieldTransforms:e.fieldTransforms.map(function(t){var e=t.transform;if(e instanceof is)return{fieldPath:t.field.q(),setToServerValue:"REQUEST_TIME"};if(e instanceof os)return{fieldPath:t.field.q(),appendMissingElements:{values:e.elements}};if(e instanceof cs)return{fieldPath:t.field.q(),removeAllFromArray:{values:e.elements}};if(e instanceof ds)return{fieldPath:t.field.q(),increment:e.Kn};throw Mr()})}};else{if(!(e instanceof Bs))return Mr();n={verify:Ho(t,e.key)}}return e.zn.Gn||(n.currentDocument=void 0!==(i=e.zn).updateTime?{updateTime:Bo(e=t,(t=i.updateTime).v())}:void 0!==i.exists?{exists:i.exists}:Mr()),n}function $o(t){return{before:t.before,values:t.position}}function Jo(t){return{fieldPath:t.q()}}function ts(t){return 4<=t.length&&"projects"===t.get(0)&&"databases"===t.get(2)}function es(t,e){return t instanceof ds?Ro(t=e)||t&&"doubleValue"in t?e:{integerValue:0}:null}var ns,rs,is=(n(us,rs=we=function(){this.Hn=void 0}),us),os=(n(ss,ns=we),ss);function ss(t){var e=this;return(e=ns.call(this)||this).elements=t,e}function us(){return null!==rs&&rs.apply(this,arguments)||this}function as(t,e){for(var n=gs(e),r=0,i=t.elements;r<i.length;r++)!function(e){n.some(function(t){return Io(t,e)})||n.push(e)}(i[r]);return{arrayValue:{values:n}}}var hs,cs=(n(ls,hs=we),ls);function ls(t){var e=this;return(e=hs.call(this)||this).elements=t,e}function fs(t,e){for(var n=gs(e),r=0,i=t.elements;r<i.length;r++)!function(e){n=n.filter(function(t){return!Io(t,e)})}(i[r]);return{arrayValue:{values:n}}}var ps,ds=(n(ys,ps=we),ys);function ys(t,e){var n=this;return(n=ps.call(this)||this).serializer=t,n.Kn=e,n}function vs(t){return Po(t.integerValue||t.doubleValue)}function gs(t){return Lo(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function ms(t,e){this.field=t,this.transform=e}var ws=(bs.prototype.Yn=function(t){for(var e=0,n=this.fields;e<n.length;e++)if(n[e].k(t))return!0;return!1},bs.prototype.isEqual=function(t){return Gr(this.fields,t.fields,function(t,e){return t.isEqual(e)})},bs);function bs(t){(this.fields=t).sort(pi.S)}function Es(t,e){this.version=t,this.transformResults=e}var Is=(As.Jn=function(){return new As},As.exists=function(t){return new As(void 0,t)},As.updateTime=function(t){return new As(t)},Object.defineProperty(As.prototype,"Gn",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!1,configurable:!0}),As.prototype.isEqual=function(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)},As);function As(t,e){this.updateTime=t,this.exists=e}function Ts(t,e){return void 0!==t.updateTime?e instanceof $s&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e instanceof $s}function Ns(t,e,n,r){return t instanceof Ds?(o=e,Ts((i=t).zn,o)?(o=Os(o),new $s(i.key,o,i.value,{Xn:!0})):o):t instanceof Rs?function(t,e){if(!Ts(t.zn,e))return e;var n=Os(e),e=Vs(t,e);return new $s(t.key,n,e,{Xn:!0})}(t,e):t instanceof Us?function(t,e,n,r){if(!Ts(t.zn,e))return e;var i=e,r=function(t,e,n,r){for(var i,o=[],s=0,u=t;s<u.length;s++){var a=u[s],h=a.transform,c=null;n instanceof $s&&(c=n.field(a.field)),null===c&&r instanceof $s&&(c=r.field(a.field)),o.push((i=c,a=e,c=void 0,h instanceof is?(c={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}},i&&(c.fields.__previous_value__=i),{mapValue:c}):h instanceof os?as(h,i):h instanceof cs?fs(h,i):(i=vs(h=es(c=h,i))+vs(c.Kn),Ro(h)&&Ro(c.Kn)?Mo(i):qo(c.serializer,i))))}return o}(t.fieldTransforms,n,e,r),r=xs(t,i.data(),r);return new $s(t.key,i.version,r,{Xn:!0})}(t,e,r,n):Ts(t.zn,e)?new Js(t.key,ci.min()):e;var i,o}function Ss(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.zn.isEqual(e.zn)&&(0===t.type?t.value.isEqual(e.value):1===t.type?t.data.isEqual(e.data)&&t.Wn.isEqual(e.Wn):2!==t.type||Gr(t.fieldTransforms,t.fieldTransforms,function(t,e){return t.field.isEqual(e.field)&&(t=t.transform,e=e.transform,t instanceof os&&e instanceof os||t instanceof cs&&e instanceof cs?Gr(t.elements,e.elements,Io):t instanceof ds&&e instanceof ds?Io(t.Kn,e.Kn):t instanceof is&&e instanceof is)}))}function Os(t){return t instanceof $s?t.version:ci.min()}var Ps,ks,Ds=(n(_s,ks=f=function(){}),_s),Rs=(n(Ls,Ps=f),Ls);function Ls(t,e,n,r){var i=this;return(i=Ps.call(this)||this).key=t,i.data=e,i.Wn=n,i.zn=r,i.type=1,i}function _s(t,e,n){var r=this;return(r=ks.call(this)||this).key=t,r.value=e,r.zn=n,r.type=0,r}function Vs(t,e){return n=t,e=e instanceof $s?e.data():Ws.empty(),r=new Gs(e),n.Wn.fields.forEach(function(t){var e;t.P()||(null!==(e=n.data.field(t))?r.set(t,e):r.delete(t))}),r.Zn();var n,r}var Cs,Us=(n(js,Cs=f),js);function js(t,e){var n=this;return(n=Cs.call(this)||this).key=t,n.fieldTransforms=e,n.type=2,n.zn=Is.exists(!0),n}function xs(t,e,n){for(var r=new Gs(e),i=0;i<t.fieldTransforms.length;i++){var o=t.fieldTransforms[i];r.set(o.field,n[i])}return r.Zn()}var Ms,qs,Fs=(n(Xs,qs=f),Xs),Bs=(n(Qs,Ms=f),Qs),Ws=(Hs.empty=function(){return new Hs({mapValue:{}})},Hs.prototype.field=function(t){if(t.P())return this.proto;for(var e=this.proto,n=0;n<t.length-1;++n){if(!e.mapValue.fields)return null;if(!Co(e=e.mapValue.fields[t.get(n)]))return null}return(e=(e.mapValue.fields||{})[t.O()])||null},Hs.prototype.isEqual=function(t){return Io(this.proto,t.proto)},Hs),Gs=(zs.prototype.set=function(t,e){return this.ee(t,e),this},zs.prototype.delete=function(t){return this.ee(t,null),this},zs.prototype.ee=function(t,e){for(var n=this.ne,r=0;r<t.length-1;++r)var i=t.get(r),o=n.get(i),n=(o instanceof Map||(o=o&&10===Eo(o)?new Map(Object.entries(o.mapValue.fields||{})):new Map,n.set(i,o)),o);n.set(t.O(),e)},zs.prototype.Zn=function(){var t=this.se(pi.B(),this.ne);return null!=t?new Ws(t):this.te},zs.prototype.se=function(r,t){var i=this,o=!1,e=this.te.field(r),s=Co(e)?Object.assign({},e.mapValue.fields):{};return t.forEach(function(t,e){var n;t instanceof Map?null!=(n=i.se(r.child(e),t))&&(s[e]=n,o=!0):null!==t?(s[e]=t,o=!0):s.hasOwnProperty(e)&&(delete s[e],o=!0)}),o?{mapValue:{fields:s}}:null},zs);function zs(t){void 0===t&&(t=Ws.empty()),this.te=t,this.ne=new Map}function Hs(t){this.proto=t}function Qs(t,e){var n=this;return(n=Ms.call(this)||this).key=t,n.zn=e,n.type=4,n}function Xs(t,e){var n=this;return(n=qs.call(this)||this).key=t,n.zn=e,n.type=3,n}var Ks,Ys,Zs,$s=(n(iu,Zs=we=function(t,e){this.key=t,this.version=e}),iu.prototype.field=function(t){return this.ie.field(t)},iu.prototype.data=function(){return this.ie},iu.prototype.re=function(){return this.ie.proto},iu.prototype.isEqual=function(t){return t instanceof iu&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.Xn===t.Xn&&this.hasCommittedMutations===t.hasCommittedMutations&&this.ie.isEqual(t.ie)},iu.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+this.ie.toString()+", {hasLocalMutations: "+this.Xn+"}), {hasCommittedMutations: "+this.hasCommittedMutations+"})"},Object.defineProperty(iu.prototype,"hasPendingWrites",{get:function(){return this.Xn||this.hasCommittedMutations},enumerable:!1,configurable:!0}),iu),Js=(n(ru,Ys=we),ru.prototype.toString=function(){return"NoDocument("+this.key+", "+this.version+")"},Object.defineProperty(ru.prototype,"hasPendingWrites",{get:function(){return this.hasCommittedMutations},enumerable:!1,configurable:!0}),ru.prototype.isEqual=function(t){return t instanceof ru&&t.hasCommittedMutations===this.hasCommittedMutations&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},ru),tu=(n(nu,Ks=we),nu.prototype.toString=function(){return"UnknownDocument("+this.key+", "+this.version+")"},Object.defineProperty(nu.prototype,"hasPendingWrites",{get:function(){return!0},enumerable:!1,configurable:!0}),nu.prototype.isEqual=function(t){return t instanceof nu&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},nu),eu=function(t,e,n,r,i,o,s,u){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o="F"),void 0===s&&(s=null),void 0===u&&(u=null),this.path=t,this.collectionGroup=e,this.oe=n,this.filters=r,this.limit=i,this.ue=o,this.startAt=s,this.endAt=u,this.ce=null,this.he=null,this.startAt,this.endAt};function nu(){return null!==Ks&&Ks.apply(this,arguments)||this}function ru(t,e,n){var r=this;return(r=Ys.call(this,t,e)||this).hasCommittedMutations=!(!n||!n.hasCommittedMutations),r}function iu(t,e,n,r){var i=this;return(i=Zs.call(this,t,e)||this).ie=n,i.Xn=!!r.Xn,i.hasCommittedMutations=!!r.hasCommittedMutations,i}function ou(t){return new eu(t)}function su(t){return!Ii(t.limit)&&"F"===t.ue}function uu(t){return!Ii(t.limit)&&"L"===t.ue}function au(t){return 0<t.oe.length?t.oe[0].field:null}function hu(t){for(var e=0,n=t.filters;e<n.length;e++){var r=n[e];if(r.ae())return r.field}return null}function cu(t){return null!==t.collectionGroup}function lu(t){var e=t;if(null===e.ce){e.ce=[];var n=hu(e),t=au(e);if(null!==n&&null===t)n.W()||e.ce.push(new Yu(n)),e.ce.push(new Yu(pi.K(),"asc"));else{for(var r=!1,i=0,o=e.oe;i<o.length;i++){var s=o[i];e.ce.push(s),s.field.W()&&(r=!0)}r||(n=0<e.oe.length?e.oe[e.oe.length-1].dir:"asc",e.ce.push(new Yu(pi.K(),n)))}}return e.ce}function fu(t){var e=t;if(!e.he)if("F"===e.ue)e.he=Ni(e.path,e.collectionGroup,lu(e),e.filters,e.limit,e.startAt,e.endAt);else{for(var n=[],r=0,i=lu(e);r<i.length;r++){var o=i[r],s="desc"===o.dir?"asc":"desc";n.push(new Yu(o.field,s))}var u=e.endAt?new Bu(e.endAt.position,!e.endAt.before):null,t=e.startAt?new Bu(e.startAt.position,!e.startAt.before):null;e.he=Ni(e.path,e.collectionGroup,n,e.filters,e.limit,u,t)}return e.he}function pu(t,e,n){return new eu(t.path,t.collectionGroup,t.oe.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function du(t,e){return new eu(t.path,t.collectionGroup,t.oe.slice(),t.filters.slice(),t.limit,t.ue,e,t.endAt)}function yu(t,e){return new eu(t.path,t.collectionGroup,t.oe.slice(),t.filters.slice(),t.limit,t.ue,t.startAt,e)}function vu(t,e){return Oi(fu(t),fu(e))&&t.ue===e.ue}function gu(t){return Si(fu(t))+"|lt:"+t.ue}function mu(t){return"Query(target="+(n=(e=fu(t)).path.q(),null!==e.collectionGroup&&(n+=" collectionGroup="+e.collectionGroup),0<e.filters.length&&(n+=", filters: ["+e.filters.map(function(t){return t.field.q()+" "+t.op+" "+So(t.value)}).join(", ")+"]"),Ii(e.limit)||(n+=", limit: "+e.limit),0<e.orderBy.length&&(n+=", orderBy: ["+e.orderBy.map(function(t){return t.field.q()+" ("+t.dir+")"}).join(", ")+"]"),e.startAt&&(n+=", startAt: "+Qu(e.startAt)),e.endAt&&(n+=", endAt: "+Qu(e.endAt)),"Target("+n+")")+"; limitType="+t.ue+")";var e,n}function wu(i,t){return e=i,n=t.key.path,(null!==e.collectionGroup?t.key.J(e.collectionGroup)&&e.path.k(n):di.X(e.path)?e.path.isEqual(n):e.path.M(n))&&function(t){for(var e=0,n=i.oe;e<n.length;e++){var r=n[e];if(!r.field.W()&&null===t.field(r.field))return}return 1}(t)&&function(t){for(var e=0,n=i.filters;e<n.length;e++)if(!n[e].matches(t))return;return 1}(t)&&(n=t,(!(t=i).startAt||Xu(t.startAt,lu(t),n))&&(!t.endAt||!Xu(t.endAt,lu(t),n)));var e,n}function bu(u){return function(t,e){for(var n=!1,r=0,i=lu(u);r<i.length;r++){var o=i[r],s=function(t,e,n){var r,i;switch(n=t.field.W()?di.S(e.key,n.key):(r=t.field,i=n,e=e.field(r),r=i.field(r),null!==e&&null!==r?To(e,r):Mr()),t.dir){case"asc":return n;case"desc":return-1*n;default:return Mr()}}(o,t,e);if(0!==s)return s;n=n||o.field.W()}return 0}}var Eu,Iu=(n(Au,Eu=function(){}),Au.create=function(t,e,n){return t.W()?"in"===e||"not-in"===e?this.le(t,e,n):new Ou(t,e,n):"array-contains"===e?new xu(t,n):"in"===e?new Mu(t,n):"not-in"===e?new qu(t,n):"array-contains-any"===e?new Fu(t,n):new Au(t,e,n)},Au.le=function(t,e,n){return new("in"===e?Pu:ku)(t,n)},Au.prototype.matches=function(t){return t=t.field(this.field),"!="===this.op?null!==t&&this._e(To(t,this.value)):null!==t&&Eo(this.value)===Eo(t)&&this._e(To(t,this.value))},Au.prototype._e=function(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return 0<t;case">=":return 0<=t;default:return Mr()}},Au.prototype.ae=function(){return 0<=["<","<=",">",">=","!=","not-in"].indexOf(this.op)},Au);function Au(t,e,n){var r=this;return(r=Eu.call(this)||this).field=t,r.op=e,r.value=n,r}var Tu,Nu,Su,Ou=(n(Lu,Su=Iu),Lu.prototype.matches=function(t){return t=di.S(t.key,this.key),this._e(t)},Lu),Pu=(n(Ru,Nu=Iu),Ru.prototype.matches=function(e){return this.keys.some(function(t){return t.isEqual(e.key)})},Ru),ku=(n(Du,Tu=Iu),Du.prototype.matches=function(e){return!this.keys.some(function(t){return t.isEqual(e.key)})},Du);function Du(t,e){var n=this;return(n=Tu.call(this,t,"not-in",e)||this).keys=_u(0,e),n}function Ru(t,e){var n=this;return(n=Nu.call(this,t,"in",e)||this).keys=_u(0,e),n}function Lu(t,e,n){var r=this;return(r=Su.call(this,t,e,n)||this).key=di.Y(n.referenceValue),r}function _u(t,e){return((null===(e=e.arrayValue)||void 0===e?void 0:e.values)||[]).map(function(t){return di.Y(t.referenceValue)})}var Vu,Cu,Uu,ju,xu=(n(Hu,ju=Iu),Hu.prototype.matches=function(t){return Lo(t=t.field(this.field))&&Ao(t.arrayValue,this.value)},Hu),Mu=(n(zu,Uu=Iu),zu.prototype.matches=function(t){return null!==(t=t.field(this.field))&&Ao(this.value.arrayValue,t)},zu),qu=(n(Gu,Cu=Iu),Gu.prototype.matches=function(t){return!Ao(this.value.arrayValue,{nullValue:"NULL_VALUE"})&&(null!==(t=t.field(this.field))&&!Ao(this.value.arrayValue,t))},Gu),Fu=(n(Wu,Vu=Iu),Wu.prototype.matches=function(t){var e=this;return!(!Lo(t=t.field(this.field))||!t.arrayValue.values)&&t.arrayValue.values.some(function(t){return Ao(e.value.arrayValue,t)})},Wu),Bu=function(t,e){this.position=t,this.before=e};function Wu(t,e){return Vu.call(this,t,"array-contains-any",e)||this}function Gu(t,e){return Cu.call(this,t,"not-in",e)||this}function zu(t,e){return Uu.call(this,t,"in",e)||this}function Hu(t,e){return ju.call(this,t,"array-contains",e)||this}function Qu(t){return(t.before?"b":"a")+":"+t.position.map(So).join(",")}function Xu(t,e,n){for(var r=0,i=0;i<t.position.length;i++){var o=e[i],s=t.position[i],r=o.field.W()?di.S(di.Y(s.referenceValue),n.key):To(s,n.field(o.field));if("desc"===o.dir&&(r*=-1),0!==r)break}return t.before?r<=0:r<0}function Ku(t,e){if(null===t)return null===e;if(null===e)return!1;if(t.before!==e.before||t.position.length!==e.position.length)return!1;for(var n=0;n<t.position.length;n++)if(!Io(t.position[n],e.position[n]))return!1;return!0}var Yu=function(t,e){void 0===e&&(e="asc"),this.field=t,this.dir=e},Zu=function(){var n=this;this.promise=new Promise(function(t,e){n.resolve=t,n.reject=e})},$u=(ea.prototype.reset=function(){this.Te=0},ea.prototype.Re=function(){this.Te=this.Ee},ea.prototype.Pe=function(t){var e=this;this.cancel();var n=Math.floor(this.Te+this.ye()),r=Math.max(0,Date.now()-this.Ae),i=Math.max(0,n-r);0<i&&Cr("ExponentialBackoff","Backing off for "+i+" ms (base delay: "+this.Te+" ms, delay with jitter: "+n+" ms, last attempt: "+r+" ms ago)"),this.Ie=this.fe.Ve(this.de,i,function(){return e.Ae=Date.now(),t()}),this.Te*=this.me,this.Te<this.we&&(this.Te=this.we),this.Te>this.Ee&&(this.Te=this.Ee)},ea.prototype.ge=function(){null!==this.Ie&&(this.Ie.pe(),this.Ie=null)},ea.prototype.cancel=function(){null!==this.Ie&&(this.Ie.cancel(),this.Ie=null)},ea.prototype.ye=function(){return(Math.random()-.5)*this.Te},ea),Ju=(ta.prototype.catch=function(t){return this.next(void 0,t)},ta.prototype.next=function(r,i){var o=this;return this.Se&&Mr(),this.Se=!0,this.Ce?this.error?this.De(i,this.error):this.Fe(r,this.result):new ta(function(e,n){o.ve=function(t){o.Fe(r,t).next(e,n)},o.be=function(t){o.De(i,t).next(e,n)}})},ta.prototype.Ne=function(){var n=this;return new Promise(function(t,e){n.next(t,e)})},ta.prototype.xe=function(t){try{var e=t();return e instanceof ta?e:ta.resolve(e)}catch(t){return ta.reject(t)}},ta.prototype.Fe=function(t,e){return t?this.xe(function(){return t(e)}):ta.resolve(e)},ta.prototype.De=function(t,e){return t?this.xe(function(){return t(e)}):ta.reject(e)},ta.resolve=function(n){return new ta(function(t,e){t(n)})},ta.reject=function(n){return new ta(function(t,e){e(n)})},ta.$e=function(t){return new ta(function(e,n){var r=0,i=0,o=!1;t.forEach(function(t){++r,t.next(function(){++i,o&&i===r&&e()},function(t){return n(t)})}),o=!0,i===r&&e()})},ta.Oe=function(t){for(var n=ta.resolve(!1),e=0,r=t;e<r.length;e++)!function(e){n=n.next(function(t){return t?ta.resolve(t):e()})}(r[e]);return n},ta.forEach=function(t,n){var r=this,i=[];return t.forEach(function(t,e){i.push(n.call(r,t,e))}),this.$e(i)},ta);function ta(t){var e=this;this.ve=null,this.be=null,this.result=void 0,this.error=void 0,this.Ce=!1,this.Se=!1,t(function(t){e.Ce=!0,e.result=t,e.ve&&e.ve(t)},function(t){e.Ce=!0,e.error=t,e.be&&e.be(t)})}function ea(t,e,n,r,i){void 0===n&&(n=1e3),void 0===r&&(r=1.5),void 0===i&&(i=6e4),this.fe=t,this.de=e,this.we=n,this.me=r,this.Ee=i,this.Te=0,this.Ie=null,this.Ae=Date.now(),this.reset()}function na(t){return"IndexedDbTransactionError"===t.name}function ra(){return"undefined"!=typeof document?document:null}var ia=(ua.Ue=function(t,e,n,r,i){return(i=new ua(t,e,Date.now()+n,r,i)).start(n),i},ua.prototype.start=function(t){var e=this;this.Be=setTimeout(function(){return e.je()},t)},ua.prototype.pe=function(){return this.je()},ua.prototype.cancel=function(t){null!==this.Be&&(this.clearTimeout(),this.qe.reject(new Dr(kr.CANCELLED,"Operation cancelled"+(t?": "+t:""))))},ua.prototype.je=function(){var e=this;this.ke.Qe(function(){return null!==e.Be?(e.clearTimeout(),e.op().then(function(t){return e.qe.resolve(t)})):Promise.resolve()})},ua.prototype.clearTimeout=function(){null!==this.Be&&(this.Le(this),clearTimeout(this.Be),this.Be=null)},ua),oa=(Object.defineProperty(sa.prototype,"ts",{get:function(){return this.Ge},enumerable:!1,configurable:!0}),sa.prototype.Qe=function(t){this.enqueue(t)},sa.prototype.ns=function(t){this.es(),this.ss(t)},sa.prototype.rs=function(){var t;this.Ge||(this.Ge=!0,(t=ra())&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Ze))},sa.prototype.enqueue=function(t){return this.es(),this.Ge?new Promise(function(t){}):this.ss(t)},sa.prototype.os=function(t){var e=this;this.Qe(function(){return e.Ke.push(t),e.us()})},sa.prototype.us=function(){return y(this,void 0,void 0,function(){var e,n=this;return v(this,function(t){switch(t.label){case 0:if(0===this.Ke.length)return[3,5];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,this.Ke[0]()];case 2:return t.sent(),this.Ke.shift(),this.Xe.reset(),[3,4];case 3:if(!na(e=t.sent()))throw e;return Cr("AsyncQueue","Operation failed with retryable error: "+e),[3,4];case 4:0<this.Ke.length&&this.Xe.Pe(function(){return n.us()}),t.label=5;case 5:return[2]}})})},sa.prototype.ss=function(t){var r=this,e=this.We.then(function(){return r.Ye=!0,t().catch(function(t){throw r.He=t,r.Ye=!1,Ur("INTERNAL UNHANDLED ERROR: ",(n=(e=t).message||"",e.stack&&(n=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),n)),t;var e,n}).then(function(t){return r.Ye=!1,t})});return this.We=e},sa.prototype.Ve=function(t,e,n){var r=this;return this.es(),-1<this.Je.indexOf(t)&&(e=0),n=ia.Ue(this,t,e,n,function(t){return r.cs(t)}),this.ze.push(n),n},sa.prototype.es=function(){this.He&&Mr()},sa.prototype.hs=function(){},sa.prototype.ls=function(){return y(this,void 0,void 0,function(){var e;return v(this,function(t){switch(t.label){case 0:return[4,e=this.We];case 1:t.sent(),t.label=2;case 2:if(e!==this.We)return[3,0];t.label=3;case 3:return[2]}})})},sa.prototype._s=function(t){for(var e=0,n=this.ze;e<n.length;e++)if(n[e].de===t)return!0;return!1},sa.prototype.fs=function(r){var i=this;return this.ls().then(function(){i.ze.sort(function(t,e){return t.Me-e.Me});for(var t=0,e=i.ze;t<e.length;t++){var n=e[t];if(n.pe(),"all"!==r&&n.de===r)break}return i.ls()})},sa.prototype.ds=function(t){this.Je.push(t)},sa.prototype.cs=function(t){t=this.ze.indexOf(t),this.ze.splice(t,1)},sa);function sa(){var e=this;this.We=Promise.resolve(),this.Ke=[],this.Ge=!1,this.ze=[],this.He=null,this.Ye=!1,this.Je=[],this.Xe=new $u(this,"async_queue_retry"),this.Ze=function(){var t=ra();t&&Cr("AsyncQueue","Visibility state changed to "+t.visibilityState),e.Xe.ge()};var t=ra();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this.Ze)}function ua(t,e,n,r,i){this.ke=t,this.de=e,this.Me=n,this.op=r,this.Le=i,this.qe=new Zu,this.then=this.qe.promise.then.bind(this.qe.promise),this.qe.promise.catch(function(t){})}function aa(t,e){if(Ur("AsyncQueue",e+": "+t),na(t))return new Dr(kr.UNAVAILABLE,e+": "+t);throw t}function ha(){this.Es=new ai(gu,vu),this.onlineState="Unknown",this.Ts=new Set}var ca=function(){this.ws=void 0,this.listeners=[]};function la(s,u){return y(this,void 0,void 0,function(){var e,n,r,i,o;return v(this,function(t){switch(t.label){case 0:if(e=s,n=u.query,r=!1,(i=e.Es.get(n))||(r=!0,i=new ca),!r)return[3,4];t.label=1;case 1:return t.trys.push([1,3,,4]),o=i,[4,e.Is(n)];case 2:return o.ws=t.sent(),[3,4];case 3:return o=aa(o=t.sent(),"Initialization of query '"+mu(u.query)+"' failed"),[2,void u.onError(o)];case 4:return e.Es.set(n,i),i.listeners.push(u),u.As(e.onlineState),i.ws&&u.Rs(i.ws)&&pa(e),[2]}})})}function fa(s,u){return y(this,void 0,void 0,function(){var e,n,r,i,o;return v(this,function(t){return e=s,n=u.query,r=!1,(i=e.Es.get(n))&&0<=(o=i.listeners.indexOf(u))&&(i.listeners.splice(o,1),r=0===i.listeners.length),r?[2,(e.Es.delete(n),e.Ps(n))]:[2]})})}function pa(t){t.Ts.forEach(function(t){t.next()})}var da=(ga.prototype.Rs=function(t){if(!this.options.includeMetadataChanges){for(var e=[],n=0,r=t.docChanges;n<r.length;n++){var i=r[n];3!==i.type&&e.push(i)}t=new to(t.query,t.docs,t.jt,e,t.Qt,t.fromCache,t.Wt,!0)}var o=!1;return this.Vs?this.ps(t)&&(this.ys.next(t),o=!0):this.vs(t,this.onlineState)&&(this.bs(t),o=!0),this.gs=t,o},ga.prototype.onError=function(t){this.ys.error(t)},ga.prototype.As=function(t){this.onlineState=t;var e=!1;return this.gs&&!this.Vs&&this.vs(this.gs,t)&&(this.bs(this.gs),e=!0),e},ga.prototype.vs=function(t,e){if(!t.fromCache)return!0;var n="Offline"!==e;return!(this.options.Cs&&n||t.docs.P()&&"Offline"!==e)},ga.prototype.ps=function(t){if(0<t.docChanges.length)return!0;var e=this.gs&&this.gs.hasPendingWrites!==t.hasPendingWrites;return!(!t.Wt&&!e)&&!0===this.options.includeMetadataChanges},ga.prototype.bs=function(t){t=to.Gt(t.query,t.docs,t.Qt,t.fromCache),this.Vs=!0,this.ys.next(t)},ga),ya=(va.prototype.Ss=function(){return null!=this.uid},va.prototype.Ds=function(){return this.Ss()?"uid:"+this.uid:"anonymous-user"},va.prototype.isEqual=function(t){return t.uid===this.uid},va);function va(t){this.uid=t}function ga(t,e,n){this.query=t,this.ys=e,this.Vs=!1,this.gs=null,this.onlineState="Unknown",this.options=n||{}}function ma(t,e){this.user=e,this.type="OAuth",this.xs={},this.xs.Authorization="Bearer "+t}ya.UNAUTHENTICATED=new ya(null),ya.Fs=new ya("google-credentials-uid"),ya.Ns=new ya("first-party-uid");var wa=(Ua.prototype.getToken=function(){return Promise.resolve(null)},Ua.prototype.Os=function(){},Ua.prototype.ks=function(t){(this.$s=t)(ya.UNAUTHENTICATED)},Ua.prototype.Ms=function(){this.$s=null},Ua),ba=(Ca.prototype.getToken=function(){var e=this,n=this.Us,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(function(t){return e.Us!==n?(Cr("FirebaseCredentialsProvider","getToken aborted due to token change."),e.getToken()):t?(qr("string"==typeof t.accessToken),new ma(t.accessToken,e.currentUser)):null}):Promise.resolve(null)},Ca.prototype.Os=function(){this.forceRefresh=!0},Ca.prototype.ks=function(t){this.$s=t,this.qs&&t(this.currentUser)},Ca.prototype.Ms=function(){this.auth&&this.auth.removeAuthTokenListener(this.Ls),this.Ls=null,this.$s=null},Ca.prototype.Bs=function(){var t=this.auth&&this.auth.getUid();return qr(null===t||"string"==typeof t),new ya(t)},Ca),Ea=(Object.defineProperty(Va.prototype,"xs",{get:function(){var t={"X-Goog-AuthUser":this.Qs},e=this.js.auth.getAuthHeaderValueForFirstParty([]);return e&&(t.Authorization=e),t},enumerable:!1,configurable:!0}),Va),Ia=(_a.prototype.getToken=function(){return Promise.resolve(new Ea(this.js,this.Qs))},_a.prototype.ks=function(t){t(ya.Ns)},_a.prototype.Ms=function(){},_a.prototype.Os=function(){},_a),Aa=(La.prototype.Ks=function(t,e,n){for(var r,i,o,s,u,a=n.Gs,h=0;h<this.mutations.length;h++){var c=this.mutations[h];c.key.isEqual(t)&&(r=c,i=e,o=a[h],c=u=s=void 0,e=r instanceof Ds?new $s(r.key,o.version,r.value,{hasCommittedMutations:!0}):r instanceof Rs?(u=i,c=o,Ts((s=r).zn,u)?(u=Vs(s,u),new $s(s.key,c.version,u,{hasCommittedMutations:!0})):new tu(s.key,c.version)):r instanceof Us?function(t,e,n){if(qr(null!=n.transformResults),!Ts(t.zn,e))return new tu(t.key,n.version);var r=e,e=function(t,e,n){var r=[];qr(t.length===n.length);for(var i=0;i<n.length;i++){var o=t[i],s=o.transform,u=null;e instanceof $s&&(u=e.field(o.field)),r.push((o=s,s=u,u=n[i],o instanceof os?as(o,s):o instanceof cs?fs(o,s):u))}return r}(t.fieldTransforms,e,n.transformResults),n=n.version,e=xs(t,r.data(),e);return new $s(t.key,n,e,{hasCommittedMutations:!0})}(r,i,o):new Js(r.key,o.version,{hasCommittedMutations:!0}))}return e},La.prototype.zs=function(t,e){for(var n=0,r=this.baseMutations;n<r.length;n++){var i=r[n];i.key.isEqual(t)&&(e=Ns(i,e,e,this.Ws))}for(var o=e,s=0,u=this.mutations;s<u.length;s++){var a=u[s];a.key.isEqual(t)&&(e=Ns(a,e,o,this.Ws))}return e},La.prototype.Hs=function(n){var r=this,i=n;return this.mutations.forEach(function(t){var e=r.zs(t.key,n.get(t.key));e&&(i=i.ot(t.key,e))}),i},La.prototype.keys=function(){return this.mutations.reduce(function(t,e){return t.add(e.key)},Yi())},La.prototype.isEqual=function(t){return this.batchId===t.batchId&&Gr(this.mutations,t.mutations,Ss)&&Gr(this.baseMutations,t.baseMutations,Ss)},La),Ta=(Ra.from=function(t,e,n){qr(t.mutations.length===n.length);for(var r=Xi,i=t.mutations,o=0;o<i.length;o++)r=r.ot(i[o].key,n[o].version);return new Ra(t,e,n,r)},Ra),Na=(Da.prototype.ni=function(e,n){var r=this;return this.Zs.ei(e,n).next(function(t){return r.si(e,n,t)})},Da.prototype.si=function(t,r,i){return this.Xs.ii(t,r).next(function(t){for(var e=0,n=i;e<n.length;e++)t=n[e].zs(r,t);return t})},Da.prototype.ri=function(t,e,i){var o=Gi;return e.forEach(function(t,e){for(var n=0,r=i;n<r.length;n++)e=r[n].zs(t,e);o=o.ot(t,e)}),o},Da.prototype.oi=function(e,t){var n=this;return this.Xs.getEntries(e,t).next(function(t){return n.ui(e,t)})},Da.prototype.ui=function(e,r){var i=this;return this.Zs.ci(e,r).next(function(t){var t=i.ri(e,r,t),n=Gi;return t.forEach(function(t,e){e=e||new Js(t,ci.min()),n=n.ot(t,e)}),n})},Da.prototype.hi=function(t,e,n){return r=e,di.X(r.path)&&null===r.collectionGroup&&0===r.filters.length?this.ai(t,e.path):cu(e)?this.li(t,e,n):this._i(t,e,n);var r},Da.prototype.ai=function(t,e){return this.ni(t,new di(e)).next(function(t){var e=Qi;return t instanceof $s&&(e=e.ot(t.key,t)),e})},Da.prototype.li=function(n,r,i){var o=this,s=r.collectionGroup,u=Qi;return this.ti.fi(n,s).next(function(t){return Ju.forEach(t,function(t){var e=(e=r,t=t.child(s),new eu(t,null,e.oe.slice(),e.filters.slice(),e.limit,e.ue,e.startAt,e.endAt));return o._i(n,e,i).next(function(t){t.forEach(function(t,e){u=u.ot(t,e)})})}).next(function(){return u})})},Da.prototype._i=function(e,n,t){var a,h,r=this;return this.Xs.hi(e,n,t).next(function(t){return a=t,r.Zs.di(e,n)}).next(function(t){return h=t,r.wi(e,h,a).next(function(t){a=t;for(var e=0,n=h;e<n.length;e++)for(var r=n[e],i=0,o=r.mutations;i<o.length;i++){var s=o[i],u=s.key,s=Ns(s,s=a.get(u),s,r.Ws);a=s instanceof $s?a.ot(u,s):a.remove(u)}})}).next(function(){return a.forEach(function(t,e){wu(n,e)||(a=a.remove(t))}),a})},Da.prototype.wi=function(t,e,n){for(var r=Yi(),i=0,o=e;i<o.length;i++)for(var s=0,u=o[i].mutations;s<u.length;s++){var a=u[s];a instanceof Rs&&null===n.get(a.key)&&(r=r.add(a.key))}var h=n;return this.Xs.getEntries(t,r).next(function(t){return t.forEach(function(t,e){null!==e&&e instanceof $s&&(h=h.ot(t,e))}),h})},Da),Sa=(ka.Ti=function(t,e){for(var n=Yi(),r=Yi(),i=0,o=e.docChanges;i<o.length;i++){var s=o[i];switch(s.type){case 0:n=n.add(s.doc.key);break;case 1:r=r.add(s.doc.key)}}return new ka(t,e.fromCache,n,r)},ka),Oa=(Pa.prototype.Ai=function(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue},Pa.prototype.next=function(){var t=++this.previousValue;return this.Ri&&this.Ri(t),t},Pa);function Pa(t,e){var n=this;this.previousValue=t,e&&(e.Ii=function(t){return n.Ai(t)},this.Ri=function(t){return e.Pi(t)})}function ka(t,e,n,r){this.targetId=t,this.fromCache=e,this.mi=n,this.Ei=r}function Da(t,e,n){this.Xs=t,this.Zs=e,this.ti=n}function Ra(t,e,n,r){this.batch=t,this.Ys=e,this.Gs=n,this.Js=r}function La(t,e,n,r){this.batchId=t,this.Ws=e,this.baseMutations=n,this.mutations=r}function _a(t,e){this.js=t,this.Qs=e}function Va(t,e){this.js=t,this.Qs=e,this.type="FirstParty",this.user=ya.Ns}function Ca(t){var e=this;this.Ls=null,this.currentUser=ya.UNAUTHENTICATED,this.qs=!1,this.Us=0,this.$s=null,this.forceRefresh=!1,this.Ls=function(){e.Us++,e.currentUser=e.Bs(),e.qs=!0,e.$s&&e.$s(e.currentUser)},this.Us=0,this.auth=t.getImmediate({optional:!0}),this.auth?this.auth.addAuthTokenListener(this.Ls):(this.Ls(null),t.get().then(function(t){e.auth=t,e.Ls&&e.auth.addAuthTokenListener(e.Ls)},function(){}))}function Ua(){this.$s=null}Oa.yi=-1;var ja=(Ga.prototype.gi=function(t,e){return this.Vi.add(e),Ju.resolve()},Ga.prototype.fi=function(t,e){return Ju.resolve(this.Vi.getEntries(e))},Ga),xa=(Wa.prototype.add=function(t){var e=t.O(),n=t.N(),r=this.index[e]||new Bi(li.S),t=!r.has(n);return this.index[e]=r.add(n),t},Wa.prototype.has=function(t){var e=t.O(),t=t.N();return(e=this.index[e])&&e.has(t)},Wa.prototype.getEntries=function(t){return(this.index[t]||new Bi(li.S)).L()},Wa),Ma=(Ba.prototype.next=function(){return this.pi+=2,this.pi},Ba.vi=function(){return new Ba(0)},Ba.bi=function(){return new Ba(-1)},Ba),qa=(Fa.prototype.Ui=function(e){var n=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",function(t){return e.Bi(t,n.Si)})},Fa);function Fa(t,e,n){this.persistence=t,this.Ci=e,this.Si=new Ci(Wr),this.Di=new ai(Si,Oi),this.Fi=ci.min(),this.Zs=t.Ni(n),this.xi=t.$i(),this.Oi=t.ki(),this.Mi=new Na(this.xi,this.Zs,this.persistence.Li()),this.Ci.qi(this.Mi)}function Ba(t){this.pi=t}function Wa(){this.index={}}function Ga(){this.Vi=new xa}function za(i,o){return y(this,void 0,void 0,function(){var e,n,m,r;return v(this,function(t){switch(t.label){case 0:return n=(e=i).Zs,m=e.Mi,[4,e.persistence.runTransaction("Handle user change","readonly",function(v){var g;return e.Zs.ji(v).next(function(t){return g=t,n=e.persistence.Ni(o),m=new Na(e.xi,n,e.persistence.Li()),n.ji(v)}).next(function(t){for(var e=[],n=[],r=Yi(),i=0,o=g;i<o.length;i++){var s=o[i];e.push(s.batchId);for(var u=0,a=s.mutations;u<a.length;u++)var h=a[u],r=r.add(h.key)}for(var c=0,l=t;c<l.length;c++){var f=l[c];n.push(f.batchId);for(var p=0,d=f.mutations;p<d.length;p++){var y=d[p];r=r.add(y.key)}}return m.oi(v,r).next(function(t){return{Qi:t,Wi:e,Ki:n}})})})];case 1:return r=t.sent(),[2,(e.Zs=n,e.Mi=m,e.Ci.qi(e.Mi),r)]}})})}function Ha(t){var e=t;return e.persistence.runTransaction("Get last remote snapshot version","readonly",function(t){return e.Oi.Xi(t)})}function Qa(i,o,s){return y(this,void 0,void 0,function(){var e,n,r;return v(this,function(t){switch(t.label){case 0:n=(e=i).Si.get(o),r=s?"readwrite":"readwrite-primary",t.label=1;case 1:return t.trys.push([1,4,,5]),s?[3,3]:[4,e.persistence.runTransaction("Release target",r,function(t){return e.persistence.rr.removeTarget(t,n)})];case 2:t.sent(),t.label=3;case 3:return[3,5];case 4:if(!na(r=t.sent()))throw r;return Cr("LocalStore","Failed to update sequence numbers for target "+o+": "+r),[3,5];case 5:return e.Si=e.Si.remove(o),e.Di.delete(n.target),[2]}})})}function Xa(t,o,s){var u=t,a=ci.min(),h=Yi();return u.persistence.runTransaction("Execute query","readonly",function(e){return t=u,n=e,r=fu(o),(void 0!==(t=(i=t).Di.get(r))?Ju.resolve(i.Si.get(t)):i.Oi.hr(n,r)).next(function(t){if(t)return a=t.lastLimboFreeSnapshotVersion,u.Oi.ar(e,t.targetId).next(function(t){h=t})}).next(function(){return u.Ci.hi(e,o,s?a:ci.min(),s?h:Yi())}).next(function(t){return{documents:t,lr:h}});var t,n,r,i})}function Ka(e){return y(this,void 0,void 0,function(){return v(this,function(t){if(e.code!==kr.FAILED_PRECONDITION||"The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab."!==e.message)throw e;return Cr("LocalStore","Unexpectedly lost primary lease"),[2]})})}function Ya(t,e,n,r,i){var o=this;this.io=t,this.ro=e,this.ke=n,this.oo={},this.uo=[],this.co=new Map,this.ho=new Set,this.ao=[],this.lo=i,this.lo._o(function(t){n.Qe(function(){return y(o,void 0,void 0,function(){return v(this,function(t){switch(t.label){case 0:return gh(this)?(Cr("RemoteStore","Restarting streams for network reachability change."),[4,function(n){return y(this,void 0,void 0,function(){var e;return v(this,function(t){switch(t.label){case 0:return(e=n).ho.add(4),[4,ch(e)];case 1:return t.sent(),e.fo.set("Unknown"),e.ho.delete(4),[4,hh(e)];case 2:return t.sent(),[2]}})})}(this)]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})})}),this.fo=new rh(n,r)}var Za,$a,Ja,f=(ah.prototype.Tr=function(){return 1===this.state||2===this.state||4===this.state},ah.prototype.Ir=function(){return 2===this.state},ah.prototype.start=function(){3!==this.state?this.auth():this.Ar()},ah.prototype.stop=function(){return y(this,void 0,void 0,function(){return v(this,function(t){switch(t.label){case 0:return this.Tr()?[4,this.close(0)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})},ah.prototype.Rr=function(){this.state=0,this.Xe.reset()},ah.prototype.Pr=function(){var t=this;this.Ir()&&null===this.Er&&(this.Er=this.fe.Ve(this._r,6e4,function(){return t.yr()}))},ah.prototype.Vr=function(t){this.gr(),this.stream.send(t)},ah.prototype.yr=function(){return y(this,void 0,void 0,function(){return v(this,function(t){return this.Ir()?[2,this.close(0)]:[2]})})},ah.prototype.gr=function(){this.Er&&(this.Er.cancel(),this.Er=null)},ah.prototype.close=function(e,n){return y(this,void 0,void 0,function(){return v(this,function(t){switch(t.label){case 0:return this.gr(),this.Xe.cancel(),this.mr++,3!==e?this.Xe.reset():n&&n.code===kr.RESOURCE_EXHAUSTED?(Ur(n.toString()),Ur("Using maximum backoff delay to prevent overloading the backend."),this.Xe.Re()):n&&n.code===kr.UNAUTHENTICATED&&this.wr.Os(),null!==this.stream&&(this.pr(),this.stream.close(),this.stream=null),this.state=e,[4,this.listener.vr(n)];case 1:return t.sent(),[2]}})})},ah.prototype.pr=function(){},ah.prototype.auth=function(){var n=this;this.state=1;var t=this.br(this.mr),e=this.mr;this.wr.getToken().then(function(t){n.mr===e&&n.Cr(t)},function(e){t(function(){var t=new Dr(kr.UNKNOWN,"Fetching auth token failed: "+e.message);return n.Sr(t)})})},ah.prototype.Cr=function(t){var e=this,n=this.br(this.mr);this.stream=this.Dr(t),this.stream.Fr(function(){n(function(){return e.state=2,e.listener.Fr()})}),this.stream.vr(function(t){n(function(){return e.Sr(t)})}),this.stream.onMessage(function(t){n(function(){return e.onMessage(t)})})},ah.prototype.Ar=function(){var t=this;this.state=4,this.Xe.Pe(function(){return y(t,void 0,void 0,function(){return v(this,function(t){return this.state=0,this.start(),[2]})})})},ah.prototype.Sr=function(t){return Cr("PersistentStream","close with error: "+t),this.stream=null,this.close(3,t)},ah.prototype.br=function(e){var n=this;return function(t){n.fe.Qe(function(){return n.mr===e?t():(Cr("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())})}},ah),th=(n(uh,Ja=f),uh.prototype.Dr=function(t){return this.dr.Nr("Listen",t)},uh.prototype.onMessage=function(t){this.Xe.reset();var e,n=function(t,e){if("targetChange"in e){e.targetChange;var n="NO_CHANGE"===(i=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===i?1:"REMOVE"===i?2:"CURRENT"===i?3:"RESET"===i?4:Mr(),r=e.targetChange.targetIds||[],i=(o=e.targetChange.resumeToken,t.Qn?(qr(void 0===o||"string"==typeof o),zr.fromBase64String(o||"")):(qr(void 0===o||o instanceof Uint8Array),zr.fromUint8Array(o||new Uint8Array))),o=e.targetChange.cause,s=o&&(o=void 0===(s=o).code?kr.UNKNOWN:Vi(s.code),new Dr(o,s.message||"")),r=new oo(n,r,i,s||null)}else if("documentChange"in e){e.documentChange,(a=e.documentChange).document,a.document.name,a.document.updateTime;var i=Qo(t,a.document.name),u=Go(a.document.updateTime),s=new Ws({mapValue:{fields:a.document.fields}}),u=new $s(i,u,s,{}),s=a.targetIds||[],a=a.removedTargetIds||[];r=new ro(s,a,u.key,u)}else if("documentDelete"in e){e.documentDelete,(a=e.documentDelete).document;var u=Qo(t,a.document),h=a.readTime?Go(a.readTime):ci.min(),h=new Js(u,h),a=a.removedTargetIds||[];r=new ro([],a,h.key,h)}else if("documentRemove"in e){e.documentRemove,(h=e.documentRemove).document;var c=Qo(t,h.document),h=h.removedTargetIds||[];r=new ro([],h,c,null)}else{if(!("filter"in e))return Mr();e.filter,(c=e.filter).targetId,e=new ki(e=c.count||0),c=c.targetId,r=new io(c,e)}return r}(this.serializer,t),t=!("targetChange"in(e=t))||(e=e.targetChange).targetIds&&e.targetIds.length||!e.readTime?ci.min():Go(e.readTime);return this.listener.$r(n,t)},uh.prototype.Or=function(t){var e,n,r,i,o,s,u,a,h={};h.database=Ko(this.serializer),h.addTarget=(e=this.serializer,(r=Pi(r=(n=t).target)?{documents:{documents:[Xo(e,r.path)]}}:{query:(i=e,s={structuredQuery:{}},u=(o=r).path,null!==o.collectionGroup?(s.parent=Xo(i,u),s.structuredQuery.from=[{collectionId:o.collectionGroup,allDescendants:!0}]):(s.parent=Xo(i,u.N()),s.structuredQuery.from=[{collectionId:u.O()}]),(u=function(t){if(0!==t.length)return 1===(t=t.map(function(t){if("=="===t.op){if(Vo(t.value))return{unaryFilter:{field:Jo(t.field),op:"IS_NAN"}};if(_o(t.value))return{unaryFilter:{field:Jo(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(Vo(t.value))return{unaryFilter:{field:Jo(t.field),op:"IS_NOT_NAN"}};if(_o(t.value))return{unaryFilter:{field:Jo(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Jo(t.field),op:(e=t.op,jo[e]),value:t.value}};var e})).length?t[0]:{compositeFilter:{op:"AND",filters:t}}}(o.filters))&&(s.structuredQuery.where=u),(u=function(t){if(0!==t.length)return t.map(function(t){return{field:Jo(t.field),direction:(t=t.dir,Uo[t])}})}(o.orderBy))&&(s.structuredQuery.orderBy=u),u=o.limit,null!==(u=i.Qn||Ii(u)?u:{value:u})&&(s.structuredQuery.limit=u),o.startAt&&(s.structuredQuery.startAt=$o(o.startAt)),o.endAt&&(s.structuredQuery.endAt=$o(o.endAt)),s)}).targetId=n.targetId,0<n.resumeToken.o()&&(r.resumeToken=Wo(e,n.resumeToken)),r),(t=(this.serializer,a=t,null==(t=function(){switch(a.nt){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Mr()}}())?null:{"goog-listen-tags":t}))&&(h.labels=t),this.Vr(h)},uh.prototype.kr=function(t){var e={};e.database=Ko(this.serializer),e.removeTarget=t,this.Vr(e)},uh),eh=(n(sh,$a=f),Object.defineProperty(sh.prototype,"Lr",{get:function(){return this.Mr},enumerable:!1,configurable:!0}),sh.prototype.start=function(){this.Mr=!1,this.lastStreamToken=void 0,$a.prototype.start.call(this)},sh.prototype.pr=function(){this.Mr&&this.qr([])},sh.prototype.Dr=function(t){return this.dr.Nr("Write",t)},sh.prototype.onMessage=function(t){if(qr(!!t.streamToken),this.lastStreamToken=t.streamToken,this.Mr){this.Xe.reset();var e=(n=t.writeResults,r=t.commitTime,n&&0<n.length?(qr(void 0!==r),n.map(function(t){return n=r,(t=(e=t).updateTime?Go(e.updateTime):Go(n)).isEqual(ci.min())&&(t=Go(n)),n=null,e.transformResults&&0<e.transformResults.length&&(n=e.transformResults),new Es(t,n);var e,n})):[]),n=Go(t.commitTime);return this.listener.Ur(n,e)}var r;return qr(!t.writeResults||0===t.writeResults.length),this.Mr=!0,this.listener.Br()},sh.prototype.jr=function(){var t={};t.database=Ko(this.serializer),this.Vr(t)},sh.prototype.qr=function(t){var e=this,t={streamToken:this.lastStreamToken,writes:t.map(function(t){return Zo(e.serializer,t)})};this.Vr(t)},sh),nh=(n(oh,Za=function(){}),oh.prototype.Wr=function(){if(this.Qr)throw new Dr(kr.FAILED_PRECONDITION,"The client has already been terminated.")},oh.prototype.Kr=function(e,n,r){var i=this;return this.Wr(),this.credentials.getToken().then(function(t){return i.dr.Kr(e,n,r,t)}).catch(function(t){throw t.code===kr.UNAUTHENTICATED&&i.credentials.Os(),t})},oh.prototype.Gr=function(e,n,r){var i=this;return this.Wr(),this.credentials.getToken().then(function(t){return i.dr.Gr(e,n,r,t)}).catch(function(t){throw t.code===kr.UNAUTHENTICATED&&i.credentials.Os(),t})},oh.prototype.terminate=function(){this.Qr=!1},oh),rh=(ih.prototype.Xr=function(){var t=this;0===this.Hr&&(this.Zr("Unknown"),this.Yr=this.ke.Ve("online_state_timeout",1e4,function(){return t.Yr=null,t.no("Backend didn't respond within 10 seconds."),t.Zr("Offline"),Promise.resolve()}))},ih.prototype.eo=function(t){"Online"===this.state?this.Zr("Unknown"):(this.Hr++,1<=this.Hr&&(this.so(),this.no("Connection failed 1 times. Most recent error: "+t.toString()),this.Zr("Offline")))},ih.prototype.set=function(t){this.so(),this.Hr=0,"Online"===t&&(this.Jr=!1),this.Zr(t)},ih.prototype.Zr=function(t){t!==this.state&&(this.state=t,this.zr(t))},ih.prototype.no=function(t){t="Could not reach Cloud Firestore backend. "+t+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.",this.Jr?(Ur(t),this.Jr=!1):Cr("OnlineStateTracker",t)},ih.prototype.so=function(){null!==this.Yr&&(this.Yr.cancel(),this.Yr=null)},ih);function ih(t,e){this.ke=t,this.zr=e,this.state="Unknown",this.Hr=0,this.Yr=null,this.Jr=!0}function oh(t,e,n){var r=this;return(r=Za.call(this)||this).credentials=t,r.dr=e,r.serializer=n,r.Qr=!1,r}function sh(t,e,n,r,i){var o=this;return(o=$a.call(this,t,"write_stream_connection_backoff","write_stream_idle",e,n,i)||this).serializer=r,o.Mr=!1,o}function uh(t,e,n,r,i){var o=this;return(o=Ja.call(this,t,"listen_stream_connection_backoff","listen_stream_idle",e,n,i)||this).serializer=r,o}function ah(t,e,n,r,i,o){this.fe=t,this._r=n,this.dr=r,this.wr=i,this.listener=o,this.state=0,this.mr=0,this.Er=null,this.stream=null,this.Xe=new $u(t,e)}function hh(r){return y(this,void 0,void 0,function(){var e,n;return v(this,function(t){switch(t.label){case 0:if(!gh(r))return[3,4];e=0,n=r.ao,t.label=1;case 1:return e<n.length?[4,(0,n[e])(!0)]:[3,4];case 2:t.sent(),t.label=3;case 3:return e++,[3,1];case 4:return[2]}})})}function ch(r){return y(this,void 0,void 0,function(){var e,n;return v(this,function(t){switch(t.label){case 0:e=0,n=r.ao,t.label=1;case 1:return e<n.length?[4,(0,n[e])(!1)]:[3,4];case 2:t.sent(),t.label=3;case 3:return e++,[3,1];case 4:return[2]}})})}function lh(t,e){t.co.has(e.targetId)||(t.co.set(e.targetId,e),vh(t)?yh(t):Th(t).Ir()&&ph(t,e))}function fh(t,e){var n=t,t=Th(n);n.co.delete(e),t.Ir()&&dh(n,e),0===n.co.size&&(t.Ir()?t.Pr():gh(n)&&n.fo.set("Unknown"))}function ph(t,e){t.do.An(e.targetId),Th(t).Or(e)}function dh(t,e){t.do.An(e),Th(t).kr(e)}function yh(e){e.do=new uo({Bn:function(t){return e.oo.Bn(t)},jn:function(t){return e.co.get(t)||null}}),Th(e).start(),e.fo.Xr()}function vh(t){return gh(t)&&!Th(t).Tr()&&0<t.co.size}function gh(t){return 0===t.ho.size}function mh(t){t.do=void 0}function wh(n,r,i){return y(this,void 0,void 0,function(){var e=this;return v(this,function(t){switch(t.label){case 0:if(!na(r))throw r;return n.ho.add(1),[4,ch(n)];case 1:return t.sent(),n.fo.set("Offline"),i=i||function(){return Ha(n.io)},n.ke.os(function(){return y(e,void 0,void 0,function(){return v(this,function(t){switch(t.label){case 0:return Cr("RemoteStore","Retrying IndexedDB access"),[4,i()];case 1:return t.sent(),n.ho.delete(1),[4,hh(n)];case 2:return t.sent(),[2]}})})}),[2]}})})}function bh(e,n){return n().catch(function(t){return wh(e,t,n)})}function Eh(h){return y(this,void 0,void 0,function(){var o,s,u,a;return v(this,function(t){switch(t.label){case 0:s=Nh(o=h),u=0<o.uo.length?o.uo[o.uo.length-1].batchId:-1,t.label=1;case 1:if(!(gh(o)&&o.uo.length<10))return[3,7];t.label=2;case 2:return t.trys.push([2,4,,6]),[4,(n=o.io,r=u,(i=n).persistence.runTransaction("Get next mutation batch","readonly",function(t){return void 0===r&&(r=-1),i.Zs.cr(t,r)}))];case 3:return null===(a=t.sent())?(0===o.uo.length&&s.Pr(),[3,7]):(u=a.batchId,e=a,(n=o).uo.push(e),(n=Nh(n)).Ir()&&n.Lr&&n.qr(e.mutations),[3,6]);case 4:return a=t.sent(),[4,wh(o,a)];case 5:return t.sent(),[3,6];case 6:return[3,1];case 7:return Ih(o)&&Ah(o),[2]}var e,n,r,i})})}function Ih(t){return gh(t)&&!Nh(t).Tr()&&0<t.uo.length}function Ah(t){Nh(t).start()}function Th(n){var t,e,r,i=this;return n.Io||(n.Io=(t=n.ro,e=n.ke,r={Fr:function(n){return y(this,void 0,void 0,function(){return v(this,function(t){return n.co.forEach(function(t,e){ph(n,t)}),[2]})})}.bind(null,n),vr:function(e,n){return y(this,void 0,void 0,function(){return v(this,function(t){return mh(e),vh(e)?(e.fo.eo(n),yh(e)):e.fo.set("Unknown"),[2]})})}.bind(null,n),$r:function(s,u,a){return y(this,void 0,void 0,function(){var n,o;return v(this,function(t){switch(t.label){case 0:if(s.fo.set("Online"),!(u instanceof oo&&2===u.state&&u.cause))return[3,6];t.label=1;case 1:return t.trys.push([1,3,,5]),[4,function(o,s){return y(this,void 0,void 0,function(){var e,n,r,i;return v(this,function(t){switch(t.label){case 0:e=s.cause,n=0,r=s.targetIds,t.label=1;case 1:return n<r.length?(i=r[n],o.co.has(i)?[4,o.oo.wo(i,e)]:[3,3]):[3,5];case 2:t.sent(),o.co.delete(i),o.do.removeTarget(i),t.label=3;case 3:t.label=4;case 4:return n++,[3,1];case 5:return[2]}})})}(s,u)];case 2:return t.sent(),[3,5];case 3:return n=t.sent(),Cr("RemoteStore","Failed to remove targets %s: %s ",u.targetIds.join(","),n),[4,wh(s,n)];case 4:return t.sent(),[3,5];case 5:return[3,13];case 6:if(u instanceof ro?s.do.bn(u):u instanceof io?s.do.On(u):s.do.Dn(u),a.isEqual(ci.min()))return[3,13];t.label=7;case 7:return t.trys.push([7,11,,13]),[4,Ha(s.io)];case 8:return o=t.sent(),0<=a.u(o)?[4,(i=a,(e=(r=s).do.Ln(i)).zt.forEach(function(t,e){var n;0<t.resumeToken.o()&&(n=r.co.get(e))&&r.co.set(e,n.it(t.resumeToken,i))}),e.Ht.forEach(function(t){var e=r.co.get(t);e&&(r.co.set(t,e.it(zr.h,e.et)),dh(r,t),e=new Ri(e.target,t,1,e.sequenceNumber),ph(r,e))}),r.oo.mo(e))]:[3,10];case 9:t.sent(),t.label=10;case 10:return[3,13];case 11:return Cr("RemoteStore","Failed to raise snapshot:",o=t.sent()),[4,wh(s,o)];case 12:return t.sent(),[3,13];case 13:return[2]}var r,i,e})})}.bind(null,n)},t.Wr(),new th(e,t.dr,t.credentials,t.serializer,r)),n.ao.push(function(e){return y(i,void 0,void 0,function(){return v(this,function(t){switch(t.label){case 0:return e?(n.Io.Rr(),vh(n)?yh(n):n.fo.set("Unknown"),[3,3]):[3,1];case 1:return[4,n.Io.stop()];case 2:t.sent(),mh(n),t.label=3;case 3:return[2]}})})})),n.Io}function Nh(n){var t,e,r,i=this;return n.Ao||(n.Ao=(t=n.ro,e=n.ke,r={Fr:function(e){return y(this,void 0,void 0,function(){return v(this,function(t){return Nh(e).jr(),[2]})})}.bind(null,n),vr:function(e,n){return y(this,void 0,void 0,function(){return v(this,function(t){switch(t.label){case 0:return n&&Nh(e).Lr?[4,function(r,i){return y(this,void 0,void 0,function(){var e,n;return v(this,function(t){switch(t.label){case 0:return _i(n=i.code)&&n!==kr.ABORTED?(e=r.uo.shift(),Nh(r).Rr(),[4,bh(r,function(){return r.oo.To(e.batchId,i)})]):[3,3];case 1:return t.sent(),[4,Eh(r)];case 2:t.sent(),t.label=3;case 3:return[2]}})})}(e,n)]:[3,2];case 1:t.sent(),t.label=2;case 2:return Ih(e)&&Ah(e),[2]}})})}.bind(null,n),Br:function(o){return y(this,void 0,void 0,function(){var e,n,r,i;return v(this,function(t){for(e=Nh(o),n=0,r=o.uo;n<r.length;n++)i=r[n],e.qr(i.mutations);return[2]})})}.bind(null,n),Ur:function(r,i,o){return y(this,void 0,void 0,function(){var e,n;return v(this,function(t){switch(t.label){case 0:return e=r.uo.shift(),n=Ta.from(e,i,o),[4,bh(r,function(){return r.oo.Eo(n)})];case 1:return t.sent(),[4,Eh(r)];case 2:return t.sent(),[2]}})})}.bind(null,n)},t.Wr(),new eh(e,t.dr,t.credentials,t.serializer,r)),n.ao.push(function(e){return y(i,void 0,void 0,function(){return v(this,function(t){switch(t.label){case 0:return e?(n.Ao.Rr(),[4,Eh(n)]):[3,2];case 1:return t.sent(),[3,4];case 2:return[4,n.Ao.stop()];case 3:t.sent(),0<n.uo.length&&(Cr("RemoteStore","Stopping write stream with "+n.uo.length+" pending writes"),n.uo=[]),t.label=4;case 4:return[2]}})})})),n.Ao}var Sh=(Fh.prototype.P=function(){return this.Ro.P()},Fh.prototype.po=function(t,e){e=new Oh(t,e),this.Ro=this.Ro.add(e),this.yo=this.yo.add(e)},Fh.prototype.vo=function(t,e){var n=this;t.forEach(function(t){return n.po(t,e)})},Fh.prototype.bo=function(t,e){this.Co(new Oh(t,e))},Fh.prototype.So=function(t,e){var n=this;t.forEach(function(t){return n.bo(t,e)})},Fh.prototype.Do=function(t){var e=this,n=new di(new li([])),r=new Oh(n,t),t=new Oh(n,t+1),i=[];return this.yo.Nt([r,t],function(t){e.Co(t),i.push(t.key)}),i},Fh.prototype.Fo=function(){var e=this;this.Ro.forEach(function(t){return e.Co(t)})},Fh.prototype.Co=function(t){this.Ro=this.Ro.delete(t),this.yo=this.yo.delete(t)},Fh.prototype.No=function(t){var e=new di(new li([])),n=new Oh(e,t),t=new Oh(e,t+1),r=Yi();return this.yo.Nt([n,t],function(t){r=r.add(t.key)}),r},Fh.prototype.xo=function(t){var e=new Oh(t,0);return null!==(e=this.Ro.$t(e))&&t.isEqual(e.key)},Fh),Oh=(qh.Po=function(t,e){return di.S(t.key,e.key)||Wr(t.$o,e.$o)},qh.Vo=function(t,e){return Wr(t.$o,e.$o)||di.S(t.key,e.key)},qh),Ph=(Mh.prototype.Oo=function(t){this.activeTargetIds=this.activeTargetIds.add(t)},Mh.prototype.ko=function(t){this.activeTargetIds=this.activeTargetIds.delete(t)},Mh.prototype.Mo=function(){var t={activeTargetIds:this.activeTargetIds.L(),updateTimeMs:Date.now()};return JSON.stringify(t)},Mh),kh=(xh.prototype.Uo=function(t){},xh.prototype.Bo=function(t,e,n){},xh.prototype.jo=function(t){return this.Lo.Oo(t),this.qo[t]||"not-current"},xh.prototype.Qo=function(t,e,n){this.qo[t]=e},xh.prototype.Wo=function(t){this.Lo.ko(t)},xh.prototype.Ko=function(t){return this.Lo.activeTargetIds.has(t)},xh.prototype.Go=function(t){delete this.qo[t]},xh.prototype.zo=function(){return this.Lo.activeTargetIds},xh.prototype.Ho=function(t){return this.Lo.activeTargetIds.has(t)},xh.prototype.start=function(){return this.Lo=new Ph,Promise.resolve()},xh.prototype.Yo=function(t,e,n){},xh.prototype.Jo=function(t){},xh.prototype.Xo=function(){},xh.prototype.Pi=function(t){},xh),Dh=function(t){this.key=t},Rh=function(t){this.key=t},Lh=(Object.defineProperty(jh.prototype,"iu",{get:function(){return this.Zo},enumerable:!1,configurable:!0}),jh.prototype.ru=function(t,e){var s=this,u=e?e.ou:new Ji,a=(e||this).su,h=(e||this).Qt,c=a,l=!1,f=su(this.query)&&a.size===this.query.limit?a.last():null,p=uu(this.query)&&a.size===this.query.limit?a.first():null;if(t.at(function(t,e){var n=a.get(t),r=(r=e instanceof $s?e:null)&&(wu(s.query,r)?r:null),i=!!n&&s.Qt.has(n.key),o=!!r&&(r.Xn||s.Qt.has(r.key)&&r.hasCommittedMutations),e=!1;n&&r?n.data().isEqual(r.data())?i!==o&&(u.track({type:3,doc:r}),e=!0):s.uu(n,r)||(u.track({type:2,doc:r}),e=!0,(f&&0<s.eu(r,f)||p&&s.eu(r,p)<0)&&(l=!0)):!n&&r?(u.track({type:0,doc:r}),e=!0):n&&!r&&(u.track({type:1,doc:n}),e=!0,(f||p)&&(l=!0)),e&&(h=r?(c=c.add(r),o?h.add(t):h.delete(t)):(c=c.delete(t),h.delete(t)))}),su(this.query)||uu(this.query))for(;c.size>this.query.limit;){var n=su(this.query)?c.last():c.first(),c=c.delete(n.key),h=h.delete(n.key);u.track({type:1,doc:n})}return{su:c,ou:u,cu:l,Qt:h}},jh.prototype.uu=function(t,e){return t.Xn&&e.hasCommittedMutations&&!e.Xn},jh.prototype.hu=function(t,e,n){var o=this,r=this.su;this.su=t.su,this.Qt=t.Qt;var i=t.ou.Bt();i.sort(function(t,e){return r=t.type,i=e.type,n(r)-n(i)||o.eu(t.doc,e.doc);function n(t){switch(t){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Mr()}}var r,i}),this.au(n);var s=e?this.lu():[],e=(n=0===this.nu.size&&this.tn?1:0)!==this.tu;return this.tu=n,0!==i.length||e?{snapshot:new to(this.query,t.su,r,i,t.Qt,0==n,e,!1),_u:s}:{_u:s}},jh.prototype.As=function(t){return this.tn&&"Offline"===t?(this.tn=!1,this.hu({su:this.su,ou:new Ji,Qt:this.Qt,cu:!1},!1)):{_u:[]}},jh.prototype.fu=function(t){return!this.Zo.has(t)&&!!this.su.has(t)&&!this.su.get(t).Xn},jh.prototype.au=function(t){var e=this;t&&(t.nn.forEach(function(t){return e.Zo=e.Zo.add(t)}),t.en.forEach(function(t){}),t.sn.forEach(function(t){return e.Zo=e.Zo.delete(t)}),this.tn=t.tn)},jh.prototype.lu=function(){var e=this;if(!this.tn)return[];var n=this.nu;this.nu=Yi(),this.su.forEach(function(t){e.fu(t.key)&&(e.nu=e.nu.add(t.key))});var r=[];return n.forEach(function(t){e.nu.has(t)||r.push(new Rh(t))}),this.nu.forEach(function(t){n.has(t)||r.push(new Dh(t))}),r},jh.prototype.du=function(t){return this.Zo=t.lr,this.nu=Yi(),t=this.ru(t.documents),this.hu(t,!0)},jh.prototype.wu=function(){return to.Gt(this.query,this.su,this.Qt,0===this.tu)},jh),_h=function(t,e,n){this.query=t,this.targetId=e,this.view=n},Vh=function(t){this.key=t,this.mu=!1},Ch=(Object.defineProperty(Uh.prototype,"Fu",{get:function(){return!0===this.Du},enumerable:!1,configurable:!0}),Uh);function Uh(t,e,n,r,i,o){this.io=t,this.Eu=e,this.Tu=n,this.Iu=r,this.currentUser=i,this.Au=o,this.Ru={},this.Pu=new ai(gu,vu),this.yu=new Map,this.Vu=[],this.gu=new Ci(di.S),this.pu=new Map,this.vu=new Sh,this.bu={},this.Cu=new Map,this.Su=Ma.bi(),this.onlineState="Unknown",this.Du=void 0}function jh(t,e){this.query=t,this.Zo=e,this.tu=null,this.tn=!1,this.nu=Yi(),this.Qt=Yi(),this.eu=bu(t),this.su=new $i(this.eu)}function xh(){this.Lo=new Ph,this.qo={},this.zr=null,this.Ii=null}function Mh(){this.activeTargetIds=Zi}function qh(t,e){this.key=t,this.$o=e}function Fh(){this.Ro=new Bi(Oh.Po),this.yo=new Bi(Oh.Vo)}function Bh(f,p,d){return y(this,void 0,void 0,function(){var s,u;return v(this,function(t){switch(t.label){case 0:(o=f).Eu.oo.Eo=function(o,s){return y(this,void 0,void 0,function(){var n,r,i;return v(this,function(t){switch(t.label){case 0:n=o,r=s.batch.batchId,t.label=1;case 1:return t.trys.push([1,4,,6]),[4,(e=n.io,c=s,(l=e).persistence.runTransaction("Acknowledge batch","readwrite-primary",function(t){var r,e=c.batch.keys(),n=l.xi.Gi({zi:!0}),i=l,o=t,s=n,u=(r=c).batch,a=u.keys(),h=Ju.resolve();return a.forEach(function(n){h=h.next(function(){return s.ii(o,n)}).next(function(t){var e=t;qr(null!==(t=r.Js.get(n))),(!e||e.version.u(t)<0)&&(e=u.Ks(n,e,r))&&s.Hi(e,r.Ys)})}),h.next(function(){return i.Zs.Yi(o,u)}).next(function(){return n.apply(t)}).next(function(){return l.Zs.Ji(t)}).next(function(){return l.Mi.oi(t,e)})}))];case 2:return i=t.sent(),Qh(n,r,null),Hh(n,r),n.Iu.Bo(r,"acknowledged"),[4,$h(n,i)];case 3:return t.sent(),[3,6];case 4:return[4,Ka(t.sent())];case 5:return t.sent(),[3,6];case 6:return[2]}var e,c,l})})}.bind(null,o),o.Eu.oo.To=function(s,u,a){return y(this,void 0,void 0,function(){var n,o;return v(this,function(t){switch(t.label){case 0:n=s,t.label=1;case 1:return t.trys.push([1,4,,6]),[4,(e=n.io,r=u,(i=e).persistence.runTransaction("Reject batch","readwrite-primary",function(e){var n;return i.Zs.Lu(e,r).next(function(t){return qr(null!==t),n=t.keys(),i.Zs.Yi(e,t)}).next(function(){return i.Zs.Ji(e)}).next(function(){return i.Mi.oi(e,n)})}))];case 2:return o=t.sent(),Qh(n,u,a),Hh(n,u),n.Iu.Bo(u,"rejected",a),[4,$h(n,o)];case 3:return t.sent(),[3,6];case 4:return[4,Ka(t.sent())];case 5:return t.sent(),[3,6];case 6:return[2]}var e,r,i})})}.bind(null,o),u=o,t.label=1;case 1:return t.trys.push([1,5,,6]),[4,(r=u.io,a=p,c=r,l=hi.now(),i=a.reduce(function(t,e){return t.add(e.key)},Yi()),c.persistence.runTransaction("Locally write mutations","readwrite",function(u){return c.Mi.oi(u,i).next(function(t){h=t;for(var s,e=[],n=0,r=a;n<r.length;n++){var i=r[n],o=(s=i,o=h.get(i.key),s instanceof Us?function(t){for(var e=null,n=0,r=s.fieldTransforms;n<r.length;n++){var i=r[n],o=t instanceof $s?t.field(i.field):void 0;null!=(o=es(i.transform,o||null))&&(e=(null==e?new Gs:e).set(i.field,o))}return e?e.Zn():null}(o):null);null!=o&&e.push(new Rs(i.key,o,function s(t){var u=[];return ii(t.fields||{},function(t,e){var n=new pi([t]);if(Co(e))if(0===(e=s(e.mapValue).fields).length)u.push(n);else for(var r=0,i=e;r<i.length;r++){var o=i[r];u.push(n.child(o))}else u.push(n)}),new ws(u)}(o.proto.mapValue),Is.exists(!0)))}return c.Zs.ku(u,l,e,a)})}).then(function(t){var e=t.Hs(h);return{batchId:t.batchId,Mu:e}}))];case 2:return s=t.sent(),u.Iu.Uo(s.batchId),e=u,n=s.batchId,o=d,r=(r=(r=e.bu[e.currentUser.Ds()])||new Ci(Wr)).ot(n,o),e.bu[e.currentUser.Ds()]=r,[4,$h(u,s.Mu)];case 3:return t.sent(),[4,Eh(u.Eu)];case 4:return t.sent(),[3,6];case 5:return u=aa(u=t.sent(),"Failed to persist write"),d.reject(u),[3,6];case 6:return[2]}var e,n,r,a,h,c,l,i,o})})}function Wh(i,o){return y(this,void 0,void 0,function(){var n,r;return v(this,function(t){switch(t.label){case 0:n=i,t.label=1;case 1:return t.trys.push([1,4,,6]),[4,(e=n.io,h=e,c=(a=o).et,l=h.Si,h.persistence.runTransaction("Apply remote event","readwrite-primary",function(s){var i=h.xi.Gi({zi:!0});l=h.Si;var u=[];a.zt.forEach(function(t,e){var n,r,i,o=l.get(e);o&&(u.push(h.Oi.Zi(s,t.sn,e).next(function(){return h.Oi.tr(s,t.nn,e)})),0<(i=t.resumeToken).o()&&(n=o.it(i,c).st(s.nr),l=l.ot(e,n),r=o,i=t,qr(0<(o=n).resumeToken.o()),(0===r.resumeToken.o()||3e8<=o.et.p()-r.et.p()||0<i.nn.size+i.en.size+i.sn.size)&&u.push(h.Oi.er(s,n))))});var t,o=Gi,n=Yi();return a.Yt.forEach(function(t,e){n=n.add(t)}),u.push(i.getEntries(s,n).next(function(r){a.Yt.forEach(function(t,e){var n=r.get(t);e instanceof Js&&e.version.isEqual(ci.min())?(i.sr(t,c),o=o.ot(t,e)):null==n||0<e.version.u(n.version)||0===e.version.u(n.version)&&n.hasPendingWrites?(i.Hi(e,c),o=o.ot(t,e)):Cr("LocalStore","Ignoring outdated watch update for ",t,". Current version:",n.version," Watch version:",e.version),a.Jt.has(t)&&u.push(h.persistence.rr.ir(s,t))})})),c.isEqual(ci.min())||(t=h.Oi.Xi(s).next(function(t){return h.Oi.ur(s,s.nr,c)}),u.push(t)),Ju.$e(u).next(function(){return i.apply(s)}).next(function(){return h.Mi.ui(s,o)})}).then(function(t){return h.Si=l,t}))];case 2:return r=t.sent(),o.zt.forEach(function(t,e){(e=n.pu.get(e))&&(qr(t.nn.size+t.en.size+t.sn.size<=1),0<t.nn.size?e.mu=!0:0<t.en.size?qr(e.mu):0<t.sn.size&&(qr(e.mu),e.mu=!1))}),[4,$h(n,r,o)];case 3:return t.sent(),[3,6];case 4:return[4,Ka(t.sent())];case 5:return t.sent(),[3,6];case 6:return[2]}var e,a,h,c,l})})}function Gh(t,n,e){var r;((t=t).Fu&&0===e||!t.Fu&&1===e)&&(r=[],t.Pu.forEach(function(t,e){(e=e.view.As(n)).snapshot&&r.push(e.snapshot)}),function(t,i){t.onlineState=i;var o=!1;t.Es.forEach(function(t,e){for(var n=0,r=e.listeners;n<r.length;n++)r[n].As(i)&&(o=!0)}),o&&pa(t)}(t.Tu,n),r.length&&t.Ru.$r(r),t.onlineState=n,t.Fu&&t.Iu.Jo(n))}function zh(o,s){return y(this,void 0,void 0,function(){var n,r,i;return v(this,function(t){switch(t.label){case 0:gh((n=o).Eu)||Cr("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),t.label=1;case 1:return t.trys.push([1,3,,4]),[4,(e=n.io).persistence.runTransaction("Get highest unacknowledged batch id","readonly",function(t){return e.Zs.qu(t)})];case 2:return-1===(r=t.sent())?[2,void s.resolve()]:((i=n.Cu.get(r)||[]).push(s),n.Cu.set(r,i),[3,4]);case 3:return i=aa(i=t.sent(),"Initialization of waitForPendingWrites() operation failed"),s.reject(i),[3,4];case 4:return[2]}var e})})}function Hh(t,e){(t.Cu.get(e)||[]).forEach(function(t){t.resolve()}),t.Cu.delete(e)}function Qh(t,e,n){var r=t,i=r.bu[r.currentUser.Ds()];i&&((t=i.get(e))&&(n?t.reject(n):t.resolve(),i=i.remove(e)),r.bu[r.currentUser.Ds()]=i)}function Xh(e,t,n){void 0===n&&(n=null),e.Iu.Wo(t);for(var r=0,i=e.yu.get(t);r<i.length;r++){var o=i[r];e.Pu.delete(o),n&&e.Ru.Nu(o,n)}e.yu.delete(t),e.Fu&&e.vu.Do(t).forEach(function(t){e.vu.xo(t)||Kh(e,t)})}function Kh(t,e){var n=t.gu.get(e);null!==n&&(fh(t.Eu,n),t.gu=t.gu.remove(e),t.pu.delete(n),Zh(t))}function Yh(t,e,n){for(var r,i,o=0,s=n;o<s.length;o++){var u=s[o];u instanceof Dh?(t.vu.po(u.key,e),r=t,i=(i=u).key,r.gu.get(i)||(Cr("SyncEngine","New document in limbo: "+i),r.Vu.push(i),Zh(r))):u instanceof Rh?(Cr("SyncEngine","Document no longer in limbo: "+u.key),t.vu.bo(u.key,e),t.vu.xo(u.key)||Kh(t,u.key)):Mr()}}function Zh(t){for(;0<t.Vu.length&&t.gu.size<t.Au;){var e=t.Vu.shift(),n=t.Su.next();t.pu.set(n,new Vh(e)),t.gu=t.gu.ot(e,n),lh(t.Eu,new Ri(fu(ou(e.path)),n,2,Oa.yi))}}function $h(e,s,u){return y(this,void 0,void 0,function(){var n,r,i,o;return v(this,function(t){switch(t.label){case 0:return r=[],i=[],o=[],(n=e).Pu.P()?[3,3]:(n.Pu.forEach(function(t,e){o.push(n.Ou(e,s,u).then(function(t){t&&(n.Fu&&n.Iu.Qo(e.targetId,t.fromCache?"not-current":"current"),r.push(t),t=Sa.Ti(e.targetId,t),i.push(t))}))}),[4,Promise.all(o)]);case 1:return t.sent(),n.Ru.$r(r),[4,function(a,h){return y(this,void 0,void 0,function(){var r,e,n,i,o,s,u;return v(this,function(t){switch(t.label){case 0:r=a,t.label=1;case 1:return t.trys.push([1,3,,4]),[4,r.persistence.runTransaction("notifyLocalViewChanges","readwrite",function(n){return Ju.forEach(h,function(e){return Ju.forEach(e.mi,function(t){return r.persistence.rr.po(n,e.targetId,t)}).next(function(){return Ju.forEach(e.Ei,function(t){return r.persistence.rr.bo(n,e.targetId,t)})})})})];case 2:return t.sent(),[3,4];case 3:if(!na(e=t.sent()))throw e;return Cr("LocalStore","Failed to update sequence numbers: "+e),[3,4];case 4:for(n=0,i=h;n<i.length;n++)u=i[n],o=u.targetId,u.fromCache||(s=r.Si.get(o),u=s.et,u=s.rt(u),r.Si=r.Si.ot(o,u));return[2]}})})}(n.io,i)];case 2:t.sent(),t.label=3;case 3:return[2]}})})}var Jh,tc,ec,nc=(kc.prototype.qi=function(t){this.Uu=t},kc.prototype.hi=function(e,r,i,o){var s=this;return 0===r.filters.length&&null===r.limit&&null==r.startAt&&null==r.endAt&&(0===r.oe.length||1===r.oe.length&&r.oe[0].field.W())||i.isEqual(ci.min())?this.Bu(e,r):this.Uu.oi(e,o).next(function(t){var n=s.ju(r,t);return(su(r)||uu(r))&&s.cu(r.ue,n,o,i)?s.Bu(e,r):(Vr()<=u.DEBUG&&Cr("IndexFreeQueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),mu(r)),s.Uu.hi(e,r,i).next(function(e){return n.forEach(function(t){e=e.ot(t.key,t)}),e}))})},kc.prototype.ju=function(n,t){var r=new Bi(bu(n));return t.forEach(function(t,e){e instanceof $s&&wu(n,e)&&(r=r.add(e))}),r},kc.prototype.cu=function(t,e,n,r){return n.size!==e.size||!!(e="F"===t?e.last():e.first())&&(e.hasPendingWrites||0<e.version.u(r))},kc.prototype.Bu=function(t,e){return Vr()<=u.DEBUG&&Cr("IndexFreeQueryEngine","Using full collection scan to execute query:",mu(e)),this.Uu.hi(t,e,ci.min())},kc),rc=(Pc.prototype.Ku=function(t){return Ju.resolve(0===this.Zs.length)},Pc.prototype.ku=function(t,e,n,r){var i=this.Qu;this.Qu++,0<this.Zs.length&&this.Zs[this.Zs.length-1],n=new Aa(i,e,n,r),this.Zs.push(n);for(var o=0,s=r;o<s.length;o++){var u=s[o];this.Wu=this.Wu.add(new Oh(u.key,i)),this.ti.gi(t,u.key.path.N())}return Ju.resolve(n)},Pc.prototype.Lu=function(t,e){return Ju.resolve(this.Gu(e))},Pc.prototype.cr=function(t,e){return e+=1,e=(e=this.zu(e))<0?0:e,Ju.resolve(this.Zs.length>e?this.Zs[e]:null)},Pc.prototype.qu=function(){return Ju.resolve(0===this.Zs.length?-1:this.Qu-1)},Pc.prototype.ji=function(t){return Ju.resolve(this.Zs.slice())},Pc.prototype.ei=function(t,e){var n=this,r=new Oh(e,0),e=new Oh(e,Number.POSITIVE_INFINITY),i=[];return this.Wu.Nt([r,e],function(t){t=n.Gu(t.$o),i.push(t)}),Ju.resolve(i)},Pc.prototype.ci=function(t,e){var n=this,r=new Bi(Wr);return e.forEach(function(t){var e=new Oh(t,0),t=new Oh(t,Number.POSITIVE_INFINITY);n.Wu.Nt([e,t],function(t){r=r.add(t.$o)})}),Ju.resolve(this.Hu(r))},Pc.prototype.di=function(t,e){var n=e.path,r=n.length+1,e=n;di.X(e)||(e=e.child(""));var e=new Oh(new di(e),0),i=new Bi(Wr);return this.Wu.xt(function(t){var e=t.key.path;return!!n.k(e)&&(e.length===r&&(i=i.add(t.$o)),!0)},e),Ju.resolve(this.Hu(i))},Pc.prototype.Hu=function(t){var e=this,n=[];return t.forEach(function(t){null!==(t=e.Gu(t))&&n.push(t)}),n},Pc.prototype.Yi=function(n,r){var i=this;qr(0===this.Yu(r.batchId,"removed")),this.Zs.shift();var o=this.Wu;return Ju.forEach(r.mutations,function(t){var e=new Oh(t.key,r.batchId);return o=o.delete(e),i.rr.Ju(n,t.key)}).next(function(){i.Wu=o})},Pc.prototype.Xu=function(t){},Pc.prototype.xo=function(t,e){var n=new Oh(e,0),n=this.Wu.$t(n);return Ju.resolve(e.isEqual(n&&n.key))},Pc.prototype.Ji=function(t){return this.Zs.length,Ju.resolve()},Pc.prototype.Yu=function(t,e){return this.zu(t)},Pc.prototype.zu=function(t){return 0===this.Zs.length?0:t-this.Zs[0].batchId},Pc.prototype.Gu=function(t){return(t=this.zu(t))<0||t>=this.Zs.length?null:this.Zs[t]},Pc),ic=(Oc.prototype.Hi=function(t,e,n){var r=e.key,i=(o=this.docs.get(r))?o.size:0,o=this.Zu(e);return this.docs=this.docs.ot(r,{tc:e,size:o,readTime:n}),this.size+=o-i,this.ti.gi(t,r.path.N())},Oc.prototype.sr=function(t){var e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)},Oc.prototype.ii=function(t,e){return e=this.docs.get(e),Ju.resolve(e?e.tc:null)},Oc.prototype.getEntries=function(t,e){var n=this,r=Gi;return e.forEach(function(t){var e=n.docs.get(t);r=r.ot(t,e?e.tc:null)}),Ju.resolve(r)},Oc.prototype.hi=function(t,e,n){for(var r=Qi,i=new di(e.path.child("")),o=this.docs.ft(i);o.At();){var s=(u=o.It()).key,u=(a=u.value).tc,a=a.readTime;if(!e.path.k(s.path))break;a.u(n)<=0||u instanceof $s&&wu(e,u)&&(r=r.ot(u.key,u))}return Ju.resolve(r)},Oc.prototype.nc=function(t,e){return Ju.forEach(this.docs,function(t){return e(t)})},Oc.prototype.Gi=function(t){return new oc(this)},Oc.prototype.ec=function(t){return Ju.resolve(this.size)},Oc),oc=(Object.defineProperty(Sc.prototype,"readTime",{get:function(){return this.ic},set:function(t){this.ic=t},enumerable:!1,configurable:!0}),Sc.prototype.Hi=function(t,e){this.rc(),this.readTime=e,this.Mu.set(t.key,t)},Sc.prototype.sr=function(t,e){this.rc(),e&&(this.readTime=e),this.Mu.set(t,null)},Sc.prototype.ii=function(t,e){this.rc();var n=this.Mu.get(e);return void 0!==n?Ju.resolve(n):this.oc(t,e)},Sc.prototype.getEntries=function(t,e){return this.uc(t,e)},Sc.prototype.apply=function(t){return this.rc(),this.sc=!0,this.hu(t)},Sc.prototype.rc=function(){},n(Nc,ec=Sc),Nc.prototype.hu=function(n){var r=this,i=[];return this.Mu.forEach(function(t,e){e?i.push(r.cc.Hi(n,e,r.readTime)):r.cc.sr(t)}),Ju.$e(i)},Nc.prototype.oc=function(t,e){return this.cc.ii(t,e)},Nc.prototype.uc=function(t,e){return this.cc.getEntries(t,e)},Nc),sc=(Tc.prototype.Fn=function(t,n){return this.hc.forEach(function(t,e){return n(e)}),Ju.resolve()},Tc.prototype.Xi=function(t){return Ju.resolve(this.lastRemoteSnapshotVersion)},Tc.prototype.fc=function(t){return Ju.resolve(this.ac)},Tc.prototype.xu=function(t){return this.highestTargetId=this._c.next(),Ju.resolve(this.highestTargetId)},Tc.prototype.ur=function(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.ac&&(this.ac=e),Ju.resolve()},Tc.prototype.dc=function(t){this.hc.set(t.target,t);var e=t.targetId;e>this.highestTargetId&&(this._c=new Ma(e),this.highestTargetId=e),t.sequenceNumber>this.ac&&(this.ac=t.sequenceNumber)},Tc.prototype.$u=function(t,e){return this.dc(e),this.targetCount+=1,Ju.resolve()},Tc.prototype.er=function(t,e){return this.dc(e),Ju.resolve()},Tc.prototype.wc=function(t,e){return this.hc.delete(e.target),this.lc.Do(e.targetId),--this.targetCount,Ju.resolve()},Tc.prototype.mc=function(n,r,i){var o=this,s=0,u=[];return this.hc.forEach(function(t,e){e.sequenceNumber<=r&&null===i.get(e.targetId)&&(o.hc.delete(t),u.push(o.Ec(n,e.targetId)),s++)}),Ju.$e(u).next(function(){return s})},Tc.prototype.Tc=function(t){return Ju.resolve(this.targetCount)},Tc.prototype.hr=function(t,e){return e=this.hc.get(e)||null,Ju.resolve(e)},Tc.prototype.tr=function(t,e,n){return this.lc.vo(e,n),Ju.resolve()},Tc.prototype.Zi=function(e,t,n){this.lc.So(t,n);var r=this.persistence.rr,i=[];return r&&t.forEach(function(t){i.push(r.Ju(e,t))}),Ju.$e(i)},Tc.prototype.Ec=function(t,e){return this.lc.Do(e),Ju.resolve()},Tc.prototype.ar=function(t,e){return e=this.lc.No(e),Ju.resolve(e)},Tc.prototype.xo=function(t,e){return Ju.resolve(this.lc.xo(e))},Tc),uc=(Ac.prototype.start=function(){return Promise.resolve()},Ac.prototype.Xo=function(){return this.Rc=!1,Promise.resolve()},Object.defineProperty(Ac.prototype,"yc",{get:function(){return this.Rc},enumerable:!1,configurable:!0}),Ac.prototype.Vc=function(){},Ac.prototype.gc=function(){},Ac.prototype.Li=function(){return this.ti},Ac.prototype.Ni=function(t){var e=this.Ic[t.Ds()];return e||(e=new rc(this.ti,this.rr),this.Ic[t.Ds()]=e),e},Ac.prototype.ki=function(){return this.Oi},Ac.prototype.$i=function(){return this.Xs},Ac.prototype.runTransaction=function(t,e,n){var r=this;Cr("MemoryPersistence","Starting transaction:",t);var i=new ac(this.Ac.next());return this.rr.vc(),n(i).next(function(t){return r.rr.bc(i).next(function(){return t})}).Ne().then(function(t){return i.Cc(),t})},Ac.prototype.Sc=function(e,n){return Ju.Oe(Object.values(this.Ic).map(function(t){return function(){return t.xo(e,n)}}))},Ac),ac=(Ic.prototype.Fc=function(t){this.Dc.push(t)},Ic.prototype.Cc=function(){this.Dc.forEach(function(t){return t()})},n(Ec,tc=Ic),Ec),hc=(bc.$c=function(t){return new bc(t)},Object.defineProperty(bc.prototype,"Oc",{get:function(){if(this.xc)return this.xc;throw Mr()},enumerable:!1,configurable:!0}),bc.prototype.po=function(t,e,n){return this.Nc.po(n,e),this.Oc.delete(n.toString()),Ju.resolve()},bc.prototype.bo=function(t,e,n){return this.Nc.bo(n,e),this.Oc.add(n.toString()),Ju.resolve()},bc.prototype.Ju=function(t,e){return this.Oc.add(e.toString()),Ju.resolve()},bc.prototype.removeTarget=function(t,e){var n=this;this.Nc.Do(e.targetId).forEach(function(t){return n.Oc.add(t.toString())});var r=this.persistence.ki();return r.ar(t,e.targetId).next(function(t){t.forEach(function(t){return n.Oc.add(t.toString())})}).next(function(){return r.wc(t,e)})},bc.prototype.vc=function(){this.xc=new Set},bc.prototype.bc=function(n){var r=this,i=this.persistence.$i().Gi();return Ju.forEach(this.Oc,function(t){var e=di.H(t);return r.kc(n,e).next(function(t){t||i.sr(e)})}).next(function(){return r.xc=null,i.apply(n)})},bc.prototype.ir=function(t,e){var n=this;return this.kc(t,e).next(function(t){t?n.Oc.delete(e.toString()):n.Oc.add(e.toString())})},bc.prototype.Pc=function(t){return 0},bc.prototype.kc=function(t,e){var n=this;return Ju.Oe([function(){return Ju.resolve(n.Nc.xo(e))},function(){return n.persistence.ki().xo(t,e)},function(){return n.persistence.Sc(t,e)}])},bc),cc=(wc.prototype.Fr=function(t){this.qc=t},wc.prototype.vr=function(t){this.Uc=t},wc.prototype.onMessage=function(t){this.Bc=t},wc.prototype.close=function(){this.Lc()},wc.prototype.send=function(t){this.Mc(t)},wc.prototype.jc=function(){this.qc()},wc.prototype.Qc=function(t){this.Uc(t)},wc.prototype.Wc=function(t){this.Bc(t)},wc),lc={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},fc=(mc.prototype.Kr=function(e,t,n,r){var i=this.Hc(e,t);return Cr("RestConnection","Sending: ",i,n),t={},this.Yc(t,r),this.Jc(e,i,t,n).then(function(t){return Cr("RestConnection","Received: ",t),t},function(t){throw jr("RestConnection",e+" failed with error: ",t,"url: ",i,"request:",n),t})},mc.prototype.Gr=function(t,e,n,r){return this.Kr(t,e,n,r)},mc.prototype.Yc=function(t,e){if(t["X-Goog-Api-Client"]="gl-js/ fire/8.0.2-20201010222127",t["Content-Type"]="text/plain",e)for(var n in e.xs)e.xs.hasOwnProperty(n)&&(t[n]=e.xs[n])},mc.prototype.Hc=function(t,e){return t=lc[t],this.Gc+"/v1/"+e+":"+t},n(gc,Jh=mc),gc.prototype.Jc=function(o,e,s,u){return new Promise(function(n,r){var i=new yr;i.listenOnce(pr.COMPLETE,function(){try{switch(i.getLastErrorCode()){case fr.NO_ERROR:var t=i.getResponseJson();Cr("Connection","XHR received:",JSON.stringify(t)),n(t);break;case fr.TIMEOUT:Cr("Connection",'RPC "'+o+'" timed out'),r(new Dr(kr.DEADLINE_EXCEEDED,"Request time out"));break;case fr.HTTP_ERROR:var e=i.getStatus();Cr("Connection",'RPC "'+o+'" failed with status:',e,"response text:",i.getResponseText()),0<e?(t=i.getResponseJson().error)&&t.status&&t.message?(e=t.status.toLowerCase().replace("_","-"),e=0<=Object.values(kr).indexOf(e)?e:kr.UNKNOWN,r(new Dr(e,t.message))):r(new Dr(kr.UNKNOWN,"Server responded with status "+i.getStatus())):r(new Dr(kr.UNAVAILABLE,"Connection failed."));break;default:Mr()}}finally{Cr("Connection",'RPC "'+o+'" completed.')}});var t=JSON.stringify(u);i.send(e,"POST",t,s,15)})},gc.prototype.Nr=function(t,e){var n,r=[this.Gc,"/","google.firestore.v1.Firestore","/",t,"/channel"],i=new ur,t={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this._.projectId+"/databases/"+this._.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.m};this.Yc(t.initMessageHeaders,e),"undefined"!=typeof window&&(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(d())||"object"==typeof navigator&&"ReactNative"===navigator.product||0<=d().indexOf("Electron/")||0<=(n=d()).indexOf("MSIE ")||0<=n.indexOf("Trident/")||0<=d().indexOf("MSAppHost/")||"object"==typeof(n="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0)&&void 0!==n.id||(t.httpHeadersOverwriteParam="$httpHeaders"),Cr("Connection","Creating WebChannel: "+(r=r.join("")),t);var o=i.createWebChannel(r,t),s=!1,u=!1,a=new cc({Mc:function(t){u?Cr("Connection","Not sending because WebChannel is closed:",t):(s||(Cr("Connection","Opening WebChannel transport."),o.open(),s=!0),Cr("Connection","WebChannel sending:",t),o.send(t))},Lc:function(){return o.close()}});return(t=function(t,e){o.listen(t,function(t){try{e(t)}catch(t){setTimeout(function(){throw t},0)}})})(dr.EventType.OPEN,function(){u||Cr("Connection","WebChannel transport opened.")}),t(dr.EventType.CLOSE,function(){u||(u=!0,Cr("Connection","WebChannel transport closed"),a.Qc())}),t(dr.EventType.ERROR,function(t){u||(u=!0,jr("Connection","WebChannel transport errored:",t),a.Qc(new Dr(kr.UNAVAILABLE,"The operation could not be completed")))}),t(dr.EventType.MESSAGE,function(t){var e,n,r,i;u||(qr(!!(e=t.data[0])),(n=e.error||(null===(i=e[0])||void 0===i?void 0:i.error))?(Cr("Connection","WebChannel received error:",n),r=n.status,t=function(){var t=Di[r];if(void 0!==t)return Vi(t)}(),i=n.message,void 0===t&&(t=kr.INTERNAL,i="Unknown error status: "+r+" with message "+n.message),u=!0,a.Qc(new Dr(t,i)),o.close()):(Cr("Connection","WebChannel received:",e),a.Wc(e)))}),setTimeout(function(){a.jc()},0),a},gc),pc=(vc.prototype._o=function(t){this.eh.push(t)},vc.prototype.Xo=function(){window.removeEventListener("online",this.Xc),window.removeEventListener("offline",this.th)},vc.prototype.sh=function(){window.addEventListener("online",this.Xc),window.addEventListener("offline",this.th)},vc.prototype.Zc=function(){Cr("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var t=0,e=this.eh;t<e.length;t++)(0,e[t])(0)},vc.prototype.nh=function(){Cr("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var t=0,e=this.eh;t<e.length;t++)(0,e[t])(1)},vc.ih=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},vc),dc=(yc.prototype._o=function(t){},yc.prototype.Xo=function(){},yc);function yc(){}function vc(){var t=this;this.Xc=function(){return t.Zc()},this.th=function(){return t.nh()},this.eh=[],this.sh()}function gc(t){var e=this;return(e=Jh.call(this,t)||this).forceLongPolling=t.forceLongPolling,e.m=t.m,e}function mc(t){this.Kc=t,this._=t._;var e=t.ssl?"https":"http";this.Gc=e+"://"+t.host,this.zc="projects/"+this._.projectId+"/databases/"+this._.database+"/documents"}function wc(t){this.Mc=t.Mc,this.Lc=t.Lc}function bc(t){this.persistence=t,this.Nc=new Sh,this.xc=null}function Ec(t){var e=this;return(e=tc.call(this)||this).nr=t,e}function Ic(){this.Dc=[]}function Ac(t){var e=this;this.Ic={},this.Ac=new Oa(0),this.Rc=!1,this.Rc=!0,this.rr=t(this),this.Oi=new sc(this),this.ti=new ja,this.Xs=(t=this.ti,new ic(t,function(t){return e.rr.Pc(t)}))}function Tc(t){this.persistence=t,this.hc=new ai(Si,Oi),this.lastRemoteSnapshotVersion=ci.min(),this.highestTargetId=0,this.ac=0,this.lc=new Sh,this.targetCount=0,this._c=Ma.vi()}function Nc(t){var e=this;return(e=ec.call(this)||this).cc=t,e}function Sc(){this.Mu=new ai(function(t){return t.toString()},function(t,e){return t.isEqual(e)}),this.sc=!1}function Oc(t,e){this.ti=t,this.Zu=e,this.docs=new Ci(di.S),this.size=0}function Pc(t,e){this.ti=t,this.rr=e,this.Zs=[],this.Qu=1,this.Wu=new Bi(Oh.Po)}function kc(){}function Dc(t){return new xo(t,!0)}var Rc=(jc.prototype.initialize=function(e){return y(this,void 0,void 0,function(){return v(this,function(t){switch(t.label){case 0:return this.Iu=this.rh(e),this.persistence=this.oh(e),[4,this.persistence.start()];case 1:return t.sent(),this.uh=this.hh(e),this.io=this.ah(e),[2]}})})},jc.prototype.hh=function(t){return null},jc.prototype.ah=function(t){return e=this.persistence,n=new nc,t=t.lh,new qa(e,n,t);var e,n},jc.prototype.oh=function(t){return new uc(hc.$c)},jc.prototype.rh=function(t){return new kh},jc.prototype.terminate=function(){return y(this,void 0,void 0,function(){return v(this,function(t){switch(t.label){case 0:return this.uh&&this.uh.stop(),[4,this.Iu.Xo()];case 1:return t.sent(),[4,this.persistence.Xo()];case 2:return t.sent(),[2]}})})},jc),Lc=(Uc.prototype.initialize=function(n,r){return y(this,void 0,void 0,function(){var e=this;return v(this,function(t){switch(t.label){case 0:return this.io?[3,2]:(this.io=n.io,this.Iu=n.Iu,this.ro=this._h(r),this.Eu=this.fh(r),this.Tu=this.dh(r),this.wh=this.mh(r,!n.synchronizeTabs),this.Iu.zr=function(t){return Gh(e.wh,t,1)},this.Eu.oo.Eh=function(i,o){return y(this,void 0,void 0,function(){var n,r;return v(this,function(t){switch(t.label){case 0:return(n=i).currentUser.isEqual(o)?[3,3]:(Cr("SyncEngine","User change. New user:",o.Ds()),[4,za(n.io,o)]);case 1:return r=t.sent(),n.currentUser=o,(e=n).Cu.forEach(function(t){t.forEach(function(t){t.reject(new Dr(kr.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),e.Cu.clear(),n.Iu.Yo(o,r.Wi,r.Ki),[4,$h(n,r.Qi)];case 2:t.sent(),t.label=3;case 3:return[2]}var e})})}.bind(null,this.wh),[4,function(n,r){return y(this,void 0,void 0,function(){var e;return v(this,function(t){switch(t.label){case 0:return e=n,r?(e.ho.delete(2),[4,hh(e)]):[3,2];case 1:return t.sent(),[3,5];case 2:return r?[3,4]:(e.ho.add(2),[4,ch(e)]);case 3:t.sent(),e.fo.set("Unknown"),t.label=4;case 4:t.label=5;case 5:return[2]}})})}(this.Eu,this.wh.Fu)]);case 1:t.sent(),t.label=2;case 2:return[2]}})})},Uc.prototype.dh=function(t){return new ha},Uc.prototype._h=function(t){var e=Dc(t.Kc._),n=(n=t.Kc,new fc(n));return t=t.credentials,new nh(t,n,e)},Uc.prototype.fh=function(t){var e=this;return new Ya(this.io,this.ro,t.ke,function(t){return Gh(e.wh,t,0)},t=new(pc.ih()?pc:dc))},Uc.prototype.mh=function(t,e){return n=this.io,r=this.Eu,i=this.Tu,o=this.Iu,s=t.lh,t=t.Au,e=e,t=new Ch(n,r,i,o,s,t),e&&(t.Du=!0),t;var n,r,i,o,s},Uc.prototype.terminate=function(){return function(n){return y(this,void 0,void 0,function(){var e;return v(this,function(t){switch(t.label){case 0:return e=n,Cr("RemoteStore","RemoteStore shutting down."),e.ho.add(5),[4,ch(e)];case 1:return t.sent(),e.lo.Xo(),e.fo.set("Unknown"),[2]}})})}(this.Eu)},Uc),_c=(Cc.prototype.next=function(t){this.observer.next&&this.Th(this.observer.next,t)},Cc.prototype.error=function(t){this.observer.error?this.Th(this.observer.error,t):console.error("Uncaught Error in snapshot listener:",t)},Cc.prototype.Ih=function(){this.muted=!0},Cc.prototype.Th=function(t,e){var n=this;this.muted||setTimeout(function(){n.muted||t(e)},0)},Cc),Vc=function(t){this.Ah=t};function Cc(t){this.observer=t,this.muted=!1}function Uc(){}function jc(){this.synchronizeTabs=!1}function xc(t,e,n){if(!n)throw new Dr(kr.INVALID_ARGUMENT,"Function "+t+"() cannot be called with an empty "+e+".")}function Mc(t,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Dr(kr.INVALID_ARGUMENT,"Invalid options passed to function "+t+'(): You cannot specify both "merge" and "mergeFields".');return e}function qc(t,e,n,r){if(!0===e&&!0===r)throw new Dr(kr.INVALID_ARGUMENT,t+" and "+n+" cannot be used together.")}function Fc(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return 20<e.length&&(e=e.substring(0,20)+"..."),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"!=typeof e)return"function"==typeof e?"a function":Mr();if(e instanceof Array)return"an array";var t=function(){if(e.constructor){var t=/function\s+([^\s(]+)\s*\(/.exec(e.constructor.toString());if(t&&1<t.length)return t[1]}return null}();return t?"a custom "+t+" object":"an object"}function Bc(t,e){if(t instanceof Vc&&(t=t.Ah),t instanceof e)return t;if(e.name===t.constructor.name)throw new Dr(kr.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");throw t=Fc(t),new Dr(kr.INVALID_ARGUMENT,"Expected type '"+e.name+"', but it was: "+t)}function Wc(t,e){if(e<=0)throw new Dr(kr.INVALID_ARGUMENT,"Function "+t+"() requires a positive number, but it was: "+e+".")}var Gc,zc=function(t){this.Rh=t},Hc=(n(Qc,Gc=zc),Qc.prototype.Ph=function(t){if(2!==t.yh)throw 1===t.yh?t.Vh(this.Rh+"() can only appear at the top level of your update data"):t.Vh(this.Rh+"() cannot be used with set() unless you pass {merge:true}");return t.Wn.push(t.path),null},Qc.prototype.isEqual=function(t){return t instanceof Qc},Qc);function Qc(){return null!==Gc&&Gc.apply(this,arguments)||this}function Xc(t,e,n){return new Vl({yh:3,gh:e.settings.gh,methodName:t.Rh,ph:n},e._,e.serializer,e.ignoreUndefinedProperties)}var Kc,Yc,Zc,$c,Jc,tl=(n(gl,Jc=zc),gl.prototype.Ph=function(t){return new ms(t.path,new is)},gl.prototype.isEqual=function(t){return t instanceof gl},gl),el=(n(vl,$c=zc),vl.prototype.Ph=function(t){var e=Xc(this,t,!0),n=this.bh.map(function(t){return Bl(t,e)}),n=new os(n);return new ms(t.path,n)},vl.prototype.isEqual=function(t){return this===t},vl),nl=(n(yl,Zc=zc),yl.prototype.Ph=function(t){var e=Xc(this,t,!0),n=this.bh.map(function(t){return Bl(t,e)}),n=new cs(n);return new ms(t.path,n)},yl.prototype.isEqual=function(t){return this===t},yl),rl=(n(dl,Yc=zc),dl.prototype.Ph=function(t){var e=new ds(t.serializer,Fo(t.serializer,this.Ch));return new ms(t.path,e)},dl.prototype.isEqual=function(t){return this===t},dl),il=(Object.defineProperty(pl.prototype,"latitude",{get:function(){return this.Sh},enumerable:!1,configurable:!0}),Object.defineProperty(pl.prototype,"longitude",{get:function(){return this.Dh},enumerable:!1,configurable:!0}),pl.prototype.isEqual=function(t){return this.Sh===t.Sh&&this.Dh===t.Dh},pl.prototype.toJSON=function(){return{latitude:this.Sh,longitude:this.Dh}},pl.prototype.V=function(t){return Wr(this.Sh,t.Sh)||Wr(this.Dh,t.Dh)},pl),ol=new Map,sl=(fl.prototype.isEqual=function(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties},fl),ul=(ll.prototype.$h=function(t){switch(Eo(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Po(t.integerValue||t.doubleValue);case 3:return this.Oh(t.timestampValue);case 4:return this.kh(t);case 5:return t.stringValue;case 6:return this.xh(ko(t.bytesValue));case 7:return this.Mh(t.referenceValue);case 8:return this.Lh(t.geoPointValue);case 9:return this.qh(t.arrayValue);case 10:return this.Uh(t.mapValue);default:throw Mr()}},ll.prototype.Uh=function(t){var n=this,r={};return ii(t.fields||{},function(t,e){r[t]=n.$h(e)}),r},ll.prototype.Lh=function(t){return new il(Po(t.latitude),Po(t.longitude))},ll.prototype.qh=function(t){var e=this;return(t.values||[]).map(function(t){return e.$h(t)})},ll.prototype.kh=function(t){switch(this.Fh){case"previous":var e=function t(e){return mo(e=e.mapValue.fields.__previous_value__)?t(e):e}(t);return null==e?null:this.$h(e);case"estimate":return this.Oh(wo(t));default:return null}},ll.prototype.Oh=function(t){return t=Oo(t),new hi(t.seconds,t.nanos)},ll.prototype.Mh=function(t){var e=li.U(t);return qr(ts(e)),t=new ti(e.get(1),e.get(3)),e=new di(e.F(5)),t.isEqual(this._)||Ur("Document "+e+" contains a document reference within a different database ("+t.projectId+"/"+t.database+") which is not supported. It will be treated as a reference in the current database ("+this._.projectId+"/"+this._.database+") instead."),this.Nh(e)},ll),we=(Object.defineProperty(cl.prototype,"id",{get:function(){return this.jh.path.O()},enumerable:!1,configurable:!0}),Object.defineProperty(cl.prototype,"ref",{get:function(){return new El(this.Bh,this.Wh,this.jh)},enumerable:!1,configurable:!0}),cl.prototype.exists=function(){return null!==this.Qh},cl.prototype.data=function(){var e=this;if(this.Qh){if(this.Wh){var t=new al(this.Bh,this.jh,this.Qh,null);return this.Wh.fromFirestore(t)}return new ul(this.Bh.Kh,"none",function(t){return new El(e.Bh,null,t)},function(t){return new Qr(t)}).$h(this.Qh.re())}},cl.prototype.get=function(t){var e=this;if(this.Qh&&null!==(t=this.Qh.data().field(ml("DocumentSnapshot.get",t))))return new ul(this.Bh.Kh,"none",function(t){return new El(e.Bh,e.Wh,t)},function(t){return new Qr(t)}).$h(t)},cl),al=(n(hl,Kc=we),hl.prototype.data=function(){return Kc.prototype.data.call(this)},hl);function hl(){return null!==Kc&&Kc.apply(this,arguments)||this}function cl(t,e,n,r){this.Bh=t,this.jh=e,this.Qh=n,this.Wh=r}function ll(t,e,n,r){this._=t,this.Fh=e,this.Nh=n,this.xh=r}function fl(t){var e;if(void 0===t.host){if(void 0!==t.ssl)throw new Dr(kr.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(e=t.ssl)||void 0===e||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new Dr(kr.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,qc("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}function pl(t,e){if(!isFinite(t)||t<-90||90<t)throw new Dr(kr.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||180<e)throw new Dr(kr.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this.Sh=t,this.Dh=e}function dl(t,e){var n=this;return(n=Yc.call(this,t)||this).Ch=e,n}function yl(t,e){var n=this;return(n=Zc.call(this,t)||this).bh=e,n}function vl(t,e){var n=this;return(n=$c.call(this,t)||this).bh=e,n}function gl(){return null!==Jc&&Jc.apply(this,arguments)||this}function ml(t,e){return"string"==typeof e?Xl(t,e):e.Gh}var wl,bl=(Sl.prototype.isEqual=function(t){return this.Gh.isEqual(t.Gh)},Sl),El=(Object.defineProperty(Nl.prototype,"zh",{get:function(){return this.jh.path},enumerable:!1,configurable:!0}),Object.defineProperty(Nl.prototype,"id",{get:function(){return this.jh.path.O()},enumerable:!1,configurable:!0}),Object.defineProperty(Nl.prototype,"path",{get:function(){return this.jh.path.q()},enumerable:!1,configurable:!0}),Object.defineProperty(Nl.prototype,"parent",{get:function(){return new Il(this.firestore,this.Wh,this.jh.path.N())},enumerable:!1,configurable:!0}),Nl.prototype.withConverter=function(t){return new Nl(this.firestore,t,this.jh)},Nl),Il=(Tl.prototype.withConverter=function(t){return new Tl(this.firestore,t,this.Hh)},n(Al,wl=Tl),Object.defineProperty(Al.prototype,"id",{get:function(){return this.Hh.path.O()},enumerable:!1,configurable:!0}),Object.defineProperty(Al.prototype,"path",{get:function(){return this.Hh.path.q()},enumerable:!1,configurable:!0}),Object.defineProperty(Al.prototype,"parent",{get:function(){var t=this.zh.N();return t.P()?null:new El(this.firestore,null,new di(t))},enumerable:!1,configurable:!0}),Al.prototype.withConverter=function(t){return new Al(this.firestore,t,this.zh)},Al);function Al(t,e,n){var r=this;return(r=wl.call(this,t,e,ou(n))||this).firestore=t,r.zh=n,r.type="collection",r}function Tl(t,e,n){this.Wh=e,this.Hh=n,this.type="query",this.firestore=t}function Nl(t,e,n){this.Wh=e,this.jh=n,this.type="document",this.firestore=t}function Sl(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=0;n<t.length;++n)if(0===t[n].length)throw new Dr(kr.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this.Gh=new pi(t)}function Ol(t){var e=t.Yh(),n=Dc(t.Kh);return new Cl(t.Kh,!!e.ignoreUndefinedProperties,n)}var Pl=/^__.*__$/,kl=(Ll.prototype.Jh=function(t,e){var n=[];return null!==this.Wn?n.push(new Rs(t,this.data,this.Wn,e)):n.push(new Ds(t,this.data,e)),0<this.fieldTransforms.length&&n.push(new Us(t,this.fieldTransforms)),n},Ll),Dl=(Rl.prototype.Jh=function(t,e){return e=[new Rs(t,this.data,this.Wn,e)],0<this.fieldTransforms.length&&e.push(new Us(t,this.fieldTransforms)),e},Rl);function Rl(t,e,n){this.data=t,this.Wn=e,this.fieldTransforms=n}function Ll(t,e,n){this.data=t,this.Wn=e,this.fieldTransforms=n}function _l(t){switch(t){case 0:case 2:case 1:return 1;case 3:case 4:return;default:throw Mr()}}var Vl=(Object.defineProperty(jl.prototype,"path",{get:function(){return this.settings.path},enumerable:!1,configurable:!0}),Object.defineProperty(jl.prototype,"yh",{get:function(){return this.settings.yh},enumerable:!1,configurable:!0}),jl.prototype.Zh=function(t){return new jl(Object.assign(Object.assign({},this.settings),t),this._,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.Wn)},jl.prototype.ta=function(t){var e=null===(e=this.path)||void 0===e?void 0:e.child(t);return(e=this.Zh({path:e,ph:!1})).na(t),e},jl.prototype.ea=function(t){var e,t=null===(e=this.path)||void 0===e?void 0:e.child(t);return(t=this.Zh({path:t,ph:!1})).Xh(),t},jl.prototype.sa=function(t){return this.Zh({path:void 0,ph:!0})},jl.prototype.Vh=function(t){return Kl(t,this.settings.methodName,this.settings.ia||!1,this.path,this.settings.gh)},jl.prototype.contains=function(e){return void 0!==this.Wn.find(function(t){return e.k(t)})||void 0!==this.fieldTransforms.find(function(t){return e.k(t.field)})},jl.prototype.Xh=function(){if(this.path)for(var t=0;t<this.path.length;t++)this.na(this.path.get(t))},jl.prototype.na=function(t){if(0===t.length)throw this.Vh("Document fields must not be empty");if(_l(this.yh)&&Pl.test(t))throw this.Vh('Document fields cannot begin and end with "__"')},jl),Cl=(Ul.prototype.ra=function(t,e,n,r){return void 0===r&&(r=!1),new Vl({yh:t,methodName:e,gh:n,path:pi.B(),ph:!1,ia:r},this._,this.serializer,this.ignoreUndefinedProperties)},Ul);function Ul(t,e,n){this._=t,this.ignoreUndefinedProperties=e,this.serializer=n||Dc(t)}function jl(t,e,n,r,i,o){this.settings=t,this._=e,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===i&&this.Xh(),this.fieldTransforms=i||[],this.Wn=o||[]}function xl(t,e,n,r,i,o){void 0===o&&(o={});var s=t.ra(o.merge||o.mergeFields?2:0,e,n,i);zl("Data must be an object, but it was:",s,r);var u,a,r=Wl(r,s);if(o.merge)u=new ws(s.Wn),a=s.fieldTransforms;else if(o.mergeFields){for(var h=[],c=0,l=o.mergeFields;c<l.length;c++){var f=Hl(e,l[c],n);if(!s.contains(f))throw new Dr(kr.INVALID_ARGUMENT,"Field '"+f+"' is specified in your field mask but missing from your input data.");Yl(h,f)||h.push(f)}u=new ws(h),a=s.fieldTransforms.filter(function(t){return u.Yn(t.field)})}else u=null,a=s.fieldTransforms;return new kl(new Ws(r),u,a)}function Ml(t,r,i,e){var o=t.ra(1,r,i);zl("Data must be an object, but it was:",o,e);var s=[],u=new Gs;return ii(e,function(t,e){var n=Xl(r,t,i);e instanceof Vc&&(e=e.Ah),t=o.ea(n),e instanceof Hc?s.push(n):null!=(t=Bl(e,t))&&(s.push(n),u.set(n,t))}),e=new ws(s),new Dl(u.Zn(),e,o.fieldTransforms)}function ql(t,e,n,r,i,o){var s=t.ra(1,e,n),u=[Hl(e,r,n)],a=[i];if(o.length%2!=0)throw new Dr(kr.INVALID_ARGUMENT,"Function "+e+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var h=0;h<o.length;h+=2)u.push(Hl(e,o[h])),a.push(o[h+1]);for(var c,l,f,p=[],d=new Gs,y=u.length-1;0<=y;--y)Yl(p,u[y])||(c=u[y],(l=a[y])instanceof Vc&&(l=l.Ah),f=s.ea(c),l instanceof Hc?p.push(c):null!=(f=Bl(l,f))&&(p.push(c),d.set(c,f)));return i=new ws(p),new Dl(d.Zn(),i,s.fieldTransforms)}function Fl(t,e,n,r){return void 0===r&&(r=!1),Bl(n,t.ra(r?4:3,e))}function Bl(s,t){if(s instanceof Vc&&(s=s.Ah),Gl(s))return zl("Unsupported field value:",t,s),Wl(s,t);if(s instanceof zc)return function(t,e){if(!_l(e.yh))throw e.Vh(t.Rh+"() can only be used with update() and set()");if(!e.path)throw e.Vh(t.Rh+"() is not currently supported inside arrays");(t=t.Ph(e))&&e.fieldTransforms.push(t)}(s,t),null;if(t.path&&t.Wn.push(t.path),s instanceof Array){if(t.settings.ph&&4!==t.yh)throw t.Vh("Nested arrays are not supported");return function(t){for(var e=[],n=0,r=0,i=s;r<i.length;r++){var o=Bl(i[r],t.sa(n));null==o&&(o={nullValue:"NULL_VALUE"}),e.push(o),n++}return{arrayValue:{values:e}}}(t)}return function(t,e){if(t instanceof Vc&&(t=t.Ah),null===t)return{nullValue:"NULL_VALUE"};if("number"==typeof t)return Fo(e.serializer,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){var n=hi.fromDate(t);return{timestampValue:Bo(e.serializer,n)}}if(t instanceof hi){var r=new hi(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:Bo(e.serializer,r)}}if(t instanceof il)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Qr)return{bytesValue:Wo(e.serializer,t.l)};if(t instanceof El){if(n=e._,!(r=t.firestore.Kh).isEqual(n))throw e.Vh("Document reference is for database "+r.projectId+"/"+r.database+" but should be for database "+n.projectId+"/"+n.database);return{referenceValue:zo(t.firestore.Kh||e._,t.jh.path)}}if(void 0===t&&e.ignoreUndefinedProperties)return null;throw e.Vh("Unsupported field value: "+Fc(t))}(s,t)}function Wl(t,n){var r={};return oi(t)?n.path&&0<n.path.length&&n.Wn.push(n.path):ii(t,function(t,e){null!=(e=Bl(e,n.ta(t)))&&(r[t]=e)}),{mapValue:{fields:r}}}function Gl(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof hi||t instanceof il||t instanceof Qr||t instanceof El||t instanceof zc)}function zl(t,e,n){if(!Gl(n)||"object"!=typeof(r=n)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r))throw"an object"===(n=Fc(n))?e.Vh(t+" a custom object"):e.Vh(t+" "+n);var r}function Hl(t,e,n){if(e instanceof Vc&&(e=e.Ah),e instanceof bl)return e.Gh;if("string"==typeof e)return Xl(t,e);throw Kl("Field path arguments must be of type string or FieldPath.",t,!1,void 0,n)}var Ql=new RegExp("[~\\*/\\[\\]]");function Xl(e,n,r){if(0<=n.search(Ql))throw Kl("Invalid field path ("+n+"). Paths must not contain '~', '*', '/', '[', or ']'",e,!1,void 0,r);try{return(new(bl.bind.apply(bl,o([void 0],n.split("."))))).Gh}catch(t){throw Kl("Invalid field path ("+n+"). Paths must not be empty, begin with '.', end with '.', or contain '..'",e,!1,void 0,r)}}function Kl(t,e,n,r,i){var o=r&&!r.P(),s=void 0!==i,e="Function "+e+"() called with invalid data";return n&&(e+=" (via `toFirestore()`)"),n="",(o||s)&&(n+=" (found",o&&(n+=" in field "+r),s&&(n+=" in document "+i),n+=")"),new Dr(kr.INVALID_ARGUMENT,(e+=". ")+t+n)}function Yl(t,e){return t.some(function(t){return t.isEqual(e)})}var Zl=(nf.prototype.aa=function(r){return y(this,void 0,void 0,function(){var e,n=this;return v(this,function(t){switch(t.label){case 0:if(this.la(),0<this.mutations.length)throw new Dr(kr.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,function(s,u){return y(this,void 0,void 0,function(){var r,e,n,i,o;return v(this,function(t){switch(t.label){case 0:return e=Ko((r=s).serializer)+"/documents",n={documents:u.map(function(t){return Ho(r.serializer,t)})},[4,r.Gr("BatchGetDocuments",e,n)];case 1:return n=t.sent(),i=new Map,n.forEach(function(t){var e,n,t=(n=r.serializer,"found"in t?function(t,e){qr(!!e.found),e.found.name,e.found.updateTime;var n=Qo(t,e.found.name),t=Go(e.found.updateTime),e=new Ws({mapValue:{fields:e.found.fields}});return new $s(n,t,e,{})}(n,t):"missing"in t?(e=n,qr(!!(n=t).missing),qr(!!n.readTime),e=Qo(e,n.missing),n=Go(n.readTime),new Js(e,n)):Mr());i.set(t.key.toString(),t)}),o=[],[2,(u.forEach(function(t){qr(!!(t=i.get(t.toString()))),o.push(t)}),o)]}})})}(this.ro,r)];case 1:return[2,((e=t.sent()).forEach(function(t){t instanceof Js||t instanceof $s?n._a(t):Mr()}),e)]}})})},nf.prototype.set=function(t,e){this.write(e.Jh(t,this.zn(t))),this.ha.add(t.toString())},nf.prototype.update=function(t,e){try{this.write(e.Jh(t,this.fa(t)))}catch(t){this.ca=t}this.ha.add(t.toString())},nf.prototype.delete=function(t){this.write([new Fs(t,this.zn(t))]),this.ha.add(t.toString())},nf.prototype.commit=function(){return y(this,void 0,void 0,function(){var e,n=this;return v(this,function(t){switch(t.label){case 0:if(this.la(),this.ca)throw this.ca;return e=this.oa,this.mutations.forEach(function(t){e.delete(t.key.toString())}),e.forEach(function(t,e){e=di.H(e),n.mutations.push(new Bs(e,n.zn(e)))}),[4,function(i,o){return y(this,void 0,void 0,function(){var e,n,r;return v(this,function(t){switch(t.label){case 0:return n=Ko((e=i).serializer)+"/documents",r={writes:o.map(function(t){return Zo(e.serializer,t)})},[4,e.Kr("Commit",n,r)];case 1:return t.sent(),[2]}})})}(this.ro,this.mutations)];case 1:return t.sent(),this.ua=!0,[2]}})})},nf.prototype._a=function(t){var e;if(t instanceof $s)e=t.version;else{if(!(t instanceof Js))throw Mr();e=ci.min()}var n=this.oa.get(t.key.toString());if(n){if(!e.isEqual(n))throw new Dr(kr.ABORTED,"Document version changed between two reads.")}else this.oa.set(t.key.toString(),e)},nf.prototype.zn=function(t){var e=this.oa.get(t.toString());return!this.ha.has(t.toString())&&e?Is.updateTime(e):Is.Jn()},nf.prototype.fa=function(t){var e=this.oa.get(t.toString());if(this.ha.has(t.toString())||!e)return Is.exists(!0);if(e.isEqual(ci.min()))throw new Dr(kr.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Is.updateTime(e)},nf.prototype.write=function(t){this.la(),this.mutations=this.mutations.concat(t)},nf.prototype.la=function(){},nf),$l=(ef.prototype.run=function(){this.wa()},ef.prototype.wa=function(){var t=this;this.Xe.Pe(function(){return y(t,void 0,void 0,function(){var e,n,r=this;return v(this,function(t){return e=new Zl(this.ro),(n=this.ma(e))&&n.then(function(t){r.ke.Qe(function(){return e.commit().then(function(){r.qe.resolve(t)}).catch(function(t){r.Ea(t)})})}).catch(function(t){r.Ea(t)}),[2]})})})},ef.prototype.ma=function(t){try{var e=this.updateFunction(t);return!Ii(e)&&e.catch&&e.then?e:(this.qe.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.qe.reject(t),null}},ef.prototype.Ea=function(t){var e=this;0<this.da&&this.Ta(t)?(--this.da,this.ke.Qe(function(){return e.wa(),Promise.resolve()})):this.qe.reject(t)},ef.prototype.Ta=function(t){return"FirebaseError"===t.name&&("aborted"===(t=t.code)||"failed-precondition"===t||!_i(t))},ef),Jl=(tf.prototype.getConfiguration=function(){return y(this,void 0,void 0,function(){return v(this,function(t){switch(t.label){case 0:return[4,this.qs.promise];case 1:return[2,(t.sent(),{ke:this.ke,Kc:this.Kc,clientId:this.clientId,credentials:this.credentials,lh:this.user,Au:100})]}})})},tf.prototype.Aa=function(t){var e=this;this.Ia=t,this.qs.promise.then(function(){return e.Ia(e.user)})},tf.prototype.Ra=function(){if(this.ke.ts)throw new Dr(kr.FAILED_PRECONDITION,"The client has already been terminated.")},tf.prototype.terminate=function(){var t=this;this.ke.rs();var n=new Zu;return this.ke.ns(function(){return y(t,void 0,void 0,function(){var e;return v(this,function(t){switch(t.label){case 0:return t.trys.push([0,5,,6]),this.Pa?[4,this.Pa.terminate()]:[3,2];case 1:t.sent(),t.label=2;case 2:return this.ya?[4,this.ya.terminate()]:[3,4];case 3:t.sent(),t.label=4;case 4:return this.credentials.Ms(),n.resolve(),[3,6];case 5:return e=aa(t.sent(),"Failed to shutdown persistence"),n.reject(e),[3,6];case 6:return[2]}})})}),n.promise},tf);function tf(t,e,n){var r=this;this.credentials=t,this.ke=e,this.Kc=n,this.user=ya.UNAUTHENTICATED,this.clientId=Fr.t(),this.Ia=function(){},this.qs=new Zu,this.credentials.ks(function(t){Cr("FirestoreClient","Received user=",t.uid),r.user.isEqual(t)||(r.user=t,r.Ia(t)),r.qs.resolve()})}function ef(t,e,n,r){this.ke=t,this.ro=e,this.updateFunction=n,this.qe=r,this.da=5,this.Xe=new $u(this.ke,"transaction_retry")}function nf(t){this.ro=t,this.oa=new Map,this.mutations=[],this.ua=!1,this.ca=null,this.ha=new Set}function rf(e){return y(this,void 0,void 0,function(){return v(this,function(t){switch(t.label){case 0:return e.ya?[3,2]:(Cr("FirestoreClient","Using default OfflineComponentProvider"),[4,function(r,i){return y(this,void 0,void 0,function(){var e,n=this;return v(this,function(t){switch(t.label){case 0:return r.ke.hs(),Cr("FirestoreClient","Initializing OfflineComponentProvider"),[4,r.getConfiguration()];case 1:return e=t.sent(),[4,i.initialize(e)];case 2:return t.sent(),r.Aa(function(e){return r.ke.os(function(){return y(n,void 0,void 0,function(){return v(this,function(t){switch(t.label){case 0:return[4,za(i.io,e)];case 1:return t.sent(),[2]}})})})}),i.persistence.Vc(function(){return r.terminate()}),r.ya=i,[2]}})})}(e,new Rc)]);case 1:t.sent(),t.label=2;case 2:return[2,e.ya]}})})}function of(e){return y(this,void 0,void 0,function(){return v(this,function(t){switch(t.label){case 0:return e.Pa?[3,2]:(Cr("FirestoreClient","Using default OnlineComponentProvider"),[4,function(r,i){return y(this,void 0,void 0,function(){var e,n;return v(this,function(t){switch(t.label){case 0:return r.ke.hs(),[4,rf(r)];case 1:return e=t.sent(),Cr("FirestoreClient","Initializing OnlineComponentProvider"),[4,r.getConfiguration()];case 2:return n=t.sent(),[4,i.initialize(e,n)];case 3:return t.sent(),r.Aa(function(t){return r.ke.os(function(){return function(r,i){return y(this,void 0,void 0,function(){var e,n;return v(this,function(t){switch(t.label){case 0:return(e=r).ke.hs(),Cr("RemoteStore","RemoteStore received new credentials"),n=gh(e),e.ho.add(3),[4,ch(e)];case 1:return t.sent(),n&&e.fo.set("Unknown"),[4,e.oo.Eh(i)];case 2:return t.sent(),e.ho.delete(3),[4,hh(e)];case 3:return t.sent(),[2]}})})}(i.Eu,t)})}),r.Pa=i,[2]}})})}(e,new Lc)]);case 1:t.sent(),t.label=2;case 2:return[2,e.Pa]}})})}function sf(t){return rf(t).then(function(t){return t.persistence})}function uf(t){return rf(t).then(function(t){return t.io})}function af(t){return of(t).then(function(t){return t.Eu})}function hf(t){return of(t).then(function(t){return t.wh})}function cf(r){return y(this,void 0,void 0,function(){var e,n;return v(this,function(t){switch(t.label){case 0:return[4,of(r)];case 1:return e=t.sent(),[2,((n=e.Tu).Is=function(h,c){return y(this,void 0,void 0,function(){var n,o,s,u,a;return v(this,function(t){switch(t.label){case 0:return(e=h).Eu.oo.mo=Wh.bind(null,e),e.Eu.oo.Bn=function(t,e){var n=t;if((t=n.pu.get(e))&&t.mu)return Yi().add(t.key);var r=Yi();if(!(e=n.yu.get(e)))return r;for(var i=0,o=e;i<o.length;i++)var s=o[i],s=n.Pu.get(s),r=r.Ot(s.view.iu);return r}.bind(null,e),e.Eu.oo.wo=function(o,s,u){return y(this,void 0,void 0,function(){var e,n,r,i;return v(this,function(t){switch(t.label){case 0:return(e=o).Iu.Qo(s,"rejected",u),i=e.pu.get(s),(n=i&&i.key)?(r=(r=new Ci(di.S)).ot(n,new Js(n,ci.min())),i=Yi().add(n),i=new eo(ci.min(),new Map,new Bi(Wr),r,i),[4,Wh(e,i)]):[3,2];case 1:return t.sent(),e.gu=e.gu.remove(n),e.pu.delete(s),Zh(e),[3,4];case 2:return[4,Qa(e.io,s,!1).then(function(){return Xh(e,s,u)}).catch(Ka)];case 3:t.sent(),t.label=4;case 4:return[2]}})})}.bind(null,e),e.Ru.$r=function(t,e){for(var n=t,r=!1,i=0,o=e;i<o.length;i++){var s=o[i],u=s.query;if(u=n.Es.get(u)){for(var a=0,h=u.listeners;a<h.length;a++)h[a].Rs(s)&&(r=!0);u.ws=s}}r&&pa(n)}.bind(null,e.Tu),e.Ru.Nu=function(t,e,n){var r=t;if(t=r.Es.get(e))for(var i=0,o=t.listeners;i<o.length;i++)o[i].onError(n);r.Es.delete(e)}.bind(null,e.Tu),(a=(n=e).Pu.get(c))?(o=a.targetId,n.Iu.jo(o),s=a.view.wu(),[3,4]):[3,1];case 1:return[4,(e=n.io,r=fu(c),(i=e).persistence.runTransaction("Allocate target","readwrite",function(e){var n;return i.Oi.hr(e,r).next(function(t){return t?(n=t,Ju.resolve(n)):i.Oi.xu(e).next(function(t){return n=new Ri(r,t,0,e.nr),i.Oi.$u(e,n).next(function(){return n})})})}).then(function(t){var e=i.Si.get(t.targetId);return(null===e||0<t.et.u(e.et))&&(i.Si=i.Si.ot(t.targetId,t),i.Di.set(r,t.targetId)),t}))];case 2:return u=t.sent(),a=n.Iu.jo(u.targetId),o=u.targetId,[4,function(i,o,s,u){return y(this,void 0,void 0,function(){var e,n,r;return v(this,function(t){switch(t.label){case 0:return i.Ou=function(t,e,n){return function(r,i,o,s){return y(this,void 0,void 0,function(){var e,n;return v(this,function(t){switch(t.label){case 0:return(e=i.view.ru(o)).cu?[4,Xa(r.io,i.query,!1).then(function(t){return t=t.documents,i.view.ru(t,e)})]:[3,2];case 1:e=t.sent(),t.label=2;case 2:return n=s&&s.zt.get(i.targetId),n=i.view.hu(e,r.Fu,n),[2,(Yh(r,i.targetId,n._u),n.snapshot)]}})})}(i,t,e,n)},[4,Xa(i.io,o,!0)];case 1:return n=t.sent(),r=new Lh(o,n.lr),e=r.ru(n.documents),n=no.Zt(s,u&&"Offline"!==i.onlineState),n=r.hu(e,i.Fu,n),Yh(i,s,n._u),r=new _h(o,s,r),i.Pu.set(o,r),i.yu.has(s)?i.yu.get(s).push(o):i.yu.set(s,[o]),[2,n.snapshot]}})})}(n,c,o,"current"===a)];case 3:s=t.sent(),n.Fu&&lh(n.Eu,u),t.label=4;case 4:return[2,s]}var r,i,e})})}.bind(null,e.wh),n.Ps=function(i,o){return y(this,void 0,void 0,function(){var e,n,r;return v(this,function(t){switch(t.label){case 0:return n=(e=i).Pu.get(o),1<(r=e.yu.get(n.targetId)).length?[2,(e.yu.set(n.targetId,r.filter(function(t){return!vu(t,o)})),void e.Pu.delete(o))]:e.Fu?(e.Iu.Wo(n.targetId),e.Iu.Ho(n.targetId)?[3,2]:[4,Qa(e.io,n.targetId,!1).then(function(){e.Iu.Go(n.targetId),fh(e.Eu,n.targetId),Xh(e,n.targetId)}).catch(Ka)]):[3,3];case 1:t.sent(),t.label=2;case 2:return[3,5];case 3:return Xh(e,n.targetId),[4,Qa(e.io,n.targetId,!0)];case 4:t.sent(),t.label=5;case 5:return[2]}})})}.bind(null,e.wh),n)]}})})}function lf(n,r){var t=this,i=new Zu;return n.ke.Qe(function(){return y(t,void 0,void 0,function(){var e;return v(this,function(t){switch(t.label){case 0:return e=Bh,[4,hf(n)];case 1:return[2,e.apply(void 0,[t.sent(),r,i])]}})})}),i.promise}function ff(n,r,i,o,s){var t=new _c({next:function(t){r.Qe(function(){return fa(n,u)});var e=t.docs.has(i);!e&&t.fromCache?s.reject(new Dr(kr.UNAVAILABLE,"Failed to get document because the client is offline.")):e&&t.fromCache&&o&&"server"===o.source?s.reject(new Dr(kr.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):s.resolve(t)},error:function(t){return s.reject(t)}}),u=new da(ou(i.path),t,{includeMetadataChanges:!0,Cs:!0});return la(n,u)}function pf(i){return function(){if("object"==typeof i&&null!==i)for(var t=i,e=0,n=["next","error","complete"];e<n.length;e++){var r=n[e];if(r in t&&"function"==typeof t[r])return 1}}()}var df,yf=(Object.defineProperty(gf.prototype,"app",{get:function(){if(!this.ba)throw new Dr(kr.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.ba},enumerable:!1,configurable:!0}),Object.defineProperty(gf.prototype,"Ca",{get:function(){return this.pa},enumerable:!1,configurable:!0}),Object.defineProperty(gf.prototype,"Sa",{get:function(){return void 0!==this.Da},enumerable:!1,configurable:!0}),gf.prototype.Fa=function(t){if(this.pa)throw new Dr(kr.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this.ga=new sl(t),void 0!==t.credentials&&(this.va=function(t){if(!t)return new wa;switch(t.type){case"gapi":var e=t.client;return qr(!("object"!=typeof e||null===e||!e.auth||!e.auth.getAuthHeaderValueForFirstParty)),new Ia(e,t.sessionIndex||"0");case"provider":return t.client;default:throw new Dr(kr.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(t.credentials))},gf.prototype.Na=function(){return this.ga},gf.prototype.Yh=function(){return this.pa=!0,this.ga},gf.prototype._delete=function(){return this.Da||(this.Da=this.xa()),this.Da},gf.prototype.xa=function(){return(t=ol.get(this))&&(Cr("ComponentProvider","Removing Datastore"),ol.delete(this),t.terminate()),Promise.resolve();var t},n(vf,df=gf),vf.prototype.xa=function(){return this.Oa||Uf(this),this.Oa.terminate()},vf);function vf(t,e){var n=this;return(n=df.call(this,t,e)||this).$a=new oa,n.Va="name"in t?t.name:"[DEFAULT]",n}function gf(t,e){this.Va="(lite)",this.ga=new sl({}),this.pa=!1,t instanceof ti?(this.Kh=t,this.va=new wa):(this.ba=t,this.Kh=function(t){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new Dr(kr.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ti(t.options.projectId)}(t),this.va=new ba(e))}var mf,wf,bf=(n(Nf,wf=we),Nf.prototype.exists=function(){return wf.prototype.exists.call(this)},Nf.prototype.data=function(t){var e=this;if(this.Qh){if(this.Wh){var n=new Ef(this.Bh,this.jh,this.Qh,this.metadata,null);return this.Wh.fromFirestore(n,t)}return new ul(this.ka.Kh,(null==t?void 0:t.serverTimestamps)||"none",function(t){return new El(e.Bh,null,t)},function(t){return new Qr(t)}).$h(this.Qh.re())}},Nf.prototype.get=function(t,e){var n=this;if(void 0===e&&(e={}),this.Qh&&null!==(t=this.Qh.data().field(ml("DocumentSnapshot.get",t))))return new ul(this.ka.Kh,e.serverTimestamps||"none",function(t){return new El(n.Bh,n.Wh,t)},function(t){return new Qr(t)}).$h(t)},Nf),Ef=(n(Tf,mf=bf),Tf.prototype.data=function(t){return void 0===t&&(t={}),mf.prototype.data.call(this,t)},Tf),If=(Object.defineProperty(Af.prototype,"docs",{get:function(){var e=[];return this.forEach(function(t){return e.push(t)}),e},enumerable:!1,configurable:!0}),Object.defineProperty(Af.prototype,"size",{get:function(){return this.Ma.docs.size},enumerable:!1,configurable:!0}),Object.defineProperty(Af.prototype,"empty",{get:function(){return 0===this.size},enumerable:!1,configurable:!0}),Af.prototype.forEach=function(e,n){var r=this;this.Ma.docs.forEach(function(t){e.call(n,r.La(t,r.Ma.fromCache,r.Ma.Qt.has(t.key)))})},Af.prototype.docChanges=function(t){if(void 0===t&&(t={}),(t=!!t.includeMetadataChanges)&&this.Ma.Kt)throw new Dr(kr.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this.qa&&this.Ua===t||(this.qa=cp(this.Ma,t,this.La.bind(this)),this.Ua=t),this.qa},Af.prototype.La=function(t,e,n){return new Ef(this.Bh,t.key,t,new Hf(n,e),this.query.Wh)},Af);function Af(t,e,n){this.Bh=t,this.Ma=n,this.metadata=new Hf(n.hasPendingWrites,n.fromCache),this.query=e}function Tf(){return null!==mf&&mf.apply(this,arguments)||this}function Nf(t,e,n,r,i){var o=this;return(o=wf.call(this,t,e,n,i)||this).Bh=t,o.ka=t,o.metadata=r,o}function Sf(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];var o=Bc(t.firestore,yf),s=Ol(o);return e instanceof Vc&&(e=e.Ah),Of(o,("string"==typeof e||e instanceof bl?ql(s,"updateDoc",t.jh,e,n,r):Ml(s,"updateDoc",t.jh,e)).Jh(t.jh,Is.exists(!0)))}function Of(t,e){return lf(Cf(t),e)}function Pf(t,e,n){var r=n.docs.get(e.jh);return new bf(t,e.jh,r,new Hf(n.hasPendingWrites,n.fromCache),e.Wh)}var kf,Df="You are using the memory-only build of Firestore. Persistence support is only available via the @firebase/firestore bundle or the firebase-firestore.js build.",Rf=(Vf.prototype.enableIndexedDbPersistence=function(t,e){throw new Dr(kr.FAILED_PRECONDITION,Df)},Vf.prototype.enableMultiTabIndexedDbPersistence=function(t){throw new Dr(kr.FAILED_PRECONDITION,Df)},Vf.prototype.clearIndexedDbPersistence=function(t){throw new Dr(kr.FAILED_PRECONDITION,Df)},Vf),Lf=(n(_f,kf=Vc),Object.defineProperty(_f.prototype,"Kh",{get:function(){return this.Ah.Kh},enumerable:!1,configurable:!0}),_f.prototype.settings=function(t){t.merge&&delete(t=Object.assign(Object.assign({},this.Ah.Na()),t)).merge,this.Ah.Fa(t)},_f.prototype.useEmulator=function(t,e){"firestore.googleapis.com"!==this.Ah.Na().host&&jr("Host has been set in both settings() and useEmulator(), emulator host will be used"),this.settings({host:t+":"+e,ssl:!1,merge:!0})},_f.prototype.enableNetwork=function(){return function(r){var t=this;return r.ke.enqueue(function(){return y(t,void 0,void 0,function(){var e,n;return v(this,function(t){switch(t.label){case 0:return[4,sf(r)];case 1:return e=t.sent(),[4,af(r)];case 2:return n=t.sent(),[2,(e.gc(!0),(t=n).ho.delete(0),hh(t))]}})})})}(Cf(this.Ah))},_f.prototype.disableNetwork=function(){return function(r){var t=this;return r.ke.enqueue(function(){return y(t,void 0,void 0,function(){var e,n;return v(this,function(t){switch(t.label){case 0:return[4,sf(r)];case 1:return e=t.sent(),[4,af(r)];case 2:return n=t.sent(),[2,(e.gc(!1),function(n){return y(this,void 0,void 0,function(){var e;return v(this,function(t){switch(t.label){case 0:return(e=n).ho.add(0),[4,ch(e)];case 1:return t.sent(),e.fo.set("Offline"),[2]}})})}(n))]}})})})}(Cf(this.Ah))},_f.prototype.enablePersistence=function(t){var e=!1,n=!1;return t&&qc("synchronizeTabs",e=!!t.synchronizeTabs,"experimentalForceOwningTab",n=!!t.experimentalForceOwningTab),e?this.Ba.enableMultiTabIndexedDbPersistence(this):this.Ba.enableIndexedDbPersistence(this,n)},_f.prototype.clearPersistence=function(){return this.Ba.clearIndexedDbPersistence(this)},_f.prototype.terminate=function(){return this.app._removeServiceInstance("firestore"),this.INTERNAL.delete()},_f.prototype.waitForPendingWrites=function(){return function(n){var t=this,r=new Zu;return n.ke.Qe(function(){return y(t,void 0,void 0,function(){var e;return v(this,function(t){switch(t.label){case 0:return e=zh,[4,hf(n)];case 1:return[2,e.apply(void 0,[t.sent(),r])]}})})}),r.promise}(Cf(this.Ah))},_f.prototype.onSnapshotsInSync=function(t){return function(t,e){var n=this,r=Cf(t),e=pf(e)?e:{next:e},i=new _c(e);return t.$a.Qe(function(){return y(n,void 0,void 0,function(){var e;return v(this,function(t){switch(t.label){case 0:return e=function(t,e){t.Ts.add(e),e.next()},[4,cf(r)];case 1:return e.apply(void 0,[t.sent(),i]),[2]}})})}),function(){i.Ih(),t.$a.Qe(function(){return y(n,void 0,void 0,function(){var e;return v(this,function(t){switch(t.label){case 0:return e=function(t,e){t.Ts.delete(e)},[4,cf(r)];case 1:return e.apply(void 0,[t.sent(),i]),[2]}})})})}}(this.Ah,t)},Object.defineProperty(_f.prototype,"app",{get:function(){if(!this.ja)throw new Dr(kr.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.ja},enumerable:!1,configurable:!0}),_f.prototype.collection=function(t){return xc("Firestore.collection","path",t),Cf(this.Ah),new op(li.U(t),this,null)},_f.prototype.doc=function(t){return xc("Firestore.doc","path",t),Cf(this.Ah),qf.Qa(li.U(t),this,null)},_f.prototype.collectionGroup=function(t){if(xc("Firestore.collectionGroup","collectionId",t),0<=t.indexOf("/"))throw new Dr(kr.INVALID_ARGUMENT,"Invalid collection ID '"+t+"' passed to function Firestore.collectionGroup(). Collection IDs must not contain '/'.");return Cf(this.Ah),new rp(new eu(li.B(),t),this,null)},_f.prototype.runTransaction=function(e){var n=this;return function(n,r){var t=this,i=new Zu;return n.ke.Qe(function(){return y(t,void 0,void 0,function(){var e;return v(this,function(t){switch(t.label){case 0:return[4,of(n).then(function(t){return t.ro})];case 1:return e=t.sent(),new $l(n.ke,e,r,i).run(),[2]}})})}),i.promise}(Cf(this.Ah),function(t){return e(new xf(n,t))})},_f.prototype.batch=function(){return Cf(this.Ah),new Mf(this)},_f);function _f(t,e,n){var r=this;return(r=kf.call(this,e)||this).Ba=n,r.INTERNAL={delete:function(){return void 0===e&&(e="[DEFAULT]"),t="firestore-exp",(n=r.Ah).app.container.getProvider(t).clearInstance(e),n._delete();var t,e,n}},t instanceof ti||(r.ja=t),r}function Vf(){}function Cf(t){return t.Oa||Uf(t),t.Oa.Ra(),t.Oa}function Uf(t){var e,n,r=t.Yh(),r=(e=t.Kh,n=t.Va,new Jr(e,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling));t.Oa=new Jl(t.va,t.$a,r)}var jf,xf=(Wf.prototype.get=function(t){var e=this,n=hp(0,t,this.Bh);return this.Wa.aa([n.jh]).then(function(t){if(!t||1!==t.length)return Mr();if((t=t[0])instanceof Js)return new Qf(e.Bh,n.jh,null,!1,!1,n.Wh);if(t instanceof $s)return new Qf(e.Bh,n.jh,t,!1,!1,n.Wh);throw Mr()})},Wf.prototype.set=function(t,e,n){return t=hp(0,t,this.Bh),n=Mc("Transaction.set",n),e=lp(t.Wh,e,n),n=xl(this.Ka,"Transaction.set",t.jh,e,null!==t.Wh,n),this.Wa.set(t.jh,n),this},Wf.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];return t=hp(0,t,this.Bh),e instanceof Vc&&(e=e.Ah),e="string"==typeof e||e instanceof bl?ql(this.Ka,"Transaction.update",t.jh,e,n,r):Ml(this.Ka,"Transaction.update",t.jh,e),this.Wa.update(t.jh,e),this},Wf.prototype.delete=function(t){return t=hp(0,t,this.Bh),this.Wa.delete(t.jh),this},Wf),Mf=(Bf.prototype.set=function(t,e,n){return this.Ha(),t=hp(0,t,this.Bh),n=Mc("WriteBatch.set",n),e=lp(t.Wh,e,n),n=xl(this.Ka,"WriteBatch.set",t.jh,e,null!==t.Wh,n),this.Ga=this.Ga.concat(n.Jh(t.jh,Is.Jn())),this},Bf.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];return this.Ha(),t=hp(0,t,this.Bh),e instanceof Vc&&(e=e.Ah),e="string"==typeof e||e instanceof bl?ql(this.Ka,"WriteBatch.update",t.jh,e,n,r):Ml(this.Ka,"WriteBatch.update",t.jh,e),this.Ga=this.Ga.concat(e.Jh(t.jh,Is.exists(!0))),this},Bf.prototype.delete=function(t){return this.Ha(),t=hp(0,t,this.Bh),this.Ga=this.Ga.concat(new Fs(t.jh,Is.Jn())),this},Bf.prototype.commit=function(){return this.Ha(),this.za=!0,0<this.Ga.length?lf(Cf(this.Bh.Ah),this.Ga):Promise.resolve()},Bf.prototype.Ha=function(){if(this.za)throw new Dr(kr.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},Bf),qf=(n(Ff,jf=Vc),Ff.Qa=function(t,e,n){if(t.length%2!=0)throw new Dr(kr.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t.q()+" has "+t.length);return new Ff(e,new El(e.Ah,n,new di(t)))},Ff.Ya=function(t,e,n){return new Ff(e,new El(e.Ah,n,t))},Object.defineProperty(Ff.prototype,"id",{get:function(){return this.Ah.id},enumerable:!1,configurable:!0}),Object.defineProperty(Ff.prototype,"parent",{get:function(){return new op(this.Ah.zh.N(),this.firestore,this.Ah.Wh)},enumerable:!1,configurable:!0}),Object.defineProperty(Ff.prototype,"path",{get:function(){return this.Ah.path},enumerable:!1,configurable:!0}),Ff.prototype.collection=function(t){if(xc("DocumentReference.collection","path",t),!t)throw new Dr(kr.INVALID_ARGUMENT,"Must provide a non-empty collection name to collection()");return t=li.U(t),new op(this.Ah.zh.child(t),this.firestore,null)},Ff.prototype.isEqual=function(t){return t instanceof Vc&&(t=t.Ah),t instanceof El&&((e=this.Ah)instanceof El||e instanceof Il)&&(t instanceof El||t instanceof Il)&&e.firestore===t.firestore&&e.path===t.path&&e.Wh===t.Wh;var e},Ff.prototype.set=function(t,e){e=Mc("DocumentReference.set",e);try{return n=this.Ah,r=t,i=e,o=Bc(n.firestore,yf),r=lp(n.Wh,r,i),Of(o,xl(Ol(o),"setDoc",n.jh,r,null!==n.Wh,i).Jh(n.jh,Is.Jn()))}catch(t){throw Gf(t,"setDoc","DocumentReference.set")}var n,r,i,o},Ff.prototype.update=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];try{return 1===arguments.length?Sf(this.Ah,t):Sf.apply(void 0,o([this.Ah,t,e],n))}catch(t){throw Gf(t,"updateDoc","DocumentReference.update")}},Ff.prototype.delete=function(){return Of(Bc((t=this.Ah).firestore,yf),[new Fs(t.jh,Is.Jn())]);var t},Ff.prototype.onSnapshot=function(){for(var e=this,r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];var n,i=function(){for(var t=0,e=r;t<e.length;t++){var n=e[t];if("object"==typeof n&&!pf(n))return n}return{}}(),o={next:function(t){n.next&&n.next(new Qf(e.firestore,t.jh,t.Qh,t.metadata.fromCache,t.metadata.hasPendingWrites,e.Ah.Wh))},error:null===(o=(n=pf((o=r)[0])?o[0]:pf(o[1])?o[1]:"function"==typeof o[0]?{next:o[0],error:o[1],complete:o[2]}:{next:o[1],error:o[2],complete:o[3]}).error)||void 0===o?void 0:o.bind(n),complete:null===(o=n.complete)||void 0===o?void 0:o.bind(n)};return function(e){for(var t=this,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];var i={includeMetadataChanges:!1},o=0;"object"!=typeof n[o]||pf(n[o])||(i=n[o],o++);var s,u,a,h,c={includeMetadataChanges:i.includeMetadataChanges};pf(n[o])&&(h=n[o],n[o]=null===(i=h.next)||void 0===i?void 0:i.bind(h),n[o+1]=null===(i=h.error)||void 0===i?void 0:i.bind(h),n[o+2]=null===(i=h.complete)||void 0===i?void 0:i.bind(h)),e instanceof El?(u=Bc(e.firestore,yf),a=ou(e.jh.path),s={next:function(t){n[o]&&n[o](Pf(u,e,t))},error:n[o+1],complete:n[o+2]}):(u=Bc(e.firestore,yf),a=e.Hh,s={next:function(t){n[o]&&n[o](new If(u,e,t))},error:n[o+1],complete:n[o+2]},ep(e.Hh));var l=Cf(u),f=new _c(s),p=new da(a,f,c);return u.$a.Qe(function(){return y(t,void 0,void 0,function(){var e;return v(this,function(t){switch(t.label){case 0:return e=la,[4,cf(l)];case 1:return[2,e.apply(void 0,[t.sent(),p])]}})})}),function(){f.Ih(),u.$a.Qe(function(){return y(t,void 0,void 0,function(){var e;return v(this,function(t){switch(t.label){case 0:return e=fa,[4,cf(l)];case 1:return[2,e.apply(void 0,[t.sent(),p])]}})})})}}(this.Ah,i,o)},Ff.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(e){var t=this,n=Bc(e.firestore,yf),r=Cf(n),i=new Zu;return n.$a.Qe(function(){return y(t,void 0,void 0,function(){return v(this,function(t){switch(t.label){case 0:return[4,uf(r)];case 1:return[4,function(i,o,s){return y(this,void 0,void 0,function(){var r;return v(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,(e=o,(n=i).persistence.runTransaction("read document","readonly",function(t){return n.Mi.ni(t,e)}))];case 1:return(r=t.sent())instanceof $s?s.resolve(r):r instanceof Js?s.resolve(null):s.reject(new Dr(kr.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),[3,3];case 2:return r=aa(r=t.sent(),"Failed to get document '"+o+" from cache"),s.reject(r),[3,3];case 3:return[2]}var e,n})})}(t.sent(),e.jh,i)];case 2:return t.sent(),[2]}})})}),i.promise.then(function(t){return new bf(n,e.jh,t,new Hf(t instanceof $s&&t.Xn,!0),e.Wh)})}:"server"===(null==t?void 0:t.source)?function(e){var t=this,n=Bc(e.firestore,yf),r=Cf(n),i=new Zu;return n.$a.Qe(function(){return y(t,void 0,void 0,function(){return v(this,function(t){switch(t.label){case 0:return[4,cf(r)];case 1:return[4,ff(t.sent(),n.$a,e.jh,{source:"server"},i)];case 2:return t.sent(),[2]}})})}),i.promise.then(function(t){return Pf(n,e,t)})}:function(e){var t=this,n=Bc(e.firestore,yf),r=Cf(n),i=new Zu;return n.$a.Qe(function(){return y(t,void 0,void 0,function(){return v(this,function(t){switch(t.label){case 0:return[4,cf(r)];case 1:return[4,ff(t.sent(),n.$a,e.jh,{source:"default"},i)];case 2:return t.sent(),[2]}})})}),i.promise.then(function(t){return Pf(n,e,t)})})(this.Ah).then(function(t){return new Qf(e.firestore,t.jh,t.Qh,t.metadata.fromCache,t.metadata.hasPendingWrites,e.Ah.Wh)})},Ff.prototype.withConverter=function(t){return new Ff(this.firestore,this.Ah.withConverter(t))},Ff);function Ff(t,e){var n=this;return(n=jf.call(this,e)||this).firestore=t,n}function Bf(t){this.Bh=t,this.Ga=[],this.za=!1,this.Ka=Ol(this.Bh.Ah)}function Wf(t,e){this.Bh=t,this.Wa=e,this.Ka=Ol(this.Bh.Ah)}function Gf(t,e,n){return t.message=t.message.replace(e+"()",n+"()"),t}var zf,Hf=(Zf.prototype.isEqual=function(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache},Zf),Qf=(Yf.prototype.data=function(t){var e=this;if(void 0===t&&(t={}),this.Qh){if(this.Wh){var n=new Xf(this.Bh,this.jh,this.Qh,this.Ja,this.Xa,null);return this.Wh.fromFirestore(n,t)}return new ul(this.Bh.Kh,t.serverTimestamps||"none",function(t){return qf.Ya(t,e.Bh,null)},function(t){return new $r(t)}).$h(this.Qh.re())}},Yf.prototype.get=function(t,e){var n=this;if(void 0===e&&(e={}),this.Qh&&null!==(t=this.Qh.data().field(Hl("DocumentSnapshot.get",t,this.jh))))return new ul(this.Bh.Kh,e.serverTimestamps||"none",function(t){return qf.Ya(t,n.Bh,n.Wh)},function(t){return new $r(t)}).$h(t)},Object.defineProperty(Yf.prototype,"id",{get:function(){return this.jh.path.O()},enumerable:!1,configurable:!0}),Object.defineProperty(Yf.prototype,"ref",{get:function(){return qf.Ya(this.jh,this.Bh,this.Wh)},enumerable:!1,configurable:!0}),Object.defineProperty(Yf.prototype,"exists",{get:function(){return null!==this.Qh},enumerable:!1,configurable:!0}),Object.defineProperty(Yf.prototype,"metadata",{get:function(){return new Hf(this.Xa,this.Ja)},enumerable:!1,configurable:!0}),Yf.prototype.isEqual=function(t){return t instanceof Yf&&this.Bh===t.Bh&&this.Ja===t.Ja&&this.jh.isEqual(t.jh)&&(null===this.Qh?null===t.Qh:this.Qh.isEqual(t.Qh))&&this.Wh===t.Wh},Yf),Xf=(n(Kf,zf=Qf),Kf.prototype.data=function(t){return zf.prototype.data.call(this,t)},Kf);function Kf(){return null!==zf&&zf.apply(this,arguments)||this}function Yf(t,e,n,r,i,o){this.Bh=t,this.jh=e,this.Qh=n,this.Ja=r,this.Xa=i,this.Wh=o}function Zf(t,e){this.hasPendingWrites=t,this.fromCache=e}function $f(t,e,n){if(n instanceof Vc&&(n=n.Ah),"string"==typeof n){if(""===n)throw new Dr(kr.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!cu(e)&&-1!==n.indexOf("/"))throw new Dr(kr.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+n+"' contains a '/' character.");if(e=e.path.child(li.U(n)),!di.X(e))throw new Dr(kr.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+e+"' is not because it has an odd number of segments ("+e.length+").");return Do(t,new di(e))}if(n instanceof El)return Do(t,n.jh);throw new Dr(kr.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+Fc(n)+".")}function Jf(t,e){if(!Array.isArray(t)||0===t.length)throw new Dr(kr.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+e.toString()+"' filters.");if(10<t.length)throw new Dr(kr.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters support a maximum of 10 elements in the value array.")}function tp(t,e,n){if(!n.isEqual(e))throw new Dr(kr.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, >, or >=) on field '"+e.toString()+"' and so you must also use '"+e.toString()+"' as your first orderBy(), but your first orderBy() is on field '"+n.toString()+"' instead.")}function ep(t){if(uu(t)&&0===t.oe.length)throw new Dr(kr.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var np,rp=(ap.prototype.where=function(t,e,n){return t=Hl("Query.where",t),e=function(t,e,n,r,i,o){if(r.W()){if("array-contains"===i||"array-contains-any"===i)throw new Dr(kr.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+i+"' queries on FieldPath.documentId().");if("in"===i||"not-in"===i){Jf(o,i);for(var s=[],u=0,a=o;u<a.length;u++){var h=a[u];s.push($f(n,t,h))}c={arrayValue:{values:s}}}else c=$f(n,t,o)}else"in"!==i&&"not-in"!==i&&"array-contains-any"!==i||Jf(o,i),c=Fl(e,"Query.where",o,"in"===i||"not-in"===i);var c=Iu.create(r,i,c);return function(t,e){if(e.ae()){var n=hu(t);if(null!==n&&!n.isEqual(e.field))throw new Dr(kr.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, >, or >=) must be on the same field. But you have inequality filters on '"+n.toString()+"' and '"+e.field.toString()+"'");null!==(n=au(t))&&tp(0,e.field,n)}if(null!==(t=function(t,e){for(var n=0,r=t.filters;n<r.length;n++){var i=r[n];if(0<=e.indexOf(i.op))return i.op}return null}(t,function(){switch(e.op){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}())))throw t===e.op?new Dr(kr.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '"+e.op.toString()+"' filter."):new Dr(kr.INVALID_ARGUMENT,"Invalid query. You cannot use '"+e.op.toString()+"' filters with '"+t.toString()+"' filters.")}(t,c),c}(this.Hh,this.Ka,this.firestore.Kh,t,e,n),new ap((e=(n=this.Hh).filters.concat([e]),new eu(n.path,n.collectionGroup,n.oe.slice(),e,n.limit,n.ue,n.startAt,n.endAt)),this.firestore,this.Wh)},ap.prototype.orderBy=function(t,e){if(void 0===e||"asc"===e)n="asc";else{if("desc"!==e)throw new Dr(kr.INVALID_ARGUMENT,"Function Query.orderBy() has unknown direction '"+e+"', expected 'asc' or 'desc'.");n="desc"}var n,t=Hl("Query.orderBy",t),t=function(t,e,n){if(null!==t.startAt)throw new Dr(kr.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==t.endAt)throw new Dr(kr.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return n=e=new Yu(e,n),null!==au(t)||null!==(t=hu(t))&&tp(0,t,n.field),e}(this.Hh,t,n);return new ap((t=(n=this.Hh).oe.concat([t]),new eu(n.path,n.collectionGroup,t,n.filters.slice(),n.limit,n.ue,n.startAt,n.endAt)),this.firestore,this.Wh)},ap.prototype.limit=function(t){return Wc("Query.limit",t),new ap(pu(this.Hh,t,"F"),this.firestore,this.Wh)},ap.prototype.limitToLast=function(t){return Wc("Query.limitToLast",t),new ap(pu(this.Hh,t,"L"),this.firestore,this.Wh)},ap.prototype.startAt=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return t=this.Za("Query.startAt",t,e,!0),new ap(du(this.Hh,t),this.firestore,this.Wh)},ap.prototype.startAfter=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return t=this.Za("Query.startAfter",t,e,!1),new ap(du(this.Hh,t),this.firestore,this.Wh)},ap.prototype.endBefore=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return t=this.Za("Query.endBefore",t,e,!0),new ap(yu(this.Hh,t),this.firestore,this.Wh)},ap.prototype.endAt=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return t=this.Za("Query.endAt",t,e,!1),new ap(yu(this.Hh,t),this.firestore,this.Wh)},ap.prototype.isEqual=function(t){return t instanceof ap&&this.firestore===t.firestore&&vu(this.Hh,t.Hh)&&this.Wh===t.Wh},ap.prototype.withConverter=function(t){return new ap(this.Hh,this.firestore,t)},ap.prototype.Za=function(h,t,e,n){return t instanceof Qf?function(t,e,n,r){if(!n)throw new Dr(kr.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+h+"().");for(var i=[],o=0,s=lu(t);o<s.length;o++){var u=s[o];if(u.field.W())i.push(Do(e,n.key));else{var a=n.field(u.field);if(mo(a))throw new Dr(kr.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+u.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===a)throw u=u.field.q(),new Dr(kr.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+u+"' (used as the orderBy) does not exist.");i.push(a)}}return new Bu(i,r)}(this.Hh,this.firestore.Kh,t.Qh,n):(e=[t].concat(e),function(t,e,n,r,i,o){var s=t.oe;if(i.length>s.length)throw new Dr(kr.INVALID_ARGUMENT,"Too many arguments provided to "+r+"(). The number of arguments must be less than or equal to the number of orderBy() clauses");for(var u=[],a=0;a<i.length;a++){var h=i[a];if(s[a].field.W()){if("string"!=typeof h)throw new Dr(kr.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+r+"(), but got a "+typeof h);if(!cu(t)&&-1!==h.indexOf("/"))throw new Dr(kr.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+r+"() must be a plain document ID, but '"+h+"' contains a slash.");var c=t.path.child(li.U(h));if(!di.X(c))throw new Dr(kr.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+r+"() must result in a valid document path, but '"+c+"' is not because it contains an odd number of segments.");c=new di(c),u.push(Do(e,c))}else h=Fl(n,r,h),u.push(h)}return new Bu(u,o)}(this.Hh,this.firestore.Kh,this.Ka,h,e,n))},ap.prototype.onSnapshot=function(){for(var t,e=this,n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i,o={},s=0;"object"!=typeof n[s]||pf(n[s])||(o=n[s],s++),pf(n[s])&&(i=n[s],n[s]=null===(t=i.next)||void 0===t?void 0:t.bind(i),n[s+1]=null===(t=i.error)||void 0===t?void 0:t.bind(i),n[s+2]=null===(t=i.complete)||void 0===t?void 0:t.bind(i));var u={next:function(t){n[s]&&n[s](new ip(e.firestore,e.Hh,t,e.Wh))},error:n[s+1],complete:n[s+2]};return ep(this.Hh),function(n,t,e){var r=this,i=new _c(u),o=new da(t,i,e);return n.ke.Qe(function(){return y(r,void 0,void 0,function(){var e;return v(this,function(t){switch(t.label){case 0:return e=la,[4,cf(n)];case 1:return[2,e.apply(void 0,[t.sent(),o])]}})})}),function(){i.Ih(),n.ke.Qe(function(){return y(r,void 0,void 0,function(){var e;return v(this,function(t){switch(t.label){case 0:return e=fa,[4,cf(n)];case 1:return[2,e.apply(void 0,[t.sent(),o])]}})})})}}(Cf(this.firestore.Ah),this.Hh,o)},ap.prototype.get=function(t){var e=this;ep(this.Hh);var n=Cf(this.firestore.Ah);return(t&&"cache"===t.source?function(n,r){var t=this,i=new Zu;return n.ke.Qe(function(){return y(t,void 0,void 0,function(){var e;return v(this,function(t){switch(t.label){case 0:return e=function(r,i,o){return y(this,void 0,void 0,function(){var e,n;return v(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,Xa(r,i,!0)];case 1:return n=t.sent(),e=new Lh(i,n.lr),n=e.ru(n.documents),n=e.hu(n,!1),o.resolve(n.snapshot),[3,3];case 2:return n=aa(n=t.sent(),"Failed to execute query '"+i+" against cache"),o.reject(n),[3,3];case 3:return[2]}})})},[4,uf(n)];case 1:return[2,e.apply(void 0,[t.sent(),r,i])]}})})}),i.promise}(n,this.Hh):function(n,r,i){var t=this;void 0===i&&(i={});var o=new Zu;return n.ke.Qe(function(){return y(t,void 0,void 0,function(){var e;return v(this,function(t){switch(t.label){case 0:return e=function(e,n,t,r,i){var o=new _c({next:function(t){n.Qe(function(){return fa(e,s)}),t.fromCache&&"server"===r.source?i.reject(new Dr(kr.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(t)},error:function(t){return i.reject(t)}}),s=new da(t,o,{includeMetadataChanges:!0,Cs:!0});return la(e,s)},[4,cf(n)];case 1:return[2,e.apply(void 0,[t.sent(),n.ke,r,i,o])]}})})}),o.promise}(n,this.Hh,t)).then(function(t){return new ip(e.firestore,e.Hh,t,e.Wh)})},ap),ip=(Object.defineProperty(up.prototype,"docs",{get:function(){var e=[];return this.forEach(function(t){return e.push(t)}),e},enumerable:!1,configurable:!0}),Object.defineProperty(up.prototype,"empty",{get:function(){return this.Ma.docs.P()},enumerable:!1,configurable:!0}),Object.defineProperty(up.prototype,"size",{get:function(){return this.Ma.docs.size},enumerable:!1,configurable:!0}),up.prototype.forEach=function(e,n){var r=this;this.Ma.docs.forEach(function(t){e.call(n,r.nl(t,r.metadata.fromCache,r.Ma.Qt.has(t.key)))})},Object.defineProperty(up.prototype,"query",{get:function(){return new rp(this.tl,this.Bh,this.Wh)},enumerable:!1,configurable:!0}),up.prototype.docChanges=function(t){if((t=!(!t||!t.includeMetadataChanges))&&this.Ma.Kt)throw new Dr(kr.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this.qa&&this.Ua===t||(this.qa=cp(this.Ma,t,this.nl.bind(this)),this.Ua=t),this.qa},up.prototype.isEqual=function(t){return t instanceof up&&this.Bh===t.Bh&&vu(this.tl,t.tl)&&this.Ma.isEqual(t.Ma)&&this.Wh===t.Wh},up.prototype.nl=function(t,e,n){return new Xf(this.Bh,t.key,t,e,n,this.Wh)},up),op=(n(sp,np=rp),Object.defineProperty(sp.prototype,"id",{get:function(){return this.Hh.path.O()},enumerable:!1,configurable:!0}),Object.defineProperty(sp.prototype,"parent",{get:function(){var t=this.Hh.path.N();return t.P()?null:qf.Qa(t,this.firestore,null)},enumerable:!1,configurable:!0}),Object.defineProperty(sp.prototype,"path",{get:function(){return this.Hh.path.q()},enumerable:!1,configurable:!0}),sp.prototype.doc=function(t){return 0===arguments.length&&(t=Fr.t()),xc("CollectionReference.doc","path",t),t=li.U(t),qf.Qa(this.Hh.path.child(t),this.firestore,this.Wh)},sp.prototype.add=function(t){var t=this.Wh?this.Wh.toFirestore(t):t,e=this.doc();return qf.Ya(e.Ah.jh,this.firestore,null).set(t).then(function(){return e})},sp.prototype.withConverter=function(t){return new sp(this.zh,this.firestore,t)},sp);function sp(t,e,n){var r=this;if(((r=np.call(this,ou(t),e,n)||this).zh=t).length%2!=1)throw new Dr(kr.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+t.q()+" has "+t.length);return r}function up(t,e,n,r){this.Bh=t,this.tl=e,this.Ma=n,this.Wh=r,this.qa=null,this.Ua=null,this.metadata=new Hf(n.hasPendingWrites,n.fromCache)}function ap(t,e,n){this.Hh=t,this.firestore=e,this.Wh=n,this.Ka=Ol(e.Ah)}function hp(t,e,n){if((e=Bc(e,El)).firestore!==n.Ah)throw new Dr(kr.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}function cp(i,e,o){if(i.jt.P()){var n=0;return i.docChanges.map(function(t){var e=o(t.doc,i.fromCache,i.Qt.has(t.doc.key));return t.doc,{type:"added",doc:e,oldIndex:-1,newIndex:n++}})}var s=i.jt;return i.docChanges.filter(function(t){return e||3!==t.type}).map(function(t){var e=o(t.doc,i.fromCache,i.Qt.has(t.doc.key)),n=-1,r=-1;return 0!==t.type&&(n=s.indexOf(t.doc.key),s=s.delete(t.doc.key)),1!==t.type&&(r=(s=s.add(t.doc)).indexOf(t.doc.key)),{type:function(){switch(t.type){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Mr()}}(),doc:e,oldIndex:n,newIndex:r}})}function lp(t,e,n){return t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e}var fp,pp,f=(n(yp,pp=Vc),yp.documentId=function(){return new yp(pi.K().q())},yp.prototype.isEqual=function(t){return t instanceof Vc&&(t=t.Ah),t instanceof bl&&this.Ah.Gh.isEqual(t.Gh)},yp),we=(n(dp,fp=Vc),dp.serverTimestamp=function(){var t=new tl("serverTimestamp");return t.Rh="FieldValue.serverTimestamp",new dp(t)},dp.delete=function(){var t=new Hc("deleteField");return t.Rh="FieldValue.delete",new dp(t)},dp.arrayUnion=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new el("arrayUnion",t)}.apply(void 0,t);return n.Rh="FieldValue.arrayUnion",new dp(n)},dp.arrayRemove=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new nl("arrayRemove",t)}.apply(void 0,t);return n.Rh="FieldValue.arrayRemove",new dp(n)},dp.increment=function(t){return(t=new rl("increment",t)).Rh="FieldValue.increment",new dp(t)},dp.prototype.isEqual=function(t){return this.Ah.isEqual(t.Ah)},dp),we={Firestore:Lf,GeoPoint:il,Timestamp:hi,Blob:$r,Transaction:xf,WriteBatch:Mf,DocumentReference:qf,DocumentSnapshot:Qf,Query:rp,QueryDocumentSnapshot:Xf,QuerySnapshot:ip,CollectionReference:op,FieldPath:f,FieldValue:we,setLogLevel:function(t){Lr.setLogLevel(t)},CACHE_SIZE_UNLIMITED:-1};function dp(){return null!==fp&&fp.apply(this,arguments)||this}function yp(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return pp.call(this,new(bl.bind.apply(bl,o([void 0],t))))||this}(e=e.default).INTERNAL.registerComponent(new vr("firestore",function(t){return e=t.getProvider("app").getImmediate(),t=t.getProvider("auth-internal"),new Lf(e,new yf(e,t),new Rf);var e},"PUBLIC").setServiceProps(Object.assign({},we))),e.registerVersion("@firebase/firestore","2.0.2-20201010222127")}).apply(this,arguments)}catch(t){throw console.error(t),new Error("Cannot instantiate firebase-firestore.memory.js - be sure to load firebase-app.js first.")}});