import{getGlobalThis,format,makeSymbol,isPlainObject,isArray,isObject,isBoolean,isString,isRegExp,isFunction,isNumber,warn,isEmptyObject}from"@intlify/shared";import{setupDevtoolsPlugin}from"@vue/devtools-api";import{DevToolsLabels,DevToolsPlaceholders,DevToolsTimelineColors,DevToolsTimelineLayerMaps,createCompileError,createCoreContext,updateFallbackLocale,resolveValue,clearDateTimeFormat,clearNumberFormat,NOT_REOSLVED,parseTranslateArgs,translate,MISSING_RESOLVE_VALUE,parseDateTimeArgs,datetime,parseNumberArgs,number,createEmitter,registerMessageCompiler,compileToFunction}from"@intlify/core-base";import{ref,getCurrentInstance,computed,watch,createVNode,Text,h,Fragment,inject,onMounted,onUnmounted,isRef}from"vue";let devtools,devtoolsApi;function setDevtoolsHook(e){devtools=e}function devtoolsRegisterI18n(e,t){devtools&&devtools.emit("intlify:register",e,t)}async function enableDevTools(e,t){return new Promise((a,r)=>{try{setupDevtoolsPlugin({id:"vue-devtools-plugin-vue-i18n",label:DevToolsLabels["vue-devtools-plugin-vue-i18n"],app:e},r=>{devtoolsApi=r,r.on.inspectComponent(e=>{const t=e.componentInstance;t.vnode.el.__INTLIFY__&&e.instanceData&&inspectComposer(e.instanceData,t.vnode.el.__INTLIFY__)}),r.addInspector({id:"vue-i18n-resource-inspector",label:DevToolsLabels["vue-i18n-resource-inspector"],icon:"language",treeFilterPlaceholder:DevToolsPlaceholders["vue-i18n-resource-inspector"]}),r.on.getInspectorTree(a=>{a.app===e&&"vue-i18n-resource-inspector"===a.inspectorId&&registerScope(a,t)}),r.on.getInspectorState(a=>{a.app===e&&"vue-i18n-resource-inspector"===a.inspectorId&&inspectScope(a,t)}),r.addTimelineLayer({id:"vue-i18n-compile-error",label:DevToolsLabels["vue-i18n-compile-error"],color:DevToolsTimelineColors["vue-i18n-compile-error"]}),r.addTimelineLayer({id:"vue-i18n-performance",label:DevToolsLabels["vue-i18n-performance"],color:DevToolsTimelineColors["vue-i18n-performance"]}),r.addTimelineLayer({id:"vue-i18n-missing",label:DevToolsLabels["vue-i18n-missing"],color:DevToolsTimelineColors["vue-i18n-missing"]}),r.addTimelineLayer({id:"vue-i18n-fallback",label:DevToolsLabels["vue-i18n-fallback"],color:DevToolsTimelineColors["vue-i18n-fallback"]}),a(!0)})}catch(e){console.error(e),r(!1)}})}function inspectComposer(e,t){const a="vue-i18n: composer properties";e.state.push({type:a,key:"locale",editable:!1,value:t.locale.value}),e.state.push({type:a,key:"availableLocales",editable:!1,value:t.availableLocales}),e.state.push({type:a,key:"fallbackLocale",editable:!1,value:t.fallbackLocale.value}),e.state.push({type:a,key:"inheritLocale",editable:!1,value:t.inheritLocale}),e.state.push({type:a,key:"messages",editable:!1,value:t.messages.value}),e.state.push({type:a,key:"datetimeFormats",editable:!1,value:t.datetimeFormats.value}),e.state.push({type:a,key:"numberFormats",editable:!1,value:t.numberFormats.value})}function registerScope(e,t){const a=[];for(const[e,r]of t.__instances){const n="composition"===t.mode?r:r.__composer,o=e.type.name||e.type.displayName||e.type.__file;a.push({id:n.id.toString(),label:`${o} Scope`})}e.rootNodes.push({id:"global",label:"Global Scope",children:a})}function inspectScope(e,t){if("global"===e.nodeId)e.state=makeScopeInspectState("composition"===t.mode?t.global:t.global.__composer);else{const a=Array.from(t.__instances.values()).find(t=>t.id.toString()===e.nodeId);if(a){const r="composition"===t.mode?a:a.__composer;e.state=makeScopeInspectState(r)}}}function makeScopeInspectState(e){const t={},a="Locale related info",r=[{type:a,key:"locale",editable:!1,value:e.locale.value},{type:a,key:"fallbackLocale",editable:!1,value:e.fallbackLocale.value},{type:a,key:"availableLocales",editable:!1,value:e.availableLocales},{type:a,key:"inheritLocale",editable:!1,value:e.inheritLocale}];t[a]=r;const n=[{type:"Locale messages info",key:"messages",editable:!1,value:e.messages.value}];t["Locale messages info"]=n;const o=[{type:"Datetime formats info",key:"datetimeFormats",editable:!1,value:e.datetimeFormats.value}];t["Datetime formats info"]=o;const s=[{type:"Datetime formats info",key:"numberFormats",editable:!1,value:e.numberFormats.value}];return t["Datetime formats info"]=s,t}function addTimelineEvent(e,t){devtoolsApi&&devtoolsApi.addTimelineEvent({layerId:DevToolsTimelineLayerMaps[e],event:{time:Date.now(),meta:{},data:t||{}}})}const VERSION="9.0.0-beta.15";function initFeatureFlags(){let e=!1;"boolean"!=typeof __VUE_I18N_FULL_INSTALL__&&(e=!0,getGlobalThis().__VUE_I18N_FULL_INSTALL__=!0),"boolean"!=typeof __VUE_I18N_LEGACY_API__&&(e=!0,getGlobalThis().__VUE_I18N_LEGACY_API__=!0),"boolean"!=typeof __INTLIFY_PROD_DEVTOOLS__&&(e=!0,getGlobalThis().__INTLIFY_PROD_DEVTOOLS__=!1),"production"!==process.env.NODE_ENV&&e&&console.warn("You are running the esm-bundler build of vue-i18n. It is recommended to configure your bundler to explicitly replace feature flag globals with boolean literals to get proper tree-shaking in the final bundle.")}function initDev(){const e=getGlobalThis();e.__INTLIFY__=!0,setDevtoolsHook(e.__INTLIFY_DEVTOOLS_GLOBAL_HOOK__),console.info("You are running a development build of vue-i18n.\nMake sure to use the production build (*.prod.js) when deploying for production.")}const warnMessages={6:"Fall back to {type} '{key}' with root locale.",7:"Not supportted 'preserve'.",8:"Not supportted 'formatter'.",9:"Not supportted 'preserveDirectiveContent'.",10:"Not supportted 'getChoiceIndex'.",11:"Component name legacy compatible: '{name}' -> 'i18n'",12:"Not found parent scope. use the global scope."};function getWarnMessage(e,...t){return format(warnMessages[e],...t)}function createI18nError(e,...t){return createCompileError(e,null,"production"!==process.env.NODE_ENV?{messages:errorMessages,args:t}:void 0)}const errorMessages={12:"Unexpected return type in composer",13:"Invalid argument",14:"Must be called at the top of a `setup` function",15:"Need to install with `app.use` function",20:"Unexpected error",16:"Not available in legacy mode",17:"Required in value: {0}",18:"Invalid value",19:"Cannot setup vue-devtools plugin"},TransrateVNodeSymbol=makeSymbol("__transrateVNode"),DatetimePartsSymbol=makeSymbol("__datetimeParts"),NumberPartsSymbol=makeSymbol("__numberParts"),EnableEmitter=makeSymbol("__enableEmitter"),DisableEmitter=makeSymbol("__disableEmitter");let composerID=0;function defineCoreMissingHandler(e){return(t,a,r,n)=>e(a,r,getCurrentInstance()||void 0,n)}function getLocaleMessages(e,t){const{messages:a,__i18n:r}=t,n=isPlainObject(a)?a:isArray(r)?{}:{[e]:{}};return isArray(r)&&r.forEach(({locale:e,resource:t})=>{e?(n[e]=n[e]||{},deepCopy(t,n[e])):deepCopy(t,n)}),n}const hasOwnProperty=Object.prototype.hasOwnProperty;function hasOwn(e,t){return hasOwnProperty.call(e,t)}function deepCopy(e,t){for(const a in e)hasOwn(e,a)&&(isObject(e[a])?(t[a]=null!=t[a]?t[a]:{},deepCopy(e[a],t[a])):(t[a]=null!=t[a]?t[a]:{},t[a]=e[a]))}function createComposer(e={}){const{__root:t}=e,a=void 0===t;let r=!isBoolean(e.inheritLocale)||e.inheritLocale;const n=ref(t&&r?t.locale.value:isString(e.locale)?e.locale:"en-US"),o=ref(t&&r?t.fallbackLocale.value:isString(e.fallbackLocale)||isArray(e.fallbackLocale)||isPlainObject(e.fallbackLocale)||!1===e.fallbackLocale?e.fallbackLocale:n.value),s=ref(getLocaleMessages(n.value,e)),l=ref(isPlainObject(e.datetimeFormats)?e.datetimeFormats:{[n.value]:{}}),i=ref(isPlainObject(e.numberFormats)?e.numberFormats:{[n.value]:{}});let c=t?t.missingWarn:!isBoolean(e.missingWarn)&&!isRegExp(e.missingWarn)||e.missingWarn,m=t?t.fallbackWarn:!isBoolean(e.fallbackWarn)&&!isRegExp(e.fallbackWarn)||e.fallbackWarn,u=!isBoolean(e.fallbackRoot)||e.fallbackRoot,p=!!e.fallbackFormat,_=isFunction(e.missing)?e.missing:null,g=isFunction(e.missing)?defineCoreMissingHandler(e.missing):null,b=isFunction(e.postTranslation)?e.postTranslation:null,d=!isBoolean(e.warnHtmlMessage)||e.warnHtmlMessage,f=!!e.escapeParameter;const v=t?t.modifiers:isPlainObject(e.modifiers)?e.modifiers:{},E=e.pluralRules;let y;function F(){return createCoreContext({locale:n.value,fallbackLocale:o.value,messages:s.value,datetimeFormats:l.value,numberFormats:i.value,modifiers:v,pluralRules:E,missing:null===g?void 0:g,missingWarn:c,fallbackWarn:m,fallbackFormat:p,unresolving:!0,postTranslation:null===b?void 0:b,warnHtmlMessage:d,escapeParameter:f,__datetimeFormatters:isPlainObject(y)?y.__datetimeFormatters:void 0,__numberFormatters:isPlainObject(y)?y.__numberFormatters:void 0,__emitter:isPlainObject(y)?y.__emitter:void 0})}y=F(),updateFallbackLocale(y,n.value,o.value);const I=computed({get:()=>n.value,set:e=>{n.value=e,y.locale=n.value}}),N=computed({get:()=>o.value,set:e=>{o.value=e,y.fallbackLocale=o.value,updateFallbackLocale(y,n.value,e)}}),L=computed(()=>s.value),T=computed(()=>l.value),h=computed(()=>i.value);function k(e,a,r,n,o,s){const l=F(),i=e(l);if(isNumber(i)&&i===NOT_REOSLVED){const e=a();if("production"!==process.env.NODE_ENV&&u&&t&&(warn(getWarnMessage(6,{key:e,type:r})),"production"!==process.env.NODE_ENV)){const{__emitter:t}=l;t&&t.emit("fallback",{type:r,key:e,to:"global"})}return u&&t?n(t):o(e)}if(s(i))return i;throw createI18nError(12)}const O={normalize:function(e){return e.map(e=>isString(e)?createVNode(Text,null,e,0):e)},interpolate:e=>e,type:"vnode"};function D(e){return s.value[e]||{}}composerID++,t&&(watch(t.locale,e=>{r&&(n.value=e,y.locale=e,updateFallbackLocale(y,n.value,o.value))}),watch(t.fallbackLocale,e=>{r&&(o.value=e,y.fallbackLocale=e,updateFallbackLocale(y,n.value,o.value))}));const S={id:composerID,locale:I,fallbackLocale:N,get inheritLocale(){return r},set inheritLocale(e){r=e,e&&t&&(n.value=t.locale.value,o.value=t.fallbackLocale.value,updateFallbackLocale(y,n.value,o.value))},get availableLocales(){return Object.keys(s.value).sort()},messages:L,datetimeFormats:T,numberFormats:h,get modifiers(){return v},get pluralRules(){return E||{}},get isGlobal(){return a},get missingWarn(){return c},set missingWarn(e){c=e,y.missingWarn=c},get fallbackWarn(){return m},set fallbackWarn(e){m=e,y.fallbackWarn=m},get fallbackRoot(){return u},set fallbackRoot(e){u=e},get fallbackFormat(){return p},set fallbackFormat(e){p=e,y.fallbackFormat=p},get warnHtmlMessage(){return d},set warnHtmlMessage(e){d=e,y.warnHtmlMessage=e},get escapeParameter(){return f},set escapeParameter(e){f=e,y.escapeParameter=e},t:function(...e){return k(t=>translate(t,...e),()=>parseTranslateArgs(...e)[0],"translate",t=>t.t(...e),e=>e,e=>isString(e))},d:function(...e){return k(t=>datetime(t,...e),()=>parseDateTimeArgs(...e)[0],"datetime format",t=>t.d(...e),()=>MISSING_RESOLVE_VALUE,e=>isString(e))},n:function(...e){return k(t=>number(t,...e),()=>parseNumberArgs(...e)[0],"number format",t=>t.n(...e),()=>MISSING_RESOLVE_VALUE,e=>isString(e))},te:function(e,t){const a=D(isString(t)?t:n.value);return null!==resolveValue(a,e)},tm:function(e){const a=s.value[n.value]||{},r=resolveValue(a,e);return null!=r?r:t&&t.tm(e)||{}},getLocaleMessage:D,setLocaleMessage:function(e,t){s.value[e]=t,y.messages=s.value},mergeLocaleMessage:function(e,t){s.value[e]=Object.assign(s.value[e]||{},t),y.messages=s.value},getDateTimeFormat:function(e){return l.value[e]||{}},setDateTimeFormat:function(e,t){l.value[e]=t,y.datetimeFormats=l.value,clearDateTimeFormat(y,e,t)},mergeDateTimeFormat:function(e,t){l.value[e]=Object.assign(l.value[e]||{},t),y.datetimeFormats=l.value,clearDateTimeFormat(y,e,t)},getNumberFormat:function(e){return i.value[e]||{}},setNumberFormat:function(e,t){i.value[e]=t,y.numberFormats=i.value,clearNumberFormat(y,e,t)},mergeNumberFormat:function(e,t){i.value[e]=Object.assign(i.value[e]||{},t),y.numberFormats=i.value,clearNumberFormat(y,e,t)},getPostTranslationHandler:function(){return isFunction(b)?b:null},setPostTranslationHandler:function(e){b=e,y.postTranslation=e},getMissingHandler:function(){return _},setMissingHandler:function(e){null!==e&&(g=defineCoreMissingHandler(e)),_=e,y.missing=g},[TransrateVNodeSymbol]:function(...e){return k(t=>{let a;const r=t;try{r.processor=O,a=translate(r,...e)}finally{r.processor=null}return a},()=>parseTranslateArgs(...e)[0],"translate",t=>t[TransrateVNodeSymbol](...e),e=>[createVNode(Text,null,e,0)],e=>isArray(e))},[NumberPartsSymbol]:function(...e){return k(t=>number(t,...e),()=>parseNumberArgs(...e)[0],"number format",t=>t[NumberPartsSymbol](...e),()=>[],e=>isString(e)||isArray(e))},[DatetimePartsSymbol]:function(...e){return k(t=>datetime(t,...e),()=>parseDateTimeArgs(...e)[0],"datetime format",t=>t[DatetimePartsSymbol](...e),()=>[],e=>isString(e)||isArray(e))}};return"production"!==process.env.NODE_ENV&&(S[EnableEmitter]=(e=>{y.__emitter=e}),S[DisableEmitter]=(()=>{y.__emitter=void 0})),S}function convertComposerOptions(e){const t=isString(e.locale)?e.locale:"en-US",a=isString(e.fallbackLocale)||isArray(e.fallbackLocale)||isPlainObject(e.fallbackLocale)||!1===e.fallbackLocale?e.fallbackLocale:t,r=isFunction(e.missing)?e.missing:void 0,n=!isBoolean(e.silentTranslationWarn)&&!isRegExp(e.silentTranslationWarn)||!e.silentTranslationWarn,o=!isBoolean(e.silentFallbackWarn)&&!isRegExp(e.silentFallbackWarn)||!e.silentFallbackWarn,s=!isBoolean(e.fallbackRoot)||e.fallbackRoot,l=!!e.formatFallbackMessages,i=isPlainObject(e.modifiers)?e.modifiers:{},c=e.pluralizationRules,m=isFunction(e.postTranslation)?e.postTranslation:void 0,u=!isString(e.warnHtmlInMessage)||"off"!==e.warnHtmlInMessage,p=!!e.escapeParameterHtml,_=!isBoolean(e.sync)||e.sync;"production"!==process.env.NODE_ENV&&e.formatter&&warn(getWarnMessage(8)),"production"!==process.env.NODE_ENV&&e.preserveDirectiveContent&&warn(getWarnMessage(9));let g=e.messages;if(isPlainObject(e.sharedMessages)){const t=e.sharedMessages;g=Object.keys(t).reduce((e,a)=>{const r=e[a]||(e[a]={});return Object.assign(r,t[a]),e},g||{})}const{__i18n:b,__root:d}=e;return{locale:t,fallbackLocale:a,messages:g,datetimeFormats:e.datetimeFormats,numberFormats:e.numberFormats,missing:r,missingWarn:n,fallbackWarn:o,fallbackRoot:s,fallbackFormat:l,modifiers:i,pluralRules:c,postTranslation:m,warnHtmlMessage:u,escapeParameter:p,inheritLocale:_,__i18n:b,__root:d}}function createVueI18n(e={}){const t=createComposer(convertComposerOptions(e)),a={id:t.id,get locale(){return t.locale.value},set locale(e){t.locale.value=e},get fallbackLocale(){return t.fallbackLocale.value},set fallbackLocale(e){t.fallbackLocale.value=e},get messages(){return t.messages.value},get datetimeFormats(){return t.datetimeFormats.value},get numberFormats(){return t.numberFormats.value},get availableLocales(){return t.availableLocales},get formatter(){return"production"!==process.env.NODE_ENV&&warn(getWarnMessage(8)),{interpolate:()=>[]}},set formatter(e){"production"!==process.env.NODE_ENV&&warn(getWarnMessage(8))},get missing(){return t.getMissingHandler()},set missing(e){t.setMissingHandler(e)},get silentTranslationWarn(){return isBoolean(t.missingWarn)?!t.missingWarn:t.missingWarn},set silentTranslationWarn(e){t.missingWarn=isBoolean(e)?!e:e},get silentFallbackWarn(){return isBoolean(t.fallbackWarn)?!t.fallbackWarn:t.fallbackWarn},set silentFallbackWarn(e){t.fallbackWarn=isBoolean(e)?!e:e},get modifiers(){return t.modifiers},get formatFallbackMessages(){return t.fallbackFormat},set formatFallbackMessages(e){t.fallbackFormat=e},get postTranslation(){return t.getPostTranslationHandler()},set postTranslation(e){t.setPostTranslationHandler(e)},get sync(){return t.inheritLocale},set sync(e){t.inheritLocale=e},get warnHtmlInMessage(){return t.warnHtmlMessage?"warn":"off"},set warnHtmlInMessage(e){t.warnHtmlMessage="off"!==e},get escapeParameterHtml(){return t.escapeParameter},set escapeParameterHtml(e){t.escapeParameter=e},get preserveDirectiveContent(){return"production"!==process.env.NODE_ENV&&warn(getWarnMessage(9)),!0},set preserveDirectiveContent(e){"production"!==process.env.NODE_ENV&&warn(getWarnMessage(9))},get pluralizationRules(){return t.pluralRules||{}},__composer:t,t(...e){const[a,r,n]=e,o={};let s=null,l=null;if(!isString(a))throw createI18nError(13);const i=a;return isString(r)?o.locale=r:isArray(r)?s=r:isPlainObject(r)&&(l=r),isArray(n)?s=n:isPlainObject(n)&&(l=n),t.t(i,s||l||{},o)},tc(...e){const[a,r,n]=e,o={plural:1};let s=null,l=null;if(!isString(a))throw createI18nError(13);const i=a;return isString(r)?o.locale=r:isNumber(r)?o.plural=r:isArray(r)?s=r:isPlainObject(r)&&(l=r),isString(n)?o.locale=n:isArray(n)?s=n:isPlainObject(n)&&(l=n),t.t(i,s||l||{},o)},te:(e,a)=>t.te(e,a),tm:e=>t.tm(e),getLocaleMessage:e=>t.getLocaleMessage(e),setLocaleMessage(e,a){t.setLocaleMessage(e,a)},mergeLocaleMessage(e,a){t.mergeLocaleMessage(e,a)},d:(...e)=>t.d(...e),getDateTimeFormat:e=>t.getDateTimeFormat(e),setDateTimeFormat(e,a){t.setDateTimeFormat(e,a)},mergeDateTimeFormat(e,a){t.mergeDateTimeFormat(e,a)},n:(...e)=>t.n(...e),getNumberFormat:e=>t.getNumberFormat(e),setNumberFormat(e,a){t.setNumberFormat(e,a)},mergeNumberFormat(e,a){t.mergeNumberFormat(e,a)},getChoiceIndex:(e,t)=>("production"!==process.env.NODE_ENV&&warn(getWarnMessage(10)),-1),__onComponentInstanceCreated(t){const{componentInstanceCreatedListener:r}=e;r&&r(t,a)}};return"production"!==process.env.NODE_ENV&&(a.__enableEmitter=(e=>{const a=t;a[EnableEmitter]&&a[EnableEmitter](e)}),a.__disableEmitter=(()=>{const e=t;e[DisableEmitter]&&e[DisableEmitter]()})),a}const baseFormatProps={tag:{type:[String,Object]},locale:{type:String},scope:{type:String,validator:e=>"parent"===e||"global"===e,default:"parent"}},Translation={name:"i18n-t",props:{...baseFormatProps,keypath:{type:String,required:!0},plural:{type:[Number,String],validator:e=>isNumber(e)||!isNaN(e)}},setup(e,t){const{slots:a,attrs:r}=t,n=useI18n({useScope:e.scope}),o=Object.keys(a).filter(e=>"_"!==e);return()=>{const a={};e.locale&&(a.locale=e.locale),void 0!==e.plural&&(a.plural=isString(e.plural)?+e.plural:e.plural);const s=getInterpolateArg(t,o),l=n[TransrateVNodeSymbol](e.keypath,s,a);return isString(e.tag)?h(e.tag,{...r},l):isObject(e.tag)?h(e.tag,{...r},l):h(Fragment,{...r},l)}}};function getInterpolateArg({slots:e},t){return 1===t.length&&"default"===t[0]?e.default?e.default():[]:t.reduce((t,a)=>{const r=e[a];return r&&(t[a]=r()),t},{})}function renderFormatter(e,t,a,r){const{slots:n,attrs:o}=t;return()=>{const t={part:!0};let s={};e.locale&&(t.locale=e.locale),isString(e.format)?t.key=e.format:isObject(e.format)&&(isString(e.format.key)&&(t.key=e.format.key),s=Object.keys(e.format).reduce((t,r)=>a.includes(r)?Object.assign({},t,{[r]:e.format[r]}):t,{}));const l=r(...[e.value,t,s]);let i=[t.key];return isArray(l)?i=l.map((e,t)=>{const a=n[e.type];return a?a({[e.type]:e.value,index:t,parts:l}):[e.value]}):isString(l)&&(i=[l]),isString(e.tag)?h(e.tag,{...o},i):isObject(e.tag)?h(e.tag,{...o},i):h(Fragment,{...o},i)}}const NUMBER_FORMAT_KEYS=["localeMatcher","style","unit","unitDisplay","currency","currencyDisplay","useGrouping","numberingSystem","minimumIntegerDigits","minimumFractionDigits","maximumFractionDigits","minimumSignificantDigits","maximumSignificantDigits","notation","formatMatcher"],NumberFormat={name:"i18n-n",props:{...baseFormatProps,value:{type:Number,required:!0},format:{type:[String,Object]}},setup(e,t){const a=useI18n({useScope:"parent"});return renderFormatter(e,t,NUMBER_FORMAT_KEYS,(...e)=>a[NumberPartsSymbol](...e))}},DATETIME_FORMAT_KEYS=["dateStyle","timeStyle","fractionalSecondDigits","calendar","dayPeriod","numberingSystem","localeMatcher","timeZone","hour12","hourCycle","formatMatcher","weekday","era","year","month","day","hour","minute","second","timeZoneName"],DatetimeFormat={name:"i18n-d",props:{...baseFormatProps,value:{type:[Number,Date],required:!0},format:{type:[String,Object]}},setup(e,t){const a=useI18n({useScope:"parent"});return renderFormatter(e,t,DATETIME_FORMAT_KEYS,(...e)=>a[DatetimePartsSymbol](...e))}};function getComposer(e,t){const a=e;if("composition"===e.mode)return a.__getInstance(t)||e.global;{const r=a.__getInstance(t);return null!=r?r.__composer:e.global.__composer}}function vTDirective(e){const t=(t,{instance:a,value:r,modifiers:n})=>{if(!a||!a.$)throw createI18nError(20);const o=getComposer(e,a.$);"production"!==process.env.NODE_ENV&&n.preserve&&warn(getWarnMessage(7));const s=parseValue(r);t.textContent=o.t(...makeParams(s))};return{beforeMount:t,beforeUpdate:t}}function parseValue(e){if(isString(e))return{path:e};if(isPlainObject(e)){if(!("path"in e))throw createI18nError(17,"path");return e}throw createI18nError(18)}function makeParams(e){const{path:t,locale:a,args:r,choice:n,plural:o}=e,s={},l=r||{};return isString(a)&&(s.locale=a),isNumber(n)&&(s.plural=n),isNumber(o)&&(s.plural=o),[t,l,s]}function apply(e,t,...a){const r=isPlainObject(a[0])?a[0]:{},n=!!r.useI18nComponentName,o=!isBoolean(r.globalInstall)||r.globalInstall;"production"!==process.env.NODE_ENV&&o&&n&&warn(getWarnMessage(11,{name:Translation.name})),o&&(e.component(n?"i18n":Translation.name,Translation),e.component(NumberFormat.name,NumberFormat),e.component(DatetimeFormat.name,DatetimeFormat)),e.directive("t",vTDirective(t))}function defineMixin(e,t,a){return{beforeCreate(){const r=getCurrentInstance();if(!r)throw createI18nError(20);const n=this.$options;if(n.i18n){const a=n.i18n;n.__i18n&&(a.__i18n=n.__i18n),a.__root=t,this===this.$root?this.$i18n=mergeToRoot(e,a):this.$i18n=createVueI18n(a)}else n.__i18n?this===this.$root?this.$i18n=mergeToRoot(e,n):this.$i18n=createVueI18n({__i18n:n.__i18n,__root:t}):this.$i18n=e;e.__onComponentInstanceCreated(this.$i18n),a.__setInstance(r,this.$i18n),this.$t=((...e)=>this.$i18n.t(...e)),this.$tc=((...e)=>this.$i18n.tc(...e)),this.$te=((e,t)=>this.$i18n.te(e,t)),this.$d=((...e)=>this.$i18n.d(...e)),this.$n=((...e)=>this.$i18n.n(...e)),this.$tm=(e=>this.$i18n.tm(e))},mounted(){if("production"!==process.env.NODE_ENV||__INTLIFY_PROD_DEVTOOLS__){this.$el.__INTLIFY__=this.$i18n.__composer;const e=this.__emitter=createEmitter(),t=this.$i18n;t.__enableEmitter&&t.__enableEmitter(e),e.on("*",addTimelineEvent)}},beforeUnmount(){const e=getCurrentInstance();if(!e)throw createI18nError(20);if("production"!==process.env.NODE_ENV||__INTLIFY_PROD_DEVTOOLS__){this.__emitter&&(this.__emitter.off("*",addTimelineEvent),delete this.__emitter);const e=this.$i18n;e.__disableEmitter&&e.__disableEmitter(),delete this.$el.__INTLIFY__}delete this.$t,delete this.$tc,delete this.$te,delete this.$d,delete this.$n,delete this.$tm,a.__deleteInstance(e),delete this.$i18n}}}function mergeToRoot(e,t){e.locale=t.locale||e.locale,e.fallbackLocale=t.fallbackLocale||e.fallbackLocale,e.missing=t.missing||e.missing,e.silentTranslationWarn=t.silentTranslationWarn||e.silentFallbackWarn,e.silentFallbackWarn=t.silentFallbackWarn||e.silentFallbackWarn,e.formatFallbackMessages=t.formatFallbackMessages||e.formatFallbackMessages,e.postTranslation=t.postTranslation||e.postTranslation,e.warnHtmlInMessage=t.warnHtmlInMessage||e.warnHtmlInMessage,e.escapeParameterHtml=t.escapeParameterHtml||e.escapeParameterHtml,e.sync=t.sync||e.sync;const a=getLocaleMessages(e.locale,{messages:t.messages,__i18n:t.__i18n});return Object.keys(a).forEach(t=>e.mergeLocaleMessage(t,a[t])),t.datetimeFormats&&Object.keys(t.datetimeFormats).forEach(a=>e.mergeDateTimeFormat(a,t.datetimeFormats[a])),t.numberFormats&&Object.keys(t.numberFormats).forEach(a=>e.mergeNumberFormat(a,t.numberFormats[a])),e}function createI18n(e={}){const t=!__VUE_I18N_LEGACY_API__||!isBoolean(e.legacy)||e.legacy,a=__VUE_I18N_LEGACY_API__&&!!e.globalInjection,r=new Map,n=__VUE_I18N_LEGACY_API__&&t?createVueI18n(e):createComposer(e),o=makeSymbol("production"!==process.env.NODE_ENV?"vue-i18n":""),s={get mode(){return __VUE_I18N_LEGACY_API__&&t?"legacy":"composition"},async install(e,...r){if(("production"!==process.env.NODE_ENV||__INTLIFY_PROD_DEVTOOLS__)&&(e.__VUE_I18N__=s),e.__VUE_I18N_SYMBOL__=o,e.provide(e.__VUE_I18N_SYMBOL__,s),!t&&a&&injectGlobalFields(e,s.global),__VUE_I18N_FULL_INSTALL__&&apply(e,s,...r),__VUE_I18N_LEGACY_API__&&t&&e.mixin(defineMixin(n,n.__composer,s)),"production"!==process.env.NODE_ENV||__INTLIFY_PROD_DEVTOOLS__){if(!await enableDevTools(e,s))throw createI18nError(19);const a=createEmitter();if(t){const e=n;e.__enableEmitter&&e.__enableEmitter(a)}else{const e=n;e[EnableEmitter]&&e[EnableEmitter](a)}a.on("*",addTimelineEvent)}},get global(){return n},__instances:r,__getInstance:e=>r.get(e)||null,__setInstance(e,t){r.set(e,t)},__deleteInstance(e){r.delete(e)}};return("production"!==process.env.NODE_ENV||__INTLIFY_PROD_DEVTOOLS__)&&devtoolsRegisterI18n(s,VERSION),s}function useI18n(e={}){const t=getCurrentInstance();if(null==t)throw createI18nError(14);if(!t.appContext.app.__VUE_I18N_SYMBOL__)throw createI18nError(15);const a=inject(t.appContext.app.__VUE_I18N_SYMBOL__);if(!a)throw createI18nError(20);const r="composition"===a.mode?a.global:a.global.__composer,n=isEmptyObject(e)?"__i18n"in t.type?"local":"global":e.useScope?e.useScope:"local";if("global"===n){let a=isObject(e.messages)?e.messages:{};"__i18nGlobal"in t.type&&(a=getLocaleMessages(r.locale.value,{messages:a,__i18n:t.type.__i18nGlobal}));const n=Object.keys(a);if(n.length&&n.forEach(e=>{r.mergeLocaleMessage(e,a[e])}),isObject(e.datetimeFormats)){const t=Object.keys(e.datetimeFormats);t.length&&t.forEach(t=>{r.mergeDateTimeFormat(t,e.datetimeFormats[t])})}if(isObject(e.numberFormats)){const t=Object.keys(e.numberFormats);t.length&&t.forEach(t=>{r.mergeNumberFormat(t,e.numberFormats[t])})}return r}if("parent"===n){let e=getComposer$1(a,t);return null==e&&("production"!==process.env.NODE_ENV&&warn(getWarnMessage(12)),e=r),e}if("legacy"===a.mode)throw createI18nError(16);const o=a;let s=o.__getInstance(t);if(null==s){const a=t.type,n={...e};a.__i18n&&(n.__i18n=a.__i18n),r&&(n.__root=r),setupLifeCycle(o,t,s=createComposer(n)),o.__setInstance(t,s)}return s}function getComposer$1(e,t){let a=null;const r=t.root;let n=t.parent;for(;null!=n;){const t=e;if("composition"===e.mode)a=t.__getInstance(n);else{const e=t.__getInstance(n);null!=e&&(a=e.__composer)}if(null!=a)break;if(r===n)break;n=n.parent}return a}function setupLifeCycle(e,t,a){let r=null;onMounted(()=>{if(("production"!==process.env.NODE_ENV||__INTLIFY_PROD_DEVTOOLS__)&&t.vnode.el){t.vnode.el.__INTLIFY__=a,r=createEmitter();const e=a;e[EnableEmitter]&&e[EnableEmitter](r),r.on("*",addTimelineEvent)}},t),onUnmounted(()=>{if(("production"!==process.env.NODE_ENV||__INTLIFY_PROD_DEVTOOLS__)&&t.vnode.el&&t.vnode.el.__INTLIFY__){r&&r.off("*",addTimelineEvent);const e=a;e[DisableEmitter]&&e[DisableEmitter](),delete t.vnode.el.__INTLIFY__}e.__deleteInstance(t)},t)}const globalExportProps=["locale","fallbackLocale","availableLocales"],globalExportMethods=["t","d","n","tm"];function injectGlobalFields(e,t){const a=Object.create(null);globalExportProps.forEach(e=>{const r=Object.getOwnPropertyDescriptor(t,e);if(!r)throw createI18nError(20);const n=isRef(r.value)?{get:()=>r.value.value,set(e){r.value.value=e}}:{get:()=>r.get&&r.get()};Object.defineProperty(a,e,n)}),e.config.globalProperties.$i18n=a,globalExportMethods.forEach(a=>{const r=Object.getOwnPropertyDescriptor(t,a);if(!r)throw createI18nError(20);Object.defineProperty(e.config.globalProperties,`$${a}`,r)})}registerMessageCompiler(compileToFunction),initFeatureFlags(),"production"!==process.env.NODE_ENV&&initDev();export{DatetimeFormat,NumberFormat,Translation,VERSION,createI18n,useI18n,vTDirective};