var domEach=require("../utils").domEach,toString=Object.prototype.toString;function setCss(r,e,t,n){var i;"string"==typeof e?(i=getCss(r),"function"==typeof t&&(t=t.call(r,n,i[e])),""===t?delete i[e]:null!=t&&(i[e]=t),r.attribs.style=stringify(i)):"object"==typeof e&&Object.keys(e).forEach(function(t){setCss(r,t,e[t])})}function getCss(t,r){if(t&&t.attribs){var e=parse(t.attribs.style);if("string"==typeof r)return e[r];if(Array.isArray(r)){var n={};return r.forEach(function(t){null!=e[t]&&(n[t]=e[t])}),n}return e}}function stringify(e){return Object.keys(e||{}).reduce(function(t,r){return t+((t?" ":"")+r+": "+e[r])+";"},"")}function parse(t){return(t=(t||"").trim())?t.split(";").reduce(function(t,r){var e=r.indexOf(":");return e<1||e===r.length-1||(t[r.slice(0,e).trim()]=r.slice(e+1).trim()),t},{}):{}}exports.css=function(e,n){return 2===arguments.length||"[object Object]"===toString.call(e)?domEach(this,function(t,r){setCss(r,e,n,t)}):getCss(this[0],e)};