(function(){var m=[].indexOf||function(n){for(var t=0,e=this.length;t<e;t++)if(t in this&&this[t]===n)return t;return-1},y=jQuery;y.fn.validateCreditCard=function(n,a){var l,i,r,c,u,t,e,h,o,v,f,p,d,s,g=[{name:"amex",pattern:/^3[47]/,valid_length:[15]},{name:"diners_club_carte_blanche",pattern:/^30[0-5]/,valid_length:[14]},{name:"diners_club_international",pattern:/^36/,valid_length:[14]},{name:"jcb",pattern:/^35(2[89]|[3-8][0-9])/,valid_length:[16]},{name:"laser",pattern:/^(6304|670[69]|6771)/,valid_length:[16,17,18,19]},{name:"visa_electron",pattern:/^(4026|417500|4508|4844|491(3|7))/,valid_length:[16]},{name:"visa",pattern:/^4/,valid_length:[16]},{name:"mastercard",pattern:/^5[1-5]/,valid_length:[16]},{name:"maestro",pattern:/^(5018|5020|5038|6304|6759|676[1-3])/,valid_length:[12,13,14,15,16,17,18,19]},{name:"discover",pattern:/^(6011|622(12[6-9]|1[3-9][0-9]|[2-8][0-9]{2}|9[0-1][0-9]|92[0-5]|64[4-9])|65)/,valid_length:[16]}],_=!1;for(n&&("object"==typeof n?(a=n,_=!1,n=null):"function"==typeof n&&(_=!0)),null==a&&(a={}),null==a.accept&&(a.accept=function(){for(var n=[],t=0,e=g.length;t<e;t++)l=g[t],n.push(l.name);return n}()),o=0,v=(f=a.accept).length;o<v;o++)if(i=f[o],m.call(function(){for(var n=[],t=0,e=g.length;t<e;t++)l=g[t],n.push(l.name);return n}(),i)<0)throw"Credit card type '"+i+"' is not supported";return r=function(n){for(var t=function(){for(var n,t=[],e=0,r=g.length;e<r;e++)n=(l=g[e]).name,0<=m.call(a.accept,n)&&t.push(l);return t}(),e=0,r=t.length;e<r;e++)if(i=t[e],n.match(i.pattern))return i;return null},u=function(n){for(var t,e,r=0,a=n.split("").reverse(),l=e=0,i=a.length;e<i;l=++e)t=+(t=a[l]),r+=!(l%2)||(t*=2)<10?t:t-9;return r%10==0},c=function(n,t){n=n.length;return 0<=m.call(t.valid_length,n)},h=function(n){var t,e=t=!1;return null!=(i=r(n))&&(t=u(n),e=c(n,i)),{card_type:i,valid:t&&e,luhn_valid:t,length_valid:e}},p=this,e=function(){var n=t(y(p).val());return h(n)},t=function(n){return n.replace(/[ -]/g,"")},_?(this.on("input.jccv",(d=this,function(){return y(d).off("keyup.jccv"),n.call(d,e())})),this.on("keyup.jccv",(s=this,function(){return n.call(s,e())})),n.call(this,e()),this):e()}}).call(this);