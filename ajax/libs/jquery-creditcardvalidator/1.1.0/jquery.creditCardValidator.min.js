(function(){var _,y,c,w=[].indexOf||function(n){for(var t=0,r=this.length;t<r;t++)if(t in this&&this[t]===n)return t;return-1};function n(){this.trie={}}function g(n){if(this.trie=n,this.trie.constructor!==c)throw Error("Range constructor requires a Trie parameter")}n.prototype.push=function(n){var t,r,e,a,i,l,u;for(n=n.toString(),i=this.trie,u=[],r=e=0,a=(l=n.split("")).length;e<a;r=++e)null==i[t=l[r]]&&(r===n.length-1?i[t]=null:i[t]={}),u.push(i=i[t]);return u},n.prototype.find=function(n){var t,r,e,a,i,l;for(n=n.toString(),i=this.trie,r=e=0,a=(l=n.split("")).length;e<a;r=++e){if(t=l[r],!i.hasOwnProperty(t))return!1;if(null===i[t])return!0;i=i[t]}},c=n,g.rangeWithString=function(n){var t,r,e,a,i,l,u,o,h;if("string"!=typeof n)throw Error("rangeWithString requires a string parameter");for(n=(n=n.replace(/ /g,"")).split(","),h=new c,t=0,e=n.length;t<e;t++)if(i=(l=n[t]).match(/^(\d+)-(\d+)$/))for(a=r=u=i[1],o=i[2];u<=o?r<=o:o<=r;a=u<=o?++r:--r)h.push(a);else{if(!l.match(/^\d+$/))throw Error("Invalid range '"+i+"'");h.push(l)}return new g(h)},g.prototype.match=function(n){return this.trie.find(n)},y=g,(_=jQuery).fn.validateCreditCard=function(n,a){var i,l,e,u,o,t,r,h,c,g,f,s,v,p,d=[{name:"amex",range:"34,37",valid_length:[15]},{name:"diners_club_carte_blanche",range:"300-305",valid_length:[14]},{name:"diners_club_international",range:"36",valid_length:[14]},{name:"jcb",range:"3528-3589",valid_length:[16]},{name:"laser",range:"6304, 6706, 6709, 6771",valid_length:[16,17,18,19]},{name:"visa_electron",range:"4026, 417500, 4508, 4844, 4913, 4917",valid_length:[16]},{name:"visa",range:"4",valid_length:[13,14,15,16,17,18,19]},{name:"mastercard",range:"51-55,2221-2720",valid_length:[16]},{name:"discover",range:"6011, 622126-622925, 644-649, 65",valid_length:[16]},{name:"dankort",range:"5019",valid_length:[16]},{name:"maestro",range:"50, 56-69",valid_length:[12,13,14,15,16,17,18,19]},{name:"uatp",range:"1",valid_length:[15]}],m=!1;for(n&&("object"==typeof n?(a=n,m=!1,n=null):"function"==typeof n&&(m=!0)),null==a&&(a={}),null==a.accept&&(a.accept=function(){for(var n=[],t=0,r=d.length;t<r;t++)i=d[t],n.push(i.name);return n}()),t=0,r=(c=a.accept).length;t<r;t++)if(l=c[t],w.call(function(){for(var n=[],t=0,r=d.length;t<r;t++)i=d[t],n.push(i.name);return n}(),l)<0)throw Error("Credit card type '"+l+"' is not supported");return e=function(n){for(var t=function(){for(var n,t=[],r=0,e=d.length;r<e;r++)n=(i=d[r]).name,0<=w.call(a.accept,n)&&t.push(i);return t}(),r=0,e=t.length;r<e;r++)if(l=t[r],y.rangeWithString(l.range).match(n))return l;return null},o=function(n){for(var t,r,e=0,a=n.split("").reverse(),i=r=0,l=a.length;r<l;i=++r)t=+(t=a[i]),e+=!(i%2)||(t*=2)<10?t:t-9;return e%10==0},u=function(n,t){n=n.length;return 0<=w.call(t.valid_length,n)},f=function(n){var t,r=t=!1;return null!=(l=e(n))&&(t=o(n),r=u(n,l)),{card_type:l,valid:t&&r,luhn_valid:t,length_valid:r}},s=this,g=function(){var n=h(_(s).val());return f(n)},h=function(n){return n.replace(/[ -]/g,"")},m?(this.on("input.jccv",(v=this,function(){return _(v).off("keyup.jccv"),n.call(v,g())})),this.on("keyup.jccv",(p=this,function(){return n.call(p,g())})),n.call(this,g()),this):g()}}).call(this);