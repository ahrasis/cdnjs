import{h as t,hydrate as e,render as o,cloneElement as n}from"preact";function r(t){this.getChildContext=(()=>t.context);const{children:e,...o}=t;return n(e,o)}function s(){const n=new CustomEvent("_preact",{detail:{},bubbles:!0,cancelable:!0});this.dispatchEvent(n),this._vdom=t(r,{...this._props,context:n.detail.context},function e(o,n,r){if(3===o.nodeType)return o.data;if(1!==o.nodeType)return null;let s=[],a={},c=0,h=o.attributes,p=o.childNodes;for(c=h.length;c--;)"slot"!==h[c].name&&(a[h[c].name]=h[c].value,a[i(h[c].name)]=h[c].value);for(c=p.length;c--;){const o=e(p[c],!1),n=p[c].slot;n?a[n]=t(l,{name:n},o):s[c]=o}const d=n?t(l,null,s):s;return t(r||o.nodeName.toLowerCase(),a,d)}(this,!0,this._vdomComponent)),(this.hasAttribute("hydrate")?e:o)(this._vdom,this._root)}function i(t){return t.replace(/-(\w)/g,(t,e)=>e?e.toUpperCase():"")}function a(t,e,r){if(!this._vdom)return;const s={};s[t]=r,s[i(t)]=r,this._vdom=n(this._vdom,s),o(this._vdom,this._root)}function c(){o(this._vdom=null,this._root)}function l(e,o){return t("slot",{...e,ref:t=>{t?(this.ref=t,this._listener||(this._listener=(t=>{t.stopPropagation(),t.detail.context=o}),t.addEventListener("_preact",this._listener))):this.ref.removeEventListener("_preact",this._listener)}})}export default function(t,e,o,n){function r(){const e=Reflect.construct(HTMLElement,[],r);return e._vdomComponent=t,e._root=n&&n.shadow?e.attachShadow({mode:"open"}):e,e}return(r.prototype=Object.create(HTMLElement.prototype)).constructor=r,r.prototype.connectedCallback=s,r.prototype.attributeChangedCallback=a,r.prototype.disconnectedCallback=c,o=o||t.observedAttributes||Object.keys(t.propTypes||{}),r.observedAttributes=o,o.forEach(t=>{Object.defineProperty(r.prototype,t,{get(){return this._vdom.props[t]},set(e){this._vdom?this.attributeChangedCallback(t,null,e):(this._props||(this._props={}),this._props[t]=e,this.connectedCallback());const o=typeof e;null!=e&&"string"!==o&&"boolean"!==o&&"number"!==o||this.setAttribute(t,e)}})}),customElements.define(e||t.tagName||t.displayName||t.name,r)};