"use strict";exports.__esModule=!0,exports.default=void 0;var _react=_interopRequireWildcard(require("react")),_ModalPortal=_interopRequireDefault(require("./ModalPortal")),_ModalAnimation=_interopRequireDefault(require("./ModalAnimation")),_ModalContent=_interopRequireDefault(require("./ModalContent")),_ModalFocusTrap=_interopRequireDefault(require("./ModalFocusTrap"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _getRequireWildcardCache(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return _getRequireWildcardCache=function(){return e},e}function _interopRequireWildcard(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=_getRequireWildcardCache();if(t&&t.has(e))return t.get(e);var a,r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e){Object.prototype.hasOwnProperty.call(e,o)&&((a=i?Object.getOwnPropertyDescriptor(e,o):null)&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o])}return r.default=e,t&&t.set(e,r),r}var uniqueModalIdentifier=0,activeModalStack=[],activeModalListeners={};function notifyActiveModalListeners(){var t;0!==activeModalStack.length&&(t=activeModalStack[activeModalStack.length-1],activeModalStack.forEach(function(e){e in activeModalListeners&&activeModalListeners[e](e===t)}))}function removeActiveModal(e){e in activeModalListeners&&(activeModalListeners[e](!1),delete activeModalListeners[e]);var t=activeModalStack.indexOf(e);-1!==t&&(activeModalStack.splice(t,1),notifyActiveModalListeners())}function addActiveModal(e,t){removeActiveModal(e),activeModalStack.push(e),activeModalListeners[e]=t,notifyActiveModalListeners()}var Modal=(0,_react.forwardRef)(function(e,t){var a=e.animationType,r=e.children,i=e.onDismiss,o=e.onRequestClose,n=e.onShow,l=e.transparent,c=e.visible,u=void 0===c||c,d=(0,_react.useMemo)(function(){return uniqueModalIdentifier++},[]),s=(0,_react.useState)(!1),f=s[0],M=s[1],v=(0,_react.useCallback)(function(){removeActiveModal(d),i&&i()},[d,i]),_=(0,_react.useCallback)(function(){addActiveModal(d,M),n&&n()},[d,n]);return(0,_react.useEffect)(function(){return function(){return removeActiveModal(d)}},[d]),_react.default.createElement(_ModalPortal.default,null,_react.default.createElement(_ModalAnimation.default,{animationType:a,onDismiss:v,onShow:_,visible:u},_react.default.createElement(_ModalFocusTrap.default,{active:f},_react.default.createElement(_ModalContent.default,{active:f,onRequestClose:o,ref:t,transparent:l},r))))}),_default=Modal;exports.default=Modal,module.exports=exports.default;