import*as React from"react";import{forwardRef,useRef}from"react";import StyleSheet from"../StyleSheet";import View from"../View";function normalizeScrollEvent(t){return{nativeEvent:{contentOffset:{get x(){return t.target.scrollLeft},get y(){return t.target.scrollTop}},contentSize:{get height(){return t.target.scrollHeight},get width(){return t.target.scrollWidth}},layoutMeasurement:{get height(){return t.target.offsetHeight},get width(){return t.target.offsetWidth}}},timeStamp:Date.now()}}function shouldEmitScrollEvent(t,e){var r=Date.now()-t;return e>0&&r>=e}var ScrollViewBase=forwardRef(function(t,e){var r=t.accessibilityLabel,o=t.accessibilityRole,l=t.accessibilityState,i=t.children,n=t.importantForAccessibility,c=t.nativeID,s=t.onLayout,a=t.onScroll,u=t.onTouchMove,f=t.onWheel,h=t.pointerEvents,S=t.scrollEnabled,d=void 0===S||S,v=t.scrollEventThrottle,g=void 0===v?0:v,m=t.showsHorizontalScrollIndicator,y=t.showsVerticalScrollIndicator,w=t.style,b=t.dataSet,p=t.testID,E=useRef({isScrolling:!1,scrollLastTick:0}),D=useRef(null);function T(t){return function(e){d&&t&&t(e)}}var L=!1===m||!1===y;return React.createElement(View,{accessibilityLabel:r,accessibilityRole:o,accessibilityState:l,children:i,dataSet:b,importantForAccessibility:n,nativeID:c,onLayout:s,onScroll:function(t){t.persist(),t.stopPropagation(),null!=D.current&&clearTimeout(D.current),D.current=setTimeout(function(){!function(t){E.current.isScrolling=!1,a&&a(normalizeScrollEvent(t))}(t)},100),E.current.isScrolling?shouldEmitScrollEvent(E.current.scrollLastTick,g)&&function(t){E.current.scrollLastTick=Date.now(),a&&a(normalizeScrollEvent(t))}(t):(E.current.isScrolling=!0,E.current.scrollLastTick=Date.now())},onTouchMove:T(u),onWheel:T(f),pointerEvents:h,ref:e,style:[w,!d&&styles.scrollDisabled,L&&styles.hideScrollbar],testID:p})}),styles=StyleSheet.create({scrollDisabled:{overflowX:"hidden",overflowY:"hidden",touchAction:"none"},hideScrollbar:{scrollbarWidth:"none"}});export default ScrollViewBase;