"use strict";exports.__esModule=!0,exports.default=void 0;var _InteractionManager=_interopRequireDefault(require("../../../exports/InteractionManager")),_TouchHistoryMath=_interopRequireDefault(require("../TouchHistoryMath"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var currentCentroidXOfTouchesChangedAfter=_TouchHistoryMath.default.currentCentroidXOfTouchesChangedAfter,currentCentroidYOfTouchesChangedAfter=_TouchHistoryMath.default.currentCentroidYOfTouchesChangedAfter,previousCentroidXOfTouchesChangedAfter=_TouchHistoryMath.default.previousCentroidXOfTouchesChangedAfter,previousCentroidYOfTouchesChangedAfter=_TouchHistoryMath.default.previousCentroidYOfTouchesChangedAfter,currentCentroidX=_TouchHistoryMath.default.currentCentroidX,currentCentroidY=_TouchHistoryMath.default.currentCentroidY,PanResponder={_initializeGestureState:function(e){e.moveX=0,e.moveY=0,e.x0=0,e.y0=0,e.dx=0,e.dy=0,e.vx=0,e.vy=0,e.numberActiveTouches=0,e._accountsForMovesUpTo=0},_updateGestureStateOnMove:function(e,n){e.numberActiveTouches=n.numberActiveTouches,e.moveX=currentCentroidXOfTouchesChangedAfter(n,e._accountsForMovesUpTo),e.moveY=currentCentroidYOfTouchesChangedAfter(n,e._accountsForMovesUpTo);var t=e._accountsForMovesUpTo,o=previousCentroidXOfTouchesChangedAfter(n,t),r=currentCentroidXOfTouchesChangedAfter(n,t),u=previousCentroidYOfTouchesChangedAfter(n,t),a=currentCentroidYOfTouchesChangedAfter(n,t),i=e.dx+(r-o),d=e.dy+(a-u),c=n.mostRecentTimeStamp-e._accountsForMovesUpTo;e.vx=(i-e.dx)/c,e.vy=(d-e.dy)/c,e.dx=i,e.dy=d,e._accountsForMovesUpTo=n.mostRecentTimeStamp},create:function(t){var o={handle:null,shouldCancelClick:!1,timeout:null},r={stateID:Math.random(),moveX:0,moveY:0,x0:0,y0:0,dx:0,dy:0,vx:0,vy:0,numberActiveTouches:0,_accountsForMovesUpTo:0};return{panHandlers:{onStartShouldSetResponder:function(e){return null!=t.onStartShouldSetPanResponder&&t.onStartShouldSetPanResponder(e,r)},onMoveShouldSetResponder:function(e){return null!=t.onMoveShouldSetPanResponder&&t.onMoveShouldSetPanResponder(e,r)},onStartShouldSetResponderCapture:function(e){return 1===e.nativeEvent.touches.length&&PanResponder._initializeGestureState(r),r.numberActiveTouches=e.touchHistory.numberActiveTouches,null!=t.onStartShouldSetPanResponderCapture&&t.onStartShouldSetPanResponderCapture(e,r)},onMoveShouldSetResponderCapture:function(e){var n=e.touchHistory;return PanResponder._updateGestureStateOnMove(r,n),!!t.onMoveShouldSetPanResponderCapture&&t.onMoveShouldSetPanResponderCapture(e,r)},onResponderGrant:function(e){return o.handle||(o.handle=_InteractionManager.default.createInteractionHandle()),o.timeout&&clearInteractionTimeout(o),o.shouldCancelClick=!0,r.x0=currentCentroidX(e.touchHistory),r.y0=currentCentroidY(e.touchHistory),r.dx=0,r.dy=0,t.onPanResponderGrant&&t.onPanResponderGrant(e,r),null==t.onShouldBlockNativeResponder||t.onShouldBlockNativeResponder(e,r)},onResponderReject:function(e){clearInteractionHandle(o,t.onPanResponderReject,e,r)},onResponderRelease:function(e){clearInteractionHandle(o,t.onPanResponderRelease,e,r),setInteractionTimeout(o),PanResponder._initializeGestureState(r)},onResponderStart:function(e){var n=e.touchHistory;r.numberActiveTouches=n.numberActiveTouches,t.onPanResponderStart&&t.onPanResponderStart(e,r)},onResponderMove:function(e){var n=e.touchHistory;PanResponder._updateGestureStateOnMove(r,n),t.onPanResponderMove&&t.onPanResponderMove(e,r)},onResponderEnd:function(e){var n=e.touchHistory;r.numberActiveTouches=n.numberActiveTouches,clearInteractionHandle(o,t.onPanResponderEnd,e,r)},onResponderTerminate:function(e){clearInteractionHandle(o,t.onPanResponderTerminate,e,r),setInteractionTimeout(o),PanResponder._initializeGestureState(r)},onResponderTerminationRequest:function(e){return null==t.onPanResponderTerminationRequest||t.onPanResponderTerminationRequest(e,r)},onClickCapture:function(e){!0===o.shouldCancelClick&&(e.stopPropagation(),e.preventDefault())}},getInteractionHandle:function(){return o.handle}}}};function clearInteractionHandle(e,n,t,o){e.handle&&(_InteractionManager.default.clearInteractionHandle(e.handle),e.handle=null),n&&n(t,o)}function clearInteractionTimeout(e){clearTimeout(e.timeout)}function setInteractionTimeout(e){e.timeout=setTimeout(function(){e.shouldCancelClick=!1},250)}var _default=PanResponder;exports.default=PanResponder,module.exports=exports.default;