"use strict";exports.__esModule=!0,exports.default=bezier;var NEWTON_ITERATIONS=4,NEWTON_MIN_SLOPE=.001,SUBDIVISION_PRECISION=1e-7,SUBDIVISION_MAX_ITERATIONS=10,kSplineTableSize=11,kSampleStepSize=1/(kSplineTableSize-1),float32ArraySupported="function"==typeof Float32Array;function A(e,r){return 1-3*r+3*e}function B(e,r){return 3*r-6*e}function C(e){return 3*e}function calcBezier(e,r,t){return((A(r,t)*e+B(r,t))*e+C(r))*e}function getSlope(e,r,t){return 3*A(r,t)*e*e+2*B(r,t)*e+C(r)}function binarySubdivide(e,r,t,n,S){for(var i,a,o=0,u=r,l=t;0<(i=calcBezier(a=u+(l-u)/2,n,S)-e)?l=a:u=a,Math.abs(i)>SUBDIVISION_PRECISION&&++o<SUBDIVISION_MAX_ITERATIONS;);return a}function newtonRaphsonIterate(e,r,t,n){for(var S=r,i=0;i<NEWTON_ITERATIONS;++i){var a=getSlope(S,t,n);if(0===a)return S;S-=(calcBezier(S,t,n)-e)/a}return S}function bezier(a,r,o,t){if(!(0<=a&&a<=1&&0<=o&&o<=1))throw new Error("bezier x values must be in [0, 1] range");var u=new(float32ArraySupported?Float32Array:Array)(kSplineTableSize);if(a!==r||o!==t)for(var e=0;e<kSplineTableSize;++e)u[e]=calcBezier(e*kSampleStepSize,a,o);return function(e){return a===r&&o===t?e:0===e?0:1===e?1:calcBezier(function(e){for(var r=0,t=1,n=kSplineTableSize-1;t!==n&&u[t]<=e;++t)r+=kSampleStepSize;var S=r+(e-u[--t])/(u[t+1]-u[t])*kSampleStepSize,i=getSlope(S,a,o);return NEWTON_MIN_SLOPE<=i?newtonRaphsonIterate(e,S,a,o):0===i?S:binarySubdivide(e,r,r+kSampleStepSize,a,o)}(e),r,t)}}module.exports=exports.default;