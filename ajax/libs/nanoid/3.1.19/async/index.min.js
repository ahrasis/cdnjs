let crypto=require("crypto"),{urlAlphabet:urlAlphabet}=require("../url-alphabet"),random=e=>new Promise((r,t)=>{crypto.randomFill(Buffer.allocUnsafe(e),(e,l)=>{e?t(e):r(l)})}),customAlphabet=(e,r)=>{let t=(2<<31-Math.clz32(e.length-1|1))-1,l=Math.ceil(1.6*t*r/e.length),n=a=>random(l).then(o=>{let u=l;for(;u--;)if((a+=e[o[u]&t]||"").length===r)return a;return n(a)});return()=>n("")},nanoid=(e=21)=>random(e).then(r=>{let t="";for(;e--;)t+=urlAlphabet[63&r[e]];return t});module.exports={nanoid:nanoid,customAlphabet:customAlphabet,random:random};