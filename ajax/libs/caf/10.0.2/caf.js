/*! caf.js
	v10.0.2 (c) 2020 Kyle Simpson
	MIT License: http://getify.mit-license.org
*/

!function UMD(n,e,l,r){"function"==typeof define&&define.amd?(l=Object.keys(l).map((n=>n.replace(/^\.\//,""))),define(n,l,r)):"undefined"!=typeof module&&module.exports?(l=Object.keys(l).map((n=>require(n))),module.exports=r(...l)):(l=Object.values(l).map((n=>e[n])),e[n]=r(...l))}("CAF","undefined"!=typeof globalThis?globalThis:"undefined"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:new Function("return this")(),{},(function DEF(){"use strict";class n{constructor(n=new AbortController){var e;this.controller=n,this.signal=n.signal;var handleReject=(n,l)=>{var doRej=n=>{l&&(n=this.signal&&this.signal.reason?this.signal.reason:n,l(n),l=null)};this.signal.addEventListener("abort",doRej,!1),e=()=>{this.signal&&(this.signal.removeEventListener("abort",doRej,!1),this.signal.pr&&(this.signal.pr[r]=null)),doRej=null}};this.signal.pr=new Promise(handleReject),this.signal.pr[r]=e,this.signal.pr.catch(e),handleReject=e=null}abort(n){this.signal&&!("reason"in this.signal)&&(this.signal.reason=n),this.controller&&this.controller.abort()}discard(){this.signal&&(this.signal.pr&&(this.signal.pr[r]&&this.signal.pr[r](),this.signal.pr=null),this.signal=this.signal.reason=null),this.controller=null}}let e={};e=Object.assign((function CAF(n){return function instance(e,...r){var i,a;if(({tokenOrSignal:e,signal:i,signalPr:a}=processTokenOrSignal(e)),i.aborted)return a;var o=a.catch((function onCancelation(n){try{var e=s.return();throw void 0!==e.value?e.value:n}finally{s=u=o=f=null}})),{it:s,result:u}=_runner.call(this,n,i,...r),f=Promise.race([u,o]);if(e!==i&&e[l]){let n=function cancelTimer(){e.abort(),e=n=null};f.then(n,n)}else f.catch((()=>{})),e=null;return i=r=null,f}}),{cancelToken:n,delay:delay,timeout:function timeout(e,r="Timeout"){e=Number(e)||0;var i=new n;return delay(i.signal,e).then(cleanup,cleanup),Object.defineProperty(i,l,{value:!0,writable:!1,enumerable:!1,configurable:!1}),i;function cleanup(){i.abort(r),i=null}},signalRace:function signalRace(e){var l=new n,i=e.map(signalPromise),a=i.map((n=>n[r]));return Promise.race(i).catch((function c(n){l.abort(n)})).then((function t(){for(let n of a)n();a=l=null})),l.signal},signalAll:function signalAll(e){var l=new n,i=e.map(signalPromise),a=i.map((n=>n[r]));return Promise.all(i.map((function m(n){return n.catch((n=>n))}))).then((function t(n){l.abort(n)})).then((function t(){for(let n of a)n();a=l=null})),l.signal}});const l=Symbol("Timeout Token"),r=Symbol("Cleanup Function");function delay(n,e){var l,r;return"number"==typeof n&&"number"!=typeof e&&([e,n]=[n,e]),n&&({tokenOrSignal:n,signal:l,signalPr:r}=processTokenOrSignal(n)),l&&l.aborted?r:new Promise((function c(n,i){l&&(r.catch((function onAbort(){a&&(clearTimeout(a),i(`delay (${e}) interrupted`)),n=i=a=l=null})),r=null);var a=setTimeout((function onTimeout(){n("delayed: "+e),n=i=a=l=null}),e)}))}function signalPromise(n){if(n.pr)return n.pr;var e,l=new Promise((function c(l,r){n.addEventListener("abort",r,!1),e=r}));return l[r]=function cleanup(){n&&(n.removeEventListener("abort",e,!1),n=null),l&&(l=l[r]=e=null)},l.catch(l[r]),l}function processTokenOrSignal(e){e instanceof AbortController&&(e=new n(e));var l=e&&e instanceof n?e.signal:e;return{tokenOrSignal:e,signal:l,signalPr:signalPromise(l)}}function _runner(n,...e){var l=n.apply(this,e);return n=e=null,{it:l,result:function getNextResult(n){try{var e=l.next(n);n=null}catch(n){return Promise.reject(n)}return function processResult(n){var e=Promise.resolve(n.value);return n.done?l=null:(e=e.then(getNextResult,(function onRejection(n){return Promise.resolve(l.throw(n)).then(processResult)}))).catch((function cleanup(){l=null})),n=null,e}(e)}()}}return e}));