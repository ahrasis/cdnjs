import _objectWithoutPropertiesLoose from"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose";import _extends from"@babel/runtime/helpers/esm/extends";import styled from"@material-ui/styled-engine";import{propsToClassKey}from"@material-ui/styles";import{styleFunctionSx}from"../Box/styleFunction";import defaultTheme from"./defaultTheme";function isEmpty(e){return 0===Object.keys(e).length}const getStyleOverrides=(e,t)=>{let o={};return t&&t.components&&t.components[e]&&t.components[e].styleOverrides&&(o=t.components[e].styleOverrides),o},getVariantStyles=(e,t)=>{let o=[];t&&t.components&&t.components[e]&&t.components[e].variants&&(o=t.components[e].variants);const s={};return o.forEach(e=>{const t=propsToClassKey(e.props);s[t]=e.style}),s},variantsResolver=(e,t,o,s)=>{var r,n;const{styleProps:l={}}=e;let p={};const m=null==o?void 0:null===(r=o.components)||void 0===r?void 0:null===(n=r[s])||void 0===n?void 0:n.variants;return m&&m.forEach(o=>{let s=!0;Object.keys(o.props).forEach(t=>{l[t]!==o.props[t]&&e[t]!==o.props[t]&&(s=!1)}),s&&(p=_extends({},p,t[propsToClassKey(o.props)]))}),p},shouldForwardProp=e=>"styleProps"!==e&&"theme"!==e&&"sx"!==e,experimentalStyled=(e,t,o={})=>{const s=o.muiName,r=styled(e,_extends({shouldForwardProp:shouldForwardProp,label:s},t));return(...e)=>{const t=e.map(e=>"function"==typeof e?t=>{let{theme:o}=t,s=_objectWithoutPropertiesLoose(t,["theme"]);return e(_extends({theme:isEmpty(o)?defaultTheme:o},s))}:e);return s&&o.overridesResolver&&t.push(e=>{const t=isEmpty(e.theme)?defaultTheme:e.theme;return o.overridesResolver(e,getStyleOverrides(s,t),s)}),s&&t.push(e=>{const t=isEmpty(e.theme)?defaultTheme:e.theme;return variantsResolver(e,getVariantStyles(s,t),t,s)}),t.push(e=>{const t=isEmpty(e.theme)?defaultTheme:e.theme;return styleFunctionSx(e.sx,t)}),r(t)}};export default experimentalStyled;