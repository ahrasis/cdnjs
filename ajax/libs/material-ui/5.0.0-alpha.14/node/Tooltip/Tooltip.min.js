"use strict";var _interopRequireWildcard=require("@babel/runtime/helpers/interopRequireWildcard"),_interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(exports,"__esModule",{value:!0}),exports.testReset=testReset,exports.default=exports.styles=void 0;var _extends2=_interopRequireDefault(require("@babel/runtime/helpers/extends")),_objectWithoutPropertiesLoose2=_interopRequireDefault(require("@babel/runtime/helpers/objectWithoutPropertiesLoose")),React=_interopRequireWildcard(require("react")),_propTypes=_interopRequireDefault(require("prop-types")),_clsx=_interopRequireDefault(require("clsx")),_utils=require("@material-ui/utils"),_colorManipulator=require("../styles/colorManipulator"),_withStyles=_interopRequireDefault(require("../styles/withStyles")),_capitalize=_interopRequireDefault(require("../utils/capitalize")),_Grow=_interopRequireDefault(require("../Grow")),_Popper=_interopRequireDefault(require("../Popper")),_useEventCallback=_interopRequireDefault(require("../utils/useEventCallback")),_useForkRef=_interopRequireDefault(require("../utils/useForkRef")),_useId=_interopRequireDefault(require("../utils/useId")),_useIsFocusVisible=_interopRequireDefault(require("../utils/useIsFocusVisible")),_useControlled=_interopRequireDefault(require("../utils/useControlled")),_useTheme=_interopRequireDefault(require("../styles/useTheme"));function round(e){return Math.round(1e5*e)/1e5}function arrowGenerator(){return{'&[data-popper-placement*="bottom"] $arrow':{top:0,left:0,marginTop:"-0.71em","&::before":{transformOrigin:"0 100%"}},'&[data-popper-placement*="top"] $arrow':{bottom:0,left:0,marginBottom:"-0.71em","&::before":{transformOrigin:"100% 0"}},'&[data-popper-placement*="right"] $arrow':{left:0,marginLeft:"-0.71em",height:"1em",width:"0.71em","&::before":{transformOrigin:"100% 100%"}},'&[data-popper-placement*="left"] $arrow':{right:0,marginRight:"-0.71em",height:"1em",width:"0.71em","&::before":{transformOrigin:"0 0"}}}}const styles=e=>({popper:{zIndex:e.zIndex.tooltip,pointerEvents:"none"},popperInteractive:{pointerEvents:"auto"},popperArrow:arrowGenerator(),tooltip:{backgroundColor:(0,_colorManipulator.alpha)(e.palette.grey[700],.92),borderRadius:e.shape.borderRadius,color:e.palette.common.white,fontFamily:e.typography.fontFamily,padding:"4px 8px",fontSize:e.typography.pxToRem(11),maxWidth:300,wordWrap:"break-word",fontWeight:e.typography.fontWeightMedium},tooltipArrow:{position:"relative",margin:"0"},arrow:{overflow:"hidden",position:"absolute",width:"1em",height:"0.71em",boxSizing:"border-box",color:(0,_colorManipulator.alpha)(e.palette.grey[700],.9),"&::before":{content:'""',margin:"auto",display:"block",width:"100%",height:"100%",backgroundColor:"currentColor",transform:"rotate(45deg)"}},touch:{padding:"8px 16px",fontSize:e.typography.pxToRem(14),lineHeight:`${round(16/14)}em`,fontWeight:e.typography.fontWeightRegular},tooltipPlacementLeft:{transformOrigin:"right center",margin:"0 24px ",[e.breakpoints.up("sm")]:{margin:"0 14px"}},tooltipPlacementRight:{transformOrigin:"left center",margin:"0 24px",[e.breakpoints.up("sm")]:{margin:"0 14px"}},tooltipPlacementTop:{transformOrigin:"center bottom",margin:"24px 0",[e.breakpoints.up("sm")]:{margin:"14px 0"}},tooltipPlacementBottom:{transformOrigin:"center top",margin:"24px 0",[e.breakpoints.up("sm")]:{margin:"14px 0"}}});exports.styles=styles;let hystersisOpen=!1,hystersisTimer=null;function testReset(){hystersisOpen=!1,clearTimeout(hystersisTimer)}function composeEventHandler(e,t){return r=>{t&&t(r),e(r)}}const Tooltip=React.forwardRef(function(e,t){const{arrow:r=!1,children:o,classes:n,describeChild:i=!1,disableFocusListener:a=!1,disableHoverListener:s=!1,disableTouchListener:l=!1,enterDelay:p=100,enterNextDelay:u=0,enterTouchDelay:c=700,followCursor:d=!1,id:m,disableInteractive:f=!1,leaveDelay:h=0,leaveTouchDelay:T=1500,onClose:y,onOpen:b,open:_,placement:R="bottom",PopperComponent:g=_Popper.default,PopperProps:v,title:x,TransitionComponent:q=_Grow.default,TransitionProps:w}=e,E=(0,_objectWithoutPropertiesLoose2.default)(e,["arrow","children","classes","describeChild","disableFocusListener","disableHoverListener","disableTouchListener","enterDelay","enterNextDelay","enterTouchDelay","followCursor","id","disableInteractive","leaveDelay","leaveTouchDelay","onClose","onOpen","open","placement","PopperComponent","PopperProps","title","TransitionComponent","TransitionProps"]),D=(0,_useTheme.default)(),[O,C]=React.useState(),[P,M]=React.useState(null),k=React.useRef(!1),L=f||d,F=React.useRef(),N=React.useRef(),I=React.useRef(),S=React.useRef(),[W,j]=(0,_useControlled.default)({controlled:_,default:!1,name:"Tooltip",state:"open"});let A=W;if("production"!==process.env.NODE_ENV){const{current:e}=React.useRef(void 0!==_);React.useEffect(()=>{O&&O.disabled&&!e&&""!==x&&"button"===O.tagName.toLowerCase()&&console.error(["Material-UI: You are providing a disabled `button` child to the Tooltip component.","A disabled element does not fire events.","Tooltip needs to listen to the child element's events to display the title.","","Add a simple wrapper element, such as a `span`."].join("\n"))},[x,O,e])}const H=(0,_useId.default)(m);React.useEffect(()=>()=>{clearTimeout(F.current),clearTimeout(N.current),clearTimeout(I.current),clearTimeout(S.current)},[]);const z=e=>{clearTimeout(hystersisTimer),hystersisOpen=!0,j(!0),b&&b(e)},B=(0,_useEventCallback.default)(e=>{clearTimeout(hystersisTimer),hystersisTimer=setTimeout(()=>{hystersisOpen=!1},800+h),j(!1),y&&y(e),clearTimeout(F.current),F.current=setTimeout(()=>{k.current=!1},D.transitions.duration.shortest)}),V=e=>{k.current&&"touchstart"!==e.type||(O&&O.removeAttribute("title"),clearTimeout(N.current),clearTimeout(I.current),p||hystersisOpen&&u?(e.persist(),N.current=setTimeout(()=>{z(e)},hystersisOpen?u:p)):z(e))},$=e=>{clearTimeout(N.current),clearTimeout(I.current),e.persist(),I.current=setTimeout(()=>{B(e)},h)},{isFocusVisibleRef:G,onBlur:U,onFocus:Y,ref:X}=(0,_useIsFocusVisible.default)(),[,J]=React.useState(!1),K=e=>{U(e),!1===G.current&&(J(!1),$(e))},Q=e=>{O||C(e.currentTarget),Y(e),!0===G.current&&(J(!0),V(e))},Z=e=>{k.current=!0;const t=o.props;t.onTouchStart&&t.onTouchStart(e)},ee=V,te=$,re=e=>{Z(e),clearTimeout(I.current),clearTimeout(F.current),clearTimeout(S.current),e.persist(),S.current=setTimeout(()=>{V(e)},c)},oe=e=>{o.props.onTouchEnd&&o.props.onTouchEnd(e),clearTimeout(S.current),clearTimeout(I.current),e.persist(),I.current=setTimeout(()=>{B(e)},T)};React.useEffect(()=>{if(A)return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)};function e(e){"Escape"!==e.key&&"Esc"!==e.key||B(e)}},[B,A]);const ne=(0,_useForkRef.default)(C,t),ie=(0,_useForkRef.default)(X,ne),ae=(0,_useForkRef.default)(o.ref,ie);""===x&&(A=!1);const se=React.useRef({x:0,y:0}),le=React.useRef(),pe={},ue="string"==typeof x;i?(pe.title=A||!ue||s?null:x,pe["aria-describedby"]=A?H:null):(pe["aria-label"]=ue?x:null,pe["aria-labelledby"]=A&&!ue?H:null);const ce=(0,_extends2.default)({},pe,E,o.props,{className:(0,_clsx.default)(E.className,o.props.className),onTouchStart:Z,ref:ae},d?{onMouseMove:e=>{const t=o.props;t.onMouseMove&&t.onMouseMove(e),se.current={x:e.clientX,y:e.clientY},le.current&&le.current.update()}}:{});"production"!==process.env.NODE_ENV&&(ce["data-mui-internal-clone-element"]=!0,React.useEffect(()=>{O&&!O.getAttribute("data-mui-internal-clone-element")&&console.error(["Material-UI: The `children` component of the Tooltip is not forwarding its props correctly.","Please make sure that props are spread on the same element that the ref is applied to."].join("\n"))},[O]));const de={};l||(ce.onTouchStart=re,ce.onTouchEnd=oe),s||(ce.onMouseOver=composeEventHandler(ee,ce.onMouseOver),ce.onMouseLeave=composeEventHandler(te,ce.onMouseLeave),L||(de.onMouseOver=ee,de.onMouseLeave=te)),a||(ce.onFocus=composeEventHandler(Q,ce.onFocus),ce.onBlur=composeEventHandler(K,ce.onBlur),L||(de.onFocus=Q,de.onBlur=K)),"production"!==process.env.NODE_ENV&&o.props.title&&console.error(["Material-UI: You have provided a `title` prop to the child of <Tooltip />.",`Remove this title prop \`${o.props.title}\` or the Tooltip component.`].join("\n"));const me=React.useMemo(()=>(0,_utils.deepmerge)({popperOptions:{modifiers:[{name:"arrow",enabled:Boolean(P),options:{element:P,padding:4}}]}},v),[P,v]);return React.createElement(React.Fragment,null,React.cloneElement(o,ce),React.createElement(g,(0,_extends2.default)({className:(0,_clsx.default)(n.popper,!L&&n.popperInteractive,r&&n.popperArrow),placement:R,anchorEl:d?{getBoundingClientRect:()=>({top:se.current.y,left:se.current.x,right:se.current.x,bottom:se.current.y,width:0,height:0})}:O,popperRef:le,open:!!O&&A,id:H,transition:!0},de,me),({placement:e,TransitionProps:t})=>React.createElement(q,(0,_extends2.default)({timeout:D.transitions.duration.shorter},t,w),React.createElement("div",{className:(0,_clsx.default)(n.tooltip,n[`tooltipPlacement${(0,_capitalize.default)(e.split("-")[0])}`],k.current&&n.touch,r&&n.tooltipArrow)},x,r?React.createElement("span",{className:n.arrow,ref:M}):null))))});"production"!==process.env.NODE_ENV&&(Tooltip.propTypes={arrow:_propTypes.default.bool,children:_utils.elementAcceptingRef.isRequired,classes:_propTypes.default.object,className:_propTypes.default.string,describeChild:_propTypes.default.bool,disableFocusListener:_propTypes.default.bool,disableHoverListener:_propTypes.default.bool,disableInteractive:_propTypes.default.bool,disableTouchListener:_propTypes.default.bool,enterDelay:_propTypes.default.number,enterNextDelay:_propTypes.default.number,enterTouchDelay:_propTypes.default.number,followCursor:_propTypes.default.bool,id:_propTypes.default.string,leaveDelay:_propTypes.default.number,leaveTouchDelay:_propTypes.default.number,onClose:_propTypes.default.func,onOpen:_propTypes.default.func,open:_propTypes.default.bool,placement:_propTypes.default.oneOf(["bottom-end","bottom-start","bottom","left-end","left-start","left","right-end","right-start","right","top-end","top-start","top"]),PopperComponent:_propTypes.default.elementType,PopperProps:_propTypes.default.object,title:_propTypes.default.node.isRequired,TransitionComponent:_propTypes.default.elementType,TransitionProps:_propTypes.default.object});var _default=(0,_withStyles.default)(styles,{name:"MuiTooltip",flip:!1})(Tooltip);exports.default=_default;