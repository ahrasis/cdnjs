import _objectWithoutProperties from"@babel/runtime/helpers/esm/objectWithoutProperties";import _defineProperty from"@babel/runtime/helpers/esm/defineProperty";import _extends from"@babel/runtime/helpers/esm/extends";import*as React from"react";import PropTypes from"prop-types";import clsx from"clsx";import{withStyles}from"../styles";import Popper from"../Popper";import ListSubheader from"../ListSubheader";import Paper from"../Paper";import IconButton from"../IconButton";import Chip from"../Chip";import CloseIcon from"../internal/svg-icons/Close";import ArrowDropDownIcon from"../internal/svg-icons/ArrowDropDown";import useAutocomplete,{createFilterOptions}from"../useAutocomplete";export{createFilterOptions};export var styles=function(e){var o;return{root:{"&$focused $clearIndicatorDirty":{visibility:"visible"},"@media (pointer: fine)":{"&:hover $clearIndicatorDirty":{visibility:"visible"}}},fullWidth:{width:"100%"},focused:{},tag:{margin:3,maxWidth:"calc(100% - 6px)"},tagSizeSmall:{margin:2,maxWidth:"calc(100% - 4px)"},hasPopupIcon:{},hasClearIcon:{},inputRoot:{flexWrap:"wrap","$hasPopupIcon &, $hasClearIcon &":{paddingRight:30},"$hasPopupIcon$hasClearIcon &":{paddingRight:56},"& $input":{width:0,minWidth:30},'&[class*="MuiInput-root"]':{paddingBottom:1,"& $input":{padding:4},"& $input:first-child":{padding:"6px 0"}},'&[class*="MuiInput-root"][class*="MuiInput-marginDense"]':{"& $input":{padding:"2px 4px 3px"},"& $input:first-child":{padding:"1px 0 4px"}},'&[class*="MuiOutlinedInput-root"]':{padding:9,"$hasPopupIcon &, $hasClearIcon &":{paddingRight:39},"$hasPopupIcon$hasClearIcon &":{paddingRight:65},"& $input":{padding:"7.5px 4px"},"& $input:first-child":{paddingLeft:6},"& $endAdornment":{right:9}},'&[class*="MuiOutlinedInput-root"][class*="MuiOutlinedInput-marginDense"]':{padding:6,"& $input":{padding:"2.5px 4px"}},'&[class*="MuiFilledInput-root"]':{paddingTop:19,paddingLeft:8,"$hasPopupIcon &, $hasClearIcon &":{paddingRight:39},"$hasPopupIcon$hasClearIcon &":{paddingRight:65},"& $input":{padding:"7px 4px"},"& $endAdornment":{right:9}},'&[class*="MuiFilledInput-root"][class*="MuiFilledInput-marginDense"]':{paddingBottom:1,"& $input":{padding:"2.5px 4px"}}},input:{flexGrow:1,textOverflow:"ellipsis",opacity:0},inputFocused:{opacity:1},endAdornment:{position:"absolute",right:0,top:"calc(50% - 14px)"},clearIndicator:{marginRight:-2,padding:4,visibility:"hidden"},clearIndicatorDirty:{},popupIndicator:{padding:2,marginRight:-2},popupIndicatorOpen:{transform:"rotate(180deg)"},popper:{zIndex:e.zIndex.modal},popperDisablePortal:{position:"absolute"},paper:_extends({},e.typography.body1,{overflow:"auto",margin:"4px 0"}),listbox:{listStyle:"none",margin:0,padding:"8px 0",maxHeight:"40vh",overflow:"auto"},loading:{color:e.palette.text.secondary,padding:"14px 16px"},noOptions:{color:e.palette.text.secondary,padding:"14px 16px"},option:(o={minHeight:48,display:"flex",overflow:"hidden",justifyContent:"flex-start",alignItems:"center",cursor:"pointer",paddingTop:6,boxSizing:"border-box",outline:"0",WebkitTapHighlightColor:"transparent",paddingBottom:6,paddingLeft:16,paddingRight:16},_defineProperty(o,e.breakpoints.up("sm"),{minHeight:"auto"}),_defineProperty(o,'&[aria-selected="true"]',{backgroundColor:e.palette.action.selected}),_defineProperty(o,'&[data-focus="true"]',{backgroundColor:e.palette.action.hover}),_defineProperty(o,"&:active",{backgroundColor:e.palette.action.selected}),_defineProperty(o,'&[aria-disabled="true"]',{opacity:e.palette.action.disabledOpacity,pointerEvents:"none"}),o),groupLabel:{backgroundColor:e.palette.background.paper,top:-8},groupUl:{padding:0,"& $option":{paddingLeft:24}}}};function DisablePortal(e){e.anchorEl,e.open;var o=_objectWithoutProperties(e,["anchorEl","open"]);return React.createElement("div",o)}var _ref=React.createElement(CloseIcon,{fontSize:"small"}),_ref2=React.createElement(ArrowDropDownIcon,null),Autocomplete=React.forwardRef(function(e,o){e.autoComplete,e.autoHighlight,e.autoSelect,e.blurOnSelect;var t,p=e.ChipProps,n=e.classes,r=e.className,i=e.clearOnBlur,a=(void 0===i&&e.freeSolo,e.clearOnEscape,e.clearText),l=void 0===a?"Clear":a,s=e.closeIcon,d=void 0===s?_ref:s,c=e.closeText,u=void 0===c?"Close":c,m=(e.debug,e.defaultValue),g=(void 0===m&&e.multiple,e.disableClearable),P=void 0!==g&&g,b=(e.disableCloseOnSelect,e.disabled),y=void 0!==b&&b,f=(e.disabledItemsFocusable,e.disableListWrap,e.disablePortal),h=void 0!==f&&f,T=(e.filterOptions,e.filterSelectedOptions,e.forcePopupIcon),x=void 0===T?"auto":T,I=e.freeSolo,v=void 0!==I&&I,O=e.fullWidth,C=void 0!==O&&O,R=e.getLimitTagsText,E=void 0===R?function(e){return"+".concat(e)}:R,S=(e.getOptionDisabled,e.getOptionLabel),L=void 0===S?function(e){var o;return null!==(o=e.label)&&void 0!==o?o:e}:S,$=(e.getOptionSelected,e.groupBy),_=e.handleHomeEndKeys,N=(void 0===_&&e.freeSolo,e.id,e.includeInputInList,e.inputValue,e.limitTags),D=void 0===N?-1:N,A=e.ListboxComponent,W=void 0===A?"ul":A,w=e.ListboxProps,F=e.loading,B=void 0!==F&&F,H=e.loadingText,k=void 0===H?"Loadingâ€¦":H,z=e.multiple,M=void 0!==z&&z,V=e.noOptionsText,j=void 0===V?"No options":V,G=(e.onChange,e.onClose,e.onHighlightChange,e.onInputChange,e.onOpen,e.open,e.openOnFocus,e.openText),K=void 0===G?"Open":G,q=(e.options,e.PaperComponent),U=void 0===q?Paper:q,J=e.PopperComponent,Q=void 0===J?Popper:J,X=e.popupIcon,Y=void 0===X?_ref2:X,Z=e.renderGroup,ee=e.renderInput,oe=e.renderOption,te=e.renderTags,pe=e.selectOnFocus,ne=(void 0===pe&&e.freeSolo,e.size),re=void 0===ne?"medium":ne,ie=(e.value,_objectWithoutProperties(e,["autoComplete","autoHighlight","autoSelect","blurOnSelect","ChipProps","classes","className","clearOnBlur","clearOnEscape","clearText","closeIcon","closeText","debug","defaultValue","disableClearable","disableCloseOnSelect","disabled","disabledItemsFocusable","disableListWrap","disablePortal","filterOptions","filterSelectedOptions","forcePopupIcon","freeSolo","fullWidth","getLimitTagsText","getOptionDisabled","getOptionLabel","getOptionSelected","groupBy","handleHomeEndKeys","id","includeInputInList","inputValue","limitTags","ListboxComponent","ListboxProps","loading","loadingText","multiple","noOptionsText","onChange","onClose","onHighlightChange","onInputChange","onOpen","open","openOnFocus","openText","options","PaperComponent","PopperComponent","popupIcon","renderGroup","renderInput","renderOption","renderTags","selectOnFocus","size","value"])),ae=h?DisablePortal:Q,le=useAutocomplete(_extends({},e,{componentName:"Autocomplete"})),se=le.getRootProps,de=le.getInputProps,ce=le.getInputLabelProps,ue=le.getPopupIndicatorProps,me=le.getClearProps,ge=le.getTagProps,Pe=le.getListboxProps,be=le.getOptionProps,ye=le.value,fe=le.dirty,he=le.id,Te=le.popupOpen,xe=le.focused,Ie=le.focusedTag,ve=le.anchorEl,Oe=le.setAnchorEl,Ce=le.inputValue,Re=le.groupedOptions;if(M&&ye.length>0){var Ee=function(e){return _extends({className:clsx(n.tag,"small"===re&&n.tagSizeSmall),disabled:y},ge(e))};t=te?te(ye,Ee):ye.map(function(e,o){return React.createElement(Chip,_extends({label:L(e),size:re},Ee({index:o}),p))})}if(D>-1&&Array.isArray(t)){var Se=t.length-D;!xe&&Se>0&&(t=t.splice(0,D)).push(React.createElement("span",{className:n.tag,key:t.length},E(Se)))}var Le=Z||function(e){return React.createElement("li",{key:e.key},React.createElement(ListSubheader,{className:n.groupLabel,component:"div"},e.group),React.createElement("ul",{className:n.groupUl},e.children))},$e=oe||function(e,o){return React.createElement("li",e,L(o))},_e=function(e,o){var t=be({option:e,index:o});return $e(_extends({},t,{className:n.option}),e,{selected:t["aria-selected"],inputValue:Ce})},Ne=!P&&!y,De=(!v||!0===x)&&!1!==x;return React.createElement(React.Fragment,null,React.createElement("div",_extends({ref:o,className:clsx(n.root,r,xe&&n.focused,C&&n.fullWidth,Ne&&n.hasClearIcon,De&&n.hasPopupIcon)},se(ie)),ee({id:he,disabled:y,fullWidth:!0,size:"small"===re?"small":void 0,InputLabelProps:ce(),InputProps:{ref:Oe,className:n.inputRoot,startAdornment:t,endAdornment:React.createElement("div",{className:n.endAdornment},Ne?React.createElement(IconButton,_extends({},me(),{"aria-label":l,title:l,className:clsx(n.clearIndicator,fe&&n.clearIndicatorDirty)}),d):null,De?React.createElement(IconButton,_extends({},ue(),{disabled:y,"aria-label":Te?u:K,title:Te?u:K,className:clsx(n.popupIndicator,Te&&n.popupIndicatorOpen)}),Y):null)},inputProps:_extends({className:clsx(n.input,-1===Ie&&n.inputFocused),disabled:y},de())})),Te&&ve?React.createElement(ae,{className:clsx(n.popper,h&&n.popperDisablePortal),style:{width:ve?ve.clientWidth:null},role:"presentation",anchorEl:ve,open:!0},React.createElement(U,{className:n.paper},B&&0===Re.length?React.createElement("div",{className:n.loading},k):null,0!==Re.length||v||B?null:React.createElement("div",{className:n.noOptions},j),Re.length>0?React.createElement(W,_extends({className:n.listbox},Pe(),w),Re.map(function(e,o){return $?Le({key:e.key,group:e.group,children:e.options.map(function(o,t){return _e(o,e.index+t)})}):_e(e,o)})):null)):null)});"production"!==process.env.NODE_ENV&&(Autocomplete.propTypes={autoComplete:PropTypes.bool,autoHighlight:PropTypes.bool,autoSelect:PropTypes.bool,blurOnSelect:PropTypes.oneOfType([PropTypes.oneOf(["mouse","touch"]),PropTypes.bool]),ChipProps:PropTypes.object,classes:PropTypes.object,className:PropTypes.string,clearOnBlur:PropTypes.bool,clearOnEscape:PropTypes.bool,clearText:PropTypes.string,closeIcon:PropTypes.node,closeText:PropTypes.string,debug:PropTypes.bool,defaultValue:PropTypes.any,disableClearable:PropTypes.bool,disableCloseOnSelect:PropTypes.bool,disabled:PropTypes.bool,disabledItemsFocusable:PropTypes.bool,disableListWrap:PropTypes.bool,disablePortal:PropTypes.bool,filterOptions:PropTypes.func,filterSelectedOptions:PropTypes.bool,forcePopupIcon:PropTypes.oneOfType([PropTypes.oneOf(["auto"]),PropTypes.bool]),freeSolo:PropTypes.bool,fullWidth:PropTypes.bool,getLimitTagsText:PropTypes.func,getOptionDisabled:PropTypes.func,getOptionLabel:PropTypes.func,getOptionSelected:PropTypes.func,groupBy:PropTypes.func,handleHomeEndKeys:PropTypes.bool,id:PropTypes.string,includeInputInList:PropTypes.bool,inputValue:PropTypes.string,limitTags:PropTypes.number,ListboxComponent:PropTypes.elementType,ListboxProps:PropTypes.object,loading:PropTypes.bool,loadingText:PropTypes.node,multiple:PropTypes.bool,noOptionsText:PropTypes.node,onChange:PropTypes.func,onClose:PropTypes.func,onHighlightChange:PropTypes.func,onInputChange:PropTypes.func,onOpen:PropTypes.func,open:PropTypes.bool,openOnFocus:PropTypes.bool,openText:PropTypes.string,options:PropTypes.array.isRequired,PaperComponent:PropTypes.elementType,PopperComponent:PropTypes.elementType,popupIcon:PropTypes.node,renderGroup:PropTypes.func,renderInput:PropTypes.func.isRequired,renderOption:PropTypes.func,renderTags:PropTypes.func,selectOnFocus:PropTypes.bool,size:PropTypes.oneOf(["medium","small"]),value:PropTypes.any});export default withStyles(styles,{name:"MuiAutocomplete"})(Autocomplete);