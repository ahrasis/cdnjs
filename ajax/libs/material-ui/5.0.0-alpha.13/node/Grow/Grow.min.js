"use strict";var _interopRequireWildcard=require("@babel/runtime/helpers/interopRequireWildcard"),_interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _extends2=_interopRequireDefault(require("@babel/runtime/helpers/extends")),_objectWithoutPropertiesLoose2=_interopRequireDefault(require("@babel/runtime/helpers/objectWithoutPropertiesLoose")),React=_interopRequireWildcard(require("react")),_propTypes=_interopRequireDefault(require("prop-types")),_utils=require("@material-ui/utils"),_reactTransitionGroup=require("react-transition-group"),_useTheme=_interopRequireDefault(require("../styles/useTheme")),_utils2=require("../transitions/utils"),_useForkRef=_interopRequireDefault(require("../utils/useForkRef"));function getScale(e){return`scale(${e}, ${e**2})`}const styles={entering:{opacity:1,transform:getScale(1)},entered:{opacity:1,transform:"none"}},Grow=React.forwardRef(function(e,t){const{children:r,in:n,onEnter:o,onEntered:i,onEntering:u,onExit:a,onExited:s,onExiting:p,style:l,timeout:d="auto",TransitionComponent:c=_reactTransitionGroup.Transition}=e,f=(0,_objectWithoutPropertiesLoose2.default)(e,["children","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"]),_=React.useRef(),y=React.useRef(),m=(0,_useTheme.default)(),E=React.useRef(null),T=(0,_useForkRef.default)(r.ref,t),R=(0,_useForkRef.default)(E,T),g=e=>t=>{if(e){const r=E.current;void 0===t?e(r):e(r,t)}},x=g(u),q=g((e,t)=>{(0,_utils2.reflow)(e);const{duration:r,delay:n}=(0,_utils2.getTransitionProps)({style:l,timeout:d},{mode:"enter"});let i;"auto"===d?(i=m.transitions.getAutoHeightDuration(e.clientHeight),y.current=i):i=r,e.style.transition=[m.transitions.create("opacity",{duration:i,delay:n}),m.transitions.create("transform",{duration:.666*i,delay:n})].join(","),o&&o(e,t)}),b=g(i),h=g(p),D=g(e=>{const{duration:t,delay:r}=(0,_utils2.getTransitionProps)({style:l,timeout:d},{mode:"exit"});let n;"auto"===d?(n=m.transitions.getAutoHeightDuration(e.clientHeight),y.current=n):n=t,e.style.transition=[m.transitions.create("opacity",{duration:n,delay:r}),m.transitions.create("transform",{duration:.666*n,delay:r||.333*n})].join(","),e.style.opacity="0",e.style.transform=getScale(.75),a&&a(e)}),v=g(s);return React.useEffect(()=>()=>{clearTimeout(_.current)},[]),React.createElement(c,(0,_extends2.default)({appear:!0,in:n,nodeRef:E,onEnter:q,onEntered:b,onEntering:x,onExit:D,onExited:v,onExiting:h,addEndListener:e=>{"auto"===d&&(_.current=setTimeout(e,y.current||0))},timeout:"auto"===d?null:d},f),(e,t)=>React.cloneElement(r,(0,_extends2.default)({style:(0,_extends2.default)({opacity:0,transform:getScale(.75),visibility:"exited"!==e||n?void 0:"hidden"},styles[e],l,r.props.style),ref:R},t)))});"production"!==process.env.NODE_ENV&&(Grow.propTypes={children:_utils.elementAcceptingRef,in:_propTypes.default.bool,onEnter:_propTypes.default.func,onEntered:_propTypes.default.func,onEntering:_propTypes.default.func,onExit:_propTypes.default.func,onExited:_propTypes.default.func,onExiting:_propTypes.default.func,style:_propTypes.default.object,timeout:_propTypes.default.oneOfType([_propTypes.default.oneOf(["auto"]),_propTypes.default.number,_propTypes.default.shape({appear:_propTypes.default.number,enter:_propTypes.default.number,exit:_propTypes.default.number})])}),Grow.muiSupportAuto=!0;var _default=Grow;exports.default=_default;