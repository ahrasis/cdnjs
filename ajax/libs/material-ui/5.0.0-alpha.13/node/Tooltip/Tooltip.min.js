"use strict";var _interopRequireWildcard=require("@babel/runtime/helpers/interopRequireWildcard"),_interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(exports,"__esModule",{value:!0}),exports.testReset=testReset,exports.default=exports.styles=void 0;var _extends2=_interopRequireDefault(require("@babel/runtime/helpers/extends")),_objectWithoutPropertiesLoose2=_interopRequireDefault(require("@babel/runtime/helpers/objectWithoutPropertiesLoose")),React=_interopRequireWildcard(require("react")),_propTypes=_interopRequireDefault(require("prop-types")),_clsx=_interopRequireDefault(require("clsx")),_utils=require("@material-ui/utils"),_colorManipulator=require("../styles/colorManipulator"),_withStyles=_interopRequireDefault(require("../styles/withStyles")),_capitalize=_interopRequireDefault(require("../utils/capitalize")),_Grow=_interopRequireDefault(require("../Grow")),_Popper=_interopRequireDefault(require("../Popper")),_useEventCallback=_interopRequireDefault(require("../utils/useEventCallback")),_useForkRef=_interopRequireDefault(require("../utils/useForkRef")),_useId=_interopRequireDefault(require("../utils/useId")),_useIsFocusVisible=_interopRequireDefault(require("../utils/useIsFocusVisible")),_useControlled=_interopRequireDefault(require("../utils/useControlled")),_useTheme=_interopRequireDefault(require("../styles/useTheme"));function round(e){return Math.round(1e5*e)/1e5}function arrowGenerator(){return{'&[x-placement*="bottom"] $arrow':{top:0,left:0,marginTop:"-0.71em",marginLeft:4,marginRight:4,"&::before":{transformOrigin:"0 100%"}},'&[x-placement*="top"] $arrow':{bottom:0,left:0,marginBottom:"-0.71em",marginLeft:4,marginRight:4,"&::before":{transformOrigin:"100% 0"}},'&[x-placement*="right"] $arrow':{left:0,marginLeft:"-0.71em",height:"1em",width:"0.71em",marginTop:4,marginBottom:4,"&::before":{transformOrigin:"100% 100%"}},'&[x-placement*="left"] $arrow':{right:0,marginRight:"-0.71em",height:"1em",width:"0.71em",marginTop:4,marginBottom:4,"&::before":{transformOrigin:"0 0"}}}}const styles=e=>({popper:{zIndex:e.zIndex.tooltip,pointerEvents:"none"},popperInteractive:{pointerEvents:"auto"},popperArrow:arrowGenerator(),tooltip:{backgroundColor:(0,_colorManipulator.alpha)(e.palette.grey[700],.92),borderRadius:e.shape.borderRadius,color:e.palette.common.white,fontFamily:e.typography.fontFamily,padding:"4px 8px",fontSize:e.typography.pxToRem(11),maxWidth:300,wordWrap:"break-word",fontWeight:e.typography.fontWeightMedium},tooltipArrow:{position:"relative",margin:"0"},arrow:{overflow:"hidden",position:"absolute",width:"1em",height:"0.71em",boxSizing:"border-box",color:(0,_colorManipulator.alpha)(e.palette.grey[700],.9),"&::before":{content:'""',margin:"auto",display:"block",width:"100%",height:"100%",backgroundColor:"currentColor",transform:"rotate(45deg)"}},touch:{padding:"8px 16px",fontSize:e.typography.pxToRem(14),lineHeight:`${round(16/14)}em`,fontWeight:e.typography.fontWeightRegular},tooltipPlacementLeft:{transformOrigin:"right center",margin:"0 24px ",[e.breakpoints.up("sm")]:{margin:"0 14px"}},tooltipPlacementRight:{transformOrigin:"left center",margin:"0 24px",[e.breakpoints.up("sm")]:{margin:"0 14px"}},tooltipPlacementTop:{transformOrigin:"center bottom",margin:"24px 0",[e.breakpoints.up("sm")]:{margin:"14px 0"}},tooltipPlacementBottom:{transformOrigin:"center top",margin:"24px 0",[e.breakpoints.up("sm")]:{margin:"14px 0"}}});exports.styles=styles;let hystersisOpen=!1,hystersisTimer=null;function testReset(){hystersisOpen=!1,clearTimeout(hystersisTimer)}function composeEventHandler(e,t){return r=>{t&&t(r),e(r)}}const Tooltip=React.forwardRef(function(e,t){const{arrow:r=!1,children:o,classes:n,describeChild:i=!1,disableFocusListener:s=!1,disableHoverListener:a=!1,disableTouchListener:l=!1,enterDelay:p=100,enterNextDelay:u=0,enterTouchDelay:c=700,followCursor:d=!1,id:m,disableInteractive:f=!1,leaveDelay:h=0,leaveTouchDelay:T=1500,onClose:y,onOpen:b,open:_,placement:g="bottom",PopperComponent:R=_Popper.default,PopperProps:v,title:x,TransitionComponent:q=_Grow.default,TransitionProps:w}=e,E=(0,_objectWithoutPropertiesLoose2.default)(e,["arrow","children","classes","describeChild","disableFocusListener","disableHoverListener","disableTouchListener","enterDelay","enterNextDelay","enterTouchDelay","followCursor","id","disableInteractive","leaveDelay","leaveTouchDelay","onClose","onOpen","open","placement","PopperComponent","PopperProps","title","TransitionComponent","TransitionProps"]),D=(0,_useTheme.default)(),[O,C]=React.useState(),[P,M]=React.useState(null),L=React.useRef(!1),k=React.useRef(),F=React.useRef(),N=React.useRef(),I=React.useRef(),[S,W]=(0,_useControlled.default)({controlled:_,default:!1,name:"Tooltip",state:"open"});let j=S;if("production"!==process.env.NODE_ENV){const{current:e}=React.useRef(void 0!==_);React.useEffect(()=>{O&&O.disabled&&!e&&""!==x&&"button"===O.tagName.toLowerCase()&&console.error(["Material-UI: You are providing a disabled `button` child to the Tooltip component.","A disabled element does not fire events.","Tooltip needs to listen to the child element's events to display the title.","","Add a simple wrapper element, such as a `span`."].join("\n"))},[x,O,e])}const B=(0,_useId.default)(m);React.useEffect(()=>()=>{clearTimeout(k.current),clearTimeout(F.current),clearTimeout(N.current),clearTimeout(I.current)},[]);const H=e=>{clearTimeout(hystersisTimer),hystersisOpen=!0,W(!0),b&&b(e)},A=(0,_useEventCallback.default)(e=>{clearTimeout(hystersisTimer),hystersisTimer=setTimeout(()=>{hystersisOpen=!1},800+h),W(!1),y&&y(e),clearTimeout(k.current),k.current=setTimeout(()=>{L.current=!1},D.transitions.duration.shortest)}),z=e=>{L.current&&"touchstart"!==e.type||(O&&O.removeAttribute("title"),clearTimeout(F.current),clearTimeout(N.current),p||hystersisOpen&&u?(e.persist(),F.current=setTimeout(()=>{H(e)},hystersisOpen?u:p)):H(e))},V=e=>{clearTimeout(F.current),clearTimeout(N.current),e.persist(),N.current=setTimeout(()=>{A(e)},h)},{isFocusVisibleRef:$,onBlur:G,onFocus:U,ref:Y}=(0,_useIsFocusVisible.default)(),[,X]=React.useState(!1),J=e=>{G(e),!1===$.current&&(X(!1),V(e))},K=e=>{O||C(e.currentTarget),U(e),!0===$.current&&(X(!0),z(e))},Q=e=>{L.current=!0;const t=o.props;t.onTouchStart&&t.onTouchStart(e)},Z=z,ee=V,te=e=>{Q(e),clearTimeout(N.current),clearTimeout(k.current),clearTimeout(I.current),e.persist(),I.current=setTimeout(()=>{z(e)},c)},re=e=>{o.props.onTouchEnd&&o.props.onTouchEnd(e),clearTimeout(I.current),clearTimeout(N.current),e.persist(),N.current=setTimeout(()=>{A(e)},T)};React.useEffect(()=>{if(j)return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)};function e(e){"Escape"!==e.key&&"Esc"!==e.key||A(e)}},[A,j]);const oe=(0,_useForkRef.default)(C,t),ne=(0,_useForkRef.default)(Y,oe),ie=(0,_useForkRef.default)(o.ref,ne);""===x&&(j=!1);const se=React.useRef({x:0,y:0}),ae=React.useRef(),le={},pe="string"==typeof x;i?(le.title=j||!pe||a?null:x,le["aria-describedby"]=j?B:null):(le["aria-label"]=pe?x:null,le["aria-labelledby"]=j&&!pe?B:null);const ue=(0,_extends2.default)({},le,E,o.props,{className:(0,_clsx.default)(E.className,o.props.className),onTouchStart:Q,ref:ie},d?{onMouseMove:e=>{const t=o.props;t.onMouseMove&&t.onMouseMove(e),se.current={x:e.clientX,y:e.clientY},ae.current&&ae.current.scheduleUpdate()}}:{});"production"!==process.env.NODE_ENV&&(ue["data-mui-internal-clone-element"]=!0,React.useEffect(()=>{O&&!O.getAttribute("data-mui-internal-clone-element")&&console.error(["Material-UI: The `children` component of the Tooltip is not forwarding its props correctly.","Please make sure that props are spread on the same element that the ref is applied to."].join("\n"))},[O]));const ce={};l||(ue.onTouchStart=te,ue.onTouchEnd=re),a||(ue.onMouseOver=composeEventHandler(Z,ue.onMouseOver),ue.onMouseLeave=composeEventHandler(ee,ue.onMouseLeave),f||(ce.onMouseOver=Z,ce.onMouseLeave=ee)),s||(ue.onFocus=composeEventHandler(K,ue.onFocus),ue.onBlur=composeEventHandler(J,ue.onBlur),f||(ce.onFocus=K,ce.onBlur=J)),"production"!==process.env.NODE_ENV&&o.props.title&&console.error(["Material-UI: You have provided a `title` prop to the child of <Tooltip />.",`Remove this title prop \`${o.props.title}\` or the Tooltip component.`].join("\n"));const de=React.useMemo(()=>(0,_utils.deepmerge)({popperOptions:{modifiers:{arrow:{enabled:Boolean(P),element:P}}}},v),[P,v]);return React.createElement(React.Fragment,null,React.cloneElement(o,ue),React.createElement(R,(0,_extends2.default)({className:(0,_clsx.default)(n.popper,!f&&n.popperInteractive,r&&n.popperArrow),placement:g,anchorEl:d?{clientHeight:0,clientWidth:0,getBoundingClientRect:()=>({top:se.current.y,left:se.current.x,right:se.current.x,bottom:se.current.y,width:0,height:0})}:O,popperRef:ae,open:!!O&&j,id:B,transition:!0},ce,de),({placement:e,TransitionProps:t})=>React.createElement(q,(0,_extends2.default)({timeout:D.transitions.duration.shorter},t,w),React.createElement("div",{className:(0,_clsx.default)(n.tooltip,n[`tooltipPlacement${(0,_capitalize.default)(e.split("-")[0])}`],L.current&&n.touch,r&&n.tooltipArrow)},x,r?React.createElement("span",{className:n.arrow,ref:M}):null))))});"production"!==process.env.NODE_ENV&&(Tooltip.propTypes={arrow:_propTypes.default.bool,children:_utils.elementAcceptingRef.isRequired,classes:_propTypes.default.object,className:_propTypes.default.string,describeChild:_propTypes.default.bool,disableFocusListener:_propTypes.default.bool,disableHoverListener:_propTypes.default.bool,disableInteractive:_propTypes.default.bool,disableTouchListener:_propTypes.default.bool,enterDelay:_propTypes.default.number,enterNextDelay:_propTypes.default.number,enterTouchDelay:_propTypes.default.number,followCursor:_propTypes.default.bool,id:_propTypes.default.string,leaveDelay:_propTypes.default.number,leaveTouchDelay:_propTypes.default.number,onClose:_propTypes.default.func,onOpen:_propTypes.default.func,open:_propTypes.default.bool,placement:_propTypes.default.oneOf(["bottom-end","bottom-start","bottom","left-end","left-start","left","right-end","right-start","right","top-end","top-start","top"]),PopperComponent:_propTypes.default.elementType,PopperProps:_propTypes.default.object,title:_propTypes.default.node.isRequired,TransitionComponent:_propTypes.default.elementType,TransitionProps:_propTypes.default.object});var _default=(0,_withStyles.default)(styles,{name:"MuiTooltip",flip:!1})(Tooltip);exports.default=_default;