import _objectWithoutProperties from"@babel/runtime/helpers/esm/objectWithoutProperties";import _extends from"@babel/runtime/helpers/esm/extends";import*as React from"react";import PropTypes from"prop-types";import clsx from"clsx";import{deepmerge,elementTypeAcceptingRef,refType}from"@material-ui/utils";import experimentalStyled from"../styles/experimentalStyled";import useThemeProps from"../styles/useThemeProps";import useForkRef from"../utils/useForkRef";import useEventCallback from"../utils/useEventCallback";import useIsFocusVisible from"../utils/useIsFocusVisible";import TouchRipple from"./TouchRipple";import buttonBaseClasses from"./buttonBaseClasses";var overridesResolver=function(e,o){var t=e.disabled,n=e.focusVisible;return deepmerge(o.root||{},_extends({},t&&o.disabled,n&&o.focusVisible))};export var ButtonBaseRoot=experimentalStyled("button",{},{name:"MuiButtonBase",slot:"Root",overridesResolver:overridesResolver})({display:"inline-flex",alignItems:"center",justifyContent:"center",position:"relative",boxSizing:"border-box",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none",textDecoration:"none",color:"inherit","&::-moz-focus-inner":{borderStyle:"none"},"&.Mui-disabled":{pointerEvents:"none",cursor:"default"},"@media print":{colorAdjust:"exact"}});var useUtilityClasses=function(e){var o=e.disabled,t=e.focusVisible,n=e.focusVisibleClassName,r=e.classes,s=void 0===r?{}:r;return{root:clsx(buttonBaseClasses.root,s.root,t&&[buttonBaseClasses.focusVisible,s.focusVisible,n],o&&[buttonBaseClasses.disabled,s.disabled])}},ButtonBase=React.forwardRef(function(e,o){var t=useThemeProps({props:e,name:"MuiButtonBase"}),n=t.action,r=t.buttonRef,s=t.centerRipple,u=void 0!==s&&s,p=t.children,i=t.className,c=t.component,a=void 0===c?"button":c,l=t.disabled,f=void 0!==l&&l,d=t.disableRipple,b=void 0!==d&&d,m=t.disableTouchRipple,T=void 0!==m&&m,y=t.focusRipple,v=void 0!==y&&y,R=(t.focusVisibleClassName,t.onBlur),h=t.onClick,P=t.onFocus,g=t.onFocusVisible,B=t.onKeyDown,x=t.onKeyUp,k=t.onMouseDown,C=t.onMouseLeave,E=t.onMouseUp,M=t.onTouchEnd,V=t.onTouchMove,D=t.onTouchStart,F=t.onDragLeave,N=t.tabIndex,S=void 0===N?0:N,I=t.TouchRippleProps,U=_objectWithoutProperties(t,["action","buttonRef","centerRipple","children","className","component","disabled","disableRipple","disableTouchRipple","focusRipple","focusVisibleClassName","onBlur","onClick","onFocus","onFocusVisible","onKeyDown","onKeyUp","onMouseDown","onMouseLeave","onMouseUp","onTouchEnd","onTouchMove","onTouchStart","onDragLeave","tabIndex","TouchRippleProps"]),w=React.useRef(null),_=React.useRef(null),j=useIsFocusVisible(),K=j.isFocusVisibleRef,L=j.onFocus,A=j.onBlur,O=j.ref,W=React.useState(!1),z=W[0],H=W[1];function q(e,o){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:T;return useEventCallback(function(n){return o&&o(n),!t&&_.current&&_.current[e](n),!0})}f&&z&&H(!1),React.useEffect(function(){K.current=z},[z,K]),React.useImperativeHandle(n,function(){return{focusVisible:function(){H(!0),w.current.focus()}}},[]),React.useEffect(function(){z&&v&&!b&&_.current.pulsate()},[b,v,z]);var G=q("start",k),J=q("stop",F),Q=q("stop",E),X=q("stop",function(e){z&&e.preventDefault(),C&&C(e)}),Y=q("start",D),Z=q("stop",M),$=q("stop",V),ee=q("stop",function(e){A(e),!1===K.current&&H(!1),R&&R(e)},!1),oe=useEventCallback(function(e){w.current||(w.current=e.currentTarget),L(e),!0===K.current&&(H(!0),g&&g(e)),P&&P(e)}),te=function(){var e=w.current;return a&&"button"!==a&&!("A"===e.tagName&&e.href)},ne=React.useRef(!1),re=useEventCallback(function(e){v&&!ne.current&&z&&_.current&&" "===e.key&&(ne.current=!0,e.persist(),_.current.stop(e,function(){_.current.start(e)})),e.target===e.currentTarget&&te()&&" "===e.key&&e.preventDefault(),B&&B(e),e.target===e.currentTarget&&te()&&"Enter"===e.key&&!f&&(e.preventDefault(),h&&h(e))}),se=useEventCallback(function(e){v&&" "===e.key&&_.current&&z&&!e.defaultPrevented&&(ne.current=!1,e.persist(),_.current.stop(e,function(){_.current.pulsate(e)})),x&&x(e),h&&e.target===e.currentTarget&&te()&&" "===e.key&&!e.defaultPrevented&&h(e)}),ue=a;"button"===ue&&U.href&&(ue="a");var pe={};"button"===ue?(pe.type=void 0===U.type?"button":U.type,pe.disabled=f):("a"===ue&&U.href||(pe.role="button"),pe["aria-disabled"]=f);var ie=useForkRef(r,o),ce=useForkRef(O,w),ae=useForkRef(ie,ce),le=React.useState(!1),fe=le[0],de=le[1];React.useEffect(function(){de(!0)},[]);var be=fe&&!b&&!f;"production"!==process.env.NODE_ENV&&React.useEffect(function(){be&&!_.current&&console.error(["Material-UI: The `component` prop provided to ButtonBase is invalid.","Please make sure the children prop is rendered in this custom component."].join("\n"))},[be]);var me=_extends({},t,{centerRipple:u,component:a,disabled:f,disableRipple:b,disableTouchRipple:T,focusRipple:v,tabIndex:S,focusVisible:z}),Te=useUtilityClasses(me);return React.createElement(ButtonBaseRoot,_extends({as:ue,className:clsx(Te.root,i),styleProps:me,onBlur:ee,onClick:h,onFocus:oe,onKeyDown:re,onKeyUp:se,onMouseDown:G,onMouseLeave:X,onMouseUp:Q,onDragLeave:J,onTouchEnd:Z,onTouchMove:$,onTouchStart:Y,ref:ae,tabIndex:f?-1:S},pe,U),p,be?React.createElement(TouchRipple,_extends({ref:_,center:u},I)):null)});"production"!==process.env.NODE_ENV&&(ButtonBase.propTypes={action:refType,buttonRef:refType,centerRipple:PropTypes.bool,children:PropTypes.node,classes:PropTypes.object,className:PropTypes.string,component:elementTypeAcceptingRef,disabled:PropTypes.bool,disableRipple:PropTypes.bool,disableTouchRipple:PropTypes.bool,focusRipple:PropTypes.bool,focusVisibleClassName:PropTypes.string,href:PropTypes.any,onBlur:PropTypes.func,onClick:PropTypes.func,onDragLeave:PropTypes.func,onFocus:PropTypes.func,onFocusVisible:PropTypes.func,onKeyDown:PropTypes.func,onKeyUp:PropTypes.func,onMouseDown:PropTypes.func,onMouseLeave:PropTypes.func,onMouseUp:PropTypes.func,onTouchEnd:PropTypes.func,onTouchMove:PropTypes.func,onTouchStart:PropTypes.func,tabIndex:PropTypes.oneOfType([PropTypes.number,PropTypes.string]),TouchRippleProps:PropTypes.object,type:PropTypes.oneOfType([PropTypes.oneOf(["button","reset","submit"]),PropTypes.string])});export default ButtonBase;