"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Tabs=exports.tabsFactory=void 0;var _createClass=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),_react=require("react"),_react2=_interopRequireDefault(_react),_propTypes=require("prop-types"),_propTypes2=_interopRequireDefault(_propTypes),_classnames3=require("classnames"),_classnames4=_interopRequireDefault(_classnames3),_reactCssThemr=require("react-css-themr"),_identifiers=require("../identifiers"),_FontIcon=require("../font_icon/FontIcon"),_FontIcon2=_interopRequireDefault(_FontIcon),_isComponentOfType=require("../utils/is-component-of-type"),_isComponentOfType2=_interopRequireDefault(_isComponentOfType),_Tab=require("./Tab"),_Tab2=_interopRequireDefault(_Tab),_TabContent=require("./TabContent"),_TabContent2=_interopRequireDefault(_TabContent);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var factory=function(a,i,c){var e=(_inherits(s,_react.Component),_createClass(s,[{key:"componentDidMount",value:function(){window.addEventListener("resize",this.handleResize),this.handleResize()}},{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.index,r=t.children,t=e.index,e=e.children;n===t&&r===e||this.updatePointer(n)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.handleResize),clearTimeout(this.resizeTimeout)}},{key:"parseChildren",value:function(){var n=this,r=[],o=[];return _react2.default.Children.forEach(this.props.children,function(e){var t;t=e,(0,_isComponentOfType2.default)(a,t)?(r.push(e),e.props.children&&o.push(_react2.default.createElement(i,{theme:n.props.theme},e.props.children))):(t=e,(0,_isComponentOfType2.default)(i,t)&&o.push(e))}),{headers:r,contents:o}}},{key:"renderHeaders",value:function(e){var r=this;return e.map(function(n,e){return _react2.default.cloneElement(n,{children:null,key:e,index:e,theme:r.props.theme,active:r.props.index===e,onClick:function(e,t){r.handleHeaderClick(t),n.props.onClick&&n.props.onClick(e)}})})}},{key:"renderContents",value:function(e){var n=this,e=e.map(function(e,t){return _react2.default.cloneElement(e,{key:t,theme:n.props.theme,active:n.props.index===t,hidden:n.props.index!==t&&"display"===n.props.hideMode,tabIndex:t})});return"display"===this.props.hideMode?e:e.filter(function(e,t){return t===n.props.index})}},{key:"render",value:function(){var t=this,e=this.props,n=e.className,r=e.disableAnimatedBottomBorder,o=e.theme,a=e.fixed,i=e.inverse,s=this.state.arrows,l=s.left,p=s.right,u=this.parseChildren(),e=u.headers,s=u.contents,u=(0,_classnames4.default)(o.pointer,_defineProperty({},o.disableAnimation,r)),n=(0,_classnames4.default)(o.tabs,(_defineProperty(r={},o.fixed,a),_defineProperty(r,o.inverse,i),r),n);return _react2.default.createElement("div",{"data-react-toolbox":"tabs",className:n},_react2.default.createElement("div",{className:o.navigationContainer},l&&_react2.default.createElement("div",{className:o.arrowContainer,onClick:this.scrollRight},_react2.default.createElement(c,{className:o.arrow,value:"keyboard_arrow_left"})),_react2.default.createElement("nav",{className:o.navigation,ref:function(e){t.navigationNode=e}},this.renderHeaders(e),_react2.default.createElement("span",{className:u,style:this.state.pointer})),p&&_react2.default.createElement("div",{className:o.arrowContainer,onClick:this.scrollLeft},_react2.default.createElement(c,{className:o.arrow,value:"keyboard_arrow_right"}))),this.renderContents(s))}}]),s);function s(){var e,o;_classCallCheck(this,s);for(var t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];return(e=o=_possibleConstructorReturn(this,(e=s.__proto__||Object.getPrototypeOf(s)).call.apply(e,[this].concat(n)))).state={pointer:{},arrows:{}},o.handleHeaderClick=function(e){o.props.onChange&&o.props.onChange(e)},o.handleResize=function(){o.resizeTimeout&&clearTimeout(o.resizeTimeout),o.resizeTimeout=setTimeout(function(){o.updatePointer(o.props.index),o.updateArrows()},100)},o.updatePointer=function(r){o.navigationNode&&o.navigationNode.children[r]&&requestAnimationFrame(function(){var e=o.navigationNode.getBoundingClientRect(),t=o.navigationNode.children[r].getBoundingClientRect(),n=o.navigationNode.scrollLeft;o.setState({pointer:{top:e.height+"px",left:t.left+n-e.left+"px",width:t.width+"px"}})})},o.updateArrows=function(){var e,t,n=o.navigationNode.children.length-2;0<=n&&(e=o.navigationNode.scrollLeft,t=o.navigationNode.getBoundingClientRect(),n=o.navigationNode.children[n].getBoundingClientRect(),o.setState({arrows:{left:0<e,right:t.right<n.right-5}}))},o.scrollNavigation=function(e){var t=o.navigationNode.scrollLeft;o.navigationNode.scrollLeft+=e*o.navigationNode.clientWidth,o.navigationNode.scrollLeft!==t&&o.updateArrows()},o.scrollRight=function(){return o.scrollNavigation(-1)},o.scrollLeft=function(){return o.scrollNavigation(1)},_possibleConstructorReturn(o,e)}return e.propTypes={children:_propTypes2.default.node,className:_propTypes2.default.string,disableAnimatedBottomBorder:_propTypes2.default.bool,fixed:_propTypes2.default.bool,hideMode:_propTypes2.default.oneOf(["display","unmounted"]),index:_propTypes2.default.number,inverse:_propTypes2.default.bool,onChange:_propTypes2.default.func,theme:_propTypes2.default.shape({arrow:_propTypes2.default.string,arrowContainer:_propTypes2.default.string,disableAnimation:_propTypes2.default.string,fixed:_propTypes2.default.string,inverse:_propTypes2.default.string,navigation:_propTypes2.default.string,navigationContainer:_propTypes2.default.string,pointer:_propTypes2.default.string,tabs:_propTypes2.default.string})},e.defaultProps={index:0,fixed:!1,inverse:!1,hideMode:"unmounted"},e},Tabs=factory(_Tab2.default,_TabContent2.default,_FontIcon2.default);exports.default=(0,_reactCssThemr.themr)(_identifiers.TABS)(Tabs),exports.tabsFactory=factory,exports.Tabs=Tabs;