"use strict";var _react=require("react"),_react2=_interopRequireDefault(_react),_enzyme=require("enzyme"),_Input=require("../../input/Input"),_ProgressBar=require("../../progress_bar/ProgressBar"),_Slider=require("../Slider"),_theme=require("../theme.css"),_theme2=_interopRequireDefault(_theme);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}describe("Slider",function(){describe("#positionToValue",function(){it("returns min when position is less than origin",function(){var e=(0,_enzyme.shallow)(_react2.default.createElement(_Slider.Slider,{min:-500,max:500})).instance();e.setState({sliderStart:500,sliderLength:100}),expect(e.positionToValue({x:400})).toEqual(-500)}),it("returns max when position is more and origin plus length",function(){var e=(0,_enzyme.shallow)(_react2.default.createElement(_Slider.Slider,{min:-500,max:500})).instance();e.setState({sliderStart:500,sliderLength:100}),expect(e.positionToValue({x:900})).toEqual(500)}),it("returns the proper position when the position is inside slider",function(){var e=(0,_enzyme.shallow)(_react2.default.createElement(_Slider.Slider,{min:-500,max:500})).instance();e.setState({sliderStart:500,sliderLength:100}),expect(e.positionToValue({x:520})).toEqual(-300)})}),describe("#trimValue",function(){it("rounds to the proper number",function(){var e=(0,_enzyme.shallow)(_react2.default.createElement(_Slider.Slider,{min:0,max:100,step:.1})).instance();expect(e.trimValue(57.16)).toEqual(57.2),expect(e.trimValue(57.12)).toEqual(57.1)}),it("returns min if number is less than min",function(){var e=(0,_enzyme.shallow)(_react2.default.createElement(_Slider.Slider,{min:0,max:100,step:.1})).instance();expect(e.trimValue(-57.16)).toEqual(0)}),it("returns max if number is more than max",function(){var e=(0,_enzyme.shallow)(_react2.default.createElement(_Slider.Slider,{min:0,max:100,step:.1})).instance();expect(e.trimValue(257.16)).toEqual(100)})}),describe("#valueForInput",function(){it("returns a fixed number when an integer is given",function(){var e=(0,_enzyme.shallow)(_react2.default.createElement(_Slider.Slider,{min:0,max:100,step:.01})).instance();expect(e.valueForInput(4)).toEqual("4.00")}),it("returns a fixed number when a float is given",function(){var e=(0,_enzyme.shallow)(_react2.default.createElement(_Slider.Slider,{min:0,max:100,step:.01})).instance();expect(e.valueForInput(4.06)).toEqual("4.06")})}),describe("#knobOffset",function(){it("returns percentage offset of knob for slider with given min/max/value props",function(){var e=(0,_enzyme.shallow)(_react2.default.createElement(_Slider.Slider,{min:-500,max:500,value:-250})).instance();expect(e.knobOffset()).toEqual(25)})}),describe("#render",function(){it("contains a linear progress bar with proper properties",function(){var e=(0,_enzyme.mount)(_react2.default.createElement(_Slider.Slider,{min:100,max:1e3,value:140})).find(_ProgressBar.ProgressBar);expect(e.props().mode).toEqual("determinate"),expect(e.props().type).toEqual("linear"),expect(e.props().value).toEqual(140),expect(e.props().min).toEqual(100),expect(e.props().max).toEqual(1e3)}),it("contains an input component if its editable",function(){var e=(0,_enzyme.mount)(_react2.default.createElement(_Slider.Slider,{editable:!0,value:130})),t=e.instance(),e=e.find(_Input.Input);expect(parseInt(e.props().value,10)).toEqual(t.props.value)}),it("contains the proper number of snaps when snapped",function(){var e=(0,_enzyme.mount)(_react2.default.createElement(_Slider.Slider,{editable:!0,pinned:!0,theme:_theme2.default})).find("div").first();expect(e.props().className).toContain(_theme2.default.ring),expect(e.props().className).toContain(_theme2.default.pinned)})}),describe("#events",function(){it("sets pressed state when knob is clicked",function(){var e=jest.fn(),e=(0,_enzyme.mount)(_react2.default.createElement(_Slider.Slider,{min:-500,max:500,onChange:e}));e.childAt(0).childAt(0).simulate("mouseDown"),expect(e.state().pressed).toEqual(!0)}),it("sets pressed state when knob is touched",function(){var e=jest.fn(),e=(0,_enzyme.mount)(_react2.default.createElement(_Slider.Slider,{min:-500,max:500,onChange:e}));e.childAt(0).childAt(0).simulate("touchStart",{touches:[{pageX:200}]}),expect(e.state().pressed).toEqual(!0)}),it("sets a proper value when the slider is clicked",function(){var e=jest.fn(),t=(0,_enzyme.mount)(_react2.default.createElement(_Slider.Slider,{min:-500,max:500,onChange:e})),n=t.instance();n.setState({sliderStart:0,sliderLength:1e3}),n.handleResize=function(e,t){t()},t.childAt(0).simulate("mouseDown",{pageX:200,pageY:0}),expect(e).toHaveBeenCalledWith(-300)}),it("sets a proper value when the slider is touched",function(){var e=jest.fn(),t=(0,_enzyme.mount)(_react2.default.createElement(_Slider.Slider,{min:-500,max:500,onChange:e})),n=t.instance();n.setState({sliderStart:0,sliderLength:1e3}),n.handleResize=function(e,t){t()},t.childAt(0).simulate("touchStart",{touches:[{pageX:200,pageY:0}]}),expect(e).toHaveBeenCalledWith(-300)}),it("changes input value when slider changes",function(){var e=jest.fn(),t=(0,_enzyme.mount)(_react2.default.createElement(_Slider.Slider,{editable:!0,onChange:e})),n=t.instance();n.setState({sliderStart:0,sliderLength:1e3}),n.handleResize=function(e,t){t()},t.childAt(0).simulate("mouseDown",{pageX:900}),expect(e).toHaveBeenCalledWith(90)}),it("changes its value when input is blurred",function(){var e=jest.fn(),t=(0,_enzyme.mount)(_react2.default.createElement(_Slider.Slider,{editable:!0,value:50,onChange:e}));t.find("input").simulate("change",{target:{value:"80"}}),t.find("input").simulate("blur"),expect(e).toHaveBeenCalled(),expect(e.mock.calls[0][0]).toEqual(80)}),it("calls onChange callback when the value is changed",function(){var e=jest.fn(),t=(0,_enzyme.mount)(_react2.default.createElement(_Slider.Slider,{editable:!0,value:50,onChange:e}));t.instance().setState({sliderStart:0,sliderLength:1e3}),t.childAt(0).simulate("mouseDown",{pageX:900,pageY:0}),expect(e).toHaveBeenCalled()})})});