"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Tabs=exports.tabsFactory=void 0;var _createClass=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),_react=require("react"),_react2=_interopRequireDefault(_react),_classnames3=require("classnames"),_classnames4=_interopRequireDefault(_classnames3),_reactCssThemr=require("react-css-themr"),_identifiers=require("../identifiers"),_FontIcon=require("../font_icon/FontIcon"),_FontIcon2=_interopRequireDefault(_FontIcon),_isComponentOfType=require("../utils/is-component-of-type"),_isComponentOfType2=_interopRequireDefault(_isComponentOfType),_Tab=require("./Tab"),_Tab2=_interopRequireDefault(_Tab),_TabContent=require("./TabContent"),_TabContent2=_interopRequireDefault(_TabContent);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var factory=function(a,i,u){var e=(_inherits(s,_react.Component),_createClass(s,[{key:"componentDidMount",value:function(){window.addEventListener("resize",this.handleResize),this.handleResize()}},{key:"componentDidUpdate",value:function(e){var t=this.props,r=t.index,n=t.children,t=e.index,e=e.children;r===t&&n===e||this.updatePointer(r)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.handleResize),clearTimeout(this.resizeTimeout)}},{key:"parseChildren",value:function(){var r=this,n=[],o=[];return _react2.default.Children.forEach(this.props.children,function(e){var t;t=e,(0,_isComponentOfType2.default)(a,t)?(n.push(e),e.props.children&&o.push(_react2.default.createElement(i,{theme:r.props.theme},e.props.children))):(t=e,(0,_isComponentOfType2.default)(i,t)&&o.push(e))}),{headers:n,contents:o}}},{key:"renderHeaders",value:function(e){var n=this;return e.map(function(r,e){return _react2.default.cloneElement(r,{children:null,key:e,index:e,theme:n.props.theme,active:n.props.index===e,onClick:function(e,t){n.handleHeaderClick(t),r.props.onClick&&r.props.onClick(e)}})})}},{key:"renderContents",value:function(e){var r=this,e=e.map(function(e,t){return _react2.default.cloneElement(e,{key:t,theme:r.props.theme,active:r.props.index===t,hidden:r.props.index!==t&&"display"===r.props.hideMode,tabIndex:t})});return"display"===this.props.hideMode?e:e.filter(function(e,t){return t===r.props.index})}},{key:"render",value:function(){var t=this,e=this.props,r=e.className,n=e.disableAnimatedBottomBorder,o=e.theme,a=e.fixed,i=e.inverse,s=this.state.arrows,c=s.left,l=s.right,p=this.parseChildren(),e=p.headers,s=p.contents,p=(0,_classnames4.default)(o.pointer,_defineProperty({},o.disableAnimation,n)),r=(0,_classnames4.default)(o.tabs,(_defineProperty(n={},o.fixed,a),_defineProperty(n,o.inverse,i),n),r);return _react2.default.createElement("div",{"data-react-toolbox":"tabs",className:r},_react2.default.createElement("div",{className:o.navigationContainer},c&&_react2.default.createElement("div",{className:o.arrowContainer,onClick:this.scrollRight},_react2.default.createElement(u,{className:o.arrow,value:"keyboard_arrow_left"})),_react2.default.createElement("nav",{className:o.navigation,ref:function(e){t.navigationNode=e}},this.renderHeaders(e),_react2.default.createElement("span",{className:p,style:this.state.pointer})),l&&_react2.default.createElement("div",{className:o.arrowContainer,onClick:this.scrollLeft},_react2.default.createElement(u,{className:o.arrow,value:"keyboard_arrow_right"}))),this.renderContents(s))}}]),s);function s(){var e,o;_classCallCheck(this,s);for(var t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];return(e=o=_possibleConstructorReturn(this,(e=s.__proto__||Object.getPrototypeOf(s)).call.apply(e,[this].concat(r)))).state={pointer:{},arrows:{}},o.handleHeaderClick=function(e){o.props.onChange&&o.props.onChange(e)},o.handleResize=function(){o.resizeTimeout&&clearTimeout(o.resizeTimeout),o.resizeTimeout=setTimeout(function(){o.updatePointer(o.props.index),o.updateArrows()},100)},o.updatePointer=function(n){o.navigationNode&&o.navigationNode.children[n]&&requestAnimationFrame(function(){var e=o.navigationNode.getBoundingClientRect(),t=o.navigationNode.children[n].getBoundingClientRect(),r=o.navigationNode.scrollLeft;o.setState({pointer:{top:e.height+"px",left:t.left+r-e.left+"px",width:t.width+"px"}})})},o.updateArrows=function(){var e,t,r=o.navigationNode.children.length-2;0<=r&&(e=o.navigationNode.scrollLeft,t=o.navigationNode.getBoundingClientRect(),r=o.navigationNode.children[r].getBoundingClientRect(),o.setState({arrows:{left:0<e,right:t.right<r.right-5}}))},o.scrollNavigation=function(e){var t=o.navigationNode.scrollLeft;o.navigationNode.scrollLeft+=e*o.navigationNode.clientWidth,o.navigationNode.scrollLeft!==t&&o.updateArrows()},o.scrollRight=function(){return o.scrollNavigation(-1)},o.scrollLeft=function(){return o.scrollNavigation(1)},_possibleConstructorReturn(o,e)}return e.propTypes={children:_react.PropTypes.node,className:_react.PropTypes.string,disableAnimatedBottomBorder:_react.PropTypes.bool,fixed:_react.PropTypes.bool,hideMode:_react.PropTypes.oneOf(["display","unmounted"]),index:_react.PropTypes.number,inverse:_react.PropTypes.bool,onChange:_react.PropTypes.func,theme:_react.PropTypes.shape({arrow:_react.PropTypes.string,arrowContainer:_react.PropTypes.string,disableAnimation:_react.PropTypes.string,fixed:_react.PropTypes.string,inverse:_react.PropTypes.string,navigation:_react.PropTypes.string,navigationContainer:_react.PropTypes.string,pointer:_react.PropTypes.string,tabs:_react.PropTypes.string})},e.defaultProps={index:0,fixed:!1,inverse:!1,hideMode:"unmounted"},e},Tabs=factory(_Tab2.default,_TabContent2.default,_FontIcon2.default);exports.default=(0,_reactCssThemr.themr)(_identifiers.TABS)(Tabs),exports.tabsFactory=factory,exports.Tabs=Tabs;