"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.AppBar=exports.appBarFactory=void 0;var _createClass=function(){function o(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,t,r){return t&&o(e.prototype,t),r&&o(e,r),e}}(),_react=require("react"),_react2=_interopRequireDefault(_react),_classnames=require("classnames"),_classnames2=_interopRequireDefault(_classnames),_reactCssThemr=require("react-css-themr"),_identifiers=require("../identifiers"),_IconButton=require("../button/IconButton"),_IconButton2=_interopRequireDefault(_IconButton);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var factory=function(l){var e=(_inherits(s,_react2.default.Component),_createClass(s,[{key:"componentDidMount",value:function(){this.props.scrollHide&&this.initializeScroll()}},{key:"componentWillReceiveProps",value:function(e){!this.props.scrollHide&&e.scrollHide&&this.initializeScroll(),this.props.scrollHide&&!e.scrollHide&&this.endScroll()}},{key:"componentWillUnmount",value:function(){this.props.scrollHide&&this.endScroll()}},{key:"initializeScroll",value:function(){window.addEventListener("scroll",this.handleScroll);var e=this.rootNode.getBoundingClientRect().height;this.curScroll=window.scrollY,this.setState({height:e})}},{key:"endScroll",value:function(){window.removeEventListener("scroll",this.handleScroll)}},{key:"render",value:function(){var t=this,e=this.props,r=e.children,o=e.leftIcon,n=e.onLeftIconClick,s=e.onRightIconClick,a=e.rightIcon,i=e.theme,c=e.title,e=(0,_classnames2.default)(i.appBar,(_defineProperty(e={},i.fixed,this.props.fixed),_defineProperty(e,i.flat,this.props.flat),_defineProperty(e,i.scrollHide,this.state.hidden),e),this.props.className),c="string"==typeof c?_react2.default.createElement("h1",{className:(0,_classnames2.default)(i.title)},c):c,o=o&&_react2.default.createElement(l,{inverse:!0,className:(0,_classnames2.default)(i.leftIcon),onClick:n,icon:o}),a=a&&_react2.default.createElement(l,{inverse:!0,className:(0,_classnames2.default)(i.rightIcon),onClick:s,icon:a});return _react2.default.createElement("header",{className:e,"data-react-toolbox":"app-bar",ref:function(e){t.rootNode=e}},_react2.default.createElement("div",{className:i.inner},o,c,r,a))}}]),s);function s(){var e,t;_classCallCheck(this,s);for(var r=arguments.length,o=Array(r),n=0;n<r;n++)o[n]=arguments[n];return(e=t=_possibleConstructorReturn(this,(e=s.__proto__||Object.getPrototypeOf(s)).call.apply(e,[this].concat(o)))).state={hidden:!1,height:0},t.handleScroll=function(){var e=t.curScroll-window.scrollY<0&&void 0!==window.scrollY&&window.scrollY>t.state.height;t.setState({hidden:e}),t.curScroll=window.scrollY},_possibleConstructorReturn(t,e)}return e.propTypes={children:_react.PropTypes.node,className:_react.PropTypes.string,fixed:_react.PropTypes.bool,flat:_react.PropTypes.bool,leftIcon:_react.PropTypes.oneOfType([_react.PropTypes.string,_react.PropTypes.element]),onLeftIconClick:_react.PropTypes.func,onRightIconClick:_react.PropTypes.func,rightIcon:_react.PropTypes.oneOfType([_react.PropTypes.string,_react.PropTypes.element]),scrollHide:_react.PropTypes.bool,theme:_react.PropTypes.shape({appBar:_react.PropTypes.string,inner:_react.PropTypes.string,fixed:_react.PropTypes.string,flat:_react.PropTypes.string,leftIcon:_react.PropTypes.string,rightIcon:_react.PropTypes.string,scrollHide:_react.PropTypes.string,title:_react.PropTypes.string}),title:_react.PropTypes.oneOfType([_react.PropTypes.string,_react.PropTypes.element])},e.defaultProps={className:"",fixed:!1,flat:!1,scrollHide:!1},e},AppBar=factory(_IconButton2.default);exports.default=(0,_reactCssThemr.themr)(_identifiers.APP_BAR)(AppBar),exports.appBarFactory=factory,exports.AppBar=AppBar;