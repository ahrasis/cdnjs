"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.DatePicker=exports.Calendar=exports.datePickerFactory=exports.DatePickerDialog=void 0;var _extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a,r=arguments[t];for(a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},_createClass=function(){function r(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,a){return t&&r(e.prototype,t),a&&r(e,a),e}}(),_react=require("react"),_react2=_interopRequireDefault(_react),_propTypes=require("prop-types"),_propTypes2=_interopRequireDefault(_propTypes),_classnames2=require("classnames"),_classnames3=_interopRequireDefault(_classnames2),_reactCssThemr=require("react-css-themr"),_identifiers=require("../identifiers"),_events=require("../utils/events"),_events2=_interopRequireDefault(_events),_time=require("../utils/time"),_time2=_interopRequireDefault(_time),_IconButton=require("../button/IconButton"),_IconButton2=_interopRequireDefault(_IconButton),_Input=require("../input/Input"),_Input2=_interopRequireDefault(_Input),_Dialog=require("../dialog/Dialog"),_Dialog2=_interopRequireDefault(_Dialog),_Calendar=require("./Calendar"),_Calendar2=_interopRequireDefault(_Calendar),_DatePickerDialog=require("./DatePickerDialog"),_DatePickerDialog2=_interopRequireDefault(_DatePickerDialog);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _defineProperty(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function _objectWithoutProperties(e,t){var a,r={};for(a in e)0<=t.indexOf(a)||Object.prototype.hasOwnProperty.call(e,a)&&(r[a]=e[a]);return r}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var factory=function(h,m){var e=(_inherits(o,_react.Component),_createClass(o,[{key:"componentWillReceiveProps",value:function(e){e.active!==this.props.active&&this.state.active!==e.active&&this.setState({active:e.active})}},{key:"render",value:function(){var e=this.props,t=(e.active,e.onDismiss,e.autoOk),a=e.cancelLabel,r=e.enabledDates,n=e.disabledDates,o=e.inputClassName,s=e.inputFormat,i=e.locale,p=e.maxDate,l=e.minDate,u=e.okLabel,c=e.onEscKeyDown,f=e.onOverlayClick,d=e.readonly,_=e.sundayFirstDayOfWeek,y=e.value,D=_objectWithoutProperties(e,["active","onDismiss","autoOk","cancelLabel","enabledDates","disabledDates","inputClassName","inputFormat","locale","maxDate","minDate","okLabel","onEscKeyDown","onOverlayClick","readonly","sundayFirstDayOfWeek","value"]),e=s||_time2.default.formatDate,s="[object Date]"===Object.prototype.toString.call(y)?y:void 0,y=void 0===s?"":e(y,i);return _react2.default.createElement("div",{"data-react-toolbox":"date-picker",className:this.props.theme.container},_react2.default.createElement(h,_extends({},D,{className:(0,_classnames3.default)(this.props.theme.input,_defineProperty({},o,o)),disabled:d,error:this.props.error,icon:this.props.icon,label:this.props.label,name:this.props.name,onFocus:this.handleInputFocus,onKeyPress:this.handleInputKeyPress,onClick:this.handleInputClick,readOnly:!0,type:"text",value:y})),_react2.default.createElement(m,{active:this.state.active,autoOk:t,cancelLabel:a,className:this.props.className,disabledDates:n,enabledDates:r,locale:i,maxDate:p,minDate:l,name:this.props.name,onDismiss:this.handleDismiss,okLabel:u,onEscKeyDown:c||this.handleDismiss,onOverlayClick:f||this.handleDismiss,onSelect:this.handleSelect,sundayFirstDayOfWeek:_,theme:this.props.theme,value:s}))}}]),o);function o(){var e,a;_classCallCheck(this,o);for(var t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];return(e=a=_possibleConstructorReturn(this,(e=o.__proto__||Object.getPrototypeOf(o)).call.apply(e,[this].concat(r)))).state={active:a.props.active},a.handleDismiss=function(){a.setState({active:!1}),a.props.onDismiss&&a.props.onDismiss()},a.handleInputFocus=function(e){_events2.default.pauseEvent(e),a.setState({active:!0})},a.handleInputBlur=function(e){_events2.default.pauseEvent(e),a.setState({active:!1})},a.handleInputClick=function(e){_events2.default.pauseEvent(e),a.setState({active:!0}),a.props.onClick&&a.props.onClick(e)},a.handleInputKeyPress=function(e){13===e.charCode&&(_events2.default.pauseEvent(e),a.setState({active:!0})),a.props.onKeyPress&&a.props.onKeyPress(e)},a.handleSelect=function(e,t){a.props.onChange&&a.props.onChange(e,t),a.setState({active:!1})},_possibleConstructorReturn(a,e)}return e.propTypes={active:_propTypes2.default.bool,autoOk:_propTypes2.default.bool,cancelLabel:_propTypes2.default.string,className:_propTypes2.default.string,disabledDates:_propTypes2.default.arrayOf(_propTypes2.default.instanceOf(Date)),enabledDates:_propTypes2.default.arrayOf(_propTypes2.default.instanceOf(Date)),error:_propTypes2.default.string,icon:_propTypes2.default.oneOfType([_propTypes2.default.string,_propTypes2.default.element]),inputClassName:_propTypes2.default.string,inputFormat:_propTypes2.default.func,label:_propTypes2.default.string,locale:_propTypes2.default.oneOfType([_propTypes2.default.string,_propTypes2.default.object]),maxDate:_propTypes2.default.instanceOf(Date),minDate:_propTypes2.default.instanceOf(Date),name:_propTypes2.default.string,okLabel:_propTypes2.default.string,onChange:_propTypes2.default.func,onClick:_propTypes2.default.func,onDismiss:_propTypes2.default.func,onEscKeyDown:_propTypes2.default.func,onKeyPress:_propTypes2.default.func,onOverlayClick:_propTypes2.default.func,readonly:_propTypes2.default.bool,sundayFirstDayOfWeek:_propTypes2.default.bool,theme:_propTypes2.default.shape({container:_propTypes2.default.string,input:_propTypes2.default.string}),value:_propTypes2.default.oneOfType([_propTypes2.default.instanceOf(Date),_propTypes2.default.string])},e.defaultProps={active:!1,locale:"en",sundayFirstDayOfWeek:!1},e},Calendar=(0,_Calendar2.default)(_IconButton2.default),DatePickerDialog=(0,_DatePickerDialog2.default)(_Dialog2.default,Calendar),DatePicker=factory(_Input2.default,DatePickerDialog);exports.default=(0,_reactCssThemr.themr)(_identifiers.DATE_PICKER)(DatePicker),exports.DatePickerDialog=DatePickerDialog,exports.datePickerFactory=factory,exports.Calendar=Calendar,exports.DatePicker=DatePicker;