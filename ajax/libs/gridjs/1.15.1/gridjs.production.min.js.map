{"version":3,"file":"gridjs.production.min.js","sources":["../node_modules/tslib/tslib.es6.js","../node_modules/preact/dist/preact.module.js","../src/i18n/en_US.ts","../src/i18n/language.ts","../src/view/base.tsx","../src/util/getConfig.ts","../src/util/id.ts","../src/base.ts","../src/view/htmlElement.tsx","../src/util/html.ts","../src/cell.ts","../src/row.ts","../src/tabular.ts","../src/util/array.ts","../src/util/eventEmitter.ts","../src/pipeline/processor.ts","../src/pipeline/filter/globalSearch.ts","../src/operator/search.ts","../src/util/className.ts","../src/view/base/store.ts","../src/view/plugin/search/store.ts","../src/view/base/actions.ts","../src/view/plugin/search/actions.ts","../src/pipeline/filter/serverGlobalSearch.ts","../src/view/plugin/search/search.tsx","../src/util/debounce.ts","../src/pipeline/limit/pagination.ts","../src/pipeline/limit/serverPagination.ts","../src/view/plugin/pagination.tsx","../src/util/width.ts","../src/view/table/shadow.tsx","../src/header.ts","../src/plugin.ts","../src/util/string.ts","../src/util/dispatcher.ts","../src/storage/storage.ts","../src/storage/memory.ts","../src/util/log.ts","../src/storage/server.ts","../src/storage/storageUtils.ts","../src/pipeline/pipeline.ts","../src/pipeline/extractor/storage.ts","../src/pipeline/transformer/arrayToTabular.ts","../src/pipeline/initiator/server.ts","../src/pipeline/transformer/storageResponseToArray.ts","../src/pipeline/pipelineUtils.ts","../src/types.ts","../src/config.ts","../src/view/table/td.tsx","../node_modules/preact/hooks/dist/hooks.module.js","../src/view/table/tr.tsx","../src/view/table/messageRow.tsx","../src/view/table/tbody.tsx","../src/pipeline/sort/native.ts","../src/view/plugin/sort/store.ts","../src/view/plugin/sort/actions.ts","../src/pipeline/sort/server.ts","../src/view/plugin/sort/sort.tsx","../src/view/table/th.tsx","../src/view/table/thead.tsx","../src/view/table/table.tsx","../src/view/headerContainer.tsx","../src/view/footerContainer.tsx","../src/view/container.tsx","../src/grid.ts"],"sourcesContent":["/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport var __createBinding = Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n});\r\n\r\nexport function __exportStar(m, exports) {\r\n    for (var p in m) if (p !== \"default\" && !exports.hasOwnProperty(p)) __createBinding(exports, m, p);\r\n}\r\n\r\nexport function __values(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n};\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nvar __setModuleDefault = Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n\r\nexport function __classPrivateFieldGet(receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n}\r\n\r\nexport function __classPrivateFieldSet(receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n}\r\n","var n,l,u,i,t,r,o,f={},e=[],c=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;function s(n,l){for(var u in l)n[u]=l[u];return n}function a(n){var l=n.parentNode;l&&l.removeChild(n)}function v(n,l,u){var i,t=arguments,r={};for(i in l)\"key\"!==i&&\"ref\"!==i&&(r[i]=l[i]);if(arguments.length>3)for(u=[u],i=3;i<arguments.length;i++)u.push(t[i]);if(null!=u&&(r.children=u),\"function\"==typeof n&&null!=n.defaultProps)for(i in n.defaultProps)void 0===r[i]&&(r[i]=n.defaultProps[i]);return h(n,r,l&&l.key,l&&l.ref,null)}function h(l,u,i,t,r){var o={type:l,props:u,key:i,ref:t,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,constructor:void 0,__v:r};return null==r&&(o.__v=o),n.vnode&&n.vnode(o),o}function y(){return{current:null}}function p(n){return n.children}function d(n,l){this.props=n,this.context=l}function _(n,l){if(null==l)return n.__?_(n.__,n.__.__k.indexOf(n)+1):null;for(var u;l<n.__k.length;l++)if(null!=(u=n.__k[l])&&null!=u.__e)return u.__e;return\"function\"==typeof n.type?_(n):null}function k(n){var l,u;if(null!=(n=n.__)&&null!=n.__c){for(n.__e=n.__c.base=null,l=0;l<n.__k.length;l++)if(null!=(u=n.__k[l])&&null!=u.__e){n.__e=n.__c.base=u.__e;break}return k(n)}}function w(l){(!l.__d&&(l.__d=!0)&&u.push(l)&&!m.__r++||t!==n.debounceRendering)&&((t=n.debounceRendering)||i)(m)}function m(){for(var n;m.__r=u.length;)n=u.sort(function(n,l){return n.__v.__b-l.__v.__b}),u=[],n.some(function(n){var l,u,i,t,r,o,f;n.__d&&(o=(r=(l=n).__v).__e,(f=l.__P)&&(u=[],(i=s({},r)).__v=i,t=T(f,r,i,l.__n,void 0!==f.ownerSVGElement,null,u,null==o?_(r):o),$(u,r),t!=o&&k(r)))})}function g(n,l,u,i,t,r,o,c,s,v){var y,d,k,w,m,g,b,A=i&&i.__k||e,P=A.length;for(s==f&&(s=null!=o?o[0]:P?_(i,0):null),u.__k=[],y=0;y<l.length;y++)if(null!=(w=u.__k[y]=null==(w=l[y])||\"boolean\"==typeof w?null:\"string\"==typeof w||\"number\"==typeof w?h(null,w,null,null,w):Array.isArray(w)?h(p,{children:w},null,null,null):null!=w.__e||null!=w.__c?h(w.type,w.props,w.key,null,w.__v):w)){if(w.__=u,w.__b=u.__b+1,null===(k=A[y])||k&&w.key==k.key&&w.type===k.type)A[y]=void 0;else for(d=0;d<P;d++){if((k=A[d])&&w.key==k.key&&w.type===k.type){A[d]=void 0;break}k=null}m=T(n,w,k=k||f,t,r,o,c,s,v),(d=w.ref)&&k.ref!=d&&(b||(b=[]),k.ref&&b.push(k.ref,null,w),b.push(d,w.__c||m,w)),null!=m?(null==g&&(g=m),s=x(n,w,k,A,o,m,s),\"option\"==u.type?n.value=\"\":\"function\"==typeof u.type&&(u.__d=s)):s&&k.__e==s&&s.parentNode!=n&&(s=_(k))}if(u.__e=g,null!=o&&\"function\"!=typeof u.type)for(y=o.length;y--;)null!=o[y]&&a(o[y]);for(y=P;y--;)null!=A[y]&&I(A[y],A[y]);if(b)for(y=0;y<b.length;y++)H(b[y],b[++y],b[++y])}function b(n){return null==n||\"boolean\"==typeof n?[]:Array.isArray(n)?e.concat.apply([],n.map(b)):[n]}function x(n,l,u,i,t,r,o){var f,e,c;if(void 0!==l.__d)f=l.__d,l.__d=void 0;else if(t==u||r!=o||null==r.parentNode)n:if(null==o||o.parentNode!==n)n.appendChild(r),f=null;else{for(e=o,c=0;(e=e.nextSibling)&&c<i.length;c+=2)if(e==r)break n;n.insertBefore(r,o),f=o}return void 0!==f?f:r.nextSibling}function A(n,l,u,i,t){var r;for(r in u)\"children\"===r||\"key\"===r||r in l||C(n,r,null,u[r],i);for(r in l)t&&\"function\"!=typeof l[r]||\"children\"===r||\"key\"===r||\"value\"===r||\"checked\"===r||u[r]===l[r]||C(n,r,l[r],u[r],i)}function P(n,l,u){\"-\"===l[0]?n.setProperty(l,u):n[l]=\"number\"==typeof u&&!1===c.test(l)?u+\"px\":null==u?\"\":u}function C(n,l,u,i,t){var r,o,f,e,c;if(t?\"className\"===l&&(l=\"class\"):\"class\"===l&&(l=\"className\"),\"style\"===l)if(r=n.style,\"string\"==typeof u)r.cssText=u;else{if(\"string\"==typeof i&&(r.cssText=\"\",i=null),i)for(e in i)u&&e in u||P(r,e,\"\");if(u)for(c in u)i&&u[c]===i[c]||P(r,c,u[c])}else\"o\"===l[0]&&\"n\"===l[1]?(o=l!==(l=l.replace(/Capture$/,\"\")),f=l.toLowerCase(),l=(f in n?f:l).slice(2),u?(i||n.addEventListener(l,N,o),(n.l||(n.l={}))[l]=u):n.removeEventListener(l,N,o)):\"list\"!==l&&\"tagName\"!==l&&\"form\"!==l&&\"type\"!==l&&\"size\"!==l&&!t&&l in n?n[l]=null==u?\"\":u:\"function\"!=typeof u&&\"dangerouslySetInnerHTML\"!==l&&(l!==(l=l.replace(/^xlink:?/,\"\"))?null==u||!1===u?n.removeAttributeNS(\"http://www.w3.org/1999/xlink\",l.toLowerCase()):n.setAttributeNS(\"http://www.w3.org/1999/xlink\",l.toLowerCase(),u):null==u||!1===u&&!/^ar/.test(l)?n.removeAttribute(l):n.setAttribute(l,u))}function N(l){this.l[l.type](n.event?n.event(l):l)}function z(n,l,u){var i,t;for(i=0;i<n.__k.length;i++)(t=n.__k[i])&&(t.__=n,t.__e&&(\"function\"==typeof t.type&&t.__k.length>1&&z(t,l,u),l=x(u,t,t,n.__k,null,t.__e,l),\"function\"==typeof n.type&&(n.__d=l)))}function T(l,u,i,t,r,o,f,e,c){var a,v,h,y,_,k,w,m,b,x,A,P=u.type;if(void 0!==u.constructor)return null;(a=n.__b)&&a(u);try{n:if(\"function\"==typeof P){if(m=u.props,b=(a=P.contextType)&&t[a.__c],x=a?b?b.props.value:a.__:t,i.__c?w=(v=u.__c=i.__c).__=v.__E:(\"prototype\"in P&&P.prototype.render?u.__c=v=new P(m,x):(u.__c=v=new d(m,x),v.constructor=P,v.render=L),b&&b.sub(v),v.props=m,v.state||(v.state={}),v.context=x,v.__n=t,h=v.__d=!0,v.__h=[]),null==v.__s&&(v.__s=v.state),null!=P.getDerivedStateFromProps&&(v.__s==v.state&&(v.__s=s({},v.__s)),s(v.__s,P.getDerivedStateFromProps(m,v.__s))),y=v.props,_=v.state,h)null==P.getDerivedStateFromProps&&null!=v.componentWillMount&&v.componentWillMount(),null!=v.componentDidMount&&v.__h.push(v.componentDidMount);else{if(null==P.getDerivedStateFromProps&&m!==y&&null!=v.componentWillReceiveProps&&v.componentWillReceiveProps(m,x),!v.__e&&null!=v.shouldComponentUpdate&&!1===v.shouldComponentUpdate(m,v.__s,x)||u.__v===i.__v){v.props=m,v.state=v.__s,u.__v!==i.__v&&(v.__d=!1),v.__v=u,u.__e=i.__e,u.__k=i.__k,v.__h.length&&f.push(v),z(u,e,l);break n}null!=v.componentWillUpdate&&v.componentWillUpdate(m,v.__s,x),null!=v.componentDidUpdate&&v.__h.push(function(){v.componentDidUpdate(y,_,k)})}v.context=x,v.props=m,v.state=v.__s,(a=n.__r)&&a(u),v.__d=!1,v.__v=u,v.__P=l,a=v.render(v.props,v.state,v.context),v.state=v.__s,null!=v.getChildContext&&(t=s(s({},t),v.getChildContext())),h||null==v.getSnapshotBeforeUpdate||(k=v.getSnapshotBeforeUpdate(y,_)),A=null!=a&&a.type==p&&null==a.key?a.props.children:a,g(l,Array.isArray(A)?A:[A],u,i,t,r,o,f,e,c),v.base=u.__e,v.__h.length&&f.push(v),w&&(v.__E=v.__=null),v.__e=!1}else null==o&&u.__v===i.__v?(u.__k=i.__k,u.__e=i.__e):u.__e=j(i.__e,u,i,t,r,o,f,c);(a=n.diffed)&&a(u)}catch(l){u.__v=null,n.__e(l,u,i)}return u.__e}function $(l,u){n.__c&&n.__c(u,l),l.some(function(u){try{l=u.__h,u.__h=[],l.some(function(n){n.call(u)})}catch(l){n.__e(l,u.__v)}})}function j(n,l,u,i,t,r,o,c){var s,a,v,h,y,p=u.props,d=l.props;if(t=\"svg\"===l.type||t,null!=r)for(s=0;s<r.length;s++)if(null!=(a=r[s])&&((null===l.type?3===a.nodeType:a.localName===l.type)||n==a)){n=a,r[s]=null;break}if(null==n){if(null===l.type)return document.createTextNode(d);n=t?document.createElementNS(\"http://www.w3.org/2000/svg\",l.type):document.createElement(l.type,d.is&&{is:d.is}),r=null,c=!1}if(null===l.type)p!==d&&n.data!=d&&(n.data=d);else{if(null!=r&&(r=e.slice.call(n.childNodes)),v=(p=u.props||f).dangerouslySetInnerHTML,h=d.dangerouslySetInnerHTML,!c){if(null!=r)for(p={},y=0;y<n.attributes.length;y++)p[n.attributes[y].name]=n.attributes[y].value;(h||v)&&(h&&v&&h.__html==v.__html||(n.innerHTML=h&&h.__html||\"\"))}A(n,d,p,t,c),h?l.__k=[]:(s=l.props.children,g(n,Array.isArray(s)?s:[s],l,u,i,\"foreignObject\"!==l.type&&t,r,o,f,c)),c||(\"value\"in d&&void 0!==(s=d.value)&&s!==n.value&&C(n,\"value\",s,p.value,!1),\"checked\"in d&&void 0!==(s=d.checked)&&s!==n.checked&&C(n,\"checked\",s,p.checked,!1))}return n}function H(l,u,i){try{\"function\"==typeof l?l(u):l.current=u}catch(l){n.__e(l,i)}}function I(l,u,i){var t,r,o;if(n.unmount&&n.unmount(l),(t=l.ref)&&(t.current&&t.current!==l.__e||H(t,null,u)),i||\"function\"==typeof l.type||(i=null!=(r=l.__e)),l.__e=l.__d=void 0,null!=(t=l.__c)){if(t.componentWillUnmount)try{t.componentWillUnmount()}catch(l){n.__e(l,u)}t.base=t.__P=null}if(t=l.__k)for(o=0;o<t.length;o++)t[o]&&I(t[o],u,i);null!=r&&a(r)}function L(n,l,u){return this.constructor(n,u)}function M(l,u,i){var t,o,c;n.__&&n.__(l,u),o=(t=i===r)?null:i&&i.__k||u.__k,l=v(p,null,[l]),c=[],T(u,(t?u:i||u).__k=l,o||f,f,void 0!==u.ownerSVGElement,i&&!t?[i]:o?null:u.childNodes.length?e.slice.call(u.childNodes):null,c,i||f,t),$(c,l)}function O(n,l){M(n,l,r)}function S(n,l){var u,i;for(i in l=s(s({},n.props),l),arguments.length>2&&(l.children=e.slice.call(arguments,2)),u={},l)\"key\"!==i&&\"ref\"!==i&&(u[i]=l[i]);return h(n.type,u,l.key||n.key,l.ref||n.ref,null)}function q(n){var l={},u={__c:\"__cC\"+o++,__:n,Consumer:function(n,l){return n.children(l)},Provider:function(n){var i,t=this;return this.getChildContext||(i=[],this.getChildContext=function(){return l[u.__c]=t,l},this.shouldComponentUpdate=function(n){t.props.value!==n.value&&i.some(function(l){l.context=n.value,w(l)})},this.sub=function(n){i.push(n);var l=n.componentWillUnmount;n.componentWillUnmount=function(){i.splice(i.indexOf(n),1),l&&l.call(n)}}),n.children}};return u.Consumer.contextType=u,u.Provider.__=u,u}n={__e:function(n,l){for(var u,i;l=l.__;)if((u=l.__c)&&!u.__)try{if(u.constructor&&null!=u.constructor.getDerivedStateFromError&&(i=!0,u.setState(u.constructor.getDerivedStateFromError(n))),null!=u.componentDidCatch&&(i=!0,u.componentDidCatch(n)),i)return w(u.__E=u)}catch(l){n=l}throw n}},l=function(n){return null!=n&&void 0===n.constructor},d.prototype.setState=function(n,l){var u;u=this.__s!==this.state?this.__s:this.__s=s({},this.state),\"function\"==typeof n&&(n=n(u,this.props)),n&&s(u,n),null!=n&&this.__v&&(l&&this.__h.push(l),w(this))},d.prototype.forceUpdate=function(n){this.__v&&(this.__e=!0,n&&this.__h.push(n),w(this))},d.prototype.render=p,u=[],i=\"function\"==typeof Promise?Promise.prototype.then.bind(Promise.resolve()):setTimeout,m.__r=0,r=f,o=0;export{M as render,O as hydrate,v as createElement,v as h,p as Fragment,y as createRef,l as isValidElement,d as Component,S as cloneElement,q as createContext,b as toChildArray,I as __u,n as options};\n//# sourceMappingURL=preact.module.js.map\n","export default {\n  search: {\n    placeholder: 'Type a keyword...',\n  },\n  sort: {\n    sortAsc: 'Sort column ascending',\n    sortDesc: 'Sort column descending',\n  },\n  pagination: {\n    previous: 'Previous',\n    next: 'Next',\n    navigate: (page, pages) => `Page ${page} of ${pages}`,\n    page: (page) => `Page ${page}`,\n    showing: 'Showing',\n    of: 'of',\n    to: 'to',\n    results: 'results',\n  },\n  loading: 'Loading...',\n  noRecordsFound: 'No matching records found',\n  error: 'An error happened while fetching the data',\n};\n","import enUS from './en_US';\ntype MessageFormat = (...args) => string;\ntype Message = string | MessageFormat;\nexport type Language = { [key: string]: Message | Language };\n\nexport class Translator {\n  private readonly _language: Language;\n  private readonly _defaultLanguage: Language;\n\n  constructor(language?: Language) {\n    this._language = language;\n    this._defaultLanguage = enUS;\n  }\n\n  /**\n   * Tries to split the message with \".\" and find\n   * the key in the given language\n   *\n   * @param message\n   * @param lang\n   */\n  getString(message: string, lang: Language): MessageFormat {\n    if (!lang || !message) return null;\n\n    const splitted = message.split('.');\n    const key = splitted[0];\n\n    if (lang[key]) {\n      const val = lang[key];\n\n      if (typeof val === 'string') {\n        return (): string => val;\n      } else if (typeof val === 'function') {\n        return val;\n      } else {\n        return this.getString(splitted.slice(1).join('.'), val);\n      }\n    }\n\n    return null;\n  }\n\n  translate(message: string, ...args): string {\n    const translated = this.getString(message, this._language);\n    let messageFormat;\n\n    if (translated) {\n      messageFormat = translated;\n    } else {\n      messageFormat = this.getString(message, this._defaultLanguage);\n    }\n\n    if (messageFormat) {\n      return messageFormat(...args);\n    }\n\n    return message;\n  }\n}\n\nexport function useTranslator(translator: Translator) {\n  return function (message: string, ...args): string {\n    return translator.translate(message, ...args);\n  };\n}\n","import { Component } from 'preact';\nimport { Config } from '../config';\nimport getConfig from '../util/getConfig';\nimport { useTranslator } from '../i18n/language';\n\n// eslint-disable-next-line @typescript-eslint/no-empty-interface\nexport interface BaseProps {}\n\nexport abstract class BaseComponent<P extends BaseProps, S> extends Component<\n  P,\n  S\n> {\n  protected config: Config;\n  protected _: (message: string, ...args) => string;\n\n  constructor(props: P, context: any) {\n    super(props, context);\n    this.config = getConfig(context);\n\n    if (this.config) {\n      this._ = useTranslator(this.config.translator);\n    }\n  }\n}\n","import { Context } from 'preact';\nimport { Config } from '../config';\n\n/**\n * This is a hack to get the current global config from Preact context.\n * My assumption is that we only need one global context which is the ConfigContext\n *\n * @param context\n */\nexport default function getConfig(context: {\n  [key: string]: Context<any>;\n}): Config {\n  if (!context) return null;\n\n  const keys = Object.keys(context);\n\n  if (keys.length) {\n    // TODO: can we use a better way to capture and return the Config context?\n    const ctx: any = context[keys[0]];\n    return ctx.props.value;\n  }\n\n  return null;\n}\n","export type ID = string;\n\nexport function generateID(): ID {\n  return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) {\n    const r = (Math.random() * 16) | 0,\n      v = c == 'x' ? r : (r & 0x3) | 0x8;\n    return v.toString(16);\n  });\n}\n","import { generateID, ID } from './util/id';\n\nclass Base {\n  private readonly _id: ID;\n\n  constructor(id?: ID) {\n    this._id = id || generateID();\n  }\n\n  get id(): ID {\n    return this._id;\n  }\n}\n\nexport default Base;\n","import { h } from 'preact';\n\nimport { BaseComponent, BaseProps } from './base';\n\nexport interface HTMLContentProps extends BaseProps {\n  content: string;\n  parentElement?: string;\n}\n\nexport class HTMLElement extends BaseComponent<HTMLContentProps, {}> {\n  static defaultProps = {\n    parentElement: 'span',\n  };\n\n  render() {\n    return h(this.props.parentElement, {\n      dangerouslySetInnerHTML: { __html: this.props.content },\n    });\n  }\n}\n","import { h, VNode } from 'preact';\nimport { HTMLElement } from '../view/htmlElement';\n\nexport function html(content: string, parentElement?: string): VNode {\n  return h(HTMLElement, { content: content, parentElement: parentElement });\n}\n","import Base from './base';\nimport { TCell } from './types';\nimport { html } from './util/html';\nimport { ComponentChild } from 'preact';\n\nclass Cell extends Base {\n  // because a Cell is a subset of TCell type\n  public data: number | string | boolean | ComponentChild;\n\n  constructor(data: TCell) {\n    super();\n\n    this.setData(data);\n  }\n\n  private cast(data: TCell): number | string | boolean | ComponentChild {\n    if (data instanceof HTMLElement) {\n      return html(data.outerHTML);\n    }\n\n    return data;\n  }\n\n  public setData(data: TCell): Cell {\n    this.data = this.cast(data);\n    return this;\n  }\n}\n\nexport default Cell;\n","import Cell from './cell';\nimport Base from './base';\nimport { TCell } from './types';\n\nclass Row extends Base {\n  private _cells: Cell[];\n\n  constructor(cells?: Cell[]) {\n    super();\n\n    this.cells = cells || [];\n  }\n\n  public get cells(): Cell[] {\n    return this._cells;\n  }\n\n  public set cells(cells: Cell[]) {\n    this._cells = cells;\n  }\n\n  public toArray(): TCell[] {\n    return this.cells.map((cell) => cell.data);\n  }\n\n  /**\n   * Creates a new Row from an array of Cell(s)\n   * This method generates a new ID for the Row and all nested elements\n   *\n   * @param cells\n   * @returns Row\n   */\n  static fromCells(cells: Cell[]): Row {\n    return new Row(cells.map((cell) => new Cell(cell.data)));\n  }\n\n  get length(): number {\n    return this.cells.length;\n  }\n}\n\nexport default Row;\n","import Base from './base';\nimport Row from './row';\nimport Cell from './cell';\nimport { OneDArray, TCell, TwoDArray } from './types';\nimport { oneDtoTwoD } from './util/array';\n\nclass Tabular extends Base {\n  private _rows: Row[];\n  private _length: number;\n\n  constructor(rows?: Row[] | Row) {\n    super();\n\n    if (rows instanceof Array) {\n      this.rows = rows;\n    } else if (rows instanceof Row) {\n      this.rows = [rows];\n    } else {\n      this.rows = [];\n    }\n  }\n\n  get rows(): Row[] {\n    return this._rows;\n  }\n\n  set rows(rows: Row[]) {\n    this._rows = rows;\n  }\n\n  get length(): number {\n    return this._length || this.rows.length;\n  }\n\n  // we want to sent the length when storage is ServerStorage\n  set length(len: number) {\n    this._length = len;\n  }\n\n  public toArray(): TCell[][] {\n    return this.rows.map((row) => row.toArray());\n  }\n\n  /**\n   * Creates a new Tabular from an array of Row(s)\n   * This method generates a new ID for the Tabular and all nested elements\n   *\n   * @param rows\n   * @returns Tabular\n   */\n  static fromRows(rows: Row[]): Tabular {\n    return new Tabular(rows.map((row) => Row.fromCells(row.cells)));\n  }\n\n  /**\n   * Creates a new Tabular from a 2D array\n   * This method generates a new ID for the Tabular and all nested elements\n   *\n   * @param data\n   * @returns Tabular\n   */\n  static fromArray<T extends TCell>(\n    data: OneDArray<T> | TwoDArray<T>,\n  ): Tabular {\n    data = oneDtoTwoD(data);\n\n    return new Tabular(\n      data.map((row) => new Row(row.map((cell) => new Cell(cell)))),\n    );\n  }\n}\n\nexport default Tabular;\n","import { OneDArray, TwoDArray } from '../types';\n\nexport function oneDtoTwoD<T>(data: OneDArray<T> | TwoDArray<T>): TwoDArray<T> {\n  if (data[0] && !(data[0] instanceof Array)) {\n    return [data] as TwoDArray<T>;\n  }\n\n  return data as TwoDArray<T>;\n}\n","type EventArgs<T> = [T] extends [(...args: infer U) => any]\n  ? U\n  : [T] extends [void]\n  ? []\n  : [T];\n\n/**\n * Example:\n *\n * export interface BaseEvents<P, S> {\n *   SET_STATE: (component: BaseComponent<P, S>, state: S) => void;\n * }\n */\n\nexport interface EventEmitter<EventTypes> {\n  addListener<EventName extends keyof EventTypes>(\n    event: EventName,\n    listener: (...args: EventArgs<EventTypes[EventName]>) => void,\n  ): EventEmitter<EventTypes>;\n\n  on<EventName extends keyof EventTypes>(\n    event: EventName,\n    listener: (...args: EventArgs<EventTypes[EventName]>) => void,\n  ): EventEmitter<EventTypes>;\n\n  off<EventName extends keyof EventTypes>(\n    event: EventName,\n    listener: (...args: EventArgs<EventTypes[EventName]>) => void,\n  ): EventEmitter<EventTypes>;\n\n  emit<EventName extends keyof EventTypes>(\n    event: EventName,\n    ...args: EventArgs<EventTypes[EventName]>\n  ): boolean;\n}\n\nexport class EventEmitter<EventTypes> {\n  private callbacks: { [event: string]: ((...args) => void)[] };\n\n  // because we are using EventEmitter as a mixin and the\n  // constructor won't be called by the applyMixins function\n  // see src/base.ts and src/util/applyMixin.ts\n  private init(event?: string): void {\n    if (!this.callbacks) {\n      this.callbacks = {};\n    }\n\n    if (event && !this.callbacks[event]) {\n      this.callbacks[event] = [];\n    }\n  }\n\n  on<EventName extends keyof EventTypes>(\n    event: EventName,\n    listener: (...args: EventArgs<EventTypes[EventName]>) => void,\n  ): EventEmitter<EventTypes> {\n    this.init(event as string);\n    this.callbacks[event as string].push(listener);\n    return this;\n  }\n\n  off<EventName extends keyof EventTypes>(\n    event: EventName,\n    listener: (...args: EventArgs<EventTypes[EventName]>) => void,\n  ): EventEmitter<EventTypes> {\n    const eventName = event as string;\n\n    this.init();\n\n    if (!this.callbacks[eventName] || this.callbacks[eventName].length === 0) {\n      // there is no callbacks with this key\n      return this;\n    }\n\n    this.callbacks[eventName] = this.callbacks[eventName].filter(\n      (value) => value != listener,\n    );\n\n    return this;\n  }\n\n  emit<EventName extends keyof EventTypes>(\n    event: EventName,\n    ...args: EventArgs<EventTypes[EventName]>\n  ): boolean {\n    const eventName = event as string;\n\n    this.init(eventName);\n\n    if (this.callbacks[eventName].length > 0) {\n      this.callbacks[eventName].forEach((value) => value(...args));\n      return true;\n    }\n\n    return false;\n  }\n}\n","// The order of enum items define the processing order of the processor type\n// e.g. Extractor = 0 will be processed before Transformer = 1\nimport { generateID, ID } from '../util/id';\nimport { EventEmitter } from '../util/eventEmitter';\n\nexport enum ProcessorType {\n  Initiator,\n  ServerFilter,\n  ServerSort,\n  ServerLimit,\n  Extractor,\n  Transformer,\n  Filter,\n  Sort,\n  Limit,\n}\n\ninterface PipelineProcessorEvents<T, P> {\n  propsUpdated: (processor: PipelineProcessor<T, P>) => void;\n  beforeProcess: (...args) => void;\n  afterProcess: (...args) => void;\n}\n\n// eslint-disable-next-line @typescript-eslint/no-empty-interface\nexport interface PipelineProcessorProps {}\n\nexport abstract class PipelineProcessor<\n  T,\n  P extends Partial<PipelineProcessorProps>\n> extends EventEmitter<PipelineProcessorEvents<T, P>> {\n  public readonly id: ID;\n  private readonly _props: P;\n\n  abstract get type(): ProcessorType;\n  protected abstract _process(...args): T | Promise<T>;\n  protected validateProps?(...args): void;\n\n  constructor(props?: Partial<P>) {\n    super();\n\n    this._props = {} as P;\n    this.id = generateID();\n\n    if (props) this.setProps(props);\n  }\n\n  /**\n   * process is used to call beforeProcess and afterProcess callbacks\n   * This function is just a wrapper that calls _process()\n   *\n   * @param args\n   */\n  process(...args): T | Promise<T> {\n    if (this.validateProps instanceof Function) {\n      this.validateProps(...args);\n    }\n\n    this.emit('beforeProcess', ...args);\n    const result = this._process(...args);\n    this.emit('afterProcess', ...args);\n    return result;\n  }\n\n  setProps(props: Partial<P>): this {\n    Object.assign(this._props, props);\n    this.emit('propsUpdated', this);\n    return this;\n  }\n\n  get props(): P {\n    return this._props;\n  }\n}\n","import search from '../../operator/search';\nimport Tabular from '../../tabular';\nimport {\n  PipelineProcessor,\n  PipelineProcessorProps,\n  ProcessorType,\n} from '../processor';\nimport { TCell } from '../../types';\n\ninterface GlobalSearchFilterProps extends PipelineProcessorProps {\n  keyword: string;\n  selector?: (cell: TCell, rowIndex: number, cellIndex: number) => string;\n}\n\nclass GlobalSearchFilter extends PipelineProcessor<\n  Tabular,\n  GlobalSearchFilterProps\n> {\n  get type(): ProcessorType {\n    return ProcessorType.Filter;\n  }\n\n  _process(data: Tabular): Tabular {\n    if (this.props.keyword) {\n      return search(\n        String(this.props.keyword).trim(),\n        data,\n        this.props.selector,\n      );\n    }\n\n    return data;\n  }\n}\n\nexport default GlobalSearchFilter;\n","import Tabular from '../tabular';\nimport { VNode } from 'preact';\nimport { HTMLContentProps } from '../view/htmlElement';\nimport { TCell } from '../types';\n\nexport default function (\n  keyword: string,\n  tabular: Tabular,\n  selector?: (cell: TCell, rowIndex: number, cellIndex: number) => string,\n): Tabular {\n  // escape special regex chars\n  keyword = keyword.replace(/[-[\\]{}()*+?.,\\\\^$|#\\s]/g, '\\\\$&');\n\n  return new Tabular(\n    tabular.rows.filter((row, rowIndex) =>\n      row.cells.some((cell, cellIndex) => {\n        if (!cell) {\n          return false;\n        }\n\n        let data = '';\n\n        if (typeof selector === 'function') {\n          data = selector(cell.data, rowIndex, cellIndex);\n        } else if (typeof cell.data === 'object') {\n          // HTMLContent element\n          const element = cell.data as VNode<HTMLContentProps>;\n          if (element && element.props && element.props.content) {\n            // TODO: we should only search in the content of the element. props.content is the entire HTML element\n            data = element.props.content;\n          }\n        } else {\n          // primitive types\n          data = String(cell.data);\n        }\n\n        return new RegExp(keyword, 'gi').test(data);\n      }),\n    ),\n  );\n}\n","export function className(...args: string[]): string {\n  const prefix = 'gridjs';\n\n  return `${prefix}${args.reduce(\n    (prev: string, cur: string) => `${prev}-${cur}`,\n    '',\n  )}`;\n}\n\nexport function classJoin(...classNames: string[]): string {\n  return classNames\n    .filter((x) => x)\n    .reduce((className, prev) => `${className || ''} ${prev}`, '')\n    .trim();\n}\n","import { EventEmitter } from '../../util/eventEmitter';\nimport Dispatcher from '../../util/dispatcher';\n\ninterface BaseStoreEvents<STATE> {\n  updated: (newState: STATE, prevState?: STATE) => void;\n}\n\nexport default abstract class BaseStore<STATE, ACTIONS> extends EventEmitter<\n  BaseStoreEvents<STATE>\n> {\n  private _state: STATE;\n  protected readonly dispatcher: Dispatcher<any>;\n\n  constructor(dispatcher: Dispatcher<any>) {\n    super();\n    this.dispatcher = dispatcher;\n    this._state = this.getInitialState();\n    dispatcher.register(this._handle.bind(this));\n  }\n\n  abstract handle<K extends keyof ACTIONS>(type: K, payload: ACTIONS[K]): void;\n  abstract getInitialState(): STATE;\n\n  private _handle(action): void {\n    this.handle(action.type, action.payload);\n  }\n\n  setState(newState: STATE): void {\n    const prevState = this._state;\n    this._state = newState;\n    this.emit('updated', newState, prevState);\n  }\n\n  get state(): STATE {\n    return this._state;\n  }\n}\n","import BaseStore from '../../base/store';\nimport { SearchActionsType } from './actions';\n\nexport type SearchStoreState = { keyword: string | null };\n\nexport class SearchStore extends BaseStore<\n  SearchStoreState,\n  SearchActionsType\n> {\n  getInitialState(): SearchStoreState {\n    return { keyword: null };\n  }\n\n  handle(type, payload): void {\n    if (type === 'SEARCH_KEYWORD') {\n      const { keyword } = payload;\n      this.search(keyword);\n    }\n  }\n\n  private search(keyword: string): void {\n    this.setState({ keyword: keyword });\n  }\n}\n","import Dispatcher from '../../util/dispatcher';\n\nexport abstract class BaseActions<ACTIONS> {\n  private readonly dispatcher: Dispatcher<any>;\n\n  constructor(dispatcher: Dispatcher<any>) {\n    this.dispatcher = dispatcher;\n  }\n\n  protected dispatch<K extends keyof ACTIONS>(\n    type: K,\n    payload: ACTIONS[K],\n  ): void {\n    this.dispatcher.dispatch({\n      type: type,\n      payload: payload,\n    });\n  }\n}\n","import { BaseActions } from '../../base/actions';\n\nexport interface SearchActionsType {\n  SEARCH_KEYWORD: {\n    keyword: string;\n  };\n}\n\nexport class SearchActions extends BaseActions<SearchActionsType> {\n  search(keyword: string): void {\n    this.dispatch('SEARCH_KEYWORD', {\n      keyword: keyword,\n    });\n  }\n}\n","import {\n  PipelineProcessor,\n  PipelineProcessorProps,\n  ProcessorType,\n} from '../processor';\nimport { ServerStorageOptions } from '../../storage/server';\n\ninterface ServerGlobalSearchFilterProps extends PipelineProcessorProps {\n  keyword?: string;\n  url?: (prevUrl: string, keyword: string) => string;\n  body?: (prevBody: BodyInit, keyword: string) => BodyInit;\n}\n\nclass ServerGlobalSearchFilter extends PipelineProcessor<\n  ServerStorageOptions,\n  ServerGlobalSearchFilterProps\n> {\n  get type(): ProcessorType {\n    return ProcessorType.ServerFilter;\n  }\n\n  _process(options?: ServerStorageOptions): ServerStorageOptions {\n    if (!this.props.keyword) return options;\n\n    const updates = {};\n\n    if (this.props.url) {\n      updates['url'] = this.props.url(options.url, this.props.keyword);\n    }\n\n    if (this.props.body) {\n      updates['body'] = this.props.body(options.body, this.props.keyword);\n    }\n\n    return {\n      ...options,\n      ...updates,\n    };\n  }\n}\n\nexport default ServerGlobalSearchFilter;\n","import { h } from 'preact';\nimport { BaseComponent, BaseProps } from '../../base';\nimport GlobalSearchFilter from '../../../pipeline/filter/globalSearch';\nimport { classJoin, className } from '../../../util/className';\nimport { SearchStore, SearchStoreState } from './store';\nimport { SearchActions } from './actions';\nimport ServerGlobalSearchFilter from '../../../pipeline/filter/serverGlobalSearch';\nimport { debounce } from '../../../util/debounce';\nimport { TCell } from '../../../types';\n\nexport interface SearchConfig {\n  keyword?: string;\n  enabled?: boolean;\n  debounceTimeout?: number;\n  selector?: (cell: TCell, rowIndex: number, cellIndex: number) => string;\n  server?: {\n    url?: (prevUrl: string, keyword: string) => string;\n    body?: (prevBody: BodyInit, keyword: string) => BodyInit;\n  };\n}\n\nexport class Search extends BaseComponent<SearchConfig & BaseProps, {}> {\n  private readonly searchProcessor:\n    | GlobalSearchFilter\n    | ServerGlobalSearchFilter;\n  private readonly actions: SearchActions;\n  private readonly store: SearchStore;\n  private readonly storeUpdatedFn: (...args) => void;\n\n  static defaultProps = {\n    debounceTimeout: 250,\n  };\n\n  constructor(props: SearchConfig, context) {\n    super(props, context);\n\n    this.actions = new SearchActions(this.config.dispatcher);\n    this.store = new SearchStore(this.config.dispatcher);\n    const { enabled, keyword } = props;\n\n    if (enabled) {\n      // initial search\n      if (keyword) this.actions.search(keyword);\n\n      this.storeUpdatedFn = this.storeUpdated.bind(this);\n      this.store.on('updated', this.storeUpdatedFn);\n\n      let searchProcessor;\n      if (props.server) {\n        searchProcessor = new ServerGlobalSearchFilter({\n          keyword: props.keyword,\n          url: props.server.url,\n          body: props.server.body,\n        });\n      } else {\n        searchProcessor = new GlobalSearchFilter({\n          keyword: props.keyword,\n          selector: props.selector,\n        });\n      }\n\n      this.searchProcessor = searchProcessor;\n\n      // adds a new processor to the pipeline\n      this.config.pipeline.register(searchProcessor);\n    }\n  }\n\n  componentWillUnmount(): void {\n    this.config.pipeline.unregister(this.searchProcessor);\n    this.store.off('updated', this.storeUpdatedFn);\n  }\n\n  private storeUpdated(state: SearchStoreState): void {\n    // updates the processor state\n    this.searchProcessor.setProps({\n      keyword: state.keyword,\n    });\n  }\n\n  private onChange(event): void {\n    const keyword = event.target.value;\n    this.actions.search(keyword);\n  }\n\n  render() {\n    if (!this.props.enabled) return null;\n\n    let onInput = this.onChange.bind(this);\n\n    // add debounce to input only if it's a server-side search\n    if (this.searchProcessor instanceof ServerGlobalSearchFilter) {\n      onInput = debounce(onInput, this.props.debounceTimeout);\n    }\n\n    return (\n      <div className={className('search')}>\n        <input\n          type=\"search\"\n          placeholder={this._('search.placeholder')}\n          aria-label={this._('search.placeholder')}\n          onInput={onInput}\n          className={classJoin(\n            className('input'),\n            className('search', 'input'),\n          )}\n          value={this.store.state.keyword}\n        />\n      </div>\n    );\n  }\n}\n","export const debounce = <F extends (...args: any[]) => any>(\n  func: F,\n  waitFor: number,\n) => {\n  let timeout;\n\n  return (...args: Parameters<F>): Promise<ReturnType<F>> =>\n    new Promise((resolve) => {\n      if (timeout) {\n        clearTimeout(timeout);\n      }\n\n      timeout = setTimeout(() => resolve(func(...args)), waitFor);\n    });\n};\n","import Tabular from '../../tabular';\nimport {\n  PipelineProcessor,\n  PipelineProcessorProps,\n  ProcessorType,\n} from '../processor';\n\ninterface PaginationLimitProps extends PipelineProcessorProps {\n  page: number;\n  limit: number;\n}\n\nclass PaginationLimit extends PipelineProcessor<Tabular, PaginationLimitProps> {\n  protected validateProps(): void {\n    if (isNaN(Number(this.props.limit)) || isNaN(Number(this.props.page))) {\n      throw Error('Invalid parameters passed');\n    }\n  }\n\n  get type(): ProcessorType {\n    return ProcessorType.Limit;\n  }\n\n  protected _process(data: Tabular): Tabular {\n    const page = this.props.page;\n    const start = page * this.props.limit;\n    const end = (page + 1) * this.props.limit;\n\n    return new Tabular(data.rows.slice(start, end));\n  }\n}\n\nexport default PaginationLimit;\n","import {\n  PipelineProcessor,\n  PipelineProcessorProps,\n  ProcessorType,\n} from '../processor';\nimport { ServerStorageOptions } from '../../storage/server';\n\ninterface ServerPaginationLimitProps extends PipelineProcessorProps {\n  page: number;\n  limit: number;\n  url?: (prevUrl: string, page: number, limit: number) => string;\n  body?: (prevBody: BodyInit, page: number, limit: number) => BodyInit;\n}\n\nclass ServerPaginationLimit extends PipelineProcessor<\n  ServerStorageOptions,\n  ServerPaginationLimitProps\n> {\n  get type(): ProcessorType {\n    return ProcessorType.ServerLimit;\n  }\n\n  _process(options?: ServerStorageOptions): ServerStorageOptions {\n    const updates = {};\n\n    if (this.props.url) {\n      updates['url'] = this.props.url(\n        options.url,\n        this.props.page,\n        this.props.limit,\n      );\n    }\n\n    if (this.props.body) {\n      updates['body'] = this.props.body(\n        options.body,\n        this.props.page,\n        this.props.limit,\n      );\n    }\n\n    return {\n      ...options,\n      ...updates,\n    };\n  }\n}\n\nexport default ServerPaginationLimit;\n","import { h, Fragment } from 'preact';\nimport { BaseComponent, BaseProps } from '../base';\nimport PaginationLimit from '../../pipeline/limit/pagination';\nimport { className } from '../../util/className';\nimport ServerPaginationLimit from '../../pipeline/limit/serverPagination';\nimport Tabular from '../../tabular';\nimport { PipelineProcessor } from '../../pipeline/processor';\n\ninterface PaginationState {\n  page: number;\n  limit?: number;\n  total: number;\n}\n\nexport interface PaginationConfig {\n  enabled: boolean;\n  limit?: number;\n  page?: number;\n  summary?: boolean;\n  nextButton?: boolean;\n  prevButton?: boolean;\n  buttonsCount?: number;\n  resetPageOnUpdate?: boolean;\n  server?: {\n    url?: (prevUrl: string, page: number, limit: number) => string;\n    body?: (prevBody: BodyInit, page: number, limit: number) => BodyInit;\n  };\n}\n\nexport class Pagination extends BaseComponent<\n  BaseProps & PaginationConfig,\n  PaginationState\n> {\n  private processor: PaginationLimit | ServerPaginationLimit;\n  private onUpdateFn: (processor: PipelineProcessor<any, any>) => void;\n  private setTotalFromTabularFn: (tabular: Tabular) => void;\n\n  static defaultProps = {\n    summary: true,\n    nextButton: true,\n    prevButton: true,\n    buttonsCount: 3,\n    limit: 10,\n    resetPageOnUpdate: true,\n  };\n\n  constructor(props, context) {\n    super(props, context);\n\n    this.state = {\n      limit: props.limit,\n      page: props.page || 0,\n      total: 0,\n    };\n  }\n\n  componentWillMount(): void {\n    if (this.props.enabled) {\n      let processor;\n\n      this.setTotalFromTabularFn = this.setTotalFromTabular.bind(this);\n\n      if (this.props.server) {\n        processor = new ServerPaginationLimit({\n          limit: this.state.limit,\n          page: this.state.page,\n          url: this.props.server.url,\n          body: this.props.server.body,\n        });\n\n        this.config.pipeline.on('afterProcess', this.setTotalFromTabularFn);\n      } else {\n        processor = new PaginationLimit({\n          limit: this.state.limit,\n          page: this.state.page,\n        });\n\n        // Pagination (all Limit processors) is the last step in the pipeline\n        // and we assume that at this stage, we have the rows that we care about.\n        // Let's grab the rows before processing Pagination and set total number of rows\n        processor.on('beforeProcess', this.setTotalFromTabularFn);\n      }\n\n      this.processor = processor;\n      this.config.pipeline.register(processor);\n\n      // we need to make sure that the state is set\n      // to the default props when an error happens\n      this.config.pipeline.on('error', () => {\n        this.setState({\n          total: 0,\n          page: 0,\n        });\n      });\n    }\n  }\n\n  private setTotalFromTabular(tabular: Tabular): void {\n    this.setTotal(tabular.length);\n  }\n\n  private onUpdate(processor): void {\n    // this is to ensure that the current page is set to 0\n    // when a processor is updated for some reason\n    if (this.props.resetPageOnUpdate && processor !== this.processor) {\n      this.setPage(0);\n    }\n  }\n\n  componentDidMount(): void {\n    this.onUpdateFn = this.onUpdate.bind(this);\n    this.config.pipeline.on('updated', this.onUpdateFn);\n  }\n\n  componentWillUnmount() {\n    this.config.pipeline.unregister(this.processor);\n    this.config.pipeline.off('updated', this.onUpdateFn);\n  }\n\n  private get pages(): number {\n    return Math.ceil(this.state.total / this.state.limit);\n  }\n\n  private setPage(page: number): void {\n    if (page >= this.pages || page < 0 || page === this.state.page) {\n      return null;\n    }\n\n    this.setState({\n      page: page,\n    });\n\n    this.processor.setProps({\n      page: page,\n    });\n  }\n\n  private setTotal(totalRows: number): void {\n    // to set the correct total number of rows\n    // when running in-memory operations\n    this.setState({\n      total: totalRows,\n    });\n  }\n\n  renderPages() {\n    if (this.props.buttonsCount <= 0) {\n      return null;\n    }\n\n    // how many pagination buttons to render?\n    const maxCount: number = Math.min(this.pages, this.props.buttonsCount);\n\n    let pagePivot = Math.min(this.state.page, Math.floor(maxCount / 2));\n    if (this.state.page + Math.floor(maxCount / 2) >= this.pages) {\n      pagePivot = maxCount - (this.pages - this.state.page);\n    }\n\n    return (\n      <Fragment>\n        {this.pages > maxCount && this.state.page - pagePivot > 0 && (\n          <Fragment>\n            <button\n              tabIndex={0}\n              onClick={this.setPage.bind(this, 0)}\n              title={this._('pagination.firstPage')}\n            >\n              {this._('1')}\n            </button>\n            <button tabIndex={-1} className={className('spread')}>\n              ...\n            </button>\n          </Fragment>\n        )}\n\n        {Array.from(Array(maxCount).keys())\n          .map((i) => this.state.page + (i - pagePivot))\n          .map((i) => (\n            <button\n              tabIndex={0}\n              onClick={this.setPage.bind(this, i)}\n              className={\n                this.state.page === i ? className('currentPage') : null\n              }\n              title={this._('pagination.page', i + 1)}\n            >\n              {this._(`${i + 1}`)}\n            </button>\n          ))}\n\n        {this.pages > maxCount && this.pages > this.state.page + pagePivot + 1 && (\n          <Fragment>\n            <button tabIndex={-1} className={className('spread')}>\n              ...\n            </button>\n            <button\n              tabIndex={0}\n              onClick={this.setPage.bind(this, this.pages - 1)}\n              title={this._('pagination.page', this.pages)}\n            >\n              {this._(`${this.pages}`)}\n            </button>\n          </Fragment>\n        )}\n      </Fragment>\n    );\n  }\n\n  renderSummary() {\n    return (\n      <Fragment>\n        {this.props.summary && this.state.total > 0 && (\n          <div\n            role=\"status\"\n            className={className('summary')}\n            title={this._(\n              'pagination.navigate',\n              this.state.page + 1,\n              this.pages,\n            )}\n          >\n            {this._('pagination.showing')}{' '}\n            <b>{this._(`${this.state.page * this.state.limit + 1}`)}</b>{' '}\n            {this._('pagination.to')}{' '}\n            <b>\n              {this._(\n                `${Math.min(\n                  (this.state.page + 1) * this.state.limit,\n                  this.state.total,\n                )}`,\n              )}\n            </b>{' '}\n            {this._('pagination.of')} <b>{this._(`${this.state.total}`)}</b>{' '}\n            {this._('pagination.results')}\n          </div>\n        )}\n      </Fragment>\n    );\n  }\n\n  render() {\n    if (!this.props.enabled) return null;\n\n    return (\n      <div className={className('pagination')}>\n        {this.renderSummary()}\n\n        <div className={className('pages')}>\n          {this.props.prevButton && (\n            <button\n              tabIndex={0}\n              disabled={this.state.page === 0}\n              onClick={this.setPage.bind(this, this.state.page - 1)}\n            >\n              {this._('pagination.previous')}\n            </button>\n          )}\n\n          {this.renderPages()}\n\n          {this.props.nextButton && (\n            <button\n              tabIndex={0}\n              disabled={this.pages === this.state.page + 1 || this.pages === 0}\n              onClick={this.setPage.bind(this, this.state.page + 1)}\n            >\n              {this._('pagination.next')}\n            </button>\n          )}\n        </div>\n      </div>\n    );\n  }\n}\n","export function width(width: string | number, containerWidth?: number): number {\n  if (typeof width == 'string') {\n    if (width.indexOf('%') > -1) {\n      return (containerWidth / 100) * parseInt(width, 10);\n    } else {\n      return parseInt(width, 10);\n    }\n  }\n\n  return width;\n}\n\nexport function px(width: number): string {\n  if (!width) return '';\n  return `${Math.floor(width)}px`;\n}\n\n/**\n * Accepts a ShadowTable and tries to find the clientWidth\n * that is already rendered on the web browser\n *\n * @param shadowTable\n * @param columnIndex\n */\nexport function getWidth(shadowTable: Element, columnIndex): number {\n  if (!shadowTable) {\n    return null;\n  }\n\n  const tds = shadowTable.querySelectorAll('tr:first-child > td');\n\n  if (tds && tds[columnIndex]) {\n    return tds[columnIndex].clientWidth;\n  }\n\n  return null;\n}\n","import { h } from 'preact';\n\nimport Tabular from '../../tabular';\nimport { BaseComponent, BaseProps } from '../base';\nimport Header from '../../header';\nimport Row from '../../row';\nimport Cell from '../../cell';\n\ninterface ShadowTableProps extends BaseProps {\n  data: Tabular;\n  header?: Header;\n}\n\nexport class ShadowTable extends BaseComponent<ShadowTableProps, {}> {\n  resetStyle(): { [key: string]: string | number } {\n    return { padding: 0, margin: 0, border: 'none', outline: 'none' };\n  }\n\n  head() {\n    return (\n      <thead style={this.resetStyle()}>\n        <tr>\n          {this.props.header.columns.map((col) => {\n            return (\n              <th\n                style={{\n                  ...this.resetStyle(),\n                  whiteSpace: 'nowrap',\n                  // pagination buttons\n                  paddingRight: col.sort ? '18px' : '0',\n                }}\n              >\n                {col.name}\n              </th>\n            );\n          })}\n        </tr>\n      </thead>\n    );\n  }\n\n  td(cell: Cell) {\n    return <td style={this.resetStyle()}>{cell.data}</td>;\n  }\n\n  tr(row: Row) {\n    return (\n      <tr style={this.resetStyle()}>\n        {row.cells.map((cell: Cell) => {\n          return this.td(cell);\n        })}\n      </tr>\n    );\n  }\n\n  body() {\n    return (\n      <tbody style={this.resetStyle()}>\n        {this.props.data &&\n          this.props.data.rows.map((row: Row) => {\n            return this.tr(row);\n          })}\n      </tbody>\n    );\n  }\n\n  render() {\n    return (\n      <table\n        style={{\n          position: 'absolute',\n          zIndex: '-2147483640',\n          visibility: 'hidden',\n          tableLayout: 'auto',\n          width: 'auto',\n          ...this.resetStyle(),\n        }}\n      >\n        {this.head()}\n        {this.body()}\n      </table>\n    );\n  }\n}\n","import { OneDArray, TColumn } from './types';\nimport Base from './base';\nimport { UserConfig } from './config';\nimport Tabular from './tabular';\nimport { width, px, getWidth } from './util/width';\nimport { ShadowTable } from './view/table/shadow';\nimport { createRef, h, isValidElement, RefObject, render } from 'preact';\nimport { camelCase } from './util/string';\n\nclass Header extends Base {\n  private _columns: OneDArray<TColumn>;\n\n  constructor() {\n    super();\n\n    this._columns = [];\n  }\n\n  get columns(): OneDArray<TColumn> {\n    return this._columns;\n  }\n\n  set columns(columns) {\n    this._columns = columns;\n  }\n\n  /**\n   * Tries to automatically adjust the width of columns based on:\n   *    - Header cell content\n   *    - Cell content of the first row\n   *    - Cell content of the last row\n   *\n   * @param container\n   * @param tempRef\n   * @param data\n   * @param autoWidth\n   */\n  adjustWidth(\n    container: Element,\n    tempRef: RefObject<HTMLDivElement>,\n    data: Tabular,\n    autoWidth = true,\n  ): this {\n    if (!container) {\n      // we can't calculate the width because the container\n      // is unknown at this stage\n      return this;\n    }\n\n    // pixels\n    const containerWidth = container.clientWidth;\n\n    // let's create a shadow table with the first 10 rows of the data\n    // and let the browser to render the table with table-layout: auto\n    // no padding, margin or border to get the minimum space required\n    // to render columns. One the table is rendered and widths are known,\n    // we unmount the shadow table from the DOM and set the correct width\n    const shadowTable = createRef();\n    if (data && data.length && autoWidth) {\n      // render a ShadowTable with the first 10 rows\n      const el = h(ShadowTable, {\n        data: Tabular.fromRows(data.rows.slice(0, 10)),\n        header: this,\n      });\n      el.ref = shadowTable;\n\n      // TODO: we should NOT query the container here. use Refs instead\n      render(el, tempRef.current);\n    }\n\n    for (const column of this.columns) {\n      if (!column.width && autoWidth) {\n        // tries to find the corresponding cell\n        // from the ShadowTable and set the correct width\n        column.width = px(\n          getWidth(shadowTable.current.base, this.columns.indexOf(column)),\n        );\n      } else {\n        column.width = px(width(column.width, containerWidth));\n      }\n    }\n\n    if (data && data.length && autoWidth) {\n      // unmount the shadow table from temp\n      render(null, tempRef.current);\n    }\n\n    return this;\n  }\n\n  private setSort(userConfig: UserConfig): void {\n    for (const column of this.columns) {\n      // implicit userConfig.sort flag\n      if (column.sort === undefined && userConfig.sort) {\n        column.sort = {\n          enabled: true,\n        };\n      }\n\n      // false, null, etc.\n      if (!column.sort) {\n        column.sort = {\n          enabled: false,\n        };\n      } else if (typeof column.sort === 'object') {\n        column.sort = {\n          enabled: true,\n          ...column.sort,\n        };\n      }\n    }\n  }\n\n  private setFixedHeader(userConfig: UserConfig): void {\n    for (const column of this.columns) {\n      if (column.fixedHeader === undefined) {\n        column.fixedHeader = userConfig.fixedHeader;\n      }\n    }\n  }\n\n  private setID(): void {\n    for (const column of this.columns) {\n      if (!column.id && typeof column.name === 'string') {\n        // let's guess the column ID if it's undefined\n        column.id = camelCase(column.name);\n      }\n    }\n  }\n\n  static fromUserConfig(userConfig: UserConfig): Header | null {\n    const header = new Header();\n\n    if (userConfig.from) {\n      header.columns = Header.fromHTMLTable(userConfig.from).columns;\n    } else if (userConfig.columns) {\n      for (const column of userConfig.columns) {\n        if (typeof column === 'string' || isValidElement(column)) {\n          header.columns.push({\n            name: column,\n          });\n        } else if (typeof column === 'object') {\n          header.columns.push(column as TColumn);\n        }\n      }\n    } else if (\n      userConfig.data &&\n      typeof userConfig.data[0] === 'object' &&\n      !(userConfig.data[0] instanceof Array)\n    ) {\n      // if data[0] is an object but not an Array\n      header.columns = Object.keys(userConfig.data[0]).map((name) => {\n        return { name: name };\n      });\n    }\n\n    if (header.columns.length) {\n      header.setID();\n      header.setSort(userConfig);\n      header.setFixedHeader(userConfig);\n      return header;\n    }\n\n    return null;\n  }\n\n  static fromHTMLTable(element: HTMLElement): Header {\n    const header = new Header();\n    const thead = element.querySelector('thead');\n    const ths = thead.querySelectorAll('th');\n\n    for (const th of ths as any) {\n      header.columns.push({\n        name: th.innerText,\n        width: th.width,\n      });\n    }\n\n    return header;\n  }\n}\n\nexport default Header;\n","import { BaseComponent, BaseProps } from './view/base';\nimport { Fragment, h, VNode } from 'preact';\nimport log from './util/log';\n\nexport enum PluginPosition {\n  Header,\n  Footer,\n}\n\nexport interface Plugin {\n  id: string;\n  position: PluginPosition;\n  component: VNode<any>;\n  order?: number;\n}\n\nexport class PluginManager {\n  private readonly plugins: Plugin[];\n\n  constructor() {\n    this.plugins = [];\n  }\n\n  get(id: string): Plugin | null {\n    const plugins = this.plugins.filter((p) => p.id === id);\n\n    if (plugins.length > 0) {\n      return plugins[0];\n    }\n\n    return null;\n  }\n\n  add(plugin: Plugin): this {\n    if (!plugin.id) {\n      log.error('Plugin ID cannot be empty');\n      return this;\n    }\n\n    if (this.get(plugin.id) !== null) {\n      log.error(`Duplicate plugin ID: ${plugin.id}`);\n      return this;\n    }\n\n    this.plugins.push(plugin);\n    return this;\n  }\n\n  remove(id: string): this {\n    this.plugins.splice(this.plugins.indexOf(this.get(id)), 1);\n    return this;\n  }\n\n  list(position?: PluginPosition): Plugin[] {\n    let plugins: Plugin[];\n\n    if (position != null || position != undefined) {\n      plugins = this.plugins.filter((p) => p.position === position);\n    } else {\n      plugins = this.plugins;\n    }\n\n    return plugins.sort((a, b) => a.order - b.order);\n  }\n}\n\nexport interface PluginRendererProps extends BaseProps {\n  position?: PluginPosition;\n}\n\nexport class PluginRenderer extends BaseComponent<PluginRendererProps, {}> {\n  render() {\n    return h(\n      Fragment,\n      {},\n      this.config.plugin.list(this.props.position).map((p) => p.component),\n    );\n  }\n}\n","export function camelCase(str: string): string {\n  return str.replace(/(?:^\\w|[A-Z]|\\b\\w|\\s+)/g, function (match, index) {\n    if (+match === 0) return ''; // or if (/\\s+/.test(match)) for white spaces\n    return index === 0 ? match.toLowerCase() : match.toUpperCase();\n  });\n}\n","const _prefix = 'ID_';\n\n/**\n * This class is mostly based on Flux's Dispatcher by Facebook\n * https://github.com/facebook/flux/blob/master/src/Dispatcher.js\n */\nexport default class Dispatcher<TPayload> {\n  _callbacks: { [key: string]: (payload: TPayload) => void };\n  _isDispatching: boolean;\n  _isHandled: { [key: string]: boolean };\n  _isPending: { [key: string]: boolean };\n  _lastID: number;\n  _pendingPayload: TPayload;\n\n  constructor() {\n    this._callbacks = {};\n    this._isDispatching = false;\n    this._isHandled = {};\n    this._isPending = {};\n    this._lastID = 1;\n  }\n  /**\n   * Registers a callback to be invoked with every dispatched payload. Returns\n   * a token that can be used with `waitFor()`.\n   */\n  register(callback: (payload: TPayload) => void): string {\n    const id = _prefix + this._lastID++;\n    this._callbacks[id] = callback;\n    return id;\n  }\n  /**\n   * Removes a callback based on its token.\n   */\n  unregister(id: string): void {\n    if (!this._callbacks[id]) {\n      throw Error(\n        `Dispatcher.unregister(...): ${id} does not map to a registered callback.`,\n      );\n    }\n\n    delete this._callbacks[id];\n  }\n  /**\n   * Waits for the callbacks specified to be invoked before continuing execution\n   * of the current callback. This method should only be used by a callback in\n   * response to a dispatched payload.\n   */\n  waitFor(ids: Array<string>): void {\n    if (!this._isDispatching) {\n      throw Error(\n        'Dispatcher.waitFor(...): Must be invoked while dispatching.',\n      );\n    }\n\n    for (let ii = 0; ii < ids.length; ii++) {\n      const id = ids[ii];\n      if (this._isPending[id]) {\n        if (!this._isHandled[id]) {\n          throw Error(`Dispatcher.waitFor(...): Circular dependency detected while ' +\n            'waiting for ${id}.`);\n        }\n        continue;\n      }\n      if (!this._callbacks[id]) {\n        throw Error(\n          `Dispatcher.waitFor(...): ${id} does not map to a registered callback.`,\n        );\n      }\n\n      this._invokeCallback(id);\n    }\n  }\n  /**\n   * Dispatches a payload to all registered callbacks.\n   */\n  dispatch(payload: TPayload): void {\n    if (this._isDispatching) {\n      throw Error(\n        'Dispatch.dispatch(...): Cannot dispatch in the middle of a dispatch.',\n      );\n    }\n\n    this._startDispatching(payload);\n    try {\n      for (const id in this._callbacks) {\n        if (this._isPending[id]) {\n          continue;\n        }\n        this._invokeCallback(id);\n      }\n    } finally {\n      this._stopDispatching();\n    }\n  }\n  /**\n   * Is this Dispatcher currently dispatching.\n   */\n  isDispatching(): boolean {\n    return this._isDispatching;\n  }\n  /**\n   * Call the callback stored with the given id. Also do some internal\n   * bookkeeping.\n   *\n   * @internal\n   */\n  private _invokeCallback(id: string): void {\n    this._isPending[id] = true;\n    this._callbacks[id](this._pendingPayload);\n    this._isHandled[id] = true;\n  }\n  /**\n   * Set up bookkeeping needed when dispatching.\n   *\n   * @internal\n   */\n  private _startDispatching(payload: TPayload): void {\n    for (const id in this._callbacks) {\n      this._isPending[id] = false;\n      this._isHandled[id] = false;\n    }\n    this._pendingPayload = payload;\n    this._isDispatching = true;\n  }\n  /**\n   * Clear bookkeeping used for dispatching.\n   *\n   * @internal\n   */\n  private _stopDispatching(): void {\n    delete this._pendingPayload;\n    this._isDispatching = false;\n  }\n}\n","/**\n * Base Storage class. All storage implementation must inherit this class\n */\nimport { TData } from '../types';\n\nabstract class Storage<I> {\n  /**\n   * Returns all rows based on ...args\n   * @param args\n   */\n  abstract async get(...args): Promise<StorageResponse>;\n\n  /**\n   * To set all rows\n   *\n   * @param data\n   */\n  set?(data: I | Function): this;\n}\n\nexport interface StorageResponse {\n  data: TData;\n  total: number;\n}\n\nexport default Storage;\n","import Storage, { StorageResponse } from './storage';\nimport { TData } from '../types';\n\nclass MemoryStorage extends Storage<TData> {\n  private data: (() => TData) | (() => Promise<TData>);\n\n  constructor(data: TData | (() => TData) | (() => Promise<TData>)) {\n    super();\n    this.set(data);\n  }\n\n  public async get(): Promise<StorageResponse> {\n    const data = await this.data();\n\n    return {\n      data: data,\n      total: data.length,\n    };\n  }\n\n  public set(data: TData | (() => TData) | (() => Promise<TData>)): this {\n    if (data instanceof Array) {\n      this.data = (): TData => data;\n    } else if (data instanceof Function) {\n      this.data = data;\n    }\n\n    return this;\n  }\n}\n\nexport default MemoryStorage;\n","/**\n * Centralized logging lib\n *\n * This class needs some improvements but so far it has been used to have a coherent way to log\n */\nclass Logger {\n  private format(message: string, type: string): string {\n    return `[Grid.js] [${type.toUpperCase()}]: ${message}`;\n  }\n\n  error(message: string, throwException = false): void {\n    const msg = this.format(message, 'error');\n\n    if (throwException) {\n      throw Error(msg);\n    } else {\n      console.error(msg);\n    }\n  }\n\n  warn(message: string): void {\n    console.warn(this.format(message, 'warn'));\n  }\n\n  info(message: string): void {\n    console.info(this.format(message, 'info'));\n  }\n}\n\nexport default new Logger();\n","import Storage, { StorageResponse } from './storage';\nimport log from '../util/log';\n\nexport interface ServerStorageOptions extends RequestInit {\n  url: string;\n  // to format the data and columns\n  then?: (data: any) => any[][];\n  // to handle the response from the server. `handle` will\n  // be called first and then `then` callback will be invoked\n  // The purpose of this function is to handle the behaviour\n  // of server and either reject and resolve the initial response\n  // before calling the `then` function\n  handle?: (response: Response) => Promise<any>;\n  total?: (data: any) => number;\n  // to bypass the current implementation of ServerStorage and process the\n  // request manually (e.g. when user wants to connect their own SDK/HTTP Client)\n  data?: (opts: ServerStorageOptions) => Promise<StorageResponse>;\n}\n\nclass ServerStorage extends Storage<ServerStorageOptions> {\n  private readonly options: ServerStorageOptions;\n\n  constructor(options: ServerStorageOptions) {\n    super();\n    this.options = options;\n  }\n\n  private handler(response: Response): Promise<any> {\n    if (typeof this.options.handle === 'function') {\n      return this.options.handle(response);\n    }\n\n    if (response.ok) {\n      return response.json();\n    } else {\n      log.error(\n        `Could not fetch data: ${response.status} - ${response.statusText}`,\n        true,\n      );\n      return null;\n    }\n  }\n\n  public get(options?: ServerStorageOptions): Promise<StorageResponse> {\n    // this.options is the initial config object\n    // options is the runtime config passed by the pipeline (e.g. search component)\n    const opts = {\n      ...this.options,\n      ...options,\n    };\n\n    // if `options.data` is provided, the current ServerStorage\n    // implementation will be ignored and we let options.data to\n    // handle the request. Useful when HTTP client needs to be\n    // replaced with something else\n    if (typeof opts.data === 'function') {\n      return opts.data(opts);\n    }\n\n    return fetch(opts.url, opts)\n      .then(this.handler.bind(this))\n      .then((res) => {\n        return {\n          data: opts.then(res),\n          total: typeof opts.total === 'function' ? opts.total(res) : undefined,\n        };\n      });\n  }\n}\n\nexport default ServerStorage;\n","import { UserConfig } from '../config';\nimport MemoryStorage from './memory';\nimport Storage from './storage';\nimport ServerStorage from './server';\nimport log from '../util/log';\nimport { html } from '../util/html';\n\nclass StorageUtils {\n  /**\n   * Accepts the userConfig dict and tries to guess and return a Storage type\n   *\n   * @param userConfig\n   */\n  public static createFromUserConfig(userConfig: UserConfig): Storage<any> {\n    let storage = null;\n    // `data` array is provided\n    if (userConfig.data) {\n      storage = new MemoryStorage(userConfig.data);\n    }\n\n    if (userConfig.from) {\n      storage = new MemoryStorage(this.tableElementToArray(userConfig.from));\n      // remove the source table element from the DOM\n      userConfig.from.style.display = 'none';\n    }\n\n    if (userConfig.server) {\n      storage = new ServerStorage(userConfig.server);\n    }\n\n    if (!storage) {\n      log.error('Could not determine the storage type', true);\n    }\n\n    return storage;\n  }\n\n  /**\n   * Accepts a HTML table element and converts it into a 2D array of data\n   *\n   * TODO: This function can be a step in the pipeline: Convert Table -> Load into a memory storage -> ...\n   *\n   * @param element\n   */\n  static tableElementToArray(element: HTMLElement): any[][] {\n    const arr = [];\n    const tbody = element.querySelector('tbody');\n    const rows = tbody.querySelectorAll('tr');\n\n    for (const row of rows as any) {\n      const cells: HTMLElement[] = row.querySelectorAll('td');\n      const parsedRow = [];\n\n      for (const cell of cells) {\n        // try to capture a TD with single text element first\n        if (\n          cell.childNodes.length === 1 &&\n          cell.childNodes[0].nodeType === Node.TEXT_NODE\n        ) {\n          parsedRow.push(cell.innerText);\n        } else {\n          parsedRow.push(html(cell.innerHTML));\n        }\n      }\n\n      arr.push(parsedRow);\n    }\n\n    return arr;\n  }\n}\n\nexport default StorageUtils;\n","import { PipelineProcessor, ProcessorType } from './processor';\nimport { ID } from '../util/id';\nimport log from '../util/log';\nimport { EventEmitter } from '../util/eventEmitter';\n\ninterface PipelineEvents<T> {\n  /**\n   * Generic updated event. Triggers the callback function when the pipeline\n   * is updated, including when a new processor is registered, a processor's props\n   * get updated, etc.\n   */\n  updated: (processor: PipelineProcessor<any, any>) => void;\n  /**\n   * Triggers the callback function when a new\n   * processor is registered successfully\n   */\n  afterRegister: () => void;\n  /**\n   * Triggers the callback when a registered\n   * processor's property is updated\n   */\n  propsUpdated: () => void;\n  /**\n   * Triggers the callback function when the pipeline\n   * is fully processed, before returning the results\n   *\n   * afterProcess will not be called if there is an\n   * error in the pipeline (i.e a step throw an Error)\n   */\n  afterProcess: (prev: T) => void;\n  /**\n   * Triggers the callback function when the pipeline\n   * fails to process all steps or at least one step\n   * throws an Error\n   */\n  error: (prev: T) => void;\n}\n\nclass Pipeline<T, P = {}> extends EventEmitter<PipelineEvents<T>> {\n  // available steps for this pipeline\n  private readonly _steps: Map<\n    ProcessorType,\n    PipelineProcessor<T, P>[]\n  > = new Map<ProcessorType, PipelineProcessor<T, P>[]>();\n  // used to cache the results of processors using their id field\n  private cache: Map<string, any> = new Map<string, any>();\n  // keeps the index of the last updated processor in the registered\n  // processors list and will be used to invalidate the cache\n  // -1 means all new processors should be processed\n  private lastProcessorIndexUpdated = -1;\n\n  constructor(steps?: PipelineProcessor<any, any>[]) {\n    super();\n\n    if (steps) {\n      steps.forEach((step) => this.register(step));\n    }\n  }\n\n  /**\n   * Clears the `cache` array\n   */\n  clearCache(): void {\n    this.cache = new Map<string, any>();\n    this.lastProcessorIndexUpdated = -1;\n  }\n\n  /**\n   * Registers a new processor\n   *\n   * @param processor\n   * @param priority\n   */\n  register(\n    processor: PipelineProcessor<any, any>,\n    priority: number = null,\n  ): void {\n    if (processor.type === null) {\n      throw Error('Processor type is not defined');\n    }\n\n    // binding the propsUpdated callback to the Pipeline\n    processor.on('propsUpdated', this.processorPropsUpdated.bind(this));\n\n    this.addProcessorByPriority(processor, priority);\n    this.afterRegistered(processor);\n  }\n\n  /**\n   * Removes a processor from the list\n   *\n   * @param processor\n   */\n  unregister(processor: PipelineProcessor<any, any>): void {\n    if (!processor) return;\n\n    const subSteps = this._steps.get(processor.type);\n\n    if (subSteps && subSteps.length) {\n      this._steps.set(\n        processor.type,\n        subSteps.filter((proc) => proc != processor),\n      );\n      this.emit('updated', processor);\n    }\n  }\n\n  /**\n   * Registers a new processor\n   *\n   * @param processor\n   * @param priority\n   */\n  private addProcessorByPriority(\n    processor: PipelineProcessor<T, P>,\n    priority: number,\n  ): void {\n    let subSteps = this._steps.get(processor.type);\n\n    if (!subSteps) {\n      const newSubStep = [];\n      this._steps.set(processor.type, newSubStep);\n      subSteps = newSubStep;\n    }\n\n    if (priority === null || priority < 0) {\n      subSteps.push(processor);\n    } else {\n      if (!subSteps[priority]) {\n        // slot is empty\n        subSteps[priority] = processor;\n      } else {\n        // slot is NOT empty\n        const first = subSteps.slice(0, priority - 1);\n        const second = subSteps.slice(priority + 1);\n\n        this._steps.set(processor.type, first.concat(processor).concat(second));\n      }\n    }\n  }\n\n  /**\n   * Flattens the _steps Map and returns a list of steps with their correct priorities\n   */\n  get steps(): PipelineProcessor<T, P>[] {\n    let steps: PipelineProcessor<T, P>[] = [];\n\n    for (const type of this.getSortedProcessorTypes()) {\n      const subSteps = this._steps.get(type);\n\n      if (subSteps && subSteps.length) {\n        steps = steps.concat(subSteps);\n      }\n    }\n\n    // to remove any undefined elements\n    return steps.filter((s) => s);\n  }\n\n  /**\n   * Accepts ProcessType and returns an array of the registered processes\n   * with the give type\n   *\n   * @param type\n   */\n  getStepsByType(type: ProcessorType): PipelineProcessor<T, P>[] {\n    return this.steps.filter((process) => process.type === type);\n  }\n\n  /**\n   * Returns a list of ProcessorType according to their priority\n   */\n  private getSortedProcessorTypes(): ProcessorType[] {\n    return Object.keys(ProcessorType)\n      .filter((key) => !isNaN(Number(key)))\n      .map((key) => Number(key));\n  }\n\n  /**\n   * Runs all registered processors based on their correct priority\n   * and returns the final output after running all steps\n   *\n   * @param data\n   */\n  async process(data?: T): Promise<T> {\n    const lastProcessorIndexUpdated = this.lastProcessorIndexUpdated;\n    const steps = this.steps;\n\n    let prev = data;\n\n    try {\n      for (const processor of steps) {\n        const processorIndex = this.findProcessorIndexByID(processor.id);\n\n        if (processorIndex >= lastProcessorIndexUpdated) {\n          // we should execute process() here since the last\n          // updated processor was before \"processor\".\n          // This is to ensure that we always have correct and up to date\n          // data from processors and also to skip them when necessary\n          prev = await processor.process(prev);\n          this.cache.set(processor.id, prev);\n        } else {\n          // cached results already exist\n          prev = this.cache.get(processor.id);\n        }\n      }\n    } catch (e) {\n      log.error(e);\n      // trigger the onError callback\n      this.emit('error', prev);\n\n      // rethrow\n      throw e;\n    }\n\n    // means the pipeline is up to date\n    this.lastProcessorIndexUpdated = steps.length;\n\n    // triggers the afterProcess callbacks with the results\n    this.emit('afterProcess', prev);\n\n    return prev;\n  }\n\n  /**\n   * Returns the registered processor's index in _steps array\n   *\n   * @param processorID\n   */\n  private findProcessorIndexByID(processorID: ID): number {\n    return this.steps.findIndex((p) => p.id == processorID);\n  }\n\n  /**\n   * Sets the last updates processors index locally\n   * This is used to invalid or skip a processor in\n   * the process() method\n   */\n  private setLastProcessorIndex(processor: PipelineProcessor<T, P>): void {\n    const processorIndex = this.findProcessorIndexByID(processor.id);\n\n    if (this.lastProcessorIndexUpdated > processorIndex) {\n      this.lastProcessorIndexUpdated = processorIndex;\n    }\n  }\n\n  private processorPropsUpdated(processor): void {\n    this.setLastProcessorIndex(processor);\n    this.emit('propsUpdated');\n    this.emit('updated', processor);\n  }\n\n  private afterRegistered(processor): void {\n    this.setLastProcessorIndex(processor);\n    this.emit('afterRegister');\n    this.emit('updated', processor);\n  }\n}\n\nexport default Pipeline;\n","import Storage, { StorageResponse } from '../../storage/storage';\nimport {\n  PipelineProcessor,\n  PipelineProcessorProps,\n  ProcessorType,\n} from '../processor';\n\ninterface StorageExtractorProps extends PipelineProcessorProps {\n  storage: Storage<any>;\n}\n\nclass StorageExtractor extends PipelineProcessor<\n  Promise<StorageResponse>,\n  StorageExtractorProps\n> {\n  get type(): ProcessorType {\n    return ProcessorType.Extractor;\n  }\n\n  async _process(opts: any): Promise<StorageResponse> {\n    return await this.props.storage.get(opts);\n  }\n}\n\nexport default StorageExtractor;\n","import { PipelineProcessor, ProcessorType } from '../processor';\nimport Tabular from '../../tabular';\nimport { ArrayResponse } from './storageResponseToArray';\n\nclass ArrayToTabularTransformer extends PipelineProcessor<Tabular, {}> {\n  get type(): ProcessorType {\n    return ProcessorType.Transformer;\n  }\n\n  _process(arrayResponse: ArrayResponse): Tabular {\n    const tabular = Tabular.fromArray(arrayResponse.data);\n\n    // for server-side storage\n    tabular.length = arrayResponse.total;\n\n    return tabular;\n  }\n}\n\nexport default ArrayToTabularTransformer;\n","import {\n  PipelineProcessor,\n  PipelineProcessorProps,\n  ProcessorType,\n} from '../processor';\nimport { ServerStorageOptions } from '../../storage/server';\n\ninterface ServerInitiatorProps extends PipelineProcessorProps {\n  serverStorageOptions: ServerStorageOptions;\n}\n\nclass ServerInitiator extends PipelineProcessor<\n  ServerStorageOptions,\n  ServerInitiatorProps\n> {\n  get type(): ProcessorType {\n    return ProcessorType.Initiator;\n  }\n\n  _process(): ServerStorageOptions {\n    return Object.entries(this.props.serverStorageOptions)\n      .filter(([_, val]) => typeof val !== 'function')\n      .reduce(\n        (acc, [k, v]) => ({ ...acc, [k]: v }),\n        {},\n      ) as ServerStorageOptions;\n  }\n}\n\nexport default ServerInitiator;\n","import {\n  PipelineProcessor,\n  PipelineProcessorProps,\n  ProcessorType,\n} from '../processor';\nimport { StorageResponse } from '../../storage/storage';\nimport { TCell, TData, TDataArray, TDataObject, TwoDArray } from '../../types';\nimport Header from '../../header';\n\nexport interface ArrayResponse {\n  data: TwoDArray<TCell>;\n  total: number;\n}\n\ninterface StorageResponseToArrayTransformerProps\n  extends PipelineProcessorProps {\n  header: Header;\n}\n\nclass StorageResponseToArrayTransformer extends PipelineProcessor<\n  ArrayResponse,\n  StorageResponseToArrayTransformerProps\n> {\n  get type(): ProcessorType {\n    return ProcessorType.Transformer;\n  }\n\n  private castData(data: TData): TwoDArray<TCell> {\n    if (!data || !data.length) {\n      return [];\n    }\n\n    // if it's a 2d array already\n    if (data[0] instanceof Array) {\n      return data as TDataArray;\n    }\n\n    // if it's an array of objects (but not array of arrays)\n    if (typeof data[0] === 'object' && !(data[0] instanceof Array)) {\n      return (data as TDataObject).map((row) =>\n        this.props.header.columns.map((column) => {\n          if (typeof column.id === 'function') {\n            return column.id(row);\n          } else {\n            return row[column.id];\n          }\n        }),\n      );\n    }\n\n    return [];\n  }\n\n  _process(storageResponse: StorageResponse): ArrayResponse {\n    return {\n      data: this.castData(storageResponse.data),\n      total: storageResponse.total,\n    };\n  }\n}\n\nexport default StorageResponseToArrayTransformer;\n","import { Config } from '../config';\nimport Pipeline from './pipeline';\nimport Tabular from '../tabular';\nimport StorageExtractor from './extractor/storage';\nimport ArrayToTabularTransformer from './transformer/arrayToTabular';\nimport ServerStorage from '../storage/server';\nimport ServerInitiator from './initiator/server';\nimport StorageResponseToArrayTransformer from './transformer/storageResponseToArray';\n\nclass PipelineUtils {\n  static createFromConfig(config: Config): Pipeline<Tabular> {\n    const pipeline = new Pipeline<Tabular>();\n\n    if (config.storage instanceof ServerStorage) {\n      pipeline.register(\n        new ServerInitiator({\n          serverStorageOptions: config.server,\n        }),\n      );\n    }\n\n    pipeline.register(new StorageExtractor({ storage: config.storage }));\n    pipeline.register(\n      new StorageResponseToArrayTransformer({ header: config.header }),\n    );\n    pipeline.register(new ArrayToTabularTransformer());\n\n    return pipeline;\n  }\n}\n\nexport default PipelineUtils;\n","import { ComponentChild } from 'preact';\nimport Row from './row';\nimport { SortConfig } from './view/plugin/sort/sort';\n\nexport type ProtoExtends<T, U> = U & Omit<T, keyof U>;\n\nexport type OneDArray<T> = T[];\nexport type TwoDArray<T> = T[][];\n\n/**\n * Table cell types\n */\nexport type TCell = number | string | boolean | ComponentChild | HTMLElement;\n// Array of Arrays\nexport type TDataArrayRow = OneDArray<TCell>;\nexport type TDataArray = OneDArray<TDataArrayRow>;\n// Array of Objects\nexport type TDataObjectRow = { [key: string]: TCell };\nexport type TDataObject = OneDArray<TDataObjectRow>;\n// (Array of Arrays) and (Array of Objects)\nexport type TData = TDataArray | TDataObject;\n\n// Table header cell type\nexport interface TColumn {\n  id?: string | ((row: TDataArrayRow | TDataObjectRow) => string);\n  name: string | ComponentChild;\n  width?: string;\n  sort?: SortConfig;\n  children?: OneDArray<TColumn>;\n  fixedHeader?: boolean;\n  formatter?: (cell: TCell, row: Row, column: TColumn) => ComponentChild;\n}\n\n// Comparator function for the sorting plugin\nexport type Comparator<T> = (a: T, b: T) => number;\n\nexport interface TColumnSort {\n  index: number;\n  // 1 ascending, -1 descending\n  direction?: 1 | -1;\n}\n\n// container status\nexport enum Status {\n  Init,\n  Loading,\n  Loaded,\n  Rendered,\n  Error,\n}\n\nexport type CSSDeclaration = {\n  [key: string]: string;\n};\n","import {\n  CSSDeclaration,\n  OneDArray,\n  ProtoExtends,\n  TColumn,\n  TData,\n} from './types';\nimport Storage from './storage/storage';\nimport Pipeline from './pipeline/pipeline';\nimport Tabular from './tabular';\nimport { Search, SearchConfig } from './view/plugin/search/search';\nimport { Pagination, PaginationConfig } from './view/plugin/pagination';\nimport Header from './header';\nimport { ServerStorageOptions } from './storage/server';\nimport Dispatcher from './util/dispatcher';\nimport { GenericSortConfig } from './view/plugin/sort/sort';\nimport { Language, Translator } from './i18n/language';\nimport { ComponentChild, createRef, h, RefObject } from 'preact';\nimport StorageUtils from './storage/storageUtils';\nimport PipelineUtils from './pipeline/pipelineUtils';\nimport { EventEmitter } from './util/eventEmitter';\nimport { GridEvents } from './events';\nimport { PluginManager, PluginPosition } from './plugin';\n\n// Config type used internally\nexport interface Config {\n  eventEmitter: EventEmitter<GridEvents>;\n  dispatcher: Dispatcher<any>;\n  plugin: PluginManager;\n  /** container element that is used to mount the Grid.js to */\n  container?: Element;\n  /** gridjs-temp div which is used internally */\n  tempRef?: RefObject<HTMLDivElement>;\n  data?: TData | (() => TData) | (() => Promise<TData>);\n  server?: ServerStorageOptions;\n  header?: Header;\n  /** to parse a HTML table and load the data */\n  from: HTMLElement;\n  storage: Storage<any>;\n  pipeline: Pipeline<Tabular>;\n  /** to automatically calculate the columns width */\n  autoWidth: boolean;\n  /** sets the width of the container and table */\n  width: string;\n  /** sets the height of the table */\n  height: string;\n  pagination: PaginationConfig;\n  sort: GenericSortConfig;\n  translator: Translator;\n  style?: Partial<{\n    table: CSSDeclaration;\n    td: CSSDeclaration;\n    th: CSSDeclaration;\n    container: CSSDeclaration;\n    header: CSSDeclaration;\n    footer: CSSDeclaration;\n  }>;\n  className?: Partial<{\n    table: string;\n    th: string;\n    td: string;\n    container: string;\n    footer: string;\n    header: string;\n  }>;\n}\n\n// Config type used by the consumers\ninterface UserConfigExtend {\n  /** fixes the table header to the top of the table */\n  fixedHeader: boolean;\n  columns: OneDArray<TColumn | string | ComponentChild>;\n  search: SearchConfig | boolean;\n  pagination: PaginationConfig | boolean;\n  // implicit option to enable the sort plugin globally\n  sort: GenericSortConfig | boolean;\n  language: Language;\n}\n\nexport type UserConfig = ProtoExtends<\n  Partial<Config>,\n  Partial<UserConfigExtend>\n>;\n\nexport class Config {\n  // this is the config file passed by the user\n  // we need this for Config.update()\n  private _userConfig: UserConfig;\n\n  constructor(config?: Partial<Config>) {\n    Object.assign(this, {\n      ...Config.defaultConfig(),\n      ...config,\n    });\n\n    this._userConfig = {};\n  }\n\n  /**\n   * Assigns `updatedConfig` keys to the current config file\n   *\n   * @param updatedConfig\n   */\n  assign(updatedConfig: Partial<Config>): Config {\n    for (const key of Object.keys(updatedConfig)) {\n      // because we don't want to update the _userConfig cache\n      if (key === '_userConfig') continue;\n\n      this[key] = updatedConfig[key];\n    }\n\n    return this;\n  }\n\n  /**\n   * Updates the config from a UserConfig\n   *\n   * @param userConfig\n   */\n  update(userConfig: Partial<UserConfig>): Config {\n    if (!userConfig) return this;\n\n    this._userConfig = {\n      ...this._userConfig,\n      ...userConfig,\n    };\n\n    this.assign(Config.fromUserConfig(this._userConfig));\n\n    return this;\n  }\n\n  static defaultConfig(): Config {\n    return {\n      plugin: new PluginManager(),\n      dispatcher: new Dispatcher<any>(),\n      tempRef: createRef(),\n      width: '100%',\n      height: 'auto',\n      autoWidth: true,\n      style: {},\n      className: {},\n    } as Config;\n  }\n\n  static fromUserConfig(userConfig: UserConfig): Config {\n    const config = new Config(userConfig as Config);\n\n    // to set the initial _userConfig object\n    config._userConfig = userConfig;\n\n    // Sort\n    if (typeof userConfig.sort === 'boolean' && userConfig.sort) {\n      config.assign({\n        sort: {\n          multiColumn: true,\n        },\n      });\n    }\n\n    // Header\n    config.assign({\n      header: Header.fromUserConfig(config),\n    });\n\n    config.assign({\n      storage: StorageUtils.createFromUserConfig(userConfig),\n    });\n\n    config.assign({\n      pipeline: PipelineUtils.createFromConfig(config),\n    });\n\n    // Translator\n    config.assign({\n      translator: new Translator(userConfig.language),\n    });\n\n    // Search\n    config.plugin.add({\n      id: 'search',\n      position: PluginPosition.Header,\n      component: h(Search, {\n        enabled:\n          userConfig.search === true || userConfig.search instanceof Object,\n        ...(userConfig.search as SearchConfig),\n      }),\n    });\n\n    // Pagination\n    config.plugin.add({\n      id: 'pagination',\n      position: PluginPosition.Footer,\n      component: h(Pagination, {\n        enabled:\n          userConfig.pagination === true ||\n          userConfig.pagination instanceof Object,\n        ...(userConfig.pagination as PaginationConfig),\n      }),\n    });\n\n    return config;\n  }\n}\n","import { ComponentChild, h, JSX } from 'preact';\n\nimport Cell from '../../cell';\nimport { BaseComponent, BaseProps } from '../base';\nimport { classJoin, className } from '../../util/className';\nimport { TColumn } from '../../types';\nimport Row from '../../row';\n\nexport interface TDProps extends BaseProps {\n  cell: Cell;\n  row?: Row;\n  column?: TColumn;\n  colSpan?: number;\n  className?: string;\n  role?: string;\n}\n\nexport class TD extends BaseComponent<TDProps, {}> {\n  private content(): ComponentChild {\n    if (\n      this.props.column &&\n      typeof this.props.column.formatter === 'function'\n    ) {\n      return this.props.column.formatter(\n        this.props.cell.data,\n        this.props.row,\n        this.props.column,\n      );\n    }\n\n    return this.props.cell.data;\n  }\n\n  private handleClick(e: JSX.TargetedMouseEvent<HTMLTableCellElement>): void {\n    this.config.eventEmitter.emit(\n      'cellClick',\n      e,\n      this.props.cell,\n      this.props.column,\n      this.props.row,\n    );\n  }\n\n  render() {\n    return (\n      <td\n        role={this.props.role}\n        colSpan={this.props.colSpan}\n        className={classJoin(\n          className('td'),\n          this.props.className,\n          this.config.className.td,\n        )}\n        style={{\n          ...this.config.style.td,\n        }}\n        onClick={this.handleClick.bind(this)}\n      >\n        {this.content()}\n      </td>\n    );\n  }\n}\n","import{options as n}from\"preact\";var t,u,r,o=0,i=[],c=n.__r,f=n.diffed,e=n.__c,a=n.unmount;function v(t,r){n.__h&&n.__h(u,t,o||r),o=0;var i=u.__H||(u.__H={__:[],__h:[]});return t>=i.__.length&&i.__.push({}),i.__[t]}function m(n){return o=1,p(k,n)}function p(n,r,o){var i=v(t++,2);return i.t=n,i.__c||(i.__c=u,i.__=[o?o(r):k(void 0,r),function(n){var t=i.t(i.__[0],n);i.__[0]!==t&&(i.__=[t,i.__[1]],i.__c.setState({}))}]),i.__}function y(r,o){var i=v(t++,3);!n.__s&&j(i.__H,o)&&(i.__=r,i.__H=o,u.__H.__h.push(i))}function l(r,o){var i=v(t++,4);!n.__s&&j(i.__H,o)&&(i.__=r,i.__H=o,u.__h.push(i))}function h(n){return o=5,_(function(){return{current:n}},[])}function s(n,t,u){o=6,l(function(){\"function\"==typeof n?n(t()):n&&(n.current=t())},null==u?u:u.concat(n))}function _(n,u){var r=v(t++,7);return j(r.__H,u)?(r.__H=u,r.__h=n,r.__=n()):r.__}function A(n,t){return o=8,_(function(){return n},t)}function F(n){var r=u.context[n.__c],o=v(t++,9);return o.__c=n,r?(null==o.__&&(o.__=!0,r.sub(u)),r.props.value):n.__}function T(t,u){n.useDebugValue&&n.useDebugValue(u?u(t):t)}function d(n){var r=v(t++,10),o=m();return r.__=n,u.componentDidCatch||(u.componentDidCatch=function(n){r.__&&r.__(n),o[1](n)}),[o[0],function(){o[1](void 0)}]}function q(){i.some(function(t){if(t.__P)try{t.__H.__h.forEach(b),t.__H.__h.forEach(g),t.__H.__h=[]}catch(u){return t.__H.__h=[],n.__e(u,t.__v),!0}}),i=[]}n.__r=function(n){c&&c(n),t=0;var r=(u=n.__c).__H;r&&(r.__h.forEach(b),r.__h.forEach(g),r.__h=[])},n.diffed=function(t){f&&f(t);var u=t.__c;u&&u.__H&&u.__H.__h.length&&(1!==i.push(u)&&r===n.requestAnimationFrame||((r=n.requestAnimationFrame)||function(n){var t,u=function(){clearTimeout(r),x&&cancelAnimationFrame(t),setTimeout(n)},r=setTimeout(u,100);x&&(t=requestAnimationFrame(u))})(q))},n.__c=function(t,u){u.some(function(t){try{t.__h.forEach(b),t.__h=t.__h.filter(function(n){return!n.__||g(n)})}catch(r){u.some(function(n){n.__h&&(n.__h=[])}),u=[],n.__e(r,t.__v)}}),e&&e(t,u)},n.unmount=function(t){a&&a(t);var u=t.__c;if(u&&u.__H)try{u.__H.__.forEach(b)}catch(t){n.__e(t,u.__v)}};var x=\"function\"==typeof requestAnimationFrame;function b(n){\"function\"==typeof n.u&&n.u()}function g(n){n.u=n.__()}function j(n,t){return!n||t.some(function(t,u){return t!==n[u]})}function k(n,t){return\"function\"==typeof t?t(n):t}export{m as useState,p as useReducer,y as useEffect,l as useLayoutEffect,h as useRef,s as useImperativeHandle,_ as useMemo,A as useCallback,F as useContext,T as useDebugValue,d as useErrorBoundary};\n//# sourceMappingURL=hooks.module.js.map\n","import { h, JSX } from 'preact';\n\nimport Row from '../../row';\nimport Cell from '../../cell';\nimport { BaseComponent, BaseProps } from '../base';\nimport { className } from '../../util/className';\nimport { TColumn } from '../../types';\nimport { TD } from './td';\nimport Header from '../../header';\n\nexport interface TRProps extends BaseProps {\n  row?: Row;\n  header?: Header;\n}\n\nexport class TR extends BaseComponent<TRProps, {}> {\n  private getColumn(cellIndex: number): TColumn {\n    if (this.props.header) {\n      return this.props.header.columns[cellIndex];\n    }\n\n    return null;\n  }\n\n  private handleClick(e: JSX.TargetedMouseEvent<HTMLTableRowElement>): void {\n    this.config.eventEmitter.emit('rowClick', e, this.props.row);\n  }\n\n  render() {\n    if (this.props.children) {\n      return <tr className={className('tr')}>{this.props.children}</tr>;\n    } else {\n      return (\n        <tr className={className('tr')} onClick={this.handleClick.bind(this)}>\n          {this.props.row.cells.map((cell: Cell, i) => {\n            return (\n              <TD\n                key={cell.id}\n                cell={cell}\n                row={this.props.row}\n                column={this.getColumn(i)}\n              />\n            );\n          })}\n        </tr>\n      );\n    }\n  }\n}\n","import { h } from 'preact';\n\nimport Cell from '../../cell';\nimport { BaseComponent, BaseProps } from '../base';\nimport { classJoin, className } from '../../util/className';\nimport { TR } from './tr';\nimport { TD } from './td';\n\nexport interface MessageRowProps extends BaseProps {\n  message: string;\n  colSpan?: number;\n  className?: string;\n}\n\nexport class MessageRow extends BaseComponent<MessageRowProps, {}> {\n  render() {\n    return (\n      <TR>\n        <TD\n          role=\"alert\"\n          colSpan={this.props.colSpan}\n          cell={new Cell(this.props.message)}\n          className={classJoin(\n            className('message'),\n            this.props.className ? this.props.className : null,\n          )}\n        />\n      </TR>\n    );\n  }\n}\n","import { h } from 'preact';\n\nimport Row from '../../row';\nimport { TR } from './tr';\nimport Tabular from '../../tabular';\nimport { BaseComponent, BaseProps } from '../base';\nimport { className } from '../../util/className';\nimport { Status } from '../../types';\nimport Header from '../../header';\nimport { MessageRow } from './messageRow';\n\ninterface TBodyProps extends BaseProps {\n  data: Tabular;\n  status: Status;\n  header?: Header;\n}\n\nexport class TBody extends BaseComponent<TBodyProps, {}> {\n  private headerLength(): number {\n    if (this.props.header) {\n      return this.props.header.columns.length;\n    }\n    return 0;\n  }\n\n  render() {\n    return (\n      <tbody className={className('tbody')}>\n        {this.props.data &&\n          this.props.data.rows.map((row: Row) => {\n            return <TR key={row.id} row={row} header={this.props.header} />;\n          })}\n\n        {this.props.status === Status.Loading &&\n          (!this.props.data || this.props.data.length === 0) && (\n            <MessageRow\n              message={this._('loading')}\n              colSpan={this.headerLength()}\n              className={className('loading')}\n            />\n          )}\n\n        {this.props.status === Status.Loaded &&\n          this.props.data &&\n          this.props.data.length === 0 && (\n            <MessageRow\n              message={this._('noRecordsFound')}\n              colSpan={this.headerLength()}\n              className={className('notfound')}\n            />\n          )}\n\n        {this.props.status === Status.Error && (\n          <MessageRow\n            message={this._('error')}\n            colSpan={this.headerLength()}\n            className={className('error')}\n          />\n        )}\n      </tbody>\n    );\n  }\n}\n","import { Comparator, TCell } from '../../types';\nimport Tabular from '../../tabular';\nimport {\n  PipelineProcessor,\n  PipelineProcessorProps,\n  ProcessorType,\n} from '../processor';\nimport Row from '../../row';\nimport log from '../../util/log';\n\ninterface NativeSortProps extends PipelineProcessorProps {\n  columns: {\n    index: number;\n    // 1 ascending, -1 descending\n    direction?: 1 | -1;\n    compare?: Comparator<TCell>;\n  }[];\n}\n\nclass NativeSort extends PipelineProcessor<Tabular, NativeSortProps> {\n  protected validateProps(): void {\n    for (const condition of this.props.columns) {\n      if (condition.direction === undefined) {\n        condition.direction = 1;\n      }\n\n      if (condition.direction !== 1 && condition.direction !== -1) {\n        log.error(`Invalid sort direction ${condition.direction}`);\n      }\n    }\n  }\n\n  get type(): ProcessorType {\n    return ProcessorType.Sort;\n  }\n\n  private compare(cellA: TCell, cellB: TCell): number {\n    if (cellA > cellB) {\n      return 1;\n    } else if (cellA < cellB) {\n      return -1;\n    }\n\n    return 0;\n  }\n\n  private compareWrapper(a: Row, b: Row): number {\n    let cmp = 0;\n\n    for (const column of this.props.columns) {\n      if (cmp === 0) {\n        const cellA = a.cells[column.index].data;\n        const cellB = b.cells[column.index].data;\n\n        if (typeof column.compare === 'function') {\n          cmp |= column.compare(cellA, cellB) * column.direction;\n        } else {\n          cmp |= this.compare(cellA, cellB) * column.direction;\n        }\n      } else {\n        break;\n      }\n    }\n\n    return cmp;\n  }\n\n  protected _process(data: Tabular): Tabular {\n    const sortedRows = [...data.rows];\n    sortedRows.sort(this.compareWrapper.bind(this));\n\n    const sorted = new Tabular(sortedRows);\n    // we have to set the tabular length manually\n    // because of the server-side storage\n    sorted.length = data.length;\n\n    return sorted;\n  }\n}\n\nexport default NativeSort;\n","import BaseStore from '../../base/store';\nimport { SortActionsType } from './actions';\nimport { Comparator, TCell } from '../../../types';\n\nexport type SortStoreState = {\n  index: number;\n  direction: 1 | -1;\n  compare?: Comparator<TCell>;\n}[];\n\nexport class SortStore extends BaseStore<SortStoreState, SortActionsType> {\n  getInitialState(): SortStoreState {\n    return [];\n  }\n\n  handle(type, payload): void {\n    if (type === 'SORT_COLUMN') {\n      const { index, direction, multi, compare } = payload;\n      this.sortColumn(index, direction, multi, compare);\n    } else if (type === 'SORT_COLUMN_TOGGLE') {\n      const { index, multi, compare } = payload;\n      this.sortToggle(index, multi, compare);\n    }\n  }\n\n  private sortToggle(\n    index: number,\n    multi: boolean,\n    compare: Comparator<TCell>,\n  ): void {\n    const columns = [...this.state];\n    const column = columns.find((x) => x.index === index);\n\n    if (!column) {\n      this.sortColumn(index, 1, multi, compare);\n    } else {\n      this.sortColumn(index, column.direction === 1 ? -1 : 1, multi, compare);\n    }\n  }\n\n  private sortColumn(\n    index: number,\n    direction: 1 | -1,\n    multi: boolean,\n    compare: Comparator<TCell>,\n  ): void {\n    let columns = [...this.state];\n    const count = columns.length;\n    const column = columns.find((x) => x.index === index);\n    const exists = column !== undefined;\n\n    let add = false;\n    let reset = false;\n    let remove = false;\n    let update = false;\n\n    if (!exists) {\n      // the column has not been sorted\n      if (count === 0) {\n        // the first column to be sorted\n        add = true;\n      } else if (count > 0 && !multi) {\n        // remove the previously sorted column\n        // and sort the current column\n        add = true;\n        reset = true;\n      } else if (count > 0 && multi) {\n        // multi-sorting\n        // sort this column as well\n        add = true;\n      }\n    } else {\n      // the column has been sorted before\n      if (!multi) {\n        // single column sorting\n        if (count === 1) {\n          update = true;\n        } else if (count > 1) {\n          // this situation happens when we have already entered\n          // multi-sorting mode but then user tries to sort a single column\n          reset = true;\n          add = true;\n        }\n      } else {\n        // multi sorting\n        if (column.direction === -1) {\n          // remove the current column from the\n          // sorted columns array\n          remove = true;\n        } else {\n          update = true;\n        }\n      }\n    }\n\n    if (reset) {\n      // resetting the sorted columns\n      columns = [];\n    }\n\n    if (add) {\n      columns.push({\n        index: index,\n        direction: direction,\n        compare: compare,\n      });\n    } else if (update) {\n      const index = columns.indexOf(column);\n      columns[index].direction = direction;\n    } else if (remove) {\n      const index = columns.indexOf(column);\n      columns.splice(index, 1);\n    }\n\n    this.setState(columns);\n  }\n}\n","import { BaseActions } from '../../base/actions';\nimport { Comparator, TCell } from '../../../types';\n\nexport interface SortActionsType {\n  SORT_COLUMN: {\n    index: number;\n    direction: 1 | -1;\n    multi?: boolean;\n    compare?: Comparator<TCell>;\n  };\n\n  SORT_COLUMN_TOGGLE: {\n    index: number;\n    multi?: boolean;\n    compare?: Comparator<TCell>;\n  };\n}\n\nexport class SortActions extends BaseActions<SortActionsType> {\n  sortColumn(\n    index: number,\n    direction: 1 | -1,\n    multi?: boolean,\n    compare?: Comparator<TCell>,\n  ): void {\n    this.dispatch('SORT_COLUMN', {\n      index: index,\n      direction: direction,\n      multi: multi,\n      compare: compare,\n    });\n  }\n\n  sortToggle(\n    index: number,\n    multi?: boolean,\n    compare?: Comparator<TCell>,\n  ): void {\n    this.dispatch('SORT_COLUMN_TOGGLE', {\n      index: index,\n      multi: multi,\n      compare: compare,\n    });\n  }\n}\n","import {\n  PipelineProcessor,\n  PipelineProcessorProps,\n  ProcessorType,\n} from '../processor';\nimport { ServerStorageOptions } from '../../storage/server';\nimport { TColumnSort } from '../../types';\n\ninterface ServerSortProps extends PipelineProcessorProps {\n  columns: TColumnSort[];\n  url?: (prevUrl: string, columns: TColumnSort[]) => string;\n  body?: (prevBody: BodyInit, columns: TColumnSort[]) => BodyInit;\n}\n\nclass ServerSort extends PipelineProcessor<\n  ServerStorageOptions,\n  ServerSortProps\n> {\n  get type(): ProcessorType {\n    return ProcessorType.ServerSort;\n  }\n\n  _process(options?: ServerStorageOptions): ServerStorageOptions {\n    const updates = {};\n\n    if (this.props.url) {\n      updates['url'] = this.props.url(options.url, this.props.columns);\n    }\n\n    if (this.props.body) {\n      updates['body'] = this.props.body(options.body, this.props.columns);\n    }\n\n    return {\n      ...options,\n      ...updates,\n    };\n  }\n}\n\nexport default ServerSort;\n","import { h, JSX } from 'preact';\n\nimport { BaseComponent, BaseProps } from '../../base';\nimport { classJoin, className } from '../../../util/className';\nimport { ProcessorType } from '../../../pipeline/processor';\nimport NativeSort from '../../../pipeline/sort/native';\nimport { SortStore, SortStoreState } from './store';\nimport { Comparator, TCell, TColumnSort } from '../../../types';\nimport { SortActions } from './actions';\nimport ServerSort from '../../../pipeline/sort/server';\n\n// column specific config\nexport interface SortConfig {\n  enabled?: boolean;\n  compare?: Comparator<TCell>;\n}\n\n// generic sort config:\n//\n// Config {\n//    sort: GenericSortConfig\n// }\n//\nexport interface GenericSortConfig {\n  multiColumn?: boolean;\n  server?: {\n    url?: (prevUrl: string, columns: TColumnSort[]) => string;\n    body?: (prevBody: BodyInit, columns: TColumnSort[]) => BodyInit;\n  };\n}\n\nexport interface SortProps extends BaseProps {\n  // column index\n  index: number;\n}\n\ninterface SortState {\n  direction: 1 | -1 | 0;\n}\n\nexport class Sort extends BaseComponent<SortProps & SortConfig, SortState> {\n  private readonly sortProcessor: NativeSort | ServerSort;\n  private readonly actions: SortActions;\n  private readonly store: SortStore;\n  private readonly updateStateFn: (...args) => void;\n  private updateSortProcessorFn: (sortedColumns: SortStoreState) => void;\n\n  constructor(props: SortProps & SortConfig, context) {\n    super(props, context);\n\n    this.actions = new SortActions(this.config.dispatcher);\n    this.store = new SortStore(this.config.dispatcher);\n\n    if (props.enabled) {\n      this.sortProcessor = this.getOrCreateSortProcessor();\n      this.updateStateFn = this.updateState.bind(this);\n      this.store.on('updated', this.updateStateFn);\n      this.state = { direction: 0 };\n    }\n  }\n\n  componentWillUnmount(): void {\n    this.config.pipeline.unregister(this.sortProcessor);\n\n    this.store.off('updated', this.updateStateFn);\n    if (this.updateSortProcessorFn)\n      this.store.off('updated', this.updateSortProcessorFn);\n  }\n\n  /**\n   * Sets the internal state of component\n   */\n  private updateState(): void {\n    const currentColumn = this.store.state.find(\n      (x) => x.index === this.props.index,\n    );\n\n    if (!currentColumn) {\n      this.setState({\n        direction: 0,\n      });\n    } else {\n      this.setState({\n        direction: currentColumn.direction,\n      });\n    }\n  }\n\n  private updateSortProcessor(sortedColumns: SortStoreState) {\n    // updates the Sorting processor\n    this.sortProcessor.setProps({\n      columns: sortedColumns,\n    });\n  }\n\n  private getOrCreateSortProcessor(): NativeSort {\n    let processorType = ProcessorType.Sort;\n\n    if (this.config.sort && typeof this.config.sort.server === 'object') {\n      processorType = ProcessorType.ServerSort;\n    }\n\n    const processors = this.config.pipeline.getStepsByType(processorType);\n\n    // my assumption is that we only have ONE sorting processor in the\n    // entire pipeline and that's why I'm displaying a warning here\n    let processor;\n\n    // A sort process is already registered\n    if (processors.length > 0) {\n      processor = processors[0];\n    } else {\n      // let's create a new sort processor\n\n      // this event listener is here because\n      // we want to subscribe to the sort store only once\n      this.updateSortProcessorFn = this.updateSortProcessor.bind(this);\n      this.store.on('updated', this.updateSortProcessorFn);\n\n      if (processorType === ProcessorType.ServerSort) {\n        processor = new ServerSort({\n          columns: this.store.state,\n          ...this.config.sort.server,\n        });\n      } else {\n        processor = new NativeSort({\n          columns: this.store.state,\n        });\n      }\n\n      this.config.pipeline.register(processor);\n    }\n\n    return processor;\n  }\n\n  changeDirection(e: JSX.TargetedMouseEvent<HTMLButtonElement>): void {\n    e.preventDefault();\n    e.stopPropagation();\n\n    // to sort two or more columns at the same time\n    this.actions.sortToggle(\n      this.props.index,\n      e.shiftKey === true && this.config.sort.multiColumn,\n      this.props.compare,\n    );\n  }\n\n  render() {\n    if (!this.props.enabled) {\n      return null;\n    }\n\n    const direction = this.state.direction;\n    let sortClassName = 'neutral';\n\n    if (direction === 1) {\n      sortClassName = 'asc';\n    } else if (direction === -1) {\n      sortClassName = 'desc';\n    }\n\n    return (\n      <button\n        // because the corresponding <th> has tabIndex=0\n        tabIndex={-1}\n        aria-label={this._(`sort.sort${direction === 1 ? 'Desc' : 'Asc'}`)}\n        title={this._(`sort.sort${direction === 1 ? 'Desc' : 'Asc'}`)}\n        className={classJoin(\n          className('sort'),\n          className('sort', sortClassName),\n        )}\n        onClick={this.changeDirection.bind(this)}\n      />\n    );\n  }\n}\n","import { createRef, h, JSX } from 'preact';\n\nimport { BaseComponent, BaseProps } from '../base';\nimport { classJoin, className } from '../../util/className';\nimport { TColumn } from '../../types';\nimport { Sort } from '../plugin/sort/sort';\n\nexport interface THProps extends BaseProps {\n  index: number;\n  column: TColumn;\n}\n\nexport class TH extends BaseComponent<THProps, {}> {\n  private sortRef = createRef();\n\n  private isSortable(): boolean {\n    return this.props.column.sort.enabled;\n  }\n\n  private onClick(e: JSX.TargetedMouseEvent<HTMLInputElement>): void {\n    e.stopPropagation();\n\n    if (this.isSortable()) {\n      this.sortRef.current.changeDirection(e);\n    }\n  }\n\n  private keyDown(e: JSX.TargetedMouseEvent<HTMLInputElement>): void {\n    if (this.isSortable() && e.which === 13) {\n      this.onClick(e);\n    }\n  }\n\n  render() {\n    const props = {};\n\n    if (this.isSortable()) {\n      props['tabIndex'] = 0;\n    }\n\n    return (\n      <th\n        className={classJoin(\n          className('th'),\n          this.isSortable() ? className('th', 'sort') : null,\n          this.props.column.fixedHeader ? className('th', 'fixed') : null,\n          this.config.className.th,\n        )}\n        onClick={this.onClick.bind(this)}\n        style={{\n          ...this.config.style.th,\n          ...{ width: this.props.column.width },\n        }}\n        onKeyDown={this.keyDown.bind(this)}\n        {...props}\n      >\n        {this.props.column.name}\n        {this.isSortable() && (\n          <Sort\n            ref={this.sortRef}\n            index={this.props.index}\n            {...this.props.column.sort}\n          />\n        )}\n      </th>\n    );\n  }\n}\n","import { h } from 'preact';\n\nimport { TR } from './tr';\nimport { BaseComponent, BaseProps } from '../base';\nimport { TH } from './th';\nimport { className } from '../../util/className';\nimport Header from '../../header';\n\ninterface THeadProps extends BaseProps {\n  header: Header;\n}\n\nexport class THead extends BaseComponent<THeadProps, {}> {\n  render() {\n    if (this.props.header) {\n      return (\n        <thead key={this.props.header.id} className={className('thead')}>\n          <TR>\n            {this.props.header.columns.map((col, i) => {\n              return <TH column={col} index={i} />;\n            })}\n          </TR>\n        </thead>\n      );\n    }\n\n    return null;\n  }\n}\n","import { h } from 'preact';\n\nimport Tabular from '../../tabular';\nimport { TBody } from './tbody';\nimport { THead } from './thead';\nimport { BaseComponent, BaseProps } from '../base';\nimport Header from '../../header';\nimport { classJoin, className } from '../../util/className';\nimport { Status } from '../../types';\n\ninterface TableProps extends BaseProps {\n  data: Tabular;\n  status: Status;\n  header?: Header;\n  width: string;\n  height: string;\n}\n\nexport class Table extends BaseComponent<TableProps, {}> {\n  render() {\n    return (\n      <table\n        role=\"grid\"\n        className={classJoin(className('table'), this.config.className.table)}\n        style={{\n          ...this.config.style.table,\n          ...{\n            width: this.props.width,\n            height: this.props.height,\n          },\n        }}\n      >\n        <THead header={this.props.header} />\n        <TBody\n          data={this.props.data}\n          status={this.props.status}\n          header={this.props.header}\n        />\n      </table>\n    );\n  }\n}\n","import { h } from 'preact';\n\nimport { BaseComponent } from './base';\nimport { classJoin, className } from '../util/className';\nimport { useRef } from 'preact/hooks';\nimport { PluginPosition, PluginRenderer } from '../plugin';\n\ninterface HeaderContainerState {\n  isActive: boolean;\n}\n\nexport class HeaderContainer extends BaseComponent<{}, HeaderContainerState> {\n  private headerRef = useRef(null);\n\n  constructor(props, context) {\n    super(props, context);\n\n    this.state = {\n      isActive: true,\n    };\n  }\n\n  componentDidMount() {\n    if (this.headerRef.current.children.length === 0) {\n      this.setState({\n        isActive: false,\n      });\n    }\n  }\n\n  render() {\n    if (this.state.isActive) {\n      return (\n        <div\n          ref={this.headerRef}\n          className={classJoin(className('head'), this.config.className.header)}\n          style={{ ...this.config.style.header }}\n        >\n          <PluginRenderer position={PluginPosition.Header} />\n        </div>\n      );\n    }\n\n    return null;\n  }\n}\n","import { h } from 'preact';\n\nimport { BaseComponent } from './base';\nimport { classJoin, className } from '../util/className';\nimport { useRef } from 'preact/hooks';\nimport { PluginPosition, PluginRenderer } from '../plugin';\n\ninterface FooterContainerState {\n  isActive: boolean;\n}\n\nexport class FooterContainer extends BaseComponent<{}, FooterContainerState> {\n  private footerRef = useRef(null);\n\n  constructor(props, context) {\n    super(props, context);\n\n    this.state = {\n      isActive: true,\n    };\n  }\n\n  componentDidMount() {\n    if (this.footerRef.current.children.length === 0) {\n      this.setState({\n        isActive: false,\n      });\n    }\n  }\n\n  render() {\n    if (this.state.isActive) {\n      return (\n        <div\n          ref={this.footerRef}\n          className={classJoin(\n            className('footer'),\n            this.config.className.footer,\n          )}\n          style={{ ...this.config.style.footer }}\n        >\n          <PluginRenderer position={PluginPosition.Footer} />\n        </div>\n      );\n    }\n\n    return null;\n  }\n}\n","import { h, createContext, Context } from 'preact';\n\nimport Tabular from '../tabular';\nimport { BaseComponent, BaseProps } from './base';\nimport { classJoin, className } from '../util/className';\nimport { Status } from '../types';\nimport { Table } from './table/table';\nimport { HeaderContainer } from './headerContainer';\nimport { FooterContainer } from './footerContainer';\nimport Pipeline from '../pipeline/pipeline';\nimport Header from '../header';\nimport { Config } from '../config';\nimport log from '../util/log';\nimport { PipelineProcessor } from '../pipeline/processor';\n\ninterface ContainerProps extends BaseProps {\n  config: Config;\n  pipeline: Pipeline<Tabular>;\n  header?: Header;\n  width: string;\n  height: string;\n}\n\ninterface ContainerState {\n  status: Status;\n  header?: Header;\n  data?: Tabular;\n}\n\nexport class Container extends BaseComponent<ContainerProps, ContainerState> {\n  private readonly configContext: Context<Config>;\n  private processPipelineFn: (processor: PipelineProcessor<any, any>) => void;\n\n  constructor(props, context) {\n    super(props, context);\n\n    // global Config context which is passed to all components\n    this.configContext = createContext(null);\n\n    this.state = {\n      status: Status.Loading,\n      header: props.header,\n      data: null,\n    };\n  }\n\n  private async processPipeline() {\n    this.props.config.eventEmitter.emit('beforeLoad');\n\n    this.setState({\n      status: Status.Loading,\n    });\n\n    try {\n      const data = await this.props.pipeline.process();\n      this.setState({\n        data: data,\n        status: Status.Loaded,\n      });\n\n      this.props.config.eventEmitter.emit('load', data);\n    } catch (e) {\n      log.error(e);\n\n      this.setState({\n        status: Status.Error,\n        data: null,\n      });\n    }\n  }\n\n  async componentDidMount() {\n    const config = this.props.config;\n\n    // for the initial load\n    await this.processPipeline();\n\n    if (config.header && this.state.data && this.state.data.length) {\n      // now that we have the data, let's adjust columns width\n      // NOTE: that we only calculate the columns width once\n      this.setState({\n        header: config.header.adjustWidth(\n          config.container,\n          config.tempRef,\n          this.state.data,\n          config.autoWidth,\n        ),\n      });\n    }\n\n    this.processPipelineFn = this.processPipeline.bind(this);\n    this.props.pipeline.on('updated', this.processPipelineFn);\n  }\n\n  componentWillUnmount() {\n    this.props.pipeline.off('updated', this.processPipelineFn);\n  }\n\n  render() {\n    const configContext = this.configContext;\n\n    return (\n      <configContext.Provider value={this.props.config}>\n        <div\n          role=\"complementary\"\n          className={classJoin(\n            'gridjs',\n            className('container'),\n            this.state.status === Status.Loading ? className('loading') : null,\n            this.props.config.className.container,\n          )}\n          style={{\n            ...this.props.config.style.container,\n            ...{\n              width: this.props.width,\n            },\n          }}\n        >\n          {this.state.status === Status.Loading && (\n            <div className={className('loading-bar')} />\n          )}\n\n          <HeaderContainer />\n\n          <div\n            className={className('wrapper')}\n            style={{ width: this.props.width, height: this.props.height }}\n          >\n            <Table\n              data={this.state.data}\n              header={this.state.header}\n              width={this.props.width}\n              height={this.props.height}\n              status={this.state.status}\n            />\n          </div>\n\n          <FooterContainer />\n        </div>\n\n        <div\n          ref={this.props.config.tempRef}\n          id=\"gridjs-temp\"\n          className={className('temp')}\n        />\n      </configContext.Provider>\n    );\n  }\n}\n","import { Config, UserConfig } from './config';\nimport { h, render, VNode } from 'preact';\nimport { Container } from './view/container';\nimport log from './util/log';\nimport { EventEmitter } from './util/eventEmitter';\nimport { GridEvents } from './events';\nimport { PluginManager } from './plugin';\n\nclass Grid extends EventEmitter<GridEvents> {\n  public config: Config;\n  public plugin: PluginManager;\n\n  constructor(userConfig?: UserConfig) {\n    super();\n    this.config = new Config({ eventEmitter: this }).update(userConfig);\n    this.plugin = this.config.plugin;\n  }\n\n  public updateConfig(userConfig: Partial<UserConfig>): this {\n    this.config.update(userConfig);\n    return this;\n  }\n\n  createElement(): VNode {\n    return h(Container, {\n      config: this.config,\n      pipeline: this.config.pipeline,\n      header: this.config.header,\n      width: this.config.width,\n      height: this.config.height,\n    });\n  }\n\n  /**\n   * Uses the existing container and tries to clear the cache\n   * and re-render the existing Grid.js instance again. This is\n   * useful when a new config is set/updated.\n   *\n   */\n  forceRender(): this {\n    if (!this.config || !this.config.container) {\n      log.error(\n        'Container is empty. Make sure you call render() before forceRender()',\n        true,\n      );\n    }\n\n    // clear the pipeline cache\n    this.config.pipeline.clearCache();\n\n    // TODO: not sure if it's a good idea to render a null element but I couldn't find a better way\n    render(null, this.config.container);\n    render(this.createElement(), this.config.container);\n\n    return this;\n  }\n\n  /**\n   * Mounts the Grid.js instance to the container\n   * and renders the instance\n   *\n   * @param container\n   */\n  render(container: Element): this {\n    if (!container) {\n      log.error('Container element cannot be null', true);\n    }\n\n    if (container.childNodes.length > 0) {\n      log.error(\n        `The container element ${container} is not empty. Make sure the container is empty and call render() again`,\n      );\n      return this;\n    }\n\n    this.config.container = container;\n    render(this.createElement(), container);\n\n    return this;\n  }\n}\n\nexport default Grid;\n"],"names":["extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__extends","__","this","constructor","prototype","create","__assign","assign","t","s","i","n","arguments","length","call","apply","__awaiter","thisArg","_arguments","P","generator","Promise","resolve","reject","fulfilled","value","step","next","e","rejected","result","done","then","__generator","body","f","y","g","_","label","sent","trys","ops","verb","throw","return","Symbol","iterator","v","op","TypeError","pop","push","__spreadArrays","il","r","k","a","j","jl","l","u","o","c","parentNode","removeChild","children","defaultProps","h","key","ref","type","props","__k","__b","__e","__d","__c","__v","vnode","current","context","indexOf","base","w","m","__r","debounceRendering","sort","some","__P","T","__n","ownerSVGElement","$","A","isArray","x","I","H","appendChild","nextSibling","insertBefore","setProperty","test","C","style","cssText","replace","toLowerCase","slice","addEventListener","N","removeEventListener","removeAttributeNS","setAttributeNS","removeAttribute","setAttribute","event","z","contextType","__E","render","L","sub","state","__h","__s","getDerivedStateFromProps","componentWillMount","componentDidMount","componentWillReceiveProps","shouldComponentUpdate","componentWillUpdate","componentDidUpdate","getChildContext","getSnapshotBeforeUpdate","diffed","nodeType","localName","document","createTextNode","createElementNS","createElement","is","data","childNodes","dangerouslySetInnerHTML","attributes","name","__html","innerHTML","checked","unmount","componentWillUnmount","M","getDerivedStateFromError","setState","componentDidCatch","forceUpdate","bind","setTimeout","search","placeholder","sortAsc","sortDesc","pagination","previous","navigate","page","pages","showing","of","to","results","loading","noRecordsFound","error","language","_language","_defaultLanguage","enUS","Translator","message","lang","splitted","split","val_1","getString","join","_i","args","messageFormat","translated","translator","_super","_this","config","keys","getConfig","translate","Component","generateID","Math","random","toString","id","_id","Base","HTMLElement","parentElement","content","BaseComponent","html","setData","Cell","outerHTML","cast","cells","Row","_cells","map","cell","rows","Tabular","_rows","_length","len","row","toArray","fromCells","oneDtoTwoD","ProcessorType","EventEmitter","callbacks","listener","init","eventName","filter","forEach","_props","setProps","PipelineProcessor","validateProps","Function","emit","_process","GlobalSearchFilter","Filter","keyword","String","trim","tabular","selector","rowIndex","cellIndex","element","RegExp","className","prefix","reduce","prev","cur","classJoin","classNames","dispatcher","_state","getInitialState","register","_handle","BaseStore","action","handle","payload","newState","prevState","SearchStore","BaseActions","dispatch","SearchActions","ServerGlobalSearchFilter","ServerFilter","options","updates","url","actions","store","enabled","storeUpdatedFn","storeUpdated","on","searchProcessor","server","pipeline","Search","unregister","off","target","func","waitFor","timeout","onInput","onChange","debounceTimeout","clearTimeout","PaginationLimit","isNaN","Number","limit","Error","Limit","start","end","ServerPaginationLimit","ServerLimit","total","Pagination","processor","setTotalFromTabularFn","setTotalFromTabular","setTotal","resetPageOnUpdate","setPage","onUpdateFn","onUpdate","ceil","totalRows","buttonsCount","maxCount","min","pagePivot","floor","Fragment","tabIndex","onClick","title","from","summary","role","renderSummary","prevButton","disabled","renderPages","nextButton","width","containerWidth","parseInt","px","getWidth","shadowTable","columnIndex","tds","querySelectorAll","clientWidth","ShadowTable","padding","margin","border","outline","resetStyle","header","columns","col","whiteSpace","paddingRight","td","tr","position","zIndex","visibility","tableLayout","head","PluginPosition","_columns","Header","container","tempRef","autoWidth","el","fromRows","_a","column","userConfig","undefined","fixedHeader","match","index","toUpperCase","fromHTMLTable","isValidElement","setID","setSort","setFixedHeader","querySelector","th","innerText","_callbacks","_isDispatching","_isHandled","_isPending","_lastID","Dispatcher","callback","ids","ii","_invokeCallback","_startDispatching","_stopDispatching","_pendingPayload","set","MemoryStorage","Storage","Logger","throwException","msg","format","console","warn","info","ServerStorage","response","ok","json","log","status","statusText","opts","fetch","handler","res","StorageUtils","storage","tableElementToArray","display","arr","parsedRow","cells_1","_b","Node","TEXT_NODE","steps","Map","Pipeline","cache","lastProcessorIndexUpdated","priority","processorPropsUpdated","addProcessorByPriority","afterRegistered","subSteps","_steps","get","proc","newSubStep","first","second","concat","getSortedProcessorTypes","process","steps_1","findProcessorIndexByID","e_1","processorID","findIndex","processorIndex","setLastProcessorIndex","StorageExtractor","Extractor","ArrayToTabularTransformer","Transformer","arrayResponse","fromArray","ServerInitiator","Initiator","entries","serverStorageOptions","acc","StorageResponseToArrayTransformer","storageResponse","castData","PipelineUtils","Status","plugins","PluginManager","plugin","splice","order","PluginRenderer","list","component","Config","defaultConfig","_userConfig","updatedConfig","fromUserConfig","height","multiColumn","createFromUserConfig","createFromConfig","add","Footer","TD","formatter","eventEmitter","colSpan","handleClick","TR","getColumn","MessageRow","TBody","Loading","headerLength","Loaded","NativeSort","condition","direction","Sort","cellA","cellB","cmp","compare","sortedRows","compareWrapper","sorted","SortStore","multi","sortColumn","sortToggle","find","count","reset","remove","update","index_1","index_2","SortActions","ServerSort","sortProcessor","getOrCreateSortProcessor","updateStateFn","updateState","updateSortProcessorFn","currentColumn","sortedColumns","processorType","processors","getStepsByType","updateSortProcessor","preventDefault","stopPropagation","shiftKey","sortClassName","changeDirection","TH","isSortable","sortRef","which","onKeyDown","keyDown","THead","Table","table","__H","q","requestAnimationFrame","cancelAnimationFrame","useRef","isActive","HeaderContainer","headerRef","FooterContainer","footerRef","footer","configContext","Consumer","Provider","createContext","Container","processPipeline","adjustWidth","processPipelineFn","Grid","clearCache"],"mappings":"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"}