/*! Monio: io-event-stream.js
    v0.5.0 (c) 2020 Kyle Simpson
    MIT License: http://getify.mit-license.org
*/
!function UMD(e,n,r,t){"function"==typeof define&&define.amd?(r=Object.keys(r).map((e=>e.replace(/^\.\//,""))),define(e,r,t)):"undefined"!=typeof module&&module.exports?(r=Object.keys(r).map((e=>require(e))),module.exports=t(...r)):(r=Object.values(r).map((e=>n[e])),n[e]=t(...r))}("IOEventStream","undefined"!=typeof globalThis?globalThis:"undefined"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:new Function("return this")(),{"./lib/util.js":"MonioUtil","./io.js":"IO"},(function DEF(e,n){"use strict";var{isFunction:r,curry:t}=e;let i={};function getDeferred(){var e;return{pr:new Promise((n=>e=n)),next:e}}return i=t((function ioEventStream(e,t){return n((()=>{var{pr:n,next:i}=getDeferred();r(e.addEventListener)?e.addEventListener(t,handler,!1):r(e.addListener)?e.addListener(t,handler):r(e.on)&&e.on(t,handler);var d=r(e.removeEventListener)?e.removeEventListener.bind(e,t,handler,!1):r(e.removeListener)?e.removeListener.bind(e,t,handler):r(e.off)?e.off.bind(e,t,handler):()=>{};return async function*eventStream(){try{for(;;)yield n}finally{d()}}();function handler(e){var r=i;({pr:n,next:i}=getDeferred()),r(e)}}))})),i}));