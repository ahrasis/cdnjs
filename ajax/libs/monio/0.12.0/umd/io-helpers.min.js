!function(n,e,t,o){"function"==typeof define&&define.amd?(t=Object.keys(t).map(n=>n.replace(/^\.\//,"")),define(n,t,o)):"undefined"!=typeof module&&module.exports?(t=Object.keys(t).map(n=>require(n)),module.exports=o(...t)):(t=Object.values(t).map(n=>e[n]),e[n]=o(...t))}("IOHelpers","undefined"!=typeof globalThis?globalThis:"undefined"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:new Function("return this")(),{"./lib/util.js":"MonioUtil"},function(n){"use strict";var{isPromise:e}=n,t=new WeakSet;let o={};function i(n,e,...o){return IO(i=>r(i,n).chain(function(n){return n?(Array.isArray(e)?e:[e]).reduce((n,e)=>n.chain(n=>r(i,n).chain(n=>t.has(n)?IO.of(n):r(i,e))),IO.of()).chain(e=>IO.of(t.has(e)?e:n)):IO.of(n)}).chain(function n(e){return t=>!t&&e.length>0?r(i,e[0]).chain(n(e.slice(1))):IO.of(t)}(o)).run(i))}function r(n,e){if(e&&"object"==typeof e&&"function"==typeof e.chain){if(IO.is(e))return e;{let n=e&&"object"==typeof e&&"function"==typeof e.then?e.fold(IO.of,IO.of):e.chain(IO.of);return IO.is(n)?n:IO.of(e)}}return"function"==typeof e?r(n,e(n)):e&&"object"==typeof e&&"function"==typeof e.next?IO.do(e):IO.of(e)}return o.applyIO=function(n,e){return IO(()=>n.run(e))},o.doIO=function(n,...e){return e.length>0?IO(t=>IO.do(n(t,...e)).run(t)):IO.do(n)},o.doIOBind=function(n,e){var t=IO(()=>IO.do(n).run(e));return(...o)=>o.length>0?IO(()=>IO.do(n(e,...o)).run(e)):t},o.filterIOList=function(n,e){return e.reduce((e,t)=>e.chain(e=>n(t).map(n=>n?[...e,t]:e)),IO.of([]))},o.concatIOList=function(n){return n.reduce((n,e)=>n.map(n=>[...n,e]),IO.of([]))},o.iif=i,o.elif=function(n,e){return i(n,e)},o.els=function(n){return i(!0,n)},o.iReturn=function(n){return IO(e=>r(e,n).chain(n=>{var e={returned:n};return t.add(e),IO.of(e)}).run(e))},o.wasReturned=function(n){return t.has(n)},o.liftIO=r,o});