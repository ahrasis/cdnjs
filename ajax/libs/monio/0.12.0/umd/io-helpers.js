/*! Monio: io-helpers.js
    v0.12.0 (c) 2021 Kyle Simpson
    MIT License: http://getify.mit-license.org
*/
!function UMD(n,e,t,i){"function"==typeof define&&define.amd?(t=Object.keys(t).map((n=>n.replace(/^\.\//,""))),define(n,t,i)):"undefined"!=typeof module&&module.exports?(t=Object.keys(t).map((n=>require(n))),module.exports=i(...t)):(t=Object.values(t).map((n=>e[n])),e[n]=i(...t))}("IOHelpers","undefined"!=typeof globalThis?globalThis:"undefined"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:new Function("return this")(),{"./lib/util.js":"MonioUtil"},(function DEF(n){"use strict";var{isPromise:e}=n,t=new WeakSet;let i={};function iif(n,e,...i){return IO((o=>liftIO(o,n).chain((function doThens(n){return n?(Array.isArray(e)?e:[e]).reduce(((n,e)=>n.chain((n=>liftIO(o,n).chain((n=>t.has(n)?IO.of(n):liftIO(o,e)))))),IO.of()).chain((e=>IO.of(t.has(e)?e:n))):IO.of(n)})).chain(function doNextElse(n){return e=>!e&&n.length>0?liftIO(o,n[0]).chain(doNextElse(n.slice(1))):IO.of(e)}(i)).run(o)))}function liftIO(n,e){if(e&&"object"==typeof e&&"function"==typeof e.chain){if(IO.is(e))return e;{let n=e&&"object"==typeof e&&"function"==typeof e.then?e.fold(IO.of,IO.of):e.chain(IO.of);return IO.is(n)?n:IO.of(e)}}return"function"==typeof e?liftIO(n,e(n)):e&&"object"==typeof e&&"function"==typeof e.next?IO.do(e):IO.of(e)}return i.applyIO=function applyIO(n,e){return IO((()=>n.run(e)))},i.doIO=function doIO(n,...e){return e.length>0?IO((t=>IO.do(n(t,...e)).run(t))):IO.do(n)},i.doIOBind=function doIOBind(n,e){var t=IO((()=>IO.do(n).run(e)));return(...i)=>i.length>0?IO((()=>IO.do(n(e,...i)).run(e))):t},i.filterIOList=function filterIOList(n,e){return e.reduce(((e,t)=>e.chain((e=>n(t).map((n=>n?[...e,t]:e))))),IO.of([]))},i.concatIOList=function concatIOList(n){return n.reduce(((n,e)=>n.map((n=>[...n,e]))),IO.of([]))},i.iif=iif,i.elif=function elif(n,e){return iif(n,e)},i.els=function els(n){return iif(!0,n)},i.iReturn=function iReturn(n){return IO((e=>liftIO(e,n).chain((n=>{var e={returned:n};return t.add(e),IO.of(e)})).run(e)))},i.wasReturned=function wasReturned(n){return t.has(n)},i.liftIO=liftIO,i}));