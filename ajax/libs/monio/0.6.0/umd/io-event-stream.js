/*! Monio: io-event-stream.js
    v0.6.0 (c) 2020 Kyle Simpson
    MIT License: http://getify.mit-license.org
*/
!function UMD(e,n,t,r){"function"==typeof define&&define.amd?(t=Object.keys(t).map((e=>e.replace(/^\.\//,""))),define(e,t,r)):"undefined"!=typeof module&&module.exports?(t=Object.keys(t).map((e=>require(e))),module.exports=r(...t)):(t=Object.values(t).map((e=>n[e])),n[e]=r(...t))}("IOEventStream","undefined"!=typeof globalThis?globalThis:"undefined"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:new Function("return this")(),{"./lib/util.js":"MonioUtil","./io.js":"IO"},(function DEF(e,n){"use strict";var{isFunction:t,curry:r}=e;let i={};function getDeferred(){var e;return{pr:new Promise((n=>e=n)),next:e}}return i=r((function ioEventStream(e,r){return n((()=>{var n=[getDeferred()];t(e.addEventListener)?e.addEventListener(r,handler,!1):t(e.addListener)?e.addListener(r,handler):t(e.on)&&e.on(r,handler);var i=t(e.removeEventListener)?e.removeEventListener.bind(e,r,handler,!1):t(e.removeListener)?e.removeListener.bind(e,r,handler):t(e.off)?e.off.bind(e,r,handler):()=>{};return async function*eventStream(){try{for(;;)try{yield n[0].pr}finally{n.shift()}}finally{i(),n.length=0}}();function handler(e){var t=n[n.length-1];n.push(getDeferred()),t.next(e)}}))})),i}));