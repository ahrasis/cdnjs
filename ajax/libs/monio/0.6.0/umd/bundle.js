/*! Monio: bundle.js
    v0.6.0 (c) 2020 Kyle Simpson
    MIT License: http://getify.mit-license.org
*/
!function UMDBundle(n,t){for(let[i,e,r]of t)"function"==typeof define&&define.amd?(e=Object.keys(e).map((n=>n.replace(/^\.\//,""))),define(i,e,r)):"undefined"!=typeof module&&module.exports?(e=Object.keys(e).map((n=>require(n))),module.exports[i]=r(...e)):(e=Object.values(e).map((t=>n[t])),n[i]=r(...e))}("undefined"!=typeof globalThis?globalThis:"undefined"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:new Function("return this")(),[["Nothing",{},function DEF(){"use strict";var n={};let t={};function Nothing(){var t={map:noop,chain:noop,flatMap:noop,bind:noop,ap:noop,concat:noop,_inspect:function _inspect(){return`${t[Symbol.toStringTag]}()`},_is:function _is(t){return t===n},[Symbol.toStringTag]:"Nothing"};return t;function noop(){return t}}return t=Object.assign(Nothing,{of:Nothing,pure:Nothing,unit:Nothing,is:function is(t){return t&&"function"==typeof t._is&&t._is(n)},isEmpty:function isEmpty(n){return null==n}}),t}],["Just",{},function DEF(){"use strict";var n={};let t={};function Just(t){var i={map:function map(n){return Just(n(t))},chain:chain,flatMap:chain,bind:chain,ap:function ap(n){return n.map(t)},concat:function concat(n){return n.map((n=>t.concat(n)))},_inspect:function _inspect(){return`${i[Symbol.toStringTag]}(${_serialize(t)})`},_is:function _is(t){return t===n},[Symbol.toStringTag]:"Just"};return i;function chain(n){return n(t)}function _serialize(n){return"string"==typeof n?`"${n}"`:void 0===n?"":"function"==typeof n?n.name||"anonymous function":n&&"function"==typeof n._inspect?n._inspect():Array.isArray(n)?`[${n.map((n=>null==n?String(n):_serialize(n)))}]`:String(n)}}return t=Object.assign(Just,{of:Just,pure:Just,unit:Just,is:function is(t){return t&&"function"==typeof t._is&&t._is(n)}}),t}],["Maybe",{"./just.js":"Just","./nothing.js":"Nothing"},function DEF(n,t){"use strict";var i={};Object.assign(MaybeJust,n),Object.assign(MaybeNothing,t);let e={};function MaybeJust(n){return Maybe(n)}function MaybeNothing(){return Maybe(t())}function Maybe(t){var e=t,r=MaybeJust.is(e)&&!is(e),o=MaybeNothing.is(e)&&!is(e);r||o?t=r?e.chain((n=>n)):void 0:(e=n(t),r=!0);var u={map:function map(n){return r?Maybe(e.map(n)):u},chain:chain,flatMap:chain,bind:chain,ap:function ap(n){return r?n.map(t):u},concat:function concat(n){return r?n.map((n=>t.concat(n))):u},fold:function fold(n,i){return r?i(t):n(t)},_inspect:function _inspect(){var n=r?e._inspect().match(/^Just\((.*)\)$/)[1]:"";return`${u[Symbol.toStringTag]}(${n})`},_is:function _is(n){return n===i||e._is(n)},get[Symbol.toStringTag](){return`Maybe:${e[Symbol.toStringTag]}`}};return u;function chain(n){return r?e.chain(n):u}}function is(n){return n&&"function"==typeof n._is&&n._is(i)}return e=Object.assign(Maybe,{Just:MaybeJust,Nothing:MaybeNothing,of:Maybe,pure:Maybe,unit:Maybe,is:is,from:function from(n){return MaybeNothing.isEmpty(n)?MaybeNothing():Maybe(n)}}),e}],["MonioUtil",{},function DEF(){"use strict";let n={};function isFunction(n){return n&&"function"==typeof n}function isPromise(n){return n&&"function"==typeof n.then}function curry(n,t=n.length){return function nextCurried(i){return(...e)=>{var r=[...i,...e];return r.length>=t?n(...r):nextCurried(r)}}([])}return n={isFunction:isFunction,isPromise:isPromise,curry:curry},n.isFunction=isFunction,n.isPromise=isPromise,n.curry=curry,n}],["Either",{"./just.js":"Just"},function DEF(n){"use strict";var t={};Left.is=function LeftIs(n){return is(n)&&!n._is_right()},Right.is=function RightIs(n){return is(n)&&n._is_right()};let i={};function Left(n){return LeftOrRight(n,!1)}function Right(n){return LeftOrRight(n,!0)}function LeftOrRight(i,e=!0){var r={map:function map(n){return e?LeftOrRight(n(i),e):r},chain:chain,flatMap:chain,bind:chain,ap:function ap(n){return e?n.map(i):r},concat:function concat(n){return e?n.map((n=>i.concat(n))):r},fold:function fold(n,t){return e?t(i):n(i)},_inspect:function _inspect(){var t=n(i)._inspect().match(/^Just\((.*)\)$/)[1];return`${r[Symbol.toStringTag]}(${t})`},_is:function _is(n){return n===t},_is_right:function _is_right(){return e},get[Symbol.toStringTag](){return"Either:"+(e?"Right":"Left")}};return r;function chain(n){return e?n(i):r}}function is(n){return n&&"function"==typeof n._is&&n._is(t)}return i=Object.assign((function Either(n){return LeftOrRight(n,!0)}),{Left:Left,Right:Right,of:Right,pure:Right,unit:Right,is:is,fromFoldable:function fromFoldable(n){return n.fold(Left,Right)}}),i}],["IO",{"./lib/util.js":"MonioUtil","./either.js":"Either"},function DEF(n,t){"use strict";var{isPromise:i}=n,e={};let r={};function IO(n){var t={map:function map(t){return IO((e=>{var r=n(e);return i(r)?r.then(t):t(r)}))},chain:chain,flatMap:chain,bind:chain,ap:function ap(t){return t.map(n)},concat:function concat(t){return IO((e=>{var r=n(e),o=t.run(e);return i(r)||i(o)?Promise.all([r,o]).then((([n,t])=>n.concat(t))):r.concat(o)}))},run:function run(t){return n(t)},_inspect:function _inspect(){return`${t[Symbol.toStringTag]}(${"function"==typeof n?n.name||"anonymous function":n&&"function"==typeof n._inspect?n._inspect():val})`},_is:function _is(n){return n===e},[Symbol.toStringTag]:"IO"};return t;function chain(t){return IO((e=>{var r=n(e);return i(r)?r.then(t).then((n=>n.run(e))):t(r).run(e)}))}}function processNext(n,t,e){return new Promise((async(r,o)=>{try{await function monadFlatMap(n,t){return n["flatMap"in n?"flatMap":"chain"in n?"chain":"bind"](t)}(i(t)?await t:t,(t=>IO((()=>n(t).then(r,o))))).run(e)}catch(n){o(n)}}))}function getIterator(n,t){return"function"==typeof n?n(t):n&&"object"==typeof n&&"function"==typeof n.next?n:void 0}return r=Object.assign(IO,{of:function of(n){return IO((()=>n))},is:function is(n){return n&&"function"==typeof n._is&&n._is(e)},do:function $do(n){return IO((t=>{var e=getIterator(n,t);return async function next(n){var r=e.next(i(n)?await n:n);return(r=i(r)?await r:r).done?r.value:processNext(next,r.value,t)}()}))},doEither:function doEither(n){return IO((e=>{var r=getIterator(n,e);return async function next(n){try{n=i(n)?await n:n;let o=t.Left.is(n)?r.throw(n):r.next(n);o=i(o)?await o:o;let u=o.done&&i(o.value)?await o.value:o.value;return o.done?t.Right.is(u)?u:t.Right(u):processNext(next,u,e).catch(next)}catch(n){throw t.Left.is(n)?n:t.Left(n)}}()}))}}),r.RIO=IO,r.Reader=IO,r}],["IOEventStream",{"./lib/util.js":"MonioUtil","./io.js":"IO"},function DEF(n,t){"use strict";var{isFunction:i,curry:e}=n;let r={};function getDeferred(){var n;return{pr:new Promise((t=>n=t)),next:n}}return r=e((function ioEventStream(n,e){return t((()=>{var t=[getDeferred()];i(n.addEventListener)?n.addEventListener(e,handler,!1):i(n.addListener)?n.addListener(e,handler):i(n.on)&&n.on(e,handler);var r=i(n.removeEventListener)?n.removeEventListener.bind(n,e,handler,!1):i(n.removeListener)?n.removeListener.bind(n,e,handler):i(n.off)?n.off.bind(n,e,handler):()=>{};return async function*eventStream(){try{for(;;)try{yield t[0].pr}finally{t.shift()}}finally{r(),t.length=0}}();function handler(n){var i=t[t.length-1];t.push(getDeferred()),i.next(n)}}))})),r}],["AsyncEither",{"./lib/util.js":"MonioUtil","./either.js":"Either"},function DEF(n,t){"use strict";var{isPromise:i}=n,e={};let r={};function AsyncRight(n){return AsyncEither(t.Right(n))}function AsyncEither(n){return fromPromise(i(n)?n:t.Left.is(n)?Promise.reject(n):Promise.resolve(n))}function fromPromise(n){n=splitPromise(n);var r={map:function map(t){var handle=n=>{var _doMap=t=>{var e=n.chain(t);return i(e)?splitPromise(e):n._is_right()?e:Promise.reject(e)};return i(t)?t.then(_doMap):_doMap(t)};return AsyncEither(n.then(handle,handle))},chain:chain,flatMap:chain,bind:chain,ap:function ap(t){return t.map(n)},concat:function concat(t){return t.map((t=>n.then((n=>n.concat(t)))))},fold:function fold(t,i){var handle=n=>t=>t.fold((t=>Promise.reject(n(t))),n);return n.then(handle(i),handle(t))},_inspect:function _inspect(){return`${r[Symbol.toStringTag]}(Promise)`},_is:function _is(n){return n===e},[Symbol.toStringTag]:"AsyncEither"};return r;function chain(e){var handle=n=>{var _doChain=i=>{var e=n.chain(i);return is(e)?e.fold((n=>n),(n=>n)):t.is(e)?e.fold((n=>Promise.reject(n)),(n=>n)):e};return i(e)?e.then(_doChain):_doChain(e)};return AsyncEither(n.then(handle,handle))}}function is(n){return n&&"function"==typeof n._is&&n._is(e)}function splitPromise(n){return n.then((n=>t.is(n)?n:t.Right(n)),(n=>Promise.reject(t.is(n)?n:t.Left(n))))}return r=Object.assign(AsyncEither,{Left:function AsyncLeft(n){return AsyncEither(t.Left(n))},Right:AsyncRight,of:AsyncRight,pure:AsyncRight,unit:AsyncRight,is:is,fromFoldable:function fromFoldable(n){return n.fold(AsyncEither.Left,AsyncEither.Right)},fromPromise:fromPromise}),r}],["Monio",{"./just.js":"Just","./nothing.js":"Nothing","./maybe.js":"Maybe","./either.js":"Either","./async-either.js":"AsyncEither","./io.js":"IO","./io-event-stream.js":"IOEventStream"},function DEF(n,t,i,e,r,o,u){"use strict";let c={};return c.Just=n,c.Nothing=t,c.Maybe=i,c.Either=e,c.AsyncEither=r,c.IO=o,c.Reader=o,c.RIO=o,c.IOEventStream=u,c}],["Mz_909649416",{},function DEF(){}]]);