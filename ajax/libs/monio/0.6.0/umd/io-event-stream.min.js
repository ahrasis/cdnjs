!function(e,n,t,i){"function"==typeof define&&define.amd?(t=Object.keys(t).map(e=>e.replace(/^\.\//,"")),define(e,t,i)):"undefined"!=typeof module&&module.exports?(t=Object.keys(t).map(e=>require(e)),module.exports=i(...t)):(t=Object.values(t).map(e=>n[e]),n[e]=i(...t))}("IOEventStream","undefined"!=typeof globalThis?globalThis:"undefined"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:new Function("return this")(),{"./lib/util.js":"MonioUtil","./io.js":"IO"},function(e,n){"use strict";var{isFunction:t,curry:i}=e;let r={};function o(){var e;return{pr:new Promise(n=>e=n),next:e}}return r=i(function(e,i){return n(()=>{var n=[o()];t(e.addEventListener)?e.addEventListener(i,d,!1):t(e.addListener)?e.addListener(i,d):t(e.on)&&e.on(i,d);var r=t(e.removeEventListener)?e.removeEventListener.bind(e,i,d,!1):t(e.removeListener)?e.removeListener.bind(e,i,d):t(e.off)?e.off.bind(e,i,d):()=>{};return async function*(){try{for(;;)try{yield n[0].pr}finally{n.shift()}}finally{r(),n.length=0}}();function d(e){var t=n[n.length-1];n.push(o()),t.next(e)}})})});